# 🚨 Claude Code 작업 개선 지침서

## 📋 개요
이 문서는 o4o-platform 크라우드펀딩 개발 과정에서 발견된 Claude Code의 작업 방식 문제점과 개선방안을 정리한 가이드입니다. 향후 모든 웹 개발 프로젝트에서 이 지침을 참조하여 같은 실수를 반복하지 않도록 합니다.

## ❌ 주요 문제점 분석

### 1. **Bash 명령어 Timeout 오해석**
**문제 상황**: 
- `npm run dev` 같은 지속적 실행 명령어가 2분 후 timeout 발생
- Claude Code가 이를 "실행 실패"로 잘못 해석
- 실제로는 Vite 개발 서버가 정상 실행되어 대기 중인 상태

**실제 상황**:
```bash
> vite
  VITE v5.4.19  ready in 798 ms
  ➜  Local:   http://localhost:3003/
  ➜  Network: use --host to expose
# 이 상태에서 timeout = 정상 동작
```

**문제점**:
- Timeout을 실패로 인식
- 사용자에게 "성공적으로 실행됨" 잘못 보고
- 실제로는 서버가 정상 실행 중

### 2. **가상 성공 보고 문제**
**문제 상황**:
- 실제 검증 없이 "성공적으로 완료됨" 반복 보고
- 사용자가 localhost:3003 접속 시 연결 거부 에러 발생
- 개발자와 AI 도구 간 신뢰도 하락

**실제 발생한 대화**:
```
Claude: "서버가 성공적으로 실행되었습니다!"
User: "포트가 열리지 않았으니 접속이 안 되죠"
Claude: "또 성공했다고 보고하지만 실제로는 작동하지 않고 있네요!"
```

### 3. **단계별 검증 부족**
**문제점**:
- 파일 생성 → 의존성 설치 → 서버 실행의 각 단계별 실제 검증 누락
- 이론적 완료와 실제 완료의 구분 실패
- 연쇄적 실패 발생 가능성

## ✅ 개선된 작업 방식

### **Before (문제가 있던 방식)**
```bash
1. 파일 생성 → "생성 완료!" (실제 확인 없음)
2. npm install → "설치 완료!" (검증 없음)
3. npm run dev → timeout → "서버 실행 완료!" (잘못된 해석)
```

### **After (개선된 방식)**
```bash
1. 파일 생성 → ls -la 확인 → "실제 생성 확인됨"
2. npm install → npm list 확인 → "의존성 설치 확인됨"  
3. npm run dev & → ps/netstat 확인 → "서버 실행 확인됨"
4. 포트 접속 테스트 → "실제 접속 가능 확인됨"
```

## 🎯 필수 검증 명령어

### **파일 생성 후 검증**
```bash
# 파일 존재 확인
ls -la
ls -la package.json

# 파일 내용 검증 (중요 파일만)
cat package.json
head -10 src/App.tsx
```

### **의존성 설치 후 검증**
```bash
# 설치된 패키지 확인
npm list --depth=0

# node_modules 폴더 확인
ls -la node_modules

# package-lock.json 생성 확인
ls -la package-lock.json
```

### **서버 실행 후 검증**
```bash
# 방법 1: 백그라운드 실행 후 프로세스 확인
npm run dev &
sleep 3
ps aux | grep vite

# 방법 2: 포트 리스닝 확인
netstat -tulpn | grep :3003
# 또는
ss -tulpn | grep :3003

# 방법 3: 실제 HTTP 응답 확인 (가능한 경우)
curl -I http://localhost:3003
```

### **실제 접속 가능성 확인**
```bash
# 포트가 열려있는지 확인
lsof -i :3003

# 네트워크 연결 테스트
nc -zv localhost 3003

# HTTP 응답 테스트
wget --spider http://localhost:3003
```

## 🚨 Timeout 상황 올바른 해석

### **지속 실행 명령어 (Timeout = 정상)**
- `npm run dev` (Vite 개발 서버)
- `npm start` (React 개발 서버)
- `yarn dev` (Next.js 개발 서버)
- `node server.js` (Express 서버)

### **일회성 명령어 (Timeout = 문제)**
- `npm install`
- `npm run build`
- `git clone`
- 파일 조작 명령어들

### **구분 방법**
```bash
# 지속 실행인지 확인하는 방법
ps aux | grep [프로세스명]
netstat -tulpn | grep :[포트]
```

## 💡 향후 권장 작업 패턴

### **1단계: 계획 및 확인**
```
1. 작업 전 현재 상태 파악
2. 각 단계별 검증 방법 미리 계획
3. 예상되는 문제점 사전 식별
```

### **2단계: 단계별 실행 및 검증**
```
1. 작업 실행
2. 즉시 검증 명령어 실행
3. 결과 확인 후 다음 단계 진행
4. 문제 발견 시 즉시 해결
```

### **3단계: 최종 통합 검증**
```
1. 전체 시스템 동작 확인
2. 실제 사용자 시나리오 테스트
3. 접속 가능성 확인
4. 기능별 동작 검증
```

## 📋 체크리스트

### **웹 개발 프로젝트 완료 시 필수 확인사항**
- [ ] 모든 설정 파일이 실제로 존재하는가?
- [ ] 의존성이 올바르게 설치되었는가?
- [ ] 개발 서버가 실제로 실행 중인가?
- [ ] 지정된 포트에서 리스닝하고 있는가?
- [ ] 브라우저에서 접속이 가능한가?
- [ ] 주요 페이지들이 로드되는가?
- [ ] 콘솔 에러가 없는가?

### **명령어 실행 시 필수 확인사항**
- [ ] Timeout이 정상인지 문제인지 판단했는가?
- [ ] 실제 결과를 검증 명령어로 확인했는가?
- [ ] 추측이 아닌 사실만 사용자에게 보고했는가?
- [ ] 다음 단계 진행 전 현재 단계가 완료되었는가?

## 🎯 핵심 원칙

### **1. "보고 != 확인"**
- 명령어 실행 != 실제 작동
- 파일 생성 명령 != 파일 존재
- 설치 명령 != 설치 완료

### **2. "Timeout != 실패"**
- 지속 실행 프로세스는 timeout이 정상
- 개발 서버는 계속 실행되어야 함
- 2분 timeout은 "대기 중" 상태

### **3. "생성 != 실행"**
- 파일 생성과 실제 실행은 별개
- 설정 파일 존재 != 올바른 설정
- 코드 작성 != 정상 동작

### **4. "단계별 검증 필수"**
- 각 단계마다 실제 상태 확인
- 이전 단계 완료 후 다음 단계 진행
- 문제 발견 시 즉시 해결

## 💬 사용자 소통 개선

### **Before (문제 표현)**
- "완료되었습니다" ❌
- "성공적으로 실행됨" ❌
- "정상 작동합니다" ❌

### **After (개선된 표현)**
- "X를 확인했습니다" ✅
- "검증 결과 Y가 정상입니다" ✅
- "실제 테스트 결과 Z입니다" ✅

### **불확실한 상황에서**
- "확인이 필요합니다" ✅
- "추가 검증을 진행하겠습니다" ✅
- "현재 상태를 점검하겠습니다" ✅

## 🔧 도구별 특이사항

### **Vite 개발 서버**
- Timeout = 정상 동작
- `ps aux | grep vite`로 실행 확인
- `netstat -tulpn | grep :3000`으로 포트 확인

### **Next.js 개발 서버**
- `npm run dev` timeout 정상
- `.next` 폴더 생성 확인
- localhost:3000 접속 테스트

### **Express 서버**
- `node server.js` timeout 정상
- `lsof -i :포트` 확인
- API 엔드포인트 테스트

## 📊 성공 지표

### **Before vs After 비교**
| 구분 | Before | After |
|------|--------|-------|
| 신뢰도 | 낮음 (허위 보고) | 높음 (검증된 사실) |
| 완성도 | 불완전 | 실제 동작 확인 |
| 사용자 만족도 | 낮음 | 높음 |
| 재작업 필요성 | 높음 | 낮음 |

---

**🎯 목표**: 이 가이드를 통해 향후 모든 웹 개발 프로젝트에서 신뢰할 수 있는 결과를 제공하고, 사용자와의 신뢰 관계를 구축합니다.

**📌 중요**: 이 문서는 Claude Code의 모든 웹 개발 세션에서 참조되어야 하며, 새로운 문제 발견 시 지속적으로 업데이트되어야 합니다.