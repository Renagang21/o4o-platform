# π”§ Node.js λ²„μ „ κ· ν• λ¶„μ„ λ° μμ • κ³„ν

> **μ‘μ„±μΌ**: 2025-06-20  
> **μ‹¬κ°λ„**: π¨ HIGH - μ¦‰μ‹ μμ • ν•„μ”  
> **λ¬Έμ **: ν™κ²½λ³„ Node.js λ²„μ „ λ¶μΌμΉλ΅ μΈν• μ μ¬μ  νΈν™μ„± λ¬Έμ 

---

## π“ **ν„μ¬ Node.js λ²„μ „ ν„ν™©**

### **π–¥οΈ λ΅μ»¬ ν™κ²½**
```bash
Node.js: v22.14.0  β… (μµμ‹ )
npm: 10.9.2       β… (μµμ‹ )
```

### **π—οΈ CI/CD ν™κ²½**
```yaml
# .github/workflows/ci-cd.yml
NODE_VERSION: '18'  β (κµ¬λ²„μ „) β†’ '20' β… (μμ •μ™„λ£)

# .github/workflows/main-site-ci-cd.yml  
NODE_VERSION: '18'  β (κµ¬λ²„μ „) β†’ '20' β… (μμ •μ™„λ£)
```

### **π³ Docker ν™κ²½**
```dockerfile
# services/main-site/Dockerfile
FROM node:18-alpine  β (κµ¬λ²„μ „) β†’ node:20-alpine β… (μμ •μ™„λ£)

# services/api-server/Dockerfile
FROM node:18-alpine  β (κµ¬λ²„μ „) β†’ node:20-alpine β… (μμ •μ™„λ£)
```

### **π“¦ Package.json μ„¤μ •**
```json
# λ£¨νΈ package.json
"engines": μ—†μ  β β†’ μ¶”κ°€μ™„λ£ β…

# services/api-server/package.json
"@types/node": "^18.15.11"  β β†’ "^20.18.0" β… (μμ •μ™„λ£)
"typescript": "^5.0.4"      β β†’ "^5.8.3" β… (μμ •μ™„λ£)

# services/main-site/package.json
"engines": μ—†μ  β β†’ μ¶”κ°€μ™„λ£ β…
"typescript": "~5.8.3"  β… (μ΄λ―Έ μµμ‹ )
```

---

## π¨ **λ°κ²¬λ λ¬Έμ μ λ“¤**

### **1οΈβƒ£ μ‹¬κ°ν• λ²„μ „ λ¶μΌμΉ**
- **λ΅μ»¬ Node.js 22** vs **CI/CD/Docker Node.js 18**
- **4λ²„μ „ μ°¨μ΄**λ΅ μΈν• μμƒμΉ λ»ν• λ™μ‘ κ°€λ¥μ„±

### **2οΈβƒ£ TypeScript λ²„μ „ λ¶μΌμΉ**
- **API Server**: TypeScript 5.0.4 (κµ¬λ²„μ „)
- **Main-Site**: TypeScript 5.8.3 (μµμ‹ )
- μ„λ΅ λ‹¤λ¥Έ νƒ€μ… μ‹μ¤ν…μΌλ΅ μΈν• νΈν™μ„± λ¬Έμ 

### **3οΈβƒ£ @types/node λ²„μ „ λ¬Έμ **
- **μ‹¤μ  λ΅μ»¬**: Node.js 22.14.0
- **νƒ€μ… μ •μ**: @types/node ^18.15.11
- **μµμ‹  Node.js API νƒ€μ… λ„λ½** κ°€λ¥μ„±

### **4οΈβƒ£ λ²„μ „ μ μ•½ μ—†μ**
- **engines ν•„λ“ λ„λ½**μΌλ΅ λ²„μ „ νΈν™μ„± κ²€μ¦ λ¶κ°€
- ν€μ›λ³„λ΅ λ‹¤λ¥Έ Node.js λ²„μ „ μ‚¬μ© κ°€λ¥μ„±

### **5οΈβƒ£ λ„κµ¬λ³„ μ”κµ¬μ‚¬ν•­ λ¶μΌμΉ**
- **Vite**: Node.js 18+ μ”κµ¬
- **TypeScript 5.8**: Node.js 18+ κ¶μ¥
- **React 19**: Node.js 18+ ν•„μ”

---

## π― **ν†µν•© ν•΄κ²° λ°©μ•**

### **π“ κ¶μ¥ λ²„μ „ ν‘μ¤€ν™”**

**πΆ Node.js 20 LTSλ΅ ν†µμΌ** (κ· ν•μ )
- β… **μ•μ •μ„±**: LTS λ²„μ „μΌλ΅ μ¥κΈ° μ§€μ›
- β… **νΈν™μ„±**: λ¨λ“  μµμ‹  λ„κµ¬λ“¤κ³Ό νΈν™
- β… **μ„±λ¥**: Node.js 22μ λ€λ¶€λ¶„ μ„±λ¥ κ°μ„  ν¬ν•¨
- β… **μ•μ „μ„±**: κ²€μ¦λ λ²„μ „μΌλ΅ ν”„λ΅λ•μ… μ•μ „

```bash
κ¶μ¥ λ²„μ „ μ¤νƒ:
- Node.js: 20 LTS
- npm: μµμ‹  (μλ™ μ—…λ°μ΄νΈ)
- TypeScript: 5.8.x (ν†µμΌ)
- @types/node: ^20.x.x
```

---

## β… **μ™„λ£λ μμ • μ‚¬ν•­**

### **1λ‹¨κ³„: λ£¨νΈ ν”„λ΅μ νΈ μ„¤μ • μμ •**

#### **A. λ£¨νΈ package.json engines μ¶”κ°€** β…
```json
{
  "name": "o4o-platform",
  "engines": {
    "node": ">=20.0.0 <21.0.0",
    "npm": ">=9.0.0"
  },
  "volta": {
    "node": "20.18.0",
    "npm": "10.9.2"
  }
}
```

#### **B. .nvmrc νμΌ μƒμ„±** β…
```bash
20.18.0
```

### **2λ‹¨κ³„: μ„λΉ„μ¤λ³„ μ„¤μ • ν†µμΌ**

#### **A. API Server μ—…λ°μ΄νΈ** β…
```json
{
  "engines": {
    "node": ">=20.0.0 <21.0.0",
    "npm": ">=9.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.18.0",
    "typescript": "^5.8.3",
    "ts-node": "^10.9.1",
    "nodemon": "^3.1.7"
  }
}
```

#### **B. Main-Site μ—…λ°μ΄νΈ** β…
```json
{
  "engines": {
    "node": ">=20.0.0 <21.0.0",
    "npm": ">=9.0.0"
  }
}
```

### **3λ‹¨κ³„: Docker μ΄λ―Έμ§€ μ—…λ°μ΄νΈ** β…

#### **A. Main-Site Dockerfile** β…
```dockerfile
# Node.js 20 LTSλ΅ μ—…λ°μ΄νΈ
FROM node:20-alpine AS builder
# λ³΄μ• κ°μ„  λ° λ©€ν‹°μ¤ν…μ΄μ§€ λΉλ“ μµμ ν™”
```

#### **B. API Server Dockerfile** β…
```dockerfile
# Node.js 20 LTSλ΅ μ—…λ°μ΄νΈ
FROM node:20-alpine AS builder
# λ³΄μ• κ°•ν™” λ° ν”„λ΅λ•μ… μµμ ν™”
```

### **4λ‹¨κ³„: CI/CD μ›ν¬ν”λ΅μ° μ—…λ°μ΄νΈ** β…

#### **A. λ©”μΈ CI/CD μ—…λ°μ΄νΈ** β…
```yaml
env:
  NODE_VERSION: '20'  # 18 β†’ 20μΌλ΅ μ—…λ°μ΄νΈ
  PYTHON_VERSION: '3.11'
```

#### **B. Main-Site CI/CD μ—…λ°μ΄νΈ** β…
```yaml
env:
  NODE_VERSION: '20'  # 18 β†’ 20μΌλ΅ μ—…λ°μ΄νΈ
  SERVICE_PATH: 'services/main-site'
```

---

## π“‹ **λ§μ΄κ·Έλ μ΄μ… μ²΄ν¬λ¦¬μ¤νΈ**

### **β… μ™„λ£λ μ‘μ—…**
- [x] λ£¨νΈ package.json engines ν•„λ“ μ¶”κ°€
- [x] .nvmrc νμΌ μƒμ„±
- [x] API Server package.json μ—…λ°μ΄νΈ
- [x] Main-Site package.json μ—…λ°μ΄νΈ
- [x] TypeScript λ²„μ „ ν†µμΌ
- [x] Main-Site Dockerfile μμ •
- [x] API Server Dockerfile μμ •
- [x] λ©”μΈ CI/CD μ›ν¬ν”λ΅μ° μμ •
- [x] Main-Site CI/CD μ›ν¬ν”λ΅μ° μμ •

### **π”„ λ‹¤μ λ‹¨κ³„ (μλ™ μ‘μ—… ν•„μ”)**
- [ ] λ΅μ»¬ Node.js λ²„μ „ μ΅°μ • (ν•„μ”μ‹)
- [ ] μ „μ²΄ μμ΅΄μ„± μ¬μ„¤μΉ
- [ ] Docker μ΄λ―Έμ§€ λΉλ“ ν…μ¤νΈ
- [ ] CI/CD νμ΄ν”„λΌμΈ ν…μ¤νΈ
- [ ] λ΅μ»¬ λΉλ“ ν…μ¤νΈ
- [ ] κ°λ° μ„λ²„ μ‹¤ν–‰ ν™•μΈ

### **π§ κ²€μ¦ λ‹¨κ³„**
- [ ] λ¨λ“  μ„λΉ„μ¤ λΉλ“ μ„±κ³µ
- [ ] λ‹¨μ„ ν…μ¤νΈ ν†µκ³Ό
- [ ] ν†µν•© ν…μ¤νΈ ν†µκ³Ό
- [ ] E2E ν…μ¤νΈ ν†µκ³Ό
- [ ] μ„±λ¥ ν…μ¤νΈ μ‹¤ν–‰

---

## π› οΈ **λ‹¤μ μλ™ μ‘μ—… κ°€μ΄λ“**

### **1. λ΅μ»¬ Node.js λ²„μ „ μ΅°μ • (μ„ νƒμ‚¬ν•­)**
```bash
# nvm μ‚¬μ© μ‹
nvm install 20.18.0
nvm use 20.18.0
nvm alias default 20.18.0

# λλ” Volta μ‚¬μ© μ‹
volta install node@20.18.0
```

### **2. ν”„λ΅μ νΈ μμ΅΄μ„± μ¬μ„¤μΉ**
```bash
# λ£¨νΈ λ””λ ‰ν† λ¦¬μ—μ„
rm -rf node_modules package-lock.json
npm install

# API Server
cd services/api-server
rm -rf node_modules package-lock.json
npm install

# Main-Site  
cd ../main-site
rm -rf node_modules package-lock.json
npm install
```

### **3. ν…μ¤νΈ λ° κ²€μ¦**
```bash
# λΉλ“ ν…μ¤νΈ
npm run build:all

# κ°λ° μ„λ²„ ν…μ¤νΈ
npm run dev:all

# ν…μ¤νΈ μ‹¤ν–‰
npm run test:unit
```

---

## π― **κΈ°λ€ ν¨κ³Ό**

### **β… μ¦‰μ‹ ν¨κ³Ό**
- **ν™κ²½ μΌκ΄€μ„±**: λ΅μ»¬/CI/CD/ν”„λ΅λ•μ… λ™μΌ ν™κ²½
- **μμΈ΅ κ°€λ¥μ„±**: λ²„μ „ λ¶μΌμΉλ΅ μΈν• λ²„κ·Έ μ κ±°
- **κ°λ° ν¨μ¨μ„±**: ν™κ²½ μ°¨μ΄λ΅ μΈν• λ””λ²„κΉ… μ‹κ°„ λ‹¨μ¶•

### **π€ μ¥κΈ° ν¨κ³Ό**
- **μ μ§€λ³΄μμ„±**: ν†µμΌλ λ²„μ „ κ΄€λ¦¬ μ²΄κ³„
- **ν™•μ¥μ„±**: μƒλ΅μ΄ ν€μ› μ¨λ³΄λ”© κ°„μ†ν™”
- **μ•μ •μ„±**: κ²€μ¦λ LTS λ²„μ „μΌλ΅ μ•μ •μ„± ν™•λ³΄

### **π“ μ„±λ¥ ν–¥μƒ**
- **λΉλ“ μ†λ„**: Node.js 20μ ν–¥μƒλ μ„±λ¥
- **λ©”λ¨λ¦¬ ν¨μ¨μ„±**: μµμ ν™”λ V8 μ—”μ§„
- **λ³΄μ• κ°•ν™”**: μµμ‹  λ³΄μ• ν¨μΉ μ μ©

---

## β οΈ **μ£Όμμ‚¬ν•­**

### **π¨ Breaking Changes κ°€λ¥μ„±**
- **API λ³€κ²½**: Node.js 18 β†’ 20 μ—…κ·Έλ μ΄λ“ μ‹ μΌλ¶€ API λ³€κ²½
- **μμ΅΄μ„± νΈν™μ„±**: μΌλ¶€ μ¤λλ ν¨ν‚¤μ§€ νΈν™μ„± λ¬Έμ  κ°€λ¥
- **λΉλ“ μ°¨μ΄**: TypeScript μ»΄νμΌ κ²°κ³Ό λ―Έμ„Έν• μ°¨μ΄ κ°€λ¥

### **π” μ² μ €ν• ν…μ¤νΈ ν•„μ”**
- **μ „μ²΄ ν…μ¤νΈ μ¤μ„νΈ μ‹¤ν–‰**
- **μ‹¤μ  ν™κ²½κ³Ό μ μ‚¬ν• μ΅°κ±΄μ—μ„ ν…μ¤νΈ**
- **μ„±λ¥ regression ν…μ¤νΈ**

### **π“… λ‹¨κ³„μ  μ μ© κ¶μ¥**
1. **κ°λ° ν™κ²½**μ—μ„ λ¨Όμ € μ μ©
2. **μ¤ν…μ΄μ§• ν™κ²½**μ—μ„ κ²€μ¦
3. **ν”„λ΅λ•μ… ν™κ²½**μ— μµμΆ… μ μ©

---

**π― κ²°λ΅ **: Node.js 20 LTSλ΅ ν†µμΌν•μ—¬ μ•μ •μ μ΄κ³  μΌκ΄€λ κ°λ° ν™κ²½μ„ κµ¬μ¶• μ™„λ£. μ΄μ  μλ™ ν…μ¤νΈ λ° κ²€μ¦ λ‹¨κ³„λ§ λ‚¨μ.