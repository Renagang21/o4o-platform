import{r,j as s,N as v,O as b,L as N,a0 as y}from"./vendor-react-DvQwHzv0.js";import{f as x}from"./index-CVCKDYFv.js";import"./vendor-query-_r4eu9Fw.js";import"./vendor-utils-B_3c5FpR.js";import"./vendor-ui-CSqCgoPn.js";import"./vendor-socket-DgcwqWsT.js";const I=({products:e,autoplay:l=!1,interval:c=5e3})=>{const[m,n]=r.useState(0),[h,g]=r.useState(!1),d=r.useRef(null),o=r.useRef();r.useEffect(()=>(l&&!h&&e.length>1&&(o.current=setInterval(()=>{n(a=>(a+1)%e.length)},c)),()=>{o.current&&clearInterval(o.current)}),[l,h,e.length,c]);const f=()=>{n(a=>(a-1+e.length)%e.length)},u=()=>{n(a=>(a+1)%e.length)},j=a=>{n(a)};if(e.length===0)return s.jsx("div",{className:"text-gray-500",children:"No products to display"});const t=4;return s.jsxs("div",{className:"relative",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[s.jsx("div",{className:"overflow-hidden rounded-lg",children:s.jsx("div",{ref:d,className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${m*(100/t)}%)`},children:e.map(a=>s.jsx("div",{className:"w-full md:w-1/2 lg:w-1/4 px-2 flex-shrink-0",children:s.jsx(w,{product:a})},a.id))})}),e.length>t&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:f,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-2 rounded-r-lg shadow-lg transition-all z-10","aria-label":"Previous product",children:s.jsx(v,{className:"w-5 h-5"})}),s.jsx("button",{onClick:u,className:"absolute right-0 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 p-2 rounded-l-lg shadow-lg transition-all z-10","aria-label":"Next product",children:s.jsx(b,{className:"w-5 h-5"})})]}),e.length>t&&s.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:Array.from({length:Math.ceil(e.length/t)}).map((a,i)=>s.jsx("button",{onClick:()=>j(i*t),className:`w-2 h-2 rounded-full transition-all ${Math.floor(m/t)===i?"bg-blue-600 w-8":"bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Go to slide ${i+1}`},i))})]})},w=({product:e})=>{const l=e.compareAtPrice&&e.compareAtPrice>e.price?Math.round((e.compareAtPrice-e.price)/e.compareAtPrice*100):0;return s.jsx(N,{to:`/products/${e.slug||e.id}`,className:"block group",children:s.jsxs("div",{className:"bg-white rounded-lg border hover:shadow-lg transition-all duration-200 h-full",children:[s.jsxs("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden bg-gray-200 rounded-t-lg relative",children:[e.images&&e.images[0]?s.jsx("img",{src:e.images[0].url,alt:e.name,className:"object-cover object-center w-full h-full group-hover:scale-105 transition-transform duration-200",loading:"lazy"}):s.jsx("div",{className:"flex items-center justify-center h-48",children:s.jsx(y,{className:"w-10 h-10 text-gray-400"})}),l>0&&s.jsxs("span",{className:"absolute top-2 right-2 px-2 py-1 text-xs font-medium bg-red-500 text-white rounded",children:["-",l,"%"]})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1",children:e.name}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-base font-semibold text-gray-900",children:x(e.price)}),e.compareAtPrice&&e.compareAtPrice>e.price&&s.jsx("span",{className:"text-sm text-gray-500 line-through",children:x(e.compareAtPrice)})]}),e.stockQuantity===0&&s.jsx("span",{className:"inline-block mt-2 px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded",children:"품절"})]})]})})};export{I as default};
