{
  "version": 3,
  "sources": ["../../../../node_modules/remove-accents/index.js", "../../../../node_modules/fast-deep-equal/es6/index.js", "../../../../node_modules/@wordpress/deprecated/build-module/@wordpress/deprecated/src/index.ts", "../../../../node_modules/@wordpress/compose/build-module/utils/create-higher-order-component/@wordpress/compose/src/utils/create-higher-order-component/index.ts", "../../../../node_modules/@wordpress/compose/build-module/utils/debounce/@wordpress/compose/src/utils/debounce/index.ts", "../../../../node_modules/@wordpress/compose/build-module/utils/throttle/@wordpress/compose/src/utils/throttle/index.ts", "../../../../node_modules/@wordpress/compose/build-module/higher-order/@wordpress/compose/src/higher-order/pipe.ts", "../../../../node_modules/@wordpress/compose/build-module/higher-order/@wordpress/compose/src/higher-order/compose.ts", "../../../../node_modules/@wordpress/compose/build-module/higher-order/if-condition/@wordpress/compose/src/higher-order/if-condition/index.tsx", "../../../../node_modules/@wordpress/is-shallow-equal/build-module/@wordpress/is-shallow-equal/src/objects.ts", "../../../../node_modules/@wordpress/is-shallow-equal/build-module/@wordpress/is-shallow-equal/src/arrays.ts", "../../../../node_modules/@wordpress/is-shallow-equal/build-module/@wordpress/is-shallow-equal/src/index.ts", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/element/build-module/@wordpress/element/src/react.ts", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/element/build-module/@wordpress/element/src/react-platform.ts", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/element/build-module/@wordpress/element/src/serialize.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-instance-id/@wordpress/compose/src/hooks/use-instance-id/index.ts", "../../../../node_modules/@wordpress/compose/build-module/higher-order/with-instance-id/@wordpress/compose/src/higher-order/with-instance-id/index.tsx", "../../../../node_modules/@wordpress/compose/build-module/higher-order/with-safe-timeout/@wordpress/compose/src/higher-order/with-safe-timeout/index.tsx", "../../../../node_modules/@wordpress/dom/build-module/utils/@wordpress/dom/src/utils/assert-is-defined.ts", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/get-rectangle-from-range.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/compute-caret-rect.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-html-input-element.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-text-field.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/get-computed-style.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/get-scroll-container.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/remove.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/safe-html.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/strip-html.js", "../../../../node_modules/@wordpress/dom/build-module/@wordpress/dom/src/phrasing-content.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-empty.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/unwrap.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/insert-after.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-element.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/clean-node-list.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/remove-invalid-html.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/document-has-text-selection.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/input-field-has-uncollapsed-selection.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/document-has-uncollapsed-selection.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/document-has-selection.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-input-or-text-area.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-entirely-selected.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-form-element.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-rtl.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/get-range-height.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-selection-forward.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/caret-range-from-point.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/hidden-caret-range-from-point.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/scroll-if-no-range.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-edge.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-horizontal-edge.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/is-vertical-edge.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/place-caret-at-edge.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/place-caret-at-horizontal-edge.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/place-caret-at-vertical-edge.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/replace.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/replace-tag.js", "../../../../node_modules/@wordpress/dom/build-module/dom/@wordpress/dom/src/dom/wrap.js", "../../../../node_modules/@wordpress/dom/build-module/@wordpress/dom/src/data-transfer.js", "../../../../node_modules/@wordpress/dom/build-module/@wordpress/dom/src/focusable.js", "../../../../node_modules/@wordpress/dom/build-module/@wordpress/dom/src/tabbable.js", "../../../../node_modules/@wordpress/dom/build-module/@wordpress/dom/src/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-ref-effect/@wordpress/compose/src/hooks/use-ref-effect/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-constrained-tabbing/@wordpress/compose/src/hooks/use-constrained-tabbing/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-copy-to-clipboard/@wordpress/compose/src/hooks/use-copy-to-clipboard/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-focus-on-mount/@wordpress/compose/src/hooks/use-focus-on-mount/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-focus-return/@wordpress/compose/src/hooks/use-focus-return/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-focus-outside/@wordpress/compose/src/hooks/use-focus-outside/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-merge-refs/@wordpress/compose/src/hooks/use-merge-refs/index.js", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/i18n/build-module/@wordpress/i18n/src/create-i18n.ts", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/i18n/build-module/@wordpress/i18n/src/default-i18n.ts", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/keycodes/build-module/@wordpress/keycodes/src/platform.ts", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/keycodes/build-module/@wordpress/keycodes/src/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-dialog/@wordpress/compose/src/hooks/use-dialog/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-disabled/@wordpress/compose/src/hooks/use-disabled/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-event/@wordpress/compose/src/hooks/use-event/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-isomorphic-layout-effect/@wordpress/compose/src/hooks/use-isomorphic-layout-effect/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-dragging/@wordpress/compose/src/hooks/use-dragging/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-keyboard-shortcut/@wordpress/compose/src/hooks/use-keyboard-shortcut/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-previous/@wordpress/compose/src/hooks/use-previous/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-media-query/@wordpress/compose/src/hooks/use-media-query/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-reduced-motion/@wordpress/compose/src/hooks/use-reduced-motion/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-viewport-match/@wordpress/compose/src/hooks/use-viewport-match/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-resize-observer/@wordpress/compose/src/hooks/use-resize-observer/use-resize-observer.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-resize-observer/legacy/@wordpress/compose/src/hooks/use-resize-observer/legacy/index.tsx", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-resize-observer/@wordpress/compose/src/hooks/use-resize-observer/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-debounce/@wordpress/compose/src/hooks/use-debounce/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-drop-zone/@wordpress/compose/src/hooks/use-drop-zone/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-focusable-iframe/@wordpress/compose/src/hooks/use-focusable-iframe/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-fixed-window-list/@wordpress/compose/src/hooks/use-fixed-window-list/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-observable-value/@wordpress/compose/src/hooks/use-observable-value/index.ts", "../../../../node_modules/@wordpress/compose/build-module/utils/observable-map/@wordpress/compose/src/utils/observable-map/index.ts", "../../../../node_modules/@wordpress/compose/build-module/higher-order/pure/@wordpress/compose/src/higher-order/pure/index.tsx", "../../../../node_modules/@wordpress/compose/build-module/higher-order/with-global-events/@wordpress/compose/src/higher-order/with-global-events/listener.js", "../../../../node_modules/@wordpress/compose/build-module/higher-order/with-global-events/@wordpress/compose/src/higher-order/with-global-events/index.js", "../../../../node_modules/@wordpress/compose/build-module/higher-order/with-state/@wordpress/compose/src/higher-order/with-state/index.js", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-copy-on-click/@wordpress/compose/src/hooks/use-copy-on-click/index.js", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/priority-queue/build-module/@wordpress/priority-queue/src/request-idle-callback.ts", "../../../../node_modules/@wordpress/compose/node_modules/@wordpress/priority-queue/build-module/@wordpress/priority-queue/src/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-async-list/@wordpress/compose/src/hooks/use-async-list/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-debounced-input/@wordpress/compose/src/hooks/use-debounced-input/index.ts", "../../../../node_modules/@wordpress/compose/build-module/hooks/use-throttle/@wordpress/compose/src/hooks/use-throttle/index.js", "../../../../node_modules/colord/index.mjs", "../../../../node_modules/colord/plugins/names.mjs", "../../../../node_modules/colord/plugins/a11y.mjs", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/special-characters.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/get-text-content.js", "../../../../node_modules/redux/src/utils/formatProdErrorMessage.ts", "../../../../node_modules/redux/src/utils/symbol-observable.ts", "../../../../node_modules/redux/src/utils/actionTypes.ts", "../../../../node_modules/redux/src/utils/isPlainObject.ts", "../../../../node_modules/redux/src/utils/kindOf.ts", "../../../../node_modules/redux/src/createStore.ts", "../../../../node_modules/redux/src/utils/warning.ts", "../../../../node_modules/redux/src/combineReducers.ts", "../../../../node_modules/redux/src/bindActionCreators.ts", "../../../../node_modules/redux/src/compose.ts", "../../../../node_modules/redux/src/applyMiddleware.ts", "../../../../node_modules/redux/src/utils/isAction.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/redux-store/@wordpress/data/src/redux-store/index.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/redux-routine/build-module/@wordpress/redux-routine/src/is-generator.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/redux-routine/build-module/@wordpress/redux-routine/src/runtime.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/redux-routine/build-module/@wordpress/redux-routine/src/is-action.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/redux-routine/build-module/@wordpress/redux-routine/src/index.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/redux-store/@wordpress/data/src/redux-store/combine-reducers.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/factory.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/controls.js", "../../../../node_modules/@wordpress/private-apis/build-module/@wordpress/private-apis/src/implementation.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/lock-unlock.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/promise-middleware.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/resolvers-cache-middleware.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/redux-store/@wordpress/data/src/redux-store/thunk-middleware.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/redux-store/metadata/@wordpress/data/src/redux-store/metadata/reducer.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/redux-store/metadata/@wordpress/data/src/redux-store/metadata/utils.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/redux-store/metadata/@wordpress/data/src/redux-store/metadata/selectors.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/redux-store/metadata/@wordpress/data/src/redux-store/metadata/actions.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/store/@wordpress/data/src/store/index.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/utils/@wordpress/data/src/utils/emitter.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/registry.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/default-registry.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/plugins/persistence/@wordpress/data/src/plugins/persistence/index.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/plugins/persistence/storage/@wordpress/data/src/plugins/persistence/storage/object.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/plugins/persistence/storage/@wordpress/data/src/plugins/persistence/storage/default.js", "../../../../node_modules/@wordpress/priority-queue/build-module/@wordpress/priority-queue/src/request-idle-callback.js", "../../../../node_modules/@wordpress/priority-queue/build-module/@wordpress/priority-queue/src/index.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/element/build-module/@wordpress/element/src/react.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/element/build-module/@wordpress/element/src/react-platform.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/element/build-module/@wordpress/element/src/serialize.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/components/registry-provider/@wordpress/data/src/components/registry-provider/context.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/components/registry-provider/@wordpress/data/src/components/registry-provider/use-registry.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/components/async-mode-provider/@wordpress/data/src/components/async-mode-provider/context.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/components/use-select/@wordpress/data/src/components/use-select/index.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/components/with-select/@wordpress/data/src/components/with-select/index.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/components/with-dispatch/@wordpress/data/src/components/with-dispatch/index.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/components/with-registry/@wordpress/data/src/components/with-registry/index.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/select.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/data/build-module/@wordpress/data/src/index.js", "../../../../node_modules/@wordpress/rich-text/build-module/store/@wordpress/rich-text/src/store/reducer.js", "../../../../node_modules/@wordpress/rich-text/build-module/store/@wordpress/rich-text/src/store/selectors.js", "../../../../node_modules/@wordpress/rich-text/build-module/store/@wordpress/rich-text/src/store/actions.js", "../../../../node_modules/@wordpress/rich-text/build-module/store/@wordpress/rich-text/src/store/index.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/create-element.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/is-format-equal.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/normalise-formats.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/concat.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/get-active-formats.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/get-format-type.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/to-tree.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/to-html-string.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/create.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/is-collapsed.ts", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/remove-format.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/insert.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/slice.js", "../../../../node_modules/@wordpress/a11y/build-module/shared/@wordpress/a11y/src/shared/clear.js", "../../../../node_modules/@wordpress/a11y/build-module/shared/@wordpress/a11y/src/shared/filter-message.js", "../../../../node_modules/@wordpress/a11y/build-module/shared/@wordpress/a11y/src/shared/index.js", "../../../../node_modules/@wordpress/a11y/node_modules/@wordpress/dom-ready/build-module/@wordpress/dom-ready/src/index.js", "../../../../node_modules/@wordpress/a11y/build-module/script/@wordpress/a11y/src/script/add-container.js", "../../../../node_modules/@wordpress/a11y/node_modules/@wordpress/i18n/build-module/@wordpress/i18n/src/create-i18n.ts", "../../../../node_modules/@wordpress/a11y/node_modules/@wordpress/i18n/build-module/@wordpress/i18n/src/default-i18n.ts", "../../../../node_modules/@wordpress/a11y/build-module/script/@wordpress/a11y/src/script/add-intro-text.ts", "../../../../node_modules/@wordpress/a11y/build-module/@wordpress/a11y/src/index.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/is-range-equal.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/to-dom.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/@wordpress/rich-text/src/component/use-default-style.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/@wordpress/rich-text/src/component/use-boundary-style.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/event-listeners/@wordpress/rich-text/src/component/event-listeners/copy-handler.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/event-listeners/@wordpress/rich-text/src/component/event-listeners/select-object.js", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/i18n/build-module/@wordpress/i18n/src/create-i18n.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/i18n/build-module/@wordpress/i18n/src/default-i18n.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/keycodes/build-module/@wordpress/keycodes/src/platform.ts", "../../../../node_modules/@wordpress/rich-text/node_modules/@wordpress/keycodes/build-module/@wordpress/keycodes/src/index.ts", "../../../../node_modules/@wordpress/rich-text/build-module/component/event-listeners/@wordpress/rich-text/src/component/event-listeners/format-boundaries.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/remove.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/event-listeners/@wordpress/rich-text/src/component/event-listeners/delete.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/update-formats.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/event-listeners/@wordpress/rich-text/src/component/event-listeners/input-and-selection.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/event-listeners/@wordpress/rich-text/src/component/event-listeners/selection-change-compat.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/event-listeners/@wordpress/rich-text/src/component/event-listeners/prevent-focus-capture.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/event-listeners/@wordpress/rich-text/src/component/event-listeners/index.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/@wordpress/rich-text/src/component/index.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/get-active-format.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/get-active-object.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/is-empty.js", "../../../../node_modules/@wordpress/rich-text/build-module/@wordpress/rich-text/src/split.js", "../../../../node_modules/@wordpress/rich-text/build-module/component/@wordpress/rich-text/src/component/use-anchor.js", "../../../../node_modules/@wordpress/warning/build-module/@wordpress/warning/src/utils.ts", "../../../../node_modules/@wordpress/warning/build-module/@wordpress/warning/src/index.ts", "../../../../node_modules/@wordpress/html-entities/build-module/@wordpress/html-entities/src/index.ts"],
  "sourcesContent": ["var characterMap = {\n\t\"À\": \"A\",\n\t\"Á\": \"A\",\n\t\"Â\": \"A\",\n\t\"Ã\": \"A\",\n\t\"Ä\": \"A\",\n\t\"Å\": \"A\",\n\t\"Ấ\": \"A\",\n\t\"Ắ\": \"A\",\n\t\"Ẳ\": \"A\",\n\t\"Ẵ\": \"A\",\n\t\"Ặ\": \"A\",\n\t\"Æ\": \"AE\",\n\t\"Ầ\": \"A\",\n\t\"Ằ\": \"A\",\n\t\"Ȃ\": \"A\",\n\t\"Ả\": \"A\",\n\t\"Ạ\": \"A\",\n\t\"Ẩ\": \"A\",\n\t\"Ẫ\": \"A\",\n\t\"Ậ\": \"A\",\n\t\"Ç\": \"C\",\n\t\"Ḉ\": \"C\",\n\t\"È\": \"E\",\n\t\"É\": \"E\",\n\t\"Ê\": \"E\",\n\t\"Ë\": \"E\",\n\t\"Ế\": \"E\",\n\t\"Ḗ\": \"E\",\n\t\"Ề\": \"E\",\n\t\"Ḕ\": \"E\",\n\t\"Ḝ\": \"E\",\n\t\"Ȇ\": \"E\",\n\t\"Ẻ\": \"E\",\n\t\"Ẽ\": \"E\",\n\t\"Ẹ\": \"E\",\n\t\"Ể\": \"E\",\n\t\"Ễ\": \"E\",\n\t\"Ệ\": \"E\",\n\t\"Ì\": \"I\",\n\t\"Í\": \"I\",\n\t\"Î\": \"I\",\n\t\"Ï\": \"I\",\n\t\"Ḯ\": \"I\",\n\t\"Ȋ\": \"I\",\n\t\"Ỉ\": \"I\",\n\t\"Ị\": \"I\",\n\t\"Ð\": \"D\",\n\t\"Ñ\": \"N\",\n\t\"Ò\": \"O\",\n\t\"Ó\": \"O\",\n\t\"Ô\": \"O\",\n\t\"Õ\": \"O\",\n\t\"Ö\": \"O\",\n\t\"Ø\": \"O\",\n\t\"Ố\": \"O\",\n\t\"Ṍ\": \"O\",\n\t\"Ṓ\": \"O\",\n\t\"Ȏ\": \"O\",\n\t\"Ỏ\": \"O\",\n\t\"Ọ\": \"O\",\n\t\"Ổ\": \"O\",\n\t\"Ỗ\": \"O\",\n\t\"Ộ\": \"O\",\n\t\"Ờ\": \"O\",\n\t\"Ở\": \"O\",\n\t\"Ỡ\": \"O\",\n\t\"Ớ\": \"O\",\n\t\"Ợ\": \"O\",\n\t\"Ù\": \"U\",\n\t\"Ú\": \"U\",\n\t\"Û\": \"U\",\n\t\"Ü\": \"U\",\n\t\"Ủ\": \"U\",\n\t\"Ụ\": \"U\",\n\t\"Ử\": \"U\",\n\t\"Ữ\": \"U\",\n\t\"Ự\": \"U\",\n\t\"Ý\": \"Y\",\n\t\"à\": \"a\",\n\t\"á\": \"a\",\n\t\"â\": \"a\",\n\t\"ã\": \"a\",\n\t\"ä\": \"a\",\n\t\"å\": \"a\",\n\t\"ấ\": \"a\",\n\t\"ắ\": \"a\",\n\t\"ẳ\": \"a\",\n\t\"ẵ\": \"a\",\n\t\"ặ\": \"a\",\n\t\"æ\": \"ae\",\n\t\"ầ\": \"a\",\n\t\"ằ\": \"a\",\n\t\"ȃ\": \"a\",\n\t\"ả\": \"a\",\n\t\"ạ\": \"a\",\n\t\"ẩ\": \"a\",\n\t\"ẫ\": \"a\",\n\t\"ậ\": \"a\",\n\t\"ç\": \"c\",\n\t\"ḉ\": \"c\",\n\t\"è\": \"e\",\n\t\"é\": \"e\",\n\t\"ê\": \"e\",\n\t\"ë\": \"e\",\n\t\"ế\": \"e\",\n\t\"ḗ\": \"e\",\n\t\"ề\": \"e\",\n\t\"ḕ\": \"e\",\n\t\"ḝ\": \"e\",\n\t\"ȇ\": \"e\",\n\t\"ẻ\": \"e\",\n\t\"ẽ\": \"e\",\n\t\"ẹ\": \"e\",\n\t\"ể\": \"e\",\n\t\"ễ\": \"e\",\n\t\"ệ\": \"e\",\n\t\"ì\": \"i\",\n\t\"í\": \"i\",\n\t\"î\": \"i\",\n\t\"ï\": \"i\",\n\t\"ḯ\": \"i\",\n\t\"ȋ\": \"i\",\n\t\"ỉ\": \"i\",\n\t\"ị\": \"i\",\n\t\"ð\": \"d\",\n\t\"ñ\": \"n\",\n\t\"ò\": \"o\",\n\t\"ó\": \"o\",\n\t\"ô\": \"o\",\n\t\"õ\": \"o\",\n\t\"ö\": \"o\",\n\t\"ø\": \"o\",\n\t\"ố\": \"o\",\n\t\"ṍ\": \"o\",\n\t\"ṓ\": \"o\",\n\t\"ȏ\": \"o\",\n\t\"ỏ\": \"o\",\n\t\"ọ\": \"o\",\n\t\"ổ\": \"o\",\n\t\"ỗ\": \"o\",\n\t\"ộ\": \"o\",\n\t\"ờ\": \"o\",\n\t\"ở\": \"o\",\n\t\"ỡ\": \"o\",\n\t\"ớ\": \"o\",\n\t\"ợ\": \"o\",\n\t\"ù\": \"u\",\n\t\"ú\": \"u\",\n\t\"û\": \"u\",\n\t\"ü\": \"u\",\n\t\"ủ\": \"u\",\n\t\"ụ\": \"u\",\n\t\"ử\": \"u\",\n\t\"ữ\": \"u\",\n\t\"ự\": \"u\",\n\t\"ý\": \"y\",\n\t\"ÿ\": \"y\",\n\t\"Ā\": \"A\",\n\t\"ā\": \"a\",\n\t\"Ă\": \"A\",\n\t\"ă\": \"a\",\n\t\"Ą\": \"A\",\n\t\"ą\": \"a\",\n\t\"Ć\": \"C\",\n\t\"ć\": \"c\",\n\t\"Ĉ\": \"C\",\n\t\"ĉ\": \"c\",\n\t\"Ċ\": \"C\",\n\t\"ċ\": \"c\",\n\t\"Č\": \"C\",\n\t\"č\": \"c\",\n\t\"C̆\": \"C\",\n\t\"c̆\": \"c\",\n\t\"Ď\": \"D\",\n\t\"ď\": \"d\",\n\t\"Đ\": \"D\",\n\t\"đ\": \"d\",\n\t\"Ē\": \"E\",\n\t\"ē\": \"e\",\n\t\"Ĕ\": \"E\",\n\t\"ĕ\": \"e\",\n\t\"Ė\": \"E\",\n\t\"ė\": \"e\",\n\t\"Ę\": \"E\",\n\t\"ę\": \"e\",\n\t\"Ě\": \"E\",\n\t\"ě\": \"e\",\n\t\"Ĝ\": \"G\",\n\t\"Ǵ\": \"G\",\n\t\"ĝ\": \"g\",\n\t\"ǵ\": \"g\",\n\t\"Ğ\": \"G\",\n\t\"ğ\": \"g\",\n\t\"Ġ\": \"G\",\n\t\"ġ\": \"g\",\n\t\"Ģ\": \"G\",\n\t\"ģ\": \"g\",\n\t\"Ĥ\": \"H\",\n\t\"ĥ\": \"h\",\n\t\"Ħ\": \"H\",\n\t\"ħ\": \"h\",\n\t\"Ḫ\": \"H\",\n\t\"ḫ\": \"h\",\n\t\"Ĩ\": \"I\",\n\t\"ĩ\": \"i\",\n\t\"Ī\": \"I\",\n\t\"ī\": \"i\",\n\t\"Ĭ\": \"I\",\n\t\"ĭ\": \"i\",\n\t\"Į\": \"I\",\n\t\"į\": \"i\",\n\t\"İ\": \"I\",\n\t\"ı\": \"i\",\n\t\"Ĳ\": \"IJ\",\n\t\"ĳ\": \"ij\",\n\t\"Ĵ\": \"J\",\n\t\"ĵ\": \"j\",\n\t\"Ķ\": \"K\",\n\t\"ķ\": \"k\",\n\t\"Ḱ\": \"K\",\n\t\"ḱ\": \"k\",\n\t\"K̆\": \"K\",\n\t\"k̆\": \"k\",\n\t\"Ĺ\": \"L\",\n\t\"ĺ\": \"l\",\n\t\"Ļ\": \"L\",\n\t\"ļ\": \"l\",\n\t\"Ľ\": \"L\",\n\t\"ľ\": \"l\",\n\t\"Ŀ\": \"L\",\n\t\"ŀ\": \"l\",\n\t\"Ł\": \"l\",\n\t\"ł\": \"l\",\n\t\"Ḿ\": \"M\",\n\t\"ḿ\": \"m\",\n\t\"M̆\": \"M\",\n\t\"m̆\": \"m\",\n\t\"Ń\": \"N\",\n\t\"ń\": \"n\",\n\t\"Ņ\": \"N\",\n\t\"ņ\": \"n\",\n\t\"Ň\": \"N\",\n\t\"ň\": \"n\",\n\t\"ŉ\": \"n\",\n\t\"N̆\": \"N\",\n\t\"n̆\": \"n\",\n\t\"Ō\": \"O\",\n\t\"ō\": \"o\",\n\t\"Ŏ\": \"O\",\n\t\"ŏ\": \"o\",\n\t\"Ő\": \"O\",\n\t\"ő\": \"o\",\n\t\"Œ\": \"OE\",\n\t\"œ\": \"oe\",\n\t\"P̆\": \"P\",\n\t\"p̆\": \"p\",\n\t\"Ŕ\": \"R\",\n\t\"ŕ\": \"r\",\n\t\"Ŗ\": \"R\",\n\t\"ŗ\": \"r\",\n\t\"Ř\": \"R\",\n\t\"ř\": \"r\",\n\t\"R̆\": \"R\",\n\t\"r̆\": \"r\",\n\t\"Ȓ\": \"R\",\n\t\"ȓ\": \"r\",\n\t\"Ś\": \"S\",\n\t\"ś\": \"s\",\n\t\"Ŝ\": \"S\",\n\t\"ŝ\": \"s\",\n\t\"Ş\": \"S\",\n\t\"Ș\": \"S\",\n\t\"ș\": \"s\",\n\t\"ş\": \"s\",\n\t\"Š\": \"S\",\n\t\"š\": \"s\",\n\t\"Ţ\": \"T\",\n\t\"ţ\": \"t\",\n\t\"ț\": \"t\",\n\t\"Ț\": \"T\",\n\t\"Ť\": \"T\",\n\t\"ť\": \"t\",\n\t\"Ŧ\": \"T\",\n\t\"ŧ\": \"t\",\n\t\"T̆\": \"T\",\n\t\"t̆\": \"t\",\n\t\"Ũ\": \"U\",\n\t\"ũ\": \"u\",\n\t\"Ū\": \"U\",\n\t\"ū\": \"u\",\n\t\"Ŭ\": \"U\",\n\t\"ŭ\": \"u\",\n\t\"Ů\": \"U\",\n\t\"ů\": \"u\",\n\t\"Ű\": \"U\",\n\t\"ű\": \"u\",\n\t\"Ų\": \"U\",\n\t\"ų\": \"u\",\n\t\"Ȗ\": \"U\",\n\t\"ȗ\": \"u\",\n\t\"V̆\": \"V\",\n\t\"v̆\": \"v\",\n\t\"Ŵ\": \"W\",\n\t\"ŵ\": \"w\",\n\t\"Ẃ\": \"W\",\n\t\"ẃ\": \"w\",\n\t\"X̆\": \"X\",\n\t\"x̆\": \"x\",\n\t\"Ŷ\": \"Y\",\n\t\"ŷ\": \"y\",\n\t\"Ÿ\": \"Y\",\n\t\"Y̆\": \"Y\",\n\t\"y̆\": \"y\",\n\t\"Ź\": \"Z\",\n\t\"ź\": \"z\",\n\t\"Ż\": \"Z\",\n\t\"ż\": \"z\",\n\t\"Ž\": \"Z\",\n\t\"ž\": \"z\",\n\t\"ſ\": \"s\",\n\t\"ƒ\": \"f\",\n\t\"Ơ\": \"O\",\n\t\"ơ\": \"o\",\n\t\"Ư\": \"U\",\n\t\"ư\": \"u\",\n\t\"Ǎ\": \"A\",\n\t\"ǎ\": \"a\",\n\t\"Ǐ\": \"I\",\n\t\"ǐ\": \"i\",\n\t\"Ǒ\": \"O\",\n\t\"ǒ\": \"o\",\n\t\"Ǔ\": \"U\",\n\t\"ǔ\": \"u\",\n\t\"Ǖ\": \"U\",\n\t\"ǖ\": \"u\",\n\t\"Ǘ\": \"U\",\n\t\"ǘ\": \"u\",\n\t\"Ǚ\": \"U\",\n\t\"ǚ\": \"u\",\n\t\"Ǜ\": \"U\",\n\t\"ǜ\": \"u\",\n\t\"Ứ\": \"U\",\n\t\"ứ\": \"u\",\n\t\"Ṹ\": \"U\",\n\t\"ṹ\": \"u\",\n\t\"Ǻ\": \"A\",\n\t\"ǻ\": \"a\",\n\t\"Ǽ\": \"AE\",\n\t\"ǽ\": \"ae\",\n\t\"Ǿ\": \"O\",\n\t\"ǿ\": \"o\",\n\t\"Þ\": \"TH\",\n\t\"þ\": \"th\",\n\t\"Ṕ\": \"P\",\n\t\"ṕ\": \"p\",\n\t\"Ṥ\": \"S\",\n\t\"ṥ\": \"s\",\n\t\"X́\": \"X\",\n\t\"x́\": \"x\",\n\t\"Ѓ\": \"Г\",\n\t\"ѓ\": \"г\",\n\t\"Ќ\": \"К\",\n\t\"ќ\": \"к\",\n\t\"A̋\": \"A\",\n\t\"a̋\": \"a\",\n\t\"E̋\": \"E\",\n\t\"e̋\": \"e\",\n\t\"I̋\": \"I\",\n\t\"i̋\": \"i\",\n\t\"Ǹ\": \"N\",\n\t\"ǹ\": \"n\",\n\t\"Ồ\": \"O\",\n\t\"ồ\": \"o\",\n\t\"Ṑ\": \"O\",\n\t\"ṑ\": \"o\",\n\t\"Ừ\": \"U\",\n\t\"ừ\": \"u\",\n\t\"Ẁ\": \"W\",\n\t\"ẁ\": \"w\",\n\t\"Ỳ\": \"Y\",\n\t\"ỳ\": \"y\",\n\t\"Ȁ\": \"A\",\n\t\"ȁ\": \"a\",\n\t\"Ȅ\": \"E\",\n\t\"ȅ\": \"e\",\n\t\"Ȉ\": \"I\",\n\t\"ȉ\": \"i\",\n\t\"Ȍ\": \"O\",\n\t\"ȍ\": \"o\",\n\t\"Ȑ\": \"R\",\n\t\"ȑ\": \"r\",\n\t\"Ȕ\": \"U\",\n\t\"ȕ\": \"u\",\n\t\"B̌\": \"B\",\n\t\"b̌\": \"b\",\n\t\"Č̣\": \"C\",\n\t\"č̣\": \"c\",\n\t\"Ê̌\": \"E\",\n\t\"ê̌\": \"e\",\n\t\"F̌\": \"F\",\n\t\"f̌\": \"f\",\n\t\"Ǧ\": \"G\",\n\t\"ǧ\": \"g\",\n\t\"Ȟ\": \"H\",\n\t\"ȟ\": \"h\",\n\t\"J̌\": \"J\",\n\t\"ǰ\": \"j\",\n\t\"Ǩ\": \"K\",\n\t\"ǩ\": \"k\",\n\t\"M̌\": \"M\",\n\t\"m̌\": \"m\",\n\t\"P̌\": \"P\",\n\t\"p̌\": \"p\",\n\t\"Q̌\": \"Q\",\n\t\"q̌\": \"q\",\n\t\"Ř̩\": \"R\",\n\t\"ř̩\": \"r\",\n\t\"Ṧ\": \"S\",\n\t\"ṧ\": \"s\",\n\t\"V̌\": \"V\",\n\t\"v̌\": \"v\",\n\t\"W̌\": \"W\",\n\t\"w̌\": \"w\",\n\t\"X̌\": \"X\",\n\t\"x̌\": \"x\",\n\t\"Y̌\": \"Y\",\n\t\"y̌\": \"y\",\n\t\"A̧\": \"A\",\n\t\"a̧\": \"a\",\n\t\"B̧\": \"B\",\n\t\"b̧\": \"b\",\n\t\"Ḑ\": \"D\",\n\t\"ḑ\": \"d\",\n\t\"Ȩ\": \"E\",\n\t\"ȩ\": \"e\",\n\t\"Ɛ̧\": \"E\",\n\t\"ɛ̧\": \"e\",\n\t\"Ḩ\": \"H\",\n\t\"ḩ\": \"h\",\n\t\"I̧\": \"I\",\n\t\"i̧\": \"i\",\n\t\"Ɨ̧\": \"I\",\n\t\"ɨ̧\": \"i\",\n\t\"M̧\": \"M\",\n\t\"m̧\": \"m\",\n\t\"O̧\": \"O\",\n\t\"o̧\": \"o\",\n\t\"Q̧\": \"Q\",\n\t\"q̧\": \"q\",\n\t\"U̧\": \"U\",\n\t\"u̧\": \"u\",\n\t\"X̧\": \"X\",\n\t\"x̧\": \"x\",\n\t\"Z̧\": \"Z\",\n\t\"z̧\": \"z\",\n\t\"й\":\"и\",\n\t\"Й\":\"И\",\n\t\"ё\":\"е\",\n\t\"Ё\":\"Е\",\n};\n\nvar chars = Object.keys(characterMap).join('|');\nvar allAccents = new RegExp(chars, 'g');\nvar firstAccent = new RegExp(chars, '');\n\nfunction matcher(match) {\n\treturn characterMap[match];\n}\n\nvar removeAccents = function(string) {\n\treturn string.replace(allAccents, matcher);\n};\n\nvar hasAccents = function(string) {\n\treturn !!string.match(firstAccent);\n};\n\nmodule.exports = removeAccents;\nmodule.exports.has = hasAccents;\nmodule.exports.remove = removeAccents;\n", "'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n  var envHasBigInt64Array = typeof BigInt64Array !== 'undefined';\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n    if ((a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      for (i of a.entries())\n        if (!equal(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    if ((a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n", "/**\n * WordPress dependencies\n */\nimport { doAction } from '@wordpress/hooks';\n\n/**\n * Object map tracking messages which have been logged, for use in ensuring a\n * message is only logged once.\n */\nexport const logged: Record< string, true > = Object.create( null );\n\ntype DeprecatedOptions = {\n\t/**\n\t * Version in which the feature was deprecated.\n\t */\n\tsince?: string;\n\t/**\n\t * Version in which the feature will be removed.\n\t */\n\tversion?: string;\n\t/**\n\t * Feature to use instead.\n\t */\n\talternative?: string;\n\t/**\n\t * Plugin name if it's a plugin feature.\n\t */\n\tplugin?: string;\n\t/**\n\t * Link to documentation.\n\t */\n\tlink?: string;\n\t/**\n\t * Additional message to help transition away from the deprecated feature.\n\t */\n\thint?: string;\n};\n\n/**\n * Logs a message to notify developers about a deprecated feature.\n *\n * @param {string}            feature   Name of the deprecated feature.\n * @param {DeprecatedOptions} [options] Personalisation options\n *\n * @example\n * ```js\n * import deprecated from '@wordpress/deprecated';\n *\n * deprecated( 'Eating meat', {\n * \tsince: '2019.01.01',\n * \tversion: '2020.01.01',\n * \talternative: 'vegetables',\n * \tplugin: 'the earth',\n * \thint: 'You may find it beneficial to transition gradually.',\n * } );\n *\n * // Logs: 'Eating meat is deprecated since version 2019.01.01 and will be removed from the earth in version 2020.01.01. Please use vegetables instead. Note: You may find it beneficial to transition gradually.'\n * ```\n */\nexport default function deprecated(\n\tfeature: string,\n\toptions: DeprecatedOptions = {}\n) {\n\tconst { since, version, alternative, plugin, link, hint } = options;\n\n\tconst pluginMessage = plugin ? ` from ${ plugin }` : '';\n\tconst sinceMessage = since ? ` since version ${ since }` : '';\n\tconst versionMessage = version\n\t\t? ` and will be removed${ pluginMessage } in version ${ version }`\n\t\t: '';\n\tconst useInsteadMessage = alternative\n\t\t? ` Please use ${ alternative } instead.`\n\t\t: '';\n\tconst linkMessage = link ? ` See: ${ link }` : '';\n\tconst hintMessage = hint ? ` Note: ${ hint }` : '';\n\tconst message = `${ feature } is deprecated${ sinceMessage }${ versionMessage }.${ useInsteadMessage }${ linkMessage }${ hintMessage }`;\n\n\t// Skip if already logged.\n\tif ( message in logged ) {\n\t\treturn;\n\t}\n\n\t/**\n\t * Fires whenever a deprecated feature is encountered\n\t *\n\t * @param {string}            feature Name of the deprecated feature.\n\t * @param {DeprecatedOptions} options Personalisation options\n\t * @param {string}            message Message sent to console.warn\n\t */\n\tdoAction( 'deprecated', feature, options, message );\n\n\t// eslint-disable-next-line no-console\n\tconsole.warn( message );\n\n\tlogged[ message ] = true;\n}\n", "/**\n * External dependencies\n */\nimport { pascalCase } from 'change-case';\nimport type { ComponentType } from 'react';\n\ntype GetProps< C > = C extends ComponentType< infer P > ? P : never;\n\nexport type WithoutInjectedProps< C, I > = Omit< GetProps< C >, keyof I >;\n\nexport type WithInjectedProps< C, I > = ComponentType<\n\tWithoutInjectedProps< C, I > & I\n>;\n\n/**\n * Given a function mapping a component to an enhanced component and modifier\n * name, returns the enhanced component augmented with a generated displayName.\n *\n * @param mapComponent Function mapping component to enhanced component.\n * @param modifierName Seed name from which to generated display name.\n *\n * @return Component class with generated display name assigned.\n */\nexport function createHigherOrderComponent<\n\tTInner extends ComponentType< any >,\n\tTOuter extends ComponentType< any >,\n>( mapComponent: ( Inner: TInner ) => TOuter, modifierName: string ) {\n\treturn ( Inner: TInner ) => {\n\t\tconst Outer = mapComponent( Inner );\n\t\tOuter.displayName = hocName( modifierName, Inner );\n\t\treturn Outer;\n\t};\n}\n\n/**\n * Returns a displayName for a higher-order component, given a wrapper name.\n *\n * @example\n *     hocName( 'MyMemo', Widget ) === 'MyMemo(Widget)';\n *     hocName( 'MyMemo', <div /> ) === 'MyMemo(Component)';\n *\n * @param name  Name assigned to higher-order component's wrapper component.\n * @param Inner Wrapped component inside higher-order component.\n * @return       Wrapped name of higher-order component.\n */\nconst hocName = ( name: string, Inner: ComponentType< any > ) => {\n\tconst inner = Inner.displayName || Inner.name || 'Component';\n\tconst outer = pascalCase( name ?? '' );\n\n\treturn `${ outer }(${ inner })`;\n};\n", "/**\n * Parts of this source were derived and modified from lodash,\n * released under the MIT license.\n *\n * https://github.com/lodash/lodash\n *\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n *\n * Based on Underscore.js, copyright Jeremy Ashkenas,\n * DocumentCloud and Investigative Reporters & Editors <http://underscorejs.org/>\n *\n * This software consists of voluntary contributions made by many\n * individuals. For exact contribution history, see the revision history\n * available at https://github.com/lodash/lodash\n *\n * The following license applies to all parts of this software except as\n * documented below:\n *\n * ====\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nexport interface DebounceOptions {\n\tleading: boolean;\n\tmaxWait: number;\n\ttrailing: boolean;\n}\n\nexport interface DebouncedFunc< T extends ( ...args: any[] ) => any > {\n\t/**\n\t * Call the original function, but applying the debounce rules.\n\t *\n\t * If the debounced function can be run immediately, this calls it and returns its return\n\t * value.\n\t *\n\t * Otherwise, it returns the return value of the last invocation, or undefined if the debounced\n\t * function was not invoked yet.\n\t */\n\t( ...args: Parameters< T > ): ReturnType< T > | undefined;\n\n\t/**\n\t * Throw away any pending invocation of the debounced function.\n\t */\n\tcancel: () => void;\n\n\t/**\n\t * If there is a pending invocation of the debounced function, invoke it immediately and return\n\t * its return value.\n\t *\n\t * Otherwise, return the value from the last invocation, or undefined if the debounced function\n\t * was never invoked.\n\t */\n\tflush: () => ReturnType< T > | undefined;\n}\n\n/**\n * A simplified and properly typed version of lodash's `debounce`, that\n * always uses timers instead of sometimes using rAF.\n *\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel delayed\n * `func` invocations and a `flush` method to immediately invoke them. Provide\n * `options` to indicate whether `func` should be invoked on the leading and/or\n * trailing edge of the `wait` timeout. The `func` is invoked with the last\n * arguments provided to the debounced function. Subsequent calls to the debounced\n * function return the result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * @param {Function}                   func             The function to debounce.\n * @param {number}                     wait             The number of milliseconds to delay.\n * @param {Partial< DebounceOptions >} options          The options object.\n * @param {boolean}                    options.leading  Specify invoking on the leading edge of the timeout.\n * @param {number}                     options.maxWait  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean}                    options.trailing Specify invoking on the trailing edge of the timeout.\n *\n * @return Returns the new debounced function.\n */\nexport const debounce = < FunctionT extends ( ...args: unknown[] ) => unknown >(\n\tfunc: FunctionT,\n\twait: number,\n\toptions?: Partial< DebounceOptions >\n) => {\n\tlet lastArgs: Parameters< FunctionT > | undefined;\n\tlet lastThis: unknown | undefined;\n\tlet maxWait = 0;\n\tlet result: ReturnType< FunctionT >;\n\tlet timerId: ReturnType< typeof setTimeout > | undefined;\n\tlet lastCallTime: number | undefined;\n\n\tlet lastInvokeTime = 0;\n\tlet leading = false;\n\tlet maxing = false;\n\tlet trailing = true;\n\n\tif ( options ) {\n\t\tleading = !! options.leading;\n\t\tmaxing = 'maxWait' in options;\n\t\tif ( options.maxWait !== undefined ) {\n\t\t\tmaxWait = Math.max( options.maxWait, wait );\n\t\t}\n\t\ttrailing = 'trailing' in options ? !! options.trailing : trailing;\n\t}\n\n\tfunction invokeFunc( time: number ) {\n\t\tconst args = lastArgs;\n\t\tconst thisArg = lastThis;\n\n\t\tlastArgs = undefined;\n\t\tlastThis = undefined;\n\t\tlastInvokeTime = time;\n\n\t\tresult = func.apply( thisArg, args! ) as ReturnType< FunctionT >;\n\t\treturn result;\n\t}\n\n\tfunction startTimer(\n\t\tpendingFunc: () => void,\n\t\twaitTime: number | undefined\n\t) {\n\t\ttimerId = setTimeout( pendingFunc, waitTime );\n\t}\n\n\tfunction cancelTimer() {\n\t\tif ( timerId !== undefined ) {\n\t\t\tclearTimeout( timerId );\n\t\t}\n\t}\n\n\tfunction leadingEdge( time: number ) {\n\t\t// Reset any `maxWait` timer.\n\t\tlastInvokeTime = time;\n\t\t// Start the timer for the trailing edge.\n\t\tstartTimer( timerExpired, wait );\n\t\t// Invoke the leading edge.\n\t\treturn leading ? invokeFunc( time ) : result;\n\t}\n\n\tfunction getTimeSinceLastCall( time: number ) {\n\t\treturn time - ( lastCallTime || 0 );\n\t}\n\n\tfunction remainingWait( time: number ) {\n\t\tconst timeSinceLastCall = getTimeSinceLastCall( time );\n\t\tconst timeSinceLastInvoke = time - lastInvokeTime;\n\t\tconst timeWaiting = wait - timeSinceLastCall;\n\n\t\treturn maxing\n\t\t\t? Math.min( timeWaiting, maxWait - timeSinceLastInvoke )\n\t\t\t: timeWaiting;\n\t}\n\n\tfunction shouldInvoke( time: number ) {\n\t\tconst timeSinceLastCall = getTimeSinceLastCall( time );\n\t\tconst timeSinceLastInvoke = time - lastInvokeTime;\n\n\t\t// Either this is the first call, activity has stopped and we're at the\n\t\t// trailing edge, the system time has gone backwards and we're treating\n\t\t// it as the trailing edge, or we've hit the `maxWait` limit.\n\t\treturn (\n\t\t\tlastCallTime === undefined ||\n\t\t\ttimeSinceLastCall >= wait ||\n\t\t\ttimeSinceLastCall < 0 ||\n\t\t\t( maxing && timeSinceLastInvoke >= maxWait )\n\t\t);\n\t}\n\n\tfunction timerExpired() {\n\t\tconst time = Date.now();\n\t\tif ( shouldInvoke( time ) ) {\n\t\t\treturn trailingEdge( time );\n\t\t}\n\t\t// Restart the timer.\n\t\tstartTimer( timerExpired, remainingWait( time ) );\n\t\treturn undefined;\n\t}\n\n\tfunction clearTimer() {\n\t\ttimerId = undefined;\n\t}\n\n\tfunction trailingEdge( time: number ) {\n\t\tclearTimer();\n\n\t\t// Only invoke if we have `lastArgs` which means `func` has been\n\t\t// debounced at least once.\n\t\tif ( trailing && lastArgs ) {\n\t\t\treturn invokeFunc( time );\n\t\t}\n\t\tlastArgs = lastThis = undefined;\n\t\treturn result;\n\t}\n\n\tfunction cancel() {\n\t\tcancelTimer();\n\t\tlastInvokeTime = 0;\n\t\tclearTimer();\n\t\tlastArgs = lastCallTime = lastThis = undefined;\n\t}\n\n\tfunction flush() {\n\t\treturn pending() ? trailingEdge( Date.now() ) : result;\n\t}\n\n\tfunction pending() {\n\t\treturn timerId !== undefined;\n\t}\n\n\tfunction debounced( this: unknown, ...args: Parameters< FunctionT > ) {\n\t\tconst time = Date.now();\n\t\tconst isInvoking = shouldInvoke( time );\n\n\t\tlastArgs = args;\n\t\tlastThis = this;\n\t\tlastCallTime = time;\n\n\t\tif ( isInvoking ) {\n\t\t\tif ( ! pending() ) {\n\t\t\t\treturn leadingEdge( lastCallTime );\n\t\t\t}\n\t\t\tif ( maxing ) {\n\t\t\t\t// Handle invocations in a tight loop.\n\t\t\t\tstartTimer( timerExpired, wait );\n\t\t\t\treturn invokeFunc( lastCallTime );\n\t\t\t}\n\t\t}\n\t\tif ( ! pending() ) {\n\t\t\tstartTimer( timerExpired, wait );\n\t\t}\n\t\treturn result;\n\t}\n\tdebounced.cancel = cancel;\n\tdebounced.flush = flush;\n\tdebounced.pending = pending;\n\treturn debounced;\n};\n", "/**\n * Parts of this source were derived and modified from lodash,\n * released under the MIT license.\n *\n * https://github.com/lodash/lodash\n *\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n *\n * Based on Underscore.js, copyright Jeremy Ashkenas,\n * DocumentCloud and Investigative Reporters & Editors <http://underscorejs.org/>\n *\n * This software consists of voluntary contributions made by many\n * individuals. For exact contribution history, see the revision history\n * available at https://github.com/lodash/lodash\n *\n * The following license applies to all parts of this software except as\n * documented below:\n *\n * ====\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Internal dependencies\n */\nimport { debounce } from '../debounce';\n\nexport interface ThrottleOptions {\n\tleading?: boolean;\n\ttrailing?: boolean;\n}\n\n/**\n * A simplified and properly typed version of lodash's `throttle`, that\n * always uses timers instead of sometimes using rAF.\n *\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return\n * the result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * @param {Function}                   func             The function to throttle.\n * @param {number}                     wait             The number of milliseconds to throttle invocations to.\n * @param {Partial< ThrottleOptions >} options          The options object.\n * @param {boolean}                    options.leading  Specify invoking on the leading edge of the timeout.\n * @param {boolean}                    options.trailing Specify invoking on the trailing edge of the timeout.\n * @return Returns the new throttled function.\n */\nexport const throttle = < FunctionT extends ( ...args: unknown[] ) => unknown >(\n\tfunc: FunctionT,\n\twait: number,\n\toptions?: ThrottleOptions\n) => {\n\tlet leading = true;\n\tlet trailing = true;\n\n\tif ( options ) {\n\t\tleading = 'leading' in options ? !! options.leading : leading;\n\t\ttrailing = 'trailing' in options ? !! options.trailing : trailing;\n\t}\n\treturn debounce( func, wait, {\n\t\tleading,\n\t\ttrailing,\n\t\tmaxWait: wait,\n\t} );\n};\n", "/**\n * Parts of this source were derived and modified from lodash,\n * released under the MIT license.\n *\n * https://github.com/lodash/lodash\n *\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n *\n * Based on Underscore.js, copyright Jeremy Ashkenas,\n * DocumentCloud and Investigative Reporters & Editors <http://underscorejs.org/>\n *\n * This software consists of voluntary contributions made by many\n * individuals. For exact contribution history, see the revision history\n * available at https://github.com/lodash/lodash\n *\n * The following license applies to all parts of this software except as\n * documented below:\n *\n * ====\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Creates a pipe function.\n *\n * Allows to choose whether to perform left-to-right or right-to-left composition.\n *\n * @see https://lodash.com/docs/4#flow\n *\n * @param {boolean} reverse True if right-to-left, false for left-to-right composition.\n */\nconst basePipe =\n\t( reverse: boolean = false ) =>\n\t( ...funcs: Function[] ) =>\n\t( ...args: unknown[] ) => {\n\t\tconst functions = funcs.flat();\n\t\tif ( reverse ) {\n\t\t\tfunctions.reverse();\n\t\t}\n\t\treturn functions.reduce(\n\t\t\t( prev, func ) => [ func( ...prev ) ],\n\t\t\targs\n\t\t)[ 0 ];\n\t};\n\n/**\n * Composes multiple higher-order components into a single higher-order component. Performs left-to-right function\n * composition, where each successive invocation is supplied the return value of the previous.\n *\n * This is inspired by `lodash`'s `flow` function.\n *\n * @see https://lodash.com/docs/4#flow\n */\nconst pipe = basePipe();\n\nexport { basePipe };\n\nexport default pipe;\n", "/**\n * Internal dependencies\n */\nimport { basePipe } from './pipe';\n\n/**\n * Composes multiple higher-order components into a single higher-order component. Performs right-to-left function\n * composition, where each successive invocation is supplied the return value of the previous.\n *\n * This is inspired by `lodash`'s `flowRight` function.\n *\n * @see https://lodash.com/docs/4#flow-right\n */\nconst compose = basePipe( true );\n\nexport default compose;\n", "/**\n * External dependencies\n */\nimport type { ComponentType } from 'react';\n\n/**\n * Internal dependencies\n */\nimport { createHigherOrderComponent } from '../../utils/create-higher-order-component';\n\n/**\n * Higher-order component creator, creating a new component which renders if\n * the given condition is satisfied or with the given optional prop name.\n *\n * @example\n * ```ts\n * type Props = { foo: string };\n * const Component = ( props: Props ) => <div>{ props.foo }</div>;\n * const ConditionalComponent = ifCondition( ( props: Props ) => props.foo.length !== 0 )( Component );\n * <ConditionalComponent foo=\"\" />; // => null\n * <ConditionalComponent foo=\"bar\" />; // => <div>bar</div>;\n * ```\n *\n * @param predicate Function to test condition.\n *\n * @return Higher-order component.\n */\nfunction ifCondition< Props extends {} >(\n\tpredicate: ( props: Props ) => boolean\n) {\n\treturn createHigherOrderComponent(\n\t\t( WrappedComponent: ComponentType< Props > ) => ( props: Props ) => {\n\t\t\tif ( ! predicate( props ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn <WrappedComponent { ...props } />;\n\t\t},\n\t\t'ifCondition'\n\t);\n}\n\nexport default ifCondition;\n", "/**\n * Internal dependencies\n */\nimport type { ComparableObject } from '.';\n\n/**\n * Returns true if the two objects are shallow equal, or false otherwise.\n *\n * @param a First object to compare.\n * @param b Second object to compare.\n *\n * @return Whether the two objects are shallow equal.\n */\nexport default function isShallowEqualObjects(\n\ta: ComparableObject,\n\tb: ComparableObject\n): boolean {\n\tif ( a === b ) {\n\t\treturn true;\n\t}\n\n\tconst aKeys = Object.keys( a );\n\tconst bKeys = Object.keys( b );\n\n\tif ( aKeys.length !== bKeys.length ) {\n\t\treturn false;\n\t}\n\n\tlet i = 0;\n\n\twhile ( i < aKeys.length ) {\n\t\tconst key = aKeys[ i ];\n\t\tconst aValue = a[ key ];\n\n\t\tif (\n\t\t\t// In iterating only the keys of the first object after verifying\n\t\t\t// equal lengths, account for the case that an explicit `undefined`\n\t\t\t// value in the first is implicitly undefined in the second.\n\t\t\t//\n\t\t\t// Example: isShallowEqualObjects( { a: undefined }, { b: 5 } )\n\t\t\t( aValue === undefined && ! b.hasOwnProperty( key ) ) ||\n\t\t\taValue !== b[ key ]\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\ti++;\n\t}\n\n\treturn true;\n}\n", "/**\n * Returns true if the two arrays are shallow equal, or false otherwise.\n *\n * @param a First array to compare.\n * @param b Second array to compare.\n *\n * @return Whether the two arrays are shallow equal.\n */\nexport default function isShallowEqualArrays(\n\ta: unknown[],\n\tb: unknown[]\n): boolean {\n\tif ( a === b ) {\n\t\treturn true;\n\t}\n\n\tif ( a.length !== b.length ) {\n\t\treturn false;\n\t}\n\n\tfor ( let i = 0, len = a.length; i < len; i++ ) {\n\t\tif ( a[ i ] !== b[ i ] ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n", "/**\n * Internal dependencies\n */\nimport isShallowEqualObjects from './objects';\nimport isShallowEqualArrays from './arrays';\n\nexport { default as isShallowEqualObjects } from './objects';\nexport { default as isShallowEqualArrays } from './arrays';\n\nexport type ComparableObject = Record< string, any >;\n\n/**\n * Returns true if the two arrays or objects are shallow equal, or false\n * otherwise. Also handles primitive values, just in case.\n *\n * @param a First object or array to compare.\n * @param b Second object or array to compare.\n *\n * @return Whether the two values are shallow equal.\n */\nexport default function isShallowEqual( a: unknown, b: unknown ): boolean {\n\tif ( a && b ) {\n\t\tif ( a.constructor === Object && b.constructor === Object ) {\n\t\t\treturn isShallowEqualObjects( a, b );\n\t\t} else if ( Array.isArray( a ) && Array.isArray( b ) ) {\n\t\t\treturn isShallowEqualArrays( a, b );\n\t\t}\n\t}\n\n\treturn a === b;\n}\n", "/**\n * External dependencies\n */\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport {\n\tChildren,\n\tcloneElement,\n\tComponent,\n\tcreateContext,\n\tcreateElement,\n\tcreateRef,\n\tforwardRef,\n\tFragment,\n\tisValidElement,\n\tmemo,\n\tPureComponent,\n\tStrictMode,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tuseDeferredValue,\n\tuseEffect,\n\tuseId,\n\tuseMemo,\n\tuseImperativeHandle,\n\tuseInsertionEffect,\n\tuseLayoutEffect,\n\tuseReducer,\n\tuseRef,\n\tuseState,\n\tuseSyncExternalStore,\n\tuseTransition,\n\tstartTransition,\n\tlazy,\n\tSuspense,\n} from 'react';\nimport type { ReactNode } from 'react';\n\n/**\n * Object containing a React element.\n */\nexport type Element = React.ReactElement;\n\n/**\n * Object containing a React component.\n */\nexport type ComponentType< T = any > = React.ComponentType< T >;\n\n/**\n * Object containing a React synthetic event.\n */\nexport type SyntheticEvent< T = Element > = React.SyntheticEvent< T >;\n\n/**\n * Object containing a React ref object.\n */\nexport type RefObject< T > = React.RefObject< T >;\n\n/**\n * Object containing a React ref callback.\n */\nexport type RefCallback< T > = React.RefCallback< T >;\n\n/**\n * Object containing a React ref.\n */\nexport type Ref< T > = React.Ref< T >;\n\n/**\n * Object that provides utilities for dealing with React children.\n */\nexport { Children };\n\n/**\n * Creates a copy of an element with extended props.\n *\n * @param {Element} element Element\n * @param {?Object} props   Props to apply to cloned element\n *\n * @return {Element} Cloned element.\n */\nexport { cloneElement };\n\n/**\n * A base class to create WordPress Components (Refs, state and lifecycle hooks)\n */\nexport { Component };\n\n/**\n * Creates a context object containing two components: a provider and consumer.\n *\n * @param {Object} defaultValue A default data stored in the context.\n *\n * @return {Object} Context object.\n */\nexport { createContext };\n\n/**\n * Returns a new element of given type. Type can be either a string tag name or\n * another function which itself returns an element.\n *\n * @param {?(string|Function)} type     Tag name or element creator\n * @param {Object}             props    Element properties, either attribute\n *                                      set to apply to DOM node or values to\n *                                      pass through to element creator\n * @param {...Element}         children Descendant elements\n *\n * @return {Element} Element.\n */\nexport { createElement };\n\n/**\n * Returns an object tracking a reference to a rendered element via its\n * `current` property as either a DOMElement or Element, dependent upon the\n * type of element rendered with the ref attribute.\n *\n * @return {Object} Ref object.\n */\nexport { createRef };\n\n/**\n * Component enhancer used to enable passing a ref to its wrapped component.\n * Pass a function argument which receives `props` and `ref` as its arguments,\n * returning an element using the forwarded ref. The return value is a new\n * component which forwards its ref.\n *\n * @param {Function} forwarder Function passed `props` and `ref`, expected to\n *                             return an element.\n *\n * @return {Component} Enhanced component.\n */\nexport { forwardRef };\n\n/**\n * A component which renders its children without any wrapping element.\n */\nexport { Fragment };\n\n/**\n * Checks if an object is a valid React Element.\n *\n * @param {Object} objectToCheck The object to be checked.\n *\n * @return {boolean} true if objectToTest is a valid React Element and false otherwise.\n */\nexport { isValidElement };\n\n/**\n * @see https://react.dev/reference/react/memo\n */\nexport { memo };\n\n/**\n * Component that activates additional checks and warnings for its descendants.\n */\nexport { StrictMode };\n\n/**\n * @see https://react.dev/reference/react/useCallback\n */\nexport { useCallback };\n\n/**\n * @see https://react.dev/reference/react/useContext\n */\nexport { useContext };\n\n/**\n * @see https://react.dev/reference/react/useDebugValue\n */\nexport { useDebugValue };\n\n/**\n * @see https://react.dev/reference/react/useDeferredValue\n */\nexport { useDeferredValue };\n\n/**\n * @see https://react.dev/reference/react/useEffect\n */\nexport { useEffect };\n\n/**\n * @see https://react.dev/reference/react/useId\n */\nexport { useId };\n\n/**\n * @see https://react.dev/reference/react/useImperativeHandle\n */\nexport { useImperativeHandle };\n\n/**\n * @see https://react.dev/reference/react/useInsertionEffect\n */\nexport { useInsertionEffect };\n\n/**\n * @see https://react.dev/reference/react/useLayoutEffect\n */\nexport { useLayoutEffect };\n\n/**\n * @see https://react.dev/reference/react/useMemo\n */\nexport { useMemo };\n\n/**\n * @see https://react.dev/reference/react/useReducer\n */\nexport { useReducer };\n\n/**\n * @see https://react.dev/reference/react/useRef\n */\nexport { useRef };\n\n/**\n * @see https://react.dev/reference/react/useState\n */\nexport { useState };\n\n/**\n * @see https://react.dev/reference/react/useSyncExternalStore\n */\nexport { useSyncExternalStore };\n\n/**\n * @see https://react.dev/reference/react/useTransition\n */\nexport { useTransition };\n\n/**\n * @see https://react.dev/reference/react/startTransition\n */\nexport { startTransition };\n\n/**\n * @see https://react.dev/reference/react/lazy\n */\nexport { lazy };\n\n/**\n * @see https://react.dev/reference/react/Suspense\n */\nexport { Suspense };\n\n/**\n * @see https://react.dev/reference/react/PureComponent\n */\nexport { PureComponent };\n\n/**\n * Concatenate two or more React children objects.\n *\n * @param childrenArguments - Array of children arguments (array of arrays/strings/objects) to concatenate.\n * @return The concatenated value.\n */\nexport function concatChildren(\n\t...childrenArguments: ReactNode[][]\n): ReactNode[] {\n\treturn childrenArguments.reduce< ReactNode[] >(\n\t\t( accumulator, children, i ) => {\n\t\t\tChildren.forEach( children, ( child, j ) => {\n\t\t\t\tif ( isValidElement( child ) && typeof child !== 'string' ) {\n\t\t\t\t\tchild = cloneElement( child, {\n\t\t\t\t\t\tkey: [ i, j ].join(),\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\taccumulator.push( child );\n\t\t\t} );\n\n\t\t\treturn accumulator;\n\t\t},\n\t\t[]\n\t);\n}\n\n/**\n * Switches the nodeName of all the elements in the children object.\n *\n * @param children Children object.\n * @param nodeName Node name.\n *\n * @return  The updated children object.\n */\nexport function switchChildrenNodeName(\n\tchildren: ReactNode,\n\tnodeName: string\n): ReactNode {\n\treturn (\n\t\tchildren &&\n\t\tChildren.map( children, ( elt, index ) => {\n\t\t\tif ( typeof elt?.valueOf() === 'string' ) {\n\t\t\t\treturn createElement( nodeName, { key: index }, elt );\n\t\t\t}\n\t\t\tif ( ! isValidElement( elt ) ) {\n\t\t\t\treturn elt;\n\t\t\t}\n\n\t\t\tconst { children: childrenProp, ...props } = elt.props;\n\t\t\treturn createElement(\n\t\t\t\tnodeName,\n\t\t\t\t{ key: index, ...props },\n\t\t\t\tchildrenProp\n\t\t\t);\n\t\t} )\n\t);\n}\n", "/**\n * External dependencies\n */\nimport {\n\tcreatePortal,\n\tfindDOMNode,\n\tflushSync,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n} from 'react-dom';\nimport { createRoot, hydrateRoot } from 'react-dom/client';\n\n/**\n * Creates a portal into which a component can be rendered.\n *\n * @see https://github.com/facebook/react/issues/10309#issuecomment-318433235\n *\n * @param {import('react').ReactElement} child     Any renderable child, such as an element,\n *                                                 string, or fragment.\n * @param {HTMLElement}                  container DOM node into which element should be rendered.\n */\nexport { createPortal };\n\n/**\n * Finds the dom node of a React component.\n *\n * @param {import('react').ComponentType} component Component's instance.\n */\nexport { findDOMNode };\n\n/**\n * Forces React to flush any updates inside the provided callback synchronously.\n *\n * @param {Function} callback Callback to run synchronously.\n */\nexport { flushSync };\n\n/**\n * Renders a given element into the target DOM node.\n *\n * @deprecated since WordPress 6.2.0. Use `createRoot` instead.\n * @see https://react.dev/reference/react-dom/render\n */\nexport { render };\n\n/**\n * Hydrates a given element into the target DOM node.\n *\n * @deprecated since WordPress 6.2.0. Use `hydrateRoot` instead.\n * @see https://react.dev/reference/react-dom/hydrate\n */\nexport { hydrate };\n\n/**\n * Creates a new React root for the target DOM node.\n *\n * @since 6.2.0 Introduced in WordPress core.\n * @see https://react.dev/reference/react-dom/client/createRoot\n */\nexport { createRoot };\n\n/**\n * Creates a new React root for the target DOM node and hydrates it with a pre-generated markup.\n *\n * @since 6.2.0 Introduced in WordPress core.\n * @see https://react.dev/reference/react-dom/client/hydrateRoot\n */\nexport { hydrateRoot };\n\n/**\n * Removes any mounted element from the target DOM node.\n *\n * @deprecated since WordPress 6.2.0. Use `root.unmount()` instead.\n * @see https://react.dev/reference/react-dom/unmountComponentAtNode\n */\nexport { unmountComponentAtNode };\n", "/**\n * Parts of this source were derived and modified from fast-react-render,\n * released under the MIT license.\n *\n * https://github.com/alt-j/fast-react-render\n *\n * Copyright (c) 2016 Andrey Morozov\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * External dependencies\n */\nimport { isPlainObject } from 'is-plain-object';\nimport { paramCase as kebabCase } from 'change-case';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tescapeHTML,\n\tescapeAttribute,\n\tisValidAttributeName,\n} from '@wordpress/escape-html';\n\n/**\n * Internal dependencies\n */\nimport { createContext, Fragment, StrictMode, forwardRef } from './react';\nimport RawHTML from './raw-html';\n\n/** @typedef {import('react').ReactElement} ReactElement */\n\nconst Context = createContext( undefined );\nContext.displayName = 'ElementContext';\n\ninterface ComponentInstance {\n\trender: () => React.ReactNode;\n\tgetChildContext?: () => Record< string, any >;\n}\n\ninterface RawHTMLProps {\n\tchildren: string;\n\t[ key: string ]: any;\n}\n\ninterface StyleObject {\n\t[ property: string ]: string | number | null | undefined;\n}\n\ninterface HTMLProps {\n\tdangerouslySetInnerHTML?: {\n\t\t__html: string;\n\t};\n\tchildren?: React.ReactNode;\n\tvalue?: React.ReactNode;\n\tstyle?: StyleObject | string;\n\tclassName?: string;\n\thtmlFor?: string;\n\t[ key: string ]: any;\n}\n\nconst { Provider, Consumer } = Context;\n\nconst ForwardRef = forwardRef( () => {\n\treturn null;\n} );\n\n/**\n * Valid attribute types.\n */\nconst ATTRIBUTES_TYPES = new Set< string >( [ 'string', 'boolean', 'number' ] );\n\n/**\n * Element tags which can be self-closing.\n */\nconst SELF_CLOSING_TAGS = new Set< string >( [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr',\n] );\n\n/**\n * Boolean attributes are attributes whose presence as being assigned is\n * meaningful, even if only empty.\n *\n * See: https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes\n * Extracted from: https://html.spec.whatwg.org/multipage/indices.html#attributes-3\n *\n * Object.keys( [ ...document.querySelectorAll( '#attributes-1 > tbody > tr' ) ]\n *     .filter( ( tr ) => tr.lastChild.textContent.indexOf( 'Boolean attribute' ) !== -1 )\n *     .reduce( ( result, tr ) => Object.assign( result, {\n *         [ tr.firstChild.textContent.trim() ]: true\n *     } ), {} ) ).sort();\n */\nconst BOOLEAN_ATTRIBUTES = new Set< string >( [\n\t'allowfullscreen',\n\t'allowpaymentrequest',\n\t'allowusermedia',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'defer',\n\t'disabled',\n\t'download',\n\t'formnovalidate',\n\t'hidden',\n\t'ismap',\n\t'itemscope',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'selected',\n\t'typemustmatch',\n] );\n\n/**\n * Enumerated attributes are attributes which must be of a specific value form.\n * Like boolean attributes, these are meaningful if specified, even if not of a\n * valid enumerated value.\n *\n * See: https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#enumerated-attribute\n * Extracted from: https://html.spec.whatwg.org/multipage/indices.html#attributes-3\n *\n * Object.keys( [ ...document.querySelectorAll( '#attributes-1 > tbody > tr' ) ]\n *     .filter( ( tr ) => /^(\"(.+?)\";?\\s*)+/.test( tr.lastChild.textContent.trim() ) )\n *     .reduce( ( result, tr ) => Object.assign( result, {\n *         [ tr.firstChild.textContent.trim() ]: true\n *     } ), {} ) ).sort();\n *\n * Some notable omissions:\n *\n *  - `alt`: https://blog.whatwg.org/omit-alt\n */\nconst ENUMERATED_ATTRIBUTES = new Set< string >( [\n\t'autocapitalize',\n\t'autocomplete',\n\t'charset',\n\t'contenteditable',\n\t'crossorigin',\n\t'decoding',\n\t'dir',\n\t'draggable',\n\t'enctype',\n\t'formenctype',\n\t'formmethod',\n\t'http-equiv',\n\t'inputmode',\n\t'kind',\n\t'method',\n\t'preload',\n\t'scope',\n\t'shape',\n\t'spellcheck',\n\t'translate',\n\t'type',\n\t'wrap',\n] );\n\n/**\n * Set of CSS style properties which support assignment of unitless numbers.\n * Used in rendering of style properties, where `px` unit is assumed unless\n * property is included in this set or value is zero.\n *\n * Generated via:\n *\n * Object.entries( document.createElement( 'div' ).style )\n *     .filter( ( [ key ] ) => (\n *         ! /^(webkit|ms|moz)/.test( key ) &&\n *         ( e.style[ key ] = 10 ) &&\n *         e.style[ key ] === '10'\n *     ) )\n *     .map( ( [ key ] ) => key )\n *     .sort();\n */\nconst CSS_PROPERTIES_SUPPORTS_UNITLESS = new Set< string >( [\n\t'animation',\n\t'animationIterationCount',\n\t'baselineShift',\n\t'borderImageOutset',\n\t'borderImageSlice',\n\t'borderImageWidth',\n\t'columnCount',\n\t'cx',\n\t'cy',\n\t'fillOpacity',\n\t'flexGrow',\n\t'flexShrink',\n\t'floodOpacity',\n\t'fontWeight',\n\t'gridColumnEnd',\n\t'gridColumnStart',\n\t'gridRowEnd',\n\t'gridRowStart',\n\t'lineHeight',\n\t'opacity',\n\t'order',\n\t'orphans',\n\t'r',\n\t'rx',\n\t'ry',\n\t'shapeImageThreshold',\n\t'stopOpacity',\n\t'strokeDasharray',\n\t'strokeDashoffset',\n\t'strokeMiterlimit',\n\t'strokeOpacity',\n\t'strokeWidth',\n\t'tabSize',\n\t'widows',\n\t'x',\n\t'y',\n\t'zIndex',\n\t'zoom',\n] );\n\n/**\n * Returns true if the specified string is prefixed by one of an array of\n * possible prefixes.\n * @param string\n * @param prefixes\n */\nexport function hasPrefix( string: string, prefixes: string[] ): boolean {\n\treturn prefixes.some( ( prefix ) => string.indexOf( prefix ) === 0 );\n}\n\n/**\n * Returns true if the given prop name should be ignored in attributes\n * serialization, or false otherwise.\n * @param attribute\n */\nfunction isInternalAttribute( attribute: string ): boolean {\n\treturn 'key' === attribute || 'children' === attribute;\n}\n\n/**\n * Returns the normal form of the element's attribute value for HTML.\n * @param attribute\n * @param value\n */\nfunction getNormalAttributeValue( attribute: string, value: any ): any {\n\tswitch ( attribute ) {\n\t\tcase 'style':\n\t\t\treturn renderStyle( value );\n\t}\n\n\treturn value;\n}\n\n/**\n * This is a map of all SVG attributes that have dashes. Map(lower case prop => dashed lower case attribute).\n * We need this to render e.g strokeWidth as stroke-width.\n *\n * List from: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute.\n */\nconst SVG_ATTRIBUTE_WITH_DASHES_LIST: Record< string, string > = [\n\t'accentHeight',\n\t'alignmentBaseline',\n\t'arabicForm',\n\t'baselineShift',\n\t'capHeight',\n\t'clipPath',\n\t'clipRule',\n\t'colorInterpolation',\n\t'colorInterpolationFilters',\n\t'colorProfile',\n\t'colorRendering',\n\t'dominantBaseline',\n\t'enableBackground',\n\t'fillOpacity',\n\t'fillRule',\n\t'floodColor',\n\t'floodOpacity',\n\t'fontFamily',\n\t'fontSize',\n\t'fontSizeAdjust',\n\t'fontStretch',\n\t'fontStyle',\n\t'fontVariant',\n\t'fontWeight',\n\t'glyphName',\n\t'glyphOrientationHorizontal',\n\t'glyphOrientationVertical',\n\t'horizAdvX',\n\t'horizOriginX',\n\t'imageRendering',\n\t'letterSpacing',\n\t'lightingColor',\n\t'markerEnd',\n\t'markerMid',\n\t'markerStart',\n\t'overlinePosition',\n\t'overlineThickness',\n\t'paintOrder',\n\t'panose1',\n\t'pointerEvents',\n\t'renderingIntent',\n\t'shapeRendering',\n\t'stopColor',\n\t'stopOpacity',\n\t'strikethroughPosition',\n\t'strikethroughThickness',\n\t'strokeDasharray',\n\t'strokeDashoffset',\n\t'strokeLinecap',\n\t'strokeLinejoin',\n\t'strokeMiterlimit',\n\t'strokeOpacity',\n\t'strokeWidth',\n\t'textAnchor',\n\t'textDecoration',\n\t'textRendering',\n\t'underlinePosition',\n\t'underlineThickness',\n\t'unicodeBidi',\n\t'unicodeRange',\n\t'unitsPerEm',\n\t'vAlphabetic',\n\t'vHanging',\n\t'vIdeographic',\n\t'vMathematical',\n\t'vectorEffect',\n\t'vertAdvY',\n\t'vertOriginX',\n\t'vertOriginY',\n\t'wordSpacing',\n\t'writingMode',\n\t'xmlnsXlink',\n\t'xHeight',\n].reduce(\n\t( map, attribute ) => {\n\t\t// The keys are lower-cased for more robust lookup.\n\t\tmap[ attribute.toLowerCase() ] = attribute;\n\t\treturn map;\n\t},\n\t{} as Record< string, string >\n);\n\n/**\n * This is a map of all case-sensitive SVG attributes. Map(lowercase key => proper case attribute).\n * The keys are lower-cased for more robust lookup.\n * Note that this list only contains attributes that contain at least one capital letter.\n * Lowercase attributes don't need mapping, since we lowercase all attributes by default.\n */\nconst CASE_SENSITIVE_SVG_ATTRIBUTES: Record< string, string > = [\n\t'allowReorder',\n\t'attributeName',\n\t'attributeType',\n\t'autoReverse',\n\t'baseFrequency',\n\t'baseProfile',\n\t'calcMode',\n\t'clipPathUnits',\n\t'contentScriptType',\n\t'contentStyleType',\n\t'diffuseConstant',\n\t'edgeMode',\n\t'externalResourcesRequired',\n\t'filterRes',\n\t'filterUnits',\n\t'glyphRef',\n\t'gradientTransform',\n\t'gradientUnits',\n\t'kernelMatrix',\n\t'kernelUnitLength',\n\t'keyPoints',\n\t'keySplines',\n\t'keyTimes',\n\t'lengthAdjust',\n\t'limitingConeAngle',\n\t'markerHeight',\n\t'markerUnits',\n\t'markerWidth',\n\t'maskContentUnits',\n\t'maskUnits',\n\t'numOctaves',\n\t'pathLength',\n\t'patternContentUnits',\n\t'patternTransform',\n\t'patternUnits',\n\t'pointsAtX',\n\t'pointsAtY',\n\t'pointsAtZ',\n\t'preserveAlpha',\n\t'preserveAspectRatio',\n\t'primitiveUnits',\n\t'refX',\n\t'refY',\n\t'repeatCount',\n\t'repeatDur',\n\t'requiredExtensions',\n\t'requiredFeatures',\n\t'specularConstant',\n\t'specularExponent',\n\t'spreadMethod',\n\t'startOffset',\n\t'stdDeviation',\n\t'stitchTiles',\n\t'suppressContentEditableWarning',\n\t'suppressHydrationWarning',\n\t'surfaceScale',\n\t'systemLanguage',\n\t'tableValues',\n\t'targetX',\n\t'targetY',\n\t'textLength',\n\t'viewBox',\n\t'viewTarget',\n\t'xChannelSelector',\n\t'yChannelSelector',\n].reduce(\n\t( map, attribute ) => {\n\t\t// The keys are lower-cased for more robust lookup.\n\t\tmap[ attribute.toLowerCase() ] = attribute;\n\t\treturn map;\n\t},\n\t{} as Record< string, string >\n);\n\n/**\n * This is a map of all SVG attributes that have colons.\n * Keys are lower-cased and stripped of their colons for more robust lookup.\n */\nconst SVG_ATTRIBUTES_WITH_COLONS: Record< string, string > = [\n\t'xlink:actuate',\n\t'xlink:arcrole',\n\t'xlink:href',\n\t'xlink:role',\n\t'xlink:show',\n\t'xlink:title',\n\t'xlink:type',\n\t'xml:base',\n\t'xml:lang',\n\t'xml:space',\n\t'xmlns:xlink',\n].reduce(\n\t( map, attribute ) => {\n\t\tmap[ attribute.replace( ':', '' ).toLowerCase() ] = attribute;\n\t\treturn map;\n\t},\n\t{} as Record< string, string >\n);\n\n/**\n * Returns the normal form of the element's attribute name for HTML.\n * @param attribute\n */\nfunction getNormalAttributeName( attribute: string ): string {\n\tswitch ( attribute ) {\n\t\tcase 'htmlFor':\n\t\t\treturn 'for';\n\n\t\tcase 'className':\n\t\t\treturn 'class';\n\t}\n\tconst attributeLowerCase = attribute.toLowerCase();\n\n\tif ( CASE_SENSITIVE_SVG_ATTRIBUTES[ attributeLowerCase ] ) {\n\t\treturn CASE_SENSITIVE_SVG_ATTRIBUTES[ attributeLowerCase ];\n\t} else if ( SVG_ATTRIBUTE_WITH_DASHES_LIST[ attributeLowerCase ] ) {\n\t\treturn kebabCase(\n\t\t\tSVG_ATTRIBUTE_WITH_DASHES_LIST[ attributeLowerCase ]\n\t\t);\n\t} else if ( SVG_ATTRIBUTES_WITH_COLONS[ attributeLowerCase ] ) {\n\t\treturn SVG_ATTRIBUTES_WITH_COLONS[ attributeLowerCase ];\n\t}\n\n\treturn attributeLowerCase;\n}\n\n/**\n * Returns the normal form of the style property name for HTML.\n *\n * - Converts property names to kebab-case, e.g. 'backgroundColor' → 'background-color'\n * - Leaves custom attributes alone, e.g. '--myBackgroundColor' → '--myBackgroundColor'\n * - Converts vendor-prefixed property names to -kebab-case, e.g. 'MozTransform' → '-moz-transform'\n * @param property\n */\nfunction getNormalStylePropertyName( property: string ): string {\n\tif ( property.startsWith( '--' ) ) {\n\t\treturn property;\n\t}\n\n\tif ( hasPrefix( property, [ 'ms', 'O', 'Moz', 'Webkit' ] ) ) {\n\t\treturn '-' + kebabCase( property );\n\t}\n\n\treturn kebabCase( property );\n}\n\n/**\n * Returns the normal form of the style property value for HTML. Appends a\n * default pixel unit if numeric, not a unitless property, and not zero.\n * @param property\n * @param value\n */\nfunction getNormalStylePropertyValue(\n\tproperty: string,\n\tvalue: any\n): string | number {\n\tif (\n\t\ttypeof value === 'number' &&\n\t\t0 !== value &&\n\t\t! hasPrefix( property, [ '--' ] ) &&\n\t\t! CSS_PROPERTIES_SUPPORTS_UNITLESS.has( property )\n\t) {\n\t\treturn value + 'px';\n\t}\n\n\treturn value;\n}\n\n/**\n * Serializes a React element to string.\n * @param element\n * @param context\n * @param legacyContext\n */\nexport function renderElement(\n\telement: React.ReactNode,\n\tcontext?: any,\n\tlegacyContext: Record< string, any > = {}\n): string {\n\tif ( null === element || undefined === element || false === element ) {\n\t\treturn '';\n\t}\n\n\tif ( Array.isArray( element ) ) {\n\t\treturn renderChildren( element, context, legacyContext );\n\t}\n\n\tswitch ( typeof element ) {\n\t\tcase 'string':\n\t\t\treturn escapeHTML( element );\n\n\t\tcase 'number':\n\t\t\treturn element.toString();\n\t}\n\n\tconst { type, props } = element as {\n\t\ttype?: any;\n\t\tprops?: any;\n\t};\n\n\tswitch ( type ) {\n\t\tcase StrictMode:\n\t\tcase Fragment:\n\t\t\treturn renderChildren( props.children, context, legacyContext );\n\n\t\tcase RawHTML:\n\t\t\tconst { children, ...wrapperProps } = props as RawHTMLProps;\n\n\t\t\treturn renderNativeComponent(\n\t\t\t\t! Object.keys( wrapperProps ).length ? null : 'div',\n\t\t\t\t{\n\t\t\t\t\t...wrapperProps,\n\t\t\t\t\tdangerouslySetInnerHTML: { __html: children },\n\t\t\t\t},\n\t\t\t\tcontext,\n\t\t\t\tlegacyContext\n\t\t\t);\n\t}\n\n\tswitch ( typeof type ) {\n\t\tcase 'string':\n\t\t\treturn renderNativeComponent( type, props, context, legacyContext );\n\n\t\tcase 'function':\n\t\t\tif (\n\t\t\t\ttype.prototype &&\n\t\t\t\ttypeof type.prototype.render === 'function'\n\t\t\t) {\n\t\t\t\treturn renderComponent( type, props, context, legacyContext );\n\t\t\t}\n\n\t\t\treturn renderElement(\n\t\t\t\ttype( props, legacyContext ),\n\t\t\t\tcontext,\n\t\t\t\tlegacyContext\n\t\t\t);\n\t}\n\n\tswitch ( type && type.$$typeof ) {\n\t\tcase Provider.$$typeof:\n\t\t\treturn renderChildren( props.children, props.value, legacyContext );\n\n\t\tcase Consumer.$$typeof:\n\t\t\treturn renderElement(\n\t\t\t\tprops.children( context || type._currentValue ),\n\t\t\t\tcontext,\n\t\t\t\tlegacyContext\n\t\t\t);\n\n\t\tcase ForwardRef.$$typeof:\n\t\t\treturn renderElement(\n\t\t\t\ttype.render( props ),\n\t\t\t\tcontext,\n\t\t\t\tlegacyContext\n\t\t\t);\n\t}\n\n\treturn '';\n}\n\n/**\n * Serializes a native component type to string.\n * @param type\n * @param props\n * @param context\n * @param legacyContext\n */\nexport function renderNativeComponent(\n\ttype: string | null,\n\tprops: HTMLProps,\n\tcontext?: any,\n\tlegacyContext: Record< string, any > = {}\n): string {\n\tlet content = '';\n\tif ( type === 'textarea' && props.hasOwnProperty( 'value' ) ) {\n\t\t// Textarea children can be assigned as value prop. If it is, render in\n\t\t// place of children. Ensure to omit so it is not assigned as attribute\n\t\t// as well.\n\t\tcontent = renderChildren( props.value, context, legacyContext );\n\t\tconst { value, ...restProps } = props;\n\t\tprops = restProps;\n\t} else if (\n\t\tprops.dangerouslySetInnerHTML &&\n\t\ttypeof props.dangerouslySetInnerHTML.__html === 'string'\n\t) {\n\t\t// Dangerous content is left unescaped.\n\t\tcontent = props.dangerouslySetInnerHTML.__html;\n\t} else if ( typeof props.children !== 'undefined' ) {\n\t\tcontent = renderChildren( props.children, context, legacyContext );\n\t}\n\n\tif ( ! type ) {\n\t\treturn content;\n\t}\n\n\tconst attributes = renderAttributes( props );\n\n\tif ( SELF_CLOSING_TAGS.has( type ) ) {\n\t\treturn '<' + type + attributes + '/>';\n\t}\n\n\treturn '<' + type + attributes + '>' + content + '</' + type + '>';\n}\n\n/**\n * Serializes a non-native component type to string.\n * @param Component\n * @param props\n * @param context\n * @param legacyContext\n */\nexport function renderComponent(\n\tComponent: React.ComponentClass,\n\tprops: Record< string, any >,\n\tcontext?: any,\n\tlegacyContext: Record< string, any > = {}\n): string {\n\tconst instance = new Component( props, legacyContext ) as ComponentInstance;\n\n\tif ( typeof instance.getChildContext === 'function' ) {\n\t\tObject.assign( legacyContext, instance.getChildContext() );\n\t}\n\n\tconst html = renderElement( instance.render(), context, legacyContext );\n\n\treturn html;\n}\n\n/**\n * Serializes an array of children to string.\n * @param children\n * @param context\n * @param legacyContext\n */\nfunction renderChildren(\n\tchildren: React.ReactNode,\n\tcontext?: any,\n\tlegacyContext: Record< string, any > = {}\n): string {\n\tlet result = '';\n\n\tconst childrenArray = Array.isArray( children ) ? children : [ children ];\n\n\tfor ( let i = 0; i < childrenArray.length; i++ ) {\n\t\tconst child = childrenArray[ i ];\n\n\t\tresult += renderElement( child, context, legacyContext );\n\t}\n\n\treturn result;\n}\n\n/**\n * Renders a props object as a string of HTML attributes.\n * @param props\n */\nexport function renderAttributes( props: Record< string, any > ): string {\n\tlet result = '';\n\n\tfor ( const key in props ) {\n\t\tconst attribute = getNormalAttributeName( key );\n\t\tif ( ! isValidAttributeName( attribute ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet value = getNormalAttributeValue( key, props[ key ] );\n\n\t\t// If value is not of serializable type, skip.\n\t\tif ( ! ATTRIBUTES_TYPES.has( typeof value ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Don't render internal attribute names.\n\t\tif ( isInternalAttribute( key ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst isBooleanAttribute = BOOLEAN_ATTRIBUTES.has( attribute );\n\n\t\t// Boolean attribute should be omitted outright if its value is false.\n\t\tif ( isBooleanAttribute && value === false ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst isMeaningfulAttribute =\n\t\t\tisBooleanAttribute ||\n\t\t\thasPrefix( key, [ 'data-', 'aria-' ] ) ||\n\t\t\tENUMERATED_ATTRIBUTES.has( attribute );\n\n\t\t// Only write boolean value as attribute if meaningful.\n\t\tif ( typeof value === 'boolean' && ! isMeaningfulAttribute ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tresult += ' ' + attribute;\n\n\t\t// Boolean attributes should write attribute name, but without value.\n\t\t// Mere presence of attribute name is effective truthiness.\n\t\tif ( isBooleanAttribute ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( typeof value === 'string' ) {\n\t\t\tvalue = escapeAttribute( value );\n\t\t}\n\n\t\tresult += '=\"' + value + '\"';\n\t}\n\n\treturn result;\n}\n\n/**\n * Renders a style object as a string attribute value.\n * @param style\n */\nexport function renderStyle( style: StyleObject | string ): string | undefined {\n\t// Only generate from object, e.g. tolerate string value.\n\tif ( ! isPlainObject( style ) ) {\n\t\treturn style as string;\n\t}\n\n\tlet result: string | undefined;\n\n\tconst styleObj = style as StyleObject;\n\tfor ( const property in styleObj ) {\n\t\tconst value = styleObj[ property ];\n\t\tif ( null === value || undefined === value ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( result ) {\n\t\t\tresult += ';';\n\t\t} else {\n\t\t\tresult = '';\n\t\t}\n\n\t\tconst normalName = getNormalStylePropertyName( property );\n\t\tconst normalValue = getNormalStylePropertyValue( property, value );\n\t\tresult += normalName + ':' + normalValue;\n\t}\n\n\treturn result;\n}\n\nexport default renderElement;\n", "/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\nconst instanceMap = new WeakMap< object, number >();\n\n/**\n * Creates a new id for a given object.\n *\n * @param object Object reference to create an id for.\n * @return The instance id (index).\n */\nfunction createId( object: object ): number {\n\tconst instances = instanceMap.get( object ) || 0;\n\tinstanceMap.set( object, instances + 1 );\n\treturn instances;\n}\n\n/**\n * Specify the useInstanceId *function* signatures.\n *\n * More accurately, useInstanceId distinguishes between three different\n * signatures:\n *\n * 1. When only object is given, the returned value is a number\n * 2. When object and prefix is given, the returned value is a string\n * 3. When preferredId is given, the returned value is the type of preferredId\n *\n * @param object Object reference to create an id for.\n */\nfunction useInstanceId( object: object ): number;\nfunction useInstanceId( object: object, prefix: string ): string;\nfunction useInstanceId< T extends string | number >(\n\tobject: object,\n\tprefix: string,\n\tpreferredId?: T\n): T;\n\n/**\n * Provides a unique instance ID.\n *\n * @param object        Object reference to create an id for.\n * @param [prefix]      Prefix for the unique id.\n * @param [preferredId] Default ID to use.\n * @return The unique instance id.\n */\nfunction useInstanceId(\n\tobject: object,\n\tprefix?: string,\n\tpreferredId?: string | number\n): string | number {\n\treturn useMemo( () => {\n\t\tif ( preferredId ) {\n\t\t\treturn preferredId;\n\t\t}\n\t\tconst id = createId( object );\n\n\t\treturn prefix ? `${ prefix }-${ id }` : id;\n\t}, [ object, preferredId, prefix ] );\n}\n\nexport default useInstanceId;\n", "/**\n * Internal dependencies\n */\nimport type {\n\tWithInjectedProps,\n\tWithoutInjectedProps,\n} from '../../utils/create-higher-order-component';\nimport { createHigherOrderComponent } from '../../utils/create-higher-order-component';\nimport useInstanceId from '../../hooks/use-instance-id';\n\ntype InstanceIdProps = { instanceId: string | number };\n\n/**\n * A Higher Order Component used to provide a unique instance ID by component.\n */\nconst withInstanceId = createHigherOrderComponent(\n\t< C extends WithInjectedProps< C, InstanceIdProps > >(\n\t\tWrappedComponent: C\n\t) => {\n\t\treturn ( props: WithoutInjectedProps< C, InstanceIdProps > ) => {\n\t\t\tconst instanceId = useInstanceId( WrappedComponent );\n\t\t\t// @ts-ignore\n\t\t\treturn <WrappedComponent { ...props } instanceId={ instanceId } />;\n\t\t};\n\t},\n\t'instanceId'\n);\n\nexport default withInstanceId;\n", "/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type {\n\tWithInjectedProps,\n\tWithoutInjectedProps,\n} from '../../utils/create-higher-order-component';\nimport { createHigherOrderComponent } from '../../utils/create-higher-order-component';\n\n/**\n * We cannot use the `Window['setTimeout']` and `Window['clearTimeout']`\n * types here because those functions include functionality that is not handled\n * by this component, like the ability to pass extra arguments.\n *\n * In the case of this component, we only handle the simplest case where\n * `setTimeout` only accepts a function (not a string) and an optional delay.\n */\ninterface TimeoutProps {\n\tsetTimeout: ( fn: () => void, delay: number ) => number;\n\tclearTimeout: ( id: number ) => void;\n}\n\n/**\n * A higher-order component used to provide and manage delayed function calls\n * that ought to be bound to a component's lifecycle.\n */\nconst withSafeTimeout = createHigherOrderComponent(\n\t< C extends WithInjectedProps< C, TimeoutProps > >(\n\t\tOriginalComponent: C\n\t) => {\n\t\ttype WrappedProps = WithoutInjectedProps< C, TimeoutProps >;\n\t\treturn class WrappedComponent extends Component< WrappedProps > {\n\t\t\ttimeouts: number[];\n\n\t\t\tconstructor( props: WrappedProps ) {\n\t\t\t\tsuper( props );\n\t\t\t\tthis.timeouts = [];\n\t\t\t\tthis.setTimeout = this.setTimeout.bind( this );\n\t\t\t\tthis.clearTimeout = this.clearTimeout.bind( this );\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tthis.timeouts.forEach( clearTimeout );\n\t\t\t}\n\n\t\t\tsetTimeout( fn: () => void, delay: number ) {\n\t\t\t\tconst id = setTimeout( () => {\n\t\t\t\t\tfn();\n\t\t\t\t\tthis.clearTimeout( id );\n\t\t\t\t}, delay );\n\t\t\t\tthis.timeouts.push( id );\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\tclearTimeout( id: number ) {\n\t\t\t\tclearTimeout( id );\n\t\t\t\tthis.timeouts = this.timeouts.filter(\n\t\t\t\t\t( timeoutId ) => timeoutId !== id\n\t\t\t\t);\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\treturn (\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t<OriginalComponent\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tsetTimeout={ this.setTimeout }\n\t\t\t\t\t\tclearTimeout={ this.clearTimeout }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t},\n\t'withSafeTimeout'\n);\n\nexport default withSafeTimeout;\n", "export function assertIsDefined< T >(\n\tval: T,\n\tname: string\n): asserts val is NonNullable< T > {\n\tif (\n\t\tprocess.env.NODE_ENV !== 'production' &&\n\t\t( val === undefined || val === null )\n\t) {\n\t\tthrow new Error(\n\t\t\t`Expected '${ name }' to be defined, but received ${ val }`\n\t\t);\n\t}\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Get the rectangle of a given Range. Returns `null` if no suitable rectangle\n * can be found.\n *\n * @param {Range} range The range.\n *\n * @return {DOMRect?} The rectangle.\n */\nexport default function getRectangleFromRange( range ) {\n\t// For uncollapsed ranges, get the rectangle that bounds the contents of the\n\t// range; this a rectangle enclosing the union of the bounding rectangles\n\t// for all the elements in the range.\n\tif ( ! range.collapsed ) {\n\t\tconst rects = Array.from( range.getClientRects() );\n\n\t\t// If there's just a single rect, return it.\n\t\tif ( rects.length === 1 ) {\n\t\t\treturn rects[ 0 ];\n\t\t}\n\n\t\t// Ignore tiny selection at the edge of a range.\n\t\tconst filteredRects = rects.filter( ( { width } ) => width > 1 );\n\n\t\t// If it's full of tiny selections, return browser default.\n\t\tif ( filteredRects.length === 0 ) {\n\t\t\treturn range.getBoundingClientRect();\n\t\t}\n\n\t\tif ( filteredRects.length === 1 ) {\n\t\t\treturn filteredRects[ 0 ];\n\t\t}\n\n\t\tlet {\n\t\t\ttop: furthestTop,\n\t\t\tbottom: furthestBottom,\n\t\t\tleft: furthestLeft,\n\t\t\tright: furthestRight,\n\t\t} = filteredRects[ 0 ];\n\n\t\tfor ( const { top, bottom, left, right } of filteredRects ) {\n\t\t\tif ( top < furthestTop ) {\n\t\t\t\tfurthestTop = top;\n\t\t\t}\n\t\t\tif ( bottom > furthestBottom ) {\n\t\t\t\tfurthestBottom = bottom;\n\t\t\t}\n\t\t\tif ( left < furthestLeft ) {\n\t\t\t\tfurthestLeft = left;\n\t\t\t}\n\t\t\tif ( right > furthestRight ) {\n\t\t\t\tfurthestRight = right;\n\t\t\t}\n\t\t}\n\n\t\treturn new window.DOMRect(\n\t\t\tfurthestLeft,\n\t\t\tfurthestTop,\n\t\t\tfurthestRight - furthestLeft,\n\t\t\tfurthestBottom - furthestTop\n\t\t);\n\t}\n\n\tconst { startContainer } = range;\n\tconst { ownerDocument } = startContainer;\n\n\t// Correct invalid \"BR\" ranges. The cannot contain any children.\n\tif ( startContainer.nodeName === 'BR' ) {\n\t\tconst { parentNode } = startContainer;\n\t\tassertIsDefined( parentNode, 'parentNode' );\n\t\tconst index = /** @type {Node[]} */ (\n\t\t\tArray.from( parentNode.childNodes )\n\t\t).indexOf( startContainer );\n\n\t\tassertIsDefined( ownerDocument, 'ownerDocument' );\n\t\trange = ownerDocument.createRange();\n\t\trange.setStart( parentNode, index );\n\t\trange.setEnd( parentNode, index );\n\t}\n\n\tconst rects = range.getClientRects();\n\n\t// If we have multiple rectangles for a collapsed range, there's no way to\n\t// know which it is, so don't return anything.\n\tif ( rects.length > 1 ) {\n\t\treturn null;\n\t}\n\n\tlet rect = rects[ 0 ];\n\n\t// If the collapsed range starts (and therefore ends) at an element node,\n\t// `getClientRects` can be empty in some browsers. This can be resolved\n\t// by adding a temporary text node with zero-width space to the range.\n\t//\n\t// See: https://stackoverflow.com/a/6847328/995445\n\tif ( ! rect || rect.height === 0 ) {\n\t\tassertIsDefined( ownerDocument, 'ownerDocument' );\n\t\tconst padNode = ownerDocument.createTextNode( '\\u200b' );\n\t\t// Do not modify the live range.\n\t\trange = range.cloneRange();\n\t\trange.insertNode( padNode );\n\t\trect = range.getClientRects()[ 0 ];\n\t\tassertIsDefined( padNode.parentNode, 'padNode.parentNode' );\n\t\tpadNode.parentNode.removeChild( padNode );\n\t}\n\n\treturn rect;\n}\n", "/**\n * Internal dependencies\n */\nimport getRectangleFromRange from './get-rectangle-from-range';\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Get the rectangle for the selection in a container.\n *\n * @param {Window} win The window of the selection.\n *\n * @return {DOMRect | null} The rectangle.\n */\nexport default function computeCaretRect( win ) {\n\tconst selection = win.getSelection();\n\tassertIsDefined( selection, 'selection' );\n\tconst range = selection.rangeCount ? selection.getRangeAt( 0 ) : null;\n\n\tif ( ! range ) {\n\t\treturn null;\n\t}\n\n\treturn getRectangleFromRange( range );\n}\n", "/* eslint-disable jsdoc/valid-types */\n/**\n * @param {Node} node\n * @return {node is HTMLInputElement} Whether the node is an HTMLInputElement.\n */\nexport default function isHTMLInputElement( node ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn node?.nodeName === 'INPUT';\n}\n", "/**\n * Internal dependencies\n */\nimport isHTMLInputElement from './is-html-input-element';\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Check whether the given element is a text field, where text field is defined\n * by the ability to select within the input, or that it is contenteditable.\n *\n * See: https://html.spec.whatwg.org/#textFieldSelection\n *\n * @param {Node} node The HTML element.\n * @return {node is HTMLElement} True if the element is an text field, false if not.\n */\nexport default function isTextField( node ) {\n\t/* eslint-enable jsdoc/valid-types */\n\tconst nonTextInputs = [\n\t\t'button',\n\t\t'checkbox',\n\t\t'hidden',\n\t\t'file',\n\t\t'radio',\n\t\t'image',\n\t\t'range',\n\t\t'reset',\n\t\t'submit',\n\t\t'number',\n\t\t'email',\n\t\t'time',\n\t];\n\treturn (\n\t\t( isHTMLInputElement( node ) &&\n\t\t\tnode.type &&\n\t\t\t! nonTextInputs.includes( node.type ) ) ||\n\t\tnode.nodeName === 'TEXTAREA' ||\n\t\t/** @type {HTMLElement} */ ( node ).contentEditable === 'true'\n\t);\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * @param {Element} element\n * @return {ReturnType<Window['getComputedStyle']>} The computed style for the element.\n */\nexport default function getComputedStyle( element ) {\n\t/* eslint-enable jsdoc/valid-types */\n\tassertIsDefined(\n\t\telement.ownerDocument.defaultView,\n\t\t'element.ownerDocument.defaultView'\n\t);\n\treturn element.ownerDocument.defaultView.getComputedStyle( element );\n}\n", "/**\n * Internal dependencies\n */\nimport getComputedStyle from './get-computed-style';\n\n/**\n * Given a DOM node, finds the closest scrollable container node or the node\n * itself, if scrollable.\n *\n * @param {Element | null} node      Node from which to start.\n * @param {?string}        direction Direction of scrollable container to search for ('vertical', 'horizontal', 'all').\n *                                   Defaults to 'vertical'.\n * @return {Element | undefined} Scrollable container node, if found.\n */\nexport default function getScrollContainer( node, direction = 'vertical' ) {\n\tif ( ! node ) {\n\t\treturn undefined;\n\t}\n\n\tif ( direction === 'vertical' || direction === 'all' ) {\n\t\t// Scrollable if scrollable height exceeds displayed...\n\t\tif ( node.scrollHeight > node.clientHeight ) {\n\t\t\t// ...except when overflow is defined to be hidden or visible\n\t\t\tconst { overflowY } = getComputedStyle( node );\n\n\t\t\tif ( /(auto|scroll)/.test( overflowY ) ) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( direction === 'horizontal' || direction === 'all' ) {\n\t\t// Scrollable if scrollable width exceeds displayed...\n\t\tif ( node.scrollWidth > node.clientWidth ) {\n\t\t\t// ...except when overflow is defined to be hidden or visible\n\t\t\tconst { overflowX } = getComputedStyle( node );\n\n\t\t\tif ( /(auto|scroll)/.test( overflowX ) ) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( node.ownerDocument === node.parentNode ) {\n\t\treturn node;\n\t}\n\n\t// Continue traversing.\n\treturn getScrollContainer(\n\t\t/** @type {Element} */ ( node.parentNode ),\n\t\tdirection\n\t);\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Given a DOM node, removes it from the DOM.\n *\n * @param {Node} node Node to be removed.\n * @return {void}\n */\nexport default function remove( node ) {\n\tassertIsDefined( node.parentNode, 'node.parentNode' );\n\tnode.parentNode.removeChild( node );\n}\n", "/**\n * Internal dependencies\n */\nimport remove from './remove';\n\n/**\n * Strips scripts and on* attributes from HTML.\n *\n * @param {string} html HTML to sanitize.\n *\n * @return {string} The sanitized HTML.\n */\nexport default function safeHTML( html ) {\n\tconst { body } = document.implementation.createHTMLDocument( '' );\n\tbody.innerHTML = html;\n\tconst elements = body.getElementsByTagName( '*' );\n\tlet elementIndex = elements.length;\n\n\twhile ( elementIndex-- ) {\n\t\tconst element = elements[ elementIndex ];\n\n\t\tif ( element.tagName === 'SCRIPT' ) {\n\t\t\tremove( element );\n\t\t} else {\n\t\t\tlet attributeIndex = element.attributes.length;\n\n\t\t\twhile ( attributeIndex-- ) {\n\t\t\t\tconst { name: key } = element.attributes[ attributeIndex ];\n\n\t\t\t\tif ( key.startsWith( 'on' ) ) {\n\t\t\t\t\telement.removeAttribute( key );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn body.innerHTML;\n}\n", "/**\n * Internal dependencies\n */\nimport safeHTML from './safe-html';\n\n/**\n * Removes any HTML tags from the provided string.\n *\n * @param {string} html The string containing html.\n *\n * @return {string} The text content with any html removed.\n */\nexport default function stripHTML( html ) {\n\t// Remove any script tags or on* attributes otherwise their *contents* will be left\n\t// in place following removal of HTML tags.\n\thtml = safeHTML( html );\n\n\tconst doc = document.implementation.createHTMLDocument( '' );\n\tdoc.body.innerHTML = html;\n\treturn doc.body.textContent || '';\n}\n", "/**\n * All phrasing content elements.\n *\n * @see https://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#phrasing-content-0\n */\n\n/**\n * @typedef {Record<string,SemanticElementDefinition>} ContentSchema\n */\n\n/**\n * @typedef SemanticElementDefinition\n * @property {string[]}      [attributes] Content attributes\n * @property {ContentSchema} [children]   Content attributes\n */\n\n/**\n * All text-level semantic elements.\n *\n * @see https://html.spec.whatwg.org/multipage/text-level-semantics.html\n *\n * @type {ContentSchema}\n */\nconst textContentSchema = {\n\tstrong: {},\n\tem: {},\n\ts: {},\n\tdel: {},\n\tins: {},\n\ta: { attributes: [ 'href', 'target', 'rel', 'id' ] },\n\tcode: {},\n\tabbr: { attributes: [ 'title' ] },\n\tsub: {},\n\tsup: {},\n\tbr: {},\n\tsmall: {},\n\t// To do: fix blockquote.\n\t// cite: {},\n\tq: { attributes: [ 'cite' ] },\n\tdfn: { attributes: [ 'title' ] },\n\tdata: { attributes: [ 'value' ] },\n\ttime: { attributes: [ 'datetime' ] },\n\tvar: {},\n\tsamp: {},\n\tkbd: {},\n\ti: {},\n\tb: {},\n\tu: {},\n\tmark: {},\n\truby: {},\n\trt: {},\n\trp: {},\n\tbdi: { attributes: [ 'dir' ] },\n\tbdo: { attributes: [ 'dir' ] },\n\twbr: {},\n\t'#text': {},\n};\n\n// Recursion is needed.\n// Possible: strong > em > strong.\n// Impossible: strong > strong.\nconst excludedElements = [ '#text', 'br' ];\nObject.keys( textContentSchema )\n\t.filter( ( element ) => ! excludedElements.includes( element ) )\n\t.forEach( ( tag ) => {\n\t\tconst { [ tag ]: removedTag, ...restSchema } = textContentSchema;\n\t\ttextContentSchema[ tag ].children = restSchema;\n\t} );\n\n/**\n * Embedded content elements.\n *\n * @see https://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#embedded-content-0\n *\n * @type {ContentSchema}\n */\nconst embeddedContentSchema = {\n\taudio: {\n\t\tattributes: [\n\t\t\t'src',\n\t\t\t'preload',\n\t\t\t'autoplay',\n\t\t\t'mediagroup',\n\t\t\t'loop',\n\t\t\t'muted',\n\t\t],\n\t},\n\tcanvas: { attributes: [ 'width', 'height' ] },\n\tembed: { attributes: [ 'src', 'type', 'width', 'height' ] },\n\timg: {\n\t\tattributes: [\n\t\t\t'alt',\n\t\t\t'src',\n\t\t\t'srcset',\n\t\t\t'usemap',\n\t\t\t'ismap',\n\t\t\t'width',\n\t\t\t'height',\n\t\t],\n\t},\n\tobject: {\n\t\tattributes: [\n\t\t\t'data',\n\t\t\t'type',\n\t\t\t'name',\n\t\t\t'usemap',\n\t\t\t'form',\n\t\t\t'width',\n\t\t\t'height',\n\t\t],\n\t},\n\tvideo: {\n\t\tattributes: [\n\t\t\t'src',\n\t\t\t'poster',\n\t\t\t'preload',\n\t\t\t'playsinline',\n\t\t\t'autoplay',\n\t\t\t'mediagroup',\n\t\t\t'loop',\n\t\t\t'muted',\n\t\t\t'controls',\n\t\t\t'width',\n\t\t\t'height',\n\t\t],\n\t},\n};\n\n/**\n * Phrasing content elements.\n *\n * @see https://www.w3.org/TR/2011/WD-html5-20110525/content-models.html#phrasing-content-0\n */\nconst phrasingContentSchema = {\n\t...textContentSchema,\n\t...embeddedContentSchema,\n};\n\n/**\n * Get schema of possible paths for phrasing content.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_categories#Phrasing_content\n *\n * @param {string} [context] Set to \"paste\" to exclude invisible elements and\n *                           sensitive data.\n *\n * @return {Partial<ContentSchema>} Schema.\n */\nexport function getPhrasingContentSchema( context ) {\n\tif ( context !== 'paste' ) {\n\t\treturn phrasingContentSchema;\n\t}\n\n\t/**\n\t * @type {Partial<ContentSchema>}\n\t */\n\tconst {\n\t\tu, // Used to mark misspelling. Shouldn't be pasted.\n\t\tabbr, // Invisible.\n\t\tdata, // Invisible.\n\t\ttime, // Invisible.\n\t\twbr, // Invisible.\n\t\tbdi, // Invisible.\n\t\tbdo, // Invisible.\n\t\t...remainingContentSchema\n\t} = {\n\t\t...phrasingContentSchema,\n\t\t// We shouldn't paste potentially sensitive information which is not\n\t\t// visible to the user when pasted, so strip the attributes.\n\t\tins: { children: phrasingContentSchema.ins.children },\n\t\tdel: { children: phrasingContentSchema.del.children },\n\t};\n\n\treturn remainingContentSchema;\n}\n\n/**\n * Find out whether or not the given node is phrasing content.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Content_categories#Phrasing_content\n *\n * @param {Node} node The node to test.\n *\n * @return {boolean} True if phrasing content, false if not.\n */\nexport function isPhrasingContent( node ) {\n\tconst tag = node.nodeName.toLowerCase();\n\treturn getPhrasingContentSchema().hasOwnProperty( tag ) || tag === 'span';\n}\n\n/**\n * @param {Node} node\n * @return {boolean} Node is text content\n */\nexport function isTextContent( node ) {\n\tconst tag = node.nodeName.toLowerCase();\n\treturn textContentSchema.hasOwnProperty( tag ) || tag === 'span';\n}\n", "/**\n * Recursively checks if an element is empty. An element is not empty if it\n * contains text or contains elements with attributes such as images.\n *\n * @param {Element} element The element to check.\n *\n * @return {boolean} Whether or not the element is empty.\n */\nexport default function isEmpty( element ) {\n\tswitch ( element.nodeType ) {\n\t\tcase element.TEXT_NODE:\n\t\t\t// We cannot use \\s since it includes special spaces which we want\n\t\t\t// to preserve.\n\t\t\treturn /^[ \\f\\n\\r\\t\\v\\u00a0]*$/.test( element.nodeValue || '' );\n\t\tcase element.ELEMENT_NODE:\n\t\t\tif ( element.hasAttributes() ) {\n\t\t\t\treturn false;\n\t\t\t} else if ( ! element.hasChildNodes() ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn /** @type {Element[]} */ (\n\t\t\t\tArray.from( element.childNodes )\n\t\t\t).every( isEmpty );\n\t\tdefault:\n\t\t\treturn true;\n\t}\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Unwrap the given node. This means any child nodes are moved to the parent.\n *\n * @param {Node} node The node to unwrap.\n *\n * @return {void}\n */\nexport default function unwrap( node ) {\n\tconst parent = node.parentNode;\n\n\tassertIsDefined( parent, 'node.parentNode' );\n\n\twhile ( node.firstChild ) {\n\t\tparent.insertBefore( node.firstChild, node );\n\t}\n\n\tparent.removeChild( node );\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Given two DOM nodes, inserts the former in the DOM as the next sibling of\n * the latter.\n *\n * @param {Node} newNode       Node to be inserted.\n * @param {Node} referenceNode Node after which to perform the insertion.\n * @return {void}\n */\nexport default function insertAfter( newNode, referenceNode ) {\n\tassertIsDefined( referenceNode.parentNode, 'referenceNode.parentNode' );\n\treferenceNode.parentNode.insertBefore( newNode, referenceNode.nextSibling );\n}\n", "/* eslint-disable jsdoc/valid-types */\n/**\n * @param {Node | null | undefined} node\n * @return {node is Element} True if node is an Element node\n */\nexport default function isElement( node ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn !! node && node.nodeType === node.ELEMENT_NODE;\n}\n", "/**\n * Internal dependencies\n */\nimport isEmpty from './is-empty';\nimport remove from './remove';\nimport unwrap from './unwrap';\nimport { isPhrasingContent } from '../phrasing-content';\nimport insertAfter from './insert-after';\nimport isElement from './is-element';\n\nconst noop = () => {};\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * @typedef SchemaItem\n * @property {string[]}                            [attributes] Attributes.\n * @property {(string | RegExp)[]}                 [classes]    Classnames or RegExp to test against.\n * @property {'*' | { [tag: string]: SchemaItem }} [children]   Child schemas.\n * @property {string[]}                            [require]    Selectors to test required children against. Leave empty or undefined if there are no requirements.\n * @property {boolean}                             allowEmpty   Whether to allow nodes without children.\n * @property {(node: Node) => boolean}             [isMatch]    Function to test whether a node is a match. If left undefined any node will be assumed to match.\n */\n\n/** @typedef {{ [tag: string]: SchemaItem }} Schema */\n/* eslint-enable jsdoc/valid-types */\n\n/**\n * Given a schema, unwraps or removes nodes, attributes and classes on a node\n * list.\n *\n * @param {NodeList} nodeList The nodeList to filter.\n * @param {Document} doc      The document of the nodeList.\n * @param {Schema}   schema   An array of functions that can mutate with the provided node.\n * @param {boolean}  inline   Whether to clean for inline mode.\n */\nexport default function cleanNodeList( nodeList, doc, schema, inline ) {\n\tArray.from( nodeList ).forEach(\n\t\t( /** @type {Node & { nextElementSibling?: unknown }} */ node ) => {\n\t\t\tconst tag = node.nodeName.toLowerCase();\n\n\t\t\t// It's a valid child, if the tag exists in the schema without an isMatch\n\t\t\t// function, or with an isMatch function that matches the node.\n\t\t\tif (\n\t\t\t\tschema.hasOwnProperty( tag ) &&\n\t\t\t\t( ! schema[ tag ].isMatch || schema[ tag ].isMatch?.( node ) )\n\t\t\t) {\n\t\t\t\tif ( isElement( node ) ) {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tattributes = [],\n\t\t\t\t\t\tclasses = [],\n\t\t\t\t\t\tchildren,\n\t\t\t\t\t\trequire = [],\n\t\t\t\t\t\tallowEmpty,\n\t\t\t\t\t} = schema[ tag ];\n\n\t\t\t\t\t// If the node is empty and it's supposed to have children,\n\t\t\t\t\t// remove the node.\n\t\t\t\t\tif ( children && ! allowEmpty && isEmpty( node ) ) {\n\t\t\t\t\t\tremove( node );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( node.hasAttributes() ) {\n\t\t\t\t\t\t// Strip invalid attributes.\n\t\t\t\t\t\tArray.from( node.attributes ).forEach( ( { name } ) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tname !== 'class' &&\n\t\t\t\t\t\t\t\t! attributes.includes( name )\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tnode.removeAttribute( name );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Strip invalid classes.\n\t\t\t\t\t\t// In jsdom-jscore, 'node.classList' can be undefined.\n\t\t\t\t\t\t// TODO: Explore patching this in jsdom-jscore.\n\t\t\t\t\t\tif ( node.classList && node.classList.length ) {\n\t\t\t\t\t\t\tconst mattchers = classes.map( ( item ) => {\n\t\t\t\t\t\t\t\tif ( item === '*' ) {\n\t\t\t\t\t\t\t\t\t// Keep all classes.\n\t\t\t\t\t\t\t\t\treturn () => true;\n\t\t\t\t\t\t\t\t} else if ( typeof item === 'string' ) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t/** @type {string} */ className\n\t\t\t\t\t\t\t\t\t) => className === item;\n\t\t\t\t\t\t\t\t} else if ( item instanceof RegExp ) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t/** @type {string} */ className\n\t\t\t\t\t\t\t\t\t) => item.test( className );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn noop;\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tArray.from( node.classList ).forEach( ( name ) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t! mattchers.some( ( isMatch ) =>\n\t\t\t\t\t\t\t\t\t\tisMatch( name )\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tnode.classList.remove( name );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tif ( ! node.classList.length ) {\n\t\t\t\t\t\t\t\tnode.removeAttribute( 'class' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( node.hasChildNodes() ) {\n\t\t\t\t\t\t// Do not filter any content.\n\t\t\t\t\t\tif ( children === '*' ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Continue if the node is supposed to have children.\n\t\t\t\t\t\tif ( children ) {\n\t\t\t\t\t\t\t// If a parent requires certain children, but it does\n\t\t\t\t\t\t\t// not have them, drop the parent and continue.\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\trequire.length &&\n\t\t\t\t\t\t\t\t! node.querySelector( require.join( ',' ) )\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcleanNodeList(\n\t\t\t\t\t\t\t\t\tnode.childNodes,\n\t\t\t\t\t\t\t\t\tdoc,\n\t\t\t\t\t\t\t\t\tschema,\n\t\t\t\t\t\t\t\t\tinline\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tunwrap( node );\n\t\t\t\t\t\t\t\t// If the node is at the top, phrasing content, and\n\t\t\t\t\t\t\t\t// contains children that are block content, unwrap\n\t\t\t\t\t\t\t\t// the node because it is invalid.\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tnode.parentNode &&\n\t\t\t\t\t\t\t\tnode.parentNode.nodeName === 'BODY' &&\n\t\t\t\t\t\t\t\tisPhrasingContent( node )\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tcleanNodeList(\n\t\t\t\t\t\t\t\t\tnode.childNodes,\n\t\t\t\t\t\t\t\t\tdoc,\n\t\t\t\t\t\t\t\t\tschema,\n\t\t\t\t\t\t\t\t\tinline\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tArray.from( node.childNodes ).some(\n\t\t\t\t\t\t\t\t\t\t( child ) =>\n\t\t\t\t\t\t\t\t\t\t\t! isPhrasingContent( child )\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tunwrap( node );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcleanNodeList(\n\t\t\t\t\t\t\t\t\tnode.childNodes,\n\t\t\t\t\t\t\t\t\tdoc,\n\t\t\t\t\t\t\t\t\tchildren,\n\t\t\t\t\t\t\t\t\tinline\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Remove children if the node is not supposed to have any.\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twhile ( node.firstChild ) {\n\t\t\t\t\t\t\t\tremove( node.firstChild );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Invalid child. Continue with schema at the same place and unwrap.\n\t\t\t} else {\n\t\t\t\tcleanNodeList( node.childNodes, doc, schema, inline );\n\n\t\t\t\t// For inline mode, insert a line break when unwrapping nodes that\n\t\t\t\t// are not phrasing content.\n\t\t\t\tif (\n\t\t\t\t\tinline &&\n\t\t\t\t\t! isPhrasingContent( node ) &&\n\t\t\t\t\tnode.nextElementSibling\n\t\t\t\t) {\n\t\t\t\t\tinsertAfter( doc.createElement( 'br' ), node );\n\t\t\t\t}\n\n\t\t\t\tunwrap( node );\n\t\t\t}\n\t\t}\n\t);\n}\n", "/**\n * Internal dependencies\n */\nimport cleanNodeList from './clean-node-list';\n\n/**\n * Given a schema, unwraps or removes nodes, attributes and classes on HTML.\n *\n * @param {string}                             HTML   The HTML to clean up.\n * @param {import('./clean-node-list').Schema} schema Schema for the HTML.\n * @param {boolean}                            inline Whether to clean for inline mode.\n *\n * @return {string} The cleaned up HTML.\n */\nexport default function removeInvalidHTML( HTML, schema, inline ) {\n\tconst doc = document.implementation.createHTMLDocument( '' );\n\n\tdoc.body.innerHTML = HTML;\n\n\tcleanNodeList( doc.body.childNodes, doc, schema, inline );\n\n\treturn doc.body.innerHTML;\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Check whether the current document has selected text. This applies to ranges\n * of text in the document, and not selection inside `<input>` and `<textarea>`\n * elements.\n *\n * See: https://developer.mozilla.org/en-US/docs/Web/API/Window/getSelection#Related_objects.\n *\n * @param {Document} doc The document to check.\n *\n * @return {boolean} True if there is selection, false if not.\n */\nexport default function documentHasTextSelection( doc ) {\n\tassertIsDefined( doc.defaultView, 'doc.defaultView' );\n\tconst selection = doc.defaultView.getSelection();\n\tassertIsDefined( selection, 'selection' );\n\tconst range = selection.rangeCount ? selection.getRangeAt( 0 ) : null;\n\treturn !! range && ! range.collapsed;\n}\n", "/**\n * Internal dependencies\n */\nimport isTextField from './is-text-field';\nimport isHTMLInputElement from './is-html-input-element';\n\n/**\n * Check whether the given input field or textarea contains a (uncollapsed)\n * selection of text.\n *\n * CAVEAT: Only specific text-based HTML inputs support the selection APIs\n * needed to determine whether they have a collapsed or uncollapsed selection.\n * This function defaults to returning `true` when the selection cannot be\n * inspected, such as with `<input type=\"time\">`. The rationale is that this\n * should cause the block editor to defer to the browser's native selection\n * handling (e.g. copying and pasting), thereby reducing friction for the user.\n *\n * See: https://html.spec.whatwg.org/multipage/input.html#do-not-apply\n *\n * @param {Element} element The HTML element.\n *\n * @return {boolean} Whether the input/textarea element has some \"selection\".\n */\nexport default function inputFieldHasUncollapsedSelection( element ) {\n\tif ( ! isHTMLInputElement( element ) && ! isTextField( element ) ) {\n\t\treturn false;\n\t}\n\n\t// Safari throws a type error when trying to get `selectionStart` and\n\t// `selectionEnd` on non-text <input> elements, so a try/catch construct is\n\t// necessary.\n\ttry {\n\t\tconst { selectionStart, selectionEnd } =\n\t\t\t/** @type {HTMLInputElement | HTMLTextAreaElement} */ ( element );\n\t\treturn (\n\t\t\t// `null` means the input type doesn't implement selection, thus we\n\t\t\t// cannot determine whether the selection is collapsed, so we\n\t\t\t// default to true.\n\t\t\tselectionStart === null ||\n\t\t\t// when not null, compare the two points\n\t\t\tselectionStart !== selectionEnd\n\t\t);\n\t} catch ( error ) {\n\t\t// This is Safari's way of saying that the input type doesn't implement\n\t\t// selection, so we default to true.\n\t\treturn true;\n\t}\n}\n", "/**\n * Internal dependencies\n */\nimport documentHasTextSelection from './document-has-text-selection';\nimport inputFieldHasUncollapsedSelection from './input-field-has-uncollapsed-selection';\n\n/**\n * Check whether the current document has any sort of (uncollapsed) selection.\n * This includes ranges of text across elements and any selection inside\n * textual `<input>` and `<textarea>` elements.\n *\n * @param {Document} doc The document to check.\n *\n * @return {boolean} Whether there is any recognizable text selection in the document.\n */\nexport default function documentHasUncollapsedSelection( doc ) {\n\treturn (\n\t\tdocumentHasTextSelection( doc ) ||\n\t\t( !! doc.activeElement &&\n\t\t\tinputFieldHasUncollapsedSelection( doc.activeElement ) )\n\t);\n}\n", "/**\n * Internal dependencies\n */\nimport isTextField from './is-text-field';\nimport isHTMLInputElement from './is-html-input-element';\nimport documentHasTextSelection from './document-has-text-selection';\n\n/**\n * Check whether the current document has a selection. This includes focus in\n * input fields, textareas, and general rich-text selection.\n *\n * @param {Document} doc The document to check.\n *\n * @return {boolean} True if there is selection, false if not.\n */\nexport default function documentHasSelection( doc ) {\n\treturn (\n\t\t!! doc.activeElement &&\n\t\t( isHTMLInputElement( doc.activeElement ) ||\n\t\t\tisTextField( doc.activeElement ) ||\n\t\t\tdocumentHasTextSelection( doc ) )\n\t);\n}\n", "/* eslint-disable jsdoc/valid-types */\n/**\n * @param {Element} element\n * @return {element is HTMLInputElement | HTMLTextAreaElement} Whether the element is an input or textarea\n */\nexport default function isInputOrTextArea( element ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn element.tagName === 'INPUT' || element.tagName === 'TEXTAREA';\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\nimport isInputOrTextArea from './is-input-or-text-area';\n\n/**\n * Check whether the contents of the element have been entirely selected.\n * Returns true if there is no possibility of selection.\n *\n * @param {HTMLElement} element The element to check.\n *\n * @return {boolean} True if entirely selected, false if not.\n */\nexport default function isEntirelySelected( element ) {\n\tif ( isInputOrTextArea( element ) ) {\n\t\treturn (\n\t\t\telement.selectionStart === 0 &&\n\t\t\telement.value.length === element.selectionEnd\n\t\t);\n\t}\n\n\tif ( ! element.isContentEditable ) {\n\t\treturn true;\n\t}\n\n\tconst { ownerDocument } = element;\n\tconst { defaultView } = ownerDocument;\n\tassertIsDefined( defaultView, 'defaultView' );\n\tconst selection = defaultView.getSelection();\n\tassertIsDefined( selection, 'selection' );\n\tconst range = selection.rangeCount ? selection.getRangeAt( 0 ) : null;\n\n\tif ( ! range ) {\n\t\treturn true;\n\t}\n\n\tconst { startContainer, endContainer, startOffset, endOffset } = range;\n\n\tif (\n\t\tstartContainer === element &&\n\t\tendContainer === element &&\n\t\tstartOffset === 0 &&\n\t\tendOffset === element.childNodes.length\n\t) {\n\t\treturn true;\n\t}\n\n\tconst lastChild = element.lastChild;\n\tassertIsDefined( lastChild, 'lastChild' );\n\tconst endContainerContentLength =\n\t\tendContainer.nodeType === endContainer.TEXT_NODE\n\t\t\t? /** @type {Text} */ ( endContainer ).data.length\n\t\t\t: endContainer.childNodes.length;\n\n\treturn (\n\t\tisDeepChild( startContainer, element, 'firstChild' ) &&\n\t\tisDeepChild( endContainer, element, 'lastChild' ) &&\n\t\tstartOffset === 0 &&\n\t\tendOffset === endContainerContentLength\n\t);\n}\n\n/**\n * Check whether the contents of the element have been entirely selected.\n * Returns true if there is no possibility of selection.\n *\n * @param {HTMLElement|Node}         query     The element to check.\n * @param {HTMLElement}              container The container that we suspect \"query\" may be a first or last child of.\n * @param {\"firstChild\"|\"lastChild\"} propName  \"firstChild\" or \"lastChild\"\n *\n * @return {boolean} True if query is a deep first/last child of container, false otherwise.\n */\nfunction isDeepChild( query, container, propName ) {\n\t/** @type {HTMLElement | ChildNode | null} */\n\tlet candidate = container;\n\tdo {\n\t\tif ( query === candidate ) {\n\t\t\treturn true;\n\t\t}\n\t\tcandidate = candidate[ propName ];\n\t} while ( candidate );\n\treturn false;\n}\n", "/**\n * Internal dependencies\n */\nimport isInputOrTextArea from './is-input-or-text-area';\n\n/**\n *\n * Detects if element is a form element.\n *\n * @param {Element} element The element to check.\n *\n * @return {boolean} True if form element and false otherwise.\n */\nexport default function isFormElement( element ) {\n\tif ( ! element ) {\n\t\treturn false;\n\t}\n\n\tconst { tagName } = element;\n\tconst checkForInputTextarea = isInputOrTextArea( element );\n\treturn (\n\t\tcheckForInputTextarea || tagName === 'BUTTON' || tagName === 'SELECT'\n\t);\n}\n", "/**\n * Internal dependencies\n */\nimport getComputedStyle from './get-computed-style';\n\n/**\n * Whether the element's text direction is right-to-left.\n *\n * @param {Element} element The element to check.\n *\n * @return {boolean} True if rtl, false if ltr.\n */\nexport default function isRTL( element ) {\n\treturn getComputedStyle( element ).direction === 'rtl';\n}\n", "/**\n * Gets the height of the range without ignoring zero width rectangles, which\n * some browsers ignore when creating a union.\n *\n * @param {Range} range The range to check.\n * @return {number | undefined} Height of the range or undefined if the range has no client rectangles.\n */\nexport default function getRangeHeight( range ) {\n\tconst rects = Array.from( range.getClientRects() );\n\n\tif ( ! rects.length ) {\n\t\treturn;\n\t}\n\n\tconst highestTop = Math.min( ...rects.map( ( { top } ) => top ) );\n\tconst lowestBottom = Math.max( ...rects.map( ( { bottom } ) => bottom ) );\n\n\treturn lowestBottom - highestTop;\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Returns true if the given selection object is in the forward direction, or\n * false otherwise.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n *\n * @param {Selection} selection Selection object to check.\n *\n * @return {boolean} Whether the selection is forward.\n */\nexport default function isSelectionForward( selection ) {\n\tconst { anchorNode, focusNode, anchorOffset, focusOffset } = selection;\n\n\tassertIsDefined( anchorNode, 'anchorNode' );\n\tassertIsDefined( focusNode, 'focusNode' );\n\tconst position = anchorNode.compareDocumentPosition( focusNode );\n\n\t// Disable reason: `Node#compareDocumentPosition` returns a bitmask value,\n\t// so bitwise operators are intended.\n\t/* eslint-disable no-bitwise */\n\t// Compare whether anchor node precedes focus node. If focus node (where\n\t// end of selection occurs) is after the anchor node, it is forward.\n\tif ( position & anchorNode.DOCUMENT_POSITION_PRECEDING ) {\n\t\treturn false;\n\t}\n\n\tif ( position & anchorNode.DOCUMENT_POSITION_FOLLOWING ) {\n\t\treturn true;\n\t}\n\t/* eslint-enable no-bitwise */\n\n\t// `compareDocumentPosition` returns 0 when passed the same node, in which\n\t// case compare offsets.\n\tif ( position === 0 ) {\n\t\treturn anchorOffset <= focusOffset;\n\t}\n\n\t// This should never be reached, but return true as default case.\n\treturn true;\n}\n", "/**\n * Polyfill.\n * Get a collapsed range for a given point.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/caretRangeFromPoint\n *\n * @param {DocumentMaybeWithCaretPositionFromPoint} doc The document of the range.\n * @param {number}                                  x   Horizontal position within the current viewport.\n * @param {number}                                  y   Vertical position within the current viewport.\n *\n * @return {Range | null} The best range for the given point.\n */\nexport default function caretRangeFromPoint( doc, x, y ) {\n\tif ( doc.caretRangeFromPoint ) {\n\t\treturn doc.caretRangeFromPoint( x, y );\n\t}\n\n\tif ( ! doc.caretPositionFromPoint ) {\n\t\treturn null;\n\t}\n\n\tconst point = doc.caretPositionFromPoint( x, y );\n\n\t// If x or y are negative, outside viewport, or there is no text entry node.\n\t// https://developer.mozilla.org/en-US/docs/Web/API/Document/caretRangeFromPoint\n\tif ( ! point ) {\n\t\treturn null;\n\t}\n\n\tconst range = doc.createRange();\n\n\trange.setStart( point.offsetNode, point.offset );\n\trange.collapse( true );\n\n\treturn range;\n}\n\n/**\n * @typedef {{caretPositionFromPoint?: (x: number, y: number)=> CaretPosition | null} & Document } DocumentMaybeWithCaretPositionFromPoint\n * @typedef {{ readonly offset: number; readonly offsetNode: Node; getClientRect(): DOMRect | null; }} CaretPosition\n */\n", "/**\n * Internal dependencies\n */\nimport caretRangeFromPoint from './caret-range-from-point';\nimport getComputedStyle from './get-computed-style';\n\n/**\n * Get a collapsed range for a given point.\n * Gives the container a temporary high z-index (above any UI).\n * This is preferred over getting the UI nodes and set styles there.\n *\n * @param {Document}    doc       The document of the range.\n * @param {number}      x         Horizontal position within the current viewport.\n * @param {number}      y         Vertical position within the current viewport.\n * @param {HTMLElement} container Container in which the range is expected to be found.\n *\n * @return {?Range} The best range for the given point.\n */\nexport default function hiddenCaretRangeFromPoint( doc, x, y, container ) {\n\tconst originalZIndex = container.style.zIndex;\n\tconst originalPosition = container.style.position;\n\n\tconst { position = 'static' } = getComputedStyle( container );\n\n\t// A z-index only works if the element position is not static.\n\tif ( position === 'static' ) {\n\t\tcontainer.style.position = 'relative';\n\t}\n\n\tcontainer.style.zIndex = '10000';\n\n\tconst range = caretRangeFromPoint( doc, x, y );\n\n\tcontainer.style.zIndex = originalZIndex;\n\tcontainer.style.position = originalPosition;\n\n\treturn range;\n}\n", "/**\n * If no range range can be created or it is outside the container, the element\n * may be out of view, so scroll it into view and try again.\n *\n * @param {HTMLElement} container  The container to scroll.\n * @param {boolean}     alignToTop True to align to top, false to bottom.\n * @param {Function}    callback   The callback to create the range.\n *\n * @return {?Range} The range returned by the callback.\n */\nexport function scrollIfNoRange( container, alignToTop, callback ) {\n\tlet range = callback();\n\n\t// If no range range can be created or it is outside the container, the\n\t// element may be out of view.\n\tif (\n\t\t! range ||\n\t\t! range.startContainer ||\n\t\t! container.contains( range.startContainer )\n\t) {\n\t\tcontainer.scrollIntoView( alignToTop );\n\t\trange = callback();\n\n\t\tif (\n\t\t\t! range ||\n\t\t\t! range.startContainer ||\n\t\t\t! container.contains( range.startContainer )\n\t\t) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn range;\n}\n", "/**\n * Internal dependencies\n */\nimport isRTL from './is-rtl';\nimport getRangeHeight from './get-range-height';\nimport getRectangleFromRange from './get-rectangle-from-range';\nimport isSelectionForward from './is-selection-forward';\nimport hiddenCaretRangeFromPoint from './hidden-caret-range-from-point';\nimport { assertIsDefined } from '../utils/assert-is-defined';\nimport isInputOrTextArea from './is-input-or-text-area';\nimport { scrollIfNoRange } from './scroll-if-no-range';\n\n/**\n * Check whether the selection is at the edge of the container. Checks for\n * horizontal position by default. Set `onlyVertical` to true to check only\n * vertically.\n *\n * @param {HTMLElement} container            Focusable element.\n * @param {boolean}     isReverse            Set to true to check left, false to check right.\n * @param {boolean}     [onlyVertical=false] Set to true to check only vertical position.\n *\n * @return {boolean} True if at the edge, false if not.\n */\nexport default function isEdge( container, isReverse, onlyVertical = false ) {\n\tif (\n\t\tisInputOrTextArea( container ) &&\n\t\ttypeof container.selectionStart === 'number'\n\t) {\n\t\tif ( container.selectionStart !== container.selectionEnd ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( isReverse ) {\n\t\t\treturn container.selectionStart === 0;\n\t\t}\n\n\t\treturn container.value.length === container.selectionStart;\n\t}\n\n\tif ( ! container.isContentEditable ) {\n\t\treturn true;\n\t}\n\n\tconst { ownerDocument } = container;\n\tconst { defaultView } = ownerDocument;\n\n\tassertIsDefined( defaultView, 'defaultView' );\n\tconst selection = defaultView.getSelection();\n\n\tif ( ! selection || ! selection.rangeCount ) {\n\t\treturn false;\n\t}\n\n\tconst range = selection.getRangeAt( 0 );\n\tconst collapsedRange = range.cloneRange();\n\tconst isForward = isSelectionForward( selection );\n\tconst isCollapsed = selection.isCollapsed;\n\n\t// Collapse in direction of selection.\n\tif ( ! isCollapsed ) {\n\t\tcollapsedRange.collapse( ! isForward );\n\t}\n\n\tconst collapsedRangeRect = getRectangleFromRange( collapsedRange );\n\tconst rangeRect = getRectangleFromRange( range );\n\n\tif ( ! collapsedRangeRect || ! rangeRect ) {\n\t\treturn false;\n\t}\n\n\t// Only consider the multiline selection at the edge if the direction is\n\t// towards the edge. The selection is multiline if it is taller than the\n\t// collapsed  selection.\n\tconst rangeHeight = getRangeHeight( range );\n\tif (\n\t\t! isCollapsed &&\n\t\trangeHeight &&\n\t\trangeHeight > collapsedRangeRect.height &&\n\t\tisForward === isReverse\n\t) {\n\t\treturn false;\n\t}\n\n\t// In the case of RTL scripts, the horizontal edge is at the opposite side.\n\tconst isReverseDir = isRTL( container ) ? ! isReverse : isReverse;\n\tconst containerRect = container.getBoundingClientRect();\n\n\t// To check if a selection is at the edge, we insert a test selection at the\n\t// edge of the container and check if the selections have the same vertical\n\t// or horizontal position. If they do, the selection is at the edge.\n\t// This method proves to be better than a DOM-based calculation for the\n\t// horizontal edge, since it ignores empty textnodes and a trailing line\n\t// break element. In other words, we need to check visual positioning, not\n\t// DOM positioning.\n\t// It also proves better than using the computed style for the vertical\n\t// edge, because we cannot know the padding and line height reliably in\n\t// pixels. `getComputedStyle` may return a value with different units.\n\tconst x = isReverseDir ? containerRect.left + 1 : containerRect.right - 1;\n\tconst y = isReverse ? containerRect.top + 1 : containerRect.bottom - 1;\n\tconst testRange = scrollIfNoRange( container, isReverse, () =>\n\t\thiddenCaretRangeFromPoint( ownerDocument, x, y, container )\n\t);\n\n\tif ( ! testRange ) {\n\t\treturn false;\n\t}\n\n\tconst testRect = getRectangleFromRange( testRange );\n\n\tif ( ! testRect ) {\n\t\treturn false;\n\t}\n\n\tconst verticalSide = isReverse ? 'top' : 'bottom';\n\tconst horizontalSide = isReverseDir ? 'left' : 'right';\n\tconst verticalDiff = testRect[ verticalSide ] - rangeRect[ verticalSide ];\n\tconst horizontalDiff =\n\t\ttestRect[ horizontalSide ] - collapsedRangeRect[ horizontalSide ];\n\n\t// Allow the position to be 1px off.\n\tconst hasVerticalDiff = Math.abs( verticalDiff ) <= 1;\n\tconst hasHorizontalDiff = Math.abs( horizontalDiff ) <= 1;\n\n\treturn onlyVertical\n\t\t? hasVerticalDiff\n\t\t: hasVerticalDiff && hasHorizontalDiff;\n}\n", "/**\n * Internal dependencies\n */\nimport isEdge from './is-edge';\n\n/**\n * Check whether the selection is horizontally at the edge of the container.\n *\n * @param {HTMLElement} container Focusable element.\n * @param {boolean}     isReverse Set to true to check left, false for right.\n *\n * @return {boolean} True if at the horizontal edge, false if not.\n */\nexport default function isHorizontalEdge( container, isReverse ) {\n\treturn isEdge( container, isReverse );\n}\n", "/**\n * Internal dependencies\n */\nimport isEdge from './is-edge';\n\n/**\n * Check whether the selection is vertically at the edge of the container.\n *\n * @param {HTMLElement} container Focusable element.\n * @param {boolean}     isReverse Set to true to check top, false for bottom.\n *\n * @return {boolean} True if at the vertical edge, false if not.\n */\nexport default function isVerticalEdge( container, isReverse ) {\n\treturn isEdge( container, isReverse, true );\n}\n", "/**\n * Internal dependencies\n */\nimport hiddenCaretRangeFromPoint from './hidden-caret-range-from-point';\nimport { assertIsDefined } from '../utils/assert-is-defined';\nimport isInputOrTextArea from './is-input-or-text-area';\nimport isRTL from './is-rtl';\nimport { scrollIfNoRange } from './scroll-if-no-range';\n\n/**\n * Gets the range to place.\n *\n * @param {HTMLElement}      container Focusable element.\n * @param {boolean}          isReverse True for end, false for start.\n * @param {number|undefined} x         X coordinate to vertically position.\n *\n * @return {Range|null} The range to place.\n */\nfunction getRange( container, isReverse, x ) {\n\tconst { ownerDocument } = container;\n\t// In the case of RTL scripts, the horizontal edge is at the opposite side.\n\tconst isReverseDir = isRTL( container ) ? ! isReverse : isReverse;\n\tconst containerRect = container.getBoundingClientRect();\n\t// When placing at the end (isReverse), find the closest range to the bottom\n\t// right corner. When placing at the start, to the top left corner.\n\t// Ensure x is defined and within the container's boundaries. When it's\n\t// exactly at the boundary, it's not considered within the boundaries.\n\tif ( x === undefined ) {\n\t\tx = isReverse ? containerRect.right - 1 : containerRect.left + 1;\n\t} else if ( x <= containerRect.left ) {\n\t\tx = containerRect.left + 1;\n\t} else if ( x >= containerRect.right ) {\n\t\tx = containerRect.right - 1;\n\t}\n\tconst y = isReverseDir ? containerRect.bottom - 1 : containerRect.top + 1;\n\treturn hiddenCaretRangeFromPoint( ownerDocument, x, y, container );\n}\n\n/**\n * Places the caret at start or end of a given element.\n *\n * @param {HTMLElement}      container Focusable element.\n * @param {boolean}          isReverse True for end, false for start.\n * @param {number|undefined} x         X coordinate to vertically position.\n */\nexport default function placeCaretAtEdge( container, isReverse, x ) {\n\tif ( ! container ) {\n\t\treturn;\n\t}\n\n\tcontainer.focus();\n\n\tif ( isInputOrTextArea( container ) ) {\n\t\t// The element may not support selection setting.\n\t\tif ( typeof container.selectionStart !== 'number' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isReverse ) {\n\t\t\tcontainer.selectionStart = container.value.length;\n\t\t\tcontainer.selectionEnd = container.value.length;\n\t\t} else {\n\t\t\tcontainer.selectionStart = 0;\n\t\t\tcontainer.selectionEnd = 0;\n\t\t}\n\n\t\treturn;\n\t}\n\n\tif ( ! container.isContentEditable ) {\n\t\treturn;\n\t}\n\n\tconst range = scrollIfNoRange( container, isReverse, () =>\n\t\tgetRange( container, isReverse, x )\n\t);\n\n\tif ( ! range ) {\n\t\treturn;\n\t}\n\n\tconst { ownerDocument } = container;\n\tconst { defaultView } = ownerDocument;\n\tassertIsDefined( defaultView, 'defaultView' );\n\tconst selection = defaultView.getSelection();\n\tassertIsDefined( selection, 'selection' );\n\tselection.removeAllRanges();\n\tselection.addRange( range );\n}\n", "/**\n * Internal dependencies\n */\nimport placeCaretAtEdge from './place-caret-at-edge';\n\n/**\n * Places the caret at start or end of a given element.\n *\n * @param {HTMLElement} container Focusable element.\n * @param {boolean}     isReverse True for end, false for start.\n */\nexport default function placeCaretAtHorizontalEdge( container, isReverse ) {\n\treturn placeCaretAtEdge( container, isReverse, undefined );\n}\n", "/**\n * Internal dependencies\n */\nimport placeCaretAtEdge from './place-caret-at-edge';\n\n/**\n * Places the caret at the top or bottom of a given element.\n *\n * @param {HTMLElement} container Focusable element.\n * @param {boolean}     isReverse True for bottom, false for top.\n * @param {DOMRect}     [rect]    The rectangle to position the caret with.\n */\nexport default function placeCaretAtVerticalEdge( container, isReverse, rect ) {\n\treturn placeCaretAtEdge( container, isReverse, rect?.left );\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\nimport insertAfter from './insert-after';\nimport remove from './remove';\n\n/**\n * Given two DOM nodes, replaces the former with the latter in the DOM.\n *\n * @param {Element} processedNode Node to be removed.\n * @param {Element} newNode       Node to be inserted in its place.\n * @return {void}\n */\nexport default function replace( processedNode, newNode ) {\n\tassertIsDefined( processedNode.parentNode, 'processedNode.parentNode' );\n\tinsertAfter( newNode, processedNode.parentNode );\n\tremove( processedNode );\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Replaces the given node with a new node with the given tag name.\n *\n * @param {Element} node    The node to replace\n * @param {string}  tagName The new tag name.\n *\n * @return {Element} The new node.\n */\nexport default function replaceTag( node, tagName ) {\n\tconst newNode = node.ownerDocument.createElement( tagName );\n\n\twhile ( node.firstChild ) {\n\t\tnewNode.appendChild( node.firstChild );\n\t}\n\n\tassertIsDefined( node.parentNode, 'node.parentNode' );\n\tnode.parentNode.replaceChild( newNode, node );\n\n\treturn newNode;\n}\n", "/**\n * Internal dependencies\n */\nimport { assertIsDefined } from '../utils/assert-is-defined';\n\n/**\n * Wraps the given node with a new node with the given tag name.\n *\n * @param {Element} newNode       The node to insert.\n * @param {Element} referenceNode The node to wrap.\n */\nexport default function wrap( newNode, referenceNode ) {\n\tassertIsDefined( referenceNode.parentNode, 'referenceNode.parentNode' );\n\treferenceNode.parentNode.insertBefore( newNode, referenceNode );\n\tnewNode.appendChild( referenceNode );\n}\n", "/**\n * Gets all files from a DataTransfer object.\n *\n * @param {DataTransfer} dataTransfer DataTransfer object to inspect.\n *\n * @return {File[]} An array containing all files.\n */\nexport function getFilesFromDataTransfer( dataTransfer ) {\n\tconst files = Array.from( dataTransfer.files );\n\n\tArray.from( dataTransfer.items ).forEach( ( item ) => {\n\t\tconst file = item.getAsFile();\n\n\t\tif (\n\t\t\tfile &&\n\t\t\t! files.find(\n\t\t\t\t( { name, type, size } ) =>\n\t\t\t\t\tname === file.name &&\n\t\t\t\t\ttype === file.type &&\n\t\t\t\t\tsize === file.size\n\t\t\t)\n\t\t) {\n\t\t\tfiles.push( file );\n\t\t}\n\t} );\n\n\treturn files;\n}\n", "/**\n * References:\n *\n * Focusable:\n *  - https://www.w3.org/TR/html5/editing.html#focus-management\n *\n * Sequential focus navigation:\n *  - https://www.w3.org/TR/html5/editing.html#sequential-focus-navigation-and-the-tabindex-attribute\n *\n * Disabled elements:\n *  - https://www.w3.org/TR/html5/disabled-elements.html#disabled-elements\n *\n * getClientRects algorithm (requiring layout box):\n *  - https://www.w3.org/TR/cssom-view-1/#extension-to-the-element-interface\n *\n * AREA elements associated with an IMG:\n *  - https://w3c.github.io/html/editing.html#data-model\n */\n\n/**\n * Returns a CSS selector used to query for focusable elements.\n *\n * @param {boolean} sequential If set, only query elements that are sequentially\n *                             focusable. Non-interactive elements with a\n *                             negative `tabindex` are focusable but not\n *                             sequentially focusable.\n *                             https://html.spec.whatwg.org/multipage/interaction.html#the-tabindex-attribute\n *\n * @return {string} CSS selector.\n */\nfunction buildSelector( sequential ) {\n\treturn [\n\t\tsequential ? '[tabindex]:not([tabindex^=\"-\"])' : '[tabindex]',\n\t\t'a[href]',\n\t\t'button:not([disabled])',\n\t\t'input:not([type=\"hidden\"]):not([disabled])',\n\t\t'select:not([disabled])',\n\t\t'textarea:not([disabled])',\n\t\t'iframe:not([tabindex^=\"-\"])',\n\t\t'object',\n\t\t'embed',\n\t\t'summary',\n\t\t'area[href]',\n\t\t'[contenteditable]:not([contenteditable=false])',\n\t].join( ',' );\n}\n\n/**\n * Returns true if the specified element is visible (i.e. neither display: none\n * nor visibility: hidden).\n *\n * @param {HTMLElement} element DOM element to test.\n *\n * @return {boolean} Whether element is visible.\n */\nfunction isVisible( element ) {\n\treturn (\n\t\telement.offsetWidth > 0 ||\n\t\telement.offsetHeight > 0 ||\n\t\telement.getClientRects().length > 0\n\t);\n}\n\n/**\n * Returns true if the specified area element is a valid focusable element, or\n * false otherwise. Area is only focusable if within a map where a named map\n * referenced by an image somewhere in the document.\n *\n * @param {HTMLAreaElement} element DOM area element to test.\n *\n * @return {boolean} Whether area element is valid for focus.\n */\nfunction isValidFocusableArea( element ) {\n\t/** @type {HTMLMapElement | null} */\n\tconst map = element.closest( 'map[name]' );\n\tif ( ! map ) {\n\t\treturn false;\n\t}\n\n\t/** @type {HTMLImageElement | null} */\n\tconst img = element.ownerDocument.querySelector(\n\t\t'img[usemap=\"#' + map.name + '\"]'\n\t);\n\treturn !! img && isVisible( img );\n}\n\n/**\n * Returns all focusable elements within a given context.\n *\n * @param {Element} context              Element in which to search.\n * @param {Object}  options\n * @param {boolean} [options.sequential] If set, only return elements that are\n *                                       sequentially focusable.\n *                                       Non-interactive elements with a\n *                                       negative `tabindex` are focusable but\n *                                       not sequentially focusable.\n *                                       https://html.spec.whatwg.org/multipage/interaction.html#the-tabindex-attribute\n *\n * @return {HTMLElement[]} Focusable elements.\n */\nexport function find( context, { sequential = false } = {} ) {\n\t/** @type {NodeListOf<HTMLElement>} */\n\tconst elements = context.querySelectorAll( buildSelector( sequential ) );\n\n\treturn Array.from( elements ).filter( ( element ) => {\n\t\tif ( ! isVisible( element ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { nodeName } = element;\n\t\tif ( 'AREA' === nodeName ) {\n\t\t\treturn isValidFocusableArea(\n\t\t\t\t/** @type {HTMLAreaElement} */ ( element )\n\t\t\t);\n\t\t}\n\n\t\treturn true;\n\t} );\n}\n", "/**\n * Internal dependencies\n */\nimport { find as findFocusable } from './focusable';\n\n/**\n * Returns the tab index of the given element. In contrast with the tabIndex\n * property, this normalizes the default (0) to avoid browser inconsistencies,\n * operating under the assumption that this function is only ever called with a\n * focusable node.\n *\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=1190261\n *\n * @param {Element} element Element from which to retrieve.\n *\n * @return {number} Tab index of element (default 0).\n */\nfunction getTabIndex( element ) {\n\tconst tabIndex = element.getAttribute( 'tabindex' );\n\treturn tabIndex === null ? 0 : parseInt( tabIndex, 10 );\n}\n\n/**\n * Returns true if the specified element is tabbable, or false otherwise.\n *\n * @param {Element} element Element to test.\n *\n * @return {boolean} Whether element is tabbable.\n */\nexport function isTabbableIndex( element ) {\n\treturn getTabIndex( element ) !== -1;\n}\n\n/** @typedef {HTMLElement & { type?: string, checked?: boolean, name?: string }} MaybeHTMLInputElement */\n\n/**\n * Returns a stateful reducer function which constructs a filtered array of\n * tabbable elements, where at most one radio input is selected for a given\n * name, giving priority to checked input, falling back to the first\n * encountered.\n *\n * @return {(acc: MaybeHTMLInputElement[], el: MaybeHTMLInputElement) => MaybeHTMLInputElement[]} Radio group collapse reducer.\n */\nfunction createStatefulCollapseRadioGroup() {\n\t/** @type {Record<string, MaybeHTMLInputElement>} */\n\tconst CHOSEN_RADIO_BY_NAME = {};\n\n\treturn function collapseRadioGroup(\n\t\t/** @type {MaybeHTMLInputElement[]} */ result,\n\t\t/** @type {MaybeHTMLInputElement} */ element\n\t) {\n\t\tconst { nodeName, type, checked, name } = element;\n\n\t\t// For all non-radio tabbables, construct to array by concatenating.\n\t\tif ( nodeName !== 'INPUT' || type !== 'radio' || ! name ) {\n\t\t\treturn result.concat( element );\n\t\t}\n\n\t\tconst hasChosen = CHOSEN_RADIO_BY_NAME.hasOwnProperty( name );\n\n\t\t// Omit by skipping concatenation if the radio element is not chosen.\n\t\tconst isChosen = checked || ! hasChosen;\n\t\tif ( ! isChosen ) {\n\t\t\treturn result;\n\t\t}\n\n\t\t// At this point, if there had been a chosen element, the current\n\t\t// element is checked and should take priority. Retroactively remove\n\t\t// the element which had previously been considered the chosen one.\n\t\tif ( hasChosen ) {\n\t\t\tconst hadChosenElement = CHOSEN_RADIO_BY_NAME[ name ];\n\t\t\tresult = result.filter( ( e ) => e !== hadChosenElement );\n\t\t}\n\n\t\tCHOSEN_RADIO_BY_NAME[ name ] = element;\n\n\t\treturn result.concat( element );\n\t};\n}\n\n/**\n * An array map callback, returning an object with the element value and its\n * array index location as properties. This is used to emulate a proper stable\n * sort where equal tabIndex should be left in order of their occurrence in the\n * document.\n *\n * @param {HTMLElement} element Element.\n * @param {number}      index   Array index of element.\n *\n * @return {{ element: HTMLElement, index: number }} Mapped object with element, index.\n */\nfunction mapElementToObjectTabbable( element, index ) {\n\treturn { element, index };\n}\n\n/**\n * An array map callback, returning an element of the given mapped object's\n * element value.\n *\n * @param {{ element: HTMLElement }} object Mapped object with element.\n *\n * @return {HTMLElement} Mapped object element.\n */\nfunction mapObjectTabbableToElement( object ) {\n\treturn object.element;\n}\n\n/**\n * A sort comparator function used in comparing two objects of mapped elements.\n *\n * @see mapElementToObjectTabbable\n *\n * @param {{ element: HTMLElement, index: number }} a First object to compare.\n * @param {{ element: HTMLElement, index: number }} b Second object to compare.\n *\n * @return {number} Comparator result.\n */\nfunction compareObjectTabbables( a, b ) {\n\tconst aTabIndex = getTabIndex( a.element );\n\tconst bTabIndex = getTabIndex( b.element );\n\n\tif ( aTabIndex === bTabIndex ) {\n\t\treturn a.index - b.index;\n\t}\n\n\treturn aTabIndex - bTabIndex;\n}\n\n/**\n * Givin focusable elements, filters out tabbable element.\n *\n * @param {HTMLElement[]} focusables Focusable elements to filter.\n *\n * @return {HTMLElement[]} Tabbable elements.\n */\nfunction filterTabbable( focusables ) {\n\treturn focusables\n\t\t.filter( isTabbableIndex )\n\t\t.map( mapElementToObjectTabbable )\n\t\t.sort( compareObjectTabbables )\n\t\t.map( mapObjectTabbableToElement )\n\t\t.reduce( createStatefulCollapseRadioGroup(), [] );\n}\n\n/**\n * @param {Element} context\n * @return {HTMLElement[]} Tabbable elements within the context.\n */\nexport function find( context ) {\n\treturn filterTabbable( findFocusable( context ) );\n}\n\n/**\n * Given a focusable element, find the preceding tabbable element.\n *\n * @param {Element} element The focusable element before which to look. Defaults\n *                          to the active element.\n *\n * @return {HTMLElement|undefined} Preceding tabbable element.\n */\nexport function findPrevious( element ) {\n\treturn filterTabbable( findFocusable( element.ownerDocument.body ) )\n\t\t.reverse()\n\t\t.find(\n\t\t\t( focusable ) =>\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\telement.compareDocumentPosition( focusable ) &\n\t\t\t\telement.DOCUMENT_POSITION_PRECEDING\n\t\t);\n}\n\n/**\n * Given a focusable element, find the next tabbable element.\n *\n * @param {Element} element The focusable element after which to look. Defaults\n *                          to the active element.\n *\n * @return {HTMLElement|undefined} Next tabbable element.\n */\nexport function findNext( element ) {\n\treturn filterTabbable( findFocusable( element.ownerDocument.body ) ).find(\n\t\t( focusable ) =>\n\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\telement.compareDocumentPosition( focusable ) &\n\t\t\telement.DOCUMENT_POSITION_FOLLOWING\n\t);\n}\n", "/**\n * Internal dependencies\n */\nimport * as focusable from './focusable';\nimport * as tabbable from './tabbable';\n\n/**\n * Object grouping `focusable` and `tabbable` utils\n * under the keys with the same name.\n */\nexport const focus = { focusable, tabbable };\n\nexport * from './dom';\nexport * from './phrasing-content';\nexport * from './data-transfer';\n", "/**\n * External dependencies\n */\nimport type { DependencyList, RefCallback } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useRef } from '@wordpress/element';\n\n/**\n * Effect-like ref callback. Just like with `useEffect`, this allows you to\n * return a cleanup function to be run if the ref changes or one of the\n * dependencies changes. The ref is provided as an argument to the callback\n * functions. The main difference between this and `useEffect` is that\n * the `useEffect` callback is not called when the ref changes, but this is.\n * Pass the returned ref callback as the component's ref and merge multiple refs\n * with `useMergeRefs`.\n *\n * It's worth noting that if the dependencies array is empty, there's not\n * strictly a need to clean up event handlers for example, because the node is\n * to be removed. It *is* necessary if you add dependencies because the ref\n * callback will be called multiple times for the same node.\n *\n * @param callback     Callback with ref as argument.\n * @param dependencies Dependencies of the callback.\n *\n * @return Ref callback.\n */\nexport default function useRefEffect< TElement = Node >(\n\tcallback: ( node: TElement ) => ( () => void ) | void,\n\tdependencies: DependencyList\n): RefCallback< TElement | null > {\n\tconst cleanupRef = useRef< ( () => void ) | void >();\n\treturn useCallback( ( node: TElement | null ) => {\n\t\tif ( node ) {\n\t\t\tcleanupRef.current = callback( node );\n\t\t} else if ( cleanupRef.current ) {\n\t\t\tcleanupRef.current();\n\t\t}\n\t}, dependencies );\n}\n", "/**\n * WordPress dependencies\n */\nimport { focus } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport useRefEffect from '../use-ref-effect';\n\n/**\n * In Dialogs/modals, the tabbing must be constrained to the content of\n * the wrapper element. This hook adds the behavior to the returned ref.\n *\n * @return {import('react').RefCallback<Element>} Element Ref.\n *\n * @example\n * ```js\n * import { useConstrainedTabbing } from '@wordpress/compose';\n *\n * const ConstrainedTabbingExample = () => {\n *     const constrainedTabbingRef = useConstrainedTabbing()\n *     return (\n *         <div ref={ constrainedTabbingRef }>\n *             <Button />\n *             <Button />\n *         </div>\n *     );\n * }\n * ```\n */\nfunction useConstrainedTabbing() {\n\treturn useRefEffect( ( /** @type {HTMLElement} */ node ) => {\n\t\tfunction onKeyDown( /** @type {KeyboardEvent} */ event ) {\n\t\t\tconst { key, shiftKey, target } = event;\n\n\t\t\tif ( key !== 'Tab' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = shiftKey ? 'findPrevious' : 'findNext';\n\t\t\tconst nextElement =\n\t\t\t\tfocus.tabbable[ action ](\n\t\t\t\t\t/** @type {HTMLElement} */ ( target )\n\t\t\t\t) || null;\n\n\t\t\t// When the target element contains the element that is about to\n\t\t\t// receive focus, for example when the target is a tabbable\n\t\t\t// container, browsers may disagree on where to move focus next.\n\t\t\t// In this case we can't rely on native browsers behavior. We need\n\t\t\t// to manage focus instead.\n\t\t\t// See https://github.com/WordPress/gutenberg/issues/46041.\n\t\t\tif (\n\t\t\t\t/** @type {HTMLElement} */ ( target ).contains( nextElement )\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tnextElement?.focus();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the element that is about to receive focus is inside the\n\t\t\t// area, rely on native browsers behavior and let tabbing follow\n\t\t\t// the native tab sequence.\n\t\t\tif ( node.contains( nextElement ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the element that is about to receive focus is outside the\n\t\t\t// area, move focus to a div and insert it at the start or end of\n\t\t\t// the area, depending on the direction. Without preventing default\n\t\t\t// behaviour, the browser will then move focus to the next element.\n\t\t\tconst domAction = shiftKey ? 'append' : 'prepend';\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst trap = ownerDocument.createElement( 'div' );\n\n\t\t\ttrap.tabIndex = -1;\n\t\t\tnode[ domAction ]( trap );\n\n\t\t\t// Remove itself when the trap loses focus.\n\t\t\ttrap.addEventListener( 'blur', () => node.removeChild( trap ) );\n\n\t\t\ttrap.focus();\n\t\t}\n\n\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n\nexport default useConstrainedTabbing;\n", "/**\n * External dependencies\n */\nimport Clipboard from 'clipboard';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useLayoutEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useRefEffect from '../use-ref-effect';\n\n/**\n * @template T\n * @param {T} value\n * @return {import('react').RefObject<T>} The updated ref\n */\nfunction useUpdatedRef( value ) {\n\tconst ref = useRef( value );\n\tuseLayoutEffect( () => {\n\t\tref.current = value;\n\t}, [ value ] );\n\treturn ref;\n}\n\n/**\n * Copies the given text to the clipboard when the element is clicked.\n *\n * @template {HTMLElement} TElementType\n * @param {string | (() => string)} text      The text to copy. Use a function if not\n *                                            already available and expensive to compute.\n * @param {Function}                onSuccess Called when to text is copied.\n *\n * @return {import('react').Ref<TElementType>} A ref to assign to the target element.\n */\nexport default function useCopyToClipboard( text, onSuccess ) {\n\t// Store the dependencies as refs and continuously update them so they're\n\t// fresh when the callback is called.\n\tconst textRef = useUpdatedRef( text );\n\tconst onSuccessRef = useUpdatedRef( onSuccess );\n\treturn useRefEffect( ( node ) => {\n\t\t// Clipboard listens to click events.\n\t\tconst clipboard = new Clipboard( node, {\n\t\t\ttext() {\n\t\t\t\treturn typeof textRef.current === 'function'\n\t\t\t\t\t? textRef.current()\n\t\t\t\t\t: textRef.current || '';\n\t\t\t},\n\t\t} );\n\n\t\tclipboard.on( 'success', ( { clearSelection } ) => {\n\t\t\t// Clearing selection will move focus back to the triggering\n\t\t\t// button, ensuring that it is not reset to the body, and\n\t\t\t// further that it is kept within the rendered node.\n\t\t\tclearSelection();\n\n\t\t\tif ( onSuccessRef.current ) {\n\t\t\t\tonSuccessRef.current();\n\t\t\t}\n\t\t} );\n\n\t\treturn () => {\n\t\t\tclipboard.destroy();\n\t\t};\n\t}, [] );\n}\n", "/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport useRefEffect from '../use-ref-effect';\n\n/**\n * Hook used to focus the first tabbable element on mount.\n *\n * @param {boolean | 'firstElement'} focusOnMount Focus on mount mode.\n * @return {import('react').RefCallback<HTMLElement>} Ref callback.\n *\n * @example\n * ```js\n * import { useFocusOnMount } from '@wordpress/compose';\n *\n * const WithFocusOnMount = () => {\n *     const ref = useFocusOnMount()\n *     return (\n *         <div ref={ ref }>\n *             <Button />\n *             <Button />\n *         </div>\n *     );\n * }\n * ```\n */\nexport default function useFocusOnMount( focusOnMount = 'firstElement' ) {\n\tconst focusOnMountRef = useRef( focusOnMount );\n\n\t/**\n\t * Sets focus on a DOM element.\n\t *\n\t * @param {HTMLElement} target The DOM element to set focus to.\n\t * @return {void}\n\t */\n\tconst setFocus = ( target ) => {\n\t\ttarget.focus( {\n\t\t\t// When focusing newly mounted dialogs,\n\t\t\t// the position of the popover is often not right on the first render\n\t\t\t// This prevents the layout shifts when focusing the dialogs.\n\t\t\tpreventScroll: true,\n\t\t} );\n\t};\n\n\t/** @type {import('react').MutableRefObject<ReturnType<setTimeout> | undefined>} */\n\tconst timerIdRef = useRef();\n\n\tuseEffect( () => {\n\t\tfocusOnMountRef.current = focusOnMount;\n\t}, [ focusOnMount ] );\n\n\treturn useRefEffect( ( node ) => {\n\t\tif ( ! node || focusOnMountRef.current === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( node.contains( node.ownerDocument?.activeElement ?? null ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( focusOnMountRef.current !== 'firstElement' ) {\n\t\t\tsetFocus( node );\n\t\t\treturn;\n\t\t}\n\n\t\ttimerIdRef.current = setTimeout( () => {\n\t\t\tconst firstTabbable = focus.tabbable.find( node )[ 0 ];\n\t\t\tif ( firstTabbable ) {\n\t\t\t\tsetFocus( firstTabbable );\n\t\t\t}\n\t\t}, 0 );\n\n\t\treturn () => {\n\t\t\tif ( timerIdRef.current ) {\n\t\t\t\tclearTimeout( timerIdRef.current );\n\t\t\t}\n\t\t};\n\t}, [] );\n}\n", "/**\n * WordPress dependencies\n */\nimport { useRef, useEffect, useCallback } from '@wordpress/element';\n\n/** @type {Element|null} */\nlet origin = null;\n\n/**\n * Adds the unmount behavior of returning focus to the element which had it\n * previously as is expected for roles like menus or dialogs.\n *\n * @param {() => void} [onFocusReturn] Overrides the default return behavior.\n * @return {import('react').RefCallback<HTMLElement>} Element Ref.\n *\n * @example\n * ```js\n * import { useFocusReturn } from '@wordpress/compose';\n *\n * const WithFocusReturn = () => {\n *     const ref = useFocusReturn()\n *     return (\n *         <div ref={ ref }>\n *             <Button />\n *             <Button />\n *         </div>\n *     );\n * }\n * ```\n */\nfunction useFocusReturn( onFocusReturn ) {\n\t/** @type {import('react').MutableRefObject<null | HTMLElement>} */\n\tconst ref = useRef( null );\n\t/** @type {import('react').MutableRefObject<null | Element>} */\n\tconst focusedBeforeMount = useRef( null );\n\tconst onFocusReturnRef = useRef( onFocusReturn );\n\tuseEffect( () => {\n\t\tonFocusReturnRef.current = onFocusReturn;\n\t}, [ onFocusReturn ] );\n\n\treturn useCallback( ( node ) => {\n\t\tif ( node ) {\n\t\t\t// Set ref to be used when unmounting.\n\t\t\tref.current = node;\n\n\t\t\t// Only set when the node mounts.\n\t\t\tif ( focusedBeforeMount.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst activeDocument =\n\t\t\t\tnode.ownerDocument.activeElement instanceof\n\t\t\t\twindow.HTMLIFrameElement\n\t\t\t\t\t? node.ownerDocument.activeElement.contentDocument\n\t\t\t\t\t: node.ownerDocument;\n\n\t\t\tfocusedBeforeMount.current = activeDocument?.activeElement ?? null;\n\t\t} else if ( focusedBeforeMount.current ) {\n\t\t\tconst isFocused = ref.current?.contains(\n\t\t\t\tref.current?.ownerDocument.activeElement\n\t\t\t);\n\n\t\t\tif ( ref.current?.isConnected && ! isFocused ) {\n\t\t\t\torigin ??= focusedBeforeMount.current;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Defer to the component's own explicit focus return behavior, if\n\t\t\t// specified. This allows for support that the `onFocusReturn`\n\t\t\t// decides to allow the default behavior to occur under some\n\t\t\t// conditions.\n\t\t\tif ( onFocusReturnRef.current ) {\n\t\t\t\tonFocusReturnRef.current();\n\t\t\t} else {\n\t\t\t\t/** @type {null|HTMLElement} */ (\n\t\t\t\t\t! focusedBeforeMount.current.isConnected\n\t\t\t\t\t\t? origin\n\t\t\t\t\t\t: focusedBeforeMount.current\n\t\t\t\t)?.focus();\n\t\t\t}\n\t\t\torigin = null;\n\t\t}\n\t}, [] );\n}\n\nexport default useFocusReturn;\n", "/**\n * WordPress dependencies\n */\nimport { useCallback, useEffect, useRef } from '@wordpress/element';\n\n/**\n * Input types which are classified as button types, for use in considering\n * whether element is a (focus-normalized) button.\n */\nconst INPUT_BUTTON_TYPES = [ 'button', 'submit' ];\n\n/**\n * List of HTML button elements subject to focus normalization\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n */\ntype FocusNormalizedButton =\n\t| HTMLButtonElement\n\t| HTMLLinkElement\n\t| HTMLInputElement;\n\n/**\n * Returns true if the given element is a button element subject to focus\n * normalization, or false otherwise.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n *\n * @param eventTarget The target from a mouse or touch event.\n *\n * @return Whether the element is a button element subject to focus normalization.\n */\nfunction isFocusNormalizedButton(\n\teventTarget: EventTarget\n): eventTarget is FocusNormalizedButton {\n\tif ( ! ( eventTarget instanceof window.HTMLElement ) ) {\n\t\treturn false;\n\t}\n\tswitch ( eventTarget.nodeName ) {\n\t\tcase 'A':\n\t\tcase 'BUTTON':\n\t\t\treturn true;\n\n\t\tcase 'INPUT':\n\t\t\treturn INPUT_BUTTON_TYPES.includes(\n\t\t\t\t( eventTarget as HTMLInputElement ).type\n\t\t\t);\n\t}\n\n\treturn false;\n}\n\ntype UseFocusOutsideReturn = {\n\tonFocus: React.FocusEventHandler;\n\tonMouseDown: React.MouseEventHandler;\n\tonMouseUp: React.MouseEventHandler;\n\tonTouchStart: React.TouchEventHandler;\n\tonTouchEnd: React.TouchEventHandler;\n\tonBlur: React.FocusEventHandler;\n};\n\n/**\n * A react hook that can be used to check whether focus has moved outside the\n * element the event handlers are bound to.\n *\n * @param onFocusOutside A callback triggered when focus moves outside\n *                       the element the event handlers are bound to.\n *\n * @return An object containing event handlers. Bind the event handlers to a\n * wrapping element element to capture when focus moves outside that element.\n */\nexport default function useFocusOutside(\n\tonFocusOutside: ( ( event: React.FocusEvent ) => void ) | undefined\n): UseFocusOutsideReturn {\n\tconst currentOnFocusOutsideRef = useRef( onFocusOutside );\n\tuseEffect( () => {\n\t\tcurrentOnFocusOutsideRef.current = onFocusOutside;\n\t}, [ onFocusOutside ] );\n\n\tconst preventBlurCheckRef = useRef( false );\n\n\tconst blurCheckTimeoutIdRef = useRef< number | undefined >();\n\n\t/**\n\t * Cancel a blur check timeout.\n\t */\n\tconst cancelBlurCheck = useCallback( () => {\n\t\tclearTimeout( blurCheckTimeoutIdRef.current );\n\t}, [] );\n\n\t// Cancel a blur check if the callback or ref is no longer provided.\n\tuseEffect( () => {\n\t\tif ( ! onFocusOutside ) {\n\t\t\tcancelBlurCheck();\n\t\t}\n\t}, [ onFocusOutside, cancelBlurCheck ] );\n\n\t/**\n\t * Handles a mousedown or mouseup event to respectively assign and\n\t * unassign a flag for preventing blur check on button elements. Some\n\t * browsers, namely Firefox and Safari, do not emit a focus event on\n\t * button elements when clicked, while others do. The logic here\n\t * intends to normalize this as treating click on buttons as focus.\n\t *\n\t * @param event\n\t * @see https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n\t */\n\tconst normalizeButtonFocus: React.EventHandler<\n\t\tReact.MouseEvent | React.TouchEvent\n\t> = useCallback( ( event ) => {\n\t\tconst { type, target } = event;\n\t\tconst isInteractionEnd = [ 'mouseup', 'touchend' ].includes( type );\n\n\t\tif ( isInteractionEnd ) {\n\t\t\tpreventBlurCheckRef.current = false;\n\t\t} else if ( isFocusNormalizedButton( target ) ) {\n\t\t\tpreventBlurCheckRef.current = true;\n\t\t}\n\t}, [] );\n\n\t/**\n\t * A callback triggered when a blur event occurs on the element the handler\n\t * is bound to.\n\t *\n\t * Calls the `onFocusOutside` callback in an immediate timeout if focus has\n\t * move outside the bound element and is still within the document.\n\t */\n\tconst queueBlurCheck: React.FocusEventHandler = useCallback( ( event ) => {\n\t\t// React does not allow using an event reference asynchronously\n\t\t// due to recycling behavior, except when explicitly persisted.\n\t\tevent.persist();\n\n\t\t// Skip blur check if clicking button. See `normalizeButtonFocus`.\n\t\tif ( preventBlurCheckRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// The usage of this attribute should be avoided. The only use case\n\t\t// would be when we load modals that are not React components and\n\t\t// therefore don't exist in the React tree. An example is opening\n\t\t// the Media Library modal from another dialog.\n\t\t// This attribute should contain a selector of the related target\n\t\t// we want to ignore, because we still need to trigger the blur event\n\t\t// on all other cases.\n\t\tconst ignoreForRelatedTarget = event.target.getAttribute(\n\t\t\t'data-unstable-ignore-focus-outside-for-relatedtarget'\n\t\t);\n\t\tif (\n\t\t\tignoreForRelatedTarget &&\n\t\t\tevent.relatedTarget?.closest( ignoreForRelatedTarget )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tblurCheckTimeoutIdRef.current = setTimeout( () => {\n\t\t\t// If document is not focused then focus should remain\n\t\t\t// inside the wrapped component and therefore we cancel\n\t\t\t// this blur event thereby leaving focus in place.\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Document/hasFocus.\n\t\t\tif ( ! document.hasFocus() ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( 'function' === typeof currentOnFocusOutsideRef.current ) {\n\t\t\t\tcurrentOnFocusOutsideRef.current( event );\n\t\t\t}\n\t\t}, 0 );\n\t}, [] );\n\n\treturn {\n\t\tonFocus: cancelBlurCheck,\n\t\tonMouseDown: normalizeButtonFocus,\n\t\tonMouseUp: normalizeButtonFocus,\n\t\tonTouchStart: normalizeButtonFocus,\n\t\tonTouchEnd: normalizeButtonFocus,\n\t\tonBlur: queueBlurCheck,\n\t};\n}\n", "/**\n * WordPress dependencies\n */\nimport { useRef, useCallback, useLayoutEffect } from '@wordpress/element';\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * @template T\n * @typedef {T extends import('react').Ref<infer R> ? R : never} TypeFromRef\n */\n/* eslint-enable jsdoc/valid-types */\n\n/**\n * @template T\n * @param {import('react').Ref<T>} ref\n * @param {T}                      value\n */\nfunction assignRef( ref, value ) {\n\tif ( typeof ref === 'function' ) {\n\t\tref( value );\n\t} else if ( ref && ref.hasOwnProperty( 'current' ) ) {\n\t\t/* eslint-disable jsdoc/no-undefined-types */\n\t\t/** @type {import('react').MutableRefObject<T>} */ ( ref ).current =\n\t\t\tvalue;\n\t\t/* eslint-enable jsdoc/no-undefined-types */\n\t}\n}\n\n/**\n * Merges refs into one ref callback.\n *\n * It also ensures that the merged ref callbacks are only called when they\n * change (as a result of a `useCallback` dependency update) OR when the ref\n * value changes, just as React does when passing a single ref callback to the\n * component.\n *\n * As expected, if you pass a new function on every render, the ref callback\n * will be called after every render.\n *\n * If you don't wish a ref callback to be called after every render, wrap it\n * with `useCallback( callback, dependencies )`. When a dependency changes, the\n * old ref callback will be called with `null` and the new ref callback will be\n * called with the same value.\n *\n * To make ref callbacks easier to use, you can also pass the result of\n * `useRefEffect`, which makes cleanup easier by allowing you to return a\n * cleanup function instead of handling `null`.\n *\n * It's also possible to _disable_ a ref (and its behaviour) by simply not\n * passing the ref.\n *\n * ```jsx\n * const ref = useRefEffect( ( node ) => {\n *   node.addEventListener( ... );\n *   return () => {\n *     node.removeEventListener( ... );\n *   };\n * }, [ ...dependencies ] );\n * const otherRef = useRef();\n * const mergedRefs useMergeRefs( [\n *   enabled && ref,\n *   otherRef,\n * ] );\n * return <div ref={ mergedRefs } />;\n * ```\n *\n * @template {import('react').Ref<any>} TRef\n * @param {Array<TRef>} refs The refs to be merged.\n *\n * @return {import('react').RefCallback<TypeFromRef<TRef>>} The merged ref callback.\n */\nexport default function useMergeRefs( refs ) {\n\tconst element = useRef();\n\tconst isAttachedRef = useRef( false );\n\tconst didElementChangeRef = useRef( false );\n\t/* eslint-disable jsdoc/no-undefined-types */\n\t/** @type {import('react').MutableRefObject<TRef[]>} */\n\t/* eslint-enable jsdoc/no-undefined-types */\n\tconst previousRefsRef = useRef( [] );\n\tconst currentRefsRef = useRef( refs );\n\n\t// Update on render before the ref callback is called, so the ref callback\n\t// always has access to the current refs.\n\tcurrentRefsRef.current = refs;\n\n\t// If any of the refs change, call the previous ref with `null` and the new\n\t// ref with the node, except when the element changes in the same cycle, in\n\t// which case the ref callbacks will already have been called.\n\tuseLayoutEffect( () => {\n\t\tif (\n\t\t\tdidElementChangeRef.current === false &&\n\t\t\tisAttachedRef.current === true\n\t\t) {\n\t\t\trefs.forEach( ( ref, index ) => {\n\t\t\t\tconst previousRef = previousRefsRef.current[ index ];\n\t\t\t\tif ( ref !== previousRef ) {\n\t\t\t\t\tassignRef( previousRef, null );\n\t\t\t\t\tassignRef( ref, element.current );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tpreviousRefsRef.current = refs;\n\t}, refs );\n\n\t// No dependencies, must be reset after every render so ref callbacks are\n\t// correctly called after a ref change.\n\tuseLayoutEffect( () => {\n\t\tdidElementChangeRef.current = false;\n\t} );\n\n\t// There should be no dependencies so that `callback` is only called when\n\t// the node changes.\n\treturn useCallback( ( value ) => {\n\t\t// Update the element so it can be used when calling ref callbacks on a\n\t\t// dependency change.\n\t\tassignRef( element, value );\n\n\t\tdidElementChangeRef.current = true;\n\t\tisAttachedRef.current = value !== null;\n\n\t\t// When an element changes, the current ref callback should be called\n\t\t// with the new element and the previous one with `null`.\n\t\tconst refsToAssign = value\n\t\t\t? currentRefsRef.current\n\t\t\t: previousRefsRef.current;\n\n\t\t// Update the latest refs.\n\t\tfor ( const ref of refsToAssign ) {\n\t\t\tassignRef( ref, value );\n\t\t}\n\t}, [] );\n}\n", "/**\n * External dependencies\n */\nimport type { TanninLocaleDomain } from 'tannin';\nimport Tannin from 'tannin';\n/**\n * Internal dependencies\n */\nimport type {\n\tgetFilterDomain,\n\tI18n,\n\tLocaleData,\n\tSubscribeCallback,\n\tTranslatableText,\n\tUnsubscribeCallback,\n} from './types';\n/**\n * WordPress dependencies\n */\nimport type { Hooks } from '@wordpress/hooks';\n/**\n * Default locale data to use for Tannin domain when not otherwise provided.\n * Assumes an English plural forms expression.\n */\nconst DEFAULT_LOCALE_DATA: LocaleData = {\n\t'': {\n\t\tplural_forms( n: number ) {\n\t\t\treturn n === 1 ? 0 : 1;\n\t\t},\n\t},\n};\n\n/*\n * Regular expression that matches i18n hooks like `i18n.gettext`, `i18n.ngettext`,\n * `i18n.gettext_domain` or `i18n.ngettext_with_context` or `i18n.has_translation`.\n */\nconst I18N_HOOK_REGEXP = /^i18n\\.(n?gettext|has_translation)(_|$)/;\n\n/**\n * Create an i18n instance\n *\n * @param [initialData]   Locale data configuration.\n * @param [initialDomain] Domain for which configuration applies.\n * @param [hooks]         Hooks implementation.\n *\n * @return I18n instance.\n */\nexport const createI18n = < TextDomain extends string >(\n\tinitialData?: LocaleData< TextDomain >,\n\tinitialDomain?: TextDomain,\n\thooks?: Hooks\n): I18n< TextDomain > => {\n\t/**\n\t * The underlying instance of Tannin to which exported functions interface.\n\t */\n\tconst tannin = new Tannin( {} );\n\n\tconst listeners = new Set< () => void >();\n\n\tconst notifyListeners = () => {\n\t\tlisteners.forEach( ( listener ) => listener() );\n\t};\n\n\t/**\n\t * Subscribe to changes of locale data.\n\t *\n\t * @param callback Subscription callback.\n\t * @return Unsubscribe callback.\n\t */\n\tconst subscribe = ( callback: SubscribeCallback ): UnsubscribeCallback => {\n\t\tlisteners.add( callback );\n\t\treturn () => listeners.delete( callback );\n\t};\n\n\tconst getLocaleData: I18n< TextDomain >[ 'getLocaleData' ] = (\n\t\tdomain = 'default' as TextDomain\n\t) => tannin.data[ domain ] as LocaleData< TextDomain >;\n\n\t/**\n\t * @param [data]\n\t * @param [domain]\n\t */\n\tconst doSetLocaleData = (\n\t\tdata?: LocaleData,\n\t\tdomain: TextDomain = 'default' as TextDomain\n\t) => {\n\t\ttannin.data[ domain ] = {\n\t\t\t...tannin.data[ domain ],\n\t\t\t...data,\n\t\t} as TanninLocaleDomain;\n\n\t\t// Populate default domain configuration (supported locale date which omits\n\t\t// a plural forms expression).\n\t\ttannin.data[ domain ][ '' ] = {\n\t\t\t...DEFAULT_LOCALE_DATA[ '' ],\n\t\t\t...tannin.data[ domain ]?.[ '' ],\n\t\t};\n\n\t\t// Clean up cached plural forms functions cache as it might be updated.\n\t\tdelete tannin.pluralForms[ domain ];\n\t};\n\n\tconst setLocaleData: I18n< TextDomain >[ 'setLocaleData' ] = (\n\t\tdata,\n\t\tdomain\n\t) => {\n\t\tdoSetLocaleData( data, domain );\n\t\tnotifyListeners();\n\t};\n\n\tconst addLocaleData: I18n< TextDomain >[ 'addLocaleData' ] = (\n\t\tdata,\n\t\tdomain = 'default' as TextDomain\n\t) => {\n\t\ttannin.data[ domain ] = {\n\t\t\t...tannin.data[ domain ],\n\t\t\t...data,\n\t\t\t// Populate default domain configuration (supported locale date which omits\n\t\t\t// a plural forms expression).\n\t\t\t'': {\n\t\t\t\t...DEFAULT_LOCALE_DATA[ '' ],\n\t\t\t\t...tannin.data[ domain ]?.[ '' ],\n\t\t\t\t...data?.[ '' ],\n\t\t\t},\n\t\t} as TanninLocaleDomain;\n\n\t\t// Clean up cached plural forms functions cache as it might be updated.\n\t\tdelete tannin.pluralForms[ domain ];\n\n\t\tnotifyListeners();\n\t};\n\n\tconst resetLocaleData: I18n< TextDomain >[ 'resetLocaleData' ] = (\n\t\tdata,\n\t\tdomain\n\t) => {\n\t\t// Reset all current Tannin locale data.\n\t\ttannin.data = {};\n\n\t\t// Reset cached plural forms functions cache.\n\t\ttannin.pluralForms = {};\n\n\t\tsetLocaleData( data, domain );\n\t};\n\n\t/**\n\t * Wrapper for Tannin's `dcnpgettext`. Populates default locale data if not\n\t * otherwise previously assigned.\n\t *\n\t * @param domain   Domain to retrieve the translated text.\n\t * @param context  Context information for the translators.\n\t * @param single   Text to translate if non-plural. Used as\n\t *                 fallback return value on a caught error.\n\t * @param [plural] The text to be used if the number is\n\t *                 plural.\n\t * @param [number] The number to compare against to use\n\t *                 either the singular or plural form.\n\t *\n\t * @return The translated string.\n\t */\n\tconst dcnpgettext = (\n\t\tdomain = 'default' as TextDomain,\n\t\tcontext: string | void,\n\t\tsingle: string,\n\t\tplural?: string,\n\t\tnumber?: number\n\t): string => {\n\t\tif ( ! tannin.data[ domain ] ) {\n\t\t\t// Use `doSetLocaleData` to set silently, without notifying listeners.\n\t\t\tdoSetLocaleData( undefined, domain );\n\t\t}\n\n\t\treturn tannin.dcnpgettext( domain, context, single, plural, number );\n\t};\n\n\tconst getFilterDomain: getFilterDomain = ( domain ) => domain || 'default';\n\n\tconst __: I18n< TextDomain >[ '__' ] = ( text, domain ) => {\n\t\tlet translation = dcnpgettext( domain, undefined, text );\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText< typeof text >;\n\t\t}\n\n\t\t/**\n\t\t * Filters text with its translation.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param text        Text to translate.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.gettext',\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.gettext_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\t};\n\n\tconst _x: I18n< TextDomain >[ '_x' ] = ( text, context, domain ) => {\n\t\tlet translation = dcnpgettext( domain, context, text );\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText< typeof text >;\n\t\t}\n\n\t\t/**\n\t\t * Filters text with its translation based on context information.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param text        Text to translate.\n\t\t * @param context     Context information for the translators.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.gettext_with_context',\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.gettext_with_context_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\t};\n\n\tconst _n: I18n< TextDomain >[ '_n' ] = (\n\t\tsingle,\n\t\tplural,\n\t\tnumber,\n\t\tdomain\n\t) => {\n\t\tlet translation = dcnpgettext(\n\t\t\tdomain,\n\t\t\tundefined,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber\n\t\t);\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText<\n\t\t\t\ttypeof single | typeof plural\n\t\t\t>;\n\t\t}\n\n\t\t/**\n\t\t * Filters the singular or plural form of a string.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param single      The text to be used if the number is singular.\n\t\t * @param plural      The text to be used if the number is plural.\n\t\t * @param number      The number to compare against to use either the singular or plural form.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.ngettext',\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.ngettext_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\t};\n\n\tconst _nx: I18n< TextDomain >[ '_nx' ] = (\n\t\tsingle,\n\t\tplural,\n\t\tnumber,\n\t\tcontext,\n\t\tdomain\n\t) => {\n\t\tlet translation = dcnpgettext(\n\t\t\tdomain,\n\t\t\tcontext,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber\n\t\t);\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText<\n\t\t\t\ttypeof single | typeof plural\n\t\t\t>;\n\t\t}\n\n\t\t/**\n\t\t * Filters the singular or plural form of a string with gettext context.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param single      The text to be used if the number is singular.\n\t\t * @param plural      The text to be used if the number is plural.\n\t\t * @param number      The number to compare against to use either the singular or plural form.\n\t\t * @param context     Context information for the translators.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.ngettext_with_context',\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.ngettext_with_context_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\t};\n\n\tconst isRTL: I18n< TextDomain >[ 'isRTL' ] = () => {\n\t\treturn 'rtl' === _x( 'ltr', 'text direction' );\n\t};\n\n\tconst hasTranslation: I18n< TextDomain >[ 'hasTranslation' ] = (\n\t\tsingle,\n\t\tcontext,\n\t\tdomain\n\t) => {\n\t\tconst key = context ? context + '\\u0004' + single : single;\n\t\tlet result = !! tannin.data?.[ domain ?? 'default' ]?.[ key ];\n\t\tif ( hooks ) {\n\t\t\t/**\n\t\t\t * Filters the presence of a translation in the locale data.\n\t\t\t *\n\t\t\t * @param hasTranslation Whether the translation is present or not..\n\t\t\t * @param single         The singular form of the translated text (used as key in locale data)\n\t\t\t * @param context        Context information for the translators.\n\t\t\t * @param domain         Text domain. Unique identifier for retrieving translated strings.\n\t\t\t */\n\t\t\tresult = hooks.applyFilters(\n\t\t\t\t'i18n.has_translation',\n\t\t\t\tresult,\n\t\t\t\tsingle,\n\t\t\t\tcontext,\n\t\t\t\tdomain\n\t\t\t) as boolean;\n\n\t\t\tresult = hooks.applyFilters(\n\t\t\t\t'i18n.has_translation_' + getFilterDomain( domain ),\n\t\t\t\tresult,\n\t\t\t\tsingle,\n\t\t\t\tcontext,\n\t\t\t\tdomain\n\t\t\t) as boolean;\n\t\t}\n\t\treturn result;\n\t};\n\n\tif ( initialData ) {\n\t\tsetLocaleData( initialData, initialDomain );\n\t}\n\n\tif ( hooks ) {\n\t\t/**\n\t\t * @param hookName\n\t\t */\n\t\tconst onHookAddedOrRemoved = ( hookName: string ) => {\n\t\t\tif ( I18N_HOOK_REGEXP.test( hookName ) ) {\n\t\t\t\tnotifyListeners();\n\t\t\t}\n\t\t};\n\n\t\thooks.addAction( 'hookAdded', 'core/i18n', onHookAddedOrRemoved );\n\t\thooks.addAction( 'hookRemoved', 'core/i18n', onHookAddedOrRemoved );\n\t}\n\n\treturn {\n\t\tgetLocaleData,\n\t\tsetLocaleData,\n\t\taddLocaleData,\n\t\tresetLocaleData,\n\t\tsubscribe,\n\t\t__,\n\t\t_x,\n\t\t_n,\n\t\t_nx,\n\t\tisRTL,\n\t\thasTranslation,\n\t};\n};\n", "/**\n * Internal dependencies\n */\nimport { createI18n } from './create-i18n';\n\n/**\n * WordPress dependencies\n */\nimport { defaultHooks } from '@wordpress/hooks';\nimport {\n\tLocaleData,\n\tSubscribeCallback,\n\tTranslatableText,\n\tUnsubscribeCallback,\n} from './types';\n\nconst i18n = createI18n( undefined, undefined, defaultHooks );\n\n/**\n * Default, singleton instance of `I18n`.\n */\nexport default i18n;\n\n/*\n * Comments in this file are duplicated from ./i18n due to\n * https://github.com/WordPress/gutenberg/pull/20318#issuecomment-590837722\n */\n\n/**\n * Returns locale data by domain in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param { string | undefined } [domain] Domain for which to get the data.\n * @return { LocaleData } Locale data.\n */\nexport const getLocaleData = i18n.getLocaleData.bind( i18n );\n\n/**\n * Merges locale data into the Tannin instance by domain. Accepts data in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData }        [data]   Locale data configuration.\n * @param {string | undefined} [domain] Domain for which configuration applies.\n */\nexport const setLocaleData = i18n.setLocaleData.bind( i18n );\n\n/**\n * Resets all current Tannin instance locale data and sets the specified\n * locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData}         [data]   Locale data configuration.\n * @param {string | undefined} [domain] Domain for which configuration applies.\n */\nexport const resetLocaleData = i18n.resetLocaleData.bind( i18n );\n\n/**\n * Subscribes to changes of locale data\n *\n * @param {SubscribeCallback} callback Subscription callback\n * @return {UnsubscribeCallback} Unsubscribe callback\n */\nexport const subscribe = i18n.subscribe.bind( i18n );\n\n/**\n * Retrieve the translation of text.\n *\n * @see https://developer.wordpress.org/reference/functions/__/\n *\n * @template {string} Text\n *\n * @param {Text}               text   Text to translate.\n * @param {string | undefined} domain Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Text>} Translated text.\n */\nexport const __ = i18n.__.bind( i18n );\n\n/**\n * Retrieve translated string with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_x/\n *\n * @template {string} Text\n *\n * @param {Text}               text    Text to translate.\n * @param {string}             context Context information for the translators.\n * @param {string | undefined} domain  Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Text>} Translated context string without pipe.\n */\nexport const _x = i18n._x.bind( i18n );\n\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number.\n *\n * @see https://developer.wordpress.org/reference/functions/_n/\n *\n * @template {string} Single\n * @template {string} Plural\n *\n * @param {Single}             single The text to be used if the number is singular.\n * @param {Plural}             plural The text to be used if the number is plural.\n * @param {number}             number The number to compare against to use either the\n *                                    singular or plural form.\n * @param {string | undefined} domain Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Single | Plural>} The translated singular or plural form.\n */\nexport const _n = i18n._n.bind( i18n );\n\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number, with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_nx/\n *\n * @template {string} Single\n * @template {string} Plural\n * @param {Single}             single   The text to be used if the number is singular.\n *\n * @param {Single}             single   The text to be used if the number is singular.\n * @param {Plural}             plural   The text to be used if the number is plural.\n * @param {number}             number   The number to compare against to use either the\n *                                      singular or plural form.\n * @param {string}             context  Context information for the translators.\n * @param {string | undefined} [domain] Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Single | Plural>} The translated singular or plural form.\n */\nexport const _nx = i18n._nx.bind( i18n );\n\n/**\n * Check if current locale is RTL.\n *\n * **RTL (Right To Left)** is a locale property indicating that text is written from right to left.\n * For example, the `he` locale (for Hebrew) specifies right-to-left. Arabic (ar) is another common\n * language written RTL. The opposite of RTL, LTR (Left To Right) is used in other languages,\n * including English (`en`, `en-US`, `en-GB`, etc.), Spanish (`es`), and French (`fr`).\n *\n * @return {boolean} Whether locale is RTL.\n */\nexport const isRTL = i18n.isRTL.bind( i18n );\n\n/**\n * Check if there is a translation for a given string (in singular form).\n *\n * @param {string} single  Singular form of the string to look up.\n * @param {string} context Context information for the translators.\n * @param {string} domain  Domain to retrieve the translated text.\n *\n * @return {boolean} Whether the translation exists or not.\n */\nexport const hasTranslation = i18n.hasTranslation.bind( i18n );\n", "/**\n * Return true if platform is MacOS.\n *\n * @param _window window object by default; used for DI testing.\n *\n * @return True if MacOS; false otherwise.\n */\nexport function isAppleOS( _window?: Window ): boolean {\n\tif ( ! _window ) {\n\t\tif ( typeof window === 'undefined' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t_window = window;\n\t}\n\n\tconst { platform } = _window.navigator;\n\n\treturn (\n\t\tplatform.indexOf( 'Mac' ) !== -1 ||\n\t\t[ 'iPad', 'iPhone' ].includes( platform )\n\t);\n}\n", "/**\n * Note: The order of the modifier keys in many of the [foo]Shortcut()\n * functions in this file are intentional and should not be changed. They're\n * designed to fit with the standard menu keyboard shortcuts shown in the\n * user's platform.\n *\n * For example, on MacOS menu shortcuts will place Shift before Command, but\n * on Windows Control will usually come first. So don't provide your own\n * shortcut combos directly to keyboardShortcut().\n */\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { isAppleOS } from './platform';\n\n/**\n * External dependencies\n */\nimport type { KeyboardEvent as ReactKeyboardEvent } from 'react';\n\nexport type WPModifierPart =\n\t| typeof ALT\n\t| typeof CTRL\n\t| typeof COMMAND\n\t| typeof SHIFT;\n\nexport type WPKeycodeModifier =\n\t| 'primary'\n\t| 'primaryShift'\n\t| 'primaryAlt'\n\t| 'secondary'\n\t| 'access'\n\t| 'ctrl'\n\t| 'alt'\n\t| 'ctrlShift'\n\t| 'shift'\n\t| 'shiftAlt'\n\t| 'undefined';\n\n/**\n * An object of handler functions for each of the possible modifier\n * combinations. A handler will return a value for a given key.\n */\nexport type WPModifierHandler< T > = Record< WPKeycodeModifier, T >;\n\nexport type WPKeyHandler< T > = (\n\tcharacter: string,\n\tisApple?: () => boolean\n) => T;\n\nexport type WPEventKeyHandler = (\n\tevent: ReactKeyboardEvent< HTMLElement > | KeyboardEvent,\n\tcharacter: string,\n\tisApple?: () => boolean\n) => boolean;\n\nexport type WPModifier = ( isApple: () => boolean ) => WPModifierPart[];\n\n/**\n * Keycode for BACKSPACE key.\n */\nexport const BACKSPACE = 8;\n\n/**\n * Keycode for TAB key.\n */\nexport const TAB = 9;\n\n/**\n * Keycode for ENTER key.\n */\nexport const ENTER = 13;\n\n/**\n * Keycode for ESCAPE key.\n */\nexport const ESCAPE = 27;\n\n/**\n * Keycode for SPACE key.\n */\nexport const SPACE = 32;\n\n/**\n * Keycode for PAGEUP key.\n */\nexport const PAGEUP = 33;\n\n/**\n * Keycode for PAGEDOWN key.\n */\nexport const PAGEDOWN = 34;\n\n/**\n * Keycode for END key.\n */\nexport const END = 35;\n\n/**\n * Keycode for HOME key.\n */\nexport const HOME = 36;\n\n/**\n * Keycode for LEFT key.\n */\nexport const LEFT = 37;\n\n/**\n * Keycode for UP key.\n */\nexport const UP = 38;\n\n/**\n * Keycode for RIGHT key.\n */\nexport const RIGHT = 39;\n\n/**\n * Keycode for DOWN key.\n */\nexport const DOWN = 40;\n\n/**\n * Keycode for DELETE key.\n */\nexport const DELETE = 46;\n\n/**\n * Keycode for F10 key.\n */\nexport const F10 = 121;\n\n/**\n * Keycode for ALT key.\n */\nexport const ALT = 'alt';\n\n/**\n * Keycode for CTRL key.\n */\nexport const CTRL = 'ctrl';\n\n/**\n * Keycode for COMMAND/META key.\n */\nexport const COMMAND = 'meta';\n\n/**\n * Keycode for SHIFT key.\n */\nexport const SHIFT = 'shift';\n\n/**\n * Keycode for ZERO key.\n */\nexport const ZERO = 48;\n\nexport { isAppleOS };\n\n/**\n * Capitalise the first character of a string.\n * @param string String to capitalise.\n * @return Capitalised string.\n */\nfunction capitaliseFirstCharacter( string: string ): string {\n\treturn string.length < 2\n\t\t? string.toUpperCase()\n\t\t: string.charAt( 0 ).toUpperCase() + string.slice( 1 );\n}\n\n/**\n * Map the values of an object with a specified callback and return the result object.\n *\n * @template T The object type\n * @template R The return type of the mapping function\n *\n * @param    object Object to map values of.\n * @param    mapFn  Mapping function to apply to each value.\n * @return Object with the same keys and transformed values.\n */\nfunction mapValues< T extends Record< string, any >, R >(\n\tobject: T,\n\tmapFn: ( value: T[ keyof T ] ) => R\n): Record< keyof T, R > {\n\treturn Object.fromEntries(\n\t\tObject.entries( object ).map( ( [ key, value ] ) => [\n\t\t\tkey,\n\t\t\tmapFn( value ),\n\t\t] )\n\t) as Record< keyof T, R >;\n}\n\n/**\n * Object that contains functions that return the available modifier\n * depending on platform.\n */\nexport const modifiers: WPModifierHandler< WPModifier > = {\n\tprimary: ( _isApple ) => ( _isApple() ? [ COMMAND ] : [ CTRL ] ),\n\tprimaryShift: ( _isApple ) =>\n\t\t_isApple() ? [ SHIFT, COMMAND ] : [ CTRL, SHIFT ],\n\tprimaryAlt: ( _isApple ) =>\n\t\t_isApple() ? [ ALT, COMMAND ] : [ CTRL, ALT ],\n\tsecondary: ( _isApple ) =>\n\t\t_isApple() ? [ SHIFT, ALT, COMMAND ] : [ CTRL, SHIFT, ALT ],\n\taccess: ( _isApple ) => ( _isApple() ? [ CTRL, ALT ] : [ SHIFT, ALT ] ),\n\tctrl: () => [ CTRL ],\n\talt: () => [ ALT ],\n\tctrlShift: () => [ CTRL, SHIFT ],\n\tshift: () => [ SHIFT ],\n\tshiftAlt: () => [ SHIFT, ALT ],\n\tundefined: () => [],\n};\n\n/**\n * An object that contains functions to get raw shortcuts.\n *\n * These are intended for user with the KeyboardShortcuts.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * rawShortcut.primary( 'm' )\n * // \"meta+m\"\"\n * ```\n */\nexport const rawShortcut: WPModifierHandler< WPKeyHandler< string > > =\n\t/* @__PURE__ */\n\tmapValues( modifiers, ( modifier: WPModifier ) => {\n\t\treturn ( character: string, _isApple = isAppleOS ) => {\n\t\t\treturn [ ...modifier( _isApple ), character.toLowerCase() ].join(\n\t\t\t\t'+'\n\t\t\t);\n\t\t};\n\t} );\n\n/**\n * Return an array of the parts of a keyboard shortcut chord for display.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * displayShortcutList.primary( 'm' );\n * // [ \"⌘\", \"M\" ]\n * ```\n *\n * Keyed map of functions to shortcut sequences.\n */\nexport const displayShortcutList: WPModifierHandler<\n\tWPKeyHandler< string[] >\n> =\n\t/* @__PURE__ */\n\tmapValues(\n\t\tmodifiers,\n\t\t( modifier: WPModifier ): WPKeyHandler< string[] > => {\n\t\t\treturn ( character: string, _isApple = isAppleOS ) => {\n\t\t\t\tconst isApple = _isApple();\n\t\t\t\tconst replacementKeyMap = {\n\t\t\t\t\t[ ALT ]: isApple ? '⌥' : 'Alt',\n\t\t\t\t\t[ CTRL ]: isApple ? '⌃' : 'Ctrl', // Make sure ⌃ is the U+2303 UP ARROWHEAD unicode character and not the caret character.\n\t\t\t\t\t[ COMMAND ]: '⌘',\n\t\t\t\t\t[ SHIFT ]: isApple ? '⇧' : 'Shift',\n\t\t\t\t};\n\n\t\t\t\tconst modifierKeys = modifier( _isApple ).reduce< string[] >(\n\t\t\t\t\t( accumulator, key ) => {\n\t\t\t\t\t\tconst replacementKey = replacementKeyMap[ key ] ?? key;\n\t\t\t\t\t\t// If on the Mac, adhere to platform convention and don't show plus between keys.\n\t\t\t\t\t\tif ( isApple ) {\n\t\t\t\t\t\t\treturn [ ...accumulator, replacementKey ];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [ ...accumulator, replacementKey, '+' ];\n\t\t\t\t\t},\n\t\t\t\t\t[]\n\t\t\t\t);\n\n\t\t\t\treturn [\n\t\t\t\t\t...modifierKeys,\n\t\t\t\t\tcapitaliseFirstCharacter( character ),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\t);\n\n/**\n * An object that contains functions to display shortcuts.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * displayShortcut.primary( 'm' );\n * // \"⌘M\"\n * ```\n *\n * Keyed map of functions to display shortcuts.\n */\nexport const displayShortcut: WPModifierHandler< WPKeyHandler< string > > =\n\t/* @__PURE__ */\n\tmapValues(\n\t\tdisplayShortcutList,\n\t\t( shortcutList: WPKeyHandler< string[] > ): WPKeyHandler< string > => {\n\t\t\treturn ( character: string, _isApple = isAppleOS ) =>\n\t\t\t\tshortcutList( character, _isApple ).join( '' );\n\t\t}\n\t);\n\n/**\n * An object that contains functions to return an aria label for a keyboard\n * shortcut.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * shortcutAriaLabel.primary( '.' );\n * // \"Command + Period\"\n * ```\n *\n * Keyed map of functions to shortcut ARIA labels.\n */\nexport const shortcutAriaLabel: WPModifierHandler< WPKeyHandler< string > > =\n\t/* @__PURE__ */\n\tmapValues( modifiers, ( modifier: WPModifier ): WPKeyHandler< string > => {\n\t\treturn ( character: string, _isApple = isAppleOS ) => {\n\t\t\tconst isApple = _isApple();\n\t\t\tconst replacementKeyMap: Record< string, string > = {\n\t\t\t\t[ SHIFT ]: 'Shift',\n\t\t\t\t[ COMMAND ]: isApple ? 'Command' : 'Control',\n\t\t\t\t[ CTRL ]: 'Control',\n\t\t\t\t[ ALT ]: isApple ? 'Option' : 'Alt',\n\t\t\t\t/* translators: comma as in the character ',' */\n\t\t\t\t',': __( 'Comma' ),\n\t\t\t\t/* translators: period as in the character '.' */\n\t\t\t\t'.': __( 'Period' ),\n\t\t\t\t/* translators: backtick as in the character '`' */\n\t\t\t\t'`': __( 'Backtick' ),\n\t\t\t\t/* translators: tilde as in the character '~' */\n\t\t\t\t'~': __( 'Tilde' ),\n\t\t\t};\n\n\t\t\treturn [ ...modifier( _isApple ), character ]\n\t\t\t\t.map( ( key ) =>\n\t\t\t\t\tcapitaliseFirstCharacter( replacementKeyMap[ key ] ?? key )\n\t\t\t\t)\n\t\t\t\t.join( isApple ? ' ' : ' + ' );\n\t\t};\n\t} );\n\n/**\n * From a given KeyboardEvent, returns an array of active modifier constants for\n * the event.\n *\n * @param event Keyboard event.\n *\n * @return Active modifier constants.\n */\nfunction getEventModifiers(\n\tevent: ReactKeyboardEvent< HTMLElement > | KeyboardEvent\n): WPModifierPart[] {\n\treturn ( [ ALT, CTRL, COMMAND, SHIFT ] as const ).filter(\n\t\t( key ) =>\n\t\t\t( event as KeyboardEvent )[\n\t\t\t\t`${ key }Key` as 'altKey' | 'ctrlKey' | 'metaKey' | 'shiftKey'\n\t\t\t]\n\t);\n}\n\n/**\n * An object that contains functions to check if a keyboard event matches a\n * predefined shortcut combination.\n *\n * @example\n * ```js\n * // Assuming an event for ⌘M key press:\n * isKeyboardEvent.primary( event, 'm' );\n * // true\n * ```\n *\n * Keyed map of functions to match events.\n */\nexport const isKeyboardEvent: WPModifierHandler< WPEventKeyHandler > =\n\t/* @__PURE__ */\n\tmapValues( modifiers, ( getModifiers: WPModifier ): WPEventKeyHandler => {\n\t\treturn ( event, character, _isApple = isAppleOS ) => {\n\t\t\tconst mods = getModifiers( _isApple );\n\t\t\tconst eventMods = getEventModifiers( event );\n\n\t\t\tconst replacementWithShiftKeyMap: Record< string, string > = {\n\t\t\t\tComma: ',',\n\t\t\t\tBackslash: '\\\\',\n\t\t\t\t// Windows returns `\\` for both IntlRo and IntlYen.\n\t\t\t\tIntlRo: '\\\\',\n\t\t\t\tIntlYen: '\\\\',\n\t\t\t};\n\n\t\t\tconst modsDiff = mods.filter(\n\t\t\t\t( mod ) => ! eventMods.includes( mod )\n\t\t\t);\n\t\t\tconst eventModsDiff = eventMods.filter(\n\t\t\t\t( mod ) => ! mods.includes( mod )\n\t\t\t);\n\n\t\t\tif ( modsDiff.length > 0 || eventModsDiff.length > 0 ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet key = event.key.toLowerCase();\n\n\t\t\tif ( ! character ) {\n\t\t\t\treturn mods.includes( key as WPModifierPart );\n\t\t\t}\n\n\t\t\tif ( event.altKey && character.length === 1 ) {\n\t\t\t\tkey = String.fromCharCode( event.keyCode ).toLowerCase();\n\t\t\t}\n\n\t\t\t// `event.key` returns the value of the key pressed, taking into the state of\n\t\t\t// modifier keys such as `Shift`. If the shift key is pressed, a different\n\t\t\t// value may be returned depending on the keyboard layout. It is necessary to\n\t\t\t// convert to the physical key value that don't take into account keyboard\n\t\t\t// layout or modifier key state.\n\t\t\tif (\n\t\t\t\tevent.shiftKey &&\n\t\t\t\tcharacter.length === 1 &&\n\t\t\t\treplacementWithShiftKeyMap[ event.code ]\n\t\t\t) {\n\t\t\t\tkey = replacementWithShiftKeyMap[ event.code ];\n\t\t\t}\n\n\t\t\t// For backwards compatibility.\n\t\t\tif ( character === 'del' ) {\n\t\t\t\tcharacter = 'delete';\n\t\t\t}\n\n\t\t\treturn key === character.toLowerCase();\n\t\t};\n\t} );\n", "/**\n * External dependencies\n */\nimport type { RefCallback, SyntheticEvent } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useEffect, useCallback } from '@wordpress/element';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport useConstrainedTabbing from '../use-constrained-tabbing';\nimport useFocusOnMount from '../use-focus-on-mount';\nimport useFocusReturn from '../use-focus-return';\nimport useFocusOutside from '../use-focus-outside';\nimport useMergeRefs from '../use-merge-refs';\n\ntype DialogOptions = {\n\t/**\n\t * Determines whether focus should be automatically moved to the popover\n\t * when it mounts. `false` causes no focus shift, `true` causes the popover\n\t * itself to gain focus, and `firstElement` focuses the first focusable\n\t * element within the popover.\n\t *\n\t * @default 'firstElement'\n\t */\n\tfocusOnMount?: Parameters< typeof useFocusOnMount >[ 0 ];\n\t/**\n\t * Determines whether tabbing is constrained to within the popover,\n\t * preventing keyboard focus from leaving the popover content without\n\t * explicit focus elsewhere, or whether the popover remains part of the\n\t * wider tab order.\n\t * If no value is passed, it will be derived from `focusOnMount`.\n\t *\n\t * @see focusOnMount\n\t * @default `focusOnMount` !== false\n\t */\n\tconstrainTabbing?: boolean;\n\tonClose?: () => void;\n\t/**\n\t * Use the `onClose` prop instead.\n\t *\n\t * @deprecated\n\t */\n\t__unstableOnClose?: (\n\t\ttype: string | undefined,\n\t\tevent: SyntheticEvent\n\t) => void;\n};\n\ntype useDialogReturn = [\n\tRefCallback< HTMLElement >,\n\tReturnType< typeof useFocusOutside > & Pick< HTMLElement, 'tabIndex' >,\n];\n\n/**\n * Returns a ref and props to apply to a dialog wrapper to enable the following behaviors:\n *  - constrained tabbing.\n *  - focus on mount.\n *  - return focus on unmount.\n *  - focus outside.\n *\n * @param options Dialog Options.\n */\nfunction useDialog( options: DialogOptions ): useDialogReturn {\n\tconst currentOptions = useRef< DialogOptions | undefined >();\n\tconst { constrainTabbing = options.focusOnMount !== false } = options;\n\tuseEffect( () => {\n\t\tcurrentOptions.current = options;\n\t}, Object.values( options ) );\n\tconst constrainedTabbingRef = useConstrainedTabbing();\n\tconst focusOnMountRef = useFocusOnMount( options.focusOnMount );\n\tconst focusReturnRef = useFocusReturn();\n\tconst focusOutsideProps = useFocusOutside( ( event ) => {\n\t\t// This unstable prop  is here only to manage backward compatibility\n\t\t// for the Popover component otherwise, the onClose should be enough.\n\t\tif ( currentOptions.current?.__unstableOnClose ) {\n\t\t\tcurrentOptions.current.__unstableOnClose( 'focus-outside', event );\n\t\t} else if ( currentOptions.current?.onClose ) {\n\t\t\tcurrentOptions.current.onClose();\n\t\t}\n\t} );\n\tconst closeOnEscapeRef = useCallback( ( node: HTMLElement ) => {\n\t\tif ( ! node ) {\n\t\t\treturn;\n\t\t}\n\n\t\tnode.addEventListener( 'keydown', ( event: KeyboardEvent ) => {\n\t\t\t// Close on escape.\n\t\t\tif (\n\t\t\t\tevent.keyCode === ESCAPE &&\n\t\t\t\t! event.defaultPrevented &&\n\t\t\t\tcurrentOptions.current?.onClose\n\t\t\t) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcurrentOptions.current.onClose();\n\t\t\t}\n\t\t} );\n\t}, [] );\n\n\treturn [\n\t\tuseMergeRefs( [\n\t\t\tconstrainTabbing ? constrainedTabbingRef : null,\n\t\t\toptions.focusOnMount !== false ? focusReturnRef : null,\n\t\t\toptions.focusOnMount !== false ? focusOnMountRef : null,\n\t\t\tcloseOnEscapeRef,\n\t\t] ),\n\t\t{\n\t\t\t...focusOutsideProps,\n\t\t\ttabIndex: -1,\n\t\t},\n\t];\n}\n\nexport default useDialog;\n", "/**\n * Internal dependencies\n */\nimport { debounce } from '../../utils/debounce';\nimport useRefEffect from '../use-ref-effect';\n\n/**\n * In some circumstances, such as block previews, all focusable DOM elements\n * (input fields, links, buttons, etc.) need to be disabled. This hook adds the\n * behavior to disable nested DOM elements to the returned ref.\n *\n * If you can, prefer the use of the inert HTML attribute.\n *\n * @param {Object}   config            Configuration object.\n * @param {boolean=} config.isDisabled Whether the element should be disabled.\n * @return {import('react').RefCallback<HTMLElement>} Element Ref.\n *\n * @example\n * ```js\n * import { useDisabled } from '@wordpress/compose';\n *\n * const DisabledExample = () => {\n * \tconst disabledRef = useDisabled();\n *\treturn (\n *\t\t<div ref={ disabledRef }>\n *\t\t\t<a href=\"#\">This link will have tabindex set to -1</a>\n *\t\t\t<input placeholder=\"This input will have the disabled attribute added to it.\" type=\"text\" />\n *\t\t</div>\n *\t);\n * };\n * ```\n */\nexport default function useDisabled( {\n\tisDisabled: isDisabledProp = false,\n} = {} ) {\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( isDisabledProp ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst defaultView = node?.ownerDocument?.defaultView;\n\t\t\tif ( ! defaultView ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/** A variable keeping track of the previous updates in order to restore them. */\n\t\t\tconst updates: Function[] = [];\n\t\t\tconst disable = () => {\n\t\t\t\tnode.childNodes.forEach( ( child ) => {\n\t\t\t\t\tif ( ! ( child instanceof defaultView.HTMLElement ) ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif ( ! child.getAttribute( 'inert' ) ) {\n\t\t\t\t\t\tchild.setAttribute( 'inert', 'true' );\n\t\t\t\t\t\tupdates.push( () => {\n\t\t\t\t\t\t\tchild.removeAttribute( 'inert' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\n\t\t\t// Debounce re-disable since disabling process itself will incur\n\t\t\t// additional mutations which should be ignored.\n\t\t\tconst debouncedDisable = debounce( disable, 0, {\n\t\t\t\tleading: true,\n\t\t\t} );\n\t\t\tdisable();\n\n\t\t\t/** @type {MutationObserver | undefined} */\n\t\t\tconst observer = new window.MutationObserver( debouncedDisable );\n\t\t\tobserver.observe( node, {\n\t\t\t\tchildList: true,\n\t\t\t} );\n\n\t\t\treturn () => {\n\t\t\t\tif ( observer ) {\n\t\t\t\t\tobserver.disconnect();\n\t\t\t\t}\n\t\t\t\tdebouncedDisable.cancel();\n\t\t\t\tupdates.forEach( ( update ) => update() );\n\t\t\t};\n\t\t},\n\t\t[ isDisabledProp ]\n\t);\n}\n", "/**\n * WordPress dependencies\n */\nimport { useRef, useInsertionEffect, useCallback } from '@wordpress/element';\n\n/**\n * Any function.\n */\nexport type AnyFunction = ( ...args: any ) => any;\n\n/**\n * Creates a stable callback function that has access to the latest state and\n * can be used within event handlers and effect callbacks. Throws when used in\n * the render phase.\n *\n * @param callback The callback function to wrap.\n *\n * @example\n *\n * ```tsx\n * function Component( props ) {\n *   const onClick = useEvent( props.onClick );\n *   useEffect( () => {\n *     onClick();\n *     // Won't trigger the effect again when props.onClick is updated.\n *   }, [ onClick ] );\n *   // Won't re-render Button when props.onClick is updated (if `Button` is\n *   // wrapped in `React.memo`).\n *   return <Button onClick={ onClick } />;\n * }\n * ```\n */\nexport default function useEvent< T extends AnyFunction >(\n\t/**\n\t * The callback function to wrap.\n\t */\n\tcallback?: T\n) {\n\tconst ref = useRef< AnyFunction | undefined >( () => {\n\t\tthrow new Error(\n\t\t\t'Callbacks created with `useEvent` cannot be called during rendering.'\n\t\t);\n\t} );\n\tuseInsertionEffect( () => {\n\t\tref.current = callback;\n\t} );\n\treturn useCallback< AnyFunction >(\n\t\t( ...args ) => ref.current?.( ...args ),\n\t\t[]\n\t) as T;\n}\n", "/**\n * WordPress dependencies\n */\nimport { useEffect, useLayoutEffect } from '@wordpress/element';\n\n/**\n * Preferred over direct usage of `useLayoutEffect` when supporting\n * server rendered components (SSR) because currently React\n * throws a warning when using useLayoutEffect in that environment.\n */\nconst useIsomorphicLayoutEffect =\n\ttypeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nexport default useIsomorphicLayoutEffect;\n", "/**\n * WordPress dependencies\n */\nimport { useCallback, useEffect, useRef, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useIsomorphicLayoutEffect from '../use-isomorphic-layout-effect';\n\n// Event handlers that are triggered from `document` listeners accept a MouseEvent,\n// while those triggered from React listeners accept a React.MouseEvent.\n/**\n * @param {Object}                                  props\n * @param {(e: import('react').MouseEvent) => void} props.onDragStart\n * @param {(e: MouseEvent) => void}                 props.onDragMove\n * @param {(e?: MouseEvent) => void}                props.onDragEnd\n */\nexport default function useDragging( { onDragStart, onDragMove, onDragEnd } ) {\n\tconst [ isDragging, setIsDragging ] = useState( false );\n\n\tconst eventsRef = useRef( {\n\t\tonDragStart,\n\t\tonDragMove,\n\t\tonDragEnd,\n\t} );\n\tuseIsomorphicLayoutEffect( () => {\n\t\teventsRef.current.onDragStart = onDragStart;\n\t\teventsRef.current.onDragMove = onDragMove;\n\t\teventsRef.current.onDragEnd = onDragEnd;\n\t}, [ onDragStart, onDragMove, onDragEnd ] );\n\n\t/** @type {(e: MouseEvent) => void} */\n\tconst onMouseMove = useCallback(\n\t\t( event ) =>\n\t\t\teventsRef.current.onDragMove &&\n\t\t\teventsRef.current.onDragMove( event ),\n\t\t[]\n\t);\n\t/** @type {(e?: MouseEvent) => void} */\n\tconst endDrag = useCallback( ( event ) => {\n\t\tif ( eventsRef.current.onDragEnd ) {\n\t\t\teventsRef.current.onDragEnd( event );\n\t\t}\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove );\n\t\tdocument.removeEventListener( 'mouseup', endDrag );\n\t\tsetIsDragging( false );\n\t}, [] );\n\t/** @type {(e: import('react').MouseEvent) => void} */\n\tconst startDrag = useCallback( ( event ) => {\n\t\tif ( eventsRef.current.onDragStart ) {\n\t\t\teventsRef.current.onDragStart( event );\n\t\t}\n\t\tdocument.addEventListener( 'mousemove', onMouseMove );\n\t\tdocument.addEventListener( 'mouseup', endDrag );\n\t\tsetIsDragging( true );\n\t}, [] );\n\n\t// Remove the global events when unmounting if needed.\n\tuseEffect( () => {\n\t\treturn () => {\n\t\t\tif ( isDragging ) {\n\t\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove );\n\t\t\t\tdocument.removeEventListener( 'mouseup', endDrag );\n\t\t\t}\n\t\t};\n\t}, [ isDragging ] );\n\n\treturn {\n\t\tstartDrag,\n\t\tendDrag,\n\t\tisDragging,\n\t};\n}\n", "/**\n * External dependencies\n */\nimport Mousetrap from 'mousetrap';\nimport 'mousetrap/plugins/global-bind/mousetrap-global-bind';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport { isAppleOS } from '@wordpress/keycodes';\n\n/**\n * A block selection object.\n *\n * @typedef {Object} WPKeyboardShortcutConfig\n *\n * @property {boolean}                                [bindGlobal] Handle keyboard events anywhere including inside textarea/input fields.\n * @property {string}                                 [eventName]  Event name used to trigger the handler, defaults to keydown.\n * @property {boolean}                                [isDisabled] Disables the keyboard handler if the value is true.\n * @property {import('react').RefObject<HTMLElement>} [target]     React reference to the DOM element used to catch the keyboard event.\n */\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Attach a keyboard shortcut handler.\n *\n * @see https://craig.is/killing/mice#api.bind for information about the `callback` parameter.\n *\n * @param {string[]|string}                                                       shortcuts Keyboard Shortcuts.\n * @param {(e: import('mousetrap').ExtendedKeyboardEvent, combo: string) => void} callback  Shortcut callback.\n * @param {WPKeyboardShortcutConfig}                                              options   Shortcut options.\n */\nfunction useKeyboardShortcut(\n\t/* eslint-enable jsdoc/valid-types */\n\tshortcuts,\n\tcallback,\n\t{\n\t\tbindGlobal = false,\n\t\teventName = 'keydown',\n\t\tisDisabled = false, // This is important for performance considerations.\n\t\ttarget,\n\t} = {}\n) {\n\tconst currentCallbackRef = useRef( callback );\n\tuseEffect( () => {\n\t\tcurrentCallbackRef.current = callback;\n\t}, [ callback ] );\n\n\tuseEffect( () => {\n\t\tif ( isDisabled ) {\n\t\t\treturn;\n\t\t}\n\t\tconst mousetrap = new Mousetrap(\n\t\t\ttarget && target.current\n\t\t\t\t? target.current\n\t\t\t\t: // We were passing `document` here previously, so to successfully cast it to Element we must cast it first to `unknown`.\n\t\t\t\t  // Not sure if this is a mistake but it was the behavior previous to the addition of types so we're just doing what's\n\t\t\t\t  // necessary to maintain the existing behavior.\n\t\t\t\t  /** @type {Element} */ ( /** @type {unknown} */ ( document ) )\n\t\t);\n\t\tconst shortcutsArray = Array.isArray( shortcuts )\n\t\t\t? shortcuts\n\t\t\t: [ shortcuts ];\n\t\tshortcutsArray.forEach( ( shortcut ) => {\n\t\t\tconst keys = shortcut.split( '+' );\n\t\t\t// Determines whether a key is a modifier by the length of the string.\n\t\t\t// E.g. if I add a pass a shortcut Shift+Cmd+M, it'll determine that\n\t\t\t// the modifiers are Shift and Cmd because they're not a single character.\n\t\t\tconst modifiers = new Set(\n\t\t\t\tkeys.filter( ( value ) => value.length > 1 )\n\t\t\t);\n\t\t\tconst hasAlt = modifiers.has( 'alt' );\n\t\t\tconst hasShift = modifiers.has( 'shift' );\n\n\t\t\t// This should be better moved to the shortcut registration instead.\n\t\t\tif (\n\t\t\t\tisAppleOS() &&\n\t\t\t\t( ( modifiers.size === 1 && hasAlt ) ||\n\t\t\t\t\t( modifiers.size === 2 && hasAlt && hasShift ) )\n\t\t\t) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Cannot bind ${ shortcut }. Alt and Shift+Alt modifiers are reserved for character input.`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst bindFn = bindGlobal ? 'bindGlobal' : 'bind';\n\t\t\t// @ts-ignore `bindGlobal` is an undocumented property\n\t\t\tmousetrap[ bindFn ](\n\t\t\t\tshortcut,\n\t\t\t\t(\n\t\t\t\t\t/* eslint-disable jsdoc/valid-types */\n\t\t\t\t\t/** @type {[e: import('mousetrap').ExtendedKeyboardEvent, combo: string]} */ ...args\n\t\t\t\t) =>\n\t\t\t\t\t/* eslint-enable jsdoc/valid-types */\n\t\t\t\t\tcurrentCallbackRef.current( ...args ),\n\t\t\t\teventName\n\t\t\t);\n\t\t} );\n\n\t\treturn () => {\n\t\t\tmousetrap.reset();\n\t\t};\n\t}, [ shortcuts, bindGlobal, eventName, target, isDisabled ] );\n}\n\nexport default useKeyboardShortcut;\n", "/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\n\n/**\n * Use something's value from the previous render.\n * Based on https://usehooks.com/usePrevious/.\n *\n * @param value The value to track.\n *\n * @return The value from the previous render.\n */\nexport default function usePrevious< T >( value: T ): T | undefined {\n\tconst ref = useRef< T >();\n\n\t// Store current value in ref.\n\tuseEffect( () => {\n\t\tref.current = value;\n\t}, [ value ] ); // Re-run when value changes.\n\n\t// Return previous value (happens before update in useEffect above).\n\treturn ref.current;\n}\n", "/**\n * WordPress dependencies\n */\nimport { useMemo, useSyncExternalStore } from '@wordpress/element';\n\nconst matchMediaCache = new Map();\n\n/**\n * A new MediaQueryList object for the media query\n *\n * @param {string} [query] Media Query.\n * @return {MediaQueryList|null} A new object for the media query\n */\nfunction getMediaQueryList( query ) {\n\tif ( ! query ) {\n\t\treturn null;\n\t}\n\n\tlet match = matchMediaCache.get( query );\n\n\tif ( match ) {\n\t\treturn match;\n\t}\n\n\tif (\n\t\ttypeof window !== 'undefined' &&\n\t\ttypeof window.matchMedia === 'function'\n\t) {\n\t\tmatch = window.matchMedia( query );\n\t\tmatchMediaCache.set( query, match );\n\t\treturn match;\n\t}\n\n\treturn null;\n}\n\n/**\n * Runs a media query and returns its value when it changes.\n *\n * @param {string} [query] Media Query.\n * @return {boolean} return value of the media query.\n */\nexport default function useMediaQuery( query ) {\n\tconst source = useMemo( () => {\n\t\tconst mediaQueryList = getMediaQueryList( query );\n\n\t\treturn {\n\t\t\t/** @type {(onStoreChange: () => void) => () => void} */\n\t\t\tsubscribe( onStoreChange ) {\n\t\t\t\tif ( ! mediaQueryList ) {\n\t\t\t\t\treturn () => {};\n\t\t\t\t}\n\n\t\t\t\t// Avoid a fatal error when browsers don't support `addEventListener` on MediaQueryList.\n\t\t\t\tmediaQueryList.addEventListener?.( 'change', onStoreChange );\n\t\t\t\treturn () => {\n\t\t\t\t\tmediaQueryList.removeEventListener?.(\n\t\t\t\t\t\t'change',\n\t\t\t\t\t\tonStoreChange\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t},\n\t\t\tgetValue() {\n\t\t\t\treturn mediaQueryList?.matches ?? false;\n\t\t\t},\n\t\t};\n\t}, [ query ] );\n\n\treturn useSyncExternalStore(\n\t\tsource.subscribe,\n\t\tsource.getValue,\n\t\t() => false\n\t);\n}\n", "/**\n * Internal dependencies\n */\nimport useMediaQuery from '../use-media-query';\n\n/**\n * Hook returning whether the user has a preference for reduced motion.\n *\n * @return {boolean} Reduced motion preference value.\n */\nconst useReducedMotion = () =>\n\tuseMediaQuery( '(prefers-reduced-motion: reduce)' );\n\nexport default useReducedMotion;\n", "/**\n * WordPress dependencies\n */\nimport { createContext, useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useMediaQuery from '../use-media-query';\n\n/**\n * @typedef {\"xhuge\" | \"huge\" | \"wide\" | \"xlarge\" | \"large\" | \"medium\" | \"small\" | \"mobile\"} WPBreakpoint\n */\n\n/**\n * Hash of breakpoint names with pixel width at which it becomes effective.\n *\n * @see _breakpoints.scss\n *\n * @type {Record<WPBreakpoint, number>}\n */\nconst BREAKPOINTS = {\n\txhuge: 1920,\n\thuge: 1440,\n\twide: 1280,\n\txlarge: 1080,\n\tlarge: 960,\n\tmedium: 782,\n\tsmall: 600,\n\tmobile: 480,\n};\n\n/**\n * @typedef {\">=\" | \"<\"} WPViewportOperator\n */\n\n/**\n * Object mapping media query operators to the condition to be used.\n *\n * @type {Record<WPViewportOperator, string>}\n */\nconst CONDITIONS = {\n\t'>=': 'min-width',\n\t'<': 'max-width',\n};\n\n/**\n * Object mapping media query operators to a function that given a breakpointValue and a width evaluates if the operator matches the values.\n *\n * @type {Record<WPViewportOperator, (breakpointValue: number, width: number) => boolean>}\n */\nconst OPERATOR_EVALUATORS = {\n\t'>=': ( breakpointValue, width ) => width >= breakpointValue,\n\t'<': ( breakpointValue, width ) => width < breakpointValue,\n};\n\nconst ViewportMatchWidthContext = createContext(\n\t/** @type {null | number} */ ( null )\n);\nViewportMatchWidthContext.displayName = 'ViewportMatchWidthContext';\n\n/**\n * Returns true if the viewport matches the given query, or false otherwise.\n *\n * @param {WPBreakpoint}       breakpoint      Breakpoint size name.\n * @param {WPViewportOperator} [operator=\">=\"] Viewport operator.\n *\n * @example\n *\n * ```js\n * useViewportMatch( 'huge', '<' );\n * useViewportMatch( 'medium' );\n * ```\n *\n * @return {boolean} Whether viewport matches query.\n */\nconst useViewportMatch = ( breakpoint, operator = '>=' ) => {\n\tconst simulatedWidth = useContext( ViewportMatchWidthContext );\n\tconst mediaQuery =\n\t\t! simulatedWidth &&\n\t\t`(${ CONDITIONS[ operator ] }: ${ BREAKPOINTS[ breakpoint ] }px)`;\n\tconst mediaQueryResult = useMediaQuery( mediaQuery || undefined );\n\tif ( simulatedWidth ) {\n\t\treturn OPERATOR_EVALUATORS[ operator ](\n\t\t\tBREAKPOINTS[ breakpoint ],\n\t\t\tsimulatedWidth\n\t\t);\n\t}\n\treturn mediaQueryResult;\n};\n\nuseViewportMatch.__experimentalWidthProvider =\n\tViewportMatchWidthContext.Provider;\n\nexport default useViewportMatch;\n", "/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\n/**\n * Internal dependencies\n */\nimport useEvent from '../use-event';\n\n// This is the current implementation of `useResizeObserver`.\n//\n// The legacy implementation is still supported for backwards compatibility.\n// This is achieved by overloading the exported function with both signatures,\n// and detecting which API is being used at runtime.\nexport function useResizeObserver< T extends HTMLElement >(\n\tcallback: ResizeObserverCallback,\n\tresizeObserverOptions: ResizeObserverOptions = {}\n): ( element?: T | null ) => void {\n\tconst callbackEvent = useEvent( callback );\n\n\tconst observedElementRef = useRef< T | null >();\n\tconst resizeObserverRef = useRef< ResizeObserver >();\n\treturn useEvent( ( element?: T | null ) => {\n\t\tif ( element === observedElementRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set up `ResizeObserver`.\n\t\tresizeObserverRef.current ??= new ResizeObserver( callbackEvent );\n\t\tconst { current: resizeObserver } = resizeObserverRef;\n\n\t\t// Unobserve previous element.\n\t\tif ( observedElementRef.current ) {\n\t\t\tresizeObserver.unobserve( observedElementRef.current );\n\t\t}\n\n\t\t// Observe new element.\n\t\tobservedElementRef.current = element;\n\t\tif ( element ) {\n\t\t\tresizeObserver.observe( element, resizeObserverOptions );\n\t\t}\n\t} );\n}\n", "/**\n * External dependencies\n */\nimport type { ReactElement } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport { useCallback, useRef, useState } from '@wordpress/element';\n/**\n * Internal dependencies\n */\nimport { useResizeObserver } from '../use-resize-observer';\n\nexport type ObservedSize = {\n\twidth: number | null;\n\theight: number | null;\n};\n\n// We're only using the first element of the size sequences, until future versions of the spec solidify on how\n// exactly it'll be used for fragments in multi-column scenarios:\n// From the spec:\n// > The box size properties are exposed as FrozenArray in order to support elements that have multiple fragments,\n// > which occur in multi-column scenarios. However the current definitions of content rect and border box do not\n// > mention how those boxes are affected by multi-column layout. In this spec, there will only be a single\n// > ResizeObserverSize returned in the FrozenArray, which will correspond to the dimensions of the first column.\n// > A future version of this spec will extend the returned FrozenArray to contain the per-fragment size information.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-entry-interface)\n//\n// Also, testing these new box options revealed that in both Chrome and FF everything is returned in the callback,\n// regardless of the \"box\" option.\n// The spec states the following on this:\n// > This does not have any impact on which box dimensions are returned to the defined callback when the event\n// > is fired, it solely defines which box the author wishes to observe layout changes on.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-interface)\n// I'm not exactly clear on what this means, especially when you consider a later section stating the following:\n// > This section is non-normative. An author may desire to observe more than one CSS box.\n// > In this case, author will need to use multiple ResizeObservers.\n// (https://drafts.csswg.org/resize-observer/#resize-observer-interface)\n// Which is clearly not how current browser implementations behave, and seems to contradict the previous quote.\n// For this reason I decided to only return the requested size,\n// even though it seems we have access to results for all box types.\n// This also means that we get to keep the current api, being able to return a simple { width, height } pair,\n// regardless of box option.\nconst extractSize = ( entry: ResizeObserverEntry ): ObservedSize => {\n\tlet entrySize;\n\tif ( ! entry.contentBoxSize ) {\n\t\t// The dimensions in `contentBoxSize` and `contentRect` are equivalent according to the spec.\n\t\t// See the 6th step in the description for the RO algorithm:\n\t\t// https://drafts.csswg.org/resize-observer/#create-and-populate-resizeobserverentry-h\n\t\t// > Set this.contentRect to logical this.contentBoxSize given target and observedBox of \"content-box\".\n\t\t// In real browser implementations of course these objects differ, but the width/height values should be equivalent.\n\t\tentrySize = [ entry.contentRect.width, entry.contentRect.height ];\n\t} else if ( entry.contentBoxSize[ 0 ] ) {\n\t\tconst contentBoxSize = entry.contentBoxSize[ 0 ];\n\t\tentrySize = [ contentBoxSize.inlineSize, contentBoxSize.blockSize ];\n\t} else {\n\t\t// TS complains about this, because the RO entry type follows the spec and does not reflect Firefox's buggy\n\t\t// behaviour of returning objects instead of arrays for `borderBoxSize` and `contentBoxSize`.\n\t\tconst contentBoxSize =\n\t\t\tentry.contentBoxSize as unknown as ResizeObserverSize;\n\t\tentrySize = [ contentBoxSize.inlineSize, contentBoxSize.blockSize ];\n\t}\n\n\tconst [ width, height ] = entrySize.map( ( d ) => Math.round( d ) );\n\treturn { width, height };\n};\n\nconst RESIZE_ELEMENT_STYLES = {\n\tposition: 'absolute',\n\ttop: 0,\n\tleft: 0,\n\tright: 0,\n\tbottom: 0,\n\tpointerEvents: 'none',\n\topacity: 0,\n\toverflow: 'hidden',\n\tzIndex: -1,\n} as const;\n\ntype ResizeElementProps = {\n\tonResize: ( s: ObservedSize ) => void;\n};\n\nfunction ResizeElement( { onResize }: ResizeElementProps ) {\n\tconst resizeElementRef = useResizeObserver( ( entries ) => {\n\t\tconst newSize = extractSize( entries.at( -1 )! ); // Entries are never empty.\n\t\tonResize( newSize );\n\t} );\n\n\treturn (\n\t\t<div\n\t\t\tref={ resizeElementRef }\n\t\t\tstyle={ RESIZE_ELEMENT_STYLES }\n\t\t\taria-hidden=\"true\"\n\t\t/>\n\t);\n}\n\nfunction sizeEquals( a: ObservedSize, b: ObservedSize ) {\n\treturn a.width === b.width && a.height === b.height;\n}\n\nconst NULL_SIZE: ObservedSize = { width: null, height: null };\n\n/**\n * Hook which allows to listen to the resize event of any target element when it changes size.\n * _Note: `useResizeObserver` will report `null` sizes until after first render.\n *\n * @example\n *\n * ```js\n * const App = () => {\n * \tconst [ resizeListener, sizes ] = useResizeObserver();\n *\n * \treturn (\n * \t\t<div>\n * \t\t\t{ resizeListener }\n * \t\t\tYour content here\n * \t\t</div>\n * \t);\n * };\n * ```\n */\nexport default function useLegacyResizeObserver(): [\n\tReactElement,\n\tObservedSize,\n] {\n\tconst [ size, setSize ] = useState( NULL_SIZE );\n\n\t// Using a ref to track the previous width / height to avoid unnecessary renders.\n\tconst previousSizeRef = useRef( NULL_SIZE );\n\n\tconst handleResize = useCallback( ( newSize: ObservedSize ) => {\n\t\tif ( ! sizeEquals( previousSizeRef.current, newSize ) ) {\n\t\t\tpreviousSizeRef.current = newSize;\n\t\t\tsetSize( newSize );\n\t\t}\n\t}, [] );\n\n\tconst resizeElement = <ResizeElement onResize={ handleResize } />;\n\treturn [ resizeElement, size ];\n}\n", "/**\n * Internal dependencies\n */\nimport { useResizeObserver as _useResizeObserver } from './use-resize-observer';\nimport type { ObservedSize } from './legacy';\nimport _useLegacyResizeObserver from './legacy';\n/**\n * External dependencies\n */\nimport type { ReactElement } from 'react';\n\n/**\n * Sets up a [`ResizeObserver`](https://developer.mozilla.org/en-US/docs/Web/API/Resize_Observer_API)\n * for an HTML or SVG element.\n *\n * Pass the returned setter as a callback ref to the React element you want\n * to observe, or use it in layout effects for advanced use cases.\n *\n * @example\n *\n * ```tsx\n * const setElement = useResizeObserver(\n * \t( resizeObserverEntries ) => console.log( resizeObserverEntries ),\n * \t{ box: 'border-box' }\n * );\n * <div ref={ setElement } />;\n *\n * // The setter can be used in other ways, for example:\n * useLayoutEffect( () => {\n * \tsetElement( document.querySelector( `data-element-id=\"${ elementId }\"` ) );\n * }, [ elementId ] );\n * ```\n *\n * @param callback The `ResizeObserver` callback - [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/ResizeObserver#callback).\n * @param options  Options passed to `ResizeObserver.observe` when called - [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/observe#options). Changes will be ignored.\n */\nexport default function useResizeObserver< T extends Element >(\n\t/**\n\t * The `ResizeObserver` callback - [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/ResizeObserver#callback).\n\t */\n\tcallback: ResizeObserverCallback,\n\t/**\n\t * Options passed to `ResizeObserver.observe` when called - [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/observe#options). Changes will be ignored.\n\t */\n\toptions?: ResizeObserverOptions\n): ( element?: T | null ) => void;\n\n/**\n * **This is a legacy API and should not be used.**\n *\n * @deprecated Use the other `useResizeObserver` API instead: `const ref = useResizeObserver( ( entries ) => { ... } )`.\n *\n * Hook which allows to listen to the resize event of any target element when it changes size.\n * _Note: `useResizeObserver` will report `null` sizes until after first render.\n *\n * @example\n *\n * ```js\n * const App = () => {\n * \tconst [ resizeListener, sizes ] = useResizeObserver();\n *\n * \treturn (\n * \t\t<div>\n * \t\t\t{ resizeListener }\n * \t\t\tYour content here\n * \t\t</div>\n * \t);\n * };\n * ```\n */\nexport default function useResizeObserver(): [ ReactElement, ObservedSize ];\n\nexport default function useResizeObserver< T extends HTMLElement >(\n\tcallback?: ResizeObserverCallback,\n\toptions: ResizeObserverOptions = {}\n): ( ( element?: T | null ) => void ) | [ ReactElement, ObservedSize ] {\n\treturn callback\n\t\t? _useResizeObserver( callback, options )\n\t\t: _useLegacyResizeObserver();\n}\n", "/**\n * External dependencies\n */\nimport { useMemoOne } from 'use-memo-one';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { debounce } from '../../utils/debounce';\n\n/**\n * Debounces a function similar to Lodash's `debounce`. A new debounced function will\n * be returned and any scheduled calls cancelled if any of the arguments change,\n * including the function to debounce, so please wrap functions created on\n * render in components in `useCallback`.\n *\n * @see https://lodash.com/docs/4#debounce\n *\n * @template {(...args: any[]) => void} TFunc\n *\n * @param {TFunc}                                          fn        The function to debounce.\n * @param {number}                                         [wait]    The number of milliseconds to delay.\n * @param {import('../../utils/debounce').DebounceOptions} [options] The options object.\n * @return {import('../../utils/debounce').DebouncedFunc<TFunc>} Debounced function.\n */\nexport default function useDebounce( fn, wait, options ) {\n\tconst debounced = useMemoOne(\n\t\t() => debounce( fn, wait ?? 0, options ),\n\t\t[ fn, wait, options ]\n\t);\n\tuseEffect( () => () => debounced.cancel(), [ debounced ] );\n\treturn debounced;\n}\n", "/**\n * Internal dependencies\n */\nimport useRefEffect from '../use-ref-effect';\nimport useEvent from '../use-event';\n\n/**\n * A hook to facilitate drag and drop handling.\n *\n * @param {Object}                  props                   Named parameters.\n * @param {?HTMLElement}            [props.dropZoneElement] Optional element to be used as the drop zone.\n * @param {boolean}                 [props.isDisabled]      Whether or not to disable the drop zone.\n * @param {(e: DragEvent) => void}  [props.onDragStart]     Called when dragging has started.\n * @param {(e: DragEvent) => void}  [props.onDragEnter]     Called when the zone is entered.\n * @param {(e: DragEvent) => void}  [props.onDragOver]      Called when the zone is moved within.\n * @param {(e: DragEvent) => void}  [props.onDragLeave]     Called when the zone is left.\n * @param {(e: MouseEvent) => void} [props.onDragEnd]       Called when dragging has ended.\n * @param {(e: DragEvent) => void}  [props.onDrop]          Called when dropping in the zone.\n *\n * @return {import('react').RefCallback<HTMLElement>} Ref callback to be passed to the drop zone element.\n */\nexport default function useDropZone( {\n\tdropZoneElement,\n\tisDisabled,\n\tonDrop: _onDrop,\n\tonDragStart: _onDragStart,\n\tonDragEnter: _onDragEnter,\n\tonDragLeave: _onDragLeave,\n\tonDragEnd: _onDragEnd,\n\tonDragOver: _onDragOver,\n} ) {\n\tconst onDropEvent = useEvent( _onDrop );\n\tconst onDragStartEvent = useEvent( _onDragStart );\n\tconst onDragEnterEvent = useEvent( _onDragEnter );\n\tconst onDragLeaveEvent = useEvent( _onDragLeave );\n\tconst onDragEndEvent = useEvent( _onDragEnd );\n\tconst onDragOverEvent = useEvent( _onDragOver );\n\n\treturn useRefEffect(\n\t\t( elem ) => {\n\t\t\tif ( isDisabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a custom dropZoneRef is passed, use that instead of the element.\n\t\t\t// This allows the dropzone to cover an expanded area, rather than\n\t\t\t// be restricted to the area of the ref returned by this hook.\n\t\t\tconst element = dropZoneElement ?? elem;\n\n\t\t\tlet isDragging = false;\n\n\t\t\tconst { ownerDocument } = element;\n\n\t\t\t/**\n\t\t\t * Checks if an element is in the drop zone.\n\t\t\t *\n\t\t\t * @param {EventTarget|null} targetToCheck\n\t\t\t *\n\t\t\t * @return {boolean} True if in drop zone, false if not.\n\t\t\t */\n\t\t\tfunction isElementInZone( targetToCheck ) {\n\t\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\t\tif (\n\t\t\t\t\t! targetToCheck ||\n\t\t\t\t\t! defaultView ||\n\t\t\t\t\t! ( targetToCheck instanceof defaultView.HTMLElement ) ||\n\t\t\t\t\t! element.contains( targetToCheck )\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t/** @type {HTMLElement|null} */\n\t\t\t\tlet elementToCheck = targetToCheck;\n\n\t\t\t\tdo {\n\t\t\t\t\tif ( elementToCheck.dataset.isDropZone ) {\n\t\t\t\t\t\treturn elementToCheck === element;\n\t\t\t\t\t}\n\t\t\t\t} while ( ( elementToCheck = elementToCheck.parentElement ) );\n\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tfunction maybeDragStart( /** @type {DragEvent} */ event ) {\n\t\t\t\tif ( isDragging ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tisDragging = true;\n\n\t\t\t\t// Note that `dragend` doesn't fire consistently for file and\n\t\t\t\t// HTML drag events where the drag origin is outside the browser\n\t\t\t\t// window. In Firefox it may also not fire if the originating\n\t\t\t\t// node is removed.\n\t\t\t\townerDocument.addEventListener( 'dragend', maybeDragEnd );\n\t\t\t\townerDocument.addEventListener( 'mousemove', maybeDragEnd );\n\n\t\t\t\tif ( _onDragStart ) {\n\t\t\t\t\tonDragStartEvent( event );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction onDragEnter( /** @type {DragEvent} */ event ) {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\t// The `dragenter` event will also fire when entering child\n\t\t\t\t// elements, but we only want to call `onDragEnter` when\n\t\t\t\t// entering the drop zone, which means the `relatedTarget`\n\t\t\t\t// (element that has been left) should be outside the drop zone.\n\t\t\t\tif (\n\t\t\t\t\telement.contains(\n\t\t\t\t\t\t/** @type {Node} */ ( event.relatedTarget )\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( _onDragEnter ) {\n\t\t\t\t\tonDragEnterEvent( event );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction onDragOver( /** @type {DragEvent} */ event ) {\n\t\t\t\t// Only call onDragOver for the innermost hovered drop zones.\n\t\t\t\tif ( ! event.defaultPrevented && _onDragOver ) {\n\t\t\t\t\tonDragOverEvent( event );\n\t\t\t\t}\n\n\t\t\t\t// Prevent the browser default while also signalling to parent\n\t\t\t\t// drop zones that `onDragOver` is already handled.\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\tfunction onDragLeave( /** @type {DragEvent} */ event ) {\n\t\t\t\t// The `dragleave` event will also fire when leaving child\n\t\t\t\t// elements, but we only want to call `onDragLeave` when\n\t\t\t\t// leaving the drop zone, which means the `relatedTarget`\n\t\t\t\t// (element that has been entered) should be outside the drop\n\t\t\t\t// zone.\n\t\t\t\t// Note: This is not entirely reliable in Safari due to this bug\n\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=66547\n\n\t\t\t\tif ( isElementInZone( event.relatedTarget ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( _onDragLeave ) {\n\t\t\t\t\tonDragLeaveEvent( event );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction onDrop( /** @type {DragEvent} */ event ) {\n\t\t\t\t// Don't handle drop if an inner drop zone already handled it.\n\t\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Prevent the browser default while also signalling to parent\n\t\t\t\t// drop zones that `onDrop` is already handled.\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\t// This seemingly useless line has been shown to resolve a\n\t\t\t\t// Safari issue where files dragged directly from the dock are\n\t\t\t\t// not recognized.\n\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\tevent.dataTransfer && event.dataTransfer.files.length;\n\n\t\t\t\tif ( _onDrop ) {\n\t\t\t\t\tonDropEvent( event );\n\t\t\t\t}\n\n\t\t\t\tmaybeDragEnd( event );\n\t\t\t}\n\n\t\t\tfunction maybeDragEnd( /** @type {MouseEvent} */ event ) {\n\t\t\t\tif ( ! isDragging ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tisDragging = false;\n\n\t\t\t\townerDocument.removeEventListener( 'dragend', maybeDragEnd );\n\t\t\t\townerDocument.removeEventListener( 'mousemove', maybeDragEnd );\n\n\t\t\t\tif ( _onDragEnd ) {\n\t\t\t\t\tonDragEndEvent( event );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telement.setAttribute( 'data-is-drop-zone', 'true' );\n\t\t\telement.addEventListener( 'drop', onDrop );\n\t\t\telement.addEventListener( 'dragenter', onDragEnter );\n\t\t\telement.addEventListener( 'dragover', onDragOver );\n\t\t\telement.addEventListener( 'dragleave', onDragLeave );\n\t\t\t// The `dragstart` event doesn't fire if the drag started outside\n\t\t\t// the document.\n\t\t\townerDocument.addEventListener( 'dragenter', maybeDragStart );\n\n\t\t\treturn () => {\n\t\t\t\telement.removeAttribute( 'data-is-drop-zone' );\n\t\t\t\telement.removeEventListener( 'drop', onDrop );\n\t\t\t\telement.removeEventListener( 'dragenter', onDragEnter );\n\t\t\t\telement.removeEventListener( 'dragover', onDragOver );\n\t\t\t\telement.removeEventListener( 'dragleave', onDragLeave );\n\t\t\t\townerDocument.removeEventListener( 'dragend', maybeDragEnd );\n\t\t\t\townerDocument.removeEventListener( 'mousemove', maybeDragEnd );\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'dragenter',\n\t\t\t\t\tmaybeDragStart\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t\t[ isDisabled, dropZoneElement ] // Refresh when the passed in dropZoneElement changes.\n\t);\n}\n", "/**\n * External dependencies\n */\nimport type { RefCallback } from 'react';\n\n/**\n * Internal dependencies\n */\nimport useRefEffect from '../use-ref-effect';\n\n/**\n * Dispatches a bubbling focus event when the iframe receives focus. Use\n * `onFocus` as usual on the iframe or a parent element.\n *\n * @return Ref to pass to the iframe.\n */\nexport default function useFocusableIframe(): RefCallback< HTMLIFrameElement > {\n\treturn useRefEffect( ( element ) => {\n\t\tconst { ownerDocument } = element;\n\t\tif ( ! ownerDocument ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { defaultView } = ownerDocument;\n\t\tif ( ! defaultView ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Checks whether the iframe is the activeElement, inferring that it has\n\t\t * then received focus, and dispatches a focus event.\n\t\t */\n\t\tfunction checkFocus() {\n\t\t\tif ( ownerDocument && ownerDocument.activeElement === element ) {\n\t\t\t\t( element as HTMLElement ).focus();\n\t\t\t}\n\t\t}\n\n\t\tdefaultView.addEventListener( 'blur', checkFocus );\n\t\treturn () => {\n\t\t\tdefaultView.removeEventListener( 'blur', checkFocus );\n\t\t};\n\t}, [] );\n}\n", "/**\n * WordPress dependencies\n */\nimport { useState, useLayoutEffect } from '@wordpress/element';\nimport { getScrollContainer } from '@wordpress/dom';\nimport { PAGEUP, PAGEDOWN, HOME, END } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { debounce } from '../../utils/debounce';\n\nconst DEFAULT_INIT_WINDOW_SIZE = 30;\n\n/**\n * @typedef {Object} WPFixedWindowList\n *\n * @property {number}                  visibleItems Items visible in the current viewport\n * @property {number}                  start        Start index of the window\n * @property {number}                  end          End index of the window\n * @property {(index:number)=>boolean} itemInView   Returns true if item is in the window\n */\n\n/**\n * @typedef {Object} WPFixedWindowListOptions\n *\n * @property {number}  [windowOverscan] Renders windowOverscan number of items before and after the calculated visible window.\n * @property {boolean} [useWindowing]   When false avoids calculating the window size\n * @property {number}  [initWindowSize] Initial window size to use on first render before we can calculate the window size.\n * @property {any}     [expandedState]  Used to recalculate the window size when the expanded state of a list changes.\n */\n\n/**\n *\n * @param {import('react').RefObject<HTMLElement>} elementRef Used to find the closest scroll container that contains element.\n * @param { number }                               itemHeight Fixed item height in pixels\n * @param { number }                               totalItems Total items in list\n * @param { WPFixedWindowListOptions }             [options]  Options object\n * @return {[ WPFixedWindowList, setFixedListWindow:(nextWindow:WPFixedWindowList)=>void]} Array with the fixed window list and setter\n */\nexport default function useFixedWindowList(\n\telementRef,\n\titemHeight,\n\ttotalItems,\n\toptions\n) {\n\tconst initWindowSize = options?.initWindowSize ?? DEFAULT_INIT_WINDOW_SIZE;\n\tconst useWindowing = options?.useWindowing ?? true;\n\n\tconst [ fixedListWindow, setFixedListWindow ] = useState( {\n\t\tvisibleItems: initWindowSize,\n\t\tstart: 0,\n\t\tend: initWindowSize,\n\t\titemInView: ( /** @type {number} */ index ) => {\n\t\t\treturn index >= 0 && index <= initWindowSize;\n\t\t},\n\t} );\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! useWindowing ) {\n\t\t\treturn;\n\t\t}\n\t\tconst scrollContainer = getScrollContainer( elementRef.current );\n\t\tconst measureWindow = (\n\t\t\t/** @type {boolean | undefined} */ initRender\n\t\t) => {\n\t\t\tif ( ! scrollContainer ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst visibleItems = Math.ceil(\n\t\t\t\tscrollContainer.clientHeight / itemHeight\n\t\t\t);\n\t\t\t// Aim to keep opening list view fast, afterward we can optimize for scrolling.\n\t\t\tconst windowOverscan = initRender\n\t\t\t\t? visibleItems\n\t\t\t\t: options?.windowOverscan ?? visibleItems;\n\t\t\tconst firstViewableIndex = Math.floor(\n\t\t\t\tscrollContainer.scrollTop / itemHeight\n\t\t\t);\n\t\t\tconst start = Math.max( 0, firstViewableIndex - windowOverscan );\n\t\t\tconst end = Math.min(\n\t\t\t\ttotalItems - 1,\n\t\t\t\tfirstViewableIndex + visibleItems + windowOverscan\n\t\t\t);\n\t\t\tsetFixedListWindow( ( lastWindow ) => {\n\t\t\t\tconst nextWindow = {\n\t\t\t\t\tvisibleItems,\n\t\t\t\t\tstart,\n\t\t\t\t\tend,\n\t\t\t\t\titemInView: ( /** @type {number} */ index ) => {\n\t\t\t\t\t\treturn start <= index && index <= end;\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tif (\n\t\t\t\t\tlastWindow.start !== nextWindow.start ||\n\t\t\t\t\tlastWindow.end !== nextWindow.end ||\n\t\t\t\t\tlastWindow.visibleItems !== nextWindow.visibleItems\n\t\t\t\t) {\n\t\t\t\t\treturn nextWindow;\n\t\t\t\t}\n\t\t\t\treturn lastWindow;\n\t\t\t} );\n\t\t};\n\n\t\tmeasureWindow( true );\n\t\tconst debounceMeasureList = debounce( () => {\n\t\t\tmeasureWindow();\n\t\t}, 16 );\n\t\tscrollContainer?.addEventListener( 'scroll', debounceMeasureList );\n\t\tscrollContainer?.ownerDocument?.defaultView?.addEventListener(\n\t\t\t'resize',\n\t\t\tdebounceMeasureList\n\t\t);\n\t\tscrollContainer?.ownerDocument?.defaultView?.addEventListener(\n\t\t\t'resize',\n\t\t\tdebounceMeasureList\n\t\t);\n\n\t\treturn () => {\n\t\t\tscrollContainer?.removeEventListener(\n\t\t\t\t'scroll',\n\t\t\t\tdebounceMeasureList\n\t\t\t);\n\t\t\tscrollContainer?.ownerDocument?.defaultView?.removeEventListener(\n\t\t\t\t'resize',\n\t\t\t\tdebounceMeasureList\n\t\t\t);\n\t\t};\n\t}, [\n\t\titemHeight,\n\t\telementRef,\n\t\ttotalItems,\n\t\toptions?.expandedState,\n\t\toptions?.windowOverscan,\n\t\tuseWindowing,\n\t] );\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! useWindowing ) {\n\t\t\treturn;\n\t\t}\n\t\tconst scrollContainer = getScrollContainer( elementRef.current );\n\t\tconst handleKeyDown = ( /** @type {KeyboardEvent} */ event ) => {\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\tcase HOME: {\n\t\t\t\t\treturn scrollContainer?.scrollTo( { top: 0 } );\n\t\t\t\t}\n\t\t\t\tcase END: {\n\t\t\t\t\treturn scrollContainer?.scrollTo( {\n\t\t\t\t\t\ttop: totalItems * itemHeight,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tcase PAGEUP: {\n\t\t\t\t\treturn scrollContainer?.scrollTo( {\n\t\t\t\t\t\ttop:\n\t\t\t\t\t\t\tscrollContainer.scrollTop -\n\t\t\t\t\t\t\tfixedListWindow.visibleItems * itemHeight,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tcase PAGEDOWN: {\n\t\t\t\t\treturn scrollContainer?.scrollTo( {\n\t\t\t\t\t\ttop:\n\t\t\t\t\t\t\tscrollContainer.scrollTop +\n\t\t\t\t\t\t\tfixedListWindow.visibleItems * itemHeight,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tscrollContainer?.ownerDocument?.defaultView?.addEventListener(\n\t\t\t'keydown',\n\t\t\thandleKeyDown\n\t\t);\n\t\treturn () => {\n\t\t\tscrollContainer?.ownerDocument?.defaultView?.removeEventListener(\n\t\t\t\t'keydown',\n\t\t\t\thandleKeyDown\n\t\t\t);\n\t\t};\n\t}, [\n\t\ttotalItems,\n\t\titemHeight,\n\t\telementRef,\n\t\tfixedListWindow.visibleItems,\n\t\tuseWindowing,\n\t\toptions?.expandedState,\n\t] );\n\n\treturn [ fixedListWindow, setFixedListWindow ];\n}\n", "/**\n * WordPress dependencies\n */\nimport { useMemo, useSyncExternalStore } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport type { ObservableMap } from '../../utils/observable-map';\n\n/**\n * React hook that lets you observe an entry in an `ObservableMap`. The hook returns the\n * current value corresponding to the key, or `undefined` when there is no value stored.\n * It also observes changes to the value and triggers an update of the calling component\n * in case the value changes.\n *\n * @template K    The type of the keys in the map.\n * @template V    The type of the values in the map.\n * @param    map  The `ObservableMap` to observe.\n * @param    name The map key to observe.\n * @return   The value corresponding to the map key requested.\n */\nexport default function useObservableValue< K, V >(\n\tmap: ObservableMap< K, V >,\n\tname: K\n): V | undefined {\n\tconst [ subscribe, getValue ] = useMemo(\n\t\t() => [\n\t\t\t( listener: () => void ) => map.subscribe( name, listener ),\n\t\t\t() => map.get( name ),\n\t\t],\n\t\t[ map, name ]\n\t);\n\treturn useSyncExternalStore( subscribe, getValue, getValue );\n}\n", "export type ObservableMap< K, V > = {\n\tget: ( name: K ) => V | undefined;\n\tset: ( name: K, value: V ) => void;\n\tdelete: ( name: K ) => void;\n\tsubscribe: ( name: K, listener: () => void ) => () => void;\n};\n\n/**\n * A constructor (factory) for `ObservableMap`, a map-like key/value data structure\n * where the individual entries are observable: using the `subscribe` method, you can\n * subscribe to updates for a particular keys. Each subscriber always observes one\n * specific key and is not notified about any unrelated changes (for different keys)\n * in the `ObservableMap`.\n *\n * @template K The type of the keys in the map.\n * @template V The type of the values in the map.\n * @return   A new instance of the `ObservableMap` type.\n */\nexport function observableMap< K, V >(): ObservableMap< K, V > {\n\tconst map = new Map< K, V >();\n\tconst listeners = new Map< K, Set< () => void > >();\n\n\tfunction callListeners( name: K ) {\n\t\tconst list = listeners.get( name );\n\t\tif ( ! list ) {\n\t\t\treturn;\n\t\t}\n\t\tfor ( const listener of list ) {\n\t\t\tlistener();\n\t\t}\n\t}\n\n\treturn {\n\t\tget( name ) {\n\t\t\treturn map.get( name );\n\t\t},\n\t\tset( name, value ) {\n\t\t\tmap.set( name, value );\n\t\t\tcallListeners( name );\n\t\t},\n\t\tdelete( name ) {\n\t\t\tmap.delete( name );\n\t\t\tcallListeners( name );\n\t\t},\n\t\tsubscribe( name, listener ) {\n\t\t\tlet list = listeners.get( name );\n\t\t\tif ( ! list ) {\n\t\t\t\tlist = new Set();\n\t\t\t\tlisteners.set( name, list );\n\t\t\t}\n\t\t\tlist.add( listener );\n\n\t\t\treturn () => {\n\t\t\t\tlist.delete( listener );\n\t\t\t\tif ( list.size === 0 ) {\n\t\t\t\t\tlisteners.delete( name );\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t};\n}\n", "/**\n * External dependencies\n */\nimport type { ComponentType, ComponentClass } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport isShallowEqual from '@wordpress/is-shallow-equal';\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { createHigherOrderComponent } from '../../utils/create-higher-order-component';\n\n/**\n * Given a component returns the enhanced component augmented with a component\n * only re-rendering when its props/state change\n *\n * @deprecated Use `memo` or `PureComponent` instead.\n */\nconst pure = createHigherOrderComponent( function < Props extends {} >(\n\tWrappedComponent: ComponentType< Props >\n): ComponentType< Props > {\n\tif ( WrappedComponent.prototype instanceof Component ) {\n\t\treturn class extends ( WrappedComponent as ComponentClass< Props > ) {\n\t\t\tshouldComponentUpdate( nextProps: Props, nextState: any ) {\n\t\t\t\treturn (\n\t\t\t\t\t! isShallowEqual( nextProps, this.props ) ||\n\t\t\t\t\t! isShallowEqual( nextState, this.state )\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t}\n\n\treturn class extends Component< Props > {\n\t\tshouldComponentUpdate( nextProps: Props ) {\n\t\t\treturn ! isShallowEqual( nextProps, this.props );\n\t\t}\n\n\t\trender() {\n\t\t\treturn <WrappedComponent { ...this.props } />;\n\t\t}\n\t};\n}, 'pure' );\n\nexport default pure;\n", "/**\n * Class responsible for orchestrating event handling on the global window,\n * binding a single event to be shared across all handling instances, and\n * removing the handler when no instances are listening for the event.\n */\nclass Listener {\n\tconstructor() {\n\t\t/** @type {any} */\n\t\tthis.listeners = {};\n\n\t\tthis.handleEvent = this.handleEvent.bind( this );\n\t}\n\n\tadd( /** @type {any} */ eventType, /** @type {any} */ instance ) {\n\t\tif ( ! this.listeners[ eventType ] ) {\n\t\t\t// Adding first listener for this type, so bind event.\n\t\t\twindow.addEventListener( eventType, this.handleEvent );\n\t\t\tthis.listeners[ eventType ] = [];\n\t\t}\n\n\t\tthis.listeners[ eventType ].push( instance );\n\t}\n\n\tremove( /** @type {any} */ eventType, /** @type {any} */ instance ) {\n\t\tif ( ! this.listeners[ eventType ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.listeners[ eventType ] = this.listeners[ eventType ].filter(\n\t\t\t( /** @type {any} */ listener ) => listener !== instance\n\t\t);\n\n\t\tif ( ! this.listeners[ eventType ].length ) {\n\t\t\t// Removing last listener for this type, so unbind event.\n\t\t\twindow.removeEventListener( eventType, this.handleEvent );\n\t\t\tdelete this.listeners[ eventType ];\n\t\t}\n\t}\n\n\thandleEvent( /** @type {any} */ event ) {\n\t\tthis.listeners[ event.type ]?.forEach(\n\t\t\t( /** @type {any} */ instance ) => {\n\t\t\t\tinstance.handleEvent( event );\n\t\t\t}\n\t\t);\n\t}\n}\n\nexport default Listener;\n", "/**\n * WordPress dependencies\n */\nimport { Component, forwardRef } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { createHigherOrderComponent } from '../../utils/create-higher-order-component';\nimport Listener from './listener';\n\n/**\n * Listener instance responsible for managing document event handling.\n */\nconst listener = new Listener();\n\n/* eslint-disable jsdoc/no-undefined-types */\n/**\n * Higher-order component creator which, given an object of DOM event types and\n * values corresponding to a callback function name on the component, will\n * create or update a window event handler to invoke the callback when an event\n * occurs. On behalf of the consuming developer, the higher-order component\n * manages unbinding when the component unmounts, and binding at most a single\n * event handler for the entire application.\n *\n * @deprecated\n *\n * @param {Record<keyof GlobalEventHandlersEventMap, string>} eventTypesToHandlers Object with keys of DOM\n *                                                                                 event type, the value a\n *                                                                                 name of the function on\n *                                                                                 the original component's\n *                                                                                 instance which handles\n *                                                                                 the event.\n *\n * @return {any} Higher-order component.\n */\nexport default function withGlobalEvents( eventTypesToHandlers ) {\n\tdeprecated( 'wp.compose.withGlobalEvents', {\n\t\tsince: '5.7',\n\t\talternative: 'useEffect',\n\t} );\n\n\t// @ts-ignore We don't need to fix the type-related issues because this is deprecated.\n\treturn createHigherOrderComponent( ( WrappedComponent ) => {\n\t\tclass Wrapper extends Component {\n\t\t\tconstructor( /** @type {any} */ props ) {\n\t\t\t\tsuper( props );\n\n\t\t\t\tthis.handleEvent = this.handleEvent.bind( this );\n\t\t\t\tthis.handleRef = this.handleRef.bind( this );\n\t\t\t}\n\n\t\t\tcomponentDidMount() {\n\t\t\t\tObject.keys( eventTypesToHandlers ).forEach( ( eventType ) => {\n\t\t\t\t\tlistener.add( eventType, this );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tcomponentWillUnmount() {\n\t\t\t\tObject.keys( eventTypesToHandlers ).forEach( ( eventType ) => {\n\t\t\t\t\tlistener.remove( eventType, this );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thandleEvent( /** @type {any} */ event ) {\n\t\t\t\tconst handler =\n\t\t\t\t\teventTypesToHandlers[\n\t\t\t\t\t\t/** @type {keyof GlobalEventHandlersEventMap} */ (\n\t\t\t\t\t\t\tevent.type\n\t\t\t\t\t\t)\n\t\t\t\t\t\t/* eslint-enable jsdoc/no-undefined-types */\n\t\t\t\t\t];\n\t\t\t\tif ( typeof this.wrappedRef[ handler ] === 'function' ) {\n\t\t\t\t\tthis.wrappedRef[ handler ]( event );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thandleRef( /** @type {any} */ el ) {\n\t\t\t\tthis.wrappedRef = el;\n\t\t\t\t// Any component using `withGlobalEvents` that is not setting a `ref`\n\t\t\t\t// will cause `this.props.forwardedRef` to be `null`, so we need this\n\t\t\t\t// check.\n\t\t\t\tif ( this.props.forwardedRef ) {\n\t\t\t\t\tthis.props.forwardedRef( el );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\treturn (\n\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t{ ...this.props.ownProps }\n\t\t\t\t\t\tref={ this.handleRef }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn forwardRef( ( props, ref ) => {\n\t\t\treturn <Wrapper ownProps={ props } forwardedRef={ ref } />;\n\t\t} );\n\t}, 'withGlobalEvents' );\n}\n", "/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { createHigherOrderComponent } from '../../utils/create-higher-order-component';\n\n/**\n * A Higher Order Component used to provide and manage internal component state\n * via props.\n *\n * @deprecated Use `useState` instead.\n *\n * @param {any} initialState Optional initial state of the component.\n *\n * @return {any} A higher order component wrapper accepting a component that takes the state props + its own props + `setState` and returning a component that only accepts the own props.\n */\nexport default function withState( initialState = {} ) {\n\tdeprecated( 'wp.compose.withState', {\n\t\tsince: '5.8',\n\t\talternative: 'wp.element.useState',\n\t} );\n\n\treturn createHigherOrderComponent( ( OriginalComponent ) => {\n\t\treturn class WrappedComponent extends Component {\n\t\t\tconstructor( /** @type {any} */ props ) {\n\t\t\t\tsuper( props );\n\n\t\t\t\tthis.setState = this.setState.bind( this );\n\n\t\t\t\tthis.state = initialState;\n\t\t\t}\n\n\t\t\trender() {\n\t\t\t\treturn (\n\t\t\t\t\t<OriginalComponent\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\t{ ...this.state }\n\t\t\t\t\t\tsetState={ this.setState }\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t}, 'withState' );\n}\n", "/**\n * External dependencies\n */\nimport Clipboard from 'clipboard';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/* eslint-disable jsdoc/no-undefined-types */\n/**\n * Copies the text to the clipboard when the element is clicked.\n *\n * @deprecated\n *\n * @param {import('react').RefObject<string | Element | NodeListOf<Element>>} ref       Reference with the element.\n * @param {string|Function}                                                   text      The text to copy.\n * @param {number}                                                            [timeout] Optional timeout to reset the returned\n *                                                                                      state. 4 seconds by default.\n *\n * @return {boolean} Whether or not the text has been copied. Resets after the\n *                   timeout.\n */\nexport default function useCopyOnClick( ref, text, timeout = 4000 ) {\n\t/* eslint-enable jsdoc/no-undefined-types */\n\tdeprecated( 'wp.compose.useCopyOnClick', {\n\t\tsince: '5.8',\n\t\talternative: 'wp.compose.useCopyToClipboard',\n\t} );\n\n\t/** @type {import('react').MutableRefObject<Clipboard | undefined>} */\n\tconst clipboardRef = useRef();\n\tconst [ hasCopied, setHasCopied ] = useState( false );\n\n\tuseEffect( () => {\n\t\t/** @type {number | undefined} */\n\t\tlet timeoutId;\n\n\t\tif ( ! ref.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Clipboard listens to click events.\n\t\tclipboardRef.current = new Clipboard( ref.current, {\n\t\t\ttext: () => ( typeof text === 'function' ? text() : text ),\n\t\t} );\n\n\t\tclipboardRef.current.on( 'success', ( { clearSelection, trigger } ) => {\n\t\t\t// Clearing selection will move focus back to the triggering button,\n\t\t\t// ensuring that it is not reset to the body, and further that it is\n\t\t\t// kept within the rendered node.\n\t\t\tclearSelection();\n\n\t\t\t// Handle ClipboardJS focus bug, see https://github.com/zenorocha/clipboard.js/issues/680\n\t\t\tif ( trigger ) {\n\t\t\t\t/** @type {HTMLElement} */ ( trigger ).focus();\n\t\t\t}\n\n\t\t\tif ( timeout ) {\n\t\t\t\tsetHasCopied( true );\n\t\t\t\tclearTimeout( timeoutId );\n\t\t\t\ttimeoutId = setTimeout( () => setHasCopied( false ), timeout );\n\t\t\t}\n\t\t} );\n\n\t\treturn () => {\n\t\t\tif ( clipboardRef.current ) {\n\t\t\t\tclipboardRef.current.destroy();\n\t\t\t}\n\t\t\tclearTimeout( timeoutId );\n\t\t};\n\t}, [ text, timeout, setHasCopied ] );\n\n\treturn hasCopied;\n}\n", "/**\n * External dependencies\n */\nimport 'requestidlecallback';\n\n/**\n * Internal dependencies\n */\nimport type { RequestIdleCallbackCallback } from './types';\n\n/**\n * @return A function that schedules a callback when the browser is idle or via setTimeout on the server.\n */\nexport function createRequestIdleCallback() {\n\tif ( typeof window === 'undefined' ) {\n\t\treturn ( callback: RequestIdleCallbackCallback ) => {\n\t\t\tsetTimeout( () => callback( Date.now() ), 0 );\n\t\t};\n\t}\n\n\treturn window.requestIdleCallback;\n}\n\nexport default createRequestIdleCallback();\n", "/**\n * Internal dependencies\n */\nimport requestIdleCallback from './request-idle-callback';\n\n/**\n * Enqueued callback to invoke once idle time permits.\n */\nexport type WPPriorityQueueCallback = VoidFunction;\n\n/**\n * An object used to associate callbacks in a particular context grouping.\n */\nexport type WPPriorityQueueContext = object;\n\n/**\n * Interface for the priority queue instance.\n */\nexport interface WPPriorityQueue {\n\t/**\n\t * Add a callback to the queue for a given context.\n\t */\n\tadd: (\n\t\telement: WPPriorityQueueContext,\n\t\titem: WPPriorityQueueCallback\n\t) => void;\n\n\t/**\n\t * Flush and run the callback for a given context immediately.\n\t * @return true if a callback was run, false otherwise.\n\t */\n\tflush: ( element: WPPriorityQueueContext ) => boolean;\n\n\t/**\n\t * Cancel (remove) the callback for a given context without running it.\n\t * @return true if a callback was cancelled, false otherwise.\n\t */\n\tcancel: ( element: WPPriorityQueueContext ) => boolean;\n\n\t/**\n\t * Reset the entire queue, clearing pending callbacks.\n\t */\n\treset: VoidFunction;\n}\n\n/**\n * Creates a context-aware queue that only executes\n * the last task of a given context.\n *\n * @example\n *```js\n * import { createQueue } from '@wordpress/priority-queue';\n *\n * const queue = createQueue();\n *\n * // Context objects.\n * const ctx1 = {};\n * const ctx2 = {};\n *\n * // For a given context in the queue, only the last callback is executed.\n * queue.add( ctx1, () => console.log( 'This will be printed first' ) );\n * queue.add( ctx2, () => console.log( 'This won\\'t be printed' ) );\n * queue.add( ctx2, () => console.log( 'This will be printed second' ) );\n *```\n *\n * @return {WPPriorityQueue} Queue object with `add`, `flush` and `reset` methods.\n */\nexport const createQueue = (): WPPriorityQueue => {\n\tconst waitingList = new Map<\n\t\tWPPriorityQueueContext,\n\t\tWPPriorityQueueCallback\n\t>();\n\tlet isRunning = false;\n\n\t/**\n\t * Callback to process as much queue as time permits.\n\t *\n\t * Map Iteration follows the original insertion order. This means that here\n\t * we can iterate the queue and know that the first contexts which were\n\t * added will be run first. On the other hand, if anyone adds a new callback\n\t * for an existing context it will supplant the previously-set callback for\n\t * that context because we reassigned that map key's value.\n\t *\n\t * In the case that a callback adds a new callback to its own context then\n\t * the callback it adds will appear at the end of the iteration and will be\n\t * run only after all other existing contexts have finished executing.\n\t *\n\t * @param {IdleDeadline|number} deadline Idle callback deadline object, or\n\t *                                       animation frame timestamp.\n\t */\n\tconst runWaitingList = ( deadline: IdleDeadline | number ): void => {\n\t\tfor ( const [ nextElement, callback ] of waitingList ) {\n\t\t\twaitingList.delete( nextElement );\n\t\t\tcallback();\n\n\t\t\tif (\n\t\t\t\t'number' === typeof deadline ||\n\t\t\t\tdeadline.timeRemaining() <= 0\n\t\t\t) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif ( waitingList.size === 0 ) {\n\t\t\tisRunning = false;\n\t\t\treturn;\n\t\t}\n\n\t\trequestIdleCallback( runWaitingList );\n\t};\n\n\t/**\n\t * Add a callback to the queue for a given context.\n\t *\n\t * If errors with undefined callbacks are encountered double check that\n\t * all of your useSelect calls have the right dependencies set correctly\n\t * in their second parameter. Missing dependencies can cause unexpected\n\t * loops and race conditions in the queue.\n\t *\n\t * @param {WPPriorityQueueContext}  element Context object.\n\t * @param {WPPriorityQueueCallback} item    Callback function.\n\t */\n\tconst add: WPPriorityQueue[ 'add' ] = (\n\t\telement: WPPriorityQueueContext,\n\t\titem: WPPriorityQueueCallback\n\t) => {\n\t\twaitingList.set( element, item );\n\t\tif ( ! isRunning ) {\n\t\t\tisRunning = true;\n\t\t\trequestIdleCallback( runWaitingList );\n\t\t}\n\t};\n\n\t/**\n\t * Flushes queue for a given context, returning true if the flush was\n\t * performed, or false if there is no queue for the given context.\n\t *\n\t * @param {WPPriorityQueueContext} element Context object.\n\t *\n\t * @return {boolean} Whether flush was performed.\n\t */\n\tconst flush: WPPriorityQueue[ 'flush' ] = (\n\t\telement: WPPriorityQueueContext\n\t) => {\n\t\tconst callback = waitingList.get( element );\n\t\tif ( undefined === callback ) {\n\t\t\treturn false;\n\t\t}\n\n\t\twaitingList.delete( element );\n\t\tcallback();\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * Clears the queue for a given context, cancelling the callbacks without\n\t * executing them. Returns `true` if there were scheduled callbacks to cancel,\n\t * or `false` if there was is no queue for the given context.\n\t *\n\t * @param {WPPriorityQueueContext} element Context object.\n\t *\n\t * @return {boolean} Whether any callbacks got cancelled.\n\t */\n\tconst cancel: WPPriorityQueue[ 'cancel' ] = (\n\t\telement: WPPriorityQueueContext\n\t) => {\n\t\treturn waitingList.delete( element );\n\t};\n\n\t/**\n\t * Reset the queue without running the pending callbacks.\n\t */\n\tconst reset: WPPriorityQueue[ 'reset' ] = () => {\n\t\twaitingList.clear();\n\t\tisRunning = false;\n\t};\n\n\treturn {\n\t\tadd,\n\t\tflush,\n\t\tcancel,\n\t\treset,\n\t};\n};\n", "/**\n * WordPress dependencies\n */\nimport { flushSync, useEffect, useState } from '@wordpress/element';\nimport { createQueue } from '@wordpress/priority-queue';\n\ntype AsyncListConfig = {\n\tstep: number;\n};\n\n/**\n * Returns the first items from list that are present on state.\n *\n * @param list  New array.\n * @param state Current state.\n * @return First items present in state.\n */\nfunction getFirstItemsPresentInState< T >( list: T[], state: T[] ): T[] {\n\tconst firstItems = [];\n\n\tfor ( let i = 0; i < list.length; i++ ) {\n\t\tconst item = list[ i ];\n\t\tif ( ! state.includes( item ) ) {\n\t\t\tbreak;\n\t\t}\n\n\t\tfirstItems.push( item );\n\t}\n\n\treturn firstItems;\n}\n\n/**\n * React hook returns an array which items get asynchronously appended from a source array.\n * This behavior is useful if we want to render a list of items asynchronously for performance reasons.\n *\n * @param list   Source array.\n * @param config Configuration object.\n *\n * @return Async array.\n */\nfunction useAsyncList< T >(\n\tlist: T[],\n\tconfig: AsyncListConfig = { step: 1 }\n): T[] {\n\tconst { step = 1 } = config;\n\tconst [ current, setCurrent ] = useState< T[] >( [] );\n\n\tuseEffect( () => {\n\t\t// On reset, we keep the first items that were previously rendered.\n\t\tlet firstItems = getFirstItemsPresentInState( list, current );\n\t\tif ( firstItems.length < step ) {\n\t\t\tfirstItems = firstItems.concat(\n\t\t\t\tlist.slice( firstItems.length, step )\n\t\t\t);\n\t\t}\n\t\tsetCurrent( firstItems );\n\n\t\tconst asyncQueue = createQueue();\n\t\tfor ( let i = firstItems.length; i < list.length; i += step ) {\n\t\t\tasyncQueue.add( {}, () => {\n\t\t\t\tflushSync( () => {\n\t\t\t\t\tsetCurrent( ( state ) => [\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\t...list.slice( i, i + step ),\n\t\t\t\t\t] );\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\treturn () => asyncQueue.reset();\n\t}, [ list ] );\n\n\treturn current;\n}\n\nexport default useAsyncList;\n", "/**\n * WordPress dependencies\n */\nimport { useEffect, useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport useDebounce from '../use-debounce';\n\n/**\n * Helper hook for input fields that need to debounce the value before using it.\n *\n * @param defaultValue The default value to use.\n * @return The input value, the setter and the debounced input value.\n */\nexport default function useDebouncedInput(\n\tdefaultValue = ''\n): [ string, ( value: string ) => void, string ] {\n\tconst [ input, setInput ] = useState< string >( defaultValue );\n\tconst [ debouncedInput, setDebouncedState ] = useState( defaultValue );\n\n\tconst setDebouncedInput = useDebounce( setDebouncedState, 250 );\n\n\tuseEffect( () => {\n\t\tsetDebouncedInput( input );\n\t}, [ input, setDebouncedInput ] );\n\n\treturn [ input, setInput, debouncedInput ];\n}\n", "/**\n * External dependencies\n */\nimport { useMemoOne } from 'use-memo-one';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { throttle } from '../../utils/throttle';\n\n/**\n * Throttles a function similar to Lodash's `throttle`. A new throttled function will\n * be returned and any scheduled calls cancelled if any of the arguments change,\n * including the function to throttle, so please wrap functions created on\n * render in components in `useCallback`.\n *\n * @see https://lodash.com/docs/4#throttle\n *\n * @template {(...args: any[]) => void} TFunc\n *\n * @param {TFunc}                                          fn        The function to throttle.\n * @param {number}                                         [wait]    The number of milliseconds to throttle invocations to.\n * @param {import('../../utils/throttle').ThrottleOptions} [options] The options object. See linked documentation for details.\n * @return {import('../../utils/debounce').DebouncedFunc<TFunc>} Throttled function.\n */\nexport default function useThrottle( fn, wait, options ) {\n\tconst throttled = useMemoOne(\n\t\t() => throttle( fn, wait ?? 0, options ),\n\t\t[ fn, wait, options ]\n\t);\n\tuseEffect( () => () => throttled.cancel(), [ throttled ] );\n\treturn throttled;\n}\n", "var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n", "export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n", "var o=function(o){var t=o/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},t=function(t){return.2126*o(t.r)+.7152*o(t.g)+.0722*o(t.b)};export default function(o){o.prototype.luminance=function(){return o=t(this.rgba),void 0===(r=2)&&(r=0),void 0===n&&(n=Math.pow(10,r)),Math.round(n*o)/n+0;var o,r,n},o.prototype.contrast=function(r){void 0===r&&(r=\"#FFF\");var n,a,i,e,v,u,d,c=r instanceof o?r:new o(r);return e=this.rgba,v=c.toRgb(),u=t(e),d=t(v),n=u>d?(u+.05)/(d+.05):(d+.05)/(u+.05),void 0===(a=2)&&(a=0),void 0===i&&(i=Math.pow(10,a)),Math.floor(i*n)/i+0},o.prototype.isReadable=function(o,t){return void 0===o&&(o=\"#FFF\"),void 0===t&&(t={}),this.contrast(o)>=(e=void 0===(i=(r=t).size)?\"normal\":i,\"AAA\"===(a=void 0===(n=r.level)?\"AA\":n)&&\"normal\"===e?7:\"AA\"===a&&\"large\"===e?3:4.5);var r,n,a,i,e}}\n", "/**\n * Object replacement character, used as a placeholder for objects.\n */\nexport const OBJECT_REPLACEMENT_CHARACTER = '\\ufffc';\n\n/**\n * Zero width non-breaking space, used as padding in the editable DOM tree when\n * it is empty otherwise.\n */\nexport const ZWNBSP = '\\ufeff';\n", "/**\n * Internal dependencies\n */\nimport { OBJECT_REPLACEMENT_CHARACTER } from './special-characters';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Get the textual content of a Rich Text value. This is similar to\n * `Element.textContent`.\n *\n * @param {RichTextValue} value Value to use.\n *\n * @return {string} The text content.\n */\nexport function getTextContent( { text } ) {\n\treturn text.replace( OBJECT_REPLACEMENT_CHARACTER, '' );\n}\n", "/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nexport function formatProdErrorMessage(code: number) {\n  return `Minified Redux error #${code}; visit https://redux.js.org/Errors?code=${code} for the full message or ` + 'use the non-minified dev environment for full errors. ';\n}", "declare global {\n  interface SymbolConstructor {\n    readonly observable: symbol;\n  }\n}\nconst $$observable = /* #__PURE__ */(() => typeof Symbol === 'function' && Symbol.observable || '@@observable')();\nexport default $$observable;", "/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\n\nconst randomString = () => Math.random().toString(36).substring(7).split('').join('.');\nconst ActionTypes = {\n  INIT: `@@redux/INIT${/* #__PURE__ */randomString()}`,\n  REPLACE: `@@redux/REPLACE${/* #__PURE__ */randomString()}`,\n  PROBE_UNKNOWN_ACTION: () => `@@redux/PROBE_UNKNOWN_ACTION${randomString()}`\n};\nexport default ActionTypes;", "/**\n * @param obj The object to inspect.\n * @returns True if the argument appears to be a plain object.\n */\nexport default function isPlainObject(obj: any): obj is object {\n  if (typeof obj !== 'object' || obj === null) return false;\n  let proto = obj;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(obj) === proto || Object.getPrototypeOf(obj) === null;\n}", "// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nexport function miniKindOf(val: any): string {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  const type = typeof val;\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  const constructorName = ctorName(val);\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  }\n\n  // other\n  return Object.prototype.toString.call(val).slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\nfunction ctorName(val: any): string | null {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\nfunction isError(val: any) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\nfunction isDate(val: any) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\nexport function kindOf(val: any) {\n  let typeOfVal: string = typeof val;\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n  return typeOfVal;\n}", "import { formatProdErrorMessage as _formatProdErrorMessage13 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage12 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage11 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage10 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage9 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage8 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage7 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage6 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage5 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage4 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage3 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage2 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage } from \"src/utils/formatProdErrorMessage\";\nimport $$observable from './utils/symbol-observable';\nimport { Store, StoreEnhancer, Dispatch, Observer, ListenerCallback, UnknownIfNonSpecific } from './types/store';\nimport { Action } from './types/actions';\nimport { Reducer } from './types/reducers';\nimport ActionTypes from './utils/actionTypes';\nimport isPlainObject from './utils/isPlainObject';\nimport { kindOf } from './utils/kindOf';\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\nexport function createStore<S, A extends Action, Ext extends {} = {}, StateExt extends {} = {}>(reducer: Reducer<S, A>, enhancer?: StoreEnhancer<Ext, StateExt>): Store<S, A, UnknownIfNonSpecific<StateExt>> & Ext;\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\nexport function createStore<S, A extends Action, Ext extends {} = {}, StateExt extends {} = {}, PreloadedState = S>(reducer: Reducer<S, A, PreloadedState>, preloadedState?: PreloadedState | undefined, enhancer?: StoreEnhancer<Ext, StateExt>): Store<S, A, UnknownIfNonSpecific<StateExt>> & Ext;\nexport function createStore<S, A extends Action, Ext extends {} = {}, StateExt extends {} = {}, PreloadedState = S>(reducer: Reducer<S, A, PreloadedState>, preloadedState?: PreloadedState | StoreEnhancer<Ext, StateExt> | undefined, enhancer?: StoreEnhancer<Ext, StateExt>): Store<S, A, UnknownIfNonSpecific<StateExt>> & Ext {\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(2) : `Expected the root reducer to be a function. Instead, received: '${kindOf(reducer)}'`);\n  }\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage2(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = (preloadedState as StoreEnhancer<Ext, StateExt>);\n    preloadedState = undefined;\n  }\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage3(1) : `Expected the enhancer to be a function. Instead, received: '${kindOf(enhancer)}'`);\n    }\n    return enhancer(createStore)(reducer, (preloadedState as PreloadedState | undefined));\n  }\n  let currentReducer = reducer;\n  let currentState: S | PreloadedState | undefined = (preloadedState as PreloadedState | undefined);\n  let currentListeners: Map<number, ListenerCallback> | null = new Map();\n  let nextListeners = currentListeners;\n  let listenerIdCounter = 0;\n  let isDispatching = false;\n\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = new Map();\n      currentListeners.forEach((listener, key) => {\n        nextListeners.set(key, listener);\n      });\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns The current state tree of your application.\n   */\n  function getState(): S {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage4(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n    return (currentState as S);\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param listener A callback to be invoked on every dispatch.\n   * @returns A function to remove this change listener.\n   */\n  function subscribe(listener: () => void) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage5(4) : `Expected the listener to be a function. Instead, received: '${kindOf(listener)}'`);\n    }\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage6(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n    let isSubscribed = true;\n    ensureCanMutateNextListeners();\n    const listenerId = listenerIdCounter++;\n    nextListeners.set(listenerId, listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage7(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      nextListeners.delete(listenerId);\n      currentListeners = null;\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action: A) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage8(7) : `Actions must be plain objects. Instead, the actual type was: '${kindOf(action)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);\n    }\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage9(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n    if (typeof action.type !== 'string') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage10(17) : `Action \"type\" property must be a string. Instead, the actual type was: '${kindOf(action.type)}'. Value was: '${action.type}' (stringified)`);\n    }\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage11(9) : 'Reducers may not dispatch actions.');\n    }\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n    const listeners = currentListeners = nextListeners;\n    listeners.forEach(listener => {\n      listener();\n    });\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param nextReducer The reducer for the store to use instead.\n   */\n  function replaceReducer(nextReducer: Reducer<S, A>): void {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage12(10) : `Expected the nextReducer to be a function. Instead, received: '${kindOf(nextReducer)}`);\n    }\n    currentReducer = ((nextReducer as unknown) as Reducer<S, A, PreloadedState>);\n\n    // This action has a similar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n    dispatch(({\n      type: ActionTypes.REPLACE\n    } as A));\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    const outerSubscribe = subscribe;\n    return {\n      /**\n       * The minimal observable subscription method.\n       * @param observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe(observer: unknown) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage13(11) : `Expected the observer to be an object. Instead, received: '${kindOf(observer)}'`);\n        }\n        function observeState() {\n          const observerAsObserver = (observer as Observer<S>);\n          if (observerAsObserver.next) {\n            observerAsObserver.next(getState());\n          }\n        }\n        observeState();\n        const unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe\n        };\n      },\n      [$$observable]() {\n        return this;\n      }\n    };\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch(({\n    type: ActionTypes.INIT\n  } as A));\n  const store = (({\n    dispatch: (dispatch as Dispatch<A>),\n    subscribe,\n    getState,\n    replaceReducer,\n    [$$observable]: observable\n  } as unknown) as Store<S, A, StateExt> & Ext);\n  return store;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nexport function legacy_createStore<S, A extends Action, Ext extends {} = {}, StateExt extends {} = {}>(reducer: Reducer<S, A>, enhancer?: StoreEnhancer<Ext, StateExt>): Store<S, A, UnknownIfNonSpecific<StateExt>> & Ext;\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nexport function legacy_createStore<S, A extends Action, Ext extends {} = {}, StateExt extends {} = {}, PreloadedState = S>(reducer: Reducer<S, A, PreloadedState>, preloadedState?: PreloadedState | undefined, enhancer?: StoreEnhancer<Ext, StateExt>): Store<S, A, UnknownIfNonSpecific<StateExt>> & Ext;\nexport function legacy_createStore<S, A extends Action, Ext extends {} = {}, StateExt extends {} = {}, PreloadedState = S>(reducer: Reducer<S, A>, preloadedState?: PreloadedState | StoreEnhancer<Ext, StateExt> | undefined, enhancer?: StoreEnhancer<Ext, StateExt>): Store<S, A, UnknownIfNonSpecific<StateExt>> & Ext {\n  return createStore(reducer, (preloadedState as any), enhancer);\n}", "/**\n * Prints a warning in the console if it exists.\n *\n * @param message The warning message.\n */\nexport default function warning(message: string): void {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n}", "import { formatProdErrorMessage as _formatProdErrorMessage3 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage2 } from \"src/utils/formatProdErrorMessage\";\nimport { formatProdErrorMessage as _formatProdErrorMessage } from \"src/utils/formatProdErrorMessage\";\nimport { Action } from './types/actions';\nimport { ActionFromReducersMapObject, PreloadedStateShapeFromReducersMapObject, Reducer, StateFromReducersMapObject } from './types/reducers';\nimport ActionTypes from './utils/actionTypes';\nimport isPlainObject from './utils/isPlainObject';\nimport warning from './utils/warning';\nimport { kindOf } from './utils/kindOf';\nfunction getUnexpectedStateShapeWarningMessage(inputState: object, reducers: {\n  [key: string]: Reducer<any, any, any>;\n}, action: Action, unexpectedKeyCache: {\n  [key: string]: true;\n}) {\n  const reducerKeys = Object.keys(reducers);\n  const argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n  if (!isPlainObject(inputState)) {\n    return `The ${argumentName} has unexpected type of \"${kindOf(inputState)}\". Expected argument to be an object with the following ` + `keys: \"${reducerKeys.join('\", \"')}\"`;\n  }\n  const unexpectedKeys = Object.keys(inputState).filter(key => !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key]);\n  unexpectedKeys.forEach(key => {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n  if (unexpectedKeys.length > 0) {\n    return `Unexpected ${unexpectedKeys.length > 1 ? 'keys' : 'key'} ` + `\"${unexpectedKeys.join('\", \"')}\" found in ${argumentName}. ` + `Expected to find one of the known reducer keys instead: ` + `\"${reducerKeys.join('\", \"')}\". Unexpected keys will be ignored.`;\n  }\n}\nfunction assertReducerShape(reducers: {\n  [key: string]: Reducer<any, any, any>;\n}) {\n  Object.keys(reducers).forEach(key => {\n    const reducer = reducers[key];\n    const initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(12) : `The slice reducer for key \"${key}\" returned undefined during initialization. ` + `If the state passed to the reducer is undefined, you must ` + `explicitly return the initial state. The initial state may ` + `not be undefined. If you don't want to set a value for this reducer, ` + `you can use null instead of undefined.`);\n    }\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage2(13) : `The slice reducer for key \"${key}\" returned undefined when probed with a random type. ` + `Don't try to handle '${ActionTypes.INIT}' or other actions in \"redux/*\" ` + `namespace. They are considered private. Instead, you must return the ` + `current state for any unknown actions, unless it is undefined, ` + `in which case you must return the initial state, regardless of the ` + `action type. The initial state may not be undefined, but can be null.`);\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @template S Combined state object type.\n *\n * @param reducers An object whose values correspond to different reducer\n *   functions that need to be combined into one. One handy way to obtain it\n *   is to use `import * as reducers` syntax. The reducers may never\n *   return undefined for any action. Instead, they should return their\n *   initial state if the state passed to them was undefined, and the current\n *   state for any unrecognized action.\n *\n * @returns A reducer function that invokes every reducer inside the passed\n *   object, and builds a state object with the same shape.\n */\nexport default function combineReducers<M>(reducers: M): M[keyof M] extends Reducer<any, any, any> | undefined ? Reducer<StateFromReducersMapObject<M>, ActionFromReducersMapObject<M>, Partial<PreloadedStateShapeFromReducersMapObject<M>>> : never;\nexport default function combineReducers(reducers: {\n  [key: string]: Reducer<any, any, any>;\n}) {\n  const reducerKeys = Object.keys(reducers);\n  const finalReducers: {\n    [key: string]: Reducer<any, any, any>;\n  } = {};\n  for (let i = 0; i < reducerKeys.length; i++) {\n    const key = reducerKeys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(`No reducer provided for key \"${key}\"`);\n      }\n    }\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  const finalReducerKeys = Object.keys(finalReducers);\n\n  // This is used to make sure we don't warn about the same\n  // keys multiple times.\n  let unexpectedKeyCache: {\n    [key: string]: true;\n  };\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n  let shapeAssertionError: unknown;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n  return function combination(state: StateFromReducersMapObject<typeof reducers> = {}, action: Action) {\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      const warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n    let hasChanged = false;\n    const nextState: StateFromReducersMapObject<typeof reducers> = {};\n    for (let i = 0; i < finalReducerKeys.length; i++) {\n      const key = finalReducerKeys[i];\n      const reducer = finalReducers[key];\n      const previousStateForKey = state[key];\n      const nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        const actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage3(14) : `When called with an action of type ${actionType ? `\"${String(actionType)}\"` : '(unknown type)'}, the slice reducer for key \"${key}\" returned undefined. ` + `To ignore an action, you must explicitly return the previous state. ` + `If you want this reducer to hold no value, you can return null instead of undefined.`);\n      }\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}", "import { formatProdErrorMessage as _formatProdErrorMessage } from \"src/utils/formatProdErrorMessage\";\nimport { Dispatch } from './types/store';\nimport { ActionCreator, ActionCreatorsMapObject, Action } from './types/actions';\nimport { kindOf } from './utils/kindOf';\nfunction bindActionCreator<A extends Action>(actionCreator: ActionCreator<A>, dispatch: Dispatch<A>) {\n  return function (this: any, ...args: any[]) {\n    return dispatch(actionCreator.apply(this, args));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use `import * as`\n * syntax. You may also pass a single function.\n *\n * @param dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nexport default function bindActionCreators<A, C extends ActionCreator<A>>(actionCreator: C, dispatch: Dispatch): C;\nexport default function bindActionCreators<A extends ActionCreator<any>, B extends ActionCreator<any>>(actionCreator: A, dispatch: Dispatch): B;\nexport default function bindActionCreators<A, M extends ActionCreatorsMapObject<A>>(actionCreators: M, dispatch: Dispatch): M;\nexport default function bindActionCreators<M extends ActionCreatorsMapObject, N extends ActionCreatorsMapObject>(actionCreators: M, dispatch: Dispatch): N;\nexport default function bindActionCreators(actionCreators: ActionCreator<any> | ActionCreatorsMapObject, dispatch: Dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(16) : `bindActionCreators expected an object or a function, but instead received: '${kindOf(actionCreators)}'. ` + `Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`);\n  }\n  const boundActionCreators: ActionCreatorsMapObject = {};\n  for (const key in actionCreators) {\n    const actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}", "type Func<T extends any[], R> = (...a: T) => R;\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for the\n * resulting composite function.\n *\n * @param funcs The functions to compose.\n * @returns A function obtained by composing the argument functions from right\n *   to left. For example, `compose(f, g, h)` is identical to doing\n *   `(...args) => f(g(h(...args)))`.\n */\nexport default function compose(): <R>(a: R) => R;\nexport default function compose<F extends Function>(f: F): F;\n\n/* two functions */\nexport default function compose<A, T extends any[], R>(f1: (a: A) => R, f2: Func<T, A>): Func<T, R>;\n\n/* three functions */\nexport default function compose<A, B, T extends any[], R>(f1: (b: B) => R, f2: (a: A) => B, f3: Func<T, A>): Func<T, R>;\n\n/* four functions */\nexport default function compose<A, B, C, T extends any[], R>(f1: (c: C) => R, f2: (b: B) => C, f3: (a: A) => B, f4: Func<T, A>): Func<T, R>;\n\n/* rest */\nexport default function compose<R>(f1: (a: any) => R, ...funcs: Function[]): (...args: any[]) => R;\nexport default function compose<R>(...funcs: Function[]): (...args: any[]) => R;\nexport default function compose(...funcs: Function[]) {\n  if (funcs.length === 0) {\n    // infer the argument type so it is usable in inference down the line\n    return <T,>(arg: T) => arg;\n  }\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n  return funcs.reduce((a, b) => (...args: any) => a(b(...args)));\n}", "import { formatProdErrorMessage as _formatProdErrorMessage } from \"src/utils/formatProdErrorMessage\";\nimport compose from './compose';\nimport { Middleware, MiddlewareAPI } from './types/middleware';\nimport { StoreEnhancer, Dispatch } from './types/store';\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param middlewares The middleware chain to be applied.\n * @returns A store enhancer applying the middleware.\n *\n * @template Ext Dispatch signature added by a middleware.\n * @template S The type of the state supported by a middleware.\n */\nexport default function applyMiddleware(): StoreEnhancer;\nexport default function applyMiddleware<Ext1, S>(middleware1: Middleware<Ext1, S, any>): StoreEnhancer<{\n  dispatch: Ext1;\n}>;\nexport default function applyMiddleware<Ext1, Ext2, S>(middleware1: Middleware<Ext1, S, any>, middleware2: Middleware<Ext2, S, any>): StoreEnhancer<{\n  dispatch: Ext1 & Ext2;\n}>;\nexport default function applyMiddleware<Ext1, Ext2, Ext3, S>(middleware1: Middleware<Ext1, S, any>, middleware2: Middleware<Ext2, S, any>, middleware3: Middleware<Ext3, S, any>): StoreEnhancer<{\n  dispatch: Ext1 & Ext2 & Ext3;\n}>;\nexport default function applyMiddleware<Ext1, Ext2, Ext3, Ext4, S>(middleware1: Middleware<Ext1, S, any>, middleware2: Middleware<Ext2, S, any>, middleware3: Middleware<Ext3, S, any>, middleware4: Middleware<Ext4, S, any>): StoreEnhancer<{\n  dispatch: Ext1 & Ext2 & Ext3 & Ext4;\n}>;\nexport default function applyMiddleware<Ext1, Ext2, Ext3, Ext4, Ext5, S>(middleware1: Middleware<Ext1, S, any>, middleware2: Middleware<Ext2, S, any>, middleware3: Middleware<Ext3, S, any>, middleware4: Middleware<Ext4, S, any>, middleware5: Middleware<Ext5, S, any>): StoreEnhancer<{\n  dispatch: Ext1 & Ext2 & Ext3 & Ext4 & Ext5;\n}>;\nexport default function applyMiddleware<Ext, S = any>(...middlewares: Middleware<any, S, any>[]): StoreEnhancer<{\n  dispatch: Ext;\n}>;\nexport default function applyMiddleware(...middlewares: Middleware[]): StoreEnhancer<any> {\n  return createStore => (reducer, preloadedState) => {\n    const store = createStore(reducer, preloadedState);\n    let dispatch: Dispatch = () => {\n      throw new Error(process.env.NODE_ENV === \"production\" ? _formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n    };\n    const middlewareAPI: MiddlewareAPI = {\n      getState: store.getState,\n      dispatch: (action, ...args) => dispatch(action, ...args)\n    };\n    const chain = middlewares.map(middleware => middleware(middlewareAPI));\n    dispatch = compose<typeof dispatch>(...chain)(store.dispatch);\n    return {\n      ...store,\n      dispatch\n    };\n  };\n}", "import { Action } from '../types/actions';\nimport isPlainObject from './isPlainObject';\nexport default function isAction(action: unknown): action is Action<string> {\n  return isPlainObject(action) && 'type' in action && typeof (action as Record<'type', unknown>).type === 'string';\n}", "/**\n * External dependencies\n */\nimport { createStore, applyMiddleware } from 'redux';\nimport EquivalentKeyMap from 'equivalent-key-map';\n\n/**\n * WordPress dependencies\n */\nimport createReduxRoutineMiddleware from '@wordpress/redux-routine';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { combineReducers } from './combine-reducers';\nimport { builtinControls } from '../controls';\nimport { lock } from '../lock-unlock';\nimport promise from '../promise-middleware';\nimport createResolversCacheMiddleware from '../resolvers-cache-middleware';\nimport createThunkMiddleware from './thunk-middleware';\nimport metadataReducer from './metadata/reducer';\nimport * as metadataSelectors from './metadata/selectors';\nimport * as metadataActions from './metadata/actions';\n\nexport { combineReducers };\n\n/** @typedef {import('../types').DataRegistry} DataRegistry */\n/** @typedef {import('../types').ListenerFunction} ListenerFunction */\n/**\n * @typedef {import('../types').StoreDescriptor<C>} StoreDescriptor\n * @template {import('../types').AnyConfig} C\n */\n/**\n * @typedef {import('../types').ReduxStoreConfig<State,Actions,Selectors>} ReduxStoreConfig\n * @template State\n * @template {Record<string,import('../types').ActionCreator>} Actions\n * @template Selectors\n */\n\nconst trimUndefinedValues = ( array ) => {\n\tconst result = [ ...array ];\n\tfor ( let i = result.length - 1; i >= 0; i-- ) {\n\t\tif ( result[ i ] === undefined ) {\n\t\t\tresult.splice( i, 1 );\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * Creates a new object with the same keys, but with `callback()` called as\n * a transformer function on each of the values.\n *\n * @param {Object}   obj      The object to transform.\n * @param {Function} callback The function to transform each object value.\n * @return {Array} Transformed object.\n */\nconst mapValues = ( obj, callback ) =>\n\tObject.fromEntries(\n\t\tObject.entries( obj ?? {} ).map( ( [ key, value ] ) => [\n\t\t\tkey,\n\t\t\tcallback( value, key ),\n\t\t] )\n\t);\n\n// Convert  non serializable types to plain objects\nconst devToolsReplacer = ( key, state ) => {\n\tif ( state instanceof Map ) {\n\t\treturn Object.fromEntries( state );\n\t}\n\n\tif ( state instanceof window.HTMLElement ) {\n\t\treturn null;\n\t}\n\n\treturn state;\n};\n\n/**\n * Create a cache to track whether resolvers started running or not.\n *\n * @return {Object} Resolvers Cache.\n */\nfunction createResolversCache() {\n\tconst cache = {};\n\treturn {\n\t\tisRunning( selectorName, args ) {\n\t\t\treturn (\n\t\t\t\tcache[ selectorName ] &&\n\t\t\t\tcache[ selectorName ].get( trimUndefinedValues( args ) )\n\t\t\t);\n\t\t},\n\n\t\tclear( selectorName, args ) {\n\t\t\tif ( cache[ selectorName ] ) {\n\t\t\t\tcache[ selectorName ].delete( trimUndefinedValues( args ) );\n\t\t\t}\n\t\t},\n\n\t\tmarkAsRunning( selectorName, args ) {\n\t\t\tif ( ! cache[ selectorName ] ) {\n\t\t\t\tcache[ selectorName ] = new EquivalentKeyMap();\n\t\t\t}\n\n\t\t\tcache[ selectorName ].set( trimUndefinedValues( args ), true );\n\t\t},\n\t};\n}\n\nfunction createBindingCache( getItem, bindItem ) {\n\tconst cache = new WeakMap();\n\n\treturn {\n\t\tget( itemName ) {\n\t\t\tconst item = getItem( itemName );\n\t\t\tif ( ! item ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tlet boundItem = cache.get( item );\n\t\t\tif ( ! boundItem ) {\n\t\t\t\tboundItem = bindItem( item, itemName );\n\t\t\t\tcache.set( item, boundItem );\n\t\t\t}\n\t\t\treturn boundItem;\n\t\t},\n\t};\n}\n\nfunction createPrivateProxy( publicItems, privateItems ) {\n\treturn new Proxy( publicItems, {\n\t\tget: ( target, itemName ) =>\n\t\t\tprivateItems.get( itemName ) || Reflect.get( target, itemName ),\n\t} );\n}\n\n/**\n * Creates a data store descriptor for the provided Redux store configuration containing\n * properties describing reducer, actions, selectors, controls and resolvers.\n *\n * @example\n * ```js\n * import { createReduxStore } from '@wordpress/data';\n *\n * const store = createReduxStore( 'demo', {\n *     reducer: ( state = 'OK' ) => state,\n *     selectors: {\n *         getValue: ( state ) => state,\n *     },\n * } );\n * ```\n *\n * @template State\n * @template {Record<string,import('../types').ActionCreator>} Actions\n * @template Selectors\n * @param {string}                                    key     Unique namespace identifier.\n * @param {ReduxStoreConfig<State,Actions,Selectors>} options Registered store options, with properties\n *                                                            describing reducer, actions, selectors,\n *                                                            and resolvers.\n *\n * @return   {StoreDescriptor<ReduxStoreConfig<State,Actions,Selectors>>} Store Object.\n */\nexport default function createReduxStore( key, options ) {\n\tconst privateActions = {};\n\tconst privateSelectors = {};\n\tconst privateRegistrationFunctions = {\n\t\tprivateActions,\n\t\tregisterPrivateActions: ( actions ) => {\n\t\t\tObject.assign( privateActions, actions );\n\t\t},\n\t\tprivateSelectors,\n\t\tregisterPrivateSelectors: ( selectors ) => {\n\t\t\tObject.assign( privateSelectors, selectors );\n\t\t},\n\t};\n\tconst storeDescriptor = {\n\t\tname: key,\n\t\tinstantiate: ( registry ) => {\n\t\t\t/**\n\t\t\t * Stores listener functions registered with `subscribe()`.\n\t\t\t *\n\t\t\t * When functions register to listen to store changes with\n\t\t\t * `subscribe()` they get added here. Although Redux offers\n\t\t\t * its own `subscribe()` function directly, by wrapping the\n\t\t\t * subscription in this store instance it's possible to\n\t\t\t * optimize checking if the state has changed before calling\n\t\t\t * each listener.\n\t\t\t *\n\t\t\t * @type {Set<ListenerFunction>}\n\t\t\t */\n\t\t\tconst listeners = new Set();\n\t\t\tconst reducer = options.reducer;\n\n\t\t\t// Object that every thunk function receives as the first argument. It contains the\n\t\t\t// `registry`, `dispatch`, `select` and `resolveSelect` fields. Some of them are\n\t\t\t// constructed as getters to avoid circular dependencies.\n\t\t\tconst thunkArgs = {\n\t\t\t\tregistry,\n\t\t\t\tget dispatch() {\n\t\t\t\t\treturn thunkDispatch;\n\t\t\t\t},\n\t\t\t\tget select() {\n\t\t\t\t\treturn thunkSelect;\n\t\t\t\t},\n\t\t\t\tget resolveSelect() {\n\t\t\t\t\treturn resolveSelectors;\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tconst store = instantiateReduxStore(\n\t\t\t\tkey,\n\t\t\t\toptions,\n\t\t\t\tregistry,\n\t\t\t\tthunkArgs\n\t\t\t);\n\n\t\t\t// Expose the private registration functions on the store\n\t\t\t// so they can be copied to a sub registry in registry.js.\n\t\t\tlock( store, privateRegistrationFunctions );\n\t\t\tconst resolversCache = createResolversCache();\n\n\t\t\t// Binds an action creator (`action`) to the `store`, making it a callable function.\n\t\t\t// These are the functions that are returned by `useDispatch`, for example.\n\t\t\t// It always returns a `Promise`, although actions are not always async. That's an\n\t\t\t// unfortunate backward compatibility measure.\n\t\t\tfunction bindAction( action ) {\n\t\t\t\treturn ( ...args ) =>\n\t\t\t\t\tPromise.resolve( store.dispatch( action( ...args ) ) );\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * Object with all public actions, both metadata and store actions.\n\t\t\t */\n\t\t\tconst actions = {\n\t\t\t\t...mapValues( metadataActions, bindAction ),\n\t\t\t\t...mapValues( options.actions, bindAction ),\n\t\t\t};\n\n\t\t\t// Object with both public and private actions. Private actions are accessed through a proxy,\n\t\t\t// which looks them up in real time on the `privateActions` object. That's because private\n\t\t\t// actions can be registered at any time with `registerPrivateActions`. Also once a private\n\t\t\t// action creator is bound to the store, it is cached to give it a stable identity.\n\t\t\tconst allActions = createPrivateProxy(\n\t\t\t\tactions,\n\t\t\t\tcreateBindingCache(\n\t\t\t\t\t( name ) => privateActions[ name ],\n\t\t\t\t\tbindAction\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t// An object that implements the `dispatch` object that is passed to thunk functions.\n\t\t\t// It is callable (`dispatch( action )`) and also has methods (`dispatch.foo()`) that\n\t\t\t// correspond to bound registered actions, both public and private. Implemented with the proxy\n\t\t\t// `get` method, delegating to `allActions`.\n\t\t\tconst thunkDispatch = new Proxy(\n\t\t\t\t( action ) => store.dispatch( action ),\n\t\t\t\t{ get: ( target, name ) => allActions[ name ] }\n\t\t\t);\n\n\t\t\t// To the public `actions` object, add the \"locked\" `allActions` object. When used,\n\t\t\t// `unlock( actions )` will return `allActions`, implementing a way how to get at the private actions.\n\t\t\tlock( actions, allActions );\n\n\t\t\t// If we have selector resolvers, convert them to a normalized form.\n\t\t\tconst resolvers = options.resolvers\n\t\t\t\t? mapValues( options.resolvers, mapResolver )\n\t\t\t\t: {};\n\n\t\t\t// Bind a selector to the store. Call the selector with the current state, correct registry,\n\t\t\t// and if there is a resolver, attach the resolver logic to the selector.\n\t\t\tfunction bindSelector( selector, selectorName ) {\n\t\t\t\tif ( selector.isRegistrySelector ) {\n\t\t\t\t\tselector.registry = registry;\n\t\t\t\t}\n\t\t\t\tconst boundSelector = ( ...args ) => {\n\t\t\t\t\targs = normalize( selector, args );\n\t\t\t\t\tconst state = store.__unstableOriginalGetState();\n\t\t\t\t\t// Before calling the selector, switch to the correct registry.\n\t\t\t\t\tif ( selector.isRegistrySelector ) {\n\t\t\t\t\t\tselector.registry = registry;\n\t\t\t\t\t}\n\t\t\t\t\treturn selector( state.root, ...args );\n\t\t\t\t};\n\n\t\t\t\t// Expose normalization method on the bound selector\n\t\t\t\t// in order that it can be called when fulfilling\n\t\t\t\t// the resolver.\n\t\t\t\tboundSelector.__unstableNormalizeArgs =\n\t\t\t\t\tselector.__unstableNormalizeArgs;\n\n\t\t\t\tconst resolver = resolvers[ selectorName ];\n\n\t\t\t\tif ( ! resolver ) {\n\t\t\t\t\tboundSelector.hasResolver = false;\n\t\t\t\t\treturn boundSelector;\n\t\t\t\t}\n\n\t\t\t\treturn mapSelectorWithResolver(\n\t\t\t\t\tboundSelector,\n\t\t\t\t\tselectorName,\n\t\t\t\t\tresolver,\n\t\t\t\t\tstore,\n\t\t\t\t\tresolversCache,\n\t\t\t\t\tboundMetadataSelectors\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Metadata selectors are bound differently: different state (`state.metadata`), no resolvers,\n\t\t\t// normalization depending on the target selector.\n\t\t\tfunction bindMetadataSelector( metaDataSelector ) {\n\t\t\t\tconst boundSelector = (\n\t\t\t\t\tselectorName,\n\t\t\t\t\tselectorArgs,\n\t\t\t\t\t...args\n\t\t\t\t) => {\n\t\t\t\t\t// Normalize the arguments passed to the target selector.\n\t\t\t\t\tif ( selectorName ) {\n\t\t\t\t\t\tconst targetSelector =\n\t\t\t\t\t\t\toptions.selectors?.[ selectorName ];\n\t\t\t\t\t\tif ( targetSelector ) {\n\t\t\t\t\t\t\tselectorArgs = normalize(\n\t\t\t\t\t\t\t\ttargetSelector,\n\t\t\t\t\t\t\t\tselectorArgs\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst state = store.__unstableOriginalGetState();\n\n\t\t\t\t\treturn metaDataSelector(\n\t\t\t\t\t\tstate.metadata,\n\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\tselectorArgs,\n\t\t\t\t\t\t...args\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t\tboundSelector.hasResolver = false;\n\t\t\t\treturn boundSelector;\n\t\t\t}\n\n\t\t\t// Perform binding of both metadata and store selectors and combine them in one\n\t\t\t// `selectors` object. These are all public selectors of the store.\n\t\t\tconst boundMetadataSelectors = mapValues(\n\t\t\t\tmetadataSelectors,\n\t\t\t\tbindMetadataSelector\n\t\t\t);\n\n\t\t\tconst boundSelectors = mapValues( options.selectors, bindSelector );\n\n\t\t\tconst selectors = {\n\t\t\t\t...boundMetadataSelectors,\n\t\t\t\t...boundSelectors,\n\t\t\t};\n\n\t\t\t// Cache of bould private selectors. They are bound only when first accessed, because\n\t\t\t// new private selectors can be registered at any time (with `registerPrivateSelectors`).\n\t\t\t// Once bound, they are cached to give them a stable identity.\n\t\t\tconst boundPrivateSelectors = createBindingCache(\n\t\t\t\t( name ) => privateSelectors[ name ],\n\t\t\t\tbindSelector\n\t\t\t);\n\n\t\t\tconst allSelectors = createPrivateProxy(\n\t\t\t\tselectors,\n\t\t\t\tboundPrivateSelectors\n\t\t\t);\n\n\t\t\t// Pre-bind the private selectors that have been registered by the time of\n\t\t\t// instantiation, so that registry selectors are bound to the registry.\n\t\t\tfor ( const selectorName of Object.keys( privateSelectors ) ) {\n\t\t\t\tboundPrivateSelectors.get( selectorName );\n\t\t\t}\n\n\t\t\t// An object that implements the `select` object that is passed to thunk functions.\n\t\t\t// It is callable (`select( selector )`) and also has methods (`select.foo()`) that\n\t\t\t// correspond to bound registered selectors, both public and private. Implemented with the proxy\n\t\t\t// `get` method, delegating to `allSelectors`.\n\t\t\tconst thunkSelect = new Proxy(\n\t\t\t\t( selector ) => selector( store.__unstableOriginalGetState() ),\n\t\t\t\t{ get: ( target, name ) => allSelectors[ name ] }\n\t\t\t);\n\n\t\t\t// To the public `selectors` object, add the \"locked\" `allSelectors` object. When used,\n\t\t\t// `unlock( selectors )` will return `allSelectors`, implementing a way how to get at the private selectors.\n\t\t\tlock( selectors, allSelectors );\n\n\t\t\t// For each selector, create a function that calls the selector, waits for resolution and returns\n\t\t\t// a promise that resolves when the resolution is finished.\n\t\t\tconst bindResolveSelector = mapResolveSelector(\n\t\t\t\tstore,\n\t\t\t\tboundMetadataSelectors\n\t\t\t);\n\n\t\t\t// Now apply this function to all bound selectors, public and private. We are excluding\n\t\t\t// metadata selectors because they don't have resolvers.\n\t\t\tconst resolveSelectors = mapValues(\n\t\t\t\tboundSelectors,\n\t\t\t\tbindResolveSelector\n\t\t\t);\n\n\t\t\tconst allResolveSelectors = createPrivateProxy(\n\t\t\t\tresolveSelectors,\n\t\t\t\tcreateBindingCache(\n\t\t\t\t\t( name ) => boundPrivateSelectors.get( name ),\n\t\t\t\t\tbindResolveSelector\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t// Lock the selectors so that `unlock( resolveSelectors )` returns `allResolveSelectors`.\n\t\t\tlock( resolveSelectors, allResolveSelectors );\n\n\t\t\t// Now, in a way very similar to `bindResolveSelector`, we create a function that maps\n\t\t\t// selectors to functions that throw a suspense promise if not yet resolved.\n\t\t\tconst bindSuspendSelector = mapSuspendSelector(\n\t\t\t\tstore,\n\t\t\t\tboundMetadataSelectors\n\t\t\t);\n\n\t\t\tconst suspendSelectors = {\n\t\t\t\t...boundMetadataSelectors, // no special suspense behavior\n\t\t\t\t...mapValues( boundSelectors, bindSuspendSelector ),\n\t\t\t};\n\n\t\t\tconst allSuspendSelectors = createPrivateProxy(\n\t\t\t\tsuspendSelectors,\n\t\t\t\tcreateBindingCache(\n\t\t\t\t\t( name ) => boundPrivateSelectors.get( name ),\n\t\t\t\t\tbindSuspendSelector\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t// Lock the selectors so that `unlock( suspendSelectors )` returns 'allSuspendSelectors`.\n\t\t\tlock( suspendSelectors, allSuspendSelectors );\n\n\t\t\tconst getSelectors = () => selectors;\n\t\t\tconst getActions = () => actions;\n\t\t\tconst getResolveSelectors = () => resolveSelectors;\n\t\t\tconst getSuspendSelectors = () => suspendSelectors;\n\n\t\t\t// We have some modules monkey-patching the store object\n\t\t\t// It's wrong to do so but until we refactor all of our effects to controls\n\t\t\t// We need to keep the same \"store\" instance here.\n\t\t\tstore.__unstableOriginalGetState = store.getState;\n\t\t\tstore.getState = () => store.__unstableOriginalGetState().root;\n\n\t\t\t// Customize subscribe behavior to call listeners only on effective change,\n\t\t\t// not on every dispatch.\n\t\t\tconst subscribe =\n\t\t\t\tstore &&\n\t\t\t\t( ( listener ) => {\n\t\t\t\t\tlisteners.add( listener );\n\n\t\t\t\t\treturn () => listeners.delete( listener );\n\t\t\t\t} );\n\n\t\t\tlet lastState = store.__unstableOriginalGetState();\n\t\t\tstore.subscribe( () => {\n\t\t\t\tconst state = store.__unstableOriginalGetState();\n\t\t\t\tconst hasChanged = state !== lastState;\n\t\t\t\tlastState = state;\n\n\t\t\t\tif ( hasChanged ) {\n\t\t\t\t\tfor ( const listener of listeners ) {\n\t\t\t\t\t\tlistener();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// This can be simplified to just { subscribe, getSelectors, getActions }\n\t\t\t// Once we remove the use function.\n\t\t\treturn {\n\t\t\t\treducer,\n\t\t\t\tstore,\n\t\t\t\tactions,\n\t\t\t\tselectors,\n\t\t\t\tresolvers,\n\t\t\t\tgetSelectors,\n\t\t\t\tgetResolveSelectors,\n\t\t\t\tgetSuspendSelectors,\n\t\t\t\tgetActions,\n\t\t\t\tsubscribe,\n\t\t\t};\n\t\t},\n\t};\n\n\t// Expose the private registration functions on the store\n\t// descriptor. That's a natural choice since that's where the\n\t// public actions and selectors are stored.\n\tlock( storeDescriptor, privateRegistrationFunctions );\n\n\treturn storeDescriptor;\n}\n\n/**\n * Creates a redux store for a namespace.\n *\n * @param {string}       key       Unique namespace identifier.\n * @param {Object}       options   Registered store options, with properties\n *                                 describing reducer, actions, selectors,\n *                                 and resolvers.\n * @param {DataRegistry} registry  Registry reference.\n * @param {Object}       thunkArgs Argument object for the thunk middleware.\n * @return {Object} Newly created redux store.\n */\nfunction instantiateReduxStore( key, options, registry, thunkArgs ) {\n\tconst controls = {\n\t\t...options.controls,\n\t\t...builtinControls,\n\t};\n\n\tconst normalizedControls = mapValues( controls, ( control ) =>\n\t\tcontrol.isRegistryControl ? control( registry ) : control\n\t);\n\n\tconst middlewares = [\n\t\tcreateResolversCacheMiddleware( registry, key ),\n\t\tpromise,\n\t\tcreateReduxRoutineMiddleware( normalizedControls ),\n\t\tcreateThunkMiddleware( thunkArgs ),\n\t];\n\n\tconst enhancers = [ applyMiddleware( ...middlewares ) ];\n\tif (\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.__REDUX_DEVTOOLS_EXTENSION__\n\t) {\n\t\tenhancers.push(\n\t\t\twindow.__REDUX_DEVTOOLS_EXTENSION__( {\n\t\t\t\tname: key,\n\t\t\t\tinstanceId: key,\n\t\t\t\tserialize: {\n\t\t\t\t\treplacer: devToolsReplacer,\n\t\t\t\t},\n\t\t\t} )\n\t\t);\n\t}\n\n\tconst { reducer, initialState } = options;\n\tconst enhancedReducer = combineReducers( {\n\t\tmetadata: metadataReducer,\n\t\troot: reducer,\n\t} );\n\n\treturn createStore(\n\t\tenhancedReducer,\n\t\t{ root: initialState },\n\t\tcompose( enhancers )\n\t);\n}\n\n/**\n * Maps selectors to functions that return a resolution promise for them.\n *\n * @param {Object} store                  The redux store the selectors are bound to.\n * @param {Object} boundMetadataSelectors The bound metadata selectors.\n *\n * @return {Function} Function that maps selectors to resolvers.\n */\nfunction mapResolveSelector( store, boundMetadataSelectors ) {\n\treturn ( selector, selectorName ) => {\n\t\t// If the selector doesn't have a resolver, just convert the return value\n\t\t// (including exceptions) to a Promise, no additional extra behavior is needed.\n\t\tif ( ! selector.hasResolver ) {\n\t\t\treturn async ( ...args ) => selector.apply( null, args );\n\t\t}\n\n\t\treturn ( ...args ) =>\n\t\t\tnew Promise( ( resolve, reject ) => {\n\t\t\t\tconst hasFinished = () => {\n\t\t\t\t\treturn boundMetadataSelectors.hasFinishedResolution(\n\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\targs\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t\tconst finalize = ( result ) => {\n\t\t\t\t\tconst hasFailed =\n\t\t\t\t\t\tboundMetadataSelectors.hasResolutionFailed(\n\t\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\t\targs\n\t\t\t\t\t\t);\n\t\t\t\t\tif ( hasFailed ) {\n\t\t\t\t\t\tconst error = boundMetadataSelectors.getResolutionError(\n\t\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\t\targs\n\t\t\t\t\t\t);\n\t\t\t\t\t\treject( error );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve( result );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst getResult = () => selector.apply( null, args );\n\n\t\t\t\t// Trigger the selector (to trigger the resolver)\n\t\t\t\tconst result = getResult();\n\t\t\t\tif ( hasFinished() ) {\n\t\t\t\t\treturn finalize( result );\n\t\t\t\t}\n\n\t\t\t\tconst unsubscribe = store.subscribe( () => {\n\t\t\t\t\tif ( hasFinished() ) {\n\t\t\t\t\t\tunsubscribe();\n\t\t\t\t\t\tfinalize( getResult() );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t};\n}\n\n/**\n * Maps selectors to functions that throw a suspense promise if not yet resolved.\n *\n * @param {Object} store                  The redux store the selectors select from.\n * @param {Object} boundMetadataSelectors The bound metadata selectors.\n *\n * @return {Function} Function that maps selectors to their suspending versions.\n */\nfunction mapSuspendSelector( store, boundMetadataSelectors ) {\n\treturn ( selector, selectorName ) => {\n\t\t// Selector without a resolver doesn't have any extra suspense behavior.\n\t\tif ( ! selector.hasResolver ) {\n\t\t\treturn selector;\n\t\t}\n\n\t\treturn ( ...args ) => {\n\t\t\tconst result = selector.apply( null, args );\n\n\t\t\tif (\n\t\t\t\tboundMetadataSelectors.hasFinishedResolution(\n\t\t\t\t\tselectorName,\n\t\t\t\t\targs\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\tboundMetadataSelectors.hasResolutionFailed(\n\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\targs\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthrow boundMetadataSelectors.getResolutionError(\n\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\targs\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tthrow new Promise( ( resolve ) => {\n\t\t\t\tconst unsubscribe = store.subscribe( () => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tboundMetadataSelectors.hasFinishedResolution(\n\t\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\t\targs\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t\tunsubscribe();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t};\n\t};\n}\n\n/**\n * Convert a resolver to a normalized form, an object with `fulfill` method and\n * optional methods like `isFulfilled`.\n *\n * @param {Function} resolver Resolver to convert\n */\nfunction mapResolver( resolver ) {\n\tif ( resolver.fulfill ) {\n\t\treturn resolver;\n\t}\n\n\treturn {\n\t\t...resolver, // Copy the enumerable properties of the resolver function.\n\t\tfulfill: resolver, // Add the fulfill method.\n\t};\n}\n\n/**\n * Returns a selector with a matched resolver.\n * Resolvers are side effects invoked once per argument set of a given selector call,\n * used in ensuring that the data needs for the selector are satisfied.\n *\n * @param {Object} selector               The selector function to be bound.\n * @param {string} selectorName           The selector name.\n * @param {Object} resolver               Resolver to call.\n * @param {Object} store                  The redux store to which the resolvers should be mapped.\n * @param {Object} resolversCache         Resolvers Cache.\n * @param {Object} boundMetadataSelectors The bound metadata selectors.\n */\nfunction mapSelectorWithResolver(\n\tselector,\n\tselectorName,\n\tresolver,\n\tstore,\n\tresolversCache,\n\tboundMetadataSelectors\n) {\n\tfunction fulfillSelector( args ) {\n\t\tconst state = store.getState();\n\n\t\tif (\n\t\t\tresolversCache.isRunning( selectorName, args ) ||\n\t\t\t( typeof resolver.isFulfilled === 'function' &&\n\t\t\t\tresolver.isFulfilled( state, ...args ) )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tboundMetadataSelectors.hasStartedResolution( selectorName, args )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tresolversCache.markAsRunning( selectorName, args );\n\n\t\tsetTimeout( async () => {\n\t\t\tresolversCache.clear( selectorName, args );\n\t\t\tstore.dispatch(\n\t\t\t\tmetadataActions.startResolution( selectorName, args )\n\t\t\t);\n\t\t\ttry {\n\t\t\t\tconst action = resolver.fulfill( ...args );\n\t\t\t\tif ( action ) {\n\t\t\t\t\tawait store.dispatch( action );\n\t\t\t\t}\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tmetadataActions.finishResolution( selectorName, args )\n\t\t\t\t);\n\t\t\t} catch ( error ) {\n\t\t\t\tstore.dispatch(\n\t\t\t\t\tmetadataActions.failResolution( selectorName, args, error )\n\t\t\t\t);\n\t\t\t}\n\t\t}, 0 );\n\t}\n\n\tconst selectorResolver = ( ...args ) => {\n\t\targs = normalize( selector, args );\n\t\tfulfillSelector( args );\n\t\treturn selector( ...args );\n\t};\n\tselectorResolver.hasResolver = true;\n\treturn selectorResolver;\n}\n\n/**\n * Applies selector's normalization function to the given arguments\n * if it exists.\n *\n * @param {Object} selector The selector potentially with a normalization method property.\n * @param {Array}  args     selector arguments to normalize.\n * @return {Array} Potentially normalized arguments.\n */\nfunction normalize( selector, args ) {\n\tif (\n\t\tselector.__unstableNormalizeArgs &&\n\t\ttypeof selector.__unstableNormalizeArgs === 'function' &&\n\t\targs?.length\n\t) {\n\t\treturn selector.__unstableNormalizeArgs( args );\n\t}\n\treturn args;\n}\n", "/**\n * Returns true if the given object is a generator, or false otherwise.\n *\n * @see https://www.ecma-international.org/ecma-262/6.0/#sec-generator-objects\n *\n * @param object Object to test.\n *\n * @return Whether object is a generator.\n */\nexport default function isGenerator( object: any ): object is Generator {\n\t// Check that iterator (next) and iterable (Symbol.iterator) interfaces are satisfied.\n\t// These checks seem to be compatible with several generator helpers as well as the native implementation.\n\treturn (\n\t\t!! object &&\n\t\ttypeof object[ Symbol.iterator ] === 'function' &&\n\t\ttypeof object.next === 'function'\n\t);\n}\n", "/**\n * External dependencies\n */\nimport type { Control } from 'rungen';\nimport { create } from 'rungen';\nimport isPromise from 'is-promise';\nimport type { Dispatch, AnyAction } from 'redux';\n\n/**\n * Internal dependencies\n */\nimport { isActionOfType, isAction } from './is-action';\n\n/**\n * Create a co-routine runtime.\n *\n * @param controls Object of control handlers.\n * @param dispatch Unhandled action dispatch.\n */\nexport default function createRuntime(\n\tcontrols: Record<\n\t\tstring,\n\t\t( value: any ) => Promise< boolean > | boolean\n\t> = {},\n\tdispatch: Dispatch\n) {\n\tconst rungenControls = Object.entries( controls ).map(\n\t\t( [ actionType, control ] ): Control =>\n\t\t\t( value, next, iterate, yieldNext, yieldError ) => {\n\t\t\t\tif ( ! isActionOfType( value, actionType ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst routine = control( value );\n\t\t\t\tif ( isPromise( routine ) ) {\n\t\t\t\t\t// Async control routine awaits resolution.\n\t\t\t\t\troutine.then( yieldNext, yieldError );\n\t\t\t\t} else {\n\t\t\t\t\tyieldNext( routine );\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t);\n\n\tconst unhandledActionControl = (\n\t\tvalue: AnyAction | unknown,\n\t\tnext: () => void\n\t) => {\n\t\tif ( ! isAction( value ) ) {\n\t\t\treturn false;\n\t\t}\n\t\tdispatch( value );\n\t\tnext();\n\t\treturn true;\n\t};\n\trungenControls.push( unhandledActionControl );\n\n\tconst rungenRuntime = create( rungenControls );\n\n\treturn ( action: AnyAction | Generator ) =>\n\t\tnew Promise( ( resolve, reject ) =>\n\t\t\trungenRuntime(\n\t\t\t\taction,\n\t\t\t\t( result ) => {\n\t\t\t\t\tif ( isAction( result ) ) {\n\t\t\t\t\t\tdispatch( result );\n\t\t\t\t\t}\n\t\t\t\t\tresolve( result );\n\t\t\t\t},\n\t\t\t\treject\n\t\t\t)\n\t\t);\n}\n", "/**\n * External dependencies\n */\nimport { isPlainObject } from 'is-plain-object';\nimport type { Action } from 'redux';\n\n/**\n * Returns true if the given object quacks like an action.\n *\n * @param object Object to test\n *\n * @return Whether object is an action.\n */\nexport function isAction( object: unknown ): object is Action {\n\treturn isPlainObject( object ) && typeof object.type === 'string';\n}\n\n/**\n * Returns true if the given object quacks like an action and has a specific\n * action type\n *\n * @param object       Object to test\n * @param expectedType The expected type for the action.\n *\n * @return Whether object is an action and is of specific type.\n */\nexport function isActionOfType(\n\tobject: unknown,\n\texpectedType: string\n): object is Action {\n\treturn isAction( object ) && object.type === expectedType;\n}\n", "/**\n * External dependencies\n */\nimport type { Middleware, AnyAction } from 'redux';\n\n/**\n * Internal dependencies\n */\nimport isGenerator from './is-generator';\nimport createRuntime from './runtime';\n\n/**\n * Creates a Redux middleware, given an object of controls where each key is an\n * action type for which to act upon, the value a function which returns either\n * a promise which is to resolve when evaluation of the action should continue,\n * or a value. The value or resolved promise value is assigned on the return\n * value of the yield assignment. If the control handler returns undefined, the\n * execution is not continued.\n *\n * @param controls Object of control handlers.\n *\n * @return Co-routine runtime\n */\nexport default function createMiddleware(\n\tcontrols: Record<\n\t\tstring,\n\t\t( value: AnyAction ) => Promise< boolean > | boolean\n\t> = {}\n): Middleware {\n\treturn ( store ) => {\n\t\tconst runtime = createRuntime( controls, store.dispatch );\n\t\treturn ( next ) => ( action ) => {\n\t\t\tif ( ! isGenerator( action ) ) {\n\t\t\t\treturn next( action );\n\t\t\t}\n\n\t\t\treturn runtime( action );\n\t\t};\n\t};\n}\n", "export function combineReducers( reducers ) {\n\tconst keys = Object.keys( reducers );\n\n\treturn function combinedReducer( state = {}, action ) {\n\t\tconst nextState = {};\n\t\tlet hasChanged = false;\n\t\tfor ( const key of keys ) {\n\t\t\tconst reducer = reducers[ key ];\n\t\t\tconst prevStateForKey = state[ key ];\n\t\t\tconst nextStateForKey = reducer( prevStateForKey, action );\n\t\t\tnextState[ key ] = nextStateForKey;\n\t\t\thasChanged = hasChanged || nextStateForKey !== prevStateForKey;\n\t\t}\n\n\t\treturn hasChanged ? nextState : state;\n\t};\n}\n", "/**\n * Internal dependencies\n */\nimport type { select as globalSelect } from './select';\n\ntype RegistrySelector< Selector extends ( ...args: any[] ) => any > = {\n\t( ...args: Parameters< Selector > ): ReturnType< Selector >;\n\tisRegistrySelector?: boolean;\n\tregistry?: any;\n};\n\n/**\n * Creates a selector function that takes additional curried argument with the\n * registry `select` function. While a regular selector has signature\n * ```js\n * ( state, ...selectorArgs ) => ( result )\n * ```\n * that allows to select data from the store's `state`, a registry selector\n * has signature:\n * ```js\n * ( select ) => ( state, ...selectorArgs ) => ( result )\n * ```\n * that supports also selecting from other registered stores.\n *\n * @example\n * ```js\n * import { store as coreStore } from '@wordpress/core-data';\n * import { store as editorStore } from '@wordpress/editor';\n *\n * const getCurrentPostId = createRegistrySelector( ( select ) => ( state ) => {\n *   return select( editorStore ).getCurrentPostId();\n * } );\n *\n * const getPostEdits = createRegistrySelector( ( select ) => ( state ) => {\n *   // calling another registry selector just like any other function\n *   const postType = getCurrentPostType( state );\n *   const postId = getCurrentPostId( state );\n *\t return select( coreStore ).getEntityRecordEdits( 'postType', postType, postId );\n * } );\n * ```\n *\n * Note how the `getCurrentPostId` selector can be called just like any other function,\n * (it works even inside a regular non-registry selector) and we don't need to pass the\n * registry as argument. The registry binding happens automatically when registering the selector\n * with a store.\n *\n * @param registrySelector Function receiving a registry `select`\n *                         function and returning a state selector.\n *\n * @return Registry selector that can be registered with a store.\n */\nexport function createRegistrySelector<\n\tSelector extends ( ...args: any[] ) => any,\n>(\n\tregistrySelector: ( select: typeof globalSelect ) => Selector\n): RegistrySelector< Selector > {\n\tconst selectorsByRegistry = new WeakMap();\n\t// Create a selector function that is bound to the registry referenced by `selector.registry`\n\t// and that has the same API as a regular selector. Binding it in such a way makes it\n\t// possible to call the selector directly from another selector.\n\tconst wrappedSelector: RegistrySelector< Selector > = ( ...args ) => {\n\t\tlet selector = selectorsByRegistry.get( wrappedSelector.registry );\n\t\t// We want to make sure the cache persists even when new registry\n\t\t// instances are created. For example patterns create their own editors\n\t\t// with their own core/block-editor stores, so we should keep track of\n\t\t// the cache for each registry instance.\n\t\tif ( ! selector ) {\n\t\t\tselector = registrySelector( wrappedSelector.registry.select );\n\t\t\tselectorsByRegistry.set( wrappedSelector.registry, selector );\n\t\t}\n\t\treturn selector( ...args );\n\t};\n\n\t/**\n\t * Flag indicating that the selector is a registry selector that needs the correct registry\n\t * reference to be assigned to `selector.registry` to make it work correctly.\n\t * be mapped as a registry selector.\n\t */\n\twrappedSelector.isRegistrySelector = true;\n\n\treturn wrappedSelector;\n}\n\n/**\n * Creates a control function that takes additional curried argument with the `registry` object.\n * While a regular control has signature\n * ```js\n * ( action ) => ( iteratorOrPromise )\n * ```\n * where the control works with the `action` that it's bound to, a registry control has signature:\n * ```js\n * ( registry ) => ( action ) => ( iteratorOrPromise )\n * ```\n * A registry control is typically used to select data or dispatch an action to a registered\n * store.\n *\n * When registering a control created with `createRegistryControl` with a store, the store\n * knows which calling convention to use when executing the control.\n *\n * @param registryControl Function receiving a registry object and returning a control.\n *\n * @return Registry control that can be registered with a store.\n */\nexport function createRegistryControl< T extends ( ...args: any ) => any >(\n\tregistryControl: T & { isRegistryControl?: boolean }\n) {\n\tregistryControl.isRegistryControl = true;\n\n\treturn registryControl;\n}\n", "/**\n * Internal dependencies\n */\nimport { createRegistryControl } from './factory';\n\n/** @typedef {import('./types').StoreDescriptor} StoreDescriptor */\n\nconst SELECT = '@@data/SELECT';\nconst RESOLVE_SELECT = '@@data/RESOLVE_SELECT';\nconst DISPATCH = '@@data/DISPATCH';\n\nfunction isObject( object ) {\n\treturn object !== null && typeof object === 'object';\n}\n\n/**\n * Dispatches a control action for triggering a synchronous registry select.\n *\n * Note: This control synchronously returns the current selector value, triggering the\n * resolution, but not waiting for it.\n *\n * @param {string|StoreDescriptor} storeNameOrDescriptor Unique namespace identifier for the store\n * @param {string}                 selectorName          The name of the selector.\n * @param {Array}                  args                  Arguments for the selector.\n *\n * @example\n * ```js\n * import { controls } from '@wordpress/data';\n *\n * // Action generator using `select`.\n * export function* myAction() {\n *   const isEditorSideBarOpened = yield controls.select( 'core/edit-post', 'isEditorSideBarOpened' );\n *   // Do stuff with the result from the `select`.\n * }\n * ```\n *\n * @return {Object} The control descriptor.\n */\nfunction select( storeNameOrDescriptor, selectorName, ...args ) {\n\treturn {\n\t\ttype: SELECT,\n\t\tstoreKey: isObject( storeNameOrDescriptor )\n\t\t\t? storeNameOrDescriptor.name\n\t\t\t: storeNameOrDescriptor,\n\t\tselectorName,\n\t\targs,\n\t};\n}\n\n/**\n * Dispatches a control action for triggering and resolving a registry select.\n *\n * Note: when this control action is handled, it automatically considers\n * selectors that may have a resolver. In such case, it will return a `Promise` that resolves\n * after the selector finishes resolving, with the final result value.\n *\n * @param {string|StoreDescriptor} storeNameOrDescriptor Unique namespace identifier for the store\n * @param {string}                 selectorName          The name of the selector\n * @param {Array}                  args                  Arguments for the selector.\n *\n * @example\n * ```js\n * import { controls } from '@wordpress/data';\n *\n * // Action generator using resolveSelect\n * export function* myAction() {\n * \tconst isSidebarOpened = yield controls.resolveSelect( 'core/edit-post', 'isEditorSideBarOpened' );\n * \t// do stuff with the result from the select.\n * }\n * ```\n *\n * @return {Object} The control descriptor.\n */\nfunction resolveSelect( storeNameOrDescriptor, selectorName, ...args ) {\n\treturn {\n\t\ttype: RESOLVE_SELECT,\n\t\tstoreKey: isObject( storeNameOrDescriptor )\n\t\t\t? storeNameOrDescriptor.name\n\t\t\t: storeNameOrDescriptor,\n\t\tselectorName,\n\t\targs,\n\t};\n}\n\n/**\n * Dispatches a control action for triggering a registry dispatch.\n *\n * @param {string|StoreDescriptor} storeNameOrDescriptor Unique namespace identifier for the store\n * @param {string}                 actionName            The name of the action to dispatch\n * @param {Array}                  args                  Arguments for the dispatch action.\n *\n * @example\n * ```js\n * import { controls } from '@wordpress/data-controls';\n *\n * // Action generator using dispatch\n * export function* myAction() {\n *   yield controls.dispatch( 'core/editor', 'togglePublishSidebar' );\n *   // do some other things.\n * }\n * ```\n *\n * @return {Object}  The control descriptor.\n */\nfunction dispatch( storeNameOrDescriptor, actionName, ...args ) {\n\treturn {\n\t\ttype: DISPATCH,\n\t\tstoreKey: isObject( storeNameOrDescriptor )\n\t\t\t? storeNameOrDescriptor.name\n\t\t\t: storeNameOrDescriptor,\n\t\tactionName,\n\t\targs,\n\t};\n}\n\nexport const controls = { select, resolveSelect, dispatch };\n\nexport const builtinControls = {\n\t[ SELECT ]: createRegistryControl(\n\t\t( registry ) =>\n\t\t\t( { storeKey, selectorName, args } ) =>\n\t\t\t\tregistry.select( storeKey )[ selectorName ]( ...args )\n\t),\n\t[ RESOLVE_SELECT ]: createRegistryControl(\n\t\t( registry ) =>\n\t\t\t( { storeKey, selectorName, args } ) => {\n\t\t\t\tconst method = registry.select( storeKey )[ selectorName ]\n\t\t\t\t\t.hasResolver\n\t\t\t\t\t? 'resolveSelect'\n\t\t\t\t\t: 'select';\n\t\t\t\treturn registry[ method ]( storeKey )[ selectorName ](\n\t\t\t\t\t...args\n\t\t\t\t);\n\t\t\t}\n\t),\n\t[ DISPATCH ]: createRegistryControl(\n\t\t( registry ) =>\n\t\t\t( { storeKey, actionName, args } ) =>\n\t\t\t\tregistry.dispatch( storeKey )[ actionName ]( ...args )\n\t),\n};\n", "/**\n * wordpress/private-apis – the utilities to enable private cross-package\n * exports of private APIs.\n *\n * This \"implementation.ts\" file is needed for the sake of the unit tests. It\n * exports more than the public API of the package to aid in testing.\n */\n\n/**\n * The list of core modules allowed to opt-in to the private APIs.\n */\nconst CORE_MODULES_USING_PRIVATE_APIS = [\n\t'@wordpress/block-directory',\n\t'@wordpress/block-editor',\n\t'@wordpress/block-library',\n\t'@wordpress/blocks',\n\t'@wordpress/commands',\n\t'@wordpress/components',\n\t'@wordpress/core-commands',\n\t'@wordpress/core-data',\n\t'@wordpress/customize-widgets',\n\t'@wordpress/data',\n\t'@wordpress/edit-post',\n\t'@wordpress/edit-site',\n\t'@wordpress/edit-widgets',\n\t'@wordpress/editor',\n\t'@wordpress/format-library',\n\t'@wordpress/patterns',\n\t'@wordpress/preferences',\n\t'@wordpress/reusable-blocks',\n\t'@wordpress/router',\n\t'@wordpress/dataviews',\n\t'@wordpress/fields',\n\t'@wordpress/media-utils',\n\t'@wordpress/upload-media',\n];\n\n/**\n * A list of core modules that already opted-in to\n * the privateApis package.\n */\nconst registeredPrivateApis: Array< string > = [];\n\n/*\n * Warning for theme and plugin developers.\n *\n * The use of private developer APIs is intended for use by WordPress Core\n * and the Gutenberg plugin exclusively.\n *\n * Dangerously opting in to using these APIs is NOT RECOMMENDED. Furthermore,\n * the WordPress Core philosophy to strive to maintain backward compatibility\n * for third-party developers DOES NOT APPLY to private APIs.\n *\n * THE CONSENT STRING FOR OPTING IN TO THESE APIS MAY CHANGE AT ANY TIME AND\n * WITHOUT NOTICE. THIS CHANGE WILL BREAK EXISTING THIRD-PARTY CODE. SUCH A\n * CHANGE MAY OCCUR IN EITHER A MAJOR OR MINOR RELEASE.\n */\nconst requiredConsent =\n\t'I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.';\n\n// The safety measure is meant for WordPress core where IS_WORDPRESS_CORE is set to true.\nconst allowReRegistration = globalThis.IS_WORDPRESS_CORE ? false : true;\n\n/**\n * Called by a @wordpress package wishing to opt-in to accessing or exposing\n * private private APIs.\n *\n * @param consent    The consent string.\n * @param moduleName The name of the module that is opting in.\n * @return An object containing the lock and unlock functions.\n */\nexport const __dangerousOptInToUnstableAPIsOnlyForCoreModules = (\n\tconsent: string,\n\tmoduleName: string\n) => {\n\tif ( ! CORE_MODULES_USING_PRIVATE_APIS.includes( moduleName ) ) {\n\t\tthrow new Error(\n\t\t\t`You tried to opt-in to unstable APIs as module \"${ moduleName }\". ` +\n\t\t\t\t'This feature is only for JavaScript modules shipped with WordPress core. ' +\n\t\t\t\t'Please do not use it in plugins and themes as the unstable APIs will be removed ' +\n\t\t\t\t'without a warning. If you ignore this error and depend on unstable features, ' +\n\t\t\t\t'your product will inevitably break on one of the next WordPress releases.'\n\t\t);\n\t}\n\tif (\n\t\t! allowReRegistration &&\n\t\tregisteredPrivateApis.includes( moduleName )\n\t) {\n\t\t// This check doesn't play well with Story Books / Hot Module Reloading\n\t\t// and isn't included in the Gutenberg plugin. It only matters in the\n\t\t// WordPress core release.\n\t\tthrow new Error(\n\t\t\t`You tried to opt-in to unstable APIs as module \"${ moduleName }\" which is already registered. ` +\n\t\t\t\t'This feature is only for JavaScript modules shipped with WordPress core. ' +\n\t\t\t\t'Please do not use it in plugins and themes as the unstable APIs will be removed ' +\n\t\t\t\t'without a warning. If you ignore this error and depend on unstable features, ' +\n\t\t\t\t'your product will inevitably break on one of the next WordPress releases.'\n\t\t);\n\t}\n\tif ( consent !== requiredConsent ) {\n\t\tthrow new Error(\n\t\t\t`You tried to opt-in to unstable APIs without confirming you know the consequences. ` +\n\t\t\t\t'This feature is only for JavaScript modules shipped with WordPress core. ' +\n\t\t\t\t'Please do not use it in plugins and themes as the unstable APIs will removed ' +\n\t\t\t\t'without a warning. If you ignore this error and depend on unstable features, ' +\n\t\t\t\t'your product will inevitably break on the next WordPress release.'\n\t\t);\n\t}\n\tregisteredPrivateApis.push( moduleName );\n\n\treturn {\n\t\tlock,\n\t\tunlock,\n\t};\n};\n\n/**\n * Binds private data to an object.\n * It does not alter the passed object in any way, only\n * registers it in an internal map of private data.\n *\n * The private data can't be accessed by any other means\n * than the `unlock` function.\n *\n * @example\n * ```js\n * const object = {};\n * const privateData = { a: 1 };\n * lock( object, privateData );\n *\n * object\n * // {}\n *\n * unlock( object );\n * // { a: 1 }\n * ```\n *\n * @param object      The object to bind the private data to.\n * @param privateData The private data to bind to the object.\n */\nfunction lock( object: unknown, privateData: unknown ) {\n\tif ( ! object ) {\n\t\tthrow new Error( 'Cannot lock an undefined object.' );\n\t}\n\tconst _object = object as Record< symbol, WeakKey >;\n\n\tif ( ! ( __private in _object ) ) {\n\t\t_object[ __private ] = {};\n\t}\n\tlockedData.set( _object[ __private ], privateData );\n}\n\n/**\n * Unlocks the private data bound to an object.\n *\n * It does not alter the passed object in any way, only\n * returns the private data paired with it using the `lock()`\n * function.\n *\n * @example\n * ```js\n * const object = {};\n * const privateData = { a: 1 };\n * lock( object, privateData );\n *\n * object\n * // {}\n *\n * unlock( object );\n * // { a: 1 }\n * ```\n *\n * @param object The object to unlock the private data from.\n * @return The private data bound to the object.\n */\nfunction unlock< T = any >( object: unknown ): T {\n\tif ( ! object ) {\n\t\tthrow new Error( 'Cannot unlock an undefined object.' );\n\t}\n\tconst _object = object as Record< symbol, WeakKey >;\n\n\tif ( ! ( __private in _object ) ) {\n\t\tthrow new Error(\n\t\t\t'Cannot unlock an object that was not locked before. '\n\t\t);\n\t}\n\n\treturn lockedData.get( _object[ __private ] );\n}\n\nconst lockedData = new WeakMap();\n\n/**\n * Used by lock() and unlock() to uniquely identify the private data\n * related to a containing object.\n */\nconst __private = Symbol( 'Private API ID' );\n\n// Unit tests utilities:\n\n/**\n * Private function to allow the unit tests to allow\n * a mock module to access the private APIs.\n *\n * @param name The name of the module.\n */\nexport function allowCoreModule( name: string ) {\n\tCORE_MODULES_USING_PRIVATE_APIS.push( name );\n}\n\n/**\n * Private function to allow the unit tests to set\n * a custom list of allowed modules.\n */\nexport function resetAllowedCoreModules() {\n\twhile ( CORE_MODULES_USING_PRIVATE_APIS.length ) {\n\t\tCORE_MODULES_USING_PRIVATE_APIS.pop();\n\t}\n}\n/**\n * Private function to allow the unit tests to reset\n * the list of registered private apis.\n */\nexport function resetRegisteredPrivateApis() {\n\twhile ( registeredPrivateApis.length ) {\n\t\tregisteredPrivateApis.pop();\n\t}\n}\n", "/**\n * WordPress dependencies\n */\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\n\nexport const { lock, unlock } =\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\n\t\t'I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.',\n\t\t'@wordpress/data'\n\t);\n", "/**\n * External dependencies\n */\nimport isPromise from 'is-promise';\n\n/**\n * Simplest possible promise redux middleware.\n *\n * @type {import('redux').Middleware}\n */\nconst promiseMiddleware = () => ( next ) => ( action ) => {\n\tif ( isPromise( action ) ) {\n\t\treturn action.then( ( resolvedAction ) => {\n\t\t\tif ( resolvedAction ) {\n\t\t\t\treturn next( resolvedAction );\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn next( action );\n};\n\nexport default promiseMiddleware;\n", "/** @typedef {import('./registry').WPDataRegistry} WPDataRegistry */\n\n/**\n * Creates a middleware handling resolvers cache invalidation.\n *\n * @param {WPDataRegistry} registry  Registry for which to create the middleware.\n * @param {string}         storeName Name of the store for which to create the middleware.\n *\n * @return {Function} Middleware function.\n */\nconst createResolversCacheMiddleware =\n\t( registry, storeName ) => () => ( next ) => ( action ) => {\n\t\tconst resolvers = registry.select( storeName ).getCachedResolvers();\n\t\tconst resolverEntries = Object.entries( resolvers );\n\t\tresolverEntries.forEach( ( [ selectorName, resolversByArgs ] ) => {\n\t\t\tconst resolver =\n\t\t\t\tregistry.stores[ storeName ]?.resolvers?.[ selectorName ];\n\t\t\tif ( ! resolver || ! resolver.shouldInvalidate ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresolversByArgs.forEach( ( value, args ) => {\n\t\t\t\t// Works around a bug in `EquivalentKeyMap` where `map.delete` merely sets an entry value\n\t\t\t\t// to `undefined` and `map.forEach` then iterates also over these orphaned entries.\n\t\t\t\tif ( value === undefined ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// resolversByArgs is the map Map([ args ] => boolean) storing the cache resolution status for a given selector.\n\t\t\t\t// If the value is \"finished\" or \"error\" it means this resolver has finished its resolution which means we need\n\t\t\t\t// to invalidate it, if it's true it means it's inflight and the invalidation is not necessary.\n\t\t\t\tif ( value.status !== 'finished' && value.status !== 'error' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( ! resolver.shouldInvalidate( action, ...args ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Trigger cache invalidation\n\t\t\t\tregistry\n\t\t\t\t\t.dispatch( storeName )\n\t\t\t\t\t.invalidateResolution( selectorName, args );\n\t\t\t} );\n\t\t} );\n\t\treturn next( action );\n\t};\n\nexport default createResolversCacheMiddleware;\n", "export default function createThunkMiddleware( args ) {\n\treturn () => ( next ) => ( action ) => {\n\t\tif ( typeof action === 'function' ) {\n\t\t\treturn action( args );\n\t\t}\n\n\t\treturn next( action );\n\t};\n}\n", "/**\n * External dependencies\n */\nimport EquivalentKeyMap from 'equivalent-key-map';\nimport type { Reducer } from 'redux';\n\n/**\n * Internal dependencies\n */\nimport { selectorArgsToStateKey, onSubKey } from './utils';\n\ntype Action =\n\t| ReturnType< typeof import('./actions').startResolution >\n\t| ReturnType< typeof import('./actions').finishResolution >\n\t| ReturnType< typeof import('./actions').failResolution >\n\t| ReturnType< typeof import('./actions').startResolutions >\n\t| ReturnType< typeof import('./actions').finishResolutions >\n\t| ReturnType< typeof import('./actions').failResolutions >\n\t| ReturnType< typeof import('./actions').invalidateResolution >\n\t| ReturnType< typeof import('./actions').invalidateResolutionForStore >\n\t| ReturnType<\n\t\t\ttypeof import('./actions').invalidateResolutionForStoreSelector\n\t  >;\n\ntype StateKey = unknown[] | unknown;\nexport type StateValue =\n\t| { status: 'resolving' | 'finished' }\n\t| { status: 'error'; error: Error | unknown };\n\nexport type Status = StateValue[ 'status' ];\nexport type State = EquivalentKeyMap< StateKey, StateValue >;\n\n/**\n * Reducer function returning next state for selector resolution of\n * subkeys, object form:\n *\n *  selectorName -> EquivalentKeyMap<Array,boolean>\n */\nconst subKeysIsResolved: Reducer< Record< string, State >, Action > = onSubKey<\n\tState,\n\tAction\n>( 'selectorName' )( ( state = new EquivalentKeyMap(), action: Action ) => {\n\tswitch ( action.type ) {\n\t\tcase 'START_RESOLUTION': {\n\t\t\tconst nextState = new EquivalentKeyMap( state );\n\t\t\tnextState.set( selectorArgsToStateKey( action.args ), {\n\t\t\t\tstatus: 'resolving',\n\t\t\t} );\n\t\t\treturn nextState;\n\t\t}\n\t\tcase 'FINISH_RESOLUTION': {\n\t\t\tconst nextState = new EquivalentKeyMap( state );\n\t\t\tnextState.set( selectorArgsToStateKey( action.args ), {\n\t\t\t\tstatus: 'finished',\n\t\t\t} );\n\t\t\treturn nextState;\n\t\t}\n\t\tcase 'FAIL_RESOLUTION': {\n\t\t\tconst nextState = new EquivalentKeyMap( state );\n\t\t\tnextState.set( selectorArgsToStateKey( action.args ), {\n\t\t\t\tstatus: 'error',\n\t\t\t\terror: action.error,\n\t\t\t} );\n\t\t\treturn nextState;\n\t\t}\n\t\tcase 'START_RESOLUTIONS': {\n\t\t\tconst nextState = new EquivalentKeyMap( state );\n\t\t\tfor ( const resolutionArgs of action.args ) {\n\t\t\t\tnextState.set( selectorArgsToStateKey( resolutionArgs ), {\n\t\t\t\t\tstatus: 'resolving',\n\t\t\t\t} );\n\t\t\t}\n\t\t\treturn nextState;\n\t\t}\n\t\tcase 'FINISH_RESOLUTIONS': {\n\t\t\tconst nextState = new EquivalentKeyMap( state );\n\t\t\tfor ( const resolutionArgs of action.args ) {\n\t\t\t\tnextState.set( selectorArgsToStateKey( resolutionArgs ), {\n\t\t\t\t\tstatus: 'finished',\n\t\t\t\t} );\n\t\t\t}\n\t\t\treturn nextState;\n\t\t}\n\t\tcase 'FAIL_RESOLUTIONS': {\n\t\t\tconst nextState = new EquivalentKeyMap( state );\n\t\t\taction.args.forEach( ( resolutionArgs, idx ) => {\n\t\t\t\tconst resolutionState: StateValue = {\n\t\t\t\t\tstatus: 'error',\n\t\t\t\t\terror: undefined,\n\t\t\t\t};\n\n\t\t\t\tconst error = action.errors[ idx ];\n\t\t\t\tif ( error ) {\n\t\t\t\t\tresolutionState.error = error;\n\t\t\t\t}\n\n\t\t\t\tnextState.set(\n\t\t\t\t\tselectorArgsToStateKey( resolutionArgs as unknown[] ),\n\t\t\t\t\tresolutionState\n\t\t\t\t);\n\t\t\t} );\n\t\t\treturn nextState;\n\t\t}\n\t\tcase 'INVALIDATE_RESOLUTION': {\n\t\t\tconst nextState = new EquivalentKeyMap( state );\n\t\t\tnextState.delete( selectorArgsToStateKey( action.args ) );\n\t\t\treturn nextState;\n\t\t}\n\t}\n\treturn state;\n} );\n\n/**\n * Reducer function returning next state for selector resolution, object form:\n *\n *   selectorName -> EquivalentKeyMap<Array, boolean>\n *\n * @param state  Current state.\n * @param action Dispatched action.\n *\n * @return Next state.\n */\nconst isResolved = ( state: Record< string, State > = {}, action: Action ) => {\n\tswitch ( action.type ) {\n\t\tcase 'INVALIDATE_RESOLUTION_FOR_STORE':\n\t\t\treturn {};\n\t\tcase 'INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR': {\n\t\t\tif ( action.selectorName in state ) {\n\t\t\t\tconst {\n\t\t\t\t\t[ action.selectorName ]: removedSelector,\n\t\t\t\t\t...restState\n\t\t\t\t} = state;\n\t\t\t\treturn restState;\n\t\t\t}\n\t\t\treturn state;\n\t\t}\n\t\tcase 'START_RESOLUTION':\n\t\tcase 'FINISH_RESOLUTION':\n\t\tcase 'FAIL_RESOLUTION':\n\t\tcase 'START_RESOLUTIONS':\n\t\tcase 'FINISH_RESOLUTIONS':\n\t\tcase 'FAIL_RESOLUTIONS':\n\t\tcase 'INVALIDATE_RESOLUTION':\n\t\t\treturn subKeysIsResolved( state, action );\n\t}\n\treturn state;\n};\n\nexport default isResolved;\n", "/**\n * External dependencies\n */\nimport type { AnyAction, Reducer } from 'redux';\n\n/**\n * Higher-order reducer creator which creates a combined reducer object, keyed\n * by a property on the action object.\n *\n * @param actionProperty Action property by which to key object.\n * @return Higher-order reducer.\n */\nexport const onSubKey =\n\t< TState extends unknown, TAction extends AnyAction >(\n\t\tactionProperty: string\n\t) =>\n\t(\n\t\treducer: Reducer< TState, TAction >\n\t): Reducer< Record< string, TState >, TAction > =>\n\t( state: Record< string, TState > = {}, action ) => {\n\t\t// Retrieve subkey from action. Do not track if undefined; useful for cases\n\t\t// where reducer is scoped by action shape.\n\t\tconst key = action[ actionProperty ];\n\t\tif ( key === undefined ) {\n\t\t\treturn state;\n\t\t}\n\n\t\t// Avoid updating state if unchanged. Note that this also accounts for a\n\t\t// reducer which returns undefined on a key which is not yet tracked.\n\t\tconst nextKeyState = reducer( state[ key ], action );\n\t\tif ( nextKeyState === state[ key ] ) {\n\t\t\treturn state;\n\t\t}\n\n\t\treturn {\n\t\t\t...state,\n\t\t\t[ key ]: nextKeyState,\n\t\t};\n\t};\n\n/**\n * Normalize selector argument array by defaulting `undefined` value to an empty array\n * and removing trailing `undefined` values.\n *\n * @param args Selector argument array\n * @return Normalized state key array\n */\nexport function selectorArgsToStateKey( args: unknown[] | null | undefined ) {\n\tif ( args === undefined || args === null ) {\n\t\treturn [];\n\t}\n\n\tconst len = args.length;\n\tlet idx = len;\n\twhile ( idx > 0 && args[ idx - 1 ] === undefined ) {\n\t\tidx--;\n\t}\n\treturn idx === len ? args : args.slice( 0, idx );\n}\n", "/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { createSelector } from '../../create-selector';\nimport { selectorArgsToStateKey } from './utils';\n\n/** @typedef {Record<string, import('./reducer').State>} State */\n/** @typedef {import('./reducer').StateValue} StateValue */\n/** @typedef {import('./reducer').Status} Status */\n\n/**\n * Returns the raw resolution state value for a given selector name,\n * and arguments set. May be undefined if the selector has never been resolved\n * or not resolved for the given set of arguments, otherwise true or false for\n * resolution started and completed respectively.\n *\n * @param {State}      state        Data state.\n * @param {string}     selectorName Selector name.\n * @param {unknown[]?} args         Arguments passed to selector.\n *\n * @return {StateValue|undefined} isResolving value.\n */\nexport function getResolutionState( state, selectorName, args ) {\n\tconst map = state[ selectorName ];\n\tif ( ! map ) {\n\t\treturn;\n\t}\n\n\treturn map.get( selectorArgsToStateKey( args ) );\n}\n\n/**\n * Returns an `isResolving`-like value for a given selector name and arguments set.\n * Its value is either `undefined` if the selector has never been resolved or has been\n * invalidated, or a `true`/`false` boolean value if the resolution is in progress or\n * has finished, respectively.\n *\n * This is a legacy selector that was implemented when the \"raw\" internal data had\n * this `undefined | boolean` format. Nowadays the internal value is an object that\n * can be retrieved with `getResolutionState`.\n *\n * @deprecated\n *\n * @param {State}      state        Data state.\n * @param {string}     selectorName Selector name.\n * @param {unknown[]?} args         Arguments passed to selector.\n *\n * @return {boolean | undefined} isResolving value.\n */\nexport function getIsResolving( state, selectorName, args ) {\n\tdeprecated( 'wp.data.select( store ).getIsResolving', {\n\t\tsince: '6.6',\n\t\tversion: '6.8',\n\t\talternative: 'wp.data.select( store ).getResolutionState',\n\t} );\n\n\tconst resolutionState = getResolutionState( state, selectorName, args );\n\treturn resolutionState && resolutionState.status === 'resolving';\n}\n\n/**\n * Returns true if resolution has already been triggered for a given\n * selector name, and arguments set.\n *\n * @param {State}      state        Data state.\n * @param {string}     selectorName Selector name.\n * @param {unknown[]?} args         Arguments passed to selector.\n *\n * @return {boolean} Whether resolution has been triggered.\n */\nexport function hasStartedResolution( state, selectorName, args ) {\n\treturn getResolutionState( state, selectorName, args ) !== undefined;\n}\n\n/**\n * Returns true if resolution has completed for a given selector\n * name, and arguments set.\n *\n * @param {State}      state        Data state.\n * @param {string}     selectorName Selector name.\n * @param {unknown[]?} args         Arguments passed to selector.\n *\n * @return {boolean} Whether resolution has completed.\n */\nexport function hasFinishedResolution( state, selectorName, args ) {\n\tconst status = getResolutionState( state, selectorName, args )?.status;\n\treturn status === 'finished' || status === 'error';\n}\n\n/**\n * Returns true if resolution has failed for a given selector\n * name, and arguments set.\n *\n * @param {State}      state        Data state.\n * @param {string}     selectorName Selector name.\n * @param {unknown[]?} args         Arguments passed to selector.\n *\n * @return {boolean} Has resolution failed\n */\nexport function hasResolutionFailed( state, selectorName, args ) {\n\treturn getResolutionState( state, selectorName, args )?.status === 'error';\n}\n\n/**\n * Returns the resolution error for a given selector name, and arguments set.\n * Note it may be of an Error type, but may also be null, undefined, or anything else\n * that can be `throw`-n.\n *\n * @param {State}      state        Data state.\n * @param {string}     selectorName Selector name.\n * @param {unknown[]?} args         Arguments passed to selector.\n *\n * @return {Error|unknown} Last resolution error\n */\nexport function getResolutionError( state, selectorName, args ) {\n\tconst resolutionState = getResolutionState( state, selectorName, args );\n\treturn resolutionState?.status === 'error' ? resolutionState.error : null;\n}\n\n/**\n * Returns true if resolution has been triggered but has not yet completed for\n * a given selector name, and arguments set.\n *\n * @param {State}      state        Data state.\n * @param {string}     selectorName Selector name.\n * @param {unknown[]?} args         Arguments passed to selector.\n *\n * @return {boolean} Whether resolution is in progress.\n */\nexport function isResolving( state, selectorName, args ) {\n\treturn (\n\t\tgetResolutionState( state, selectorName, args )?.status === 'resolving'\n\t);\n}\n\n/**\n * Returns the list of the cached resolvers.\n *\n * @param {State} state Data state.\n *\n * @return {State} Resolvers mapped by args and selectorName.\n */\nexport function getCachedResolvers( state ) {\n\treturn state;\n}\n\n/**\n * Whether the store has any currently resolving selectors.\n *\n * @param {State} state Data state.\n *\n * @return {boolean} True if one or more selectors are resolving, false otherwise.\n */\nexport function hasResolvingSelectors( state ) {\n\treturn Object.values( state ).some( ( selectorState ) =>\n\t\t/**\n\t\t * This uses the internal `_map` property of `EquivalentKeyMap` for\n\t\t * optimization purposes, since the `EquivalentKeyMap` implementation\n\t\t * does not support a `.values()` implementation.\n\t\t *\n\t\t * @see https://github.com/aduth/equivalent-key-map\n\t\t */\n\t\tArray.from( selectorState._map.values() ).some(\n\t\t\t( resolution ) => resolution[ 1 ]?.status === 'resolving'\n\t\t)\n\t);\n}\n\n/**\n * Retrieves the total number of selectors, grouped per status.\n *\n * @param {State} state Data state.\n *\n * @return {Object} Object, containing selector totals by status.\n */\nexport const countSelectorsByStatus = createSelector(\n\t( state ) => {\n\t\tconst selectorsByStatus = {};\n\n\t\tObject.values( state ).forEach( ( selectorState ) =>\n\t\t\t/**\n\t\t\t * This uses the internal `_map` property of `EquivalentKeyMap` for\n\t\t\t * optimization purposes, since the `EquivalentKeyMap` implementation\n\t\t\t * does not support a `.values()` implementation.\n\t\t\t *\n\t\t\t * @see https://github.com/aduth/equivalent-key-map\n\t\t\t */\n\t\t\tArray.from( selectorState._map.values() ).forEach(\n\t\t\t\t( resolution ) => {\n\t\t\t\t\tconst currentStatus = resolution[ 1 ]?.status ?? 'error';\n\t\t\t\t\tif ( ! selectorsByStatus[ currentStatus ] ) {\n\t\t\t\t\t\tselectorsByStatus[ currentStatus ] = 0;\n\t\t\t\t\t}\n\t\t\t\t\tselectorsByStatus[ currentStatus ]++;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\treturn selectorsByStatus;\n\t},\n\t( state ) => [ state ]\n);\n", "/**\n * Returns an action object used in signalling that selector resolution has\n * started.\n *\n * @param {string}    selectorName Name of selector for which resolver triggered.\n * @param {unknown[]} args         Arguments to associate for uniqueness.\n *\n * @return {{ type: 'START_RESOLUTION', selectorName: string, args: unknown[] }} Action object.\n */\nexport function startResolution( selectorName, args ) {\n\treturn {\n\t\ttype: 'START_RESOLUTION',\n\t\tselectorName,\n\t\targs,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that selector resolution has\n * completed.\n *\n * @param {string}    selectorName Name of selector for which resolver triggered.\n * @param {unknown[]} args         Arguments to associate for uniqueness.\n *\n * @return {{ type: 'FINISH_RESOLUTION', selectorName: string, args: unknown[] }} Action object.\n */\nexport function finishResolution( selectorName, args ) {\n\treturn {\n\t\ttype: 'FINISH_RESOLUTION',\n\t\tselectorName,\n\t\targs,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that selector resolution has\n * failed.\n *\n * @param {string}        selectorName Name of selector for which resolver triggered.\n * @param {unknown[]}     args         Arguments to associate for uniqueness.\n * @param {Error|unknown} error        The error that caused the failure.\n *\n * @return {{ type: 'FAIL_RESOLUTION', selectorName: string, args: unknown[], error: Error|unknown }} Action object.\n */\nexport function failResolution( selectorName, args, error ) {\n\treturn {\n\t\ttype: 'FAIL_RESOLUTION',\n\t\tselectorName,\n\t\targs,\n\t\terror,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that a batch of selector resolutions has\n * started.\n *\n * @param {string}      selectorName Name of selector for which resolver triggered.\n * @param {unknown[][]} args         Array of arguments to associate for uniqueness, each item\n *                                   is associated to a resolution.\n *\n * @return {{ type: 'START_RESOLUTIONS', selectorName: string, args: unknown[][] }} Action object.\n */\nexport function startResolutions( selectorName, args ) {\n\treturn {\n\t\ttype: 'START_RESOLUTIONS',\n\t\tselectorName,\n\t\targs,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that a batch of selector resolutions has\n * completed.\n *\n * @param {string}      selectorName Name of selector for which resolver triggered.\n * @param {unknown[][]} args         Array of arguments to associate for uniqueness, each item\n *                                   is associated to a resolution.\n *\n * @return {{ type: 'FINISH_RESOLUTIONS', selectorName: string, args: unknown[][] }} Action object.\n */\nexport function finishResolutions( selectorName, args ) {\n\treturn {\n\t\ttype: 'FINISH_RESOLUTIONS',\n\t\tselectorName,\n\t\targs,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that a batch of selector resolutions has\n * completed and at least one of them has failed.\n *\n * @param {string}            selectorName Name of selector for which resolver triggered.\n * @param {unknown[]}         args         Array of arguments to associate for uniqueness, each item\n *                                         is associated to a resolution.\n * @param {(Error|unknown)[]} errors       Array of errors to associate for uniqueness, each item\n *                                         is associated to a resolution.\n * @return {{ type: 'FAIL_RESOLUTIONS', selectorName: string, args: unknown[], errors: Array<Error|unknown> }} Action object.\n */\nexport function failResolutions( selectorName, args, errors ) {\n\treturn {\n\t\ttype: 'FAIL_RESOLUTIONS',\n\t\tselectorName,\n\t\targs,\n\t\terrors,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that we should invalidate the resolution cache.\n *\n * @param {string}    selectorName Name of selector for which resolver should be invalidated.\n * @param {unknown[]} args         Arguments to associate for uniqueness.\n *\n * @return {{ type: 'INVALIDATE_RESOLUTION', selectorName: string, args: any[] }} Action object.\n */\nexport function invalidateResolution( selectorName, args ) {\n\treturn {\n\t\ttype: 'INVALIDATE_RESOLUTION',\n\t\tselectorName,\n\t\targs,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the resolution\n * should be invalidated.\n *\n * @return {{ type: 'INVALIDATE_RESOLUTION_FOR_STORE' }} Action object.\n */\nexport function invalidateResolutionForStore() {\n\treturn {\n\t\ttype: 'INVALIDATE_RESOLUTION_FOR_STORE',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the resolution cache for a\n * given selectorName should be invalidated.\n *\n * @param {string} selectorName Name of selector for which all resolvers should\n *                              be invalidated.\n *\n * @return  {{ type: 'INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR', selectorName: string }} Action object.\n */\nexport function invalidateResolutionForStoreSelector( selectorName ) {\n\treturn {\n\t\ttype: 'INVALIDATE_RESOLUTION_FOR_STORE_SELECTOR',\n\t\tselectorName,\n\t};\n}\n", "const coreDataStore = {\n\tname: 'core/data',\n\tinstantiate( registry ) {\n\t\tconst getCoreDataSelector =\n\t\t\t( selectorName ) =>\n\t\t\t( key, ...args ) => {\n\t\t\t\treturn registry.select( key )[ selectorName ]( ...args );\n\t\t\t};\n\n\t\tconst getCoreDataAction =\n\t\t\t( actionName ) =>\n\t\t\t( key, ...args ) => {\n\t\t\t\treturn registry.dispatch( key )[ actionName ]( ...args );\n\t\t\t};\n\n\t\treturn {\n\t\t\tgetSelectors() {\n\t\t\t\treturn Object.fromEntries(\n\t\t\t\t\t[\n\t\t\t\t\t\t'getIsResolving',\n\t\t\t\t\t\t'hasStartedResolution',\n\t\t\t\t\t\t'hasFinishedResolution',\n\t\t\t\t\t\t'isResolving',\n\t\t\t\t\t\t'getCachedResolvers',\n\t\t\t\t\t].map( ( selectorName ) => [\n\t\t\t\t\t\tselectorName,\n\t\t\t\t\t\tgetCoreDataSelector( selectorName ),\n\t\t\t\t\t] )\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tgetActions() {\n\t\t\t\treturn Object.fromEntries(\n\t\t\t\t\t[\n\t\t\t\t\t\t'startResolution',\n\t\t\t\t\t\t'finishResolution',\n\t\t\t\t\t\t'invalidateResolution',\n\t\t\t\t\t\t'invalidateResolutionForStore',\n\t\t\t\t\t\t'invalidateResolutionForStoreSelector',\n\t\t\t\t\t].map( ( actionName ) => [\n\t\t\t\t\t\tactionName,\n\t\t\t\t\t\tgetCoreDataAction( actionName ),\n\t\t\t\t\t] )\n\t\t\t\t);\n\t\t\t},\n\n\t\t\tsubscribe() {\n\t\t\t\t// There's no reasons to trigger any listener when we subscribe to this store\n\t\t\t\t// because there's no state stored in this store that need to retrigger selectors\n\t\t\t\t// if a change happens, the corresponding store where the tracking stated live\n\t\t\t\t// would have already triggered a \"subscribe\" call.\n\t\t\t\treturn () => () => {};\n\t\t\t},\n\t\t};\n\t},\n};\n\nexport default coreDataStore;\n", "export interface DataEmitter {\n\temit: VoidFunction;\n\tsubscribe: ( listener: VoidFunction ) => VoidFunction;\n\tpause: VoidFunction;\n\tresume: VoidFunction;\n\tisPaused: boolean;\n}\n\n/**\n * Create an event emitter.\n *\n * @return The event emitter.\n */\nexport function createEmitter(): DataEmitter {\n\tlet isPaused = false;\n\tlet isPending = false;\n\tconst listeners = new Set< VoidFunction >();\n\tconst notifyListeners = () =>\n\t\t// We use Array.from to clone the listeners Set\n\t\t// This ensures that we don't run a listener\n\t\t// that was added as a response to another listener.\n\t\tArray.from( listeners ).forEach( ( listener ) => listener() );\n\n\treturn {\n\t\tget isPaused() {\n\t\t\treturn isPaused;\n\t\t},\n\n\t\tsubscribe( listener ) {\n\t\t\tlisteners.add( listener );\n\t\t\treturn () => listeners.delete( listener );\n\t\t},\n\n\t\tpause() {\n\t\t\tisPaused = true;\n\t\t},\n\n\t\tresume() {\n\t\t\tisPaused = false;\n\t\t\tif ( isPending ) {\n\t\t\t\tisPending = false;\n\t\t\t\tnotifyListeners();\n\t\t\t}\n\t\t},\n\n\t\temit() {\n\t\t\tif ( isPaused ) {\n\t\t\t\tisPending = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnotifyListeners();\n\t\t},\n\t};\n}\n", "/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport createReduxStore from './redux-store';\nimport coreDataStore from './store';\nimport { createEmitter } from './utils/emitter';\nimport { lock, unlock } from './lock-unlock';\n\n/** @typedef {import('./types').StoreDescriptor} StoreDescriptor */\n\n/**\n * @typedef {Object} WPDataRegistry An isolated orchestrator of store registrations.\n *\n * @property {Function} registerGenericStore Given a namespace key and settings\n *                                           object, registers a new generic\n *                                           store.\n * @property {Function} registerStore        Given a namespace key and settings\n *                                           object, registers a new namespace\n *                                           store.\n * @property {Function} subscribe            Given a function callback, invokes\n *                                           the callback on any change to state\n *                                           within any registered store.\n * @property {Function} select               Given a namespace key, returns an\n *                                           object of the  store's registered\n *                                           selectors.\n * @property {Function} dispatch             Given a namespace key, returns an\n *                                           object of the store's registered\n *                                           action dispatchers.\n */\n\n/**\n * @typedef {Object} WPDataPlugin An object of registry function overrides.\n *\n * @property {Function} registerStore registers store.\n */\n\nfunction getStoreName( storeNameOrDescriptor ) {\n\treturn typeof storeNameOrDescriptor === 'string'\n\t\t? storeNameOrDescriptor\n\t\t: storeNameOrDescriptor.name;\n}\n/**\n * Creates a new store registry, given an optional object of initial store\n * configurations.\n *\n * @param {Object}  storeConfigs Initial store configurations.\n * @param {?Object} parent       Parent registry.\n *\n * @return {WPDataRegistry} Data registry.\n */\nexport function createRegistry( storeConfigs = {}, parent = null ) {\n\tconst stores = {};\n\tconst emitter = createEmitter();\n\tlet listeningStores = null;\n\n\t/**\n\t * Global listener called for each store's update.\n\t */\n\tfunction globalListener() {\n\t\temitter.emit();\n\t}\n\n\t/**\n\t * Subscribe to changes to any data, either in all stores in registry, or\n\t * in one specific store.\n\t *\n\t * @param {Function}                listener              Listener function.\n\t * @param {string|StoreDescriptor?} storeNameOrDescriptor Optional store name.\n\t *\n\t * @return {Function} Unsubscribe function.\n\t */\n\tconst subscribe = ( listener, storeNameOrDescriptor ) => {\n\t\t// subscribe to all stores\n\t\tif ( ! storeNameOrDescriptor ) {\n\t\t\treturn emitter.subscribe( listener );\n\t\t}\n\n\t\t// subscribe to one store\n\t\tconst storeName = getStoreName( storeNameOrDescriptor );\n\t\tconst store = stores[ storeName ];\n\t\tif ( store ) {\n\t\t\treturn store.subscribe( listener );\n\t\t}\n\n\t\t// Trying to access a store that hasn't been registered,\n\t\t// this is a pattern rarely used but seen in some places.\n\t\t// We fallback to global `subscribe` here for backward-compatibility for now.\n\t\t// See https://github.com/WordPress/gutenberg/pull/27466 for more info.\n\t\tif ( ! parent ) {\n\t\t\treturn emitter.subscribe( listener );\n\t\t}\n\n\t\treturn parent.subscribe( listener, storeNameOrDescriptor );\n\t};\n\n\t/**\n\t * Calls a selector given the current state and extra arguments.\n\t *\n\t * @param {string|StoreDescriptor} storeNameOrDescriptor Unique namespace identifier for the store\n\t *                                                       or the store descriptor.\n\t *\n\t * @return {*} The selector's returned value.\n\t */\n\tfunction select( storeNameOrDescriptor ) {\n\t\tconst storeName = getStoreName( storeNameOrDescriptor );\n\t\tlisteningStores?.add( storeName );\n\t\tconst store = stores[ storeName ];\n\t\tif ( store ) {\n\t\t\treturn store.getSelectors();\n\t\t}\n\n\t\treturn parent?.select( storeName );\n\t}\n\n\tfunction __unstableMarkListeningStores( callback, ref ) {\n\t\tlisteningStores = new Set();\n\t\ttry {\n\t\t\treturn callback.call( this );\n\t\t} finally {\n\t\t\tref.current = Array.from( listeningStores );\n\t\t\tlisteningStores = null;\n\t\t}\n\t}\n\n\t/**\n\t * Given a store descriptor, returns an object containing the store's selectors pre-bound to\n\t * state so that you only need to supply additional arguments, and modified so that they return\n\t * promises that resolve to their eventual values, after any resolvers have ran.\n\t *\n\t * @param {StoreDescriptor|string} storeNameOrDescriptor The store descriptor. The legacy calling\n\t *                                                       convention of passing the store name is\n\t *                                                       also supported.\n\t *\n\t * @return {Object} Each key of the object matches the name of a selector.\n\t */\n\tfunction resolveSelect( storeNameOrDescriptor ) {\n\t\tconst storeName = getStoreName( storeNameOrDescriptor );\n\t\tlisteningStores?.add( storeName );\n\t\tconst store = stores[ storeName ];\n\t\tif ( store ) {\n\t\t\treturn store.getResolveSelectors();\n\t\t}\n\n\t\treturn parent && parent.resolveSelect( storeName );\n\t}\n\n\t/**\n\t * Given a store descriptor, returns an object containing the store's selectors pre-bound to\n\t * state so that you only need to supply additional arguments, and modified so that they throw\n\t * promises in case the selector is not resolved yet.\n\t *\n\t * @param {StoreDescriptor|string} storeNameOrDescriptor The store descriptor. The legacy calling\n\t *                                                       convention of passing the store name is\n\t *                                                       also supported.\n\t *\n\t * @return {Object} Object containing the store's suspense-wrapped selectors.\n\t */\n\tfunction suspendSelect( storeNameOrDescriptor ) {\n\t\tconst storeName = getStoreName( storeNameOrDescriptor );\n\t\tlisteningStores?.add( storeName );\n\t\tconst store = stores[ storeName ];\n\t\tif ( store ) {\n\t\t\treturn store.getSuspendSelectors();\n\t\t}\n\n\t\treturn parent && parent.suspendSelect( storeName );\n\t}\n\n\t/**\n\t * Returns the available actions for a part of the state.\n\t *\n\t * @param {string|StoreDescriptor} storeNameOrDescriptor Unique namespace identifier for the store\n\t *                                                       or the store descriptor.\n\t *\n\t * @return {*} The action's returned value.\n\t */\n\tfunction dispatch( storeNameOrDescriptor ) {\n\t\tconst storeName = getStoreName( storeNameOrDescriptor );\n\t\tconst store = stores[ storeName ];\n\t\tif ( store ) {\n\t\t\treturn store.getActions();\n\t\t}\n\n\t\treturn parent && parent.dispatch( storeName );\n\t}\n\n\t//\n\t// Deprecated\n\t// TODO: Remove this after `use()` is removed.\n\tfunction withPlugins( attributes ) {\n\t\treturn Object.fromEntries(\n\t\t\tObject.entries( attributes ).map( ( [ key, attribute ] ) => {\n\t\t\t\tif ( typeof attribute !== 'function' ) {\n\t\t\t\t\treturn [ key, attribute ];\n\t\t\t\t}\n\t\t\t\treturn [\n\t\t\t\t\tkey,\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\treturn registry[ key ].apply( null, arguments );\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t} )\n\t\t);\n\t}\n\n\t/**\n\t * Registers a store instance.\n\t *\n\t * @param {string}   name        Store registry name.\n\t * @param {Function} createStore Function that creates a store object (getSelectors, getActions, subscribe).\n\t */\n\tfunction registerStoreInstance( name, createStore ) {\n\t\tif ( stores[ name ] ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error( 'Store \"' + name + '\" is already registered.' );\n\t\t\treturn stores[ name ];\n\t\t}\n\n\t\tconst store = createStore();\n\n\t\tif ( typeof store.getSelectors !== 'function' ) {\n\t\t\tthrow new TypeError( 'store.getSelectors must be a function' );\n\t\t}\n\t\tif ( typeof store.getActions !== 'function' ) {\n\t\t\tthrow new TypeError( 'store.getActions must be a function' );\n\t\t}\n\t\tif ( typeof store.subscribe !== 'function' ) {\n\t\t\tthrow new TypeError( 'store.subscribe must be a function' );\n\t\t}\n\t\t// The emitter is used to keep track of active listeners when the registry\n\t\t// get paused, that way, when resumed we should be able to call all these\n\t\t// pending listeners.\n\t\tstore.emitter = createEmitter();\n\t\tconst currentSubscribe = store.subscribe;\n\t\tstore.subscribe = ( listener ) => {\n\t\t\tconst unsubscribeFromEmitter = store.emitter.subscribe( listener );\n\t\t\tconst unsubscribeFromStore = currentSubscribe( () => {\n\t\t\t\tif ( store.emitter.isPaused ) {\n\t\t\t\t\tstore.emitter.emit();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlistener();\n\t\t\t} );\n\n\t\t\treturn () => {\n\t\t\t\tunsubscribeFromStore?.();\n\t\t\t\tunsubscribeFromEmitter?.();\n\t\t\t};\n\t\t};\n\t\tstores[ name ] = store;\n\t\tstore.subscribe( globalListener );\n\n\t\t// Copy private actions and selectors from the parent store.\n\t\tif ( parent ) {\n\t\t\ttry {\n\t\t\t\tunlock( store.store ).registerPrivateActions(\n\t\t\t\t\tunlock( parent ).privateActionsOf( name )\n\t\t\t\t);\n\t\t\t\tunlock( store.store ).registerPrivateSelectors(\n\t\t\t\t\tunlock( parent ).privateSelectorsOf( name )\n\t\t\t\t);\n\t\t\t} catch ( e ) {\n\t\t\t\t// unlock() throws if store.store was not locked.\n\t\t\t\t// The error indicates there's nothing to do here so let's\n\t\t\t\t// ignore it.\n\t\t\t}\n\t\t}\n\n\t\treturn store;\n\t}\n\n\t/**\n\t * Registers a new store given a store descriptor.\n\t *\n\t * @param {StoreDescriptor} store Store descriptor.\n\t */\n\tfunction register( store ) {\n\t\tregisterStoreInstance( store.name, () =>\n\t\t\tstore.instantiate( registry )\n\t\t);\n\t}\n\n\tfunction registerGenericStore( name, store ) {\n\t\tdeprecated( 'wp.data.registerGenericStore', {\n\t\t\tsince: '5.9',\n\t\t\talternative: 'wp.data.register( storeDescriptor )',\n\t\t} );\n\t\tregisterStoreInstance( name, () => store );\n\t}\n\n\t/**\n\t * Registers a standard `@wordpress/data` store.\n\t *\n\t * @param {string} storeName Unique namespace identifier.\n\t * @param {Object} options   Store description (reducer, actions, selectors, resolvers).\n\t *\n\t * @return {Object} Registered store object.\n\t */\n\tfunction registerStore( storeName, options ) {\n\t\tif ( ! options.reducer ) {\n\t\t\tthrow new TypeError( 'Must specify store reducer' );\n\t\t}\n\n\t\tconst store = registerStoreInstance( storeName, () =>\n\t\t\tcreateReduxStore( storeName, options ).instantiate( registry )\n\t\t);\n\n\t\treturn store.store;\n\t}\n\n\tfunction batch( callback ) {\n\t\t// If we're already batching, just call the callback.\n\t\tif ( emitter.isPaused ) {\n\t\t\tcallback();\n\t\t\treturn;\n\t\t}\n\n\t\temitter.pause();\n\t\tObject.values( stores ).forEach( ( store ) => store.emitter.pause() );\n\t\ttry {\n\t\t\tcallback();\n\t\t} finally {\n\t\t\temitter.resume();\n\t\t\tObject.values( stores ).forEach( ( store ) =>\n\t\t\t\tstore.emitter.resume()\n\t\t\t);\n\t\t}\n\t}\n\n\tlet registry = {\n\t\tbatch,\n\t\tstores,\n\t\tnamespaces: stores, // TODO: Deprecate/remove this.\n\t\tsubscribe,\n\t\tselect,\n\t\tresolveSelect,\n\t\tsuspendSelect,\n\t\tdispatch,\n\t\tuse,\n\t\tregister,\n\t\tregisterGenericStore,\n\t\tregisterStore,\n\t\t__unstableMarkListeningStores,\n\t};\n\n\t//\n\t// TODO:\n\t// This function will be deprecated as soon as it is no longer internally referenced.\n\tfunction use( plugin, options ) {\n\t\tif ( ! plugin ) {\n\t\t\treturn;\n\t\t}\n\n\t\tregistry = {\n\t\t\t...registry,\n\t\t\t...plugin( registry, options ),\n\t\t};\n\n\t\treturn registry;\n\t}\n\n\tregistry.register( coreDataStore );\n\n\tfor ( const [ name, config ] of Object.entries( storeConfigs ) ) {\n\t\tregistry.register( createReduxStore( name, config ) );\n\t}\n\n\tif ( parent ) {\n\t\tparent.subscribe( globalListener );\n\t}\n\n\tconst registryWithPlugins = withPlugins( registry );\n\tlock( registryWithPlugins, {\n\t\tprivateActionsOf: ( name ) => {\n\t\t\ttry {\n\t\t\t\treturn unlock( stores[ name ].store ).privateActions;\n\t\t\t} catch ( e ) {\n\t\t\t\t// unlock() throws an error the store was not locked – this means\n\t\t\t\t// there no private actions are available\n\t\t\t\treturn {};\n\t\t\t}\n\t\t},\n\t\tprivateSelectorsOf: ( name ) => {\n\t\t\ttry {\n\t\t\t\treturn unlock( stores[ name ].store ).privateSelectors;\n\t\t\t} catch ( e ) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t},\n\t} );\n\treturn registryWithPlugins;\n}\n", "/**\n * Internal dependencies\n */\nimport { createRegistry } from './registry';\n\nexport default createRegistry();\n", "/**\n * External dependencies\n */\nimport { isPlainObject } from 'is-plain-object';\nimport deepmerge from 'deepmerge';\n\n/**\n * Internal dependencies\n */\nimport defaultStorage from './storage/default';\nimport { combineReducers } from '../../';\n\n/** @typedef {import('../../registry').WPDataRegistry} WPDataRegistry */\n\n/** @typedef {import('../../registry').WPDataPlugin} WPDataPlugin */\n\n/**\n * @typedef {Object} WPDataPersistencePluginOptions Persistence plugin options.\n *\n * @property {Storage} storage    Persistent storage implementation. This must\n *                                at least implement `getItem` and `setItem` of\n *                                the Web Storage API.\n * @property {string}  storageKey Key on which to set in persistent storage.\n */\n\n/**\n * Default plugin storage.\n *\n * @type {Storage}\n */\nconst DEFAULT_STORAGE = defaultStorage;\n\n/**\n * Default plugin storage key.\n *\n * @type {string}\n */\nconst DEFAULT_STORAGE_KEY = 'WP_DATA';\n\n/**\n * Higher-order reducer which invokes the original reducer only if state is\n * inequal from that of the action's `nextState` property, otherwise returning\n * the original state reference.\n *\n * @param {Function} reducer Original reducer.\n *\n * @return {Function} Enhanced reducer.\n */\nexport const withLazySameState = ( reducer ) => ( state, action ) => {\n\tif ( action.nextState === state ) {\n\t\treturn state;\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Creates a persistence interface, exposing getter and setter methods (`get`\n * and `set` respectively).\n *\n * @param {WPDataPersistencePluginOptions} options Plugin options.\n *\n * @return {Object} Persistence interface.\n */\nexport function createPersistenceInterface( options ) {\n\tconst { storage = DEFAULT_STORAGE, storageKey = DEFAULT_STORAGE_KEY } =\n\t\toptions;\n\n\tlet data;\n\n\t/**\n\t * Returns the persisted data as an object, defaulting to an empty object.\n\t *\n\t * @return {Object} Persisted data.\n\t */\n\tfunction getData() {\n\t\tif ( data === undefined ) {\n\t\t\t// If unset, getItem is expected to return null. Fall back to\n\t\t\t// empty object.\n\t\t\tconst persisted = storage.getItem( storageKey );\n\t\t\tif ( persisted === null ) {\n\t\t\t\tdata = {};\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tdata = JSON.parse( persisted );\n\t\t\t\t} catch ( error ) {\n\t\t\t\t\t// Similarly, should any error be thrown during parse of\n\t\t\t\t\t// the string (malformed JSON), fall back to empty object.\n\t\t\t\t\tdata = {};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * Merges an updated reducer state into the persisted data.\n\t *\n\t * @param {string} key   Key to update.\n\t * @param {*}      value Updated value.\n\t */\n\tfunction setData( key, value ) {\n\t\tdata = { ...data, [ key ]: value };\n\t\tstorage.setItem( storageKey, JSON.stringify( data ) );\n\t}\n\n\treturn {\n\t\tget: getData,\n\t\tset: setData,\n\t};\n}\n\n/**\n * Data plugin to persist store state into a single storage key.\n *\n * @param {WPDataRegistry}                  registry      Data registry.\n * @param {?WPDataPersistencePluginOptions} pluginOptions Plugin options.\n *\n * @return {WPDataPlugin} Data plugin.\n */\nfunction persistencePlugin( registry, pluginOptions ) {\n\tconst persistence = createPersistenceInterface( pluginOptions );\n\n\t/**\n\t * Creates an enhanced store dispatch function, triggering the state of the\n\t * given store name to be persisted when changed.\n\t *\n\t * @param {Function}       getState  Function which returns current state.\n\t * @param {string}         storeName Store name.\n\t * @param {?Array<string>} keys      Optional subset of keys to save.\n\t *\n\t * @return {Function} Enhanced dispatch function.\n\t */\n\tfunction createPersistOnChange( getState, storeName, keys ) {\n\t\tlet getPersistedState;\n\t\tif ( Array.isArray( keys ) ) {\n\t\t\t// Given keys, the persisted state should by produced as an object\n\t\t\t// of the subset of keys. This implementation uses combineReducers\n\t\t\t// to leverage its behavior of returning the same object when none\n\t\t\t// of the property values changes. This allows a strict reference\n\t\t\t// equality to bypass a persistence set on an unchanging state.\n\t\t\tconst reducers = keys.reduce(\n\t\t\t\t( accumulator, key ) =>\n\t\t\t\t\tObject.assign( accumulator, {\n\t\t\t\t\t\t[ key ]: ( state, action ) => action.nextState[ key ],\n\t\t\t\t\t} ),\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tgetPersistedState = withLazySameState(\n\t\t\t\tcombineReducers( reducers )\n\t\t\t);\n\t\t} else {\n\t\t\tgetPersistedState = ( state, action ) => action.nextState;\n\t\t}\n\n\t\tlet lastState = getPersistedState( undefined, {\n\t\t\tnextState: getState(),\n\t\t} );\n\n\t\treturn () => {\n\t\t\tconst state = getPersistedState( lastState, {\n\t\t\t\tnextState: getState(),\n\t\t\t} );\n\t\t\tif ( state !== lastState ) {\n\t\t\t\tpersistence.set( storeName, state );\n\t\t\t\tlastState = state;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn {\n\t\tregisterStore( storeName, options ) {\n\t\t\tif ( ! options.persist ) {\n\t\t\t\treturn registry.registerStore( storeName, options );\n\t\t\t}\n\n\t\t\t// Load from persistence to use as initial state.\n\t\t\tconst persistedState = persistence.get()[ storeName ];\n\t\t\tif ( persistedState !== undefined ) {\n\t\t\t\tlet initialState = options.reducer( options.initialState, {\n\t\t\t\t\ttype: '@@WP/PERSISTENCE_RESTORE',\n\t\t\t\t} );\n\n\t\t\t\tif (\n\t\t\t\t\tisPlainObject( initialState ) &&\n\t\t\t\t\tisPlainObject( persistedState )\n\t\t\t\t) {\n\t\t\t\t\t// If state is an object, ensure that:\n\t\t\t\t\t// - Other keys are left intact when persisting only a\n\t\t\t\t\t//   subset of keys.\n\t\t\t\t\t// - New keys in what would otherwise be used as initial\n\t\t\t\t\t//   state are deeply merged as base for persisted value.\n\t\t\t\t\tinitialState = deepmerge( initialState, persistedState, {\n\t\t\t\t\t\tisMergeableObject: isPlainObject,\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t// If there is a mismatch in object-likeness of default\n\t\t\t\t\t// initial or persisted state, defer to persisted value.\n\t\t\t\t\tinitialState = persistedState;\n\t\t\t\t}\n\n\t\t\t\toptions = {\n\t\t\t\t\t...options,\n\t\t\t\t\tinitialState,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst store = registry.registerStore( storeName, options );\n\n\t\t\tstore.subscribe(\n\t\t\t\tcreatePersistOnChange(\n\t\t\t\t\tstore.getState,\n\t\t\t\t\tstoreName,\n\t\t\t\t\toptions.persist\n\t\t\t\t)\n\t\t\t);\n\n\t\t\treturn store;\n\t\t},\n\t};\n}\n\npersistencePlugin.__unstableMigrate = () => {};\n\nexport default persistencePlugin;\n", "let objectStorage;\n\nconst storage = {\n\tgetItem( key ) {\n\t\tif ( ! objectStorage || ! objectStorage[ key ] ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn objectStorage[ key ];\n\t},\n\tsetItem( key, value ) {\n\t\tif ( ! objectStorage ) {\n\t\t\tstorage.clear();\n\t\t}\n\n\t\tobjectStorage[ key ] = String( value );\n\t},\n\tclear() {\n\t\tobjectStorage = Object.create( null );\n\t},\n};\n\nexport default storage;\n", "/**\n * Internal dependencies\n */\nimport objectStorage from './object';\n\nlet storage;\n\ntry {\n\t// Private Browsing in Safari 10 and earlier will throw an error when\n\t// attempting to set into localStorage. The test here is intentional in\n\t// causing a thrown error as condition for using fallback object storage.\n\tstorage = window.localStorage;\n\tstorage.setItem( '__wpDataTestLocalStorage', '' );\n\tstorage.removeItem( '__wpDataTestLocalStorage' );\n} catch ( error ) {\n\tstorage = objectStorage;\n}\n\nexport default storage;\n", "/**\n * External dependencies\n */\nimport 'requestidlecallback';\n\n/**\n * @typedef {( timeOrDeadline: IdleDeadline | number ) => void} Callback\n */\n\n/**\n * @return {(callback: Callback) => void} RequestIdleCallback\n */\nexport function createRequestIdleCallback() {\n\tif ( typeof window === 'undefined' ) {\n\t\treturn ( callback ) => {\n\t\t\tsetTimeout( () => callback( Date.now() ), 0 );\n\t\t};\n\t}\n\n\treturn window.requestIdleCallback;\n}\n\nexport default createRequestIdleCallback();\n", "/**\n * Internal dependencies\n */\nimport requestIdleCallback from './request-idle-callback';\n\n/**\n * Enqueued callback to invoke once idle time permits.\n *\n * @typedef {()=>void} WPPriorityQueueCallback\n */\n\n/**\n * An object used to associate callbacks in a particular context grouping.\n *\n * @typedef {{}} WPPriorityQueueContext\n */\n\n/**\n * Function to add callback to priority queue.\n *\n * @typedef {(element:WPPriorityQueueContext,item:WPPriorityQueueCallback)=>void} WPPriorityQueueAdd\n */\n\n/**\n * Function to flush callbacks from priority queue.\n *\n * @typedef {(element:WPPriorityQueueContext)=>boolean} WPPriorityQueueFlush\n */\n\n/**\n * Reset the queue.\n *\n * @typedef {()=>void} WPPriorityQueueReset\n */\n\n/**\n * Priority queue instance.\n *\n * @typedef {Object} WPPriorityQueue\n *\n * @property {WPPriorityQueueAdd}   add    Add callback to queue for context.\n * @property {WPPriorityQueueFlush} flush  Flush queue for context.\n * @property {WPPriorityQueueFlush} cancel Clear queue for context.\n * @property {WPPriorityQueueReset} reset  Reset queue.\n */\n\n/**\n * Creates a context-aware queue that only executes\n * the last task of a given context.\n *\n * @example\n *```js\n * import { createQueue } from '@wordpress/priority-queue';\n *\n * const queue = createQueue();\n *\n * // Context objects.\n * const ctx1 = {};\n * const ctx2 = {};\n *\n * // For a given context in the queue, only the last callback is executed.\n * queue.add( ctx1, () => console.log( 'This will be printed first' ) );\n * queue.add( ctx2, () => console.log( 'This won\\'t be printed' ) );\n * queue.add( ctx2, () => console.log( 'This will be printed second' ) );\n *```\n *\n * @return {WPPriorityQueue} Queue object with `add`, `flush` and `reset` methods.\n */\nexport const createQueue = () => {\n\t/** @type {Map<WPPriorityQueueContext, WPPriorityQueueCallback>} */\n\tconst waitingList = new Map();\n\tlet isRunning = false;\n\n\t/**\n\t * Callback to process as much queue as time permits.\n\t *\n\t * Map Iteration follows the original insertion order. This means that here\n\t * we can iterate the queue and know that the first contexts which were\n\t * added will be run first. On the other hand, if anyone adds a new callback\n\t * for an existing context it will supplant the previously-set callback for\n\t * that context because we reassigned that map key's value.\n\t *\n\t * In the case that a callback adds a new callback to its own context then\n\t * the callback it adds will appear at the end of the iteration and will be\n\t * run only after all other existing contexts have finished executing.\n\t *\n\t * @param {IdleDeadline|number} deadline Idle callback deadline object, or\n\t *                                       animation frame timestamp.\n\t */\n\tconst runWaitingList = ( deadline ) => {\n\t\tfor ( const [ nextElement, callback ] of waitingList ) {\n\t\t\twaitingList.delete( nextElement );\n\t\t\tcallback();\n\n\t\t\tif (\n\t\t\t\t'number' === typeof deadline ||\n\t\t\t\tdeadline.timeRemaining() <= 0\n\t\t\t) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif ( waitingList.size === 0 ) {\n\t\t\tisRunning = false;\n\t\t\treturn;\n\t\t}\n\n\t\trequestIdleCallback( runWaitingList );\n\t};\n\n\t/**\n\t * Add a callback to the queue for a given context.\n\t *\n\t * If errors with undefined callbacks are encountered double check that\n\t * all of your useSelect calls have the right dependencies set correctly\n\t * in their second parameter. Missing dependencies can cause unexpected\n\t * loops and race conditions in the queue.\n\t *\n\t * @type {WPPriorityQueueAdd}\n\t *\n\t * @param {WPPriorityQueueContext}  element Context object.\n\t * @param {WPPriorityQueueCallback} item    Callback function.\n\t */\n\tconst add = ( element, item ) => {\n\t\twaitingList.set( element, item );\n\t\tif ( ! isRunning ) {\n\t\t\tisRunning = true;\n\t\t\trequestIdleCallback( runWaitingList );\n\t\t}\n\t};\n\n\t/**\n\t * Flushes queue for a given context, returning true if the flush was\n\t * performed, or false if there is no queue for the given context.\n\t *\n\t * @type {WPPriorityQueueFlush}\n\t *\n\t * @param {WPPriorityQueueContext} element Context object.\n\t *\n\t * @return {boolean} Whether flush was performed.\n\t */\n\tconst flush = ( element ) => {\n\t\tconst callback = waitingList.get( element );\n\t\tif ( undefined === callback ) {\n\t\t\treturn false;\n\t\t}\n\n\t\twaitingList.delete( element );\n\t\tcallback();\n\n\t\treturn true;\n\t};\n\n\t/**\n\t * Clears the queue for a given context, cancelling the callbacks without\n\t * executing them. Returns `true` if there were scheduled callbacks to cancel,\n\t * or `false` if there was is no queue for the given context.\n\t *\n\t * @type {WPPriorityQueueFlush}\n\t *\n\t * @param {WPPriorityQueueContext} element Context object.\n\t *\n\t * @return {boolean} Whether any callbacks got cancelled.\n\t */\n\tconst cancel = ( element ) => {\n\t\treturn waitingList.delete( element );\n\t};\n\n\t/**\n\t * Reset the queue without running the pending callbacks.\n\t *\n\t * @type {WPPriorityQueueReset}\n\t */\n\tconst reset = () => {\n\t\twaitingList.clear();\n\t\tisRunning = false;\n\t};\n\n\treturn {\n\t\tadd,\n\t\tflush,\n\t\tcancel,\n\t\treset,\n\t};\n};\n", "/**\n * External dependencies\n */\n// eslint-disable-next-line @typescript-eslint/no-restricted-imports\nimport {\n\tChildren,\n\tcloneElement,\n\tComponent,\n\tcreateContext,\n\tcreateElement,\n\tcreateRef,\n\tforwardRef,\n\tFragment,\n\tisValidElement,\n\tmemo,\n\tPureComponent,\n\tStrictMode,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tuseDeferredValue,\n\tuseEffect,\n\tuseId,\n\tuseMemo,\n\tuseImperativeHandle,\n\tuseInsertionEffect,\n\tuseLayoutEffect,\n\tuseReducer,\n\tuseRef,\n\tuseState,\n\tuseSyncExternalStore,\n\tuseTransition,\n\tstartTransition,\n\tlazy,\n\tSuspense,\n} from 'react';\nimport type { ReactNode } from 'react';\n\n/**\n * Object containing a React element.\n */\nexport type Element = React.ReactElement;\n\n/**\n * Object containing a React component.\n */\nexport type ComponentType< T = any > = React.ComponentType< T >;\n\n/**\n * Object containing a React synthetic event.\n */\nexport type SyntheticEvent< T = Element > = React.SyntheticEvent< T >;\n\n/**\n * Object containing a React ref object.\n */\nexport type RefObject< T > = React.RefObject< T >;\n\n/**\n * Object containing a React ref callback.\n */\nexport type RefCallback< T > = React.RefCallback< T >;\n\n/**\n * Object containing a React ref.\n */\nexport type Ref< T > = React.Ref< T >;\n\n/**\n * Object that provides utilities for dealing with React children.\n */\nexport { Children };\n\n/**\n * Creates a copy of an element with extended props.\n *\n * @param {Element} element Element\n * @param {?Object} props   Props to apply to cloned element\n *\n * @return {Element} Cloned element.\n */\nexport { cloneElement };\n\n/**\n * A base class to create WordPress Components (Refs, state and lifecycle hooks)\n */\nexport { Component };\n\n/**\n * Creates a context object containing two components: a provider and consumer.\n *\n * @param {Object} defaultValue A default data stored in the context.\n *\n * @return {Object} Context object.\n */\nexport { createContext };\n\n/**\n * Returns a new element of given type. Type can be either a string tag name or\n * another function which itself returns an element.\n *\n * @param {?(string|Function)} type     Tag name or element creator\n * @param {Object}             props    Element properties, either attribute\n *                                      set to apply to DOM node or values to\n *                                      pass through to element creator\n * @param {...Element}         children Descendant elements\n *\n * @return {Element} Element.\n */\nexport { createElement };\n\n/**\n * Returns an object tracking a reference to a rendered element via its\n * `current` property as either a DOMElement or Element, dependent upon the\n * type of element rendered with the ref attribute.\n *\n * @return {Object} Ref object.\n */\nexport { createRef };\n\n/**\n * Component enhancer used to enable passing a ref to its wrapped component.\n * Pass a function argument which receives `props` and `ref` as its arguments,\n * returning an element using the forwarded ref. The return value is a new\n * component which forwards its ref.\n *\n * @param {Function} forwarder Function passed `props` and `ref`, expected to\n *                             return an element.\n *\n * @return {Component} Enhanced component.\n */\nexport { forwardRef };\n\n/**\n * A component which renders its children without any wrapping element.\n */\nexport { Fragment };\n\n/**\n * Checks if an object is a valid React Element.\n *\n * @param {Object} objectToCheck The object to be checked.\n *\n * @return {boolean} true if objectToTest is a valid React Element and false otherwise.\n */\nexport { isValidElement };\n\n/**\n * @see https://react.dev/reference/react/memo\n */\nexport { memo };\n\n/**\n * Component that activates additional checks and warnings for its descendants.\n */\nexport { StrictMode };\n\n/**\n * @see https://react.dev/reference/react/useCallback\n */\nexport { useCallback };\n\n/**\n * @see https://react.dev/reference/react/useContext\n */\nexport { useContext };\n\n/**\n * @see https://react.dev/reference/react/useDebugValue\n */\nexport { useDebugValue };\n\n/**\n * @see https://react.dev/reference/react/useDeferredValue\n */\nexport { useDeferredValue };\n\n/**\n * @see https://react.dev/reference/react/useEffect\n */\nexport { useEffect };\n\n/**\n * @see https://react.dev/reference/react/useId\n */\nexport { useId };\n\n/**\n * @see https://react.dev/reference/react/useImperativeHandle\n */\nexport { useImperativeHandle };\n\n/**\n * @see https://react.dev/reference/react/useInsertionEffect\n */\nexport { useInsertionEffect };\n\n/**\n * @see https://react.dev/reference/react/useLayoutEffect\n */\nexport { useLayoutEffect };\n\n/**\n * @see https://react.dev/reference/react/useMemo\n */\nexport { useMemo };\n\n/**\n * @see https://react.dev/reference/react/useReducer\n */\nexport { useReducer };\n\n/**\n * @see https://react.dev/reference/react/useRef\n */\nexport { useRef };\n\n/**\n * @see https://react.dev/reference/react/useState\n */\nexport { useState };\n\n/**\n * @see https://react.dev/reference/react/useSyncExternalStore\n */\nexport { useSyncExternalStore };\n\n/**\n * @see https://react.dev/reference/react/useTransition\n */\nexport { useTransition };\n\n/**\n * @see https://react.dev/reference/react/startTransition\n */\nexport { startTransition };\n\n/**\n * @see https://react.dev/reference/react/lazy\n */\nexport { lazy };\n\n/**\n * @see https://react.dev/reference/react/Suspense\n */\nexport { Suspense };\n\n/**\n * @see https://react.dev/reference/react/PureComponent\n */\nexport { PureComponent };\n\n/**\n * Concatenate two or more React children objects.\n *\n * @param childrenArguments - Array of children arguments (array of arrays/strings/objects) to concatenate.\n * @return The concatenated value.\n */\nexport function concatChildren(\n\t...childrenArguments: ReactNode[][]\n): ReactNode[] {\n\treturn childrenArguments.reduce< ReactNode[] >(\n\t\t( accumulator, children, i ) => {\n\t\t\tChildren.forEach( children, ( child, j ) => {\n\t\t\t\tif ( isValidElement( child ) && typeof child !== 'string' ) {\n\t\t\t\t\tchild = cloneElement( child, {\n\t\t\t\t\t\tkey: [ i, j ].join(),\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\taccumulator.push( child );\n\t\t\t} );\n\n\t\t\treturn accumulator;\n\t\t},\n\t\t[]\n\t);\n}\n\n/**\n * Switches the nodeName of all the elements in the children object.\n *\n * @param children Children object.\n * @param nodeName Node name.\n *\n * @return  The updated children object.\n */\nexport function switchChildrenNodeName(\n\tchildren: ReactNode,\n\tnodeName: string\n): ReactNode {\n\treturn (\n\t\tchildren &&\n\t\tChildren.map( children, ( elt, index ) => {\n\t\t\tif ( typeof elt?.valueOf() === 'string' ) {\n\t\t\t\treturn createElement( nodeName, { key: index }, elt );\n\t\t\t}\n\t\t\tif ( ! isValidElement( elt ) ) {\n\t\t\t\treturn elt;\n\t\t\t}\n\n\t\t\tconst { children: childrenProp, ...props } = elt.props;\n\t\t\treturn createElement(\n\t\t\t\tnodeName,\n\t\t\t\t{ key: index, ...props },\n\t\t\t\tchildrenProp\n\t\t\t);\n\t\t} )\n\t);\n}\n", "/**\n * External dependencies\n */\nimport {\n\tcreatePortal,\n\tfindDOMNode,\n\tflushSync,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n} from 'react-dom';\nimport { createRoot, hydrateRoot } from 'react-dom/client';\n\n/**\n * Creates a portal into which a component can be rendered.\n *\n * @see https://github.com/facebook/react/issues/10309#issuecomment-318433235\n *\n * @param {import('react').ReactElement} child     Any renderable child, such as an element,\n *                                                 string, or fragment.\n * @param {HTMLElement}                  container DOM node into which element should be rendered.\n */\nexport { createPortal };\n\n/**\n * Finds the dom node of a React component.\n *\n * @param {import('react').ComponentType} component Component's instance.\n */\nexport { findDOMNode };\n\n/**\n * Forces React to flush any updates inside the provided callback synchronously.\n *\n * @param {Function} callback Callback to run synchronously.\n */\nexport { flushSync };\n\n/**\n * Renders a given element into the target DOM node.\n *\n * @deprecated since WordPress 6.2.0. Use `createRoot` instead.\n * @see https://react.dev/reference/react-dom/render\n */\nexport { render };\n\n/**\n * Hydrates a given element into the target DOM node.\n *\n * @deprecated since WordPress 6.2.0. Use `hydrateRoot` instead.\n * @see https://react.dev/reference/react-dom/hydrate\n */\nexport { hydrate };\n\n/**\n * Creates a new React root for the target DOM node.\n *\n * @since 6.2.0 Introduced in WordPress core.\n * @see https://react.dev/reference/react-dom/client/createRoot\n */\nexport { createRoot };\n\n/**\n * Creates a new React root for the target DOM node and hydrates it with a pre-generated markup.\n *\n * @since 6.2.0 Introduced in WordPress core.\n * @see https://react.dev/reference/react-dom/client/hydrateRoot\n */\nexport { hydrateRoot };\n\n/**\n * Removes any mounted element from the target DOM node.\n *\n * @deprecated since WordPress 6.2.0. Use `root.unmount()` instead.\n * @see https://react.dev/reference/react-dom/unmountComponentAtNode\n */\nexport { unmountComponentAtNode };\n", "/**\n * Parts of this source were derived and modified from fast-react-render,\n * released under the MIT license.\n *\n * https://github.com/alt-j/fast-react-render\n *\n * Copyright (c) 2016 Andrey Morozov\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * External dependencies\n */\nimport { isPlainObject } from 'is-plain-object';\nimport { paramCase as kebabCase } from 'change-case';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tescapeHTML,\n\tescapeAttribute,\n\tisValidAttributeName,\n} from '@wordpress/escape-html';\n\n/**\n * Internal dependencies\n */\nimport { createContext, Fragment, StrictMode, forwardRef } from './react';\nimport RawHTML from './raw-html';\n\n/** @typedef {import('react').ReactElement} ReactElement */\n\nconst Context = createContext( undefined );\nContext.displayName = 'ElementContext';\n\ninterface ComponentInstance {\n\trender: () => React.ReactNode;\n\tgetChildContext?: () => Record< string, any >;\n}\n\ninterface RawHTMLProps {\n\tchildren: string;\n\t[ key: string ]: any;\n}\n\ninterface StyleObject {\n\t[ property: string ]: string | number | null | undefined;\n}\n\ninterface HTMLProps {\n\tdangerouslySetInnerHTML?: {\n\t\t__html: string;\n\t};\n\tchildren?: React.ReactNode;\n\tvalue?: React.ReactNode;\n\tstyle?: StyleObject | string;\n\tclassName?: string;\n\thtmlFor?: string;\n\t[ key: string ]: any;\n}\n\nconst { Provider, Consumer } = Context;\n\nconst ForwardRef = forwardRef( () => {\n\treturn null;\n} );\n\n/**\n * Valid attribute types.\n */\nconst ATTRIBUTES_TYPES = new Set< string >( [ 'string', 'boolean', 'number' ] );\n\n/**\n * Element tags which can be self-closing.\n */\nconst SELF_CLOSING_TAGS = new Set< string >( [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr',\n] );\n\n/**\n * Boolean attributes are attributes whose presence as being assigned is\n * meaningful, even if only empty.\n *\n * See: https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes\n * Extracted from: https://html.spec.whatwg.org/multipage/indices.html#attributes-3\n *\n * Object.keys( [ ...document.querySelectorAll( '#attributes-1 > tbody > tr' ) ]\n *     .filter( ( tr ) => tr.lastChild.textContent.indexOf( 'Boolean attribute' ) !== -1 )\n *     .reduce( ( result, tr ) => Object.assign( result, {\n *         [ tr.firstChild.textContent.trim() ]: true\n *     } ), {} ) ).sort();\n */\nconst BOOLEAN_ATTRIBUTES = new Set< string >( [\n\t'allowfullscreen',\n\t'allowpaymentrequest',\n\t'allowusermedia',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'defer',\n\t'disabled',\n\t'download',\n\t'formnovalidate',\n\t'hidden',\n\t'ismap',\n\t'itemscope',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'selected',\n\t'typemustmatch',\n] );\n\n/**\n * Enumerated attributes are attributes which must be of a specific value form.\n * Like boolean attributes, these are meaningful if specified, even if not of a\n * valid enumerated value.\n *\n * See: https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#enumerated-attribute\n * Extracted from: https://html.spec.whatwg.org/multipage/indices.html#attributes-3\n *\n * Object.keys( [ ...document.querySelectorAll( '#attributes-1 > tbody > tr' ) ]\n *     .filter( ( tr ) => /^(\"(.+?)\";?\\s*)+/.test( tr.lastChild.textContent.trim() ) )\n *     .reduce( ( result, tr ) => Object.assign( result, {\n *         [ tr.firstChild.textContent.trim() ]: true\n *     } ), {} ) ).sort();\n *\n * Some notable omissions:\n *\n *  - `alt`: https://blog.whatwg.org/omit-alt\n */\nconst ENUMERATED_ATTRIBUTES = new Set< string >( [\n\t'autocapitalize',\n\t'autocomplete',\n\t'charset',\n\t'contenteditable',\n\t'crossorigin',\n\t'decoding',\n\t'dir',\n\t'draggable',\n\t'enctype',\n\t'formenctype',\n\t'formmethod',\n\t'http-equiv',\n\t'inputmode',\n\t'kind',\n\t'method',\n\t'preload',\n\t'scope',\n\t'shape',\n\t'spellcheck',\n\t'translate',\n\t'type',\n\t'wrap',\n] );\n\n/**\n * Set of CSS style properties which support assignment of unitless numbers.\n * Used in rendering of style properties, where `px` unit is assumed unless\n * property is included in this set or value is zero.\n *\n * Generated via:\n *\n * Object.entries( document.createElement( 'div' ).style )\n *     .filter( ( [ key ] ) => (\n *         ! /^(webkit|ms|moz)/.test( key ) &&\n *         ( e.style[ key ] = 10 ) &&\n *         e.style[ key ] === '10'\n *     ) )\n *     .map( ( [ key ] ) => key )\n *     .sort();\n */\nconst CSS_PROPERTIES_SUPPORTS_UNITLESS = new Set< string >( [\n\t'animation',\n\t'animationIterationCount',\n\t'baselineShift',\n\t'borderImageOutset',\n\t'borderImageSlice',\n\t'borderImageWidth',\n\t'columnCount',\n\t'cx',\n\t'cy',\n\t'fillOpacity',\n\t'flexGrow',\n\t'flexShrink',\n\t'floodOpacity',\n\t'fontWeight',\n\t'gridColumnEnd',\n\t'gridColumnStart',\n\t'gridRowEnd',\n\t'gridRowStart',\n\t'lineHeight',\n\t'opacity',\n\t'order',\n\t'orphans',\n\t'r',\n\t'rx',\n\t'ry',\n\t'shapeImageThreshold',\n\t'stopOpacity',\n\t'strokeDasharray',\n\t'strokeDashoffset',\n\t'strokeMiterlimit',\n\t'strokeOpacity',\n\t'strokeWidth',\n\t'tabSize',\n\t'widows',\n\t'x',\n\t'y',\n\t'zIndex',\n\t'zoom',\n] );\n\n/**\n * Returns true if the specified string is prefixed by one of an array of\n * possible prefixes.\n * @param string\n * @param prefixes\n */\nexport function hasPrefix( string: string, prefixes: string[] ): boolean {\n\treturn prefixes.some( ( prefix ) => string.indexOf( prefix ) === 0 );\n}\n\n/**\n * Returns true if the given prop name should be ignored in attributes\n * serialization, or false otherwise.\n * @param attribute\n */\nfunction isInternalAttribute( attribute: string ): boolean {\n\treturn 'key' === attribute || 'children' === attribute;\n}\n\n/**\n * Returns the normal form of the element's attribute value for HTML.\n * @param attribute\n * @param value\n */\nfunction getNormalAttributeValue( attribute: string, value: any ): any {\n\tswitch ( attribute ) {\n\t\tcase 'style':\n\t\t\treturn renderStyle( value );\n\t}\n\n\treturn value;\n}\n\n/**\n * This is a map of all SVG attributes that have dashes. Map(lower case prop => dashed lower case attribute).\n * We need this to render e.g strokeWidth as stroke-width.\n *\n * List from: https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute.\n */\nconst SVG_ATTRIBUTE_WITH_DASHES_LIST: Record< string, string > = [\n\t'accentHeight',\n\t'alignmentBaseline',\n\t'arabicForm',\n\t'baselineShift',\n\t'capHeight',\n\t'clipPath',\n\t'clipRule',\n\t'colorInterpolation',\n\t'colorInterpolationFilters',\n\t'colorProfile',\n\t'colorRendering',\n\t'dominantBaseline',\n\t'enableBackground',\n\t'fillOpacity',\n\t'fillRule',\n\t'floodColor',\n\t'floodOpacity',\n\t'fontFamily',\n\t'fontSize',\n\t'fontSizeAdjust',\n\t'fontStretch',\n\t'fontStyle',\n\t'fontVariant',\n\t'fontWeight',\n\t'glyphName',\n\t'glyphOrientationHorizontal',\n\t'glyphOrientationVertical',\n\t'horizAdvX',\n\t'horizOriginX',\n\t'imageRendering',\n\t'letterSpacing',\n\t'lightingColor',\n\t'markerEnd',\n\t'markerMid',\n\t'markerStart',\n\t'overlinePosition',\n\t'overlineThickness',\n\t'paintOrder',\n\t'panose1',\n\t'pointerEvents',\n\t'renderingIntent',\n\t'shapeRendering',\n\t'stopColor',\n\t'stopOpacity',\n\t'strikethroughPosition',\n\t'strikethroughThickness',\n\t'strokeDasharray',\n\t'strokeDashoffset',\n\t'strokeLinecap',\n\t'strokeLinejoin',\n\t'strokeMiterlimit',\n\t'strokeOpacity',\n\t'strokeWidth',\n\t'textAnchor',\n\t'textDecoration',\n\t'textRendering',\n\t'underlinePosition',\n\t'underlineThickness',\n\t'unicodeBidi',\n\t'unicodeRange',\n\t'unitsPerEm',\n\t'vAlphabetic',\n\t'vHanging',\n\t'vIdeographic',\n\t'vMathematical',\n\t'vectorEffect',\n\t'vertAdvY',\n\t'vertOriginX',\n\t'vertOriginY',\n\t'wordSpacing',\n\t'writingMode',\n\t'xmlnsXlink',\n\t'xHeight',\n].reduce(\n\t( map, attribute ) => {\n\t\t// The keys are lower-cased for more robust lookup.\n\t\tmap[ attribute.toLowerCase() ] = attribute;\n\t\treturn map;\n\t},\n\t{} as Record< string, string >\n);\n\n/**\n * This is a map of all case-sensitive SVG attributes. Map(lowercase key => proper case attribute).\n * The keys are lower-cased for more robust lookup.\n * Note that this list only contains attributes that contain at least one capital letter.\n * Lowercase attributes don't need mapping, since we lowercase all attributes by default.\n */\nconst CASE_SENSITIVE_SVG_ATTRIBUTES: Record< string, string > = [\n\t'allowReorder',\n\t'attributeName',\n\t'attributeType',\n\t'autoReverse',\n\t'baseFrequency',\n\t'baseProfile',\n\t'calcMode',\n\t'clipPathUnits',\n\t'contentScriptType',\n\t'contentStyleType',\n\t'diffuseConstant',\n\t'edgeMode',\n\t'externalResourcesRequired',\n\t'filterRes',\n\t'filterUnits',\n\t'glyphRef',\n\t'gradientTransform',\n\t'gradientUnits',\n\t'kernelMatrix',\n\t'kernelUnitLength',\n\t'keyPoints',\n\t'keySplines',\n\t'keyTimes',\n\t'lengthAdjust',\n\t'limitingConeAngle',\n\t'markerHeight',\n\t'markerUnits',\n\t'markerWidth',\n\t'maskContentUnits',\n\t'maskUnits',\n\t'numOctaves',\n\t'pathLength',\n\t'patternContentUnits',\n\t'patternTransform',\n\t'patternUnits',\n\t'pointsAtX',\n\t'pointsAtY',\n\t'pointsAtZ',\n\t'preserveAlpha',\n\t'preserveAspectRatio',\n\t'primitiveUnits',\n\t'refX',\n\t'refY',\n\t'repeatCount',\n\t'repeatDur',\n\t'requiredExtensions',\n\t'requiredFeatures',\n\t'specularConstant',\n\t'specularExponent',\n\t'spreadMethod',\n\t'startOffset',\n\t'stdDeviation',\n\t'stitchTiles',\n\t'suppressContentEditableWarning',\n\t'suppressHydrationWarning',\n\t'surfaceScale',\n\t'systemLanguage',\n\t'tableValues',\n\t'targetX',\n\t'targetY',\n\t'textLength',\n\t'viewBox',\n\t'viewTarget',\n\t'xChannelSelector',\n\t'yChannelSelector',\n].reduce(\n\t( map, attribute ) => {\n\t\t// The keys are lower-cased for more robust lookup.\n\t\tmap[ attribute.toLowerCase() ] = attribute;\n\t\treturn map;\n\t},\n\t{} as Record< string, string >\n);\n\n/**\n * This is a map of all SVG attributes that have colons.\n * Keys are lower-cased and stripped of their colons for more robust lookup.\n */\nconst SVG_ATTRIBUTES_WITH_COLONS: Record< string, string > = [\n\t'xlink:actuate',\n\t'xlink:arcrole',\n\t'xlink:href',\n\t'xlink:role',\n\t'xlink:show',\n\t'xlink:title',\n\t'xlink:type',\n\t'xml:base',\n\t'xml:lang',\n\t'xml:space',\n\t'xmlns:xlink',\n].reduce(\n\t( map, attribute ) => {\n\t\tmap[ attribute.replace( ':', '' ).toLowerCase() ] = attribute;\n\t\treturn map;\n\t},\n\t{} as Record< string, string >\n);\n\n/**\n * Returns the normal form of the element's attribute name for HTML.\n * @param attribute\n */\nfunction getNormalAttributeName( attribute: string ): string {\n\tswitch ( attribute ) {\n\t\tcase 'htmlFor':\n\t\t\treturn 'for';\n\n\t\tcase 'className':\n\t\t\treturn 'class';\n\t}\n\tconst attributeLowerCase = attribute.toLowerCase();\n\n\tif ( CASE_SENSITIVE_SVG_ATTRIBUTES[ attributeLowerCase ] ) {\n\t\treturn CASE_SENSITIVE_SVG_ATTRIBUTES[ attributeLowerCase ];\n\t} else if ( SVG_ATTRIBUTE_WITH_DASHES_LIST[ attributeLowerCase ] ) {\n\t\treturn kebabCase(\n\t\t\tSVG_ATTRIBUTE_WITH_DASHES_LIST[ attributeLowerCase ]\n\t\t);\n\t} else if ( SVG_ATTRIBUTES_WITH_COLONS[ attributeLowerCase ] ) {\n\t\treturn SVG_ATTRIBUTES_WITH_COLONS[ attributeLowerCase ];\n\t}\n\n\treturn attributeLowerCase;\n}\n\n/**\n * Returns the normal form of the style property name for HTML.\n *\n * - Converts property names to kebab-case, e.g. 'backgroundColor' → 'background-color'\n * - Leaves custom attributes alone, e.g. '--myBackgroundColor' → '--myBackgroundColor'\n * - Converts vendor-prefixed property names to -kebab-case, e.g. 'MozTransform' → '-moz-transform'\n * @param property\n */\nfunction getNormalStylePropertyName( property: string ): string {\n\tif ( property.startsWith( '--' ) ) {\n\t\treturn property;\n\t}\n\n\tif ( hasPrefix( property, [ 'ms', 'O', 'Moz', 'Webkit' ] ) ) {\n\t\treturn '-' + kebabCase( property );\n\t}\n\n\treturn kebabCase( property );\n}\n\n/**\n * Returns the normal form of the style property value for HTML. Appends a\n * default pixel unit if numeric, not a unitless property, and not zero.\n * @param property\n * @param value\n */\nfunction getNormalStylePropertyValue(\n\tproperty: string,\n\tvalue: any\n): string | number {\n\tif (\n\t\ttypeof value === 'number' &&\n\t\t0 !== value &&\n\t\t! hasPrefix( property, [ '--' ] ) &&\n\t\t! CSS_PROPERTIES_SUPPORTS_UNITLESS.has( property )\n\t) {\n\t\treturn value + 'px';\n\t}\n\n\treturn value;\n}\n\n/**\n * Serializes a React element to string.\n * @param element\n * @param context\n * @param legacyContext\n */\nexport function renderElement(\n\telement: React.ReactNode,\n\tcontext?: any,\n\tlegacyContext: Record< string, any > = {}\n): string {\n\tif ( null === element || undefined === element || false === element ) {\n\t\treturn '';\n\t}\n\n\tif ( Array.isArray( element ) ) {\n\t\treturn renderChildren( element, context, legacyContext );\n\t}\n\n\tswitch ( typeof element ) {\n\t\tcase 'string':\n\t\t\treturn escapeHTML( element );\n\n\t\tcase 'number':\n\t\t\treturn element.toString();\n\t}\n\n\tconst { type, props } = element as {\n\t\ttype?: any;\n\t\tprops?: any;\n\t};\n\n\tswitch ( type ) {\n\t\tcase StrictMode:\n\t\tcase Fragment:\n\t\t\treturn renderChildren( props.children, context, legacyContext );\n\n\t\tcase RawHTML:\n\t\t\tconst { children, ...wrapperProps } = props as RawHTMLProps;\n\n\t\t\treturn renderNativeComponent(\n\t\t\t\t! Object.keys( wrapperProps ).length ? null : 'div',\n\t\t\t\t{\n\t\t\t\t\t...wrapperProps,\n\t\t\t\t\tdangerouslySetInnerHTML: { __html: children },\n\t\t\t\t},\n\t\t\t\tcontext,\n\t\t\t\tlegacyContext\n\t\t\t);\n\t}\n\n\tswitch ( typeof type ) {\n\t\tcase 'string':\n\t\t\treturn renderNativeComponent( type, props, context, legacyContext );\n\n\t\tcase 'function':\n\t\t\tif (\n\t\t\t\ttype.prototype &&\n\t\t\t\ttypeof type.prototype.render === 'function'\n\t\t\t) {\n\t\t\t\treturn renderComponent( type, props, context, legacyContext );\n\t\t\t}\n\n\t\t\treturn renderElement(\n\t\t\t\ttype( props, legacyContext ),\n\t\t\t\tcontext,\n\t\t\t\tlegacyContext\n\t\t\t);\n\t}\n\n\tswitch ( type && type.$$typeof ) {\n\t\tcase Provider.$$typeof:\n\t\t\treturn renderChildren( props.children, props.value, legacyContext );\n\n\t\tcase Consumer.$$typeof:\n\t\t\treturn renderElement(\n\t\t\t\tprops.children( context || type._currentValue ),\n\t\t\t\tcontext,\n\t\t\t\tlegacyContext\n\t\t\t);\n\n\t\tcase ForwardRef.$$typeof:\n\t\t\treturn renderElement(\n\t\t\t\ttype.render( props ),\n\t\t\t\tcontext,\n\t\t\t\tlegacyContext\n\t\t\t);\n\t}\n\n\treturn '';\n}\n\n/**\n * Serializes a native component type to string.\n * @param type\n * @param props\n * @param context\n * @param legacyContext\n */\nexport function renderNativeComponent(\n\ttype: string | null,\n\tprops: HTMLProps,\n\tcontext?: any,\n\tlegacyContext: Record< string, any > = {}\n): string {\n\tlet content = '';\n\tif ( type === 'textarea' && props.hasOwnProperty( 'value' ) ) {\n\t\t// Textarea children can be assigned as value prop. If it is, render in\n\t\t// place of children. Ensure to omit so it is not assigned as attribute\n\t\t// as well.\n\t\tcontent = renderChildren( props.value, context, legacyContext );\n\t\tconst { value, ...restProps } = props;\n\t\tprops = restProps;\n\t} else if (\n\t\tprops.dangerouslySetInnerHTML &&\n\t\ttypeof props.dangerouslySetInnerHTML.__html === 'string'\n\t) {\n\t\t// Dangerous content is left unescaped.\n\t\tcontent = props.dangerouslySetInnerHTML.__html;\n\t} else if ( typeof props.children !== 'undefined' ) {\n\t\tcontent = renderChildren( props.children, context, legacyContext );\n\t}\n\n\tif ( ! type ) {\n\t\treturn content;\n\t}\n\n\tconst attributes = renderAttributes( props );\n\n\tif ( SELF_CLOSING_TAGS.has( type ) ) {\n\t\treturn '<' + type + attributes + '/>';\n\t}\n\n\treturn '<' + type + attributes + '>' + content + '</' + type + '>';\n}\n\n/**\n * Serializes a non-native component type to string.\n * @param Component\n * @param props\n * @param context\n * @param legacyContext\n */\nexport function renderComponent(\n\tComponent: React.ComponentClass,\n\tprops: Record< string, any >,\n\tcontext?: any,\n\tlegacyContext: Record< string, any > = {}\n): string {\n\tconst instance = new Component( props, legacyContext ) as ComponentInstance;\n\n\tif ( typeof instance.getChildContext === 'function' ) {\n\t\tObject.assign( legacyContext, instance.getChildContext() );\n\t}\n\n\tconst html = renderElement( instance.render(), context, legacyContext );\n\n\treturn html;\n}\n\n/**\n * Serializes an array of children to string.\n * @param children\n * @param context\n * @param legacyContext\n */\nfunction renderChildren(\n\tchildren: React.ReactNode,\n\tcontext?: any,\n\tlegacyContext: Record< string, any > = {}\n): string {\n\tlet result = '';\n\n\tconst childrenArray = Array.isArray( children ) ? children : [ children ];\n\n\tfor ( let i = 0; i < childrenArray.length; i++ ) {\n\t\tconst child = childrenArray[ i ];\n\n\t\tresult += renderElement( child, context, legacyContext );\n\t}\n\n\treturn result;\n}\n\n/**\n * Renders a props object as a string of HTML attributes.\n * @param props\n */\nexport function renderAttributes( props: Record< string, any > ): string {\n\tlet result = '';\n\n\tfor ( const key in props ) {\n\t\tconst attribute = getNormalAttributeName( key );\n\t\tif ( ! isValidAttributeName( attribute ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet value = getNormalAttributeValue( key, props[ key ] );\n\n\t\t// If value is not of serializable type, skip.\n\t\tif ( ! ATTRIBUTES_TYPES.has( typeof value ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Don't render internal attribute names.\n\t\tif ( isInternalAttribute( key ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst isBooleanAttribute = BOOLEAN_ATTRIBUTES.has( attribute );\n\n\t\t// Boolean attribute should be omitted outright if its value is false.\n\t\tif ( isBooleanAttribute && value === false ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst isMeaningfulAttribute =\n\t\t\tisBooleanAttribute ||\n\t\t\thasPrefix( key, [ 'data-', 'aria-' ] ) ||\n\t\t\tENUMERATED_ATTRIBUTES.has( attribute );\n\n\t\t// Only write boolean value as attribute if meaningful.\n\t\tif ( typeof value === 'boolean' && ! isMeaningfulAttribute ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tresult += ' ' + attribute;\n\n\t\t// Boolean attributes should write attribute name, but without value.\n\t\t// Mere presence of attribute name is effective truthiness.\n\t\tif ( isBooleanAttribute ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( typeof value === 'string' ) {\n\t\t\tvalue = escapeAttribute( value );\n\t\t}\n\n\t\tresult += '=\"' + value + '\"';\n\t}\n\n\treturn result;\n}\n\n/**\n * Renders a style object as a string attribute value.\n * @param style\n */\nexport function renderStyle( style: StyleObject | string ): string | undefined {\n\t// Only generate from object, e.g. tolerate string value.\n\tif ( ! isPlainObject( style ) ) {\n\t\treturn style as string;\n\t}\n\n\tlet result: string | undefined;\n\n\tconst styleObj = style as StyleObject;\n\tfor ( const property in styleObj ) {\n\t\tconst value = styleObj[ property ];\n\t\tif ( null === value || undefined === value ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( result ) {\n\t\t\tresult += ';';\n\t\t} else {\n\t\t\tresult = '';\n\t\t}\n\n\t\tconst normalName = getNormalStylePropertyName( property );\n\t\tconst normalValue = getNormalStylePropertyValue( property, value );\n\t\tresult += normalName + ':' + normalValue;\n\t}\n\n\treturn result;\n}\n\nexport default renderElement;\n", "/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport defaultRegistry from '../../default-registry';\n\nexport const Context = createContext( defaultRegistry );\nContext.displayName = 'RegistryProviderContext';\n\nconst { Consumer, Provider } = Context;\n\n/**\n * A custom react Context consumer exposing the provided `registry` to\n * children components. Used along with the RegistryProvider.\n *\n * You can read more about the react context api here:\n * https://react.dev/learn/passing-data-deeply-with-context#step-3-provide-the-context\n *\n * @example\n * ```js\n * import {\n *   RegistryProvider,\n *   RegistryConsumer,\n *   createRegistry\n * } from '@wordpress/data';\n *\n * const registry = createRegistry( {} );\n *\n * const App = ( { props } ) => {\n *   return <RegistryProvider value={ registry }>\n *     <div>Hello There</div>\n *     <RegistryConsumer>\n *       { ( registry ) => (\n *         <ComponentUsingRegistry\n *         \t\t{ ...props }\n *         \t  registry={ registry }\n *       ) }\n *     </RegistryConsumer>\n *   </RegistryProvider>\n * }\n * ```\n */\nexport const RegistryConsumer = Consumer;\n\n/**\n * A custom Context provider for exposing the provided `registry` to children\n * components via a consumer.\n *\n * See <a name=\"#RegistryConsumer\">RegistryConsumer</a> documentation for\n * example.\n */\nexport default Provider;\n", "/**\n * WordPress dependencies\n */\nimport { useContext } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { Context } from './context';\n\n/**\n * A custom react hook exposing the registry context for use.\n *\n * This exposes the `registry` value provided via the\n * <a href=\"#RegistryProvider\">Registry Provider</a> to a component implementing\n * this hook.\n *\n * It acts similarly to the `useContext` react hook.\n *\n * Note: Generally speaking, `useRegistry` is a low level hook that in most cases\n * won't be needed for implementation. Most interactions with the `@wordpress/data`\n * API can be performed via the `useSelect` hook,  or the `withSelect` and\n * `withDispatch` higher order components.\n *\n * @example\n * ```js\n * import {\n *   RegistryProvider,\n *   createRegistry,\n *   useRegistry,\n * } from '@wordpress/data';\n *\n * const registry = createRegistry( {} );\n *\n * const SomeChildUsingRegistry = ( props ) => {\n *   const registry = useRegistry();\n *   // ...logic implementing the registry in other react hooks.\n * };\n *\n *\n * const ParentProvidingRegistry = ( props ) => {\n *   return <RegistryProvider value={ registry }>\n *     <SomeChildUsingRegistry { ...props } />\n *   </RegistryProvider>\n * };\n * ```\n *\n * @return {Function}  A custom react hook exposing the registry context value.\n */\nexport default function useRegistry() {\n\treturn useContext( Context );\n}\n", "/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\n\nexport const Context = createContext( false );\nContext.displayName = 'AsyncModeContext';\n\nconst { Consumer, Provider } = Context;\n\nexport const AsyncModeConsumer = Consumer;\n\n/**\n * Context Provider Component used to switch the data module component rerendering\n * between Sync and Async modes.\n *\n * @example\n *\n * ```js\n * import { useSelect, AsyncModeProvider } from '@wordpress/data';\n * import { store as blockEditorStore } from '@wordpress/block-editor';\n *\n * function BlockCount() {\n *   const count = useSelect( ( select ) => {\n *     return select( blockEditorStore ).getBlockCount()\n *   }, [] );\n *\n *   return count;\n * }\n *\n * function App() {\n *   return (\n *     <AsyncModeProvider value={ true }>\n *       <BlockCount />\n *     </AsyncModeProvider>\n *   );\n * }\n * ```\n *\n * In this example, the BlockCount component is rerendered asynchronously.\n * It means if a more critical task is being performed (like typing in an input),\n * the rerendering is delayed until the browser becomes IDLE.\n * It is possible to nest multiple levels of AsyncModeProvider to fine-tune the rendering behavior.\n *\n * @param {boolean} props.value Enable Async Mode.\n * @return {Component} The component to be rendered.\n */\nexport default Provider;\n", "/**\n * WordPress dependencies\n */\nimport { createQueue } from '@wordpress/priority-queue';\nimport {\n\tuseRef,\n\tuseCallback,\n\tuseMemo,\n\tuseSyncExternalStore,\n\tuseDebugValue,\n} from '@wordpress/element';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport useRegistry from '../registry-provider/use-registry';\nimport useAsyncMode from '../async-mode-provider/use-async-mode';\n\nconst renderQueue = createQueue();\n\nfunction warnOnUnstableReference( a, b ) {\n\tif ( ! a || ! b ) {\n\t\treturn;\n\t}\n\n\tconst keys =\n\t\ttypeof a === 'object' && typeof b === 'object'\n\t\t\t? Object.keys( a ).filter( ( k ) => a[ k ] !== b[ k ] )\n\t\t\t: [];\n\n\t// eslint-disable-next-line no-console\n\tconsole.warn(\n\t\t'The `useSelect` hook returns different values when called with the same state and parameters.\\n' +\n\t\t\t'This can lead to unnecessary re-renders and performance issues if not fixed.\\n\\n' +\n\t\t\t'Non-equal value keys: %s\\n\\n',\n\t\tkeys.join( ', ' )\n\t);\n}\n\n/**\n * @typedef {import('../../types').StoreDescriptor<C>} StoreDescriptor\n * @template {import('../../types').AnyConfig} C\n */\n/**\n * @typedef {import('../../types').ReduxStoreConfig<State,Actions,Selectors>} ReduxStoreConfig\n * @template State\n * @template {Record<string,import('../../types').ActionCreator>} Actions\n * @template Selectors\n */\n/** @typedef {import('../../types').MapSelect} MapSelect */\n/**\n * @typedef {import('../../types').UseSelectReturn<T>} UseSelectReturn\n * @template {MapSelect|StoreDescriptor<any>} T\n */\n\nfunction Store( registry, suspense ) {\n\tconst select = suspense ? registry.suspendSelect : registry.select;\n\tconst queueContext = {};\n\tlet lastMapSelect;\n\tlet lastMapResult;\n\tlet lastMapResultValid = false;\n\tlet lastIsAsync;\n\tlet subscriber;\n\tlet didWarnUnstableReference;\n\tconst storeStatesOnMount = new Map();\n\n\tfunction getStoreState( name ) {\n\t\t// If there's no store property (custom generic store), return an empty\n\t\t// object. When comparing the state, the empty objects will cause the\n\t\t// equality check to fail, setting `lastMapResultValid` to false.\n\t\treturn registry.stores[ name ]?.store?.getState?.() ?? {};\n\t}\n\n\tconst createSubscriber = ( stores ) => {\n\t\t// The set of stores the `subscribe` function is supposed to subscribe to. Here it is\n\t\t// initialized, and then the `updateStores` function can add new stores to it.\n\t\tconst activeStores = [ ...stores ];\n\n\t\t// The `subscribe` function, which is passed to the `useSyncExternalStore` hook, could\n\t\t// be called multiple times to establish multiple subscriptions. That's why we need to\n\t\t// keep a set of active subscriptions;\n\t\tconst activeSubscriptions = new Set();\n\n\t\tfunction subscribe( listener ) {\n\t\t\t// Maybe invalidate the value right after subscription was created.\n\t\t\t// React will call `getValue` after subscribing, to detect store\n\t\t\t// updates that happened in the interval between the `getValue` call\n\t\t\t// during render and creating the subscription, which is slightly\n\t\t\t// delayed. We need to ensure that this second `getValue` call will\n\t\t\t// compute a fresh value only if any of the store states have\n\t\t\t// changed in the meantime.\n\t\t\tif ( lastMapResultValid ) {\n\t\t\t\tfor ( const name of activeStores ) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tstoreStatesOnMount.get( name ) !== getStoreState( name )\n\t\t\t\t\t) {\n\t\t\t\t\t\tlastMapResultValid = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tstoreStatesOnMount.clear();\n\n\t\t\tconst onStoreChange = () => {\n\t\t\t\t// Invalidate the value on store update, so that a fresh value is computed.\n\t\t\t\tlastMapResultValid = false;\n\t\t\t\tlistener();\n\t\t\t};\n\n\t\t\tconst onChange = () => {\n\t\t\t\tif ( lastIsAsync ) {\n\t\t\t\t\trenderQueue.add( queueContext, onStoreChange );\n\t\t\t\t} else {\n\t\t\t\t\tonStoreChange();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst unsubs = [];\n\t\t\tfunction subscribeStore( storeName ) {\n\t\t\t\tunsubs.push( registry.subscribe( onChange, storeName ) );\n\t\t\t}\n\n\t\t\tfor ( const storeName of activeStores ) {\n\t\t\t\tsubscribeStore( storeName );\n\t\t\t}\n\n\t\t\tactiveSubscriptions.add( subscribeStore );\n\n\t\t\treturn () => {\n\t\t\t\tactiveSubscriptions.delete( subscribeStore );\n\n\t\t\t\tfor ( const unsub of unsubs.values() ) {\n\t\t\t\t\t// The return value of the subscribe function could be undefined if the store is a custom generic store.\n\t\t\t\t\tunsub?.();\n\t\t\t\t}\n\t\t\t\t// Cancel existing store updates that were already scheduled.\n\t\t\t\trenderQueue.cancel( queueContext );\n\t\t\t};\n\t\t}\n\n\t\t// Check if `newStores` contains some stores we're not subscribed to yet, and add them.\n\t\tfunction updateStores( newStores ) {\n\t\t\tfor ( const newStore of newStores ) {\n\t\t\t\tif ( activeStores.includes( newStore ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// New `subscribe` calls will subscribe to `newStore`, too.\n\t\t\t\tactiveStores.push( newStore );\n\n\t\t\t\t// Add `newStore` to existing subscriptions.\n\t\t\t\tfor ( const subscription of activeSubscriptions ) {\n\t\t\t\t\tsubscription( newStore );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { subscribe, updateStores };\n\t};\n\n\treturn ( mapSelect, isAsync ) => {\n\t\tfunction updateValue() {\n\t\t\t// If the last value is valid, and the `mapSelect` callback hasn't changed,\n\t\t\t// then we can safely return the cached value. The value can change only on\n\t\t\t// store update, and in that case value will be invalidated by the listener.\n\t\t\tif ( lastMapResultValid && mapSelect === lastMapSelect ) {\n\t\t\t\treturn lastMapResult;\n\t\t\t}\n\n\t\t\tconst listeningStores = { current: null };\n\t\t\tconst mapResult = registry.__unstableMarkListeningStores(\n\t\t\t\t() => mapSelect( select, registry ),\n\t\t\t\tlisteningStores\n\t\t\t);\n\n\t\t\tif ( globalThis.SCRIPT_DEBUG ) {\n\t\t\t\tif ( ! didWarnUnstableReference ) {\n\t\t\t\t\tconst secondMapResult = mapSelect( select, registry );\n\t\t\t\t\tif ( ! isShallowEqual( mapResult, secondMapResult ) ) {\n\t\t\t\t\t\twarnOnUnstableReference( mapResult, secondMapResult );\n\t\t\t\t\t\tdidWarnUnstableReference = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! subscriber ) {\n\t\t\t\tfor ( const name of listeningStores.current ) {\n\t\t\t\t\tstoreStatesOnMount.set( name, getStoreState( name ) );\n\t\t\t\t}\n\t\t\t\tsubscriber = createSubscriber( listeningStores.current );\n\t\t\t} else {\n\t\t\t\tsubscriber.updateStores( listeningStores.current );\n\t\t\t}\n\n\t\t\t// If the new value is shallow-equal to the old one, keep the old one so\n\t\t\t// that we don't trigger unwanted updates that do a `===` check.\n\t\t\tif ( ! isShallowEqual( lastMapResult, mapResult ) ) {\n\t\t\t\tlastMapResult = mapResult;\n\t\t\t}\n\t\t\tlastMapSelect = mapSelect;\n\t\t\tlastMapResultValid = true;\n\t\t}\n\n\t\tfunction getValue() {\n\t\t\t// Update the value in case it's been invalidated or `mapSelect` has changed.\n\t\t\tupdateValue();\n\t\t\treturn lastMapResult;\n\t\t}\n\n\t\t// When transitioning from async to sync mode, cancel existing store updates\n\t\t// that have been scheduled, and invalidate the value so that it's freshly\n\t\t// computed. It might have been changed by the update we just cancelled.\n\t\tif ( lastIsAsync && ! isAsync ) {\n\t\t\tlastMapResultValid = false;\n\t\t\trenderQueue.cancel( queueContext );\n\t\t}\n\n\t\tupdateValue();\n\n\t\tlastIsAsync = isAsync;\n\n\t\t// Return a pair of functions that can be passed to `useSyncExternalStore`.\n\t\treturn { subscribe: subscriber.subscribe, getValue };\n\t};\n}\n\nfunction _useStaticSelect( storeName ) {\n\treturn useRegistry().select( storeName );\n}\n\nfunction _useMappingSelect( suspense, mapSelect, deps ) {\n\tconst registry = useRegistry();\n\tconst isAsync = useAsyncMode();\n\tconst store = useMemo(\n\t\t() => Store( registry, suspense ),\n\t\t[ registry, suspense ]\n\t);\n\n\t// These are \"pass-through\" dependencies from the parent hook,\n\t// and the parent should catch any hook rule violations.\n\tconst selector = useCallback( mapSelect, deps );\n\tconst { subscribe, getValue } = store( selector, isAsync );\n\tconst result = useSyncExternalStore( subscribe, getValue, getValue );\n\tuseDebugValue( result );\n\treturn result;\n}\n\n/**\n * Custom react hook for retrieving props from registered selectors.\n *\n * In general, this custom React hook follows the\n * [rules of hooks](https://react.dev/reference/rules/rules-of-hooks).\n *\n * @template {MapSelect | StoreDescriptor<any>} T\n * @param {T}         mapSelect Function called on every state change. The returned value is\n *                              exposed to the component implementing this hook. The function\n *                              receives the `registry.select` method on the first argument\n *                              and the `registry` on the second argument.\n *                              When a store key is passed, all selectors for the store will be\n *                              returned. This is only meant for usage of these selectors in event\n *                              callbacks, not for data needed to create the element tree.\n * @param {unknown[]} deps      If provided, this memoizes the mapSelect so the same `mapSelect` is\n *                              invoked on every state change unless the dependencies change.\n *\n * @example\n * ```js\n * import { useSelect } from '@wordpress/data';\n * import { store as myCustomStore } from 'my-custom-store';\n *\n * function HammerPriceDisplay( { currency } ) {\n *   const price = useSelect( ( select ) => {\n *     return select( myCustomStore ).getPrice( 'hammer', currency );\n *   }, [ currency ] );\n *   return new Intl.NumberFormat( 'en-US', {\n *     style: 'currency',\n *     currency,\n *   } ).format( price );\n * }\n *\n * // Rendered in the application:\n * // <HammerPriceDisplay currency=\"USD\" />\n * ```\n *\n * In the above example, when `HammerPriceDisplay` is rendered into an\n * application, the price will be retrieved from the store state using the\n * `mapSelect` callback on `useSelect`. If the currency prop changes then\n * any price in the state for that currency is retrieved. If the currency prop\n * doesn't change and other props are passed in that do change, the price will\n * not change because the dependency is just the currency.\n *\n * When data is only used in an event callback, the data should not be retrieved\n * on render, so it may be useful to get the selectors function instead.\n *\n * **Don't use `useSelect` this way when calling the selectors in the render\n * function because your component won't re-render on a data change.**\n *\n * ```js\n * import { useSelect } from '@wordpress/data';\n * import { store as myCustomStore } from 'my-custom-store';\n *\n * function Paste( { children } ) {\n *   const { getSettings } = useSelect( myCustomStore );\n *   function onPaste() {\n *     // Do something with the settings.\n *     const settings = getSettings();\n *   }\n *   return <div onPaste={ onPaste }>{ children }</div>;\n * }\n * ```\n * @return {UseSelectReturn<T>} A custom react hook.\n */\nexport default function useSelect( mapSelect, deps ) {\n\t// On initial call, on mount, determine the mode of this `useSelect` call\n\t// and then never allow it to change on subsequent updates.\n\tconst staticSelectMode = typeof mapSelect !== 'function';\n\tconst staticSelectModeRef = useRef( staticSelectMode );\n\n\tif ( staticSelectMode !== staticSelectModeRef.current ) {\n\t\tconst prevMode = staticSelectModeRef.current ? 'static' : 'mapping';\n\t\tconst nextMode = staticSelectMode ? 'static' : 'mapping';\n\t\tthrow new Error(\n\t\t\t`Switching useSelect from ${ prevMode } to ${ nextMode } is not allowed`\n\t\t);\n\t}\n\n\t// `staticSelectMode` is not allowed to change during the hook instance's,\n\t// lifetime, so the rules of hooks are not really violated.\n\treturn staticSelectMode\n\t\t? _useStaticSelect( mapSelect )\n\t\t: _useMappingSelect( false, mapSelect, deps );\n}\n\n/**\n * A variant of the `useSelect` hook that has the same API, but is a compatible\n * Suspense-enabled data source.\n *\n * @template {MapSelect} T\n * @param {T}     mapSelect Function called on every state change. The\n *                          returned value is exposed to the component\n *                          using this hook. The function receives the\n *                          `registry.suspendSelect` method as the first\n *                          argument and the `registry` as the second one.\n * @param {Array} deps      A dependency array used to memoize the `mapSelect`\n *                          so that the same `mapSelect` is invoked on every\n *                          state change unless the dependencies change.\n *\n * @throws {Promise} A suspense Promise that is thrown if any of the called\n * selectors is in an unresolved state.\n *\n * @return {ReturnType<T>} Data object returned by the `mapSelect` function.\n */\nexport function useSuspenseSelect( mapSelect, deps ) {\n\treturn _useMappingSelect( true, mapSelect, deps );\n}\n", "/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent, pure } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport useSelect from '../use-select';\n\n/** @typedef {import('react').ComponentType} ComponentType */\n\n/**\n * Higher-order component used to inject state-derived props using registered\n * selectors.\n *\n * @param {Function} mapSelectToProps Function called on every state change,\n *                                    expected to return object of props to\n *                                    merge with the component's own props.\n *\n * @example\n * ```js\n * import { withSelect } from '@wordpress/data';\n * import { store as myCustomStore } from 'my-custom-store';\n *\n * function PriceDisplay( { price, currency } ) {\n * \treturn new Intl.NumberFormat( 'en-US', {\n * \t\tstyle: 'currency',\n * \t\tcurrency,\n * \t} ).format( price );\n * }\n *\n * const HammerPriceDisplay = withSelect( ( select, ownProps ) => {\n * \tconst { getPrice } = select( myCustomStore );\n * \tconst { currency } = ownProps;\n *\n * \treturn {\n * \t\tprice: getPrice( 'hammer', currency ),\n * \t};\n * } )( PriceDisplay );\n *\n * // Rendered in the application:\n * //\n * //  <HammerPriceDisplay currency=\"USD\" />\n * ```\n * In the above example, when `HammerPriceDisplay` is rendered into an\n * application, it will pass the price into the underlying `PriceDisplay`\n * component and update automatically if the price of a hammer ever changes in\n * the store.\n *\n * @return {ComponentType} Enhanced component with merged state data props.\n */\nconst withSelect = ( mapSelectToProps ) =>\n\tcreateHigherOrderComponent(\n\t\t( WrappedComponent ) =>\n\t\t\tpure( ( ownProps ) => {\n\t\t\t\tconst mapSelect = ( select, registry ) =>\n\t\t\t\t\tmapSelectToProps( select, ownProps, registry );\n\t\t\t\tconst mergeProps = useSelect( mapSelect );\n\t\t\t\treturn <WrappedComponent { ...ownProps } { ...mergeProps } />;\n\t\t\t} ),\n\t\t'withSelect'\n\t);\n\nexport default withSelect;\n", "/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { useDispatchWithMap } from '../use-dispatch';\n\n/** @typedef {import('react').ComponentType} ComponentType */\n\n/**\n * Higher-order component used to add dispatch props using registered action\n * creators.\n *\n * @param {Function} mapDispatchToProps A function of returning an object of\n *                                      prop names where value is a\n *                                      dispatch-bound action creator, or a\n *                                      function to be called with the\n *                                      component's props and returning an\n *                                      action creator.\n *\n * @example\n * ```jsx\n * function Button( { onClick, children } ) {\n *     return <button type=\"button\" onClick={ onClick }>{ children }</button>;\n * }\n *\n * import { withDispatch } from '@wordpress/data';\n * import { store as myCustomStore } from 'my-custom-store';\n *\n * const SaleButton = withDispatch( ( dispatch, ownProps ) => {\n *     const { startSale } = dispatch( myCustomStore );\n *     const { discountPercent } = ownProps;\n *\n *     return {\n *         onClick() {\n *             startSale( discountPercent );\n *         },\n *     };\n * } )( Button );\n *\n * // Rendered in the application:\n * //\n * // <SaleButton discountPercent=\"20\">Start Sale!</SaleButton>\n * ```\n *\n * @example\n * In the majority of cases, it will be sufficient to use only two first params\n * passed to `mapDispatchToProps` as illustrated in the previous example.\n * However, there might be some very advanced use cases where using the\n * `registry` object might be used as a tool to optimize the performance of\n * your component. Using `select` function from the registry might be useful\n * when you need to fetch some dynamic data from the store at the time when the\n * event is fired, but at the same time, you never use it to render your\n * component. In such scenario, you can avoid using the `withSelect` higher\n * order component to compute such prop, which might lead to unnecessary\n * re-renders of your component caused by its frequent value change.\n * Keep in mind, that `mapDispatchToProps` must return an object with functions\n * only.\n *\n * ```jsx\n * function Button( { onClick, children } ) {\n *     return <button type=\"button\" onClick={ onClick }>{ children }</button>;\n * }\n *\n * import { withDispatch } from '@wordpress/data';\n * import { store as myCustomStore } from 'my-custom-store';\n *\n * const SaleButton = withDispatch( ( dispatch, ownProps, { select } ) => {\n *    // Stock number changes frequently.\n *    const { getStockNumber } = select( myCustomStore );\n *    const { startSale } = dispatch( myCustomStore );\n *    return {\n *        onClick() {\n *            const discountPercent = getStockNumber() > 50 ? 10 : 20;\n *            startSale( discountPercent );\n *        },\n *    };\n * } )( Button );\n *\n * // Rendered in the application:\n * //\n * //  <SaleButton>Start Sale!</SaleButton>\n * ```\n *\n * _Note:_ It is important that the `mapDispatchToProps` function always\n * returns an object with the same keys. For example, it should not contain\n * conditions under which a different value would be returned.\n *\n * @return {ComponentType} Enhanced component with merged dispatcher props.\n */\nconst withDispatch = ( mapDispatchToProps ) =>\n\tcreateHigherOrderComponent(\n\t\t( WrappedComponent ) => ( ownProps ) => {\n\t\t\tconst mapDispatch = ( dispatch, registry ) =>\n\t\t\t\tmapDispatchToProps( dispatch, ownProps, registry );\n\t\t\tconst dispatchProps = useDispatchWithMap( mapDispatch, [] );\n\t\t\treturn <WrappedComponent { ...ownProps } { ...dispatchProps } />;\n\t\t},\n\t\t'withDispatch'\n\t);\n\nexport default withDispatch;\n", "/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { RegistryConsumer } from '../registry-provider';\n\n/**\n * Higher-order component which renders the original component with the current\n * registry context passed as its `registry` prop.\n *\n * @param {Component} OriginalComponent Original component.\n *\n * @return {Component} Enhanced component.\n */\nconst withRegistry = createHigherOrderComponent(\n\t( OriginalComponent ) => ( props ) => (\n\t\t<RegistryConsumer>\n\t\t\t{ ( registry ) => (\n\t\t\t\t<OriginalComponent { ...props } registry={ registry } />\n\t\t\t) }\n\t\t</RegistryConsumer>\n\t),\n\t'withRegistry'\n);\n\nexport default withRegistry;\n", "/**\n * Internal dependencies\n */\nimport type { AnyConfig, CurriedSelectorsOf, StoreDescriptor } from './types';\nimport defaultRegistry from './default-registry';\n\n/**\n * Given a store descriptor, returns an object of the store's selectors.\n * The selector functions are been pre-bound to pass the current state automatically.\n * As a consumer, you need only pass arguments of the selector, if applicable.\n *\n *\n * @param storeNameOrDescriptor The store descriptor. The legacy calling convention\n *                              of passing the store name is also supported.\n *\n * @example\n * ```js\n * import { select } from '@wordpress/data';\n * import { store as myCustomStore } from 'my-custom-store';\n *\n * select( myCustomStore ).getPrice( 'hammer' );\n * ```\n *\n * @return Object containing the store's selectors.\n */\nexport function select< T extends StoreDescriptor< AnyConfig > >(\n\tstoreNameOrDescriptor: string | T\n): CurriedSelectorsOf< T > {\n\treturn defaultRegistry.select( storeNameOrDescriptor );\n}\n", "/**\n * Internal dependencies\n */\nimport defaultRegistry from './default-registry';\nimport * as plugins from './plugins';\nimport { combineReducers as combineReducersModule } from './redux-store';\n\n/** @typedef {import('./types').StoreDescriptor} StoreDescriptor */\n\nexport { default as withSelect } from './components/with-select';\nexport { default as withDispatch } from './components/with-dispatch';\nexport { default as withRegistry } from './components/with-registry';\nexport {\n\tRegistryProvider,\n\tRegistryConsumer,\n\tuseRegistry,\n} from './components/registry-provider';\nexport {\n\tdefault as useSelect,\n\tuseSuspenseSelect,\n} from './components/use-select';\nexport { useDispatch } from './components/use-dispatch';\nexport { AsyncModeProvider } from './components/async-mode-provider';\nexport { createRegistry } from './registry';\nexport { createRegistrySelector, createRegistryControl } from './factory';\nexport { createSelector } from './create-selector';\nexport { controls } from './controls';\nexport { default as createReduxStore } from './redux-store';\nexport { dispatch } from './dispatch';\nexport { select } from './select';\n\n/**\n * Object of available plugins to use with a registry.\n *\n * @see [use](#use)\n *\n * @type {Object}\n */\nexport { plugins };\n\n/**\n * The combineReducers helper function turns an object whose values are different\n * reducing functions into a single reducing function you can pass to registerReducer.\n *\n * @type  {import('./types').combineReducers}\n * @param {Object} reducers An object whose values correspond to different reducing\n *                          functions that need to be combined into one.\n *\n * @example\n * ```js\n * import { combineReducers, createReduxStore, register } from '@wordpress/data';\n *\n * const prices = ( state = {}, action ) => {\n * \treturn action.type === 'SET_PRICE' ?\n * \t\t{\n * \t\t\t...state,\n * \t\t\t[ action.item ]: action.price,\n * \t\t} :\n * \t\tstate;\n * };\n *\n * const discountPercent = ( state = 0, action ) => {\n * \treturn action.type === 'START_SALE' ?\n * \t\taction.discountPercent :\n * \t\tstate;\n * };\n *\n * const store = createReduxStore( 'my-shop', {\n * \treducer: combineReducers( {\n * \t\tprices,\n * \t\tdiscountPercent,\n * \t} ),\n * } );\n * register( store );\n * ```\n *\n * @return {Function} A reducer that invokes every reducer inside the reducers\n *                    object, and constructs a state object with the same shape.\n */\nexport const combineReducers = combineReducersModule;\n\n/**\n * Given a store descriptor, returns an object containing the store's selectors pre-bound to state\n * so that you only need to supply additional arguments, and modified so that they return promises\n * that resolve to their eventual values, after any resolvers have ran.\n *\n * @param {StoreDescriptor|string} storeNameOrDescriptor The store descriptor. The legacy calling\n *                                                       convention of passing the store name is\n *                                                       also supported.\n *\n * @example\n * ```js\n * import { resolveSelect } from '@wordpress/data';\n * import { store as myCustomStore } from 'my-custom-store';\n *\n * resolveSelect( myCustomStore ).getPrice( 'hammer' ).then(console.log)\n * ```\n *\n * @return {Object} Object containing the store's promise-wrapped selectors.\n */\nexport const resolveSelect = defaultRegistry.resolveSelect;\n\n/**\n * Given a store descriptor, returns an object containing the store's selectors pre-bound to state\n * so that you only need to supply additional arguments, and modified so that they throw promises\n * in case the selector is not resolved yet.\n *\n * @param {StoreDescriptor|string} storeNameOrDescriptor The store descriptor. The legacy calling\n *                                                       convention of passing the store name is\n *                                                       also supported.\n *\n * @return {Object} Object containing the store's suspense-wrapped selectors.\n */\nexport const suspendSelect = defaultRegistry.suspendSelect;\n\n/**\n * Given a listener function, the function will be called any time the state value\n * of one of the registered stores has changed. If you specify the optional\n * `storeNameOrDescriptor` parameter, the listener function will be called only\n * on updates on that one specific registered store.\n *\n * This function returns an `unsubscribe` function used to stop the subscription.\n *\n * @param {Function}                listener              Callback function.\n * @param {string|StoreDescriptor?} storeNameOrDescriptor Optional store name.\n *\n * @example\n * ```js\n * import { subscribe } from '@wordpress/data';\n *\n * const unsubscribe = subscribe( () => {\n * \t// You could use this opportunity to test whether the derived result of a\n * \t// selector has subsequently changed as the result of a state update.\n * } );\n *\n * // Later, if necessary...\n * unsubscribe();\n * ```\n */\nexport const subscribe = defaultRegistry.subscribe;\n\n/**\n * Registers a generic store instance.\n *\n * @deprecated Use `register( storeDescriptor )` instead.\n *\n * @param {string} name  Store registry name.\n * @param {Object} store Store instance (`{ getSelectors, getActions, subscribe }`).\n */\nexport const registerGenericStore = defaultRegistry.registerGenericStore;\n\n/**\n * Registers a standard `@wordpress/data` store.\n *\n * @deprecated Use `register` instead.\n *\n * @param {string} storeName Unique namespace identifier for the store.\n * @param {Object} options   Store description (reducer, actions, selectors, resolvers).\n *\n * @return {Object} Registered store object.\n */\nexport const registerStore = defaultRegistry.registerStore;\n\n/**\n * Extends a registry to inherit functionality provided by a given plugin. A\n * plugin is an object with properties aligning to that of a registry, merged\n * to extend the default registry behavior.\n *\n * @param {Object} plugin Plugin object.\n */\nexport const use = defaultRegistry.use;\n\n/**\n * Registers a standard `@wordpress/data` store descriptor.\n *\n * @example\n * ```js\n * import { createReduxStore, register } from '@wordpress/data';\n *\n * const store = createReduxStore( 'demo', {\n *     reducer: ( state = 'OK' ) => state,\n *     selectors: {\n *         getValue: ( state ) => state,\n *     },\n * } );\n * register( store );\n * ```\n *\n * @param {StoreDescriptor} store Store descriptor.\n */\nexport const register = defaultRegistry.register;\n", "/**\n * WordPress dependencies\n */\nimport { combineReducers } from '@wordpress/data';\n\n/**\n * Reducer managing the format types\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function formatTypes( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'ADD_FORMAT_TYPES':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t// Key format types by their name.\n\t\t\t\t...action.formatTypes.reduce(\n\t\t\t\t\t( newFormatTypes, type ) => ( {\n\t\t\t\t\t\t...newFormatTypes,\n\t\t\t\t\t\t[ type.name ]: type,\n\t\t\t\t\t} ),\n\t\t\t\t\t{}\n\t\t\t\t),\n\t\t\t};\n\t\tcase 'REMOVE_FORMAT_TYPES':\n\t\t\treturn Object.fromEntries(\n\t\t\t\tObject.entries( state ).filter(\n\t\t\t\t\t( [ key ] ) => ! action.names.includes( key )\n\t\t\t\t)\n\t\t\t);\n\t}\n\n\treturn state;\n}\n\nexport default combineReducers( { formatTypes } );\n", "/**\n * WordPress dependencies\n */\nimport { createSelector } from '@wordpress/data';\n\n/**\n * Returns all the available format types.\n *\n * @param {Object} state Data state.\n *\n * @example\n * ```js\n * import { __, sprintf } from '@wordpress/i18n';\n * import { store as richTextStore } from '@wordpress/rich-text';\n * import { useSelect } from '@wordpress/data';\n *\n * const ExampleComponent = () => {\n *    const { getFormatTypes } = useSelect(\n *        ( select ) => select( richTextStore ),\n *        []\n *    );\n *\n *    const availableFormats = getFormatTypes();\n *\n *    return availableFormats ? (\n *        <ul>\n *            { availableFormats?.map( ( format ) => (\n *                <li>{ format.name }</li>\n *           ) ) }\n *        </ul>\n *    ) : (\n *        __( 'No Formats available' )\n *    );\n * };\n * ```\n *\n * @return {Array} Format types.\n */\nexport const getFormatTypes = createSelector(\n\t( state ) => Object.values( state.formatTypes ),\n\t( state ) => [ state.formatTypes ]\n);\n\n/**\n * Returns a format type by name.\n *\n * @param {Object} state Data state.\n * @param {string} name  Format type name.\n *\n * @example\n * ```js\n * import { __, sprintf } from '@wordpress/i18n';\n * import { store as richTextStore } from '@wordpress/rich-text';\n * import { useSelect } from '@wordpress/data';\n *\n * const ExampleComponent = () => {\n *    const { getFormatType } = useSelect(\n *        ( select ) => select( richTextStore ),\n *        []\n *    );\n *\n *    const boldFormat = getFormatType( 'core/bold' );\n *\n *    return boldFormat ? (\n *        <ul>\n *            { Object.entries( boldFormat )?.map( ( [ key, value ] ) => (\n *                <li>\n *                    { key } : { value }\n *                </li>\n *           ) ) }\n *       </ul>\n *    ) : (\n *        __( 'Not Found' )\n *    ;\n * };\n * ```\n *\n * @return {?Object} Format type.\n */\nexport function getFormatType( state, name ) {\n\treturn state.formatTypes[ name ];\n}\n\n/**\n * Gets the format type, if any, that can handle a bare element (without a\n * data-format-type attribute), given the tag name of this element.\n *\n * @param {Object} state              Data state.\n * @param {string} bareElementTagName The tag name of the element to find a\n *                                    format type for.\n *\n * @example\n * ```js\n * import { __, sprintf } from '@wordpress/i18n';\n * import { store as richTextStore } from '@wordpress/rich-text';\n * import { useSelect } from '@wordpress/data';\n *\n * const ExampleComponent = () => {\n *    const { getFormatTypeForBareElement } = useSelect(\n *        ( select ) => select( richTextStore ),\n *        []\n *    );\n *\n *    const format = getFormatTypeForBareElement( 'strong' );\n *\n *    return format && <p>{ sprintf( __( 'Format name: %s' ), format.name ) }</p>;\n * }\n * ```\n *\n * @return {?Object} Format type.\n */\nexport function getFormatTypeForBareElement( state, bareElementTagName ) {\n\tconst formatTypes = getFormatTypes( state );\n\treturn (\n\t\tformatTypes.find( ( { className, tagName } ) => {\n\t\t\treturn className === null && bareElementTagName === tagName;\n\t\t} ) ||\n\t\tformatTypes.find( ( { className, tagName } ) => {\n\t\t\treturn className === null && '*' === tagName;\n\t\t} )\n\t);\n}\n\n/**\n * Gets the format type, if any, that can handle an element, given its classes.\n *\n * @param {Object} state            Data state.\n * @param {string} elementClassName The classes of the element to find a format\n *                                  type for.\n *\n * @example\n * ```js\n * import { __, sprintf } from '@wordpress/i18n';\n * import { store as richTextStore } from '@wordpress/rich-text';\n * import { useSelect } from '@wordpress/data';\n *\n * const ExampleComponent = () => {\n *    const { getFormatTypeForClassName } = useSelect(\n *        ( select ) => select( richTextStore ),\n *        []\n *    );\n *\n *    const format = getFormatTypeForClassName( 'has-inline-color' );\n *\n *    return format && <p>{ sprintf( __( 'Format name: %s' ), format.name ) }</p>;\n * };\n * ```\n *\n * @return {?Object} Format type.\n */\nexport function getFormatTypeForClassName( state, elementClassName ) {\n\treturn getFormatTypes( state ).find( ( { className } ) => {\n\t\tif ( className === null ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn ` ${ elementClassName } `.indexOf( ` ${ className } ` ) >= 0;\n\t} );\n}\n", "/**\n * Returns an action object used in signalling that format types have been\n * added.\n * Ignored from documentation as registerFormatType should be used instead from @wordpress/rich-text\n *\n * @ignore\n *\n * @param {Array|Object} formatTypes Format types received.\n *\n * @return {Object} Action object.\n */\nexport function addFormatTypes( formatTypes ) {\n\treturn {\n\t\ttype: 'ADD_FORMAT_TYPES',\n\t\tformatTypes: Array.isArray( formatTypes )\n\t\t\t? formatTypes\n\t\t\t: [ formatTypes ],\n\t};\n}\n\n/**\n * Returns an action object used to remove a registered format type.\n *\n * Ignored from documentation as unregisterFormatType should be used instead from @wordpress/rich-text\n *\n * @ignore\n *\n * @param {string|Array} names Format name.\n *\n * @return {Object} Action object.\n */\nexport function removeFormatTypes( names ) {\n\treturn {\n\t\ttype: 'REMOVE_FORMAT_TYPES',\n\t\tnames: Array.isArray( names ) ? names : [ names ],\n\t};\n}\n", "/**\n * WordPress dependencies\n */\nimport { createReduxStore, register } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as actions from './actions';\n\nconst STORE_NAME = 'core/rich-text';\n\n/**\n * Store definition for the rich-text namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n *\n * @type {Object}\n */\nexport const store = createReduxStore( STORE_NAME, {\n\treducer,\n\tselectors,\n\tactions,\n} );\n\nregister( store );\n", "/**\n * Parse the given HTML into a body element.\n *\n * Note: The current implementation will return a shared reference, reset on\n * each call to `createElement`. Therefore, you should not hold a reference to\n * the value to operate upon asynchronously, as it may have unexpected results.\n *\n * @param {HTMLDocument} document The HTML document to use to parse.\n * @param {string}       html     The HTML to parse.\n *\n * @return {HTMLBodyElement} Body element with parsed HTML.\n */\nexport function createElement( { implementation }, html ) {\n\t// Because `createHTMLDocument` is an expensive operation, and with this\n\t// function being internal to `rich-text` (full control in avoiding a risk\n\t// of asynchronous operations on the shared reference), a single document\n\t// is reused and reset for each call to the function.\n\tif ( ! createElement.body ) {\n\t\tcreateElement.body = implementation.createHTMLDocument( '' ).body;\n\t}\n\n\tcreateElement.body.innerHTML = html;\n\n\treturn createElement.body;\n}\n", "/** @typedef {import('./types').RichTextFormat} RichTextFormat */\n\n/**\n * Optimised equality check for format objects.\n *\n * @param {?RichTextFormat} format1 Format to compare.\n * @param {?RichTextFormat} format2 Format to compare.\n *\n * @return {boolean} True if formats are equal, false if not.\n */\nexport function isFormatEqual( format1, format2 ) {\n\t// Both not defined.\n\tif ( format1 === format2 ) {\n\t\treturn true;\n\t}\n\n\t// Either not defined.\n\tif ( ! format1 || ! format2 ) {\n\t\treturn false;\n\t}\n\n\tif ( format1.type !== format2.type ) {\n\t\treturn false;\n\t}\n\n\tconst attributes1 = format1.attributes;\n\tconst attributes2 = format2.attributes;\n\n\t// Both not defined.\n\tif ( attributes1 === attributes2 ) {\n\t\treturn true;\n\t}\n\n\t// Either not defined.\n\tif ( ! attributes1 || ! attributes2 ) {\n\t\treturn false;\n\t}\n\n\tconst keys1 = Object.keys( attributes1 );\n\tconst keys2 = Object.keys( attributes2 );\n\n\tif ( keys1.length !== keys2.length ) {\n\t\treturn false;\n\t}\n\n\tconst length = keys1.length;\n\n\t// Optimise for speed.\n\tfor ( let i = 0; i < length; i++ ) {\n\t\tconst name = keys1[ i ];\n\n\t\tif ( attributes1[ name ] !== attributes2[ name ] ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n", "/**\n * Internal dependencies\n */\n\nimport { isFormatEqual } from './is-format-equal';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Normalises formats: ensures subsequent adjacent equal formats have the same\n * reference.\n *\n * @param {RichTextValue} value Value to normalise formats of.\n *\n * @return {RichTextValue} New value with normalised formats.\n */\nexport function normaliseFormats( value ) {\n\tconst newFormats = value.formats.slice();\n\n\tnewFormats.forEach( ( formatsAtIndex, index ) => {\n\t\tconst formatsAtPreviousIndex = newFormats[ index - 1 ];\n\n\t\tif ( formatsAtPreviousIndex ) {\n\t\t\tconst newFormatsAtIndex = formatsAtIndex.slice();\n\n\t\t\tnewFormatsAtIndex.forEach( ( format, formatIndex ) => {\n\t\t\t\tconst previousFormat = formatsAtPreviousIndex[ formatIndex ];\n\n\t\t\t\tif ( isFormatEqual( format, previousFormat ) ) {\n\t\t\t\t\tnewFormatsAtIndex[ formatIndex ] = previousFormat;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tnewFormats[ index ] = newFormatsAtIndex;\n\t\t}\n\t} );\n\n\treturn {\n\t\t...value,\n\t\tformats: newFormats,\n\t};\n}\n", "/**\n * Internal dependencies\n */\n\nimport { normaliseFormats } from './normalise-formats';\nimport { create } from './create';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Concats a pair of rich text values. Not that this mutates `a` and does NOT\n * normalise formats!\n *\n * @param {Object} a Value to mutate.\n * @param {Object} b Value to add read from.\n *\n * @return {Object} `a`, mutated.\n */\nexport function mergePair( a, b ) {\n\ta.formats = a.formats.concat( b.formats );\n\ta.replacements = a.replacements.concat( b.replacements );\n\ta.text += b.text;\n\n\treturn a;\n}\n\n/**\n * Combine all Rich Text values into one. This is similar to\n * `String.prototype.concat`.\n *\n * @param {...RichTextValue} values Objects to combine.\n *\n * @return {RichTextValue} A new value combining all given records.\n */\nexport function concat( ...values ) {\n\treturn normaliseFormats( values.reduce( mergePair, create() ) );\n}\n", "/** @typedef {import('./types').RichTextValue} RichTextValue */\n/** @typedef {import('./types').RichTextFormatList} RichTextFormatList */\n\n/**\n * Internal dependencies\n */\nimport { isFormatEqual } from './is-format-equal';\n\n/**\n * Gets the all format objects at the start of the selection.\n *\n * @param {RichTextValue} value                Value to inspect.\n * @param {Array}         EMPTY_ACTIVE_FORMATS Array to return if there are no\n *                                             active formats.\n *\n * @return {RichTextFormatList} Active format objects.\n */\nexport function getActiveFormats( value, EMPTY_ACTIVE_FORMATS = [] ) {\n\tconst { formats, start, end, activeFormats } = value;\n\tif ( start === undefined ) {\n\t\treturn EMPTY_ACTIVE_FORMATS;\n\t}\n\n\tif ( start === end ) {\n\t\t// For a collapsed caret, it is possible to override the active formats.\n\t\tif ( activeFormats ) {\n\t\t\treturn activeFormats;\n\t\t}\n\n\t\tconst formatsBefore = formats[ start - 1 ] || EMPTY_ACTIVE_FORMATS;\n\t\tconst formatsAfter = formats[ start ] || EMPTY_ACTIVE_FORMATS;\n\n\t\t// By default, select the lowest amount of formats possible (which means\n\t\t// the caret is positioned outside the format boundary). The user can\n\t\t// then use arrow keys to define `activeFormats`.\n\t\tif ( formatsBefore.length < formatsAfter.length ) {\n\t\t\treturn formatsBefore;\n\t\t}\n\n\t\treturn formatsAfter;\n\t}\n\n\t// If there's no formats at the start index, there are not active formats.\n\tif ( ! formats[ start ] ) {\n\t\treturn EMPTY_ACTIVE_FORMATS;\n\t}\n\n\tconst selectedFormats = formats.slice( start, end );\n\n\t// Clone the formats so we're not mutating the live value.\n\tconst _activeFormats = [ ...selectedFormats[ 0 ] ];\n\tlet i = selectedFormats.length;\n\n\t// For performance reasons, start from the end where it's much quicker to\n\t// realise that there are no active formats.\n\twhile ( i-- ) {\n\t\tconst formatsAtIndex = selectedFormats[ i ];\n\n\t\t// If we run into any index without formats, we're sure that there's no\n\t\t// active formats.\n\t\tif ( ! formatsAtIndex ) {\n\t\t\treturn EMPTY_ACTIVE_FORMATS;\n\t\t}\n\n\t\tlet ii = _activeFormats.length;\n\n\t\t// Loop over the active formats and remove any that are not present at\n\t\t// the current index.\n\t\twhile ( ii-- ) {\n\t\t\tconst format = _activeFormats[ ii ];\n\n\t\t\tif (\n\t\t\t\t! formatsAtIndex.find( ( _format ) =>\n\t\t\t\t\tisFormatEqual( format, _format )\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t_activeFormats.splice( ii, 1 );\n\t\t\t}\n\t\t}\n\n\t\t// If there are no active formats, we can stop.\n\t\tif ( _activeFormats.length === 0 ) {\n\t\t\treturn EMPTY_ACTIVE_FORMATS;\n\t\t}\n\t}\n\n\treturn _activeFormats || EMPTY_ACTIVE_FORMATS;\n}\n", "/**\n * WordPress dependencies\n */\nimport { select } from '@wordpress/data';\n/**\n * Internal dependencies\n */\nimport { store as richTextStore } from './store';\n\n/** @typedef {import('./register-format-type').RichTextFormatType} RichTextFormatType */\n\n/**\n * Returns a registered format type.\n *\n * @param {string} name Format name.\n *\n * @return {RichTextFormatType|undefined} Format type.\n */\nexport function getFormatType( name ) {\n\treturn select( richTextStore ).getFormatType( name );\n}\n", "/**\n * Internal dependencies\n */\n\nimport { getActiveFormats } from './get-active-formats';\nimport { getFormatType } from './get-format-type';\nimport { OBJECT_REPLACEMENT_CHARACTER, ZWNBSP } from './special-characters';\n\nfunction restoreOnAttributes( attributes, isEditableTree ) {\n\tif ( isEditableTree ) {\n\t\treturn attributes;\n\t}\n\n\tconst newAttributes = {};\n\n\tfor ( const key in attributes ) {\n\t\tlet newKey = key;\n\t\tif ( key.startsWith( 'data-disable-rich-text-' ) ) {\n\t\t\tnewKey = key.slice( 'data-disable-rich-text-'.length );\n\t\t}\n\n\t\tnewAttributes[ newKey ] = attributes[ key ];\n\t}\n\n\treturn newAttributes;\n}\n\n/**\n * Converts a format object to information that can be used to create an element\n * from (type, attributes and object).\n *\n * @param {Object}  $1                        Named parameters.\n * @param {string}  $1.type                   The format type.\n * @param {string}  $1.tagName                The tag name.\n * @param {Object}  $1.attributes             The format attributes.\n * @param {Object}  $1.unregisteredAttributes The unregistered format\n *                                            attributes.\n * @param {boolean} $1.object                 Whether or not it is an object\n *                                            format.\n * @param {boolean} $1.boundaryClass          Whether or not to apply a boundary\n *                                            class.\n * @param {boolean} $1.isEditableTree\n *\n * @return {Object} Information to be used for element creation.\n */\nfunction fromFormat( {\n\ttype,\n\ttagName,\n\tattributes,\n\tunregisteredAttributes,\n\tobject,\n\tboundaryClass,\n\tisEditableTree,\n} ) {\n\tconst formatType = getFormatType( type );\n\n\tlet elementAttributes = {};\n\n\tif ( boundaryClass && isEditableTree ) {\n\t\telementAttributes[ 'data-rich-text-format-boundary' ] = 'true';\n\t}\n\n\tif ( ! formatType ) {\n\t\tif ( attributes ) {\n\t\t\telementAttributes = { ...attributes, ...elementAttributes };\n\t\t}\n\n\t\treturn {\n\t\t\ttype,\n\t\t\tattributes: restoreOnAttributes(\n\t\t\t\telementAttributes,\n\t\t\t\tisEditableTree\n\t\t\t),\n\t\t\tobject,\n\t\t};\n\t}\n\n\telementAttributes = { ...unregisteredAttributes, ...elementAttributes };\n\n\tfor ( const name in attributes ) {\n\t\tconst key = formatType.attributes\n\t\t\t? formatType.attributes[ name ]\n\t\t\t: false;\n\n\t\tif ( key ) {\n\t\t\telementAttributes[ key ] = attributes[ name ];\n\t\t} else {\n\t\t\telementAttributes[ name ] = attributes[ name ];\n\t\t}\n\t}\n\n\tif ( formatType.className ) {\n\t\tif ( elementAttributes.class ) {\n\t\t\telementAttributes.class = `${ formatType.className } ${ elementAttributes.class }`;\n\t\t} else {\n\t\t\telementAttributes.class = formatType.className;\n\t\t}\n\t}\n\n\t// When a format is declared as non editable, make it non editable in the\n\t// editor.\n\tif ( isEditableTree && formatType.contentEditable === false ) {\n\t\telementAttributes.contenteditable = 'false';\n\t}\n\n\treturn {\n\t\ttype: tagName || formatType.tagName,\n\t\tobject: formatType.object,\n\t\tattributes: restoreOnAttributes( elementAttributes, isEditableTree ),\n\t};\n}\n\n/**\n * Checks if both arrays of formats up until a certain index are equal.\n *\n * @param {Array}  a     Array of formats to compare.\n * @param {Array}  b     Array of formats to compare.\n * @param {number} index Index to check until.\n */\nfunction isEqualUntil( a, b, index ) {\n\tdo {\n\t\tif ( a[ index ] !== b[ index ] ) {\n\t\t\treturn false;\n\t\t}\n\t} while ( index-- );\n\n\treturn true;\n}\n\nexport function toTree( {\n\tvalue,\n\tpreserveWhiteSpace,\n\tcreateEmpty,\n\tappend,\n\tgetLastChild,\n\tgetParent,\n\tisText,\n\tgetText,\n\tremove,\n\tappendText,\n\tonStartIndex,\n\tonEndIndex,\n\tisEditableTree,\n\tplaceholder,\n} ) {\n\tconst { formats, replacements, text, start, end } = value;\n\tconst formatsLength = formats.length + 1;\n\tconst tree = createEmpty();\n\tconst activeFormats = getActiveFormats( value );\n\tconst deepestActiveFormat = activeFormats[ activeFormats.length - 1 ];\n\n\tlet lastCharacterFormats;\n\tlet lastCharacter;\n\n\tappend( tree, '' );\n\n\tfor ( let i = 0; i < formatsLength; i++ ) {\n\t\tconst character = text.charAt( i );\n\t\tconst shouldInsertPadding =\n\t\t\tisEditableTree &&\n\t\t\t// Pad the line if the line is empty.\n\t\t\t( ! lastCharacter ||\n\t\t\t\t// Pad the line if the previous character is a line break, otherwise\n\t\t\t\t// the line break won't be visible.\n\t\t\t\tlastCharacter === '\\n' );\n\n\t\tconst characterFormats = formats[ i ];\n\t\tlet pointer = getLastChild( tree );\n\n\t\tif ( characterFormats ) {\n\t\t\tcharacterFormats.forEach( ( format, formatIndex ) => {\n\t\t\t\tif (\n\t\t\t\t\tpointer &&\n\t\t\t\t\tlastCharacterFormats &&\n\t\t\t\t\t// Reuse the last element if all formats remain the same.\n\t\t\t\t\tisEqualUntil(\n\t\t\t\t\t\tcharacterFormats,\n\t\t\t\t\t\tlastCharacterFormats,\n\t\t\t\t\t\tformatIndex\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tpointer = getLastChild( pointer );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst { type, tagName, attributes, unregisteredAttributes } =\n\t\t\t\t\tformat;\n\n\t\t\t\tconst boundaryClass =\n\t\t\t\t\tisEditableTree && format === deepestActiveFormat;\n\n\t\t\t\tconst parent = getParent( pointer );\n\t\t\t\tconst newNode = append(\n\t\t\t\t\tparent,\n\t\t\t\t\tfromFormat( {\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\ttagName,\n\t\t\t\t\t\tattributes,\n\t\t\t\t\t\tunregisteredAttributes,\n\t\t\t\t\t\tboundaryClass,\n\t\t\t\t\t\tisEditableTree,\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tif ( isText( pointer ) && getText( pointer ).length === 0 ) {\n\t\t\t\t\tremove( pointer );\n\t\t\t\t}\n\n\t\t\t\tpointer = append( newNode, '' );\n\t\t\t} );\n\t\t}\n\n\t\t// If there is selection at 0, handle it before characters are inserted.\n\t\tif ( i === 0 ) {\n\t\t\tif ( onStartIndex && start === 0 ) {\n\t\t\t\tonStartIndex( tree, pointer );\n\t\t\t}\n\n\t\t\tif ( onEndIndex && end === 0 ) {\n\t\t\t\tonEndIndex( tree, pointer );\n\t\t\t}\n\t\t}\n\n\t\tif ( character === OBJECT_REPLACEMENT_CHARACTER ) {\n\t\t\tconst replacement = replacements[ i ];\n\t\t\tif ( ! replacement ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst { type, attributes, innerHTML } = replacement;\n\t\t\tconst formatType = getFormatType( type );\n\n\t\t\tif ( isEditableTree && type === '#comment' ) {\n\t\t\t\tpointer = append( getParent( pointer ), {\n\t\t\t\t\ttype: 'span',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tcontenteditable: 'false',\n\t\t\t\t\t\t'data-rich-text-comment':\n\t\t\t\t\t\t\tattributes[ 'data-rich-text-comment' ],\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t\tappend(\n\t\t\t\t\tappend( pointer, { type: 'span' } ),\n\t\t\t\t\tattributes[ 'data-rich-text-comment' ].trim()\n\t\t\t\t);\n\t\t\t} else if ( ! isEditableTree && type === 'script' ) {\n\t\t\t\tpointer = append(\n\t\t\t\t\tgetParent( pointer ),\n\t\t\t\t\tfromFormat( {\n\t\t\t\t\t\ttype: 'script',\n\t\t\t\t\t\tisEditableTree,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t\tappend( pointer, {\n\t\t\t\t\thtml: decodeURIComponent(\n\t\t\t\t\t\tattributes[ 'data-rich-text-script' ]\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t} else if ( formatType?.contentEditable === false ) {\n\t\t\t\t// For non editable formats, render the stored inner HTML.\n\t\t\t\tpointer = append(\n\t\t\t\t\tgetParent( pointer ),\n\t\t\t\t\tfromFormat( {\n\t\t\t\t\t\t...replacement,\n\t\t\t\t\t\tisEditableTree,\n\t\t\t\t\t\tboundaryClass: start === i && end === i + 1,\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tif ( innerHTML ) {\n\t\t\t\t\tappend( pointer, {\n\t\t\t\t\t\thtml: innerHTML,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpointer = append(\n\t\t\t\t\tgetParent( pointer ),\n\t\t\t\t\tfromFormat( {\n\t\t\t\t\t\t...replacement,\n\t\t\t\t\t\tobject: true,\n\t\t\t\t\t\tisEditableTree,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t}\n\t\t\t// Ensure pointer is text node.\n\t\t\tpointer = append( getParent( pointer ), '' );\n\t\t} else if ( ! preserveWhiteSpace && character === '\\n' ) {\n\t\t\tpointer = append( getParent( pointer ), {\n\t\t\t\ttype: 'br',\n\t\t\t\tattributes: isEditableTree\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t'data-rich-text-line-break': 'true',\n\t\t\t\t\t  }\n\t\t\t\t\t: undefined,\n\t\t\t\tobject: true,\n\t\t\t} );\n\t\t\t// Ensure pointer is text node.\n\t\t\tpointer = append( getParent( pointer ), '' );\n\t\t} else if ( ! isText( pointer ) ) {\n\t\t\tpointer = append( getParent( pointer ), character );\n\t\t} else {\n\t\t\tappendText( pointer, character );\n\t\t}\n\n\t\tif ( onStartIndex && start === i + 1 ) {\n\t\t\tonStartIndex( tree, pointer );\n\t\t}\n\n\t\tif ( onEndIndex && end === i + 1 ) {\n\t\t\tonEndIndex( tree, pointer );\n\t\t}\n\n\t\tif ( shouldInsertPadding && i === text.length ) {\n\t\t\tappend( getParent( pointer ), ZWNBSP );\n\n\t\t\t// We CANNOT use CSS to add a placeholder with pseudo elements on\n\t\t\t// the main block wrappers because that could clash with theme CSS.\n\t\t\tif ( placeholder && text.length === 0 ) {\n\t\t\t\tappend( getParent( pointer ), {\n\t\t\t\t\ttype: 'span',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t'data-rich-text-placeholder': placeholder,\n\t\t\t\t\t\t// Necessary to prevent the placeholder from catching\n\t\t\t\t\t\t// selection and being editable.\n\t\t\t\t\t\tstyle: 'pointer-events:none;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;',\n\t\t\t\t\t},\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tlastCharacterFormats = characterFormats;\n\t\tlastCharacter = character;\n\t}\n\n\treturn tree;\n}\n", "/**\n * WordPress dependencies\n */\n\nimport {\n\tescapeEditableHTML,\n\tescapeAttribute,\n\tisValidAttributeName,\n} from '@wordpress/escape-html';\n\n/**\n * Internal dependencies\n */\n\nimport { toTree } from './to-tree';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Create an HTML string from a Rich Text value.\n *\n * @param {Object}        $1                      Named arguments.\n * @param {RichTextValue} $1.value                Rich text value.\n * @param {boolean}       [$1.preserveWhiteSpace] Preserves newlines if true.\n *\n * @return {string} HTML string.\n */\nexport function toHTMLString( { value, preserveWhiteSpace } ) {\n\tconst tree = toTree( {\n\t\tvalue,\n\t\tpreserveWhiteSpace,\n\t\tcreateEmpty,\n\t\tappend,\n\t\tgetLastChild,\n\t\tgetParent,\n\t\tisText,\n\t\tgetText,\n\t\tremove,\n\t\tappendText,\n\t} );\n\n\treturn createChildrenHTML( tree.children );\n}\n\nfunction createEmpty() {\n\treturn {};\n}\n\nfunction getLastChild( { children } ) {\n\treturn children && children[ children.length - 1 ];\n}\n\nfunction append( parent, object ) {\n\tif ( typeof object === 'string' ) {\n\t\tobject = { text: object };\n\t}\n\n\tobject.parent = parent;\n\tparent.children = parent.children || [];\n\tparent.children.push( object );\n\treturn object;\n}\n\nfunction appendText( object, text ) {\n\tobject.text += text;\n}\n\nfunction getParent( { parent } ) {\n\treturn parent;\n}\n\nfunction isText( { text } ) {\n\treturn typeof text === 'string';\n}\n\nfunction getText( { text } ) {\n\treturn text;\n}\n\nfunction remove( object ) {\n\tconst index = object.parent.children.indexOf( object );\n\n\tif ( index !== -1 ) {\n\t\tobject.parent.children.splice( index, 1 );\n\t}\n\n\treturn object;\n}\n\nfunction createElementHTML( { type, attributes, object, children } ) {\n\tif ( type === '#comment' ) {\n\t\t// We can't restore the original comment delimiters, because once parsed\n\t\t// into DOM nodes, we don't have the information. But in the future we\n\t\t// could allow comment handlers to specify custom delimiters, for\n\t\t// example `</{comment-content}>` for Bits, where `comment-content`\n\t\t// would be `/{bit-name}` or `__{translatable-string}` (TBD).\n\t\treturn `<!--${ attributes[ 'data-rich-text-comment' ] }-->`;\n\t}\n\n\tlet attributeString = '';\n\n\tfor ( const key in attributes ) {\n\t\tif ( ! isValidAttributeName( key ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tattributeString += ` ${ key }=\"${ escapeAttribute(\n\t\t\tattributes[ key ]\n\t\t) }\"`;\n\t}\n\n\tif ( object ) {\n\t\treturn `<${ type }${ attributeString }>`;\n\t}\n\n\treturn `<${ type }${ attributeString }>${ createChildrenHTML(\n\t\tchildren\n\t) }</${ type }>`;\n}\n\nfunction createChildrenHTML( children = [] ) {\n\treturn children\n\t\t.map( ( child ) => {\n\t\t\tif ( child.html !== undefined ) {\n\t\t\t\treturn child.html;\n\t\t\t}\n\n\t\t\treturn child.text === undefined\n\t\t\t\t? createElementHTML( child )\n\t\t\t\t: escapeEditableHTML( child.text );\n\t\t} )\n\t\t.join( '' );\n}\n", "/**\n * WordPress dependencies\n */\nimport { select } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as richTextStore } from './store';\nimport { createElement } from './create-element';\nimport { mergePair } from './concat';\nimport { OBJECT_REPLACEMENT_CHARACTER, ZWNBSP } from './special-characters';\nimport { toHTMLString } from './to-html-string';\nimport { getTextContent } from './get-text-content';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\nfunction createEmptyValue() {\n\treturn {\n\t\tformats: [],\n\t\treplacements: [],\n\t\ttext: '',\n\t};\n}\n\nfunction toFormat( { tagName, attributes } ) {\n\tlet formatType;\n\n\tif ( attributes && attributes.class ) {\n\t\tformatType = select( richTextStore ).getFormatTypeForClassName(\n\t\t\tattributes.class\n\t\t);\n\n\t\tif ( formatType ) {\n\t\t\t// Preserve any additional classes.\n\t\t\tattributes.class = ` ${ attributes.class } `\n\t\t\t\t.replace( ` ${ formatType.className } `, ' ' )\n\t\t\t\t.trim();\n\n\t\t\tif ( ! attributes.class ) {\n\t\t\t\tdelete attributes.class;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( ! formatType ) {\n\t\tformatType =\n\t\t\tselect( richTextStore ).getFormatTypeForBareElement( tagName );\n\t}\n\n\tif ( ! formatType ) {\n\t\treturn attributes ? { type: tagName, attributes } : { type: tagName };\n\t}\n\n\tif (\n\t\tformatType.__experimentalCreatePrepareEditableTree &&\n\t\t! formatType.__experimentalCreateOnChangeEditableValue\n\t) {\n\t\treturn null;\n\t}\n\n\tif ( ! attributes ) {\n\t\treturn { formatType, type: formatType.name, tagName };\n\t}\n\n\tconst registeredAttributes = {};\n\tconst unregisteredAttributes = {};\n\tconst _attributes = { ...attributes };\n\n\tfor ( const key in formatType.attributes ) {\n\t\tconst name = formatType.attributes[ key ];\n\n\t\tregisteredAttributes[ key ] = _attributes[ name ];\n\n\t\t// delete the attribute and what's left is considered\n\t\t// to be unregistered.\n\t\tdelete _attributes[ name ];\n\n\t\tif ( typeof registeredAttributes[ key ] === 'undefined' ) {\n\t\t\tdelete registeredAttributes[ key ];\n\t\t}\n\t}\n\n\tfor ( const name in _attributes ) {\n\t\tunregisteredAttributes[ name ] = attributes[ name ];\n\t}\n\n\tif ( formatType.contentEditable === false ) {\n\t\tdelete unregisteredAttributes.contenteditable;\n\t}\n\n\treturn {\n\t\tformatType,\n\t\ttype: formatType.name,\n\t\ttagName,\n\t\tattributes: registeredAttributes,\n\t\tunregisteredAttributes,\n\t};\n}\n\n/**\n * The RichTextData class is used to instantiate a wrapper around rich text\n * values, with methods that can be used to transform or manipulate the data.\n *\n * - Create an empty instance: `new RichTextData()`.\n * - Create one from an HTML string: `RichTextData.fromHTMLString(\n *   '<em>hello</em>' )`.\n * - Create one from a wrapper HTMLElement: `RichTextData.fromHTMLElement(\n *   document.querySelector( 'p' ) )`.\n * - Create one from plain text: `RichTextData.fromPlainText( '1\\n2' )`.\n * - Create one from a rich text value: `new RichTextData( { text: '...',\n *   formats: [ ... ] } )`.\n *\n * @todo Add methods to manipulate the data, such as applyFormat, slice etc.\n */\nexport class RichTextData {\n\t#value;\n\n\tstatic empty() {\n\t\treturn new RichTextData();\n\t}\n\tstatic fromPlainText( text ) {\n\t\treturn new RichTextData( create( { text } ) );\n\t}\n\tstatic fromHTMLString( html ) {\n\t\treturn new RichTextData( create( { html } ) );\n\t}\n\t/**\n\t * Create a RichTextData instance from an HTML element.\n\t *\n\t * @param {HTMLElement}                    htmlElement The HTML element to create the instance from.\n\t * @param {{preserveWhiteSpace?: boolean}} options     Options.\n\t * @return {RichTextData} The RichTextData instance.\n\t */\n\tstatic fromHTMLElement( htmlElement, options = {} ) {\n\t\tconst { preserveWhiteSpace = false } = options;\n\t\tconst element = preserveWhiteSpace\n\t\t\t? htmlElement\n\t\t\t: collapseWhiteSpace( htmlElement );\n\t\tconst richTextData = new RichTextData( create( { element } ) );\n\t\tObject.defineProperty( richTextData, 'originalHTML', {\n\t\t\tvalue: htmlElement.innerHTML,\n\t\t} );\n\t\treturn richTextData;\n\t}\n\tconstructor( init = createEmptyValue() ) {\n\t\tthis.#value = init;\n\t}\n\ttoPlainText() {\n\t\treturn getTextContent( this.#value );\n\t}\n\t// We could expose `toHTMLElement` at some point as well, but we'd only use\n\t// it internally.\n\t/**\n\t * Convert the rich text value to an HTML string.\n\t *\n\t * @param {{preserveWhiteSpace?: boolean}} options Options.\n\t * @return {string} The HTML string.\n\t */\n\ttoHTMLString( { preserveWhiteSpace } = {} ) {\n\t\treturn (\n\t\t\tthis.originalHTML ||\n\t\t\ttoHTMLString( { value: this.#value, preserveWhiteSpace } )\n\t\t);\n\t}\n\tvalueOf() {\n\t\treturn this.toHTMLString();\n\t}\n\ttoString() {\n\t\treturn this.toHTMLString();\n\t}\n\ttoJSON() {\n\t\treturn this.toHTMLString();\n\t}\n\tget length() {\n\t\treturn this.text.length;\n\t}\n\tget formats() {\n\t\treturn this.#value.formats;\n\t}\n\tget replacements() {\n\t\treturn this.#value.replacements;\n\t}\n\tget text() {\n\t\treturn this.#value.text;\n\t}\n}\n\nfor ( const name of Object.getOwnPropertyNames( String.prototype ) ) {\n\tif ( RichTextData.prototype.hasOwnProperty( name ) ) {\n\t\tcontinue;\n\t}\n\n\tObject.defineProperty( RichTextData.prototype, name, {\n\t\tvalue( ...args ) {\n\t\t\t// Should we convert back to RichTextData?\n\t\t\treturn this.toHTMLString()[ name ]( ...args );\n\t\t},\n\t} );\n}\n\n/**\n * Create a RichText value from an `Element` tree (DOM), an HTML string or a\n * plain text string, with optionally a `Range` object to set the selection. If\n * called without any input, an empty value will be created. The optional\n * functions can be used to filter out content.\n *\n * A value will have the following shape, which you are strongly encouraged not\n * to modify without the use of helper functions:\n *\n * ```js\n * {\n *   text: string,\n *   formats: Array,\n *   replacements: Array,\n *   ?start: number,\n *   ?end: number,\n * }\n * ```\n *\n * As you can see, text and formatting are separated. `text` holds the text,\n * including any replacement characters for objects and lines. `formats`,\n * `objects` and `lines` are all sparse arrays of the same length as `text`. It\n * holds information about the formatting at the relevant text indices. Finally\n * `start` and `end` state which text indices are selected. They are only\n * provided if a `Range` was given.\n *\n * @param {Object}  [$1]                          Optional named arguments.\n * @param {Element} [$1.element]                  Element to create value from.\n * @param {string}  [$1.text]                     Text to create value from.\n * @param {string}  [$1.html]                     HTML to create value from.\n * @param {Range}   [$1.range]                    Range to create value from.\n * @param {boolean} [$1.__unstableIsEditableTree]\n * @return {RichTextValue} A rich text value.\n */\nexport function create( {\n\telement,\n\ttext,\n\thtml,\n\trange,\n\t__unstableIsEditableTree: isEditableTree,\n} = {} ) {\n\tif ( html instanceof RichTextData ) {\n\t\treturn {\n\t\t\ttext: html.text,\n\t\t\tformats: html.formats,\n\t\t\treplacements: html.replacements,\n\t\t};\n\t}\n\n\tif ( typeof text === 'string' && text.length > 0 ) {\n\t\treturn {\n\t\t\tformats: Array( text.length ),\n\t\t\treplacements: Array( text.length ),\n\t\t\ttext,\n\t\t};\n\t}\n\n\tif ( typeof html === 'string' && html.length > 0 ) {\n\t\t// It does not matter which document this is, we're just using it to\n\t\t// parse.\n\t\telement = createElement( document, html );\n\t}\n\n\tif ( typeof element !== 'object' ) {\n\t\treturn createEmptyValue();\n\t}\n\n\treturn createFromElement( {\n\t\telement,\n\t\trange,\n\t\tisEditableTree,\n\t} );\n}\n\n/**\n * Helper to accumulate the value's selection start and end from the current\n * node and range.\n *\n * @param {Object} accumulator Object to accumulate into.\n * @param {Node}   node        Node to create value with.\n * @param {Range}  range       Range to create value with.\n * @param {Object} value       Value that is being accumulated.\n */\nfunction accumulateSelection( accumulator, node, range, value ) {\n\tif ( ! range ) {\n\t\treturn;\n\t}\n\n\tconst { parentNode } = node;\n\tconst { startContainer, startOffset, endContainer, endOffset } = range;\n\tconst currentLength = accumulator.text.length;\n\n\t// Selection can be extracted from value.\n\tif ( value.start !== undefined ) {\n\t\taccumulator.start = currentLength + value.start;\n\t\t// Range indicates that the current node has selection.\n\t} else if ( node === startContainer && node.nodeType === node.TEXT_NODE ) {\n\t\taccumulator.start = currentLength + startOffset;\n\t\t// Range indicates that the current node is selected.\n\t} else if (\n\t\tparentNode === startContainer &&\n\t\tnode === startContainer.childNodes[ startOffset ]\n\t) {\n\t\taccumulator.start = currentLength;\n\t\t// Range indicates that the selection is after the current node.\n\t} else if (\n\t\tparentNode === startContainer &&\n\t\tnode === startContainer.childNodes[ startOffset - 1 ]\n\t) {\n\t\taccumulator.start = currentLength + value.text.length;\n\t\t// Fallback if no child inside handled the selection.\n\t} else if ( node === startContainer ) {\n\t\taccumulator.start = currentLength;\n\t}\n\n\t// Selection can be extracted from value.\n\tif ( value.end !== undefined ) {\n\t\taccumulator.end = currentLength + value.end;\n\t\t// Range indicates that the current node has selection.\n\t} else if ( node === endContainer && node.nodeType === node.TEXT_NODE ) {\n\t\taccumulator.end = currentLength + endOffset;\n\t\t// Range indicates that the current node is selected.\n\t} else if (\n\t\tparentNode === endContainer &&\n\t\tnode === endContainer.childNodes[ endOffset - 1 ]\n\t) {\n\t\taccumulator.end = currentLength + value.text.length;\n\t\t// Range indicates that the selection is before the current node.\n\t} else if (\n\t\tparentNode === endContainer &&\n\t\tnode === endContainer.childNodes[ endOffset ]\n\t) {\n\t\taccumulator.end = currentLength;\n\t\t// Fallback if no child inside handled the selection.\n\t} else if ( node === endContainer ) {\n\t\taccumulator.end = currentLength + endOffset;\n\t}\n}\n\n/**\n * Adjusts the start and end offsets from a range based on a text filter.\n *\n * @param {Node}     node   Node of which the text should be filtered.\n * @param {Range}    range  The range to filter.\n * @param {Function} filter Function to use to filter the text.\n *\n * @return {Object|void} Object containing range properties.\n */\nfunction filterRange( node, range, filter ) {\n\tif ( ! range ) {\n\t\treturn;\n\t}\n\n\tconst { startContainer, endContainer } = range;\n\tlet { startOffset, endOffset } = range;\n\n\tif ( node === startContainer ) {\n\t\tstartOffset = filter( node.nodeValue.slice( 0, startOffset ) ).length;\n\t}\n\n\tif ( node === endContainer ) {\n\t\tendOffset = filter( node.nodeValue.slice( 0, endOffset ) ).length;\n\t}\n\n\treturn { startContainer, startOffset, endContainer, endOffset };\n}\n\n/**\n * Collapse any whitespace used for HTML formatting to one space character,\n * because it will also be displayed as such by the browser.\n *\n * We need to strip it from the content because we use white-space: pre-wrap for\n * displaying editable rich text. Without using white-space: pre-wrap, the\n * browser will litter the content with non breaking spaces, among other issues.\n * See packages/rich-text/src/component/use-default-style.js.\n *\n * @see\n * https://developer.mozilla.org/en-US/docs/Web/CSS/white-space-collapse#collapsing_of_white_space\n *\n * @param {HTMLElement} element\n * @param {boolean}     isRoot\n *\n * @return {HTMLElement} New element with collapsed whitespace.\n */\nfunction collapseWhiteSpace( element, isRoot = true ) {\n\tconst clone = element.cloneNode( true );\n\tclone.normalize();\n\tArray.from( clone.childNodes ).forEach( ( node, i, nodes ) => {\n\t\tif ( node.nodeType === node.TEXT_NODE ) {\n\t\t\tlet newNodeValue = node.nodeValue;\n\n\t\t\tif ( /[\\n\\t\\r\\f]/.test( newNodeValue ) ) {\n\t\t\t\tnewNodeValue = newNodeValue.replace( /[\\n\\t\\r\\f]+/g, ' ' );\n\t\t\t}\n\n\t\t\tif ( newNodeValue.indexOf( '  ' ) !== -1 ) {\n\t\t\t\tnewNodeValue = newNodeValue.replace( / {2,}/g, ' ' );\n\t\t\t}\n\n\t\t\tif ( i === 0 && newNodeValue.startsWith( ' ' ) ) {\n\t\t\t\tnewNodeValue = newNodeValue.slice( 1 );\n\t\t\t} else if (\n\t\t\t\tisRoot &&\n\t\t\t\ti === nodes.length - 1 &&\n\t\t\t\tnewNodeValue.endsWith( ' ' )\n\t\t\t) {\n\t\t\t\tnewNodeValue = newNodeValue.slice( 0, -1 );\n\t\t\t}\n\n\t\t\tnode.nodeValue = newNodeValue;\n\t\t} else if ( node.nodeType === node.ELEMENT_NODE ) {\n\t\t\tcollapseWhiteSpace( node, false );\n\t\t}\n\t} );\n\treturn clone;\n}\n\n/**\n * We need to normalise line breaks to `\\n` so they are consistent across\n * platforms and serialised properly. Not removing \\r would cause it to\n * linger and result in double line breaks when whitespace is preserved.\n */\nconst CARRIAGE_RETURN = '\\r';\n\n/**\n * Removes reserved characters used by rich-text (zero width non breaking spaces\n * added by `toTree` and object replacement characters).\n *\n * @param {string} string\n */\nexport function removeReservedCharacters( string ) {\n\t// with the global flag, note that we should create a new regex each time OR\n\t// reset lastIndex state.\n\treturn string.replace(\n\t\tnew RegExp(\n\t\t\t`[${ ZWNBSP }${ OBJECT_REPLACEMENT_CHARACTER }${ CARRIAGE_RETURN }]`,\n\t\t\t'gu'\n\t\t),\n\t\t''\n\t);\n}\n\n/**\n * Creates a Rich Text value from a DOM element and range.\n *\n * @param {Object}  $1                  Named arguments.\n * @param {Element} [$1.element]        Element to create value from.\n * @param {Range}   [$1.range]          Range to create value from.\n * @param {boolean} [$1.isEditableTree]\n *\n * @return {RichTextValue} A rich text value.\n */\nfunction createFromElement( { element, range, isEditableTree } ) {\n\tconst accumulator = createEmptyValue();\n\n\tif ( ! element ) {\n\t\treturn accumulator;\n\t}\n\n\tif ( ! element.hasChildNodes() ) {\n\t\taccumulateSelection( accumulator, element, range, createEmptyValue() );\n\t\treturn accumulator;\n\t}\n\n\tconst length = element.childNodes.length;\n\n\t// Optimise for speed.\n\tfor ( let index = 0; index < length; index++ ) {\n\t\tconst node = element.childNodes[ index ];\n\t\tconst tagName = node.nodeName.toLowerCase();\n\n\t\tif ( node.nodeType === node.TEXT_NODE ) {\n\t\t\tconst text = removeReservedCharacters( node.nodeValue );\n\t\t\trange = filterRange( node, range, removeReservedCharacters );\n\t\t\taccumulateSelection( accumulator, node, range, { text } );\n\t\t\t// Create a sparse array of the same length as `text`, in which\n\t\t\t// formats can be added.\n\t\t\taccumulator.formats.length += text.length;\n\t\t\taccumulator.replacements.length += text.length;\n\t\t\taccumulator.text += text;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (\n\t\t\tnode.nodeType === node.COMMENT_NODE ||\n\t\t\t( node.nodeType === node.ELEMENT_NODE &&\n\t\t\t\tnode.tagName === 'SPAN' &&\n\t\t\t\tnode.hasAttribute( 'data-rich-text-comment' ) )\n\t\t) {\n\t\t\tconst value = {\n\t\t\t\tformats: [ , ],\n\t\t\t\treplacements: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: '#comment',\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t'data-rich-text-comment':\n\t\t\t\t\t\t\t\tnode.nodeType === node.COMMENT_NODE\n\t\t\t\t\t\t\t\t\t? node.nodeValue\n\t\t\t\t\t\t\t\t\t: node.getAttribute(\n\t\t\t\t\t\t\t\t\t\t\t'data-rich-text-comment'\n\t\t\t\t\t\t\t\t\t  ),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttext: OBJECT_REPLACEMENT_CHARACTER,\n\t\t\t};\n\t\t\taccumulateSelection( accumulator, node, range, value );\n\t\t\tmergePair( accumulator, value );\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( node.nodeType !== node.ELEMENT_NODE ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (\n\t\t\tisEditableTree &&\n\t\t\t// Ignore any line breaks that are not inserted by us.\n\t\t\ttagName === 'br' &&\n\t\t\t! node.getAttribute( 'data-rich-text-line-break' )\n\t\t) {\n\t\t\taccumulateSelection( accumulator, node, range, createEmptyValue() );\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( tagName === 'script' ) {\n\t\t\tconst value = {\n\t\t\t\tformats: [ , ],\n\t\t\t\treplacements: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: tagName,\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t'data-rich-text-script':\n\t\t\t\t\t\t\t\tnode.getAttribute( 'data-rich-text-script' ) ||\n\t\t\t\t\t\t\t\tencodeURIComponent( node.innerHTML ),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttext: OBJECT_REPLACEMENT_CHARACTER,\n\t\t\t};\n\t\t\taccumulateSelection( accumulator, node, range, value );\n\t\t\tmergePair( accumulator, value );\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( tagName === 'br' ) {\n\t\t\taccumulateSelection( accumulator, node, range, createEmptyValue() );\n\t\t\tmergePair( accumulator, create( { text: '\\n' } ) );\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst format = toFormat( {\n\t\t\ttagName,\n\t\t\tattributes: getAttributes( { element: node } ),\n\t\t} );\n\n\t\t// When a format type is declared as not editable, replace it with an\n\t\t// object replacement character and preserve the inner HTML.\n\t\tif ( format?.formatType?.contentEditable === false ) {\n\t\t\tdelete format.formatType;\n\t\t\taccumulateSelection( accumulator, node, range, createEmptyValue() );\n\t\t\tmergePair( accumulator, {\n\t\t\t\tformats: [ , ],\n\t\t\t\treplacements: [\n\t\t\t\t\t{\n\t\t\t\t\t\t...format,\n\t\t\t\t\t\tinnerHTML: node.innerHTML,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttext: OBJECT_REPLACEMENT_CHARACTER,\n\t\t\t} );\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ( format ) {\n\t\t\tdelete format.formatType;\n\t\t}\n\n\t\tconst value = createFromElement( {\n\t\t\telement: node,\n\t\t\trange,\n\t\t\tisEditableTree,\n\t\t} );\n\n\t\taccumulateSelection( accumulator, node, range, value );\n\n\t\t// Ignore any placeholders, but keep their content since the browser\n\t\t// might insert text inside them when the editable element is flex.\n\t\tif ( ! format || node.getAttribute( 'data-rich-text-placeholder' ) ) {\n\t\t\tmergePair( accumulator, value );\n\t\t} else if ( value.text.length === 0 ) {\n\t\t\tif ( format.attributes ) {\n\t\t\t\tmergePair( accumulator, {\n\t\t\t\t\tformats: [ , ],\n\t\t\t\t\treplacements: [ format ],\n\t\t\t\t\ttext: OBJECT_REPLACEMENT_CHARACTER,\n\t\t\t\t} );\n\t\t\t}\n\t\t} else {\n\t\t\t// Indices should share a reference to the same formats array.\n\t\t\t// Only create a new reference if `formats` changes.\n\t\t\tfunction mergeFormats( formats ) {\n\t\t\t\tif ( mergeFormats.formats === formats ) {\n\t\t\t\t\treturn mergeFormats.newFormats;\n\t\t\t\t}\n\n\t\t\t\tconst newFormats = formats\n\t\t\t\t\t? [ format, ...formats ]\n\t\t\t\t\t: [ format ];\n\n\t\t\t\tmergeFormats.formats = formats;\n\t\t\t\tmergeFormats.newFormats = newFormats;\n\n\t\t\t\treturn newFormats;\n\t\t\t}\n\n\t\t\t// Since the formats parameter can be `undefined`, preset\n\t\t\t// `mergeFormats` with a new reference.\n\t\t\tmergeFormats.newFormats = [ format ];\n\n\t\t\tmergePair( accumulator, {\n\t\t\t\t...value,\n\t\t\t\tformats: Array.from( value.formats, mergeFormats ),\n\t\t\t} );\n\t\t}\n\t}\n\n\treturn accumulator;\n}\n\n/**\n * Gets the attributes of an element in object shape.\n *\n * @param {Object}  $1         Named arguments.\n * @param {Element} $1.element Element to get attributes from.\n *\n * @return {Object|void} Attribute object or `undefined` if the element has no\n *                       attributes.\n */\nfunction getAttributes( { element } ) {\n\tif ( ! element.hasAttributes() ) {\n\t\treturn;\n\t}\n\n\tconst length = element.attributes.length;\n\tlet accumulator;\n\n\t// Optimise for speed.\n\tfor ( let i = 0; i < length; i++ ) {\n\t\tconst { name, value } = element.attributes[ i ];\n\n\t\tif ( name.indexOf( 'data-rich-text-' ) === 0 ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst safeName = /^on/i.test( name )\n\t\t\t? 'data-disable-rich-text-' + name\n\t\t\t: name;\n\n\t\taccumulator = accumulator || {};\n\t\taccumulator[ safeName ] = value;\n\t}\n\n\treturn accumulator;\n}\n", "/**\n * Internal dependencies\n */\nimport type { RichTextValue } from './types';\n\n/**\n * Check if the selection of a Rich Text value is collapsed or not. Collapsed\n * means that no characters are selected, but there is a caret present. If there\n * is no selection, `undefined` will be returned. This is similar to\n * `window.getSelection().isCollapsed()`.\n *\n * @param props       The rich text value to check.\n * @param props.start\n * @param props.end\n * @return True if the selection is collapsed, false if not, undefined if there is no selection.\n */\nexport function isCollapsed( {\n\tstart,\n\tend,\n}: RichTextValue ): boolean | undefined {\n\tif ( start === undefined || end === undefined ) {\n\t\treturn;\n\t}\n\n\treturn start === end;\n}\n", "/**\n * Internal dependencies\n */\n\nimport { normaliseFormats } from './normalise-formats';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Remove any format object from a Rich Text value by type from the given\n * `startIndex` to the given `endIndex`. Indices are retrieved from the\n * selection if none are provided.\n *\n * @param {RichTextValue} value        Value to modify.\n * @param {string}        formatType   Format type to remove.\n * @param {number}        [startIndex] Start index.\n * @param {number}        [endIndex]   End index.\n *\n * @return {RichTextValue} A new value with the format applied.\n */\nexport function removeFormat(\n\tvalue,\n\tformatType,\n\tstartIndex = value.start,\n\tendIndex = value.end\n) {\n\tconst { formats, activeFormats } = value;\n\tconst newFormats = formats.slice();\n\n\t// If the selection is collapsed, expand start and end to the edges of the\n\t// format.\n\tif ( startIndex === endIndex ) {\n\t\tconst format = newFormats[ startIndex ]?.find(\n\t\t\t( { type } ) => type === formatType\n\t\t);\n\n\t\tif ( format ) {\n\t\t\twhile (\n\t\t\t\tnewFormats[ startIndex ]?.find(\n\t\t\t\t\t( newFormat ) => newFormat === format\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tfilterFormats( newFormats, startIndex, formatType );\n\t\t\t\tstartIndex--;\n\t\t\t}\n\n\t\t\tendIndex++;\n\n\t\t\twhile (\n\t\t\t\tnewFormats[ endIndex ]?.find(\n\t\t\t\t\t( newFormat ) => newFormat === format\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tfilterFormats( newFormats, endIndex, formatType );\n\t\t\t\tendIndex++;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tfor ( let i = startIndex; i < endIndex; i++ ) {\n\t\t\tif ( newFormats[ i ] ) {\n\t\t\t\tfilterFormats( newFormats, i, formatType );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn normaliseFormats( {\n\t\t...value,\n\t\tformats: newFormats,\n\t\tactiveFormats:\n\t\t\tactiveFormats?.filter( ( { type } ) => type !== formatType ) || [],\n\t} );\n}\n\nfunction filterFormats( formats, index, formatType ) {\n\tconst newFormats = formats[ index ].filter(\n\t\t( { type } ) => type !== formatType\n\t);\n\n\tif ( newFormats.length ) {\n\t\tformats[ index ] = newFormats;\n\t} else {\n\t\tdelete formats[ index ];\n\t}\n}\n", "/**\n * Internal dependencies\n */\n\nimport { create } from './create';\nimport { normaliseFormats } from './normalise-formats';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Insert a Rich Text value, an HTML string, or a plain text string, into a\n * Rich Text value at the given `startIndex`. Any content between `startIndex`\n * and `endIndex` will be removed. Indices are retrieved from the selection if\n * none are provided.\n *\n * @param {RichTextValue}        value         Value to modify.\n * @param {RichTextValue|string} valueToInsert Value to insert.\n * @param {number}               [startIndex]  Start index.\n * @param {number}               [endIndex]    End index.\n *\n * @return {RichTextValue} A new value with the value inserted.\n */\nexport function insert(\n\tvalue,\n\tvalueToInsert,\n\tstartIndex = value.start,\n\tendIndex = value.end\n) {\n\tconst { formats, replacements, text } = value;\n\n\tif ( typeof valueToInsert === 'string' ) {\n\t\tvalueToInsert = create( { text: valueToInsert } );\n\t}\n\n\tconst index = startIndex + valueToInsert.text.length;\n\n\treturn normaliseFormats( {\n\t\tformats: formats\n\t\t\t.slice( 0, startIndex )\n\t\t\t.concat( valueToInsert.formats, formats.slice( endIndex ) ),\n\t\treplacements: replacements\n\t\t\t.slice( 0, startIndex )\n\t\t\t.concat(\n\t\t\t\tvalueToInsert.replacements,\n\t\t\t\treplacements.slice( endIndex )\n\t\t\t),\n\t\ttext:\n\t\t\ttext.slice( 0, startIndex ) +\n\t\t\tvalueToInsert.text +\n\t\t\ttext.slice( endIndex ),\n\t\tstart: index,\n\t\tend: index,\n\t} );\n}\n", "/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Slice a Rich Text value from `startIndex` to `endIndex`. Indices are\n * retrieved from the selection if none are provided. This is similar to\n * `String.prototype.slice`.\n *\n * @param {RichTextValue} value        Value to modify.\n * @param {number}        [startIndex] Start index.\n * @param {number}        [endIndex]   End index.\n *\n * @return {RichTextValue} A new extracted value.\n */\nexport function slice( value, startIndex = value.start, endIndex = value.end ) {\n\tconst { formats, replacements, text } = value;\n\n\tif ( startIndex === undefined || endIndex === undefined ) {\n\t\treturn { ...value };\n\t}\n\n\treturn {\n\t\tformats: formats.slice( startIndex, endIndex ),\n\t\treplacements: replacements.slice( startIndex, endIndex ),\n\t\ttext: text.slice( startIndex, endIndex ),\n\t};\n}\n", "/**\n * Clears the a11y-speak-region elements and hides the explanatory text.\n */\nexport default function clear() {\n\tconst regions = document.getElementsByClassName( 'a11y-speak-region' );\n\tconst introText = document.getElementById( 'a11y-speak-intro-text' );\n\n\tfor ( let i = 0; i < regions.length; i++ ) {\n\t\tregions[ i ].textContent = '';\n\t}\n\n\t// Make sure the explanatory text is hidden from assistive technologies.\n\tif ( introText ) {\n\t\tintroText.setAttribute( 'hidden', 'hidden' );\n\t}\n}\n", "let previousMessage = '';\n\n/**\n * Filter the message to be announced to the screenreader.\n *\n * @param {string} message The message to be announced.\n *\n * @return {string} The filtered message.\n */\nexport default function filterMessage( message ) {\n\t/*\n\t * Strip HTML tags (if any) from the message string. Ideally, messages should\n\t * be simple strings, carefully crafted for specific use with A11ySpeak.\n\t * When re-using already existing strings this will ensure simple HTML to be\n\t * stripped out and replaced with a space. Browsers will collapse multiple\n\t * spaces natively.\n\t */\n\tmessage = message.replace( /<[^<>]+>/g, ' ' );\n\n\t/*\n\t * Safari + VoiceOver don't announce repeated, identical strings. We use\n\t * a `no-break space` to force them to think identical strings are different.\n\t */\n\tif ( previousMessage === message ) {\n\t\tmessage += '\\u00A0';\n\t}\n\n\tpreviousMessage = message;\n\n\treturn message;\n}\n", "/**\n * Internal dependencies\n */\nimport clear from './clear';\nimport filterMessage from './filter-message';\n\n/**\n * Allows you to easily announce dynamic interface updates to screen readers using ARIA live regions.\n * This module is inspired by the `speak` function in `wp-a11y.js`.\n *\n * @param {string}               message    The message to be announced by assistive technologies.\n * @param {'polite'|'assertive'} [ariaLive] The politeness level for aria-live; default: 'polite'.\n *\n * @example\n * ```js\n * import { speak } from '@wordpress/a11y';\n *\n * // For polite messages that shouldn't interrupt what screen readers are currently announcing.\n * speak( 'The message you want to send to the ARIA live region' );\n *\n * // For assertive messages that should interrupt what screen readers are currently announcing.\n * speak( 'The message you want to send to the ARIA live region', 'assertive' );\n * ```\n */\nexport function speak( message, ariaLive ) {\n\t/*\n\t * Clear previous messages to allow repeated strings being read out and hide\n\t * the explanatory text from assistive technologies.\n\t */\n\tclear();\n\n\tmessage = filterMessage( message );\n\n\tconst introText = document.getElementById( 'a11y-speak-intro-text' );\n\tconst containerAssertive = document.getElementById(\n\t\t'a11y-speak-assertive'\n\t);\n\tconst containerPolite = document.getElementById( 'a11y-speak-polite' );\n\n\tif ( containerAssertive && ariaLive === 'assertive' ) {\n\t\tcontainerAssertive.textContent = message;\n\t} else if ( containerPolite ) {\n\t\tcontainerPolite.textContent = message;\n\t}\n\n\t/*\n\t * Make the explanatory text available to assistive technologies by removing\n\t * the 'hidden' HTML attribute.\n\t */\n\tif ( introText ) {\n\t\tintroText.removeAttribute( 'hidden' );\n\t}\n}\n", "/**\n * @typedef {() => void} Callback\n *\n * TODO: Remove this typedef and inline `() => void` type.\n *\n * This typedef is used so that a descriptive type is provided in our\n * automatically generated documentation.\n *\n * An in-line type `() => void` would be preferable, but the generated\n * documentation is `null` in that case.\n *\n * @see https://github.com/WordPress/gutenberg/issues/18045\n */\n\n/**\n * Specify a function to execute when the DOM is fully loaded.\n *\n * @param {Callback} callback A function to execute after the DOM is ready.\n *\n * @example\n * ```js\n * import domReady from '@wordpress/dom-ready';\n *\n * domReady( function() {\n * \t//do something after DOM loads.\n * } );\n * ```\n *\n * @return {void}\n */\nexport default function domReady( callback ) {\n\tif ( typeof document === 'undefined' ) {\n\t\treturn;\n\t}\n\n\tif (\n\t\tdocument.readyState === 'complete' || // DOMContentLoaded + Images/Styles/etc loaded, so we call directly.\n\t\tdocument.readyState === 'interactive' // DOMContentLoaded fires at this point, so we call directly.\n\t) {\n\t\treturn void callback();\n\t}\n\n\t// DOMContentLoaded has not fired yet, delay callback until then.\n\tdocument.addEventListener( 'DOMContentLoaded', callback );\n}\n", "/**\n * Build the live regions markup.\n *\n * @param {'polite'|'assertive'} [ariaLive] Value for the 'aria-live' attribute; default: 'polite'.\n *\n * @return {HTMLDivElement} The ARIA live region HTML element.\n */\nexport default function addContainer( ariaLive = 'polite' ) {\n\tconst container = document.createElement( 'div' );\n\tcontainer.id = `a11y-speak-${ ariaLive }`;\n\tcontainer.className = 'a11y-speak-region';\n\n\tcontainer.setAttribute(\n\t\t'style',\n\t\t'position:absolute;' +\n\t\t\t'margin:-1px;' +\n\t\t\t'padding:0;' +\n\t\t\t'height:1px;' +\n\t\t\t'width:1px;' +\n\t\t\t'overflow:hidden;' +\n\t\t\t'clip-path:inset(50%);' +\n\t\t\t'border:0;' +\n\t\t\t'word-wrap:normal !important;'\n\t);\n\tcontainer.setAttribute( 'aria-live', ariaLive );\n\tcontainer.setAttribute( 'aria-relevant', 'additions text' );\n\tcontainer.setAttribute( 'aria-atomic', 'true' );\n\n\tconst { body } = document;\n\tif ( body ) {\n\t\tbody.appendChild( container );\n\t}\n\n\treturn container;\n}\n", "/**\n * External dependencies\n */\nimport type { TanninLocaleDomain } from 'tannin';\nimport Tannin from 'tannin';\n/**\n * Internal dependencies\n */\nimport type {\n\tgetFilterDomain,\n\tI18n,\n\tLocaleData,\n\tSubscribeCallback,\n\tTranslatableText,\n\tUnsubscribeCallback,\n} from './types';\n/**\n * WordPress dependencies\n */\nimport type { Hooks } from '@wordpress/hooks';\n/**\n * Default locale data to use for Tannin domain when not otherwise provided.\n * Assumes an English plural forms expression.\n */\nconst DEFAULT_LOCALE_DATA: LocaleData = {\n\t'': {\n\t\tplural_forms( n: number ) {\n\t\t\treturn n === 1 ? 0 : 1;\n\t\t},\n\t},\n};\n\n/*\n * Regular expression that matches i18n hooks like `i18n.gettext`, `i18n.ngettext`,\n * `i18n.gettext_domain` or `i18n.ngettext_with_context` or `i18n.has_translation`.\n */\nconst I18N_HOOK_REGEXP = /^i18n\\.(n?gettext|has_translation)(_|$)/;\n\n/**\n * Create an i18n instance\n *\n * @param [initialData]   Locale data configuration.\n * @param [initialDomain] Domain for which configuration applies.\n * @param [hooks]         Hooks implementation.\n *\n * @return I18n instance.\n */\nexport const createI18n = < TextDomain extends string >(\n\tinitialData?: LocaleData< TextDomain >,\n\tinitialDomain?: TextDomain,\n\thooks?: Hooks\n): I18n< TextDomain > => {\n\t/**\n\t * The underlying instance of Tannin to which exported functions interface.\n\t */\n\tconst tannin = new Tannin( {} );\n\n\tconst listeners = new Set< () => void >();\n\n\tconst notifyListeners = () => {\n\t\tlisteners.forEach( ( listener ) => listener() );\n\t};\n\n\t/**\n\t * Subscribe to changes of locale data.\n\t *\n\t * @param callback Subscription callback.\n\t * @return Unsubscribe callback.\n\t */\n\tconst subscribe = ( callback: SubscribeCallback ): UnsubscribeCallback => {\n\t\tlisteners.add( callback );\n\t\treturn () => listeners.delete( callback );\n\t};\n\n\tconst getLocaleData: I18n< TextDomain >[ 'getLocaleData' ] = (\n\t\tdomain = 'default' as TextDomain\n\t) => tannin.data[ domain ] as LocaleData< TextDomain >;\n\n\t/**\n\t * @param [data]\n\t * @param [domain]\n\t */\n\tconst doSetLocaleData = (\n\t\tdata?: LocaleData,\n\t\tdomain: TextDomain = 'default' as TextDomain\n\t) => {\n\t\ttannin.data[ domain ] = {\n\t\t\t...tannin.data[ domain ],\n\t\t\t...data,\n\t\t} as TanninLocaleDomain;\n\n\t\t// Populate default domain configuration (supported locale date which omits\n\t\t// a plural forms expression).\n\t\ttannin.data[ domain ][ '' ] = {\n\t\t\t...DEFAULT_LOCALE_DATA[ '' ],\n\t\t\t...tannin.data[ domain ]?.[ '' ],\n\t\t};\n\n\t\t// Clean up cached plural forms functions cache as it might be updated.\n\t\tdelete tannin.pluralForms[ domain ];\n\t};\n\n\tconst setLocaleData: I18n< TextDomain >[ 'setLocaleData' ] = (\n\t\tdata,\n\t\tdomain\n\t) => {\n\t\tdoSetLocaleData( data, domain );\n\t\tnotifyListeners();\n\t};\n\n\tconst addLocaleData: I18n< TextDomain >[ 'addLocaleData' ] = (\n\t\tdata,\n\t\tdomain = 'default' as TextDomain\n\t) => {\n\t\ttannin.data[ domain ] = {\n\t\t\t...tannin.data[ domain ],\n\t\t\t...data,\n\t\t\t// Populate default domain configuration (supported locale date which omits\n\t\t\t// a plural forms expression).\n\t\t\t'': {\n\t\t\t\t...DEFAULT_LOCALE_DATA[ '' ],\n\t\t\t\t...tannin.data[ domain ]?.[ '' ],\n\t\t\t\t...data?.[ '' ],\n\t\t\t},\n\t\t} as TanninLocaleDomain;\n\n\t\t// Clean up cached plural forms functions cache as it might be updated.\n\t\tdelete tannin.pluralForms[ domain ];\n\n\t\tnotifyListeners();\n\t};\n\n\tconst resetLocaleData: I18n< TextDomain >[ 'resetLocaleData' ] = (\n\t\tdata,\n\t\tdomain\n\t) => {\n\t\t// Reset all current Tannin locale data.\n\t\ttannin.data = {};\n\n\t\t// Reset cached plural forms functions cache.\n\t\ttannin.pluralForms = {};\n\n\t\tsetLocaleData( data, domain );\n\t};\n\n\t/**\n\t * Wrapper for Tannin's `dcnpgettext`. Populates default locale data if not\n\t * otherwise previously assigned.\n\t *\n\t * @param domain   Domain to retrieve the translated text.\n\t * @param context  Context information for the translators.\n\t * @param single   Text to translate if non-plural. Used as\n\t *                 fallback return value on a caught error.\n\t * @param [plural] The text to be used if the number is\n\t *                 plural.\n\t * @param [number] The number to compare against to use\n\t *                 either the singular or plural form.\n\t *\n\t * @return The translated string.\n\t */\n\tconst dcnpgettext = (\n\t\tdomain = 'default' as TextDomain,\n\t\tcontext: string | void,\n\t\tsingle: string,\n\t\tplural?: string,\n\t\tnumber?: number\n\t): string => {\n\t\tif ( ! tannin.data[ domain ] ) {\n\t\t\t// Use `doSetLocaleData` to set silently, without notifying listeners.\n\t\t\tdoSetLocaleData( undefined, domain );\n\t\t}\n\n\t\treturn tannin.dcnpgettext( domain, context, single, plural, number );\n\t};\n\n\tconst getFilterDomain: getFilterDomain = ( domain ) => domain || 'default';\n\n\tconst __: I18n< TextDomain >[ '__' ] = ( text, domain ) => {\n\t\tlet translation = dcnpgettext( domain, undefined, text );\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText< typeof text >;\n\t\t}\n\n\t\t/**\n\t\t * Filters text with its translation.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param text        Text to translate.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.gettext',\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.gettext_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\t};\n\n\tconst _x: I18n< TextDomain >[ '_x' ] = ( text, context, domain ) => {\n\t\tlet translation = dcnpgettext( domain, context, text );\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText< typeof text >;\n\t\t}\n\n\t\t/**\n\t\t * Filters text with its translation based on context information.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param text        Text to translate.\n\t\t * @param context     Context information for the translators.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.gettext_with_context',\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.gettext_with_context_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\t};\n\n\tconst _n: I18n< TextDomain >[ '_n' ] = (\n\t\tsingle,\n\t\tplural,\n\t\tnumber,\n\t\tdomain\n\t) => {\n\t\tlet translation = dcnpgettext(\n\t\t\tdomain,\n\t\t\tundefined,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber\n\t\t);\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText<\n\t\t\t\ttypeof single | typeof plural\n\t\t\t>;\n\t\t}\n\n\t\t/**\n\t\t * Filters the singular or plural form of a string.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param single      The text to be used if the number is singular.\n\t\t * @param plural      The text to be used if the number is plural.\n\t\t * @param number      The number to compare against to use either the singular or plural form.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.ngettext',\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.ngettext_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\t};\n\n\tconst _nx: I18n< TextDomain >[ '_nx' ] = (\n\t\tsingle,\n\t\tplural,\n\t\tnumber,\n\t\tcontext,\n\t\tdomain\n\t) => {\n\t\tlet translation = dcnpgettext(\n\t\t\tdomain,\n\t\t\tcontext,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber\n\t\t);\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText<\n\t\t\t\ttypeof single | typeof plural\n\t\t\t>;\n\t\t}\n\n\t\t/**\n\t\t * Filters the singular or plural form of a string with gettext context.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param single      The text to be used if the number is singular.\n\t\t * @param plural      The text to be used if the number is plural.\n\t\t * @param number      The number to compare against to use either the singular or plural form.\n\t\t * @param context     Context information for the translators.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.ngettext_with_context',\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.ngettext_with_context_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\t};\n\n\tconst isRTL: I18n< TextDomain >[ 'isRTL' ] = () => {\n\t\treturn 'rtl' === _x( 'ltr', 'text direction' );\n\t};\n\n\tconst hasTranslation: I18n< TextDomain >[ 'hasTranslation' ] = (\n\t\tsingle,\n\t\tcontext,\n\t\tdomain\n\t) => {\n\t\tconst key = context ? context + '\\u0004' + single : single;\n\t\tlet result = !! tannin.data?.[ domain ?? 'default' ]?.[ key ];\n\t\tif ( hooks ) {\n\t\t\t/**\n\t\t\t * Filters the presence of a translation in the locale data.\n\t\t\t *\n\t\t\t * @param hasTranslation Whether the translation is present or not..\n\t\t\t * @param single         The singular form of the translated text (used as key in locale data)\n\t\t\t * @param context        Context information for the translators.\n\t\t\t * @param domain         Text domain. Unique identifier for retrieving translated strings.\n\t\t\t */\n\t\t\tresult = hooks.applyFilters(\n\t\t\t\t'i18n.has_translation',\n\t\t\t\tresult,\n\t\t\t\tsingle,\n\t\t\t\tcontext,\n\t\t\t\tdomain\n\t\t\t) as boolean;\n\n\t\t\tresult = hooks.applyFilters(\n\t\t\t\t'i18n.has_translation_' + getFilterDomain( domain ),\n\t\t\t\tresult,\n\t\t\t\tsingle,\n\t\t\t\tcontext,\n\t\t\t\tdomain\n\t\t\t) as boolean;\n\t\t}\n\t\treturn result;\n\t};\n\n\tif ( initialData ) {\n\t\tsetLocaleData( initialData, initialDomain );\n\t}\n\n\tif ( hooks ) {\n\t\t/**\n\t\t * @param hookName\n\t\t */\n\t\tconst onHookAddedOrRemoved = ( hookName: string ) => {\n\t\t\tif ( I18N_HOOK_REGEXP.test( hookName ) ) {\n\t\t\t\tnotifyListeners();\n\t\t\t}\n\t\t};\n\n\t\thooks.addAction( 'hookAdded', 'core/i18n', onHookAddedOrRemoved );\n\t\thooks.addAction( 'hookRemoved', 'core/i18n', onHookAddedOrRemoved );\n\t}\n\n\treturn {\n\t\tgetLocaleData,\n\t\tsetLocaleData,\n\t\taddLocaleData,\n\t\tresetLocaleData,\n\t\tsubscribe,\n\t\t__,\n\t\t_x,\n\t\t_n,\n\t\t_nx,\n\t\tisRTL,\n\t\thasTranslation,\n\t};\n};\n", "/**\n * Internal dependencies\n */\nimport { createI18n } from './create-i18n';\n\n/**\n * WordPress dependencies\n */\nimport { defaultHooks } from '@wordpress/hooks';\nimport {\n\tLocaleData,\n\tSubscribeCallback,\n\tTranslatableText,\n\tUnsubscribeCallback,\n} from './types';\n\nconst i18n = createI18n( undefined, undefined, defaultHooks );\n\n/**\n * Default, singleton instance of `I18n`.\n */\nexport default i18n;\n\n/*\n * Comments in this file are duplicated from ./i18n due to\n * https://github.com/WordPress/gutenberg/pull/20318#issuecomment-590837722\n */\n\n/**\n * Returns locale data by domain in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param { string | undefined } [domain] Domain for which to get the data.\n * @return { LocaleData } Locale data.\n */\nexport const getLocaleData = i18n.getLocaleData.bind( i18n );\n\n/**\n * Merges locale data into the Tannin instance by domain. Accepts data in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData }        [data]   Locale data configuration.\n * @param {string | undefined} [domain] Domain for which configuration applies.\n */\nexport const setLocaleData = i18n.setLocaleData.bind( i18n );\n\n/**\n * Resets all current Tannin instance locale data and sets the specified\n * locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData}         [data]   Locale data configuration.\n * @param {string | undefined} [domain] Domain for which configuration applies.\n */\nexport const resetLocaleData = i18n.resetLocaleData.bind( i18n );\n\n/**\n * Subscribes to changes of locale data\n *\n * @param {SubscribeCallback} callback Subscription callback\n * @return {UnsubscribeCallback} Unsubscribe callback\n */\nexport const subscribe = i18n.subscribe.bind( i18n );\n\n/**\n * Retrieve the translation of text.\n *\n * @see https://developer.wordpress.org/reference/functions/__/\n *\n * @template {string} Text\n *\n * @param {Text}               text   Text to translate.\n * @param {string | undefined} domain Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Text>} Translated text.\n */\nexport const __ = i18n.__.bind( i18n );\n\n/**\n * Retrieve translated string with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_x/\n *\n * @template {string} Text\n *\n * @param {Text}               text    Text to translate.\n * @param {string}             context Context information for the translators.\n * @param {string | undefined} domain  Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Text>} Translated context string without pipe.\n */\nexport const _x = i18n._x.bind( i18n );\n\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number.\n *\n * @see https://developer.wordpress.org/reference/functions/_n/\n *\n * @template {string} Single\n * @template {string} Plural\n *\n * @param {Single}             single The text to be used if the number is singular.\n * @param {Plural}             plural The text to be used if the number is plural.\n * @param {number}             number The number to compare against to use either the\n *                                    singular or plural form.\n * @param {string | undefined} domain Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Single | Plural>} The translated singular or plural form.\n */\nexport const _n = i18n._n.bind( i18n );\n\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number, with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_nx/\n *\n * @template {string} Single\n * @template {string} Plural\n * @param {Single}             single   The text to be used if the number is singular.\n *\n * @param {Single}             single   The text to be used if the number is singular.\n * @param {Plural}             plural   The text to be used if the number is plural.\n * @param {number}             number   The number to compare against to use either the\n *                                      singular or plural form.\n * @param {string}             context  Context information for the translators.\n * @param {string | undefined} [domain] Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Single | Plural>} The translated singular or plural form.\n */\nexport const _nx = i18n._nx.bind( i18n );\n\n/**\n * Check if current locale is RTL.\n *\n * **RTL (Right To Left)** is a locale property indicating that text is written from right to left.\n * For example, the `he` locale (for Hebrew) specifies right-to-left. Arabic (ar) is another common\n * language written RTL. The opposite of RTL, LTR (Left To Right) is used in other languages,\n * including English (`en`, `en-US`, `en-GB`, etc.), Spanish (`es`), and French (`fr`).\n *\n * @return {boolean} Whether locale is RTL.\n */\nexport const isRTL = i18n.isRTL.bind( i18n );\n\n/**\n * Check if there is a translation for a given string (in singular form).\n *\n * @param {string} single  Singular form of the string to look up.\n * @param {string} context Context information for the translators.\n * @param {string} domain  Domain to retrieve the translated text.\n *\n * @return {boolean} Whether the translation exists or not.\n */\nexport const hasTranslation = i18n.hasTranslation.bind( i18n );\n", "/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Build the explanatory text to be placed before the aria live regions.\n *\n * This text is initially hidden from assistive technologies by using a `hidden`\n * HTML attribute which is then removed once a message fills the aria-live regions.\n *\n * @return {HTMLParagraphElement} The explanatory text HTML element.\n */\nexport default function addIntroText() {\n\tconst introText = document.createElement( 'p' );\n\n\tintroText.id = 'a11y-speak-intro-text';\n\tintroText.className = 'a11y-speak-intro-text';\n\tintroText.textContent = __( 'Notifications' );\n\n\tintroText.setAttribute(\n\t\t'style',\n\t\t'position:absolute;' +\n\t\t\t'margin:-1px;' +\n\t\t\t'padding:0;' +\n\t\t\t'height:1px;' +\n\t\t\t'width:1px;' +\n\t\t\t'overflow:hidden;' +\n\t\t\t'clip-path:inset(50%);' +\n\t\t\t'border:0;' +\n\t\t\t'word-wrap:normal !important;'\n\t);\n\tintroText.setAttribute( 'hidden', '' );\n\n\tconst { body } = document;\n\tif ( body ) {\n\t\tbody.appendChild( introText );\n\t}\n\n\treturn introText;\n}\n", "/**\n * WordPress dependencies\n */\nimport domReady from '@wordpress/dom-ready';\n\n/**\n * Internal dependencies\n */\nimport addContainer from './script/add-container';\nimport addIntroText from './script/add-intro-text';\n\nexport { speak } from './shared/index';\n\n/**\n * Create the live regions.\n */\nexport function setup() {\n\tconst introText = document.getElementById( 'a11y-speak-intro-text' );\n\tconst containerAssertive = document.getElementById(\n\t\t'a11y-speak-assertive'\n\t);\n\tconst containerPolite = document.getElementById( 'a11y-speak-polite' );\n\n\tif ( introText === null ) {\n\t\taddIntroText();\n\t}\n\n\tif ( containerAssertive === null ) {\n\t\taddContainer( 'assertive' );\n\t}\n\n\tif ( containerPolite === null ) {\n\t\taddContainer( 'polite' );\n\t}\n}\n\n/**\n * Run setup on domReady.\n */\ndomReady( setup );\n", "/**\n * Returns true if two ranges are equal, or false otherwise. Ranges are\n * considered equal if their start and end occur in the same container and\n * offset.\n *\n * @param {Range|null} a First range object to test.\n * @param {Range|null} b First range object to test.\n *\n * @return {boolean} Whether the two ranges are equal.\n */\nexport function isRangeEqual( a, b ) {\n\treturn (\n\t\ta === b ||\n\t\t( a &&\n\t\t\tb &&\n\t\t\ta.startContainer === b.startContainer &&\n\t\t\ta.startOffset === b.startOffset &&\n\t\t\ta.endContainer === b.endContainer &&\n\t\t\ta.endOffset === b.endOffset )\n\t);\n}\n", "/**\n * Internal dependencies\n */\n\nimport { toTree } from './to-tree';\nimport { createElement } from './create-element';\nimport { isRangeEqual } from './is-range-equal';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Creates a path as an array of indices from the given root node to the given\n * node.\n *\n * @param {Node}        node     Node to find the path of.\n * @param {HTMLElement} rootNode Root node to find the path from.\n * @param {Array}       path     Initial path to build on.\n *\n * @return {Array} The path from the root node to the node.\n */\nfunction createPathToNode( node, rootNode, path ) {\n\tconst parentNode = node.parentNode;\n\tlet i = 0;\n\n\twhile ( ( node = node.previousSibling ) ) {\n\t\ti++;\n\t}\n\n\tpath = [ i, ...path ];\n\n\tif ( parentNode !== rootNode ) {\n\t\tpath = createPathToNode( parentNode, rootNode, path );\n\t}\n\n\treturn path;\n}\n\n/**\n * Gets a node given a path (array of indices) from the given node.\n *\n * @param {HTMLElement} node Root node to find the wanted node in.\n * @param {Array}       path Path (indices) to the wanted node.\n *\n * @return {Object} Object with the found node and the remaining offset (if any).\n */\nfunction getNodeByPath( node, path ) {\n\tpath = [ ...path ];\n\n\twhile ( node && path.length > 1 ) {\n\t\tnode = node.childNodes[ path.shift() ];\n\t}\n\n\treturn {\n\t\tnode,\n\t\toffset: path[ 0 ],\n\t};\n}\n\nfunction append( element, child ) {\n\tif ( child.html !== undefined ) {\n\t\treturn ( element.innerHTML += child.html );\n\t}\n\n\tif ( typeof child === 'string' ) {\n\t\tchild = element.ownerDocument.createTextNode( child );\n\t}\n\n\tconst { type, attributes } = child;\n\n\tif ( type ) {\n\t\tif ( type === '#comment' ) {\n\t\t\tchild = element.ownerDocument.createComment(\n\t\t\t\tattributes[ 'data-rich-text-comment' ]\n\t\t\t);\n\t\t} else {\n\t\t\tchild = element.ownerDocument.createElement( type );\n\n\t\t\tfor ( const key in attributes ) {\n\t\t\t\tchild.setAttribute( key, attributes[ key ] );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn element.appendChild( child );\n}\n\nfunction appendText( node, text ) {\n\tnode.appendData( text );\n}\n\nfunction getLastChild( { lastChild } ) {\n\treturn lastChild;\n}\n\nfunction getParent( { parentNode } ) {\n\treturn parentNode;\n}\n\nfunction isText( node ) {\n\treturn node.nodeType === node.TEXT_NODE;\n}\n\nfunction getText( { nodeValue } ) {\n\treturn nodeValue;\n}\n\nfunction remove( node ) {\n\treturn node.parentNode.removeChild( node );\n}\n\nexport function toDom( {\n\tvalue,\n\tprepareEditableTree,\n\tisEditableTree = true,\n\tplaceholder,\n\tdoc = document,\n} ) {\n\tlet startPath = [];\n\tlet endPath = [];\n\n\tif ( prepareEditableTree ) {\n\t\tvalue = {\n\t\t\t...value,\n\t\t\tformats: prepareEditableTree( value ),\n\t\t};\n\t}\n\n\t/**\n\t * Returns a new instance of a DOM tree upon which RichText operations can be\n\t * applied.\n\t *\n\t * Note: The current implementation will return a shared reference, reset on\n\t * each call to `createEmpty`. Therefore, you should not hold a reference to\n\t * the value to operate upon asynchronously, as it may have unexpected results.\n\t *\n\t * @return {Object} RichText tree.\n\t */\n\tconst createEmpty = () => createElement( doc, '' );\n\n\tconst tree = toTree( {\n\t\tvalue,\n\t\tcreateEmpty,\n\t\tappend,\n\t\tgetLastChild,\n\t\tgetParent,\n\t\tisText,\n\t\tgetText,\n\t\tremove,\n\t\tappendText,\n\t\tonStartIndex( body, pointer ) {\n\t\t\tstartPath = createPathToNode( pointer, body, [\n\t\t\t\tpointer.nodeValue.length,\n\t\t\t] );\n\t\t},\n\t\tonEndIndex( body, pointer ) {\n\t\t\tendPath = createPathToNode( pointer, body, [\n\t\t\t\tpointer.nodeValue.length,\n\t\t\t] );\n\t\t},\n\t\tisEditableTree,\n\t\tplaceholder,\n\t} );\n\n\treturn {\n\t\tbody: tree,\n\t\tselection: { startPath, endPath },\n\t};\n}\n\n/**\n * Create an `Element` tree from a Rich Text value and applies the difference to\n * the `Element` tree contained by `current`.\n *\n * @param {Object}        $1                       Named arguments.\n * @param {RichTextValue} $1.value                 Value to apply.\n * @param {HTMLElement}   $1.current               The live root node to apply the element tree to.\n * @param {Function}      [$1.prepareEditableTree] Function to filter editorable formats.\n * @param {boolean}       [$1.__unstableDomOnly]   Only apply elements, no selection.\n * @param {string}        [$1.placeholder]         Placeholder text.\n */\nexport function apply( {\n\tvalue,\n\tcurrent,\n\tprepareEditableTree,\n\t__unstableDomOnly,\n\tplaceholder,\n} ) {\n\t// Construct a new element tree in memory.\n\tconst { body, selection } = toDom( {\n\t\tvalue,\n\t\tprepareEditableTree,\n\t\tplaceholder,\n\t\tdoc: current.ownerDocument,\n\t} );\n\n\tapplyValue( body, current );\n\n\tif ( value.start !== undefined && ! __unstableDomOnly ) {\n\t\tapplySelection( selection, current );\n\t}\n}\n\nexport function applyValue( future, current ) {\n\tlet i = 0;\n\tlet futureChild;\n\n\twhile ( ( futureChild = future.firstChild ) ) {\n\t\tconst currentChild = current.childNodes[ i ];\n\n\t\tif ( ! currentChild ) {\n\t\t\tcurrent.appendChild( futureChild );\n\t\t} else if ( ! currentChild.isEqualNode( futureChild ) ) {\n\t\t\tif (\n\t\t\t\tcurrentChild.nodeName !== futureChild.nodeName ||\n\t\t\t\t( currentChild.nodeType === currentChild.TEXT_NODE &&\n\t\t\t\t\tcurrentChild.data !== futureChild.data )\n\t\t\t) {\n\t\t\t\tcurrent.replaceChild( futureChild, currentChild );\n\t\t\t} else {\n\t\t\t\tconst currentAttributes = currentChild.attributes;\n\t\t\t\tconst futureAttributes = futureChild.attributes;\n\n\t\t\t\tif ( currentAttributes ) {\n\t\t\t\t\tlet ii = currentAttributes.length;\n\n\t\t\t\t\t// Reverse loop because `removeAttribute` on `currentChild`\n\t\t\t\t\t// changes `currentAttributes`.\n\t\t\t\t\twhile ( ii-- ) {\n\t\t\t\t\t\tconst { name } = currentAttributes[ ii ];\n\n\t\t\t\t\t\tif ( ! futureChild.getAttribute( name ) ) {\n\t\t\t\t\t\t\tcurrentChild.removeAttribute( name );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( futureAttributes ) {\n\t\t\t\t\tfor ( let ii = 0; ii < futureAttributes.length; ii++ ) {\n\t\t\t\t\t\tconst { name, value } = futureAttributes[ ii ];\n\n\t\t\t\t\t\tif ( currentChild.getAttribute( name ) !== value ) {\n\t\t\t\t\t\t\tcurrentChild.setAttribute( name, value );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tapplyValue( futureChild, currentChild );\n\t\t\t\tfuture.removeChild( futureChild );\n\t\t\t}\n\t\t} else {\n\t\t\tfuture.removeChild( futureChild );\n\t\t}\n\n\t\ti++;\n\t}\n\n\twhile ( current.childNodes[ i ] ) {\n\t\tcurrent.removeChild( current.childNodes[ i ] );\n\t}\n}\n\nexport function applySelection( { startPath, endPath }, current ) {\n\tconst { node: startContainer, offset: startOffset } = getNodeByPath(\n\t\tcurrent,\n\t\tstartPath\n\t);\n\tconst { node: endContainer, offset: endOffset } = getNodeByPath(\n\t\tcurrent,\n\t\tendPath\n\t);\n\tconst { ownerDocument } = current;\n\tconst { defaultView } = ownerDocument;\n\tconst selection = defaultView.getSelection();\n\tconst range = ownerDocument.createRange();\n\n\trange.setStart( startContainer, startOffset );\n\trange.setEnd( endContainer, endOffset );\n\n\tconst { activeElement } = ownerDocument;\n\n\tif ( selection.rangeCount > 0 ) {\n\t\t// If the to be added range and the live range are the same, there's no\n\t\t// need to remove the live range and add the equivalent range.\n\t\tif ( isRangeEqual( range, selection.getRangeAt( 0 ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tselection.removeAllRanges();\n\t}\n\n\tselection.addRange( range );\n\n\t// This function is not intended to cause a shift in focus. Since the above\n\t// selection manipulations may shift focus, ensure that focus is restored to\n\t// its previous state.\n\tif ( activeElement !== ownerDocument.activeElement ) {\n\t\t// The `instanceof` checks protect against edge cases where the focused\n\t\t// element is not of the interface HTMLElement (does not have a `focus`\n\t\t// or `blur` property).\n\t\t//\n\t\t// See: https://github.com/Microsoft/TypeScript/issues/5901#issuecomment-431649653\n\t\tif ( activeElement instanceof defaultView.HTMLElement ) {\n\t\t\tactiveElement.focus();\n\t\t}\n\t}\n}\n", "/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\n\n/**\n * In HTML, leading and trailing spaces are not visible, and multiple spaces\n * elsewhere are visually reduced to one space. This rule prevents spaces from\n * collapsing so all space is visible in the editor and can be removed. It also\n * prevents some browsers from inserting non-breaking spaces at the end of a\n * line to prevent the space from visually disappearing. Sometimes these non\n * breaking spaces can linger in the editor causing unwanted non breaking spaces\n * in between words. If also prevent Firefox from inserting a trailing `br` node\n * to visualise any trailing space, causing the element to be saved.\n *\n * > Authors are encouraged to set the 'white-space' property on editing hosts\n * > and on markup that was originally created through these editing mechanisms\n * > to the value 'pre-wrap'. Default HTML whitespace handling is not well\n * > suited to WYSIWYG editing, and line wrapping will not work correctly in\n * > some corner cases if 'white-space' is left at its default value.\n *\n * https://html.spec.whatwg.org/multipage/interaction.html#best-practices-for-in-page-editors\n *\n * @type {string}\n */\nconst whiteSpace = 'pre-wrap';\n\n/**\n * A minimum width of 1px will prevent the rich text container from collapsing\n * to 0 width and hiding the caret. This is useful for inline containers.\n */\nconst minWidth = '1px';\n\nexport function useDefaultStyle() {\n\treturn useCallback( ( element ) => {\n\t\tif ( ! element ) {\n\t\t\treturn;\n\t\t}\n\t\telement.style.whiteSpace = whiteSpace;\n\t\telement.style.minWidth = minWidth;\n\t}, [] );\n}\n", "/**\n * External dependencies\n */\nimport { colord } from 'colord';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\n\n/*\n * Calculates and renders the format boundary style when the active formats\n * change.\n */\nexport function useBoundaryStyle( { record } ) {\n\tconst ref = useRef();\n\tconst { activeFormats = [], replacements, start } = record.current;\n\tconst activeReplacement = replacements[ start ];\n\tuseEffect( () => {\n\t\t// There's no need to recalculate the boundary styles if no formats are\n\t\t// active, because no boundary styles will be visible.\n\t\tif (\n\t\t\t( ! activeFormats || ! activeFormats.length ) &&\n\t\t\t! activeReplacement\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst boundarySelector = '*[data-rich-text-format-boundary]';\n\t\tconst element = ref.current.querySelector( boundarySelector );\n\n\t\tif ( ! element ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { ownerDocument } = element;\n\t\tconst { defaultView } = ownerDocument;\n\t\tconst computedStyle = defaultView.getComputedStyle( element );\n\t\tconst newColor = colord( computedStyle.color )\n\t\t\t.alpha( 0.2 )\n\t\t\t.toRgbString();\n\t\tconst selector = `.rich-text:focus ${ boundarySelector }`;\n\t\tconst rule = `background-color: ${ newColor }`;\n\t\tconst style = `${ selector } {${ rule }}`;\n\t\tconst globalStyleId = 'rich-text-boundary-style';\n\n\t\tlet globalStyle = ownerDocument.getElementById( globalStyleId );\n\n\t\tif ( ! globalStyle ) {\n\t\t\tglobalStyle = ownerDocument.createElement( 'style' );\n\t\t\tglobalStyle.id = globalStyleId;\n\t\t\townerDocument.head.appendChild( globalStyle );\n\t\t}\n\n\t\tif ( globalStyle.innerHTML !== style ) {\n\t\t\tglobalStyle.innerHTML = style;\n\t\t}\n\t}, [ activeFormats, activeReplacement ] );\n\treturn ref;\n}\n", "/**\n * Internal dependencies\n */\nimport { toHTMLString } from '../../to-html-string';\nimport { isCollapsed } from '../../is-collapsed';\nimport { slice } from '../../slice';\nimport { getTextContent } from '../../get-text-content';\n\nexport default ( props ) => ( element ) => {\n\tfunction onCopy( event ) {\n\t\tconst { record } = props.current;\n\t\tconst { ownerDocument } = element;\n\t\tif (\n\t\t\tisCollapsed( record.current ) ||\n\t\t\t! element.contains( ownerDocument.activeElement )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedRecord = slice( record.current );\n\t\tconst plainText = getTextContent( selectedRecord );\n\t\tconst html = toHTMLString( { value: selectedRecord } );\n\t\tevent.clipboardData.setData( 'text/plain', plainText );\n\t\tevent.clipboardData.setData( 'text/html', html );\n\t\tevent.clipboardData.setData( 'rich-text', 'true' );\n\t\tevent.preventDefault();\n\n\t\tif ( event.type === 'cut' ) {\n\t\t\townerDocument.execCommand( 'delete' );\n\t\t}\n\t}\n\n\tconst { defaultView } = element.ownerDocument;\n\n\tdefaultView.addEventListener( 'copy', onCopy );\n\tdefaultView.addEventListener( 'cut', onCopy );\n\treturn () => {\n\t\tdefaultView.removeEventListener( 'copy', onCopy );\n\t\tdefaultView.removeEventListener( 'cut', onCopy );\n\t};\n};\n", "export default () => ( element ) => {\n\tfunction onClick( event ) {\n\t\tconst { target } = event;\n\n\t\t// If the child element has no text content, it must be an object.\n\t\tif (\n\t\t\ttarget === element ||\n\t\t\t( target.textContent && target.isContentEditable )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { ownerDocument } = target;\n\t\tconst { defaultView } = ownerDocument;\n\t\tconst selection = defaultView.getSelection();\n\n\t\t// If it's already selected, do nothing and let default behavior happen.\n\t\t// This means it's \"click-through\".\n\t\tif ( selection.containsNode( target ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst range = ownerDocument.createRange();\n\t\t// If the target is within a non editable element, select the non\n\t\t// editable element.\n\t\tconst nodeToSelect = target.isContentEditable\n\t\t\t? target\n\t\t\t: target.closest( '[contenteditable]' );\n\n\t\trange.selectNode( nodeToSelect );\n\t\tselection.removeAllRanges();\n\t\tselection.addRange( range );\n\n\t\tevent.preventDefault();\n\t}\n\n\tfunction onFocusIn( event ) {\n\t\t// When there is incoming focus from a link, select the object.\n\t\tif (\n\t\t\tevent.relatedTarget &&\n\t\t\t! element.contains( event.relatedTarget ) &&\n\t\t\tevent.relatedTarget.tagName === 'A'\n\t\t) {\n\t\t\tonClick( event );\n\t\t}\n\t}\n\n\telement.addEventListener( 'click', onClick );\n\telement.addEventListener( 'focusin', onFocusIn );\n\treturn () => {\n\t\telement.removeEventListener( 'click', onClick );\n\t\telement.removeEventListener( 'focusin', onFocusIn );\n\t};\n};\n", "/**\n * External dependencies\n */\nimport type { TanninLocaleDomain } from 'tannin';\nimport Tannin from 'tannin';\n/**\n * Internal dependencies\n */\nimport type {\n\tgetFilterDomain,\n\tI18n,\n\tLocaleData,\n\tSubscribeCallback,\n\tTranslatableText,\n\tUnsubscribeCallback,\n} from './types';\n/**\n * WordPress dependencies\n */\nimport type { Hooks } from '@wordpress/hooks';\n/**\n * Default locale data to use for Tannin domain when not otherwise provided.\n * Assumes an English plural forms expression.\n */\nconst DEFAULT_LOCALE_DATA: LocaleData = {\n\t'': {\n\t\tplural_forms( n: number ) {\n\t\t\treturn n === 1 ? 0 : 1;\n\t\t},\n\t},\n};\n\n/*\n * Regular expression that matches i18n hooks like `i18n.gettext`, `i18n.ngettext`,\n * `i18n.gettext_domain` or `i18n.ngettext_with_context` or `i18n.has_translation`.\n */\nconst I18N_HOOK_REGEXP = /^i18n\\.(n?gettext|has_translation)(_|$)/;\n\n/**\n * Create an i18n instance\n *\n * @param [initialData]   Locale data configuration.\n * @param [initialDomain] Domain for which configuration applies.\n * @param [hooks]         Hooks implementation.\n *\n * @return I18n instance.\n */\nexport const createI18n = < TextDomain extends string >(\n\tinitialData?: LocaleData< TextDomain >,\n\tinitialDomain?: TextDomain,\n\thooks?: Hooks\n): I18n< TextDomain > => {\n\t/**\n\t * The underlying instance of Tannin to which exported functions interface.\n\t */\n\tconst tannin = new Tannin( {} );\n\n\tconst listeners = new Set< () => void >();\n\n\tconst notifyListeners = () => {\n\t\tlisteners.forEach( ( listener ) => listener() );\n\t};\n\n\t/**\n\t * Subscribe to changes of locale data.\n\t *\n\t * @param callback Subscription callback.\n\t * @return Unsubscribe callback.\n\t */\n\tconst subscribe = ( callback: SubscribeCallback ): UnsubscribeCallback => {\n\t\tlisteners.add( callback );\n\t\treturn () => listeners.delete( callback );\n\t};\n\n\tconst getLocaleData: I18n< TextDomain >[ 'getLocaleData' ] = (\n\t\tdomain = 'default' as TextDomain\n\t) => tannin.data[ domain ] as LocaleData< TextDomain >;\n\n\t/**\n\t * @param [data]\n\t * @param [domain]\n\t */\n\tconst doSetLocaleData = (\n\t\tdata?: LocaleData,\n\t\tdomain: TextDomain = 'default' as TextDomain\n\t) => {\n\t\ttannin.data[ domain ] = {\n\t\t\t...tannin.data[ domain ],\n\t\t\t...data,\n\t\t} as TanninLocaleDomain;\n\n\t\t// Populate default domain configuration (supported locale date which omits\n\t\t// a plural forms expression).\n\t\ttannin.data[ domain ][ '' ] = {\n\t\t\t...DEFAULT_LOCALE_DATA[ '' ],\n\t\t\t...tannin.data[ domain ]?.[ '' ],\n\t\t};\n\n\t\t// Clean up cached plural forms functions cache as it might be updated.\n\t\tdelete tannin.pluralForms[ domain ];\n\t};\n\n\tconst setLocaleData: I18n< TextDomain >[ 'setLocaleData' ] = (\n\t\tdata,\n\t\tdomain\n\t) => {\n\t\tdoSetLocaleData( data, domain );\n\t\tnotifyListeners();\n\t};\n\n\tconst addLocaleData: I18n< TextDomain >[ 'addLocaleData' ] = (\n\t\tdata,\n\t\tdomain = 'default' as TextDomain\n\t) => {\n\t\ttannin.data[ domain ] = {\n\t\t\t...tannin.data[ domain ],\n\t\t\t...data,\n\t\t\t// Populate default domain configuration (supported locale date which omits\n\t\t\t// a plural forms expression).\n\t\t\t'': {\n\t\t\t\t...DEFAULT_LOCALE_DATA[ '' ],\n\t\t\t\t...tannin.data[ domain ]?.[ '' ],\n\t\t\t\t...data?.[ '' ],\n\t\t\t},\n\t\t} as TanninLocaleDomain;\n\n\t\t// Clean up cached plural forms functions cache as it might be updated.\n\t\tdelete tannin.pluralForms[ domain ];\n\n\t\tnotifyListeners();\n\t};\n\n\tconst resetLocaleData: I18n< TextDomain >[ 'resetLocaleData' ] = (\n\t\tdata,\n\t\tdomain\n\t) => {\n\t\t// Reset all current Tannin locale data.\n\t\ttannin.data = {};\n\n\t\t// Reset cached plural forms functions cache.\n\t\ttannin.pluralForms = {};\n\n\t\tsetLocaleData( data, domain );\n\t};\n\n\t/**\n\t * Wrapper for Tannin's `dcnpgettext`. Populates default locale data if not\n\t * otherwise previously assigned.\n\t *\n\t * @param domain   Domain to retrieve the translated text.\n\t * @param context  Context information for the translators.\n\t * @param single   Text to translate if non-plural. Used as\n\t *                 fallback return value on a caught error.\n\t * @param [plural] The text to be used if the number is\n\t *                 plural.\n\t * @param [number] The number to compare against to use\n\t *                 either the singular or plural form.\n\t *\n\t * @return The translated string.\n\t */\n\tconst dcnpgettext = (\n\t\tdomain = 'default' as TextDomain,\n\t\tcontext: string | void,\n\t\tsingle: string,\n\t\tplural?: string,\n\t\tnumber?: number\n\t): string => {\n\t\tif ( ! tannin.data[ domain ] ) {\n\t\t\t// Use `doSetLocaleData` to set silently, without notifying listeners.\n\t\t\tdoSetLocaleData( undefined, domain );\n\t\t}\n\n\t\treturn tannin.dcnpgettext( domain, context, single, plural, number );\n\t};\n\n\tconst getFilterDomain: getFilterDomain = ( domain ) => domain || 'default';\n\n\tconst __: I18n< TextDomain >[ '__' ] = ( text, domain ) => {\n\t\tlet translation = dcnpgettext( domain, undefined, text );\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText< typeof text >;\n\t\t}\n\n\t\t/**\n\t\t * Filters text with its translation.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param text        Text to translate.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.gettext',\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.gettext_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\t};\n\n\tconst _x: I18n< TextDomain >[ '_x' ] = ( text, context, domain ) => {\n\t\tlet translation = dcnpgettext( domain, context, text );\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText< typeof text >;\n\t\t}\n\n\t\t/**\n\t\t * Filters text with its translation based on context information.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param text        Text to translate.\n\t\t * @param context     Context information for the translators.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.gettext_with_context',\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.gettext_with_context_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\ttext,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof text >;\n\t};\n\n\tconst _n: I18n< TextDomain >[ '_n' ] = (\n\t\tsingle,\n\t\tplural,\n\t\tnumber,\n\t\tdomain\n\t) => {\n\t\tlet translation = dcnpgettext(\n\t\t\tdomain,\n\t\t\tundefined,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber\n\t\t);\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText<\n\t\t\t\ttypeof single | typeof plural\n\t\t\t>;\n\t\t}\n\n\t\t/**\n\t\t * Filters the singular or plural form of a string.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param single      The text to be used if the number is singular.\n\t\t * @param plural      The text to be used if the number is plural.\n\t\t * @param number      The number to compare against to use either the singular or plural form.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.ngettext',\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.ngettext_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\t};\n\n\tconst _nx: I18n< TextDomain >[ '_nx' ] = (\n\t\tsingle,\n\t\tplural,\n\t\tnumber,\n\t\tcontext,\n\t\tdomain\n\t) => {\n\t\tlet translation = dcnpgettext(\n\t\t\tdomain,\n\t\t\tcontext,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber\n\t\t);\n\t\tif ( ! hooks ) {\n\t\t\treturn translation as TranslatableText<\n\t\t\t\ttypeof single | typeof plural\n\t\t\t>;\n\t\t}\n\n\t\t/**\n\t\t * Filters the singular or plural form of a string with gettext context.\n\t\t *\n\t\t * @param translation Translated text.\n\t\t * @param single      The text to be used if the number is singular.\n\t\t * @param plural      The text to be used if the number is plural.\n\t\t * @param number      The number to compare against to use either the singular or plural form.\n\t\t * @param context     Context information for the translators.\n\t\t * @param domain      Text domain. Unique identifier for retrieving translated strings.\n\t\t */\n\t\ttranslation = hooks.applyFilters(\n\t\t\t'i18n.ngettext_with_context',\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\n\t\treturn hooks.applyFilters(\n\t\t\t'i18n.ngettext_with_context_' + getFilterDomain( domain ),\n\t\t\ttranslation,\n\t\t\tsingle,\n\t\t\tplural,\n\t\t\tnumber,\n\t\t\tcontext,\n\t\t\tdomain\n\t\t) as TranslatableText< typeof single | typeof plural >;\n\t};\n\n\tconst isRTL: I18n< TextDomain >[ 'isRTL' ] = () => {\n\t\treturn 'rtl' === _x( 'ltr', 'text direction' );\n\t};\n\n\tconst hasTranslation: I18n< TextDomain >[ 'hasTranslation' ] = (\n\t\tsingle,\n\t\tcontext,\n\t\tdomain\n\t) => {\n\t\tconst key = context ? context + '\\u0004' + single : single;\n\t\tlet result = !! tannin.data?.[ domain ?? 'default' ]?.[ key ];\n\t\tif ( hooks ) {\n\t\t\t/**\n\t\t\t * Filters the presence of a translation in the locale data.\n\t\t\t *\n\t\t\t * @param hasTranslation Whether the translation is present or not..\n\t\t\t * @param single         The singular form of the translated text (used as key in locale data)\n\t\t\t * @param context        Context information for the translators.\n\t\t\t * @param domain         Text domain. Unique identifier for retrieving translated strings.\n\t\t\t */\n\t\t\tresult = hooks.applyFilters(\n\t\t\t\t'i18n.has_translation',\n\t\t\t\tresult,\n\t\t\t\tsingle,\n\t\t\t\tcontext,\n\t\t\t\tdomain\n\t\t\t) as boolean;\n\n\t\t\tresult = hooks.applyFilters(\n\t\t\t\t'i18n.has_translation_' + getFilterDomain( domain ),\n\t\t\t\tresult,\n\t\t\t\tsingle,\n\t\t\t\tcontext,\n\t\t\t\tdomain\n\t\t\t) as boolean;\n\t\t}\n\t\treturn result;\n\t};\n\n\tif ( initialData ) {\n\t\tsetLocaleData( initialData, initialDomain );\n\t}\n\n\tif ( hooks ) {\n\t\t/**\n\t\t * @param hookName\n\t\t */\n\t\tconst onHookAddedOrRemoved = ( hookName: string ) => {\n\t\t\tif ( I18N_HOOK_REGEXP.test( hookName ) ) {\n\t\t\t\tnotifyListeners();\n\t\t\t}\n\t\t};\n\n\t\thooks.addAction( 'hookAdded', 'core/i18n', onHookAddedOrRemoved );\n\t\thooks.addAction( 'hookRemoved', 'core/i18n', onHookAddedOrRemoved );\n\t}\n\n\treturn {\n\t\tgetLocaleData,\n\t\tsetLocaleData,\n\t\taddLocaleData,\n\t\tresetLocaleData,\n\t\tsubscribe,\n\t\t__,\n\t\t_x,\n\t\t_n,\n\t\t_nx,\n\t\tisRTL,\n\t\thasTranslation,\n\t};\n};\n", "/**\n * Internal dependencies\n */\nimport { createI18n } from './create-i18n';\n\n/**\n * WordPress dependencies\n */\nimport { defaultHooks } from '@wordpress/hooks';\nimport {\n\tLocaleData,\n\tSubscribeCallback,\n\tTranslatableText,\n\tUnsubscribeCallback,\n} from './types';\n\nconst i18n = createI18n( undefined, undefined, defaultHooks );\n\n/**\n * Default, singleton instance of `I18n`.\n */\nexport default i18n;\n\n/*\n * Comments in this file are duplicated from ./i18n due to\n * https://github.com/WordPress/gutenberg/pull/20318#issuecomment-590837722\n */\n\n/**\n * Returns locale data by domain in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param { string | undefined } [domain] Domain for which to get the data.\n * @return { LocaleData } Locale data.\n */\nexport const getLocaleData = i18n.getLocaleData.bind( i18n );\n\n/**\n * Merges locale data into the Tannin instance by domain. Accepts data in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData }        [data]   Locale data configuration.\n * @param {string | undefined} [domain] Domain for which configuration applies.\n */\nexport const setLocaleData = i18n.setLocaleData.bind( i18n );\n\n/**\n * Resets all current Tannin instance locale data and sets the specified\n * locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData}         [data]   Locale data configuration.\n * @param {string | undefined} [domain] Domain for which configuration applies.\n */\nexport const resetLocaleData = i18n.resetLocaleData.bind( i18n );\n\n/**\n * Subscribes to changes of locale data\n *\n * @param {SubscribeCallback} callback Subscription callback\n * @return {UnsubscribeCallback} Unsubscribe callback\n */\nexport const subscribe = i18n.subscribe.bind( i18n );\n\n/**\n * Retrieve the translation of text.\n *\n * @see https://developer.wordpress.org/reference/functions/__/\n *\n * @template {string} Text\n *\n * @param {Text}               text   Text to translate.\n * @param {string | undefined} domain Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Text>} Translated text.\n */\nexport const __ = i18n.__.bind( i18n );\n\n/**\n * Retrieve translated string with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_x/\n *\n * @template {string} Text\n *\n * @param {Text}               text    Text to translate.\n * @param {string}             context Context information for the translators.\n * @param {string | undefined} domain  Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Text>} Translated context string without pipe.\n */\nexport const _x = i18n._x.bind( i18n );\n\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number.\n *\n * @see https://developer.wordpress.org/reference/functions/_n/\n *\n * @template {string} Single\n * @template {string} Plural\n *\n * @param {Single}             single The text to be used if the number is singular.\n * @param {Plural}             plural The text to be used if the number is plural.\n * @param {number}             number The number to compare against to use either the\n *                                    singular or plural form.\n * @param {string | undefined} domain Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Single | Plural>} The translated singular or plural form.\n */\nexport const _n = i18n._n.bind( i18n );\n\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number, with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_nx/\n *\n * @template {string} Single\n * @template {string} Plural\n * @param {Single}             single   The text to be used if the number is singular.\n *\n * @param {Single}             single   The text to be used if the number is singular.\n * @param {Plural}             plural   The text to be used if the number is plural.\n * @param {number}             number   The number to compare against to use either the\n *                                      singular or plural form.\n * @param {string}             context  Context information for the translators.\n * @param {string | undefined} [domain] Domain to retrieve the translated text.\n *\n * @return {TranslatableText<Single | Plural>} The translated singular or plural form.\n */\nexport const _nx = i18n._nx.bind( i18n );\n\n/**\n * Check if current locale is RTL.\n *\n * **RTL (Right To Left)** is a locale property indicating that text is written from right to left.\n * For example, the `he` locale (for Hebrew) specifies right-to-left. Arabic (ar) is another common\n * language written RTL. The opposite of RTL, LTR (Left To Right) is used in other languages,\n * including English (`en`, `en-US`, `en-GB`, etc.), Spanish (`es`), and French (`fr`).\n *\n * @return {boolean} Whether locale is RTL.\n */\nexport const isRTL = i18n.isRTL.bind( i18n );\n\n/**\n * Check if there is a translation for a given string (in singular form).\n *\n * @param {string} single  Singular form of the string to look up.\n * @param {string} context Context information for the translators.\n * @param {string} domain  Domain to retrieve the translated text.\n *\n * @return {boolean} Whether the translation exists or not.\n */\nexport const hasTranslation = i18n.hasTranslation.bind( i18n );\n", "/**\n * Return true if platform is MacOS.\n *\n * @param _window window object by default; used for DI testing.\n *\n * @return True if MacOS; false otherwise.\n */\nexport function isAppleOS( _window?: Window ): boolean {\n\tif ( ! _window ) {\n\t\tif ( typeof window === 'undefined' ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t_window = window;\n\t}\n\n\tconst { platform } = _window.navigator;\n\n\treturn (\n\t\tplatform.indexOf( 'Mac' ) !== -1 ||\n\t\t[ 'iPad', 'iPhone' ].includes( platform )\n\t);\n}\n", "/**\n * Note: The order of the modifier keys in many of the [foo]Shortcut()\n * functions in this file are intentional and should not be changed. They're\n * designed to fit with the standard menu keyboard shortcuts shown in the\n * user's platform.\n *\n * For example, on MacOS menu shortcuts will place Shift before Command, but\n * on Windows Control will usually come first. So don't provide your own\n * shortcut combos directly to keyboardShortcut().\n */\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { isAppleOS } from './platform';\n\n/**\n * External dependencies\n */\nimport type { KeyboardEvent as ReactKeyboardEvent } from 'react';\n\nexport type WPModifierPart =\n\t| typeof ALT\n\t| typeof CTRL\n\t| typeof COMMAND\n\t| typeof SHIFT;\n\nexport type WPKeycodeModifier =\n\t| 'primary'\n\t| 'primaryShift'\n\t| 'primaryAlt'\n\t| 'secondary'\n\t| 'access'\n\t| 'ctrl'\n\t| 'alt'\n\t| 'ctrlShift'\n\t| 'shift'\n\t| 'shiftAlt'\n\t| 'undefined';\n\n/**\n * An object of handler functions for each of the possible modifier\n * combinations. A handler will return a value for a given key.\n */\nexport type WPModifierHandler< T > = Record< WPKeycodeModifier, T >;\n\nexport type WPKeyHandler< T > = (\n\tcharacter: string,\n\tisApple?: () => boolean\n) => T;\n\nexport type WPEventKeyHandler = (\n\tevent: ReactKeyboardEvent< HTMLElement > | KeyboardEvent,\n\tcharacter: string,\n\tisApple?: () => boolean\n) => boolean;\n\nexport type WPModifier = ( isApple: () => boolean ) => WPModifierPart[];\n\n/**\n * Keycode for BACKSPACE key.\n */\nexport const BACKSPACE = 8;\n\n/**\n * Keycode for TAB key.\n */\nexport const TAB = 9;\n\n/**\n * Keycode for ENTER key.\n */\nexport const ENTER = 13;\n\n/**\n * Keycode for ESCAPE key.\n */\nexport const ESCAPE = 27;\n\n/**\n * Keycode for SPACE key.\n */\nexport const SPACE = 32;\n\n/**\n * Keycode for PAGEUP key.\n */\nexport const PAGEUP = 33;\n\n/**\n * Keycode for PAGEDOWN key.\n */\nexport const PAGEDOWN = 34;\n\n/**\n * Keycode for END key.\n */\nexport const END = 35;\n\n/**\n * Keycode for HOME key.\n */\nexport const HOME = 36;\n\n/**\n * Keycode for LEFT key.\n */\nexport const LEFT = 37;\n\n/**\n * Keycode for UP key.\n */\nexport const UP = 38;\n\n/**\n * Keycode for RIGHT key.\n */\nexport const RIGHT = 39;\n\n/**\n * Keycode for DOWN key.\n */\nexport const DOWN = 40;\n\n/**\n * Keycode for DELETE key.\n */\nexport const DELETE = 46;\n\n/**\n * Keycode for F10 key.\n */\nexport const F10 = 121;\n\n/**\n * Keycode for ALT key.\n */\nexport const ALT = 'alt';\n\n/**\n * Keycode for CTRL key.\n */\nexport const CTRL = 'ctrl';\n\n/**\n * Keycode for COMMAND/META key.\n */\nexport const COMMAND = 'meta';\n\n/**\n * Keycode for SHIFT key.\n */\nexport const SHIFT = 'shift';\n\n/**\n * Keycode for ZERO key.\n */\nexport const ZERO = 48;\n\nexport { isAppleOS };\n\n/**\n * Capitalise the first character of a string.\n * @param string String to capitalise.\n * @return Capitalised string.\n */\nfunction capitaliseFirstCharacter( string: string ): string {\n\treturn string.length < 2\n\t\t? string.toUpperCase()\n\t\t: string.charAt( 0 ).toUpperCase() + string.slice( 1 );\n}\n\n/**\n * Map the values of an object with a specified callback and return the result object.\n *\n * @template T The object type\n * @template R The return type of the mapping function\n *\n * @param    object Object to map values of.\n * @param    mapFn  Mapping function to apply to each value.\n * @return Object with the same keys and transformed values.\n */\nfunction mapValues< T extends Record< string, any >, R >(\n\tobject: T,\n\tmapFn: ( value: T[ keyof T ] ) => R\n): Record< keyof T, R > {\n\treturn Object.fromEntries(\n\t\tObject.entries( object ).map( ( [ key, value ] ) => [\n\t\t\tkey,\n\t\t\tmapFn( value ),\n\t\t] )\n\t) as Record< keyof T, R >;\n}\n\n/**\n * Object that contains functions that return the available modifier\n * depending on platform.\n */\nexport const modifiers: WPModifierHandler< WPModifier > = {\n\tprimary: ( _isApple ) => ( _isApple() ? [ COMMAND ] : [ CTRL ] ),\n\tprimaryShift: ( _isApple ) =>\n\t\t_isApple() ? [ SHIFT, COMMAND ] : [ CTRL, SHIFT ],\n\tprimaryAlt: ( _isApple ) =>\n\t\t_isApple() ? [ ALT, COMMAND ] : [ CTRL, ALT ],\n\tsecondary: ( _isApple ) =>\n\t\t_isApple() ? [ SHIFT, ALT, COMMAND ] : [ CTRL, SHIFT, ALT ],\n\taccess: ( _isApple ) => ( _isApple() ? [ CTRL, ALT ] : [ SHIFT, ALT ] ),\n\tctrl: () => [ CTRL ],\n\talt: () => [ ALT ],\n\tctrlShift: () => [ CTRL, SHIFT ],\n\tshift: () => [ SHIFT ],\n\tshiftAlt: () => [ SHIFT, ALT ],\n\tundefined: () => [],\n};\n\n/**\n * An object that contains functions to get raw shortcuts.\n *\n * These are intended for user with the KeyboardShortcuts.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * rawShortcut.primary( 'm' )\n * // \"meta+m\"\"\n * ```\n */\nexport const rawShortcut: WPModifierHandler< WPKeyHandler< string > > =\n\t/* @__PURE__ */\n\tmapValues( modifiers, ( modifier: WPModifier ) => {\n\t\treturn ( character: string, _isApple = isAppleOS ) => {\n\t\t\treturn [ ...modifier( _isApple ), character.toLowerCase() ].join(\n\t\t\t\t'+'\n\t\t\t);\n\t\t};\n\t} );\n\n/**\n * Return an array of the parts of a keyboard shortcut chord for display.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * displayShortcutList.primary( 'm' );\n * // [ \"⌘\", \"M\" ]\n * ```\n *\n * Keyed map of functions to shortcut sequences.\n */\nexport const displayShortcutList: WPModifierHandler<\n\tWPKeyHandler< string[] >\n> =\n\t/* @__PURE__ */\n\tmapValues(\n\t\tmodifiers,\n\t\t( modifier: WPModifier ): WPKeyHandler< string[] > => {\n\t\t\treturn ( character: string, _isApple = isAppleOS ) => {\n\t\t\t\tconst isApple = _isApple();\n\t\t\t\tconst replacementKeyMap = {\n\t\t\t\t\t[ ALT ]: isApple ? '⌥' : 'Alt',\n\t\t\t\t\t[ CTRL ]: isApple ? '⌃' : 'Ctrl', // Make sure ⌃ is the U+2303 UP ARROWHEAD unicode character and not the caret character.\n\t\t\t\t\t[ COMMAND ]: '⌘',\n\t\t\t\t\t[ SHIFT ]: isApple ? '⇧' : 'Shift',\n\t\t\t\t};\n\n\t\t\t\tconst modifierKeys = modifier( _isApple ).reduce< string[] >(\n\t\t\t\t\t( accumulator, key ) => {\n\t\t\t\t\t\tconst replacementKey = replacementKeyMap[ key ] ?? key;\n\t\t\t\t\t\t// If on the Mac, adhere to platform convention and don't show plus between keys.\n\t\t\t\t\t\tif ( isApple ) {\n\t\t\t\t\t\t\treturn [ ...accumulator, replacementKey ];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [ ...accumulator, replacementKey, '+' ];\n\t\t\t\t\t},\n\t\t\t\t\t[]\n\t\t\t\t);\n\n\t\t\t\treturn [\n\t\t\t\t\t...modifierKeys,\n\t\t\t\t\tcapitaliseFirstCharacter( character ),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\t);\n\n/**\n * An object that contains functions to display shortcuts.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * displayShortcut.primary( 'm' );\n * // \"⌘M\"\n * ```\n *\n * Keyed map of functions to display shortcuts.\n */\nexport const displayShortcut: WPModifierHandler< WPKeyHandler< string > > =\n\t/* @__PURE__ */\n\tmapValues(\n\t\tdisplayShortcutList,\n\t\t( shortcutList: WPKeyHandler< string[] > ): WPKeyHandler< string > => {\n\t\t\treturn ( character: string, _isApple = isAppleOS ) =>\n\t\t\t\tshortcutList( character, _isApple ).join( '' );\n\t\t}\n\t);\n\n/**\n * An object that contains functions to return an aria label for a keyboard\n * shortcut.\n *\n * @example\n * ```js\n * // Assuming macOS:\n * shortcutAriaLabel.primary( '.' );\n * // \"Command + Period\"\n * ```\n *\n * Keyed map of functions to shortcut ARIA labels.\n */\nexport const shortcutAriaLabel: WPModifierHandler< WPKeyHandler< string > > =\n\t/* @__PURE__ */\n\tmapValues( modifiers, ( modifier: WPModifier ): WPKeyHandler< string > => {\n\t\treturn ( character: string, _isApple = isAppleOS ) => {\n\t\t\tconst isApple = _isApple();\n\t\t\tconst replacementKeyMap: Record< string, string > = {\n\t\t\t\t[ SHIFT ]: 'Shift',\n\t\t\t\t[ COMMAND ]: isApple ? 'Command' : 'Control',\n\t\t\t\t[ CTRL ]: 'Control',\n\t\t\t\t[ ALT ]: isApple ? 'Option' : 'Alt',\n\t\t\t\t/* translators: comma as in the character ',' */\n\t\t\t\t',': __( 'Comma' ),\n\t\t\t\t/* translators: period as in the character '.' */\n\t\t\t\t'.': __( 'Period' ),\n\t\t\t\t/* translators: backtick as in the character '`' */\n\t\t\t\t'`': __( 'Backtick' ),\n\t\t\t\t/* translators: tilde as in the character '~' */\n\t\t\t\t'~': __( 'Tilde' ),\n\t\t\t};\n\n\t\t\treturn [ ...modifier( _isApple ), character ]\n\t\t\t\t.map( ( key ) =>\n\t\t\t\t\tcapitaliseFirstCharacter( replacementKeyMap[ key ] ?? key )\n\t\t\t\t)\n\t\t\t\t.join( isApple ? ' ' : ' + ' );\n\t\t};\n\t} );\n\n/**\n * From a given KeyboardEvent, returns an array of active modifier constants for\n * the event.\n *\n * @param event Keyboard event.\n *\n * @return Active modifier constants.\n */\nfunction getEventModifiers(\n\tevent: ReactKeyboardEvent< HTMLElement > | KeyboardEvent\n): WPModifierPart[] {\n\treturn ( [ ALT, CTRL, COMMAND, SHIFT ] as const ).filter(\n\t\t( key ) =>\n\t\t\t( event as KeyboardEvent )[\n\t\t\t\t`${ key }Key` as 'altKey' | 'ctrlKey' | 'metaKey' | 'shiftKey'\n\t\t\t]\n\t);\n}\n\n/**\n * An object that contains functions to check if a keyboard event matches a\n * predefined shortcut combination.\n *\n * @example\n * ```js\n * // Assuming an event for ⌘M key press:\n * isKeyboardEvent.primary( event, 'm' );\n * // true\n * ```\n *\n * Keyed map of functions to match events.\n */\nexport const isKeyboardEvent: WPModifierHandler< WPEventKeyHandler > =\n\t/* @__PURE__ */\n\tmapValues( modifiers, ( getModifiers: WPModifier ): WPEventKeyHandler => {\n\t\treturn ( event, character, _isApple = isAppleOS ) => {\n\t\t\tconst mods = getModifiers( _isApple );\n\t\t\tconst eventMods = getEventModifiers( event );\n\n\t\t\tconst replacementWithShiftKeyMap: Record< string, string > = {\n\t\t\t\tComma: ',',\n\t\t\t\tBackslash: '\\\\',\n\t\t\t\t// Windows returns `\\` for both IntlRo and IntlYen.\n\t\t\t\tIntlRo: '\\\\',\n\t\t\t\tIntlYen: '\\\\',\n\t\t\t};\n\n\t\t\tconst modsDiff = mods.filter(\n\t\t\t\t( mod ) => ! eventMods.includes( mod )\n\t\t\t);\n\t\t\tconst eventModsDiff = eventMods.filter(\n\t\t\t\t( mod ) => ! mods.includes( mod )\n\t\t\t);\n\n\t\t\tif ( modsDiff.length > 0 || eventModsDiff.length > 0 ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet key = event.key.toLowerCase();\n\n\t\t\tif ( ! character ) {\n\t\t\t\treturn mods.includes( key as WPModifierPart );\n\t\t\t}\n\n\t\t\tif ( event.altKey && character.length === 1 ) {\n\t\t\t\tkey = String.fromCharCode( event.keyCode ).toLowerCase();\n\t\t\t}\n\n\t\t\t// `event.key` returns the value of the key pressed, taking into the state of\n\t\t\t// modifier keys such as `Shift`. If the shift key is pressed, a different\n\t\t\t// value may be returned depending on the keyboard layout. It is necessary to\n\t\t\t// convert to the physical key value that don't take into account keyboard\n\t\t\t// layout or modifier key state.\n\t\t\tif (\n\t\t\t\tevent.shiftKey &&\n\t\t\t\tcharacter.length === 1 &&\n\t\t\t\treplacementWithShiftKeyMap[ event.code ]\n\t\t\t) {\n\t\t\t\tkey = replacementWithShiftKeyMap[ event.code ];\n\t\t\t}\n\n\t\t\t// For backwards compatibility.\n\t\t\tif ( character === 'del' ) {\n\t\t\t\tcharacter = 'delete';\n\t\t\t}\n\n\t\t\treturn key === character.toLowerCase();\n\t\t};\n\t} );\n", "/**\n * WordPress dependencies\n */\nimport { LEFT, RIGHT } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { isCollapsed } from '../../is-collapsed';\n\nconst EMPTY_ACTIVE_FORMATS = [];\n\nexport default ( props ) => ( element ) => {\n\tfunction onKeyDown( event ) {\n\t\tconst { keyCode, shiftKey, altKey, metaKey, ctrlKey } = event;\n\n\t\tif (\n\t\t\t// Only override left and right keys without modifiers pressed.\n\t\t\tshiftKey ||\n\t\t\taltKey ||\n\t\t\tmetaKey ||\n\t\t\tctrlKey ||\n\t\t\t( keyCode !== LEFT && keyCode !== RIGHT )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { record, applyRecord, forceRender } = props.current;\n\t\tconst {\n\t\t\ttext,\n\t\t\tformats,\n\t\t\tstart,\n\t\t\tend,\n\t\t\tactiveFormats: currentActiveFormats = [],\n\t\t} = record.current;\n\t\tconst collapsed = isCollapsed( record.current );\n\t\tconst { ownerDocument } = element;\n\t\tconst { defaultView } = ownerDocument;\n\t\t// To do: ideally, we should look at visual position instead.\n\t\tconst { direction } = defaultView.getComputedStyle( element );\n\t\tconst reverseKey = direction === 'rtl' ? RIGHT : LEFT;\n\t\tconst isReverse = event.keyCode === reverseKey;\n\n\t\t// If the selection is collapsed and at the very start, do nothing if\n\t\t// navigating backward.\n\t\t// If the selection is collapsed and at the very end, do nothing if\n\t\t// navigating forward.\n\t\tif ( collapsed && currentActiveFormats.length === 0 ) {\n\t\t\tif ( start === 0 && isReverse ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( end === text.length && ! isReverse ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// If the selection is not collapsed, let the browser handle collapsing\n\t\t// the selection for now. Later we could expand this logic to set\n\t\t// boundary positions if needed.\n\t\tif ( ! collapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst formatsBefore = formats[ start - 1 ] || EMPTY_ACTIVE_FORMATS;\n\t\tconst formatsAfter = formats[ start ] || EMPTY_ACTIVE_FORMATS;\n\t\tconst destination = isReverse ? formatsBefore : formatsAfter;\n\t\tconst isIncreasing = currentActiveFormats.every(\n\t\t\t( format, index ) => format === destination[ index ]\n\t\t);\n\n\t\tlet newActiveFormatsLength = currentActiveFormats.length;\n\n\t\tif ( ! isIncreasing ) {\n\t\t\tnewActiveFormatsLength--;\n\t\t} else if ( newActiveFormatsLength < destination.length ) {\n\t\t\tnewActiveFormatsLength++;\n\t\t}\n\n\t\tif ( newActiveFormatsLength === currentActiveFormats.length ) {\n\t\t\trecord.current._newActiveFormats = destination;\n\t\t\treturn;\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\tconst origin = isReverse ? formatsAfter : formatsBefore;\n\t\tconst source = isIncreasing ? destination : origin;\n\t\tconst newActiveFormats = source.slice( 0, newActiveFormatsLength );\n\t\tconst newValue = {\n\t\t\t...record.current,\n\t\t\tactiveFormats: newActiveFormats,\n\t\t};\n\t\trecord.current = newValue;\n\t\tapplyRecord( newValue );\n\t\tforceRender();\n\t}\n\n\telement.addEventListener( 'keydown', onKeyDown );\n\treturn () => {\n\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t};\n};\n", "/**\n * Internal dependencies\n */\n\nimport { insert } from './insert';\nimport { create } from './create';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Remove content from a Rich Text value between the given `startIndex` and\n * `endIndex`. Indices are retrieved from the selection if none are provided.\n *\n * @param {RichTextValue} value        Value to modify.\n * @param {number}        [startIndex] Start index.\n * @param {number}        [endIndex]   End index.\n *\n * @return {RichTextValue} A new value with the content removed.\n */\nexport function remove( value, startIndex, endIndex ) {\n\treturn insert( value, create(), startIndex, endIndex );\n}\n", "/**\n * WordPress dependencies\n */\nimport { BACKSPACE, DELETE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { remove } from '../../remove';\n\nexport default ( props ) => ( element ) => {\n\tfunction onKeyDown( event ) {\n\t\tconst { keyCode } = event;\n\t\tconst { createRecord, handleChange } = props.current;\n\n\t\tif ( event.defaultPrevented ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( keyCode !== DELETE && keyCode !== BACKSPACE ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentValue = createRecord();\n\t\tconst { start, end, text } = currentValue;\n\n\t\t// Always handle full content deletion ourselves.\n\t\tif ( start === 0 && end !== 0 && end === text.length ) {\n\t\t\thandleChange( remove( currentValue ) );\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\telement.addEventListener( 'keydown', onKeyDown );\n\treturn () => {\n\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t};\n};\n", "/**\n * Internal dependencies\n */\n\nimport { isFormatEqual } from './is-format-equal';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Efficiently updates all the formats from `start` (including) until `end`\n * (excluding) with the active formats. Mutates `value`.\n *\n * @param {Object}        $1         Named paramentes.\n * @param {RichTextValue} $1.value   Value te update.\n * @param {number}        $1.start   Index to update from.\n * @param {number}        $1.end     Index to update until.\n * @param {Array}         $1.formats Replacement formats.\n *\n * @return {RichTextValue} Mutated value.\n */\nexport function updateFormats( { value, start, end, formats } ) {\n\t// Start and end may be switched in case of delete.\n\tconst min = Math.min( start, end );\n\tconst max = Math.max( start, end );\n\tconst formatsBefore = value.formats[ min - 1 ] || [];\n\tconst formatsAfter = value.formats[ max ] || [];\n\n\t// First, fix the references. If any format right before or after are\n\t// equal, the replacement format should use the same reference.\n\tvalue.activeFormats = formats.map( ( format, index ) => {\n\t\tif ( formatsBefore[ index ] ) {\n\t\t\tif ( isFormatEqual( format, formatsBefore[ index ] ) ) {\n\t\t\t\treturn formatsBefore[ index ];\n\t\t\t}\n\t\t} else if ( formatsAfter[ index ] ) {\n\t\t\tif ( isFormatEqual( format, formatsAfter[ index ] ) ) {\n\t\t\t\treturn formatsAfter[ index ];\n\t\t\t}\n\t\t}\n\n\t\treturn format;\n\t} );\n\n\twhile ( --end >= start ) {\n\t\tif ( value.activeFormats.length > 0 ) {\n\t\t\tvalue.formats[ end ] = value.activeFormats;\n\t\t} else {\n\t\t\tdelete value.formats[ end ];\n\t\t}\n\t}\n\n\treturn value;\n}\n", "/**\n * Internal dependencies\n */\nimport { getActiveFormats } from '../../get-active-formats';\nimport { updateFormats } from '../../update-formats';\n\n/**\n * All inserting input types that would insert HTML into the DOM.\n *\n * @see https://www.w3.org/TR/input-events-2/#interface-InputEvent-Attributes\n *\n * @type {Set}\n */\nconst INSERTION_INPUT_TYPES_TO_IGNORE = new Set( [\n\t'insertParagraph',\n\t'insertOrderedList',\n\t'insertUnorderedList',\n\t'insertHorizontalRule',\n\t'insertLink',\n] );\n\nconst EMPTY_ACTIVE_FORMATS = [];\n\nconst PLACEHOLDER_ATTR_NAME = 'data-rich-text-placeholder';\n\n/**\n * If the selection is set on the placeholder element, collapse the selection to\n * the start (before the placeholder).\n *\n * @param {Window} defaultView\n */\nfunction fixPlaceholderSelection( defaultView ) {\n\tconst selection = defaultView.getSelection();\n\tconst { anchorNode, anchorOffset } = selection;\n\n\tif ( anchorNode.nodeType !== anchorNode.ELEMENT_NODE ) {\n\t\treturn;\n\t}\n\n\tconst targetNode = anchorNode.childNodes[ anchorOffset ];\n\n\tif (\n\t\t! targetNode ||\n\t\ttargetNode.nodeType !== targetNode.ELEMENT_NODE ||\n\t\t! targetNode.hasAttribute( PLACEHOLDER_ATTR_NAME )\n\t) {\n\t\treturn;\n\t}\n\n\tselection.collapseToStart();\n}\n\nexport default ( props ) => ( element ) => {\n\tconst { ownerDocument } = element;\n\tconst { defaultView } = ownerDocument;\n\n\tlet isComposing = false;\n\n\tfunction onInput( event ) {\n\t\t// Do not trigger a change if characters are being composed. Browsers\n\t\t// will usually emit a final `input` event when the characters are\n\t\t// composed. As of December 2019, Safari doesn't support\n\t\t// nativeEvent.isComposing.\n\t\tif ( isComposing ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet inputType;\n\n\t\tif ( event ) {\n\t\t\tinputType = event.inputType;\n\t\t}\n\n\t\tconst { record, applyRecord, createRecord, handleChange } =\n\t\t\tprops.current;\n\n\t\t// The browser formatted something or tried to insert HTML. Overwrite\n\t\t// it. It will be handled later by the format library if needed.\n\t\tif (\n\t\t\tinputType &&\n\t\t\t( inputType.indexOf( 'format' ) === 0 ||\n\t\t\t\tINSERTION_INPUT_TYPES_TO_IGNORE.has( inputType ) )\n\t\t) {\n\t\t\tapplyRecord( record.current );\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentValue = createRecord();\n\t\tconst { start, activeFormats: oldActiveFormats = [] } = record.current;\n\n\t\t// Update the formats between the last and new caret position.\n\t\tconst change = updateFormats( {\n\t\t\tvalue: currentValue,\n\t\t\tstart,\n\t\t\tend: currentValue.start,\n\t\t\tformats: oldActiveFormats,\n\t\t} );\n\n\t\thandleChange( change );\n\t}\n\n\t/**\n\t * Syncs the selection to local state. A callback for the `selectionchange`\n\t * event.\n\t */\n\tfunction handleSelectionChange() {\n\t\tconst { record, applyRecord, createRecord, onSelectionChange } =\n\t\t\tprops.current;\n\n\t\t// Check if the implementor disabled editing. `contentEditable` does\n\t\t// disable input, but not text selection, so we must ignore selection\n\t\t// changes.\n\t\tif ( element.contentEditable !== 'true' ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ensure the active element is the rich text element.\n\t\tif ( ownerDocument.activeElement !== element ) {\n\t\t\t// If it is not, we can stop listening for selection changes. We\n\t\t\t// resume listening when the element is focused.\n\t\t\townerDocument.removeEventListener(\n\t\t\t\t'selectionchange',\n\t\t\t\thandleSelectionChange\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// In case of a keyboard event, ignore selection changes during\n\t\t// composition.\n\t\tif ( isComposing ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { start, end, text } = createRecord();\n\t\tconst oldRecord = record.current;\n\n\t\t// Fallback mechanism for IE11, which doesn't support the input event.\n\t\t// Any input results in a selection change.\n\t\tif ( text !== oldRecord.text ) {\n\t\t\tonInput();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( start === oldRecord.start && end === oldRecord.end ) {\n\t\t\t// Sometimes the browser may set the selection on the placeholder\n\t\t\t// element, in which case the caret is not visible. We need to set\n\t\t\t// the caret before the placeholder if that's the case.\n\t\t\tif ( oldRecord.text.length === 0 && start === 0 ) {\n\t\t\t\tfixPlaceholderSelection( defaultView );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst newValue = {\n\t\t\t...oldRecord,\n\t\t\tstart,\n\t\t\tend,\n\t\t\t// _newActiveFormats may be set on arrow key navigation to control\n\t\t\t// the right boundary position. If undefined, getActiveFormats will\n\t\t\t// give the active formats according to the browser.\n\t\t\tactiveFormats: oldRecord._newActiveFormats,\n\t\t\t_newActiveFormats: undefined,\n\t\t};\n\n\t\tconst newActiveFormats = getActiveFormats(\n\t\t\tnewValue,\n\t\t\tEMPTY_ACTIVE_FORMATS\n\t\t);\n\n\t\t// Update the value with the new active formats.\n\t\tnewValue.activeFormats = newActiveFormats;\n\n\t\t// It is important that the internal value is updated first,\n\t\t// otherwise the value will be wrong on render!\n\t\trecord.current = newValue;\n\t\tapplyRecord( newValue, { domOnly: true } );\n\t\tonSelectionChange( start, end );\n\t}\n\n\tfunction onCompositionStart() {\n\t\tisComposing = true;\n\t\t// Do not update the selection when characters are being composed as\n\t\t// this rerenders the component and might destroy internal browser\n\t\t// editing state.\n\t\townerDocument.removeEventListener(\n\t\t\t'selectionchange',\n\t\t\thandleSelectionChange\n\t\t);\n\t\t// Remove the placeholder. Since the rich text value doesn't update\n\t\t// during composition, the placeholder doesn't get removed. There's no\n\t\t// need to re-add it, when the value is updated on compositionend it\n\t\t// will be re-added when the value is empty.\n\t\telement.querySelector( `[${ PLACEHOLDER_ATTR_NAME }]` )?.remove();\n\t}\n\n\tfunction onCompositionEnd() {\n\t\tisComposing = false;\n\t\t// Ensure the value is up-to-date for browsers that don't emit a final\n\t\t// input event after composition.\n\t\tonInput( { inputType: 'insertText' } );\n\t\t// Tracking selection changes can be resumed.\n\t\townerDocument.addEventListener(\n\t\t\t'selectionchange',\n\t\t\thandleSelectionChange\n\t\t);\n\t}\n\n\tfunction onFocus() {\n\t\tconst { record, isSelected, onSelectionChange, applyRecord } =\n\t\t\tprops.current;\n\n\t\t// When the whole editor is editable, let writing flow handle\n\t\t// selection.\n\t\tif ( element.parentElement.closest( '[contenteditable=\"true\"]' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! isSelected ) {\n\t\t\t// We know for certain that on focus, the old selection is invalid.\n\t\t\t// It will be recalculated on the next mouseup, keyup, or touchend\n\t\t\t// event.\n\t\t\tconst index = undefined;\n\n\t\t\trecord.current = {\n\t\t\t\t...record.current,\n\t\t\t\tstart: index,\n\t\t\t\tend: index,\n\t\t\t\tactiveFormats: EMPTY_ACTIVE_FORMATS,\n\t\t\t};\n\t\t} else {\n\t\t\tapplyRecord( record.current, { domOnly: true } );\n\t\t}\n\n\t\tonSelectionChange( record.current.start, record.current.end );\n\n\t\t// There is no selection change event when the element is focused, so\n\t\t// we need to manually trigger it. The selection is also not available\n\t\t// yet in this call stack.\n\t\twindow.queueMicrotask( handleSelectionChange );\n\n\t\townerDocument.addEventListener(\n\t\t\t'selectionchange',\n\t\t\thandleSelectionChange\n\t\t);\n\t}\n\n\telement.addEventListener( 'input', onInput );\n\telement.addEventListener( 'compositionstart', onCompositionStart );\n\telement.addEventListener( 'compositionend', onCompositionEnd );\n\telement.addEventListener( 'focus', onFocus );\n\n\treturn () => {\n\t\telement.removeEventListener( 'input', onInput );\n\t\telement.removeEventListener( 'compositionstart', onCompositionStart );\n\t\telement.removeEventListener( 'compositionend', onCompositionEnd );\n\t\telement.removeEventListener( 'focus', onFocus );\n\t};\n};\n", "/**\n * Internal dependencies\n */\nimport { isRangeEqual } from '../../is-range-equal';\n\n/**\n * Sometimes some browsers are not firing a `selectionchange` event when\n * changing the selection by mouse or keyboard. This hook makes sure that, if we\n * detect no `selectionchange` or `input` event between the up and down events,\n * we fire a `selectionchange` event.\n */\nexport default () => ( element ) => {\n\tconst { ownerDocument } = element;\n\tconst { defaultView } = ownerDocument;\n\tconst selection = defaultView?.getSelection();\n\n\tlet range;\n\n\tfunction getRange() {\n\t\treturn selection.rangeCount ? selection.getRangeAt( 0 ) : null;\n\t}\n\n\tfunction onDown( event ) {\n\t\tconst type = event.type === 'keydown' ? 'keyup' : 'pointerup';\n\n\t\tfunction onCancel() {\n\t\t\townerDocument.removeEventListener( type, onUp );\n\t\t\townerDocument.removeEventListener( 'selectionchange', onCancel );\n\t\t\townerDocument.removeEventListener( 'input', onCancel );\n\t\t}\n\n\t\tfunction onUp() {\n\t\t\tonCancel();\n\t\t\tif ( isRangeEqual( range, getRange() ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\townerDocument.dispatchEvent( new Event( 'selectionchange' ) );\n\t\t}\n\n\t\townerDocument.addEventListener( type, onUp );\n\t\townerDocument.addEventListener( 'selectionchange', onCancel );\n\t\townerDocument.addEventListener( 'input', onCancel );\n\n\t\trange = getRange();\n\t}\n\n\telement.addEventListener( 'pointerdown', onDown );\n\telement.addEventListener( 'keydown', onDown );\n\treturn () => {\n\t\telement.removeEventListener( 'pointerdown', onDown );\n\t\telement.removeEventListener( 'keydown', onDown );\n\t};\n};\n", "/**\n * Prevents focus from being captured by the element when clicking _outside_\n * around the element. This may happen when the parent element is flex.\n * @see https://github.com/WordPress/gutenberg/pull/65857\n * @see https://github.com/WordPress/gutenberg/pull/66402\n */\nexport function preventFocusCapture() {\n\treturn ( element ) => {\n\t\tconst { ownerDocument } = element;\n\t\tconst { defaultView } = ownerDocument;\n\n\t\tlet value = null;\n\n\t\tfunction onPointerDown( event ) {\n\t\t\t// Abort if the event is default prevented, we will not get a pointer up event.\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( event.target === element ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( ! event.target.contains( element ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalue = element.getAttribute( 'contenteditable' );\n\t\t\telement.setAttribute( 'contenteditable', 'false' );\n\t\t\tdefaultView.getSelection().removeAllRanges();\n\t\t}\n\n\t\tfunction onPointerUp() {\n\t\t\tif ( value !== null ) {\n\t\t\t\telement.setAttribute( 'contenteditable', value );\n\t\t\t\tvalue = null;\n\t\t\t}\n\t\t}\n\n\t\tdefaultView.addEventListener( 'pointerdown', onPointerDown );\n\t\tdefaultView.addEventListener( 'pointerup', onPointerUp );\n\t\treturn () => {\n\t\t\tdefaultView.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tdefaultView.removeEventListener( 'pointerup', onPointerUp );\n\t\t};\n\t};\n}\n", "/**\n * WordPress dependencies\n */\nimport { useMemo, useRef, useInsertionEffect } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport copyHandler from './copy-handler';\nimport selectObject from './select-object';\nimport formatBoundaries from './format-boundaries';\nimport deleteHandler from './delete';\nimport inputAndSelection from './input-and-selection';\nimport selectionChangeCompat from './selection-change-compat';\nimport { preventFocusCapture } from './prevent-focus-capture';\n\nconst allEventListeners = [\n\tcopyHandler,\n\tselectObject,\n\tformatBoundaries,\n\tdeleteHandler,\n\tinputAndSelection,\n\tselectionChangeCompat,\n\tpreventFocusCapture,\n];\n\nexport function useEventListeners( props ) {\n\tconst propsRef = useRef( props );\n\tuseInsertionEffect( () => {\n\t\tpropsRef.current = props;\n\t} );\n\tconst refEffects = useMemo(\n\t\t() => allEventListeners.map( ( refEffect ) => refEffect( propsRef ) ),\n\t\t[ propsRef ]\n\t);\n\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\tconst cleanups = refEffects.map( ( effect ) => effect( element ) );\n\t\t\treturn () => {\n\t\t\t\tcleanups.forEach( ( cleanup ) => cleanup() );\n\t\t\t};\n\t\t},\n\t\t[ refEffects ]\n\t);\n}\n", "/**\n * WordPress dependencies\n */\nimport { useRef, useLayoutEffect, useReducer } from '@wordpress/element';\nimport { useMergeRefs, useRefEffect } from '@wordpress/compose';\nimport { useRegistry } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { create, RichTextData } from '../create';\nimport { apply } from '../to-dom';\nimport { toHTMLString } from '../to-html-string';\nimport { useDefaultStyle } from './use-default-style';\nimport { useBoundaryStyle } from './use-boundary-style';\nimport { useEventListeners } from './event-listeners';\n\nexport function useRichText( {\n\tvalue = '',\n\tselectionStart,\n\tselectionEnd,\n\tplaceholder,\n\tonSelectionChange,\n\tpreserveWhiteSpace,\n\tonChange,\n\t__unstableDisableFormats: disableFormats,\n\t__unstableIsSelected: isSelected,\n\t__unstableDependencies = [],\n\t__unstableAfterParse,\n\t__unstableBeforeSerialize,\n\t__unstableAddInvisibleFormats,\n} ) {\n\tconst registry = useRegistry();\n\tconst [ , forceRender ] = useReducer( () => ( {} ) );\n\tconst ref = useRef();\n\n\tfunction createRecord() {\n\t\tconst {\n\t\t\townerDocument: { defaultView },\n\t\t} = ref.current;\n\t\tconst selection = defaultView.getSelection();\n\t\tconst range =\n\t\t\tselection.rangeCount > 0 ? selection.getRangeAt( 0 ) : null;\n\n\t\treturn create( {\n\t\t\telement: ref.current,\n\t\t\trange,\n\t\t\t__unstableIsEditableTree: true,\n\t\t} );\n\t}\n\n\tfunction applyRecord( newRecord, { domOnly } = {} ) {\n\t\tapply( {\n\t\t\tvalue: newRecord,\n\t\t\tcurrent: ref.current,\n\t\t\tprepareEditableTree: __unstableAddInvisibleFormats,\n\t\t\t__unstableDomOnly: domOnly,\n\t\t\tplaceholder,\n\t\t} );\n\t}\n\n\t// Internal values are updated synchronously, unlike props and state.\n\tconst _valueRef = useRef( value );\n\tconst recordRef = useRef();\n\n\tfunction setRecordFromProps() {\n\t\t_valueRef.current = value;\n\t\trecordRef.current = value;\n\t\tif ( ! ( value instanceof RichTextData ) ) {\n\t\t\trecordRef.current = value\n\t\t\t\t? RichTextData.fromHTMLString( value, { preserveWhiteSpace } )\n\t\t\t\t: RichTextData.empty();\n\t\t}\n\t\t// To do: make rich text internally work with RichTextData.\n\t\trecordRef.current = {\n\t\t\ttext: recordRef.current.text,\n\t\t\tformats: recordRef.current.formats,\n\t\t\treplacements: recordRef.current.replacements,\n\t\t};\n\t\tif ( disableFormats ) {\n\t\t\trecordRef.current.formats = Array( value.length );\n\t\t\trecordRef.current.replacements = Array( value.length );\n\t\t}\n\t\tif ( __unstableAfterParse ) {\n\t\t\trecordRef.current.formats = __unstableAfterParse(\n\t\t\t\trecordRef.current\n\t\t\t);\n\t\t}\n\t\trecordRef.current.start = selectionStart;\n\t\trecordRef.current.end = selectionEnd;\n\t}\n\n\tconst hadSelectionUpdateRef = useRef( false );\n\n\tif ( ! recordRef.current ) {\n\t\thadSelectionUpdateRef.current = isSelected;\n\t\tsetRecordFromProps();\n\t} else if (\n\t\tselectionStart !== recordRef.current.start ||\n\t\tselectionEnd !== recordRef.current.end\n\t) {\n\t\thadSelectionUpdateRef.current = isSelected;\n\t\trecordRef.current = {\n\t\t\t...recordRef.current,\n\t\t\tstart: selectionStart,\n\t\t\tend: selectionEnd,\n\t\t\tactiveFormats: undefined,\n\t\t};\n\t}\n\n\t/**\n\t * Sync the value to global state. The node tree and selection will also be\n\t * updated if differences are found.\n\t *\n\t * @param {Object} newRecord The record to sync and apply.\n\t */\n\tfunction handleChange( newRecord ) {\n\t\trecordRef.current = newRecord;\n\t\tapplyRecord( newRecord );\n\n\t\tif ( disableFormats ) {\n\t\t\t_valueRef.current = newRecord.text;\n\t\t} else {\n\t\t\tconst newFormats = __unstableBeforeSerialize\n\t\t\t\t? __unstableBeforeSerialize( newRecord )\n\t\t\t\t: newRecord.formats;\n\t\t\tnewRecord = { ...newRecord, formats: newFormats };\n\t\t\tif ( typeof value === 'string' ) {\n\t\t\t\t_valueRef.current = toHTMLString( {\n\t\t\t\t\tvalue: newRecord,\n\t\t\t\t\tpreserveWhiteSpace,\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t_valueRef.current = new RichTextData( newRecord );\n\t\t\t}\n\t\t}\n\n\t\tconst { start, end, formats, text } = recordRef.current;\n\n\t\t// Selection must be updated first, so it is recorded in history when\n\t\t// the content change happens.\n\t\t// We batch both calls to only attempt to rerender once.\n\t\tregistry.batch( () => {\n\t\t\tonSelectionChange( start, end );\n\t\t\tonChange( _valueRef.current, {\n\t\t\t\t__unstableFormats: formats,\n\t\t\t\t__unstableText: text,\n\t\t\t} );\n\t\t} );\n\t\tforceRender();\n\t}\n\n\tfunction applyFromProps() {\n\t\tsetRecordFromProps();\n\t\tapplyRecord( recordRef.current );\n\t}\n\n\tconst didMountRef = useRef( false );\n\n\t// Value updates must happen synchronously to avoid overwriting newer values.\n\tuseLayoutEffect( () => {\n\t\tif ( didMountRef.current && value !== _valueRef.current ) {\n\t\t\tapplyFromProps();\n\t\t\tforceRender();\n\t\t}\n\t}, [ value ] );\n\n\t// Value updates must happen synchronously to avoid overwriting newer values.\n\tuseLayoutEffect( () => {\n\t\tif ( ! hadSelectionUpdateRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ref.current.ownerDocument.activeElement !== ref.current ) {\n\t\t\tref.current.focus();\n\t\t}\n\n\t\tapplyRecord( recordRef.current );\n\t\thadSelectionUpdateRef.current = false;\n\t}, [ hadSelectionUpdateRef.current ] );\n\n\tconst mergedRefs = useMergeRefs( [\n\t\tref,\n\t\tuseDefaultStyle(),\n\t\tuseBoundaryStyle( { record: recordRef } ),\n\t\tuseEventListeners( {\n\t\t\trecord: recordRef,\n\t\t\thandleChange,\n\t\t\tapplyRecord,\n\t\t\tcreateRecord,\n\t\t\tisSelected,\n\t\t\tonSelectionChange,\n\t\t\tforceRender,\n\t\t} ),\n\t\tuseRefEffect( () => {\n\t\t\tapplyFromProps();\n\t\t\tdidMountRef.current = true;\n\t\t}, [ placeholder, ...__unstableDependencies ] ),\n\t] );\n\n\treturn {\n\t\tvalue: recordRef.current,\n\t\t// A function to get the most recent value so event handlers in\n\t\t// useRichText implementations have access to it. For example when\n\t\t// listening to input events, we internally update the state, but this\n\t\t// state is not yet available to the input event handler because React\n\t\t// may re-render asynchronously.\n\t\tgetValue: () => recordRef.current,\n\t\tonChange: handleChange,\n\t\tref: mergedRefs,\n\t};\n}\n\nexport default function __experimentalRichText() {}\n", "/**\n * Internal dependencies\n */\nimport { getActiveFormats } from './get-active-formats';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n/** @typedef {import('./types').RichTextFormat} RichTextFormat */\n\n/**\n * Gets the format object by type at the start of the selection. This can be\n * used to get e.g. the URL of a link format at the current selection, but also\n * to check if a format is active at the selection. Returns undefined if there\n * is no format at the selection.\n *\n * @param {RichTextValue} value      Value to inspect.\n * @param {string}        formatType Format type to look for.\n *\n * @return {RichTextFormat|undefined} Active format object of the specified\n *                                    type, or undefined.\n */\nexport function getActiveFormat( value, formatType ) {\n\treturn getActiveFormats( value ).find(\n\t\t( { type } ) => type === formatType\n\t);\n}\n", "/**\n * Internal dependencies\n */\n\nimport { OBJECT_REPLACEMENT_CHARACTER } from './special-characters';\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n/** @typedef {import('./types').RichTextFormat} RichTextFormat */\n\n/**\n * Gets the active object, if there is any.\n *\n * @param {RichTextValue} value Value to inspect.\n *\n * @return {RichTextFormat|void} Active object, or undefined.\n */\nexport function getActiveObject( { start, end, replacements, text } ) {\n\tif ( start + 1 !== end || text[ start ] !== OBJECT_REPLACEMENT_CHARACTER ) {\n\t\treturn;\n\t}\n\n\treturn replacements[ start ];\n}\n", "/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Check if a Rich Text value is Empty, meaning it contains no text or any\n * objects (such as images).\n *\n * @param {RichTextValue} value Value to use.\n *\n * @return {boolean} True if the value is empty, false if not.\n */\nexport function isEmpty( { text } ) {\n\treturn text.length === 0;\n}\n", "/**\n * Internal dependencies\n */\n\n/** @typedef {import('./types').RichTextValue} RichTextValue */\n\n/**\n * Split a Rich Text value in two at the given `startIndex` and `endIndex`, or\n * split at the given separator. This is similar to `String.prototype.split`.\n * Indices are retrieved from the selection if none are provided.\n *\n * @param {RichTextValue} value\n * @param {number|string} [string] Start index, or string at which to split.\n *\n * @return {Array<RichTextValue>|undefined} An array of new values.\n */\nexport function split( { formats, replacements, text, start, end }, string ) {\n\tif ( typeof string !== 'string' ) {\n\t\treturn splitAtSelection( ...arguments );\n\t}\n\n\tlet nextStart = 0;\n\n\treturn text.split( string ).map( ( substring ) => {\n\t\tconst startIndex = nextStart;\n\t\tconst value = {\n\t\t\tformats: formats.slice( startIndex, startIndex + substring.length ),\n\t\t\treplacements: replacements.slice(\n\t\t\t\tstartIndex,\n\t\t\t\tstartIndex + substring.length\n\t\t\t),\n\t\t\ttext: substring,\n\t\t};\n\n\t\tnextStart += string.length + substring.length;\n\n\t\tif ( start !== undefined && end !== undefined ) {\n\t\t\tif ( start >= startIndex && start < nextStart ) {\n\t\t\t\tvalue.start = start - startIndex;\n\t\t\t} else if ( start < startIndex && end > startIndex ) {\n\t\t\t\tvalue.start = 0;\n\t\t\t}\n\n\t\t\tif ( end >= startIndex && end < nextStart ) {\n\t\t\t\tvalue.end = end - startIndex;\n\t\t\t} else if ( start < nextStart && end > nextStart ) {\n\t\t\t\tvalue.end = substring.length;\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t} );\n}\n\nfunction splitAtSelection(\n\t{ formats, replacements, text, start, end },\n\tstartIndex = start,\n\tendIndex = end\n) {\n\tif ( start === undefined || end === undefined ) {\n\t\treturn;\n\t}\n\n\tconst before = {\n\t\tformats: formats.slice( 0, startIndex ),\n\t\treplacements: replacements.slice( 0, startIndex ),\n\t\ttext: text.slice( 0, startIndex ),\n\t};\n\tconst after = {\n\t\tformats: formats.slice( endIndex ),\n\t\treplacements: replacements.slice( endIndex ),\n\t\ttext: text.slice( endIndex ),\n\t\tstart: 0,\n\t\tend: 0,\n\t};\n\n\treturn [ before, after ];\n}\n", "/**\n * WordPress dependencies\n */\nimport { usePrevious } from '@wordpress/compose';\nimport { useState, useLayoutEffect } from '@wordpress/element';\n\n/** @typedef {import('../register-format-type').WPFormat} WPFormat */\n/** @typedef {import('../types').RichTextValue} RichTextValue */\n\n/**\n * Given a range and a format tag name and class name, returns the closest\n * format element.\n *\n * @param {Range}       range                  The Range to check.\n * @param {HTMLElement} editableContentElement The editable wrapper.\n * @param {string}      tagName                The tag name of the format element.\n * @param {string}      className              The class name of the format element.\n *\n * @return {HTMLElement|undefined} The format element, if found.\n */\nfunction getFormatElement( range, editableContentElement, tagName, className ) {\n\tlet element = range.startContainer;\n\n\t// Even if the active format is defined, the actually DOM range's start\n\t// container may be outside of the format's DOM element:\n\t// `a‸<strong>b</strong>` (DOM) while visually it's `a<strong>‸b</strong>`.\n\t// So at a given selection index, start with the deepest format DOM element.\n\tif (\n\t\telement.nodeType === element.TEXT_NODE &&\n\t\trange.startOffset === element.length &&\n\t\telement.nextSibling\n\t) {\n\t\telement = element.nextSibling;\n\n\t\twhile ( element.firstChild ) {\n\t\t\telement = element.firstChild;\n\t\t}\n\t}\n\n\tif ( element.nodeType !== element.ELEMENT_NODE ) {\n\t\telement = element.parentElement;\n\t}\n\n\tif ( ! element ) {\n\t\treturn;\n\t}\n\tif ( element === editableContentElement ) {\n\t\treturn;\n\t}\n\tif ( ! editableContentElement.contains( element ) ) {\n\t\treturn;\n\t}\n\n\tconst selector = tagName + ( className ? '.' + className : '' );\n\n\t// .closest( selector ), but with a boundary. Check if the element matches\n\t// the selector. If it doesn't match, try the parent element if it's not the\n\t// editable wrapper. We don't want to try to match ancestors of the editable\n\t// wrapper, which is what .closest( selector ) would do. When the element is\n\t// the editable wrapper (which is most likely the case because most text is\n\t// unformatted), this never runs.\n\twhile ( element !== editableContentElement ) {\n\t\tif ( element.matches( selector ) ) {\n\t\t\treturn element;\n\t\t}\n\n\t\telement = element.parentElement;\n\t}\n}\n\n/**\n * @typedef {Object} VirtualAnchorElement\n * @property {() => DOMRect} getBoundingClientRect A function returning a DOMRect\n * @property {HTMLElement}   contextElement        The actual DOM element\n */\n\n/**\n * Creates a virtual anchor element for a range.\n *\n * @param {Range}       range                  The range to create a virtual anchor element for.\n * @param {HTMLElement} editableContentElement The editable wrapper.\n *\n * @return {VirtualAnchorElement} The virtual anchor element.\n */\nfunction createVirtualAnchorElement( range, editableContentElement ) {\n\treturn {\n\t\tcontextElement: editableContentElement,\n\t\tgetBoundingClientRect() {\n\t\t\treturn editableContentElement.contains( range.startContainer )\n\t\t\t\t? range.getBoundingClientRect()\n\t\t\t\t: editableContentElement.getBoundingClientRect();\n\t\t},\n\t};\n}\n\n/**\n * Get the anchor: a format element if there is a matching one based on the\n * tagName and className or a range otherwise.\n *\n * @param {HTMLElement} editableContentElement The editable wrapper.\n * @param {string}      tagName                The tag name of the format\n *                                             element.\n * @param {string}      className              The class name of the format\n *                                             element.\n *\n * @return {HTMLElement|VirtualAnchorElement|undefined} The anchor.\n */\nfunction getAnchor( editableContentElement, tagName, className ) {\n\tif ( ! editableContentElement ) {\n\t\treturn;\n\t}\n\n\tconst { ownerDocument } = editableContentElement;\n\tconst { defaultView } = ownerDocument;\n\tconst selection = defaultView.getSelection();\n\n\tif ( ! selection ) {\n\t\treturn;\n\t}\n\tif ( ! selection.rangeCount ) {\n\t\treturn;\n\t}\n\n\tconst range = selection.getRangeAt( 0 );\n\n\tif ( ! range || ! range.startContainer ) {\n\t\treturn;\n\t}\n\n\tconst formatElement = getFormatElement(\n\t\trange,\n\t\teditableContentElement,\n\t\ttagName,\n\t\tclassName\n\t);\n\n\tif ( formatElement ) {\n\t\treturn formatElement;\n\t}\n\n\treturn createVirtualAnchorElement( range, editableContentElement );\n}\n\n/**\n * This hook, to be used in a format type's Edit component, returns the active\n * element that is formatted, or a virtual element for the selection range if\n * no format is active. The returned value is meant to be used for positioning\n * UI, e.g. by passing it to the `Popover` component via the `anchor` prop.\n *\n * @param {Object}           $1                        Named parameters.\n * @param {HTMLElement|null} $1.editableContentElement The element containing\n *                                                     the editable content.\n * @param {WPFormat=}        $1.settings               The format type's settings.\n * @return {Element|VirtualAnchorElement|undefined|null} The active element or selection range.\n */\nexport function useAnchor( { editableContentElement, settings = {} } ) {\n\tconst { tagName, className, isActive } = settings;\n\tconst [ anchor, setAnchor ] = useState( () =>\n\t\tgetAnchor( editableContentElement, tagName, className )\n\t);\n\tconst wasActive = usePrevious( isActive );\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! editableContentElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction callback() {\n\t\t\tsetAnchor(\n\t\t\t\tgetAnchor( editableContentElement, tagName, className )\n\t\t\t);\n\t\t}\n\n\t\tfunction attach() {\n\t\t\townerDocument.addEventListener( 'selectionchange', callback );\n\t\t}\n\n\t\tfunction detach() {\n\t\t\townerDocument.removeEventListener( 'selectionchange', callback );\n\t\t}\n\n\t\tconst { ownerDocument } = editableContentElement;\n\n\t\tif (\n\t\t\teditableContentElement === ownerDocument.activeElement ||\n\t\t\t// When a link is created, we need to attach the popover to the newly created anchor.\n\t\t\t( ! wasActive && isActive ) ||\n\t\t\t// Sometimes we're _removing_ an active anchor, such as the inline color popover.\n\t\t\t// When we add the color, it switches from a virtual anchor to a `<mark>` element.\n\t\t\t// When we _remove_ the color, it switches from a `<mark>` element to a virtual anchor.\n\t\t\t( wasActive && ! isActive )\n\t\t) {\n\t\t\tsetAnchor(\n\t\t\t\tgetAnchor( editableContentElement, tagName, className )\n\t\t\t);\n\t\t\tattach();\n\t\t}\n\n\t\teditableContentElement.addEventListener( 'focusin', attach );\n\t\teditableContentElement.addEventListener( 'focusout', detach );\n\n\t\treturn () => {\n\t\t\tdetach();\n\n\t\t\teditableContentElement.removeEventListener( 'focusin', attach );\n\t\t\teditableContentElement.removeEventListener( 'focusout', detach );\n\t\t};\n\t}, [ editableContentElement, tagName, className, isActive, wasActive ] );\n\n\treturn anchor;\n}\n", "/**\n * Object map tracking messages which have been logged, for use in ensuring a\n * message is only logged once.\n */\nexport const logged: Set< string > = new Set();\n", "/**\n * Internal dependencies\n */\nimport { logged } from './utils';\n\nfunction isDev(): boolean {\n\t// eslint-disable-next-line @wordpress/wp-global-usage\n\treturn globalThis.SCRIPT_DEBUG === true;\n}\n\n/**\n * Shows a warning with `message` if environment is not `production`.\n *\n * @param message Message to show in the warning.\n *\n * @example\n * ```js\n * import warning from '@wordpress/warning';\n *\n * function MyComponent( props ) {\n *   if ( ! props.title ) {\n *     warning( '`props.title` was not passed' );\n *   }\n *   ...\n * }\n * ```\n */\nexport default function warning( message: string ): void {\n\tif ( ! isDev() ) {\n\t\treturn;\n\t}\n\n\t// Skip if already logged.\n\tif ( logged.has( message ) ) {\n\t\treturn;\n\t}\n\n\t// eslint-disable-next-line no-console\n\tconsole.warn( message );\n\n\t// Throwing an error and catching it immediately to improve debugging\n\t// A consumer can use 'pause on caught exceptions'\n\t// https://github.com/facebook/react/issues/4216\n\ttry {\n\t\tthrow Error( message );\n\t} catch ( x ) {\n\t\t// Do nothing.\n\t}\n\tlogged.add( message );\n}\n", "let _decodeTextArea: HTMLTextAreaElement | undefined;\n\n/**\n * Decodes the HTML entities from a given string.\n *\n * @param html String that contain HTML entities.\n *\n * @example\n * ```js\n * import { decodeEntities } from '@wordpress/html-entities';\n *\n * const result = decodeEntities( '&aacute;' );\n * console.log( result ); // result will be \"á\"\n * ```\n *\n * @return The decoded string.\n */\nexport function decodeEntities( html: string ): string {\n\t// Not a string, or no entities to decode.\n\tif ( 'string' !== typeof html || -1 === html.indexOf( '&' ) ) {\n\t\treturn html;\n\t}\n\n\t// Create a textarea for decoding entities, that we can reuse.\n\tif ( undefined === _decodeTextArea ) {\n\t\tif (\n\t\t\tdocument.implementation &&\n\t\t\tdocument.implementation.createHTMLDocument\n\t\t) {\n\t\t\t_decodeTextArea = document.implementation\n\t\t\t\t.createHTMLDocument( '' )\n\t\t\t\t.createElement( 'textarea' );\n\t\t} else {\n\t\t\t_decodeTextArea = document.createElement( 'textarea' );\n\t\t}\n\t}\n\n\t_decodeTextArea.innerHTML = html;\n\tconst decoded = _decodeTextArea.textContent ?? '';\n\t_decodeTextArea.innerHTML = '';\n\n\t/**\n\t * Cast to string, HTMLTextAreaElement should always have `string` textContent.\n\t *\n\t * > The `textContent` property of the `Node` interface represents the text content of the\n\t * > node and its descendants.\n\t * >\n\t * > Value: A string or `null`\n\t * >\n\t * > * If the node is a `document` or a Doctype, `textContent` returns `null`.\n\t * > * If the node is a CDATA section, comment, processing instruction, or text node,\n\t * >   textContent returns the text inside the node, i.e., the `Node.nodeValue`.\n\t * > * For other node types, `textContent returns the concatenation of the textContent of\n\t * >   every child node, excluding comments and processing instructions. (This is an empty\n\t * >   string if the node has no children.)\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent\n\t */\n\treturn decoded;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA,QAAI,eAAe;AAAA,MAClB,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,MAAM;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AAc;AA4BtB,IAAM;EAAEC,UAAAA;EAAUC,UAAAA;AAAS,IAAIL;AAE/B,IAAMM,kBAAaC,0BAAY,MAAM;AACpC,SAAO;AACR,CAAE;AAoNF,IAAMC,kCAA2D,CAChE,gBACA,qBACA,cACA,iBACA,aACA,YACA,YACA,sBACA,6BACA,gBACA,kBACA,oBACA,oBACA,eACA,YACA,cACA,gBACA,cACA,YACA,kBACA,eACA,aACA,eACA,cACA,aACA,8BACA,4BACA,aACA,gBACA,kBACA,iBACA,iBACA,aACA,aACA,eACA,oBACA,qBACA,cACA,WACA,iBACA,mBACA,kBACA,aACA,eACA,yBACA,0BACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,eACA,cACA,kBACA,iBACA,qBACA,sBACA,eACA,gBACA,cACA,eACA,YACA,gBACA,iBACA,gBACA,YACA,eACA,eACA,eACA,eACA,cACA,SAAS,EACRC,OACD,CAAEC,KAAKC,cAAe;AAErBD,MAAKC,UAAUC,YAAY,CAAC,IAAKD;AACjC,SAAOD;AACR,GACA,CAAC,CACF;AAQA,IAAMG,iCAA0D,CAC/D,gBACA,iBACA,iBACA,eACA,iBACA,eACA,YACA,iBACA,qBACA,oBACA,mBACA,YACA,6BACA,aACA,eACA,YACA,qBACA,iBACA,gBACA,oBACA,aACA,cACA,YACA,gBACA,qBACA,gBACA,eACA,eACA,oBACA,aACA,cACA,cACA,uBACA,oBACA,gBACA,aACA,aACA,aACA,iBACA,uBACA,kBACA,QACA,QACA,eACA,aACA,sBACA,oBACA,oBACA,oBACA,gBACA,eACA,gBACA,eACA,kCACA,4BACA,gBACA,kBACA,eACA,WACA,WACA,cACA,WACA,cACA,oBACA,kBAAkB,EACjBJ,OACD,CAAEC,KAAKC,cAAe;AAErBD,MAAKC,UAAUC,YAAY,CAAC,IAAKD;AACjC,SAAOD;AACR,GACA,CAAC,CACF;AAMA,IAAMI,8BAAuD,CAC5D,iBACA,iBACA,cACA,cACA,cACA,eACA,cACA,YACA,YACA,aACA,aAAa,EACZL,OACD,CA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",
  "names": ["a", "b", "i", "logged", "Object", "create", "feature", "options", "since", "version", "alternative", "plugin", "link", "hint", "pluginMessage", "sinceMessage", "versionMessage", "useInsteadMessage", "linkMessage", "hintMessage", "message", "doAction", "console", "warn", "createHigherOrderComponent", "mapComponent", "modifierName", "Inner", "Outer", "displayName", "hocName", "name", "inner", "outer", "pascalCase", "debounce", "func", "wait", "options", "lastArgs", "lastThis", "maxWait", "result", "timerId", "lastCallTime", "lastInvokeTime", "leading", "maxing", "trailing", "undefined", "Math", "max", "invokeFunc", "time", "args", "thisArg", "apply", "startTimer", "pendingFunc", "waitTime", "setTimeout", "cancelTimer", "clearTimeout", "leadingEdge", "timerExpired", "getTimeSinceLastCall", "remainingWait", "timeSinceLastCall", "timeSinceLastInvoke", "timeWaiting", "min", "shouldInvoke", "Date", "now", "trailingEdge", "clearTimer", "cancel", "flush", "pending", "debounced", "isInvoking", "throttle", "func", "wait", "options", "leading", "trailing", "debounce", "maxWait", "basePipe", "reverse", "funcs", "args", "functions", "flat", "reduce", "prev", "func", "pipe", "pipe", "compose", "basePipe", "ifCondition", "predicate", "createHigherOrderComponent", "WrappedComponent", "props", "_jsx", "a", "b", "aKeys", "Object", "keys", "bKeys", "length", "i", "key", "aValue", "undefined", "hasOwnProperty", "a", "b", "length", "i", "len", "a", "b", "constructor", "Object", "isShallowEqualObjects", "Array", "isArray", "isShallowEqualArrays", "Context", "createContext", "undefined", "displayName", "Provider", "Consumer", "ForwardRef", "forwardRef", "SVG_ATTRIBUTE_WITH_DASHES_LIST", "reduce", "map", "attribute", "toLowerCase", "CASE_SENSITIVE_SVG_ATTRIBUTES", "SVG_ATTRIBUTES_WITH_COLONS", "replace", "instanceMap", "WeakMap", "createId", "object", "instances", "get", "set", "useInstanceId", "prefix", "preferredId", "useMemo", "id", "import_jsx_runtime", "withInstanceId", "createHigherOrderComponent", "WrappedComponent", "props", "instanceId", "useInstanceId", "_jsx", "import_jsx_runtime", "withSafeTimeout", "createHigherOrderComponent", "OriginalComponent", "WrappedComponent", "Component", "constructor", "props", "timeouts", "setTimeout", "bind", "clearTimeout", "componentWillUnmount", "forEach", "fn", "delay", "id", "push", "filter", "timeoutId", "render", "_jsx", "assertIsDefined", "val", "name", "undefined", "Error", "range", "collapsed", "rects", "Array", "from", "getClientRects", "length", "filteredRects", "filter", "width", "getBoundingClientRect", "top", "furthestTop", "bottom", "furthestBottom", "left", "furthestLeft", "right", "furthestRight", "window", "DOMRect", "startContainer", "ownerDocument", "nodeName", "parentNode", "assertIsDefined", "index", "childNodes", "indexOf", "createRange", "setStart", "setEnd", "rect", "height", "padNode", "createTextNode", "cloneRange", "insertNode", "removeChild", "win", "selection", "getSelection", "assertIsDefined", "range", "rangeCount", "getRangeAt", "getRectangleFromRange", "node", "nodeName", "node", "nonTextInputs", "isHTMLInputElement", "type", "includes", "nodeName", "contentEditable", "element", "assertIsDefined", "ownerDocument", "defaultView", "getComputedStyle", "node", "direction", "undefined", "scrollHeight", "clientHeight", "overflowY", "getComputedStyle", "test", "scrollWidth", "clientWidth", "overflowX", "ownerDocument", "parentNode", "getScrollContainer", "node", "assertIsDefined", "parentNode", "removeChild", "html", "body", "document", "implementation", "createHTMLDocument", "innerHTML", "elements", "getElementsByTagName", "elementIndex", "length", "element", "tagName", "remove", "attributeIndex", "attributes", "name", "key", "startsWith", "removeAttribute", "html", "safeHTML", "doc", "document", "implementation", "createHTMLDocument", "body", "innerHTML", "textContent", "textContentSchema", "strong", "em", "s", "del", "ins", "a", "attributes", "code", "abbr", "sub", "sup", "br", "small", "q", "dfn", "data", "time", "var", "samp", "kbd", "i", "b", "u", "mark", "ruby", "rt", "rp", "bdi", "bdo", "wbr", "excludedElements", "Object", "keys", "filter", "element", "includes", "forEach", "tag", "removedTag", "restSchema", "children", "embeddedContentSchema", "audio", "canvas", "embed", "img", "object", "video", "phrasingContentSchema", "getPhrasingContentSchema", "context", "remainingContentSchema", "isPhrasingContent", "node", "nodeName", "toLowerCase", "hasOwnProperty", "isTextContent", "element", "nodeType", "TEXT_NODE", "test", "nodeValue", "ELEMENT_NODE", "hasAttributes", "hasChildNodes", "Array", "from", "childNodes", "every", "isEmpty", "node", "parent", "parentNode", "assertIsDefined", "firstChild", "insertBefore", "removeChild", "newNode", "referenceNode", "assertIsDefined", "parentNode", "insertBefore", "nextSibling", "node", "nodeType", "ELEMENT_NODE", "noop", "nodeList", "doc", "schema", "inline", "Array", "from", "forEach", "node", "tag", "nodeName", "toLowerCase", "hasOwnProperty", "isMatch", "isElement", "attributes", "classes", "children", "require", "allowEmpty", "isEmpty", "remove", "hasAttributes", "name", "includes", "removeAttribute", "classList", "length", "mattchers", "map", "item", "className", "RegExp", "test", "some", "hasChildNodes", "querySelector", "join", "cleanNodeList", "childNodes", "unwrap", "parentNode", "isPhrasingContent", "child", "firstChild", "nextElementSibling", "insertAfter", "createElement", "HTML", "schema", "inline", "doc", "document", "implementation", "createHTMLDocument", "body", "innerHTML", "cleanNodeList", "childNodes", "doc", "assertIsDefined", "defaultView", "selection", "getSelection", "range", "rangeCount", "getRangeAt", "collapsed", "element", "isHTMLInputElement", "isTextField", "selectionStart", "selectionEnd", "error", "doc", "documentHasTextSelection", "activeElement", "inputFieldHasUncollapsedSelection", "doc", "activeElement", "isHTMLInputElement", "isTextField", "documentHasTextSelection", "element", "tagName", "element", "isInputOrTextArea", "selectionStart", "value", "length", "selectionEnd", "isContentEditable", "ownerDocument", "defaultView", "assertIsDefined", "selection", "getSelection", "range", "rangeCount", "getRangeAt", "startContainer", "endContainer", "startOffset", "endOffset", "childNodes", "lastChild", "endContainerContentLength", "nodeType", "TEXT_NODE", "data", "isDeepChild", "query", "container", "propName", "candidate", "element", "tagName", "checkForInputTextarea", "isInputOrTextArea", "element", "getComputedStyle", "direction", "range", "rects", "Array", "from", "getClientRects", "length", "highestTop", "Math", "min", "map", "top", "lowestBottom", "max", "bottom", "selection", "anchorNode", "focusNode", "anchorOffset", "focusOffset", "assertIsDefined", "position", "compareDocumentPosition", "DOCUMENT_POSITION_PRECEDING", "DOCUMENT_POSITION_FOLLOWING", "doc", "x", "y", "caretRangeFromPoint", "caretPositionFromPoint", "point", "range", "createRange", "setStart", "offsetNode", "offset", "collapse", "doc", "x", "y", "container", "originalZIndex", "style", "zIndex", "originalPosition", "position", "getComputedStyle", "range", "caretRangeFromPoint", "scrollIfNoRange", "container", "alignToTop", "callback", "range", "startContainer", "contains", "scrollIntoView", "container", "isReverse", "onlyVertical", "isInputOrTextArea", "selectionStart", "selectionEnd", "value", "length", "isContentEditable", "ownerDocument", "defaultView", "assertIsDefined", "selection", "getSelection", "rangeCount", "range", "getRangeAt", "collapsedRange", "cloneRange", "isForward", "isSelectionForward", "isCollapsed", "collapse", "collapsedRangeRect", "getRectangleFromRange", "rangeRect", "rangeHeight", "getRangeHeight", "height", "isReverseDir", "isRTL", "containerRect", "getBoundingClientRect", "x", "left", "right", "y", "top", "bottom", "testRange", "scrollIfNoRange", "hiddenCaretRangeFromPoint", "testRect", "verticalSide", "horizontalSide", "verticalDiff", "horizontalDiff", "hasVerticalDiff", "Math", "abs", "hasHorizontalDiff", "container", "isReverse", "isEdge", "container", "isReverse", "isEdge", "getRange", "container", "isReverse", "x", "ownerDocument", "isReverseDir", "isRTL", "containerRect", "getBoundingClientRect", "undefined", "right", "left", "y", "bottom", "top", "hiddenCaretRangeFromPoint", "focus", "isInputOrTextArea", "selectionStart", "value", "length", "selectionEnd", "isContentEditable", "range", "scrollIfNoRange", "defaultView", "assertIsDefined", "selection", "getSelection", "removeAllRanges", "addRange", "container", "isReverse", "placeCaretAtEdge", "undefined", "container", "isReverse", "rect", "placeCaretAtEdge", "left", "processedNode", "newNode", "assertIsDefined", "parentNode", "insertAfter", "remove", "node", "tagName", "newNode", "ownerDocument", "createElement", "firstChild", "appendChild", "assertIsDefined", "parentNode", "replaceChild", "newNode", "referenceNode", "assertIsDefined", "parentNode", "insertBefore", "appendChild", "getFilesFromDataTransfer", "dataTransfer", "files", "Array", "from", "items", "forEach", "item", "file", "getAsFile", "find", "name", "type", "size", "push", "buildSelector", "sequential", "join", "isVisible", "element", "offsetWidth", "offsetHeight", "getClientRects", "length", "isValidFocusableArea", "map", "closest", "img", "ownerDocument", "querySelector", "name", "find", "context", "elements", "querySelectorAll", "Array", "from", "filter", "nodeName", "find", "getTabIndex", "element", "tabIndex", "getAttribute", "parseInt", "isTabbableIndex", "createStatefulCollapseRadioGroup", "CHOSEN_RADIO_BY_NAME", "collapseRadioGroup", "result", "nodeName", "type", "checked", "name", "concat", "hasChosen", "hasOwnProperty", "isChosen", "hadChosenElement", "filter", "e", "mapElementToObjectTabbable", "index", "mapObjectTabbableToElement", "object", "compareObjectTabbables", "a", "b", "aTabIndex", "bTabIndex", "filterTabbable", "focusables", "map", "sort", "reduce", "find", "context", "findFocusable", "findPrevious", "ownerDocument", "body", "reverse", "focusable", "compareDocumentPosition", "DOCUMENT_POSITION_PRECEDING", "findNext", "DOCUMENT_POSITION_FOLLOWING", "focus", "focusable", "tabbable", "callback", "dependencies", "cleanupRef", "useRef", "useCallback", "node", "current", "useConstrainedTabbing", "useRefEffect", "node", "onKeyDown", "event", "key", "shiftKey", "target", "action", "nextElement", "focus", "tabbable", "contains", "preventDefault", "domAction", "ownerDocument", "trap", "createElement", "tabIndex", "addEventListener", "removeChild", "removeEventListener", "useUpdatedRef", "value", "ref", "useRef", "useLayoutEffect", "current", "text", "onSuccess", "textRef", "onSuccessRef", "useRefEffect", "node", "clipboard", "Clipboard", "on", "clearSelection", "destroy", "focusOnMount", "focusOnMountRef", "useRef", "setFocus", "target", "focus", "preventScroll", "timerIdRef", "useEffect", "current", "useRefEffect", "node", "_node$ownerDocument$a", "contains", "ownerDocument", "activeElement", "setTimeout", "firstTabbable", "tabbable", "find", "clearTimeout", "origin", "useFocusReturn", "onFocusReturn", "ref", "useRef", "focusedBeforeMount", "onFocusReturnRef", "useEffect", "current", "useCallback", "node", "_activeDocument$activ", "activeDocument", "ownerDocument", "activeElement", "window", "HTMLIFrameElement", "contentDocument", "isFocused", "contains", "isConnected", "_origin", "focus", "INPUT_BUTTON_TYPES", "isFocusNormalizedButton", "eventTarget", "window", "HTMLElement", "nodeName", "includes", "type", "onFocusOutside", "currentOnFocusOutsideRef", "useRef", "useEffect", "current", "preventBlurCheckRef", "blurCheckTimeoutIdRef", "cancelBlurCheck", "useCallback", "clearTimeout", "normalizeButtonFocus", "event", "target", "isInteractionEnd", "queueBlurCheck", "persist", "ignoreForRelatedTarget", "getAttribute", "relatedTarget", "closest", "setTimeout", "document", "hasFocus", "preventDefault", "onFocus", "onMouseDown", "onMouseUp", "onTouchStart", "onTouchEnd", "onBlur", "assignRef", "ref", "value", "hasOwnProperty", "current", "refs", "element", "useRef", "isAttachedRef", "didElementChangeRef", "previousRefsRef", "currentRefsRef", "useLayoutEffect", "forEach", "index", "previousRef", "useCallback", "refsToAssign", "DEFAULT_LOCALE_DATA", "plural_forms", "n", "I18N_HOOK_REGEXP", "createI18n", "initialData", "initialDomain", "hooks", "tannin", "Tannin", "listeners", "Set", "notifyListeners", "forEach", "listener", "subscribe", "callback", "add", "delete", "getLocaleData", "domain", "data", "doSetLocaleData", "pluralForms", "setLocaleData", "addLocaleData", "resetLocaleData", "dcnpgettext", "context", "single", "plural", "number", "undefined", "getFilterDomain", "__", "text", "translation", "applyFilters", "_x", "_n", "_nx", "isRTL", "hasTranslation", "key", "result", "onHookAddedOrRemoved", "hookName", "test", "addAction", "i18n", "createI18n", "undefined", "defaultHooks", "getLocaleData", "i18n", "bind", "setLocaleData", "resetLocaleData", "subscribe", "__", "_x", "_n", "_nx", "isRTL", "hasTranslation", "isAppleOS", "_window", "window", "platform", "navigator", "indexOf", "includes", "ESCAPE", "PAGEUP", "PAGEDOWN", "END", "HOME", "ALT", "CTRL", "COMMAND", "SHIFT", "capitaliseFirstCharacter", "string", "length", "toUpperCase", "charAt", "slice", "mapValues", "object", "mapFn", "Object", "fromEntries", "entries", "map", "key", "value", "modifiers", "primary", "_isApple", "COMMAND", "CTRL", "primaryShift", "SHIFT", "primaryAlt", "ALT", "secondary", "access", "ctrl", "alt", "ctrlShift", "shift", "shiftAlt", "undefined", "rawShortcut", "modifier", "character", "isAppleOS", "toLowerCase", "join", "displayShortcutList", "isApple", "replacementKeyMap", "modifierKeys", "reduce", "accumulator", "_replacementKeyMap$ke", "replacementKey", "displayShortcut", "shortcutList", "shortcutAriaLabel", "__", "_replacementKeyMap$ke2", "getEventModifiers", "event", "filter", "isKeyboardEvent", "getModifiers", "mods", "eventMods", "replacementWithShiftKeyMap", "Comma", "Backslash", "IntlRo", "IntlYen", "modsDiff", "mod", "includes", "eventModsDiff", "altKey", "String", "fromCharCode", "keyCode", "shiftKey", "code", "useDialog", "options", "currentOptions", "useRef", "constrainTabbing", "focusOnMount", "useEffect", "current", "Object", "values", "constrainedTabbingRef", "useConstrainedTabbing", "focusOnMountRef", "useFocusOnMount", "focusReturnRef", "useFocusReturn", "focusOutsideProps", "useFocusOutside", "event", "__unstableOnClose", "onClose", "closeOnEscapeRef", "useCallback", "node", "addEventListener", "keyCode", "ESCAPE", "defaultPrevented", "preventDefault", "useMergeRefs", "tabIndex", "isDisabled", "isDisabledProp", "useRefEffect", "node", "defaultView", "ownerDocument", "updates", "disable", "childNodes", "forEach", "child", "HTMLElement", "getAttribute", "setAttribute", "push", "removeAttribute", "debouncedDisable", "debounce", "leading", "observer", "window", "MutationObserver", "observe", "childList", "disconnect", "cancel", "update", "callback", "ref", "useRef", "Error", "useInsertionEffect", "current", "useCallback", "args", "useIsomorphicLayoutEffect", "window", "useLayoutEffect", "useEffect", "onDragStart", "onDragMove", "onDragEnd", "isDragging", "setIsDragging", "useState", "eventsRef", "useRef", "useIsomorphicLayoutEffect", "current", "onMouseMove", "useCallback", "event", "endDrag", "document", "removeEventListener", "startDrag", "addEventListener", "useEffect", "useKeyboardShortcut", "shortcuts", "callback", "bindGlobal", "eventName", "isDisabled", "target", "currentCallbackRef", "useRef", "useEffect", "current", "mousetrap", "Mousetrap", "document", "shortcutsArray", "Array", "isArray", "forEach", "shortcut", "keys", "split", "modifiers", "Set", "filter", "value", "length", "hasAlt", "has", "hasShift", "isAppleOS", "size", "Error", "bindFn", "args", "reset", "value", "ref", "useRef", "useEffect", "current", "matchMediaCache", "Map", "getMediaQueryList", "query", "match", "get", "window", "matchMedia", "set", "source", "useMemo", "mediaQueryList", "subscribe", "onStoreChange", "addEventListener", "_a", "removeEventListener", "getValue", "_mediaQueryList$match", "matches", "useSyncExternalStore", "useReducedMotion", "useMediaQuery", "BREAKPOINTS", "xhuge", "huge", "wide", "xlarge", "large", "medium", "small", "mobile", "CONDITIONS", "OPERATOR_EVALUATORS", ">=", "breakpointValue", "width", "<", "ViewportMatchWidthContext", "createContext", "displayName", "useViewportMatch", "breakpoint", "operator", "simulatedWidth", "useContext", "mediaQuery", "mediaQueryResult", "useMediaQuery", "undefined", "__experimentalWidthProvider", "Provider", "useResizeObserver", "callback", "resizeObserverOptions", "callbackEvent", "useEvent", "observedElementRef", "useRef", "resizeObserverRef", "element", "_resizeObserverRef$cu", "current", "ResizeObserver", "resizeObserver", "unobserve", "observe", "import_jsx_runtime", "extractSize", "entry", "entrySize", "contentBoxSize", "contentRect", "width", "height", "inlineSize", "blockSize", "map", "d", "Math", "round", "RESIZE_ELEMENT_STYLES", "position", "top", "left", "right", "bottom", "pointerEvents", "opacity", "overflow", "zIndex", "ResizeElement", "onResize", "resizeElementRef", "useResizeObserver", "entries", "newSize", "at", "_jsx", "ref", "style", "sizeEquals", "a", "b", "NULL_SIZE", "size", "setSize", "useState", "previousSizeRef", "useRef", "handleResize", "useCallback", "current", "resizeElement", "useResizeObserver", "callback", "options", "_useResizeObserver", "_useLegacyResizeObserver", "fn", "wait", "options", "debounced", "useMemoOne", "debounce", "useEffect", "cancel", "dropZoneElement", "isDisabled", "onDrop", "_onDrop", "onDragStart", "_onDragStart", "onDragEnter", "_onDragEnter", "onDragLeave", "_onDragLeave", "onDragEnd", "_onDragEnd", "onDragOver", "_onDragOver", "onDropEvent", "useEvent", "onDragStartEvent", "onDragEnterEvent", "onDragLeaveEvent", "onDragEndEvent", "onDragOverEvent", "useRefEffect", "elem", "element", "isDragging", "ownerDocument", "isElementInZone", "targetToCheck", "defaultView", "HTMLElement", "contains", "elementToCheck", "dataset", "isDropZone", "parentElement", "maybeDragStart", "event", "addEventListener", "maybeDragEnd", "preventDefault", "relatedTarget", "defaultPrevented", "dataTransfer", "files", "length", "removeEventListener", "setAttribute", "removeAttribute", "useRefEffect", "element", "ownerDocument", "defaultView", "checkFocus", "activeElement", "focus", "addEventListener", "removeEventListener", "DEFAULT_INIT_WINDOW_SIZE", "elementRef", "itemHeight", "totalItems", "options", "_options$initWindowSi", "_options$useWindowing", "initWindowSize", "useWindowing", "fixedListWindow", "setFixedListWindow", "useState", "visibleItems", "start", "end", "itemInView", "index", "useLayoutEffect", "scrollContainer", "getScrollContainer", "current", "measureWindow", "initRender", "_options$windowOversc", "Math", "ceil", "clientHeight", "windowOverscan", "firstViewableIndex", "floor", "scrollTop", "max", "min", "lastWindow", "nextWindow", "debounceMeasureList", "debounce", "addEventListener", "ownerDocument", "defaultView", "_a", "_b", "removeEventListener", "expandedState", "handleKeyDown", "event", "keyCode", "HOME", "scrollTo", "top", "END", "PAGEUP", "PAGEDOWN", "map", "name", "subscribe", "getValue", "useMemo", "listener", "get", "useSyncExternalStore", "observableMap", "map", "Map", "listeners", "callListeners", "name", "list", "get", "listener", "set", "value", "delete", "subscribe", "Set", "add", "size", "import_jsx_runtime", "pure", "createHigherOrderComponent", "WrappedComponent", "prototype", "Component", "shouldComponentUpdate", "nextProps", "nextState", "isShallowEqual", "props", "state", "render", "_jsx", "Listener", "constructor", "listeners", "handleEvent", "bind", "add", "eventType", "instance", "window", "addEventListener", "push", "remove", "filter", "listener", "length", "removeEventListener", "event", "type", "forEach", "import_jsx_runtime", "listener", "Listener", "import_jsx_runtime", "import_clipboard", "createRequestIdleCallback", "window", "callback", "setTimeout", "Date", "now", "requestIdleCallback", "createQueue", "waitingList", "Map", "isRunning", "runWaitingList", "deadline", "nextElement", "callback", "delete", "timeRemaining", "size", "requestIdleCallback", "add", "element", "item", "set", "flush", "get", "undefined", "cancel", "reset", "clear", "getFirstItemsPresentInState", "list", "state", "firstItems", "i", "length", "item", "includes", "push", "useAsyncList", "config", "step", "current", "setCurrent", "useState", "useEffect", "concat", "slice", "asyncQueue", "createQueue", "add", "flushSync", "reset", "defaultValue", "input", "setInput", "useState", "debouncedInput", "setDebouncedState", "setDebouncedInput", "useDebounce", "useEffect", "fn", "wait", "options", "throttled", "useMemoOne", "throttle", "useEffect", "cancel", "r", "t", "n", "e", "u", "a", "o", "i", "s", "h", "r", "t", "n", "e", "u", "i", "a", "e", "f", "a", "r", "d", "l", "i", "n", "o", "t", "b", "c", "g", "u", "o", "t", "r", "n", "a", "i", "e", "v", "u", "d", "c", "OBJECT_REPLACEMENT_CHARACTER", "ZWNBSP", "getTextContent", "text", "replace", "OBJECT_REPLACEMENT_CHARACTER", "isPlainObject", "listener", "subscribe", "dispatch", "store", "compose", "a", "b", "createStore", "store", "dispatch", "import_equivalent_key_map", "object", "Symbol", "iterator", "next", "isAction", "object", "isPlainObject", "type", "isActionOfType", "expectedType", "controls", "dispatch", "rungenControls", "Object", "entries", "map", "actionType", "control", "value", "next", "iterate", "yieldNext", "yieldError", "isActionOfType", "routine", "isPromise", "then", "unhandledActionControl", "isAction", "push", "rungenRuntime", "create", "action", "Promise", "resolve", "reject", "result", "controls", "store", "runtime", "createRuntime", "dispatch", "next", "action", "isGenerator", "combineReducers", "reducers", "keys", "Object", "combinedReducer", "state", "action", "nextState", "hasChanged", "key", "reducer", "prevStateForKey", "nextStateForKey", "createRegistryControl", "registryControl", "isRegistryControl", "SELECT", "RESOLVE_SELECT", "DISPATCH", "builtinControls", "SELECT", "createRegistryControl", "registry", "storeKey", "selectorName", "args", "select", "RESOLVE_SELECT", "method", "hasResolver", "DISPATCH", "actionName", "dispatch", "CORE_MODULES_USING_PRIVATE_APIS", "registeredPrivateApis", "requiredConsent", "allowReRegistration", "globalThis", "IS_WORDPRESS_CORE", "__dangerousOptInToUnstableAPIsOnlyForCoreModules", "consent", "moduleName", "includes", "Error", "push", "lock", "unlock", "object", "privateData", "_object", "__private", "lockedData", "set", "get", "WeakMap", "Symbol", "lock", "unlock", "__dangerousOptInToUnstableAPIsOnlyForCoreModules", "promiseMiddleware", "next", "action", "isPromise", "then", "resolvedAction", "createResolversCacheMiddleware", "registry", "storeName", "next", "action", "resolvers", "select", "getCachedResolvers", "resolverEntries", "Object", "entries", "forEach", "selectorName", "resolversByArgs", "resolver", "stores", "shouldInvalidate", "value", "args", "undefined", "status", "dispatch", "invalidateResolution", "args", "next", "action", "onSubKey", "actionProperty", "reducer", "state", "action", "key", "undefined", "nextKeyState", "selectorArgsToStateKey", "args", "len", "length", "idx", "slice", "subKeysIsResolved", "onSubKey", "state", "EquivalentKeyMap", "action", "type", "nextState", "set", "selectorArgsToStateKey", "args", "status", "error", "resolutionArgs", "forEach", "idx", "resolutionState", "undefined", "errors", "delete", "isResolved", "selectorName", "removedSelector", "restState", "getResolutionState", "state", "selectorName", "args", "map", "get", "selectorArgsToStateKey", "getIsResolving", "deprecated", "since", "version", "alternative", "resolutionState", "status", "hasStartedResolution", "undefined", "hasFinishedResolution", "hasResolutionFailed", "getResolutionError", "error", "isResolving", "getCachedResolvers", "hasResolvingSelectors", "Object", "values", "some", "selectorState", "Array", "from", "_map", "resolution", "countSelectorsByStatus", "createSelector", "selectorsByStatus", "forEach", "_resolution$1$status", "currentStatus", "startResolution", "selectorName", "args", "type", "finishResolution", "failResolution", "error", "startResolutions", "finishResolutions", "failResolutions", "errors", "invalidateResolution", "invalidateResolutionForStore", "invalidateResolutionForStoreSelector", "trimUndefinedValues", "array", "result", "i", "length", "undefined", "splice", "mapValues", "obj", "callback", "Object", "fromEntries", "entries", "map", "key", "value", "devToolsReplacer", "state", "Map", "window", "HTMLElement", "createResolversCache", "cache", "isRunning", "selectorName", "args", "get", "clear", "delete", "markAsRunning", "EquivalentKeyMap", "set", "createBindingCache", "getItem", "bindItem", "WeakMap", "itemName", "item", "boundItem", "createPrivateProxy", "publicItems", "privateItems", "Proxy", "target", "Reflect", "options", "privateActions", "privateSelectors", "privateRegistrationFunctions", "registerPrivateActions", "actions", "assign", "registerPrivateSelectors", "selectors", "storeDescriptor", "name", "instantiate", "registry", "listeners", "Set", "reducer", "thunkArgs", "dispatch", "thunkDispatch", "select", "thunkSelect", "resolveSelect", "resolveSelectors", "store", "instantiateReduxStore", "lock", "resolversCache", "bindAction", "action", "Promise", "resolve", "metadataActions", "allActions", "resolvers", "mapResolver", "bindSelector", "selector", "isRegistrySelector", "boundSelector", "normalize", "__unstableOriginalGetState", "root", "__unstableNormalizeArgs", "resolver", "hasResolver", "mapSelectorWithResolver", "boundMetadataSelectors", "bindMetadataSelector", "metaDataSelector", "selectorArgs", "targetSelector", "metadata", "metadataSelectors", "boundSelectors", "boundPrivateSelectors", "allSelectors", "keys", "bindResolveSelector", "mapResolveSelector", "allResolveSelectors", "bindSuspendSelector", "mapSuspendSelector", "suspendSelectors", "allSuspendSelectors", "getSelectors", "getActions", "getResolveSelectors", "getSuspendSelectors", "getState", "subscribe", "listener", "add", "lastState", "hasChanged", "controls", "builtinControls", "normalizedControls", "control", "isRegistryControl", "middlewares", "createResolversCacheMiddleware", "promise", "createReduxRoutineMiddleware", "createThunkMiddleware", "enhancers", "applyMiddleware", "__REDUX_DEVTOOLS_EXTENSION__", "push", "instanceId", "serialize", "replacer", "initialState", "enhancedReducer", "combineReducers", "metadataReducer", "createStore", "compose", "apply", "reject", "hasFinished", "hasFinishedResolution", "finalize", "hasFailed", "hasResolutionFailed", "error", "getResolutionError", "getResult", "unsubscribe", "fulfill", "fulfillSelector", "isFulfilled", "hasStartedResolution", "setTimeout", "startResolution", "finishResolution", "failResolution", "selectorResolver", "coreDataStore", "name", "instantiate", "registry", "getCoreDataSelector", "selectorName", "key", "args", "select", "getCoreDataAction", "actionName", "dispatch", "getSelectors", "Object", "fromEntries", "map", "getActions", "subscribe", "createEmitter", "isPaused", "isPending", "listeners", "Set", "notifyListeners", "Array", "from", "forEach", "listener", "subscribe", "add", "delete", "pause", "resume", "emit", "getStoreName", "storeNameOrDescriptor", "name", "createRegistry", "storeConfigs", "parent", "stores", "emitter", "createEmitter", "listeningStores", "globalListener", "emit", "subscribe", "listener", "storeName", "store", "select", "add", "getSelectors", "__unstableMarkListeningStores", "callback", "ref", "Set", "call", "current", "Array", "from", "resolveSelect", "getResolveSelectors", "suspendSelect", "getSuspendSelectors", "dispatch", "getActions", "withPlugins", "attributes", "Object", "fromEntries", "entries", "map", "key", "attribute", "registry", "apply", "arguments", "registerStoreInstance", "createStore", "console", "error", "TypeError", "currentSubscribe", "unsubscribeFromEmitter", "unsubscribeFromStore", "isPaused", "unlock", "registerPrivateActions", "privateActionsOf", "registerPrivateSelectors", "privateSelectorsOf", "e", "register", "instantiate", "registerGenericStore", "deprecated", "since", "alternative", "registerStore", "options", "reducer", "createReduxStore", "batch", "pause", "values", "forEach", "resume", "namespaces", "use", "plugin", "coreDataStore", "config", "registryWithPlugins", "lock", "privateActions", "privateSelectors", "createRegistry", "objectStorage", "storage", "getItem", "key", "setItem", "value", "clear", "String", "Object", "create", "storage", "window", "localStorage", "setItem", "removeItem", "error", "objectStorage", "DEFAULT_STORAGE", "defaultStorage", "DEFAULT_STORAGE_KEY", "withLazySameState", "reducer", "state", "action", "nextState", "createPersistenceInterface", "options", "storage", "storageKey", "data", "getData", "undefined", "persisted", "getItem", "JSON", "parse", "error", "setData", "key", "value", "setItem", "stringify", "get", "set", "persistencePlugin", "registry", "pluginOptions", "persistence", "createPersistOnChange", "getState", "storeName", "keys", "getPersistedState", "Array", "isArray", "reducers", "reduce", "accumulator", "Object", "assign", "combineReducers", "lastState", "registerStore", "persist", "persistedState", "initialState", "type", "isPlainObject", "deepmerge", "isMergeableObject", "store", "subscribe", "__unstableMigrate", "import_requestidlecallback", "createRequestIdleCallback", "window", "callback", "setTimeout", "Date", "now", "requestIdleCallback", "request_idle_callback_default", "createQueue", "waitingList", "Map", "isRunning", "runWaitingList", "deadline", "nextElement", "callback", "delete", "timeRemaining", "size", "requestIdleCallback", "add", "element", "item", "set", "flush", "get", "undefined", "cancel", "reset", "clear", "import_react", "import_react_dom", "import_client", "Context", "createContext", "undefined", "displayName", "Provider", "Consumer", "ForwardRef", "forwardRef", "SVG_ATTRIBUTE_WITH_DASHES_LIST", "reduce", "map", "attribute", "toLowerCase", "CASE_SENSITIVE_SVG_ATTRIBUTES", "SVG_ATTRIBUTES_WITH_COLONS", "replace", "Context", "createContext", "defaultRegistry", "displayName", "Consumer", "Provider", "RegistryConsumer", "useContext", "Context", "Context", "createContext", "displayName", "Consumer", "Provider", "renderQueue", "createQueue", "import_jsx_runtime", "import_jsx_runtime", "import_jsx_runtime", "withRegistry", "createHigherOrderComponent", "OriginalComponent", "props", "_jsx", "RegistryConsumer", "children", "registry", "select", "storeNameOrDescriptor", "defaultRegistry", "combineReducers", "combineReducersModule", "resolveSelect", "defaultRegistry", "suspendSelect", "subscribe", "registerGenericStore", "registerStore", "use", "register", "formatTypes", "state", "action", "type", "reduce", "newFormatTypes", "name", "Object", "fromEntries", "entries", "filter", "key", "names", "includes", "reducer_default", "combineReducers", "selectors_exports", "getFormatTypes", "createSelector", "state", "Object", "values", "formatTypes", "getFormatType", "name", "getFormatTypeForBareElement", "bareElementTagName", "find", "className", "tagName", "getFormatTypeForClassName", "elementClassName", "indexOf", "actions_exports", "addFormatTypes", "formatTypes", "type", "Array", "isArray", "removeFormatTypes", "names", "STORE_NAME", "store", "createReduxStore", "reducer", "selectors", "actions", "register", "createElement", "implementation", "html", "body", "createHTMLDocument", "innerHTML", "isFormatEqual", "format1", "format2", "type", "attributes1", "attributes", "attributes2", "keys1", "Object", "keys", "keys2", "length", "i", "name", "normaliseFormats", "value", "newFormats", "formats", "slice", "forEach", "formatsAtIndex", "index", "formatsAtPreviousIndex", "newFormatsAtIndex", "format", "formatIndex", "previousFormat", "isFormatEqual", "mergePair", "a", "b", "formats", "concat", "replacements", "text", "getActiveFormats", "value", "EMPTY_ACTIVE_FORMATS", "formats", "start", "end", "activeFormats", "undefined", "formatsBefore", "formatsAfter", "length", "selectedFormats", "slice", "_activeFormats", "i", "formatsAtIndex", "ii", "format", "find", "_format", "isFormatEqual", "splice", "getFormatType", "name", "select", "richTextStore", "restoreOnAttributes", "attributes", "isEditableTree", "newAttributes", "key", "newKey", "startsWith", "slice", "length", "fromFormat", "type", "tagName", "unregisteredAttributes", "object", "boundaryClass", "formatType", "getFormatType", "elementAttributes", "name", "className", "class", "contentEditable", "contenteditable", "isEqualUntil", "a", "b", "index", "toTree", "value", "preserveWhiteSpace", "createEmpty", "append", "getLastChild", "getParent", "isText", "getText", "remove", "appendText", "onStartIndex", "onEndIndex", "placeholder", "formats", "replacements", "text", "start", "end", "formatsLength", "tree", "activeFormats", "getActiveFormats", "deepestActiveFormat", "lastCharacterFormats", "lastCharacter", "i", "character", "charAt", "shouldInsertPadding", "characterFormats", "pointer", "forEach", "format", "formatIndex", "parent", "newNode", "OBJECT_REPLACEMENT_CHARACTER", "replacement", "innerHTML", "trim", "html", "decodeURIComponent", "undefined", "ZWNBSP", "style", "toHTMLString", "value", "preserveWhiteSpace", "tree", "toTree", "createEmpty", "append", "getLastChild", "getParent", "isText", "getText", "remove", "appendText", "createChildrenHTML", "children", "length", "parent", "object", "text", "push", "index", "indexOf", "splice", "createElementHTML", "type", "attributes", "attributeString", "key", "isValidAttributeName", "escapeAttribute", "map", "child", "html", "undefined", "escapeEditableHTML", "join", "createEmptyValue", "formats", "replacements", "text", "toFormat", "tagName", "attributes", "formatType", "class", "select", "richTextStore", "getFormatTypeForClassName", "replace", "className", "trim", "getFormatTypeForBareElement", "type", "__experimentalCreatePrepareEditableTree", "__experimentalCreateOnChangeEditableValue", "name", "registeredAttributes", "unregisteredAttributes", "_attributes", "key", "contentEditable", "contenteditable", "RichTextData", "constructor", "init", "empty", "fromPlainText", "create", "fromHTMLString", "html", "fromHTMLElement", "htmlElement", "options", "preserveWhiteSpace", "element", "collapseWhiteSpace", "richTextData", "Object", "defineProperty", "value", "innerHTML", "toPlainText", "getTextContent", "toHTMLString", "originalHTML", "valueOf", "toString", "toJSON", "length", "getOwnPropertyNames", "String", "prototype", "hasOwnProperty", "args", "range", "__unstableIsEditableTree", "isEditableTree", "Array", "createElement", "document", "createFromElement", "accumulateSelection", "accumulator", "node", "parentNode", "startContainer", "startOffset", "endContainer", "endOffset", "currentLength", "start", "undefined", "nodeType", "TEXT_NODE", "childNodes", "end", "filterRange", "filter", "nodeValue", "slice", "isRoot", "clone", "cloneNode", "normalize", "from", "forEach", "i", "nodes", "newNodeValue", "test", "indexOf", "startsWith", "endsWith", "ELEMENT_NODE", "CARRIAGE_RETURN", "removeReservedCharacters", "string", "RegExp", "ZWNBSP", "OBJECT_REPLACEMENT_CHARACTER", "hasChildNodes", "index", "nodeName", "toLowerCase", "COMMENT_NODE", "hasAttribute", "getAttribute", "mergePair", "encodeURIComponent", "format", "getAttributes", "mergeFormats", "newFormats", "hasAttributes", "safeName", "isCollapsed", "start", "end", "undefined", "removeFormat", "value", "formatType", "startIndex", "start", "endIndex", "end", "formats", "activeFormats", "newFormats", "slice", "format", "find", "type", "newFormat", "filterFormats", "i", "normaliseFormats", "filter", "index", "length", "insert", "value", "valueToInsert", "startIndex", "start", "endIndex", "end", "formats", "replacements", "text", "create", "index", "length", "normaliseFormats", "slice", "concat", "slice", "value", "startIndex", "start", "endIndex", "end", "formats", "replacements", "text", "undefined", "regions", "document", "getElementsByClassName", "introText", "getElementById", "i", "length", "textContent", "setAttribute", "previousMessage", "message", "replace", "speak", "message", "ariaLive", "clear", "filterMessage", "introText", "document", "getElementById", "containerAssertive", "containerPolite", "textContent", "removeAttribute", "callback", "document", "readyState", "addEventListener", "ariaLive", "container", "document", "createElement", "id", "className", "setAttribute", "body", "appendChild", "DEFAULT_LOCALE_DATA", "plural_forms", "n", "I18N_HOOK_REGEXP", "createI18n", "initialData", "initialDomain", "hooks", "tannin", "Tannin", "listeners", "Set", "notifyListeners", "forEach", "listener", "subscribe", "callback", "add", "delete", "getLocaleData", "domain", "data", "doSetLocaleData", "pluralForms", "setLocaleData", "addLocaleData", "resetLocaleData", "dcnpgettext", "context", "single", "plural", "number", "undefined", "getFilterDomain", "__", "text", "translation", "applyFilters", "_x", "_n", "_nx", "isRTL", "hasTranslation", "key", "result", "onHookAddedOrRemoved", "hookName", "test", "addAction", "i18n", "createI18n", "undefined", "defaultHooks", "getLocaleData", "i18n", "bind", "setLocaleData", "resetLocaleData", "subscribe", "__", "_x", "_n", "_nx", "isRTL", "hasTranslation", "introText", "document", "createElement", "id", "className", "textContent", "__", "setAttribute", "body", "appendChild", "setup", "introText", "document", "getElementById", "containerAssertive", "containerPolite", "addIntroText", "addContainer", "domReady", "isRangeEqual", "a", "b", "startContainer", "startOffset", "endContainer", "endOffset", "createPathToNode", "node", "rootNode", "path", "parentNode", "i", "previousSibling", "getNodeByPath", "length", "childNodes", "shift", "offset", "append", "element", "child", "html", "undefined", "innerHTML", "ownerDocument", "createTextNode", "type", "attributes", "createComment", "createElement", "key", "setAttribute", "appendChild", "appendText", "text", "appendData", "getLastChild", "lastChild", "getParent", "isText", "nodeType", "TEXT_NODE", "getText", "nodeValue", "remove", "removeChild", "toDom", "value", "prepareEditableTree", "isEditableTree", "placeholder", "doc", "document", "startPath", "endPath", "formats", "createEmpty", "tree", "toTree", "onStartIndex", "body", "pointer", "onEndIndex", "selection", "apply", "current", "__unstableDomOnly", "applyValue", "start", "applySelection", "future", "futureChild", "firstChild", "currentChild", "isEqualNode", "nodeName", "data", "replaceChild", "currentAttributes", "futureAttributes", "ii", "name", "getAttribute", "removeAttribute", "startContainer", "startOffset", "endContainer", "endOffset", "defaultView", "getSelection", "range", "createRange", "setStart", "setEnd", "activeElement", "rangeCount", "isRangeEqual", "getRangeAt", "removeAllRanges", "addRange", "HTMLElement", "focus", "whiteSpace", "minWidth", "useDefaultStyle", "useCallback", "element", "style", "useBoundaryStyle", "record", "ref", "useRef", "activeFormats", "replacements", "start", "current", "activeReplacement", "useEffect", "length", "boundarySelector", "element", "querySelector", "ownerDocument", "defaultView", "computedStyle", "getComputedStyle", "newColor", "colord", "color", "alpha", "toRgbString", "selector", "rule", "style", "globalStyleId", "globalStyle", "getElementById", "createElement", "id", "head", "appendChild", "innerHTML", "props", "element", "onCopy", "event", "record", "current", "ownerDocument", "isCollapsed", "contains", "activeElement", "selectedRecord", "slice", "plainText", "getTextContent", "html", "toHTMLString", "value", "clipboardData", "setData", "preventDefault", "type", "execCommand", "defaultView", "addEventListener", "removeEventListener", "element", "onClick", "event", "target", "textContent", "isContentEditable", "ownerDocument", "defaultView", "selection", "getSelection", "containsNode", "range", "createRange", "nodeToSelect", "closest", "selectNode", "removeAllRanges", "addRange", "preventDefault", "onFocusIn", "relatedTarget", "contains", "tagName", "addEventListener", "removeEventListener", "DEFAULT_LOCALE_DATA", "plural_forms", "n", "I18N_HOOK_REGEXP", "createI18n", "initialData", "initialDomain", "hooks", "tannin", "Tannin", "listeners", "Set", "notifyListeners", "forEach", "listener", "subscribe", "callback", "add", "delete", "getLocaleData", "domain", "data", "doSetLocaleData", "pluralForms", "setLocaleData", "addLocaleData", "resetLocaleData", "dcnpgettext", "context", "single", "plural", "number", "undefined", "getFilterDomain", "__", "text", "translation", "applyFilters", "_x", "_n", "_nx", "isRTL", "hasTranslation", "key", "result", "onHookAddedOrRemoved", "hookName", "test", "addAction", "i18n", "createI18n", "undefined", "defaultHooks", "getLocaleData", "i18n", "bind", "setLocaleData", "resetLocaleData", "subscribe", "__", "_x", "_n", "_nx", "isRTL", "hasTranslation", "isAppleOS", "_window", "window", "platform", "navigator", "indexOf", "includes", "BACKSPACE", "LEFT", "RIGHT", "DELETE", "ALT", "CTRL", "COMMAND", "SHIFT", "capitaliseFirstCharacter", "string", "length", "toUpperCase", "charAt", "slice", "mapValues", "object", "mapFn", "Object", "fromEntries", "entries", "map", "key", "value", "modifiers", "primary", "_isApple", "COMMAND", "CTRL", "primaryShift", "SHIFT", "primaryAlt", "ALT", "secondary", "access", "ctrl", "alt", "ctrlShift", "shift", "shiftAlt", "undefined", "rawShortcut", "modifier", "character", "isAppleOS", "toLowerCase", "join", "displayShortcutList", "isApple", "replacementKeyMap", "modifierKeys", "reduce", "accumulator", "_replacementKeyMap$ke", "replacementKey", "displayShortcut", "shortcutList", "shortcutAriaLabel", "__", "_replacementKeyMap$ke2", "getEventModifiers", "event", "filter", "isKeyboardEvent", "getModifiers", "mods", "eventMods", "replacementWithShiftKeyMap", "Comma", "Backslash", "IntlRo", "IntlYen", "modsDiff", "mod", "includes", "eventModsDiff", "altKey", "String", "fromCharCode", "keyCode", "shiftKey", "code", "EMPTY_ACTIVE_FORMATS", "props", "element", "onKeyDown", "event", "keyCode", "shiftKey", "altKey", "metaKey", "ctrlKey", "LEFT", "RIGHT", "record", "applyRecord", "forceRender", "current", "text", "formats", "start", "end", "activeFormats", "currentActiveFormats", "collapsed", "isCollapsed", "ownerDocument", "defaultView", "direction", "getComputedStyle", "reverseKey", "isReverse", "length", "formatsBefore", "formatsAfter", "destination", "isIncreasing", "every", "format", "index", "newActiveFormatsLength", "_newActiveFormats", "preventDefault", "origin", "source", "newActiveFormats", "slice", "newValue", "addEventListener", "removeEventListener", "remove", "value", "startIndex", "endIndex", "insert", "create", "props", "element", "onKeyDown", "event", "keyCode", "createRecord", "handleChange", "current", "defaultPrevented", "DELETE", "BACKSPACE", "currentValue", "start", "end", "text", "length", "remove", "preventDefault", "addEventListener", "removeEventListener", "updateFormats", "value", "start", "end", "formats", "min", "Math", "max", "formatsBefore", "formatsAfter", "activeFormats", "map", "format", "index", "isFormatEqual", "length", "INSERTION_INPUT_TYPES_TO_IGNORE", "Set", "EMPTY_ACTIVE_FORMATS", "PLACEHOLDER_ATTR_NAME", "fixPlaceholderSelection", "defaultView", "selection", "getSelection", "anchorNode", "anchorOffset", "nodeType", "ELEMENT_NODE", "targetNode", "childNodes", "hasAttribute", "collapseToStart", "props", "element", "ownerDocument", "isComposing", "onInput", "event", "inputType", "record", "applyRecord", "createRecord", "handleChange", "current", "indexOf", "has", "currentValue", "start", "activeFormats", "oldActiveFormats", "change", "updateFormats", "value", "end", "formats", "handleSelectionChange", "onSelectionChange", "contentEditable", "activeElement", "removeEventListener", "text", "oldRecord", "length", "newValue", "_newActiveFormats", "undefined", "newActiveFormats", "getActiveFormats", "domOnly", "onCompositionStart", "querySelector", "remove", "onCompositionEnd", "addEventListener", "onFocus", "isSelected", "parentElement", "closest", "index", "window", "queueMicrotask", "element", "ownerDocument", "defaultView", "selection", "getSelection", "range", "getRange", "rangeCount", "getRangeAt", "onDown", "event", "type", "onCancel", "removeEventListener", "onUp", "isRangeEqual", "dispatchEvent", "Event", "addEventListener", "preventFocusCapture", "element", "ownerDocument", "defaultView", "value", "onPointerDown", "event", "defaultPrevented", "target", "contains", "getAttribute", "setAttribute", "getSelection", "removeAllRanges", "onPointerUp", "addEventListener", "removeEventListener", "allEventListeners", "copyHandler", "selectObject", "formatBoundaries", "deleteHandler", "inputAndSelection", "selectionChangeCompat", "preventFocusCapture", "useEventListeners", "props", "propsRef", "useRef", "useInsertionEffect", "current", "refEffects", "useMemo", "map", "refEffect", "useRefEffect", "element", "cleanups", "effect", "forEach", "cleanup", "useRichText", "value", "selectionStart", "selectionEnd", "placeholder", "onSelectionChange", "preserveWhiteSpace", "onChange", "__unstableDisableFormats", "disableFormats", "__unstableIsSelected", "isSelected", "__unstableDependencies", "__unstableAfterParse", "__unstableBeforeSerialize", "__unstableAddInvisibleFormats", "registry", "useRegistry", "forceRender", "useReducer", "ref", "useRef", "createRecord", "ownerDocument", "defaultView", "current", "selection", "getSelection", "range", "rangeCount", "getRangeAt", "create", "element", "__unstableIsEditableTree", "applyRecord", "newRecord", "domOnly", "apply", "prepareEditableTree", "__unstableDomOnly", "_valueRef", "recordRef", "setRecordFromProps", "RichTextData", "fromHTMLString", "empty", "text", "formats", "replacements", "Array", "length", "start", "end", "hadSelectionUpdateRef", "activeFormats", "undefined", "handleChange", "newFormats", "toHTMLString", "batch", "__unstableFormats", "__unstableText", "applyFromProps", "didMountRef", "useLayoutEffect", "activeElement", "focus", "mergedRefs", "useMergeRefs", "useDefaultStyle", "useBoundaryStyle", "record", "useEventListeners", "useRefEffect", "getValue", "getActiveFormat", "value", "formatType", "getActiveFormats", "find", "type", "getActiveObject", "start", "end", "replacements", "text", "OBJECT_REPLACEMENT_CHARACTER", "isEmpty", "text", "length", "split", "formats", "replacements", "text", "start", "end", "string", "splitAtSelection", "arguments", "nextStart", "map", "substring", "startIndex", "value", "slice", "length", "undefined", "endIndex", "before", "after", "getFormatElement", "range", "editableContentElement", "tagName", "className", "element", "startContainer", "nodeType", "TEXT_NODE", "startOffset", "length", "nextSibling", "firstChild", "ELEMENT_NODE", "parentElement", "contains", "selector", "matches", "createVirtualAnchorElement", "contextElement", "getBoundingClientRect", "getAnchor", "ownerDocument", "defaultView", "selection", "getSelection", "rangeCount", "getRangeAt", "formatElement", "useAnchor", "settings", "isActive", "anchor", "setAnchor", "useState", "wasActive", "usePrevious", "useLayoutEffect", "callback", "attach", "addEventListener", "detach", "removeEventListener", "activeElement", "logged", "Set", "isDev", "globalThis", "SCRIPT_DEBUG", "message", "logged", "has", "console", "warn", "Error", "x", "add", "_decodeTextArea", "decodeEntities", "html", "_decodeTextArea$textC", "indexOf", "undefined", "document", "implementation", "createHTMLDocument", "createElement", "innerHTML", "decoded", "textContent"]
}
