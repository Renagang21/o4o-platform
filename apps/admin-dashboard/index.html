<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>O4O Admin Dashboard</title>
    <script>
      // React 19 Compatibility - Initialize global React before any modules load
      window.__REACT_DEVTOOLS_GLOBAL_HOOK__ = window.__REACT_DEVTOOLS_GLOBAL_HOOK__ || {};
      window.__REACT_DEVTOOLS_GLOBAL_HOOK__.isDisabled = false;
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // WordPress polyfill - MUST be initialized before any WordPress modules load
      (function() {
        window.wp = window.wp || {};
        
        // Initialize hooks first (needed by other WP modules)
        const filters = {};
        const actions = {};
        
        window.wp.hooks = {
          addFilter: (hookName, namespace, callback, priority = 10) => {
            filters[hookName] = filters[hookName] || [];
            filters[hookName].push(callback);
          },
          applyFilters: (hookName, value, ...args) => {
            const callbacks = filters[hookName] || [];
            return callbacks.reduce((val, callback) => callback(val, ...args), value);
          },
          addAction: (hookName, namespace, callback, priority = 10) => {
            actions[hookName] = actions[hookName] || [];
            actions[hookName].push(callback);
          },
          doAction: (hookName, ...args) => {
            const callbacks = actions[hookName] || [];
            callbacks.forEach(callback => callback(...args));
          },
          removeFilter: () => 0,
          removeAction: () => 0,
          hasFilter: () => false,
          hasAction: () => false,
          removeAllFilters: () => 0,
          removeAllActions: () => 0,
          currentFilter: () => null,
          currentAction: () => null,
          doingFilter: () => false,
          doingAction: () => false,
          didFilter: () => 0,
          didAction: () => 0
        };
        
        console.log('[WordPress Polyfill] Hooks initialized early:', window.wp.hooks);
      })();
    </script>
    <script type="module">
      // Import React first and make it globally available
      import * as React from 'react';
      import * as ReactDOM from 'react-dom';
      
      // Make React available globally before other modules load
      window.React = React;
      window.ReactDOM = ReactDOM;
      
      // Ensure React.Children exists
      if (!React.Children) {
        console.error('React.Children not found - React 19 compatibility issue');
      }
      
      // Now load the main application
      import('/src/main.tsx');
    </script>
  </body>
</html>