import{r as e,V as o,j as a,P as r,cd as s,f as m,J as i}from"./vendor-react-40ZmJ4HC.js";import{u as d,a as p,b as t}from"./vendor-query-DJJ0FlEA.js";import{j as u,B as l,v as n,w as c,x as f,y as N,z as h,L as b,I as x,T as g,E as v}from"./page-gutenberg-CxDN_6a_.js";import{S as C}from"./page-template-editor-D1qjPzcz.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-utils-EdRAegAf.js";import"./wp-all-BeSh6B1c.js";const j=()=>{const j=d(),[F,D]=e.useState(!1),[E,V]=e.useState(null),[y,w]=e.useState({name:"",slug:"",description:"",active:!0}),{data:k=[],isLoading:S}=p({queryKey:["forum-categories"],queryFn:async()=>(await u.api.get("/forum/categories")).data.data}),q=t({mutationFn:async e=>(await u.api.post("/forum/categories",e)).data,onSuccess:()=>{o.success("카테고리가 생성되었습니다"),j.invalidateQueries({queryKey:["forum-categories"]}),L()}}),z=t({mutationFn:async({id:e,data:o})=>(await u.api.put(`/forum/categories/${e}`,o)).data,onSuccess:()=>{o.success("카테고리가 수정되었습니다"),j.invalidateQueries({queryKey:["forum-categories"]}),L()}}),K=t({mutationFn:async e=>(await u.api.delete(`/forum/categories/${e}`)).data,onSuccess:()=>{o.success("카테고리가 삭제되었습니다"),j.invalidateQueries({queryKey:["forum-categories"]})}}),$=e=>{e?(V(e),w({name:e.name,slug:e.slug,description:e.description,active:e.active})):(V(null),w({name:"",slug:"",description:"",active:!0})),D(!0)},L=()=>{D(!1),V(null),w({name:"",slug:"",description:"",active:!0})};return a.jsxDEV("div",{className:"space-y-6",children:[a.jsxDEV("div",{className:"flex items-center justify-between",children:[a.jsxDEV("div",{children:[a.jsxDEV("h2",{className:"text-xl font-bold text-modern-text-primary",children:"포럼 카테고리"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:177,columnNumber:11},void 0),a.jsxDEV("p",{className:"text-modern-text-secondary mt-1",children:"포럼 카테고리를 관리하세요."},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:178,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:176,columnNumber:9},void 0),a.jsxDEV(l,{onClick:()=>$(),children:[a.jsxDEV(r,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:181,columnNumber:11},void 0),"새 카테고리"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:180,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:175,columnNumber:7},void 0),a.jsxDEV("div",{className:"wp-card",children:a.jsxDEV("div",{className:"overflow-x-auto",children:a.jsxDEV("table",{className:"w-full",children:[a.jsxDEV("thead",{className:"bg-modern-bg-tertiary border-b border-modern-border-primary",children:a.jsxDEV("tr",{children:[a.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"순서"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:192,columnNumber:17},void 0),a.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"이름"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:195,columnNumber:17},void 0),a.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"설명"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:198,columnNumber:17},void 0),a.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"게시글 수"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:201,columnNumber:17},void 0),a.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"상태"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:204,columnNumber:17},void 0),a.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"작업"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:207,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:191,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:190,columnNumber:13},void 0),a.jsxDEV("tbody",{className:"bg-white divide-y divide-modern-border-primary",children:S?a.jsxDEV("tr",{children:a.jsxDEV("td",{colSpan:6,className:"px-6 py-12 text-center",children:a.jsxDEV("div",{className:"flex justify-center",children:a.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-modern-primary"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:217,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:216,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:215,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:214,columnNumber:17},void 0):0===k.length?a.jsxDEV("tr",{children:a.jsxDEV("td",{colSpan:6,className:"px-6 py-12 text-center text-modern-text-secondary",children:"카테고리가 없습니다."},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:223,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:222,columnNumber:17},void 0):k.map(e=>a.jsxDEV("tr",{className:"hover:bg-modern-bg-hover",children:[a.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxDEV(s,{className:"w-5 h-5 text-modern-text-tertiary cursor-move"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:231,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:230,columnNumber:21},void 0),a.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxDEV("div",{children:[a.jsxDEV("p",{className:"text-sm font-medium text-modern-text-primary",children:e.name},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:235,columnNumber:25},void 0),a.jsxDEV("p",{className:"text-xs text-modern-text-secondary",children:["/",e.slug]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:236,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:234,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:233,columnNumber:21},void 0),a.jsxDEV("td",{className:"px-6 py-4",children:a.jsxDEV("p",{className:"text-sm text-modern-text-secondary truncate max-w-xs",children:e.description||"-"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:240,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:239,columnNumber:21},void 0),a.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-modern-text-primary",children:e.postCount},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:244,columnNumber:21},void 0),a.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxDEV("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.active?"활성":"비활성"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:248,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:247,columnNumber:21},void 0),a.jsxDEV("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxDEV("div",{className:"flex items-center gap-2",children:[a.jsxDEV(l,{variant:"ghost",size:"sm",onClick:()=>$(e),children:a.jsxDEV(m,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:263,columnNumber:27},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:258,columnNumber:25},void 0),a.jsxDEV(l,{variant:"ghost",size:"sm",onClick:()=>(e=>{e.postCount>0?o.error("게시글이 있는 카테고리는 삭제할 수 없습니다"):confirm(`"${e.name}" 카테고리를 삭제하시겠습니까?`)&&K.mutate(e.id)})(e),disabled:e.postCount>0,children:a.jsxDEV(i,{className:"w-4 h-4 text-destructive"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:271,columnNumber:27},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:265,columnNumber:25},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:257,columnNumber:23},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:256,columnNumber:21},void 0)]},e.id,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:229,columnNumber:19},void 0))},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:212,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:189,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:188,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:187,columnNumber:7},void 0),a.jsxDEV(n,{open:F,onOpenChange:D,children:a.jsxDEV(c,{children:a.jsxDEV("form",{onSubmit:e=>{e.preventDefault(),y.name.trim()?E?z.mutate({id:E.id,data:y}):q.mutate(y):o.error("카테고리 이름을 입력하세요")},children:[a.jsxDEV(f,{children:[a.jsxDEV(N,{children:E?"카테고리 수정":"새 카테고리"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:288,columnNumber:15},void 0),a.jsxDEV(h,{children:"포럼 카테고리 정보를 입력하세요."},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:291,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:287,columnNumber:13},void 0),a.jsxDEV("div",{className:"space-y-4 py-4",children:[a.jsxDEV("div",{children:[a.jsxDEV(b,{htmlFor:"name",children:"이름 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:297,columnNumber:17},void 0),a.jsxDEV(x,{id:"name",value:y.name,onChange:e=>{w(o=>{return{...o,name:e.target.value,slug:E?o.slug:(a=e.target.value,a.toLowerCase().replace(/[^a-z0-9가-힣]+/g,"-").replace(/^-+|-+$/g,""))};var a})},placeholder:"예: 일반 토론",required:!0},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:298,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:296,columnNumber:15},void 0),a.jsxDEV("div",{children:[a.jsxDEV(b,{htmlFor:"slug",children:"Slug"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:313,columnNumber:17},void 0),a.jsxDEV(x,{id:"slug",value:y.slug,onChange:e=>w(o=>({...o,slug:e.target.value})),placeholder:"예: general-discussion"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:314,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:312,columnNumber:15},void 0),a.jsxDEV("div",{children:[a.jsxDEV(b,{htmlFor:"description",children:"설명"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:322,columnNumber:17},void 0),a.jsxDEV(g,{id:"description",value:y.description,onChange:e=>w(o=>({...o,description:e.target.value})),placeholder:"카테고리에 대한 설명을 입력하세요...",rows:3},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:323,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:321,columnNumber:15},void 0),a.jsxDEV("div",{className:"flex items-center justify-between",children:[a.jsxDEV("div",{children:[a.jsxDEV(b,{htmlFor:"active",children:"활성화"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:333,columnNumber:19},void 0),a.jsxDEV("p",{className:"text-sm text-modern-text-secondary",children:"비활성화 시 게시글 작성이 불가능합니다"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:334,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:332,columnNumber:17},void 0),a.jsxDEV(C,{id:"active",checked:y.active,onCheckedChange:e=>w(o=>({...o,active:e}))},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:338,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:331,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:295,columnNumber:13},void 0),a.jsxDEV(v,{children:[a.jsxDEV(l,{type:"button",variant:"outline",onClick:L,children:"취소"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:346,columnNumber:15},void 0),a.jsxDEV(l,{type:"submit",disabled:q.isPending||z.isPending,children:E?"수정":"생성"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:349,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:345,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:286,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:285,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:284,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumCategories.tsx",lineNumber:173,columnNumber:5},void 0)};export{j as default};
//# sourceMappingURL=ForumCategories-BB9fveM2.js.map
