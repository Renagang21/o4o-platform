import{s as e}from"./wp-block-editor-store-BOagVFfu.js";import{j as t,r as s}from"./vendor-react-DqgGMt48.js";import{u as o,a as c,z as l,U as i,t as n,a1 as r,a2 as a,B as d}from"./wp-block-editor-misc-Bvzg-2Jv.js";import{u}from"./wp-core-BVMytgUH.js";import{N as k,bx as m,b7 as p,d as f}from"./wp-misc-DyLrwF9p.js";import{s as h,a as w,b}from"./wp-i18n-BuBz6Sgx.js";import{a as B,s as j}from"./wp-blocks-core-65VcejHr.js";import{a9 as S}from"./wp-block-editor-utils-BmaAXcuk.js";function g(){const{getSettings:t,hasSelectedBlock:s,hasMultiSelection:l}=o(e),{clearSelectedBlock:i}=c(e),{clearBlockSelection:n}=t();return u(e=>{if(n)return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)};function t(t){(s()||l())&&t.target===e&&i()}},[s,l,i,n])}function y(e){return t.jsx("div",{ref:g(),...e})}function v(){const{clearSelectedBlock:t,multiSelect:d,selectBlock:u}=c(e),{getBlockName:m,getBlockParents:p,getBlockSelectionStart:f,getSelectedBlockClientIds:b,hasMultiSelection:j,hasSelectedBlock:g}=o(e),{getBlockType:y}=o(B);return{updateBlockSelection:s.useCallback(async(e,s,o,c)=>{if(!e?.shiftKey&&e?.keyCode!==l)return void u(s,c);e.preventDefault();const B="keydown"===e.type&&e.keyCode===l,v="keydown"===e.type&&(e.keyCode===i||e.keyCode===n||e.keyCode===r||e.keyCode===a);if(!v&&!g()&&!j())return void u(s,null);const C=b(),x=[...p(s),s];if((B||v&&!C.some(e=>x.includes(e)))&&await t(),!B){let e=f(),t=s;v&&(g()||j()||(e=s),o&&(t=o));const c=p(e),l=p(t),{start:i,end:n}=S(e,t,c,l);await d(i,n,null)}const _=b();if((e.keyCode===r||e.keyCode===a)&&_.length>1)return;const N=C.filter(e=>!_.includes(e));let M;if(1===N.length){const e=y(m(N[0]))?.title;e&&(M=h(w("%s deselected."),e))}else N.length>1&&(M=h(w("%s blocks deselected."),N.length));M&&k(M,"assertive")},[t,m,y,p,f,b,j,g,d,u])}}function C(){const{blocks:s}=o(t=>{const{getMultiSelectedBlocks:s}=t(e);return{blocks:s()}},[]),c=m(j(s),"words");return t.jsxs("div",{className:"block-editor-multi-selection-inspector__card",children:[t.jsx(d,{icon:p,showColors:!0}),t.jsxs("div",{className:"block-editor-multi-selection-inspector__card-content",children:[t.jsx("div",{className:"block-editor-multi-selection-inspector__card-title",children:h(b("%d Block","%d Blocks",s.length),s.length)}),t.jsx("div",{className:"block-editor-multi-selection-inspector__card-description",children:h(b("%d word selected.","%d words selected.",c),c)})]})]})}function x(){return f("wp.blockEditor.MultiSelectScrollIntoView",{hint:"This behaviour is now built-in.",since:"5.8"}),null}export{y as B,x as M,v as a,C as b,g as u};
