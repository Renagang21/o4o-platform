import{r as e,j as s,bf as t,a,b7 as r,V as n,bN as c,b6 as i,aX as d,dn as l,bb as m,aE as x,cm as o,aT as h}from"./vendor-react-BoWgD0Bu.js";import{b as j,B as p,I as u}from"./page-template-editor-CWJwXWLM.js";import{cy as N,cz as y,cA as f,cB as v,cJ as b}from"./wp-misc-fiKRzvVp.js";import{u as w}from"./index-Bu1ofPbL.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-CbBSyLUF.js";import"./vendor-utils-C9jLuAcl.js";import"./wp-foundation-BzBJX52f.js";import"./wp-block-editor-main-y2nlPlta.js";import"./wp-i18n-BPC8WmOV.js";import"./wp-block-editor-store-PPID3vJI.js";import"./wp-block-editor-utils-C52tDze8.js";import"./wp-components-CKWj6dcl.js";import"./vendor-socket-CMcZe9fK.js";const g=({postId:c,postType:i="signage_video",size:d="default",variant:l="outline",className:m="",onCopySuccess:x})=>{const{user:o}=w(),[h,u]=e.useState(!1),[N,y]=e.useState(!1),[f,v]=e.useState(!0);e.useEffect(()=>{(async()=>{if(o)try{const e=await async function(e){try{return(await j.api.get(`/v1/signage/check-video/${e}`)).data.exists||!1}catch(s){return!1}}(c);y(e)}catch(e){}finally{v(!1)}else v(!1)})()},[c,o]);return f?s.jsx(p,{size:d,variant:l,className:m,disabled:!0,children:s.jsx(t,{className:"w-4 h-4 animate-spin"})}):s.jsx(p,{size:d,variant:N?"default":l,className:m,onClick:async()=>{if(o)if(N)n("이미 내 목록에 있는 비디오입니다.",{icon:"📋"});else{u(!0);try{const e=await async function(e){try{return(await j.api.post("/v1/signage/copy-video",{postId:e.postId,postType:e.postType||"signage_video"})).data}catch(s){return 409===s.response?.status?{success:!1,message:"이미 내 목록에 있는 비디오입니다."}:{success:!1,message:s.response?.data?.message||"비디오 복사 중 오류가 발생했습니다."}}}({postId:c,postType:i});e.success?(y(!0),n.success("비디오가 내 목록에 추가되었습니다!"),e.newPostId&&x&&x(e.newPostId)):n.error(e.message)}catch(e){n.error("비디오 복사 중 오류가 발생했습니다.")}finally{u(!1)}}else n.error("로그인이 필요합니다.")},disabled:h||N,children:h?s.jsx(t,{className:"w-4 h-4 animate-spin"}):N?s.jsxs(s.Fragment,{children:[s.jsx(a,{className:"w-4 h-4 mr-2"}),"내 목록에 있음"]}):s.jsxs(s.Fragment,{children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"내 목록에 추가"]})})};function T(e){const s=function(e){const s=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,/youtube\.com\/v\/([^&\n?#]+)/,/youtube\.com\/watch\?.*v=([^&\n?#]+)/];for(const t of s){const s=e.match(t);if(s&&s[1])return s[1]}return null}(e);if(s)return{type:"youtube",id:s,embedUrl:`https://www.youtube.com/embed/${s}`,thumbnailUrl:`https://img.youtube.com/vi/${s}/maxresdefault.jpg`};const t=function(e){const s=[/vimeo\.com\/(\d+)/,/player\.vimeo\.com\/video\/(\d+)/];for(const t of s){const s=e.match(t);if(s&&s[1])return s[1]}return null}(e);return t?{type:"vimeo",id:t,embedUrl:`https://player.vimeo.com/video/${t}`}:{type:"unknown",id:"",embedUrl:e}}const k=()=>{const[t,a]=e.useState(""),[j,w]=e.useState(!1);return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-modern-text-primary flex items-center gap-2",children:[s.jsx(c,{className:"w-8 h-8 text-modern-primary"}),"디지털 사이니지 비디오 관리"]}),s.jsx("p",{className:"text-modern-text-secondary mt-1",children:"YouTube/Vimeo 비디오를 추가하고 디스플레이에 표시할 콘텐츠를 관리하세요."})]})}),s.jsxs(N,{children:[s.jsx(y,{children:s.jsxs(f,{className:"flex items-center gap-2",children:[s.jsx(i,{className:"w-5 h-5 text-modern-primary"}),"빠른 비디오 추가"]})}),s.jsxs(v,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(u,{type:"url",placeholder:"YouTube 또는 Vimeo URL을 입력하세요...",value:t,onChange:e=>a(e.target.value),className:"flex-1"}),s.jsxs(p,{onClick:()=>{if(t){if(w(!0),function(e){if(!e)return!1;try{return new URL(e),"unknown"!==T(e).type}catch{return!1}}(t)){const e=T(t);n.success(("youtube"===e.type?"YouTube":"Vimeo")+" 비디오가 확인되었습니다!"),a("")}else n.error("유효한 YouTube 또는 Vimeo URL을 입력해주세요.");w(!1)}else n.error("비디오 URL을 입력해주세요.")},disabled:j,children:[s.jsx(i,{className:"w-4 h-4 mr-2"}),"추가"]})]}),s.jsx("p",{className:"text-sm text-modern-text-secondary mt-2",children:"예: https://www.youtube.com/watch?v=dQw4w9WgXcQ 또는 https://vimeo.com/123456789"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(N,{children:s.jsx(v,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-modern-text-secondary",children:"내 비디오"}),s.jsx("p",{className:"text-2xl font-bold text-modern-text-primary",children:"24"}),s.jsx("p",{className:"text-xs text-modern-text-secondary mt-1",children:"총 재생시간 2시간 30분"})]}),s.jsx(d,{className:"w-8 h-8 text-modern-primary opacity-20"})]})})}),s.jsx(N,{children:s.jsx(v,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-modern-text-secondary",children:"공유된 비디오"}),s.jsx("p",{className:"text-2xl font-bold text-modern-success",children:"156"}),s.jsx("p",{className:"text-xs text-modern-text-secondary mt-1",children:"다른 사용자가 공유"})]}),s.jsx(r,{className:"w-8 h-8 text-modern-success opacity-20"})]})})}),s.jsx(N,{children:s.jsx(v,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-modern-text-secondary",children:"YouTube"}),s.jsx("p",{className:"text-2xl font-bold text-modern-warning",children:"45"}),s.jsx("p",{className:"text-xs text-modern-text-secondary mt-1",children:"플레이리스트 3개"})]}),s.jsx(l,{className:"w-8 h-8 text-modern-warning opacity-20"})]})})}),s.jsx(N,{children:s.jsx(v,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-modern-text-secondary",children:"Vimeo"}),s.jsx("p",{className:"text-2xl font-bold text-modern-accent",children:"12"}),s.jsx("p",{className:"text-xs text-modern-text-secondary mt-1",children:"프리미엄 콘텐츠"})]}),s.jsx(m,{className:"w-8 h-8 text-modern-accent opacity-20"})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(N,{children:[s.jsx(y,{children:s.jsxs(f,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"내 비디오"}),s.jsxs(p,{size:"sm",variant:"outline",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"검색"]})]})}),s.jsxs(v,{children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-4 border border-modern-border-primary rounded-lg hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-32 h-20 bg-modern-bg-tertiary rounded flex items-center justify-center flex-shrink-0",children:s.jsx(l,{className:"w-8 h-8 text-modern-text-tertiary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-modern-text-primary line-clamp-1",children:"2024 봄 신제품 프로모션"}),s.jsx("p",{className:"text-sm text-modern-text-secondary mt-1",children:"재생시간: 2:30 | YouTube"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(b,{variant:"outline",className:"text-xs",children:"프로모션"}),s.jsx("span",{className:"text-xs text-modern-text-secondary",children:"2024.03.15 추가"})]})]}),s.jsx(p,{size:"sm",variant:"ghost",children:s.jsx(m,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"p-4 border border-modern-border-primary rounded-lg hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-32 h-20 bg-modern-bg-tertiary rounded flex items-center justify-center flex-shrink-0",children:s.jsx(d,{className:"w-8 h-8 text-modern-text-tertiary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-modern-text-primary line-clamp-1",children:"브랜드 소개 영상"}),s.jsx("p",{className:"text-sm text-modern-text-secondary mt-1",children:"재생시간: 5:15 | Vimeo"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(b,{variant:"outline",className:"text-xs",children:"브랜딩"}),s.jsx("span",{className:"text-xs text-modern-text-secondary",children:"2024.02.28 추가"})]})]}),s.jsx(p,{size:"sm",variant:"ghost",children:s.jsx(m,{className:"w-4 h-4"})})]})})]}),s.jsx(p,{variant:"outline",className:"w-full mt-4",children:"전체 보기"})]})]}),s.jsxs(N,{children:[s.jsx(y,{children:s.jsxs(f,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"공유된 비디오"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(p,{size:"sm",variant:"outline",children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"필터"]})})]})}),s.jsxs(v,{children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-4 border border-modern-border-primary rounded-lg hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-32 h-20 bg-modern-bg-tertiary rounded flex items-center justify-center flex-shrink-0",children:s.jsx(l,{className:"w-8 h-8 text-modern-text-tertiary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-modern-text-primary line-clamp-1",children:"건강 관리 팁 시리즈"}),s.jsx("p",{className:"text-sm text-modern-text-secondary mt-1",children:"재생시간: 3:45 | YouTube 플레이리스트"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(b,{variant:"outline",className:"text-xs",children:"교육"}),s.jsx("span",{className:"text-xs text-modern-text-secondary",children:"by 마케팅팀"})]})]}),s.jsx(g,{postId:"video_123",size:"sm"})]})}),s.jsx("div",{className:"p-4 border border-modern-border-primary rounded-lg hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-32 h-20 bg-modern-bg-tertiary rounded flex items-center justify-center flex-shrink-0",children:s.jsx(d,{className:"w-8 h-8 text-modern-text-tertiary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-modern-text-primary line-clamp-1",children:"매장 인테리어 소개"}),s.jsx("p",{className:"text-sm text-modern-text-secondary mt-1",children:"재생시간: 1:30 | Vimeo"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(b,{variant:"outline",className:"text-xs",children:"매장소개"}),s.jsx("span",{className:"text-xs text-modern-text-secondary",children:"by 디자인팀"})]})]}),s.jsx(g,{postId:"video_124",size:"sm"})]})}),s.jsx("div",{className:"p-4 border border-modern-border-primary rounded-lg hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-32 h-20 bg-modern-bg-tertiary rounded flex items-center justify-center flex-shrink-0",children:s.jsx(l,{className:"w-8 h-8 text-modern-text-tertiary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-modern-text-primary line-clamp-1",children:"고객 후기 모음"}),s.jsx("p",{className:"text-sm text-modern-text-secondary mt-1",children:"재생시간: 4:20 | YouTube"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(b,{variant:"outline",className:"text-xs",children:"후기"}),s.jsx("span",{className:"text-xs text-modern-text-secondary",children:"by CS팀"})]})]}),s.jsx(g,{postId:"video_125",size:"sm"})]})})]}),s.jsx(p,{variant:"outline",className:"w-full mt-4",children:"더 많은 비디오 보기"})]})]})]}),s.jsxs(N,{children:[s.jsx(y,{children:s.jsx(f,{children:"사용 가이드"})}),s.jsx(v,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-modern-primary",children:[s.jsx(h,{className:"w-5 h-5"}),s.jsx("h4",{className:"font-medium",children:"비디오 추가하기"})]}),s.jsx("p",{className:"text-sm text-modern-text-secondary",children:"YouTube나 Vimeo URL을 붙여넣어 비디오를 빠르게 추가하세요. 플레이리스트 URL도 지원됩니다."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-modern-primary",children:[s.jsx(r,{className:"w-5 h-5"}),s.jsx("h4",{className:"font-medium",children:"비디오 복사하기"})]}),s.jsx("p",{className:"text-sm text-modern-text-secondary",children:"다른 사용자가 공유한 비디오를 내 목록에 복사하여 사용할 수 있습니다."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-modern-primary",children:[s.jsx(c,{className:"w-5 h-5"}),s.jsx("h4",{className:"font-medium",children:"디스플레이 설정"})]}),s.jsx("p",{className:"text-sm text-modern-text-secondary",children:"CPT와 ACF를 활용하여 디스플레이별 재생 스케줄과 설정을 관리하세요."})]})]})})]})]})};export{k as default};
