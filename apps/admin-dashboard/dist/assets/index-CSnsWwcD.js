import{r as c,j as e,X as te,q as M,cM as K,cN as ae,c as re,bZ as h,aU as T,cO as le,D as U,x as ne,Z as B,bU as L,y as ce,u as I,n as G,cc as ie,t as ee,bw as Q,as as O,cq as W,ad as Z,U as de,bF as oe,cP as V,bV as q,au as H,ay as xe,w as me,cQ as E,N as J,i as he,T as Y,bE as pe,by as ue,c6 as ge,c7 as $,a2 as je}from"./vendor-react-P__8vGRG.js";import{a as C}from"./client-e48rpZFb.js";import{U as F}from"./userApi-m_Dm3U7g.js";import{n as X}from"./page-template-editor-BTdVTS-a.js";import"./vendor-utils-dq2XMRwt.js";import"./unified-client-DYKT-pLO.js";import"./index-C0gS3Jf3.js";import"./vendor-query-CucHvDcH.js";import"./vendor-socket-DgcwqWsT.js";import"./vendor-ui-BkLtITBR.js";const z={getProducts:async()=>(await C.get("/api/v1/dropshipping/products")).data,createProduct:async s=>(await C.post("/api/v1/dropshipping/products",s)).data,updateProduct:async(s,n)=>(await C.put(`/api/v1/dropshipping/products/${s}`,n)).data,deleteProduct:async s=>(await C.delete(`/api/v1/dropshipping/products/${s}`)).data,calculateMargin:async(s,n)=>(await C.post("/api/v1/dropshipping/calculate-margin",{cost_price:s,selling_price:n})).data,initializeCPTs:async()=>(await C.post("/api/v1/dropshipping/initialize")).data,getPartners:async()=>(await C.get("/api/v1/dropshipping/partners")).data,createPartner:async s=>(await C.post("/api/v1/dropshipping/partners",s)).data,updatePartner:async(s,n)=>(await C.put(`/api/v1/dropshipping/partners/${s}`,n)).data,deletePartner:async s=>(await C.delete(`/api/v1/dropshipping/partners/${s}`)).data,getSuppliers:async()=>(await C.get("/api/v1/dropshipping/suppliers")).data,createSupplier:async s=>(await C.post("/api/v1/dropshipping/suppliers",s)).data,updateSupplier:async(s,n)=>(await C.put(`/api/v1/dropshipping/suppliers/${s}`,n)).data,deleteSupplier:async s=>(await C.delete(`/api/v1/dropshipping/suppliers/${s}`)).data,getOrders:async s=>{const n=s?`?status=${s}`:"";return(await C.get(`/api/v1/dropshipping/orders${n}`)).data},getOrder:async s=>(await C.get(`/api/v1/dropshipping/orders/${s}`)).data,createOrder:async s=>(await C.post("/api/v1/dropshipping/orders",s)).data,updateOrderStatus:async(s,n)=>(await C.patch(`/api/v1/dropshipping/orders/${s}/status`,{status:n})).data,deleteOrder:async s=>(await C.delete(`/api/v1/dropshipping/orders/${s}`)).data,getSettlements:async(s,n)=>{const l=new URLSearchParams;s&&l.append("status",s),n&&l.append("type",n);const j=l.toString();return(await C.get(`/api/v1/dropshipping/settlements${j?`?${j}`:""}`)).data},getSettlement:async s=>(await C.get(`/api/v1/dropshipping/settlements/${s}`)).data,updateSettlementStatus:async(s,n)=>(await C.patch(`/api/v1/dropshipping/settlements/${s}/status`,{status:n})).data,processSettlement:async s=>(await C.post(`/api/v1/dropshipping/settlements/${s}/process`)).data,createSettlement:async s=>(await C.post("/api/v1/dropshipping/settlements",s)).data},be=({product:s,onClose:n})=>{const[l,j]=c.useState({title:"",content:"",excerpt:"",acf:{cost_price:0,selling_price:0,margin_rate:"0",can_modify_price:!0,supplier:"",supplier_sku:"",shipping_days_min:3,shipping_days_max:7,shipping_fee:0}}),[f,p]=c.useState(!1);c.useEffect(()=>{s&&j({title:s.title||"",content:s.content||"",excerpt:s.excerpt||"",acf:{cost_price:s.acf?.cost_price||0,selling_price:s.acf?.selling_price||0,margin_rate:s.acf?.margin_rate||"0",can_modify_price:s.acf?.can_modify_price??!0,supplier:s.acf?.supplier||"",supplier_sku:s.acf?.supplier_sku||"",shipping_days_min:s.acf?.shipping_days_min||3,shipping_days_max:s.acf?.shipping_days_max||7,shipping_fee:s.acf?.shipping_fee||0}})},[s]),c.useEffect(()=>{i()},[l.acf.cost_price,l.acf.selling_price]);const i=()=>{const d=Number(l.acf.cost_price)||0,g=Number(l.acf.selling_price)||0;let b="0";g>0&&(b=((g-d)/g*100).toFixed(2)),j(_=>({..._,acf:{..._.acf,margin_rate:b}}))},N=async()=>{if(!l.title.trim()){h.error("상품명을 입력해주세요");return}p(!0);try{let d;s?d=await z.updateProduct(s.id,l):d=await z.createProduct(l),d.success&&(h.success(s?"상품이 수정되었습니다":"상품이 등록되었습니다"),n())}catch(d){console.error("Failed to save product:",d),h.error("상품 저장에 실패했습니다")}finally{p(!1)}},u=()=>{const d=parseFloat(l.acf.margin_rate);return d<10?"bg-red-50 border-red-200 text-red-900":d<20?"bg-yellow-50 border-yellow-200 text-yellow-900":"bg-green-50 border-green-200 text-green-900"},v=d=>new Intl.NumberFormat("ko-KR").format(d);return e.jsx("div",{className:"fixed inset-0 bg-gray-50 z-50 overflow-y-auto",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s?"상품 편집":"새 상품 추가"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:e.jsx(te,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"기본 정보"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상품명"}),e.jsx("input",{type:"text",value:l.title,onChange:d=>j({...l,title:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"상품명을 입력하세요"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"간단 설명"}),e.jsx("input",{type:"text",value:l.excerpt,onChange:d=>j({...l,excerpt:d.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"간단한 상품 설명"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"상세 설명"}),e.jsx("textarea",{value:l.content,onChange:d=>j({...l,content:d.target.value}),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"상품 상세 설명을 입력하세요"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),"공급자 정보"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"공급자"}),e.jsx("input",{type:"text",value:l.acf.supplier,onChange:d=>j({...l,acf:{...l.acf,supplier:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"공급자명"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"공급자 상품코드"}),e.jsx("input",{type:"text",value:l.acf.supplier_sku,onChange:d=>j({...l,acf:{...l.acf,supplier_sku:d.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"SUP-12345"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(K,{className:"h-5 w-5 mr-2"}),"배송 정보"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"최소 배송일"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:l.acf.shipping_days_min,onChange:d=>j({...l,acf:{...l.acf,shipping_days_min:parseInt(d.target.value)||0}}),className:"w-full px-3 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"1",max:"30"}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-500",children:"일"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"최대 배송일"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:l.acf.shipping_days_max,onChange:d=>j({...l,acf:{...l.acf,shipping_days_max:parseInt(d.target.value)||0}}),className:"w-full px-3 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"1",max:"30"}),e.jsx("span",{className:"absolute right-3 top-2.5 text-gray-500",children:"일"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"배송비"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"₩"}),e.jsx("input",{type:"number",value:l.acf.shipping_fee,onChange:d=>j({...l,acf:{...l.acf,shipping_fee:parseInt(d.target.value)||0}}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"0",step:"500"})]}),l.acf.shipping_fee===0&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"무료배송"})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1 space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 sticky top-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(ae,{className:"h-5 w-5 mr-2"}),"가격 정보"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"공급가"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"₩"}),e.jsx("input",{type:"number",value:l.acf.cost_price,onChange:d=>j({...l,acf:{...l.acf,cost_price:parseInt(d.target.value)||0}}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"0",step:"1000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"판매가"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-500",children:"₩"}),e.jsx("input",{type:"number",value:l.acf.selling_price,onChange:d=>j({...l,acf:{...l.acf,selling_price:parseInt(d.target.value)||0}}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"0",step:"1000"})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border ${u()}`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-medium",children:"마진율"}),e.jsxs("span",{className:"text-2xl font-bold",children:[l.acf.margin_rate,"%"]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"수익금:"}),e.jsxs("span",{className:"font-medium",children:["₩",v(l.acf.selling_price-l.acf.cost_price)]})]}),e.jsx("div",{className:"text-xs opacity-75",children:"계산식: (판매가 - 공급가) / 판매가 × 100"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"can_modify_price",checked:l.acf.can_modify_price,onChange:d=>j({...l,acf:{...l.acf,can_modify_price:d.target.checked}}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"can_modify_price",className:"text-sm text-gray-700",children:"파트너가 판매가를 수정할 수 있음"})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("button",{onClick:N,disabled:f,className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:[e.jsx(re,{className:"h-5 w-5 mr-2"}),f?"저장 중...":s?"수정하기":"등록하기"]})})]})})]})]})})},ye=()=>{const[s,n]=c.useState([]),[l,j]=c.useState(!1),[f,p]=c.useState(null),[i,N]=c.useState(!1),[u,v]=c.useState([]),[d,g]=c.useState(""),[b,_]=c.useState("");c.useEffect(()=>{D()},[]);const D=async()=>{j(!0);try{const t=await z.getProducts();t.success&&n(t.data)}catch(t){console.error("Failed to fetch products:",t),h.error("상품 목록을 불러오는데 실패했습니다")}finally{j(!1)}},y=async t=>{if(confirm("정말 삭제하시겠습니까?"))try{(await z.deleteProduct(t)).success&&(h.success("상품이 삭제되었습니다"),D())}catch(x){console.error("Failed to delete product:",x),h.error("상품 삭제에 실패했습니다")}},a=async()=>{if(u.length===0){h.error("삭제할 항목을 선택해주세요");return}if(confirm(`${u.length}개 상품을 삭제하시겠습니까?`))try{await Promise.all(u.map(t=>z.deleteProduct(t))),h.success("선택한 상품이 삭제되었습니다"),v([]),D()}catch(t){console.error("Failed to bulk delete:",t),h.error("일괄 삭제에 실패했습니다")}},r=t=>{v(x=>x.includes(t)?x.filter(A=>A!==t):[...x,t])},w=()=>{u.length===s.length?v([]):v(s.map(t=>t.id))},S=t=>{p(t),N(!0)},o=()=>{p(null),N(!0)},k=()=>{N(!1),p(null),D()},P=t=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(t),m=t=>{const x=parseFloat(t);return x<10?"text-red-600":x<20?"text-yellow-600":"text-green-600"};return i?e.jsx(be,{product:f,onClose:k}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-normal text-gray-900",children:"상품"}),e.jsx("button",{onClick:o,className:"px-3 py-1 bg-wordpress-blue text-white text-sm rounded hover:bg-wordpress-blue-hover transition",children:"새로 추가"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"전체 상품"}),e.jsx("p",{className:"text-2xl font-bold",children:s.length})]}),e.jsx(M,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"평균 마진율"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.length>0?(s.reduce((t,x)=>t+parseFloat(x.acf.margin_rate||"0"),0)/s.length).toFixed(1):0,"%"]})]}),e.jsx(T,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"최고 마진 상품"}),e.jsxs("p",{className:"text-lg font-bold",children:[s.length>0?Math.max(...s.map(t=>parseFloat(t.acf.margin_rate||"0"))).toFixed(1):0,"%"]})]}),e.jsx(le,{className:"h-8 w-8 text-purple-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"최저 마진 상품"}),e.jsxs("p",{className:"text-lg font-bold",children:[s.length>0?Math.min(...s.map(t=>parseFloat(t.acf.margin_rate||"0"))).toFixed(1):0,"%"]})]}),e.jsx(U,{className:"h-8 w-8 text-yellow-400"})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-t-lg p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-3 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"일괄 작업"}),e.jsx("option",{value:"delete",children:"삭제"})]}),e.jsx("button",{onClick:a,className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"적용"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("select",{className:"px-3 py-1 border border-gray-300 rounded text-sm",value:d,onChange:t=>g(t.target.value),children:e.jsx("option",{value:"",children:"모든 공급자"})}),e.jsxs("select",{className:"px-3 py-1 border border-gray-300 rounded text-sm",value:b,onChange:t=>_(t.target.value),children:[e.jsx("option",{value:"",children:"모든 마진율"}),e.jsx("option",{value:"low",children:"낮은 마진 (< 10%)"}),e.jsx("option",{value:"medium",children:"보통 마진 (10-20%)"}),e.jsx("option",{value:"high",children:"높은 마진 (> 20%)"})]}),e.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"필터"})]})]}),e.jsx("div",{className:"bg-white border-x border-b border-gray-300 rounded-b-lg",children:e.jsxs("table",{className:"w-full wp-list-table widefat fixed striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"manage-column check-column",children:e.jsx("input",{type:"checkbox",onChange:w,checked:u.length===s.length&&s.length!==0})}),e.jsx("th",{className:"manage-column column-title column-primary",children:e.jsx("span",{children:"상품명"})}),e.jsx("th",{className:"manage-column",children:"공급가"}),e.jsx("th",{className:"manage-column",children:"판매가"}),e.jsx("th",{className:"manage-column",children:"마진율"}),e.jsx("th",{className:"manage-column",children:"공급자 SKU"}),e.jsx("th",{className:"manage-column",children:"배송"}),e.jsx("th",{className:"manage-column",children:"날짜"})]})}),e.jsx("tbody",{children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4",children:"로딩중..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4",children:"상품이 없습니다"})}):s.map(t=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"check-column",children:e.jsx("input",{type:"checkbox",checked:u.includes(t.id),onChange:()=>r(t.id)})}),e.jsxs("td",{className:"title column-title column-primary page-title",children:[e.jsx("strong",{children:e.jsx("a",{href:"#",onClick:x=>{x.preventDefault(),S(t)},className:"row-title",children:t.title})}),t.excerpt&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.excerpt.substring(0,50),"..."]}),e.jsxs("div",{className:"row-actions",children:[e.jsx("span",{className:"edit",children:e.jsx("a",{href:"#",onClick:x=>{x.preventDefault(),S(t)},children:"편집"})})," | ",e.jsx("span",{className:"trash",children:e.jsx("a",{href:"#",onClick:x=>{x.preventDefault(),y(t.id)},className:"submitdelete",children:"휴지통"})})," | ",e.jsx("span",{className:"view",children:e.jsx("a",{href:"#",children:"보기"})})]})]}),e.jsx("td",{children:P(t.acf.cost_price||0)}),e.jsx("td",{children:P(t.acf.selling_price||0)}),e.jsx("td",{children:e.jsxs("span",{className:`text-sm font-medium ${m(t.acf.margin_rate||"0")}`,children:[t.acf.margin_rate||"0","%"]})}),e.jsx("td",{children:e.jsx("code",{className:"text-sm",children:t.acf.supplier_sku||"-"})}),e.jsx("td",{children:e.jsxs("span",{className:"text-sm",children:[t.acf.shipping_days_min||3,"-",t.acf.shipping_days_max||7,"일",t.acf.shipping_fee===0&&e.jsx("span",{className:"text-green-600",children:" 무료"})]})}),e.jsx("td",{className:"date column-date",children:e.jsx("abbr",{title:new Date(t.createdAt).toLocaleString("ko-KR"),children:new Date(t.createdAt).toLocaleDateString("ko-KR")})})]},t.id))})]})})]})},Ne=()=>{const[s,n]=c.useState([]),[l,j]=c.useState(!1),[f,p]=c.useState(""),[i,N]=c.useState(null),[u,v]=c.useState(!1);c.useEffect(()=>{d()},[f]);const d=async()=>{j(!0);try{const r=await z.getOrders(f);r.success&&n(r.data)}catch{h.error("주문 목록을 불러오는데 실패했습니다")}finally{j(!1)}},g=async(r,w)=>{try{(await z.updateOrderStatus(r,w)).success&&(h.success("주문 상태가 업데이트되었습니다"),d())}catch{h.error("주문 상태 업데이트에 실패했습니다")}},b=r=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(r),_=r=>r==="paid"?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),"결제완료"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(B,{className:"w-3 h-3 mr-1"}),"미결제"]}),D=r=>{const S={card:{color:"bg-blue-100 text-blue-800",text:"카드"},cash:{color:"bg-gray-100 text-gray-800",text:"현금"},bank_transfer:{color:"bg-purple-100 text-purple-800",text:"계좌이체"},mobile_payment:{color:"bg-yellow-100 text-yellow-800",text:"간편결제"},credit_card:{color:"bg-indigo-100 text-indigo-800",text:"신용카드"}}[r]||{color:"bg-gray-100 text-gray-800",text:r};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.color}`,children:S.text})},y=r=>{const w={pending:{color:"bg-yellow-100 text-yellow-800",icon:B,text:"대기중"},processing:{color:"bg-blue-100 text-blue-800",icon:M,text:"처리중"},shipped:{color:"bg-purple-100 text-purple-800",icon:K,text:"배송중"},completed:{color:"bg-green-100 text-green-800",icon:L,text:"완료"},cancelled:{color:"bg-red-100 text-red-800",icon:B,text:"취소됨"}},S=w[r]||w.pending,o=S.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.color}`,children:[e.jsx(o,{className:"w-3 h-3 mr-1"}),S.text]})},a=r=>{N(r),v(!0)};return u&&i?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-normal text-gray-900",children:["주문 상세 #",i.id]}),e.jsx("button",{onClick:()=>{v(!1),N(null)},className:"px-4 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"목록으로"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"주문 상품"}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left pb-2",children:"상품명"}),e.jsx("th",{className:"text-center pb-2",children:"판매자"}),e.jsx("th",{className:"text-center pb-2",children:"수량"}),e.jsx("th",{className:"text-right pb-2",children:"가격"}),e.jsx("th",{className:"text-right pb-2",children:"소계"})]})}),e.jsx("tbody",{children:i.meta_data.items?.map((r,w)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-3",children:r.product_name}),e.jsx("td",{className:"text-center py-3 text-sm text-gray-600",children:r.seller_name}),e.jsx("td",{className:"text-center py-3",children:r.quantity}),e.jsx("td",{className:"text-right py-3",children:b(r.price)}),e.jsx("td",{className:"text-right py-3 font-medium",children:b(r.price*r.quantity)})]},w))}),e.jsxs("tfoot",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-right py-2",children:"상품 합계:"}),e.jsx("td",{className:"text-right py-2 font-medium",children:b(i.meta_data.subtotal)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"text-right py-2",children:"배송비:"}),e.jsx("td",{className:"text-right py-2",children:b(i.meta_data.shipping_fee)})]}),e.jsxs("tr",{className:"text-lg font-bold",children:[e.jsx("td",{colSpan:4,className:"text-right py-2",children:"총 금액:"}),e.jsx("td",{className:"text-right py-2 text-blue-600",children:b(i.meta_data.total)})]})]})]})]}),i.meta_data.shipping_address&&e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"배송 정보"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{children:i.meta_data.shipping_address.street}),e.jsxs("p",{children:[i.meta_data.shipping_address.city,", ",i.meta_data.shipping_address.state]}),e.jsxs("p",{children:[i.meta_data.shipping_address.zip,", ",i.meta_data.shipping_address.country]}),i.meta_data.tracking_number&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded",children:e.jsxs("p",{className:"font-medium",children:["운송장 번호: ",i.meta_data.tracking_number]})})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"주문 정보"}),e.jsxs("dl",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"주문 상태"}),e.jsx("dd",{className:"mt-1",children:y(i.meta_data.status)})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"결제 상태"}),e.jsx("dd",{className:"mt-1",children:_(i.meta_data.payment_status||"unpaid")})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"주문일"}),e.jsx("dd",{children:new Date(i.createdAt).toLocaleString("ko-KR")})]}),i.meta_data.payment_date&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"결제일"}),e.jsx("dd",{children:new Date(i.meta_data.payment_date).toLocaleString("ko-KR")})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"결제 정보"}),e.jsxs("dl",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"결제 방법"}),e.jsx("dd",{className:"mt-1",children:D(i.meta_data.payment_method)})]}),i.meta_data.transaction_id&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"거래번호"}),e.jsx("dd",{className:"font-mono text-xs",children:i.meta_data.transaction_id})]}),i.meta_data.card_last_four&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"카드정보"}),e.jsxs("dd",{children:[i.meta_data.card_type," ****",i.meta_data.card_last_four]})]}),i.meta_data.cash_receipt_number&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"현금영수증"}),e.jsx("dd",{className:"font-mono text-xs",children:i.meta_data.cash_receipt_number})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"고객 정보"}),e.jsxs("dl",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"이름"}),e.jsx("dd",{className:"font-medium",children:i.meta_data.customer_name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"이메일"}),e.jsx("dd",{children:i.meta_data.customer_email})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mt-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"상태 변경"}),e.jsxs("select",{value:i.meta_data.status,onChange:r=>g(i.id,r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded",children:[e.jsx("option",{value:"pending",children:"대기중"}),e.jsx("option",{value:"processing",children:"처리중"}),e.jsx("option",{value:"shipped",children:"배송중"}),e.jsx("option",{value:"completed",children:"완료"}),e.jsx("option",{value:"cancelled",children:"취소됨"})]})]})]})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-normal text-gray-900",children:"주문 관리"}),e.jsx("button",{onClick:d,className:"px-3 py-1 bg-wordpress-blue text-white text-sm rounded hover:bg-wordpress-blue-hover transition",children:"새로고침"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"전체 주문"}),e.jsx("p",{className:"text-2xl font-bold",children:s.length})]}),e.jsx(ne,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"결제완료"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.filter(r=>r.meta_data.payment_status==="paid").length})]}),e.jsx(U,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"미결제"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.filter(r=>r.meta_data.payment_status!=="paid").length})]}),e.jsx(B,{className:"h-8 w-8 text-red-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"배송중"}),e.jsx("p",{className:"text-2xl font-bold",children:s.filter(r=>r.meta_data.status==="shipped").length})]}),e.jsx(K,{className:"h-8 w-8 text-purple-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"완료됨"}),e.jsx("p",{className:"text-2xl font-bold",children:s.filter(r=>r.meta_data.status==="completed").length})]}),e.jsx(L,{className:"h-8 w-8 text-green-400"})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-t-lg p-3 flex justify-between items-center",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{className:"px-3 py-1 border border-gray-300 rounded text-sm",value:f,onChange:r=>p(r.target.value),children:[e.jsx("option",{value:"",children:"모든 상태"}),e.jsx("option",{value:"pending",children:"대기중"}),e.jsx("option",{value:"processing",children:"처리중"}),e.jsx("option",{value:"shipped",children:"배송중"}),e.jsx("option",{value:"completed",children:"완료"}),e.jsx("option",{value:"cancelled",children:"취소됨"})]})}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",s.length,"개 주문"]})]}),e.jsx("div",{className:"bg-white border-x border-b border-gray-300 rounded-b-lg",children:e.jsxs("table",{className:"w-full wp-list-table widefat fixed striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"manage-column column-title column-primary",children:"주문번호"}),e.jsx("th",{className:"manage-column",children:"고객"}),e.jsx("th",{className:"manage-column",children:"상품수"}),e.jsx("th",{className:"manage-column",children:"금액"}),e.jsx("th",{className:"manage-column",children:"결제상태"}),e.jsx("th",{className:"manage-column",children:"결제방법"}),e.jsx("th",{className:"manage-column",children:"배송상태"}),e.jsx("th",{className:"manage-column",children:"주문일"})]})}),e.jsx("tbody",{children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4",children:"로딩중..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4",children:"주문이 없습니다"})}):s?.map(r=>e.jsxs("tr",{children:[e.jsxs("td",{className:"title column-title column-primary page-title",children:[e.jsx("strong",{children:e.jsxs("a",{href:"#",onClick:w=>{w.preventDefault(),a(r)},className:"row-title",children:["#",r.id]})}),e.jsx("div",{className:"row-actions",children:e.jsx("span",{className:"view",children:e.jsx("a",{href:"#",onClick:w=>{w.preventDefault(),a(r)},children:"상세보기"})})})]}),e.jsx("td",{children:r.meta_data.customer_name}),e.jsx("td",{className:"text-center",children:r.meta_data.items.length}),e.jsx("td",{children:b(r.meta_data.total)}),e.jsx("td",{children:_(r.meta_data.payment_status||"unpaid")}),e.jsx("td",{children:D(r.meta_data.payment_method)}),e.jsx("td",{children:y(r.meta_data.status)}),e.jsx("td",{className:"date column-date",children:e.jsx("abbr",{title:new Date(r.createdAt).toLocaleString("ko-KR"),children:new Date(r.createdAt).toLocaleDateString("ko-KR")})})]},r.id))})]})})]})},fe=()=>{const[s,n]=c.useState([]),[l,j]=c.useState(!1),[f,p]=c.useState(""),[i,N]=c.useState(""),[u,v]=c.useState(null),[d,g]=c.useState(!1);c.useEffect(()=>{b()},[f,i]);const b=async()=>{j(!0);try{const o=await z.getSettlements(f,i);o.success&&n(o.data)}catch{h.error("정산 목록을 불러오는데 실패했습니다")}finally{j(!1)}},_=async(o,k)=>{try{(await z.updateSettlementStatus(o,k)).success&&(h.success("정산 상태가 업데이트되었습니다"),b())}catch{h.error("정산 상태 업데이트에 실패했습니다")}},D=async o=>{if(confirm("정산을 처리하시겠습니까?"))try{(await z.processSettlement(o)).success&&(h.success("정산이 처리되었습니다"),b())}catch{h.error("정산 처리에 실패했습니다")}},y=o=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(o),a=o=>{const k={pending:{color:"bg-yellow-100 text-yellow-800",icon:B,text:"대기중"},settled:{color:"bg-green-100 text-green-800",icon:L,text:"정산완료"},hold:{color:"bg-red-100 text-red-800",icon:B,text:"보류"}},P=k[o]||k.pending,m=P.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P.color}`,children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),P.text]})},r=o=>o==="partner"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"파트너"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"판매자"}),w=o=>{v(o),g(!0)},S={total:s.length,totalAmount:s.reduce((o,k)=>o+(k.meta_data.settlement_amount||0),0),totalCommission:s.reduce((o,k)=>o+(k.meta_data.commission_amount||0),0),pending:s.filter(o=>o.meta_data.settlement_status==="pending").length,settled:s.filter(o=>o.meta_data.settlement_status==="settled").length,hold:s.filter(o=>o.meta_data.settlement_status==="hold").length};return d&&u?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("h1",{className:"text-2xl font-normal text-gray-900",children:["정산 상세 - ",u.title]}),e.jsx("button",{onClick:()=>{g(!1),v(null)},className:"px-4 py-2 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"목록으로"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"정산 정보"}),e.jsxs("dl",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"정산 유형"}),e.jsx("dd",{className:"mt-1",children:r(u.meta_data.settlement_type||"seller")})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"정산 상태"}),e.jsx("dd",{className:"mt-1",children:a(u.meta_data.settlement_status)})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:u.meta_data.settlement_type==="partner"?"파트너명":"판매자명"}),e.jsx("dd",{className:"font-medium",children:u.meta_data.seller_name||u.meta_data.partner_name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"수수료율"}),e.jsxs("dd",{children:[u.meta_data.commission_rate,"%"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"주문 금액"}),e.jsx("dd",{className:"font-medium",children:y(u.meta_data.order_amount||u.meta_data.total_sales||0)})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"수수료"}),e.jsx("dd",{className:"text-red-600",children:y(u.meta_data.commission_amount)})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"정산 금액"}),e.jsx("dd",{className:"text-lg font-bold text-blue-600",children:y(u.meta_data.settlement_amount)})]}),u.meta_data.settlement_date&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"정산일"}),e.jsx("dd",{children:new Date(u.meta_data.settlement_date).toLocaleDateString("ko-KR")})]})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"계좌 정보"}),e.jsxs("dl",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"은행명"}),e.jsx("dd",{className:"font-medium",children:u.meta_data.bank_name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"계좌번호"}),e.jsx("dd",{className:"font-mono",children:u.meta_data.account_number})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-gray-600",children:"예금주"}),e.jsx("dd",{children:u.meta_data.account_holder})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium mb-4",children:"정산 처리"}),u.meta_data.settlement_status==="pending"&&e.jsx("button",{onClick:()=>D(u.id),className:"w-full px-4 py-2 bg-wordpress-blue text-white rounded hover:bg-wordpress-blue-hover",children:"정산 처리하기"}),u.meta_data.settlement_status==="settled"&&e.jsxs("div",{className:"text-center text-green-600",children:[e.jsx(L,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{children:"정산 완료됨"})]}),u.meta_data.settlement_status==="hold"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-red-600 mb-3",children:"보류 상태입니다"}),e.jsx("button",{onClick:()=>_(u.id,"pending"),className:"w-full px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600",children:"보류 해제"})]})]})]})]})]}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-normal text-gray-900",children:"정산 관리"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:b,className:"px-3 py-1 bg-wordpress-blue text-white text-sm rounded hover:bg-wordpress-blue-hover transition",children:"새로고침"}),e.jsx("button",{className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition",children:"일괄 정산"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"전체 정산"}),e.jsx("p",{className:"text-2xl font-bold",children:S.total})]}),e.jsx(U,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"정산 금액"}),e.jsx("p",{className:"text-xl font-bold",children:y(S.totalAmount)})]}),e.jsx(T,{className:"h-8 w-8 text-blue-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"대기중"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:S.pending})]}),e.jsx(B,{className:"h-8 w-8 text-yellow-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"정산완료"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:S.settled})]}),e.jsx(L,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"총 수수료"}),e.jsx("p",{className:"text-xl font-bold",children:y(S.totalCommission)})]}),e.jsx(ce,{className:"h-8 w-8 text-purple-400"})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-t-lg p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-3 py-1 border border-gray-300 rounded text-sm",value:i,onChange:o=>N(o.target.value),children:[e.jsx("option",{value:"",children:"모든 유형"}),e.jsx("option",{value:"seller",children:"판매자"}),e.jsx("option",{value:"partner",children:"파트너"})]}),e.jsxs("select",{className:"px-3 py-1 border border-gray-300 rounded text-sm",value:f,onChange:o=>p(o.target.value),children:[e.jsx("option",{value:"",children:"모든 상태"}),e.jsx("option",{value:"pending",children:"대기중"}),e.jsx("option",{value:"settled",children:"정산완료"}),e.jsx("option",{value:"hold",children:"보류"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["총 ",S.total,"개 정산"]})]}),e.jsx("div",{className:"bg-white border-x border-b border-gray-300 rounded-b-lg",children:e.jsxs("table",{className:"w-full wp-list-table widefat fixed striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"manage-column column-title column-primary",children:"정산번호"}),e.jsx("th",{className:"manage-column",children:"유형"}),e.jsx("th",{className:"manage-column",children:"판매자/파트너"}),e.jsx("th",{className:"manage-column",children:"주문금액"}),e.jsx("th",{className:"manage-column",children:"수수료율"}),e.jsx("th",{className:"manage-column",children:"수수료"}),e.jsx("th",{className:"manage-column",children:"정산금액"}),e.jsx("th",{className:"manage-column",children:"은행"}),e.jsx("th",{className:"manage-column",children:"상태"}),e.jsx("th",{className:"manage-column",children:"정산일"})]})}),e.jsx("tbody",{children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center py-4",children:"로딩중..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"text-center py-4",children:"정산 내역이 없습니다"})}):s?.map(o=>e.jsxs("tr",{children:[e.jsxs("td",{className:"title column-title column-primary page-title",children:[e.jsx("strong",{children:e.jsx("a",{href:"#",onClick:k=>{k.preventDefault(),w(o)},className:"row-title",children:o.title})}),e.jsxs("div",{className:"row-actions",children:[e.jsx("span",{className:"view",children:e.jsx("a",{href:"#",onClick:k=>{k.preventDefault(),w(o)},children:"상세보기"})}),o.meta_data.settlement_status==="pending"&&e.jsxs(e.Fragment,{children:[" | ",e.jsx("span",{className:"edit",children:e.jsx("a",{href:"#",onClick:k=>{k.preventDefault(),D(o.id)},children:"정산처리"})})]})]})]}),e.jsx("td",{children:r(o.meta_data.settlement_type||"seller")}),e.jsx("td",{children:o.meta_data.seller_name||o.meta_data.partner_name}),e.jsx("td",{children:y(o.meta_data.order_amount||o.meta_data.total_sales||0)}),e.jsxs("td",{className:"text-center",children:[o.meta_data.commission_rate,"%"]}),e.jsx("td",{className:"text-red-600",children:y(o.meta_data.commission_amount)}),e.jsx("td",{className:"font-medium",children:y(o.meta_data.settlement_amount)}),e.jsx("td",{className:"text-sm",children:o.meta_data.bank_name}),e.jsx("td",{children:a(o.meta_data.settlement_status)}),e.jsx("td",{className:"date column-date",children:o.meta_data.settlement_date?e.jsx("abbr",{title:new Date(o.meta_data.settlement_date).toLocaleString("ko-KR"),children:new Date(o.meta_data.settlement_date).toLocaleDateString("ko-KR")}):"-"})]},o.id))})]})})]})},ve=()=>{const s=I(),[n,l]=c.useState([]),[j,f]=c.useState(!1),[p,i]=c.useState(1),[N,u]=c.useState(1),[v,d]=c.useState({total:0,active:0,pending:0,totalSales:0}),[g,b]=c.useState(new Set),[_,D]=c.useState("all"),[y,a]=c.useState("");c.useEffect(()=>{r()},[p,_,y]);const r=async()=>{f(!0);try{const t={role:"seller"};_!=="all"&&(t.status=_),y&&(t.q=y);const x=await F.getUsers(p,20,t),A=Array.isArray(x?.data)?x.data:[];l(A),u(Math.ceil((x?.total||0)/20)),d({total:x?.total||0,active:Array.isArray(A)?A.filter(R=>R.status==="active").length:0,pending:Array.isArray(A)?A.filter(R=>R.status==="pending").length:0,totalSales:0})}catch(t){console.error("Failed to fetch sellers:",t),h.error("판매자 목록을 불러오는데 실패했습니다"),l([]),d({total:0,active:0,pending:0,totalSales:0})}finally{f(!1)}},w=async t=>{if(confirm("정말 이 판매자를 삭제하시겠습니까?"))try{await F.deleteUser(t),h.success("판매자가 삭제되었습니다"),r()}catch(x){console.error("Failed to delete seller:",x),h.error("판매자 삭제에 실패했습니다")}},S=async()=>{if(g.size===0){h.error("삭제할 판매자를 선택해주세요");return}if(confirm(`선택한 ${g.size}명의 판매자를 삭제하시겠습니까?`))try{await Promise.all(Array.from(g).map(t=>F.deleteUser(t))),h.success("선택한 판매자가 삭제되었습니다"),b(new Set),r()}catch(t){console.error("Failed to bulk delete:",t),h.error("일괄 삭제에 실패했습니다")}},o=async t=>{try{await F.approveUser(t,"판매자 승인"),h.success("판매자가 승인되었습니다"),r()}catch(x){console.error("Failed to approve seller:",x),h.error("판매자 승인에 실패했습니다")}},k=t=>{const x=new Set(g);x.has(t)?x.delete(t):x.add(t),b(x)},P=()=>{g.size===n.length?b(new Set):b(new Set(n.map(t=>t.id)))},m=t=>{const x=["beginner","intermediate","expert","master"],A=x[Math.floor(Math.random()*x.length)],R={beginner:"bg-green-100 text-green-800",intermediate:"bg-blue-100 text-blue-800",expert:"bg-purple-100 text-purple-800",master:"bg-red-100 text-red-800"},se={beginner:"초급",intermediate:"중급",expert:"전문가",master:"마스터"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R[A]}`,children:se[A]})};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"판매자 관리"}),e.jsx("p",{className:"text-gray-600",children:"드롭쉬핑 판매자 목록 및 관리"})]}),e.jsxs("button",{onClick:()=>s("/users/new?role=seller"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(G,{className:"w-4 h-4"}),"새 판매자 추가"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"전체 판매자"}),e.jsx("p",{className:"text-2xl font-bold",children:v.total})]}),e.jsx(ie,{className:"w-8 h-8 text-blue-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"활성 판매자"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.active})]}),e.jsx(T,{className:"w-8 h-8 text-green-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"승인 대기"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.pending})]}),e.jsx(ee,{className:"w-8 h-8 text-yellow-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"이번 달 매출"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₩",v.totalSales.toLocaleString()]})]}),e.jsx(U,{className:"w-8 h-8 text-purple-600 opacity-50"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:"판매자 검색...",className:"flex-1 min-w-[200px] px-4 py-2 border rounded-lg",value:y,onChange:t=>a(t.target.value)}),e.jsxs("select",{className:"px-4 py-2 border rounded-lg",value:_,onChange:t=>D(t.target.value),children:[e.jsx("option",{value:"all",children:"전체 상태"}),e.jsx("option",{value:"active",children:"활성"}),e.jsx("option",{value:"pending",children:"승인 대기"})]}),g.size>0&&e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:["선택 삭제 (",g.size,")"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:g.size===n.length&&n.length>0,onChange:P,className:"rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"판매자 정보"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등급"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가입일"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8 text-gray-500",children:"판매자가 없습니다"})}):n.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:g.has(t.id),onChange:()=>k(t.id),className:"rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})}),e.jsx("td",{className:"px-6 py-4",children:m()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="active"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status==="active"?"활성":t.status==="pending"?"승인 대기":t.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"flex items-center gap-4",children:t.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),t.phone]})})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3"}),X(t.createdAt)]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[t.status==="pending"?e.jsx("button",{onClick:()=>o(t.id),className:"text-green-600 hover:text-green-900",children:"승인"}):e.jsx("button",{onClick:()=>s(`/users/${t.id}`),className:"text-blue-600 hover:text-blue-900",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(t.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Z,{className:"w-4 h-4"})})]})})]},t.id))})]})}),N>1&&e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>i(Math.max(1,p-1)),disabled:p===1,className:"px-4 py-2 border rounded-lg disabled:opacity-50",children:"이전"}),e.jsxs("span",{className:"px-4 py-2",children:[p," / ",N]}),e.jsx("button",{onClick:()=>i(Math.min(N,p+1)),disabled:p===N,className:"px-4 py-2 border rounded-lg disabled:opacity-50",children:"다음"})]})]})},we=()=>{const s=I(),[n,l]=c.useState([]),[j,f]=c.useState(!1),[p,i]=c.useState(1),[N,u]=c.useState(1),[v,d]=c.useState({total:0,active:0,pending:0,totalCommission:0}),[g,b]=c.useState(new Set),[_,D]=c.useState("all"),[y,a]=c.useState("");c.useEffect(()=>{r()},[p,_,y]);const r=async()=>{f(!0);try{const t={role:"partner"};_!=="all"&&(t.status=_),y&&(t.q=y);const x=await F.getUsers(p,20,t),A=Array.isArray(x?.data)?x.data:[];l(A),u(Math.ceil((x?.total||0)/20)),d({total:x?.total||0,active:Array.isArray(A)?A.filter(R=>R.status==="active").length:0,pending:Array.isArray(A)?A.filter(R=>R.status==="pending").length:0,totalCommission:0})}catch(t){console.error("Failed to fetch partners:",t),h.error("파트너 목록을 불러오는데 실패했습니다"),l([]),d({total:0,active:0,pending:0,totalCommission:0})}finally{f(!1)}},w=async t=>{if(confirm("정말 이 파트너를 삭제하시겠습니까?"))try{await F.deleteUser(t),h.success("파트너가 삭제되었습니다"),r()}catch(x){console.error("Failed to delete partner:",x),h.error("파트너 삭제에 실패했습니다")}},S=async()=>{if(g.size===0){h.error("삭제할 파트너를 선택해주세요");return}if(confirm(`선택한 ${g.size}명의 파트너를 삭제하시겠습니까?`))try{await Promise.all(Array.from(g).map(t=>F.deleteUser(t))),h.success("선택한 파트너가 삭제되었습니다"),b(new Set),r()}catch(t){console.error("Failed to bulk delete:",t),h.error("일괄 삭제에 실패했습니다")}},o=async t=>{try{await F.approveUser(t,"파트너 승인"),h.success("파트너가 승인되었습니다"),r()}catch(x){console.error("Failed to approve partner:",x),h.error("파트너 승인에 실패했습니다")}},k=t=>{const x=new Set(g);x.has(t)?x.delete(t):x.add(t),b(x)},P=()=>{g.size===n.length?b(new Set):b(new Set(n.map(t=>t.id)))},m=t=>{const x=["bronze","silver","gold","platinum"],A=x[Math.floor(Math.random()*x.length)],R={bronze:"bg-orange-100 text-orange-800",silver:"bg-gray-100 text-gray-800",gold:"bg-yellow-100 text-yellow-800",platinum:"bg-purple-100 text-purple-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R[A]}`,children:A.toUpperCase()})};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"파트너 관리"}),e.jsx("p",{className:"text-gray-600",children:"드롭쉬핑 파트너 목록 및 관리"})]}),e.jsxs("button",{onClick:()=>s("/users/new?role=partner"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(G,{className:"w-4 h-4"}),"새 파트너 추가"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"전체 파트너"}),e.jsx("p",{className:"text-2xl font-bold",children:v.total})]}),e.jsx(de,{className:"w-8 h-8 text-blue-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"활성 파트너"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.active})]}),e.jsx(oe,{className:"w-8 h-8 text-green-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"승인 대기"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.pending})]}),e.jsx(T,{className:"w-8 h-8 text-yellow-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"이번 달 수수료"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₩",v.totalCommission.toLocaleString()]})]}),e.jsx(U,{className:"w-8 h-8 text-purple-600 opacity-50"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:"파트너 검색...",className:"flex-1 min-w-[200px] px-4 py-2 border rounded-lg",value:y,onChange:t=>a(t.target.value)}),e.jsxs("select",{className:"px-4 py-2 border rounded-lg",value:_,onChange:t=>D(t.target.value),children:[e.jsx("option",{value:"all",children:"전체 상태"}),e.jsx("option",{value:"active",children:"활성"}),e.jsx("option",{value:"pending",children:"승인 대기"})]}),g.size>0&&e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:["선택 삭제 (",g.size,")"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:g.size===n.length&&n.length>0,onChange:P,className:"rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"파트너 정보"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등급"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가입일"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8 text-gray-500",children:"파트너가 없습니다"})}):n.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:g.has(t.id),onChange:()=>k(t.id),className:"rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})}),e.jsx("td",{className:"px-6 py-4",children:m()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="active"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status==="active"?"활성":t.status==="pending"?"승인 대기":t.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"flex items-center gap-4",children:t.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),t.phone]})})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3"}),X(t.createdAt)]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[t.status==="pending"?e.jsx("button",{onClick:()=>o(t.id),className:"text-green-600 hover:text-green-900",children:"승인"}):e.jsx("button",{onClick:()=>s(`/users/${t.id}`),className:"text-blue-600 hover:text-blue-900",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(t.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Z,{className:"w-4 h-4"})})]})})]},t.id))})]})}),N>1&&e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>i(Math.max(1,p-1)),disabled:p===1,className:"px-4 py-2 border rounded-lg disabled:opacity-50",children:"이전"}),e.jsxs("span",{className:"px-4 py-2",children:[p," / ",N]}),e.jsx("button",{onClick:()=>i(Math.min(N,p+1)),disabled:p===N,className:"px-4 py-2 border rounded-lg disabled:opacity-50",children:"다음"})]})]})},_e=()=>{const s=I(),[n,l]=c.useState([]),[j,f]=c.useState(!1),[p,i]=c.useState(1),[N,u]=c.useState(1),[v,d]=c.useState({total:0,active:0,pending:0,totalProducts:0}),[g,b]=c.useState(new Set),[_,D]=c.useState("all"),[y,a]=c.useState("");c.useEffect(()=>{r()},[p,_,y]);const r=async()=>{f(!0);try{const m={role:"supplier"};_!=="all"&&(m.status=_),y&&(m.q=y);const t=await F.getUsers(p,20,m),x=Array.isArray(t?.data)?t.data:Array.isArray(t?.users)?t.users:Array.isArray(t)?t:[];l(x),u(Math.ceil((t?.total||0)/20)),d({total:t?.total||0,active:Array.isArray(x)?x.filter(A=>A.status==="active").length:0,pending:Array.isArray(x)?x.filter(A=>A.status==="pending").length:0,totalProducts:0})}catch(m){console.error("Failed to fetch suppliers:",m),h.error("공급자 목록을 불러오는데 실패했습니다"),l([]),d({total:0,active:0,pending:0,totalProducts:0})}finally{f(!1)}},w=async m=>{if(confirm("정말 이 공급자를 삭제하시겠습니까?"))try{await F.deleteUser(m),h.success("공급자가 삭제되었습니다"),r()}catch(t){console.error("Failed to delete supplier:",t),h.error("공급자 삭제에 실패했습니다")}},S=async()=>{if(g.size===0){h.error("삭제할 공급자를 선택해주세요");return}if(confirm(`선택한 ${g.size}명의 공급자를 삭제하시겠습니까?`))try{await Promise.all(Array.from(g).map(m=>F.deleteUser(m))),h.success("선택한 공급자가 삭제되었습니다"),b(new Set),r()}catch(m){console.error("Failed to bulk delete:",m),h.error("일괄 삭제에 실패했습니다")}},o=async m=>{try{await F.approveUser(m,"공급자 승인"),h.success("공급자가 승인되었습니다"),r()}catch(t){console.error("Failed to approve supplier:",t),h.error("공급자 승인에 실패했습니다")}},k=m=>{const t=new Set(g);t.has(m)?t.delete(m):t.add(m),b(t)},P=()=>{g.size===n.length?b(new Set):b(new Set(n.map(m=>m.id)))};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"공급자 관리"}),e.jsx("p",{className:"text-gray-600",children:"드롭쉬핑 상품 공급자 목록 및 관리"})]}),e.jsxs("button",{onClick:()=>s("/users/new?role=supplier"),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(G,{className:"w-4 h-4"}),"새 공급자 추가"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"전체 공급자"}),e.jsx("p",{className:"text-2xl font-bold",children:v.total})]}),e.jsx(ee,{className:"w-8 h-8 text-blue-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"활성 공급자"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.active})]}),e.jsx(T,{className:"w-8 h-8 text-green-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"승인 대기"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.pending})]}),e.jsx(V,{className:"w-8 h-8 text-yellow-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"등록 상품"}),e.jsx("p",{className:"text-2xl font-bold",children:v.totalProducts})]}),e.jsx(M,{className:"w-8 h-8 text-purple-600 opacity-50"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsx("input",{type:"text",placeholder:"공급자 검색...",className:"flex-1 min-w-[200px] px-4 py-2 border rounded-lg",value:y,onChange:m=>a(m.target.value)}),e.jsxs("select",{className:"px-4 py-2 border rounded-lg",value:_,onChange:m=>D(m.target.value),children:[e.jsx("option",{value:"all",children:"전체 상태"}),e.jsx("option",{value:"active",children:"활성"}),e.jsx("option",{value:"pending",children:"승인 대기"})]}),g.size>0&&e.jsxs("button",{onClick:S,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:["선택 삭제 (",g.size,")"]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:g.size===n.length&&n.length>0,onChange:P,className:"rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"공급자 정보"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"사업자 정보"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가입일"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center py-8 text-gray-500",children:"공급자가 없습니다"})}):n.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:g.has(m.id),onChange:()=>k(m.id),className:"rounded"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name}),e.jsx("div",{className:"text-sm text-gray-500",children:m.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm",children:m.businessInfo?.businessName?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium",children:m.businessInfo.businessName}),e.jsx("div",{className:"text-gray-500",children:m.businessInfo.businessNumber})]}):e.jsx("span",{className:"text-gray-400",children:"미등록"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${m.status==="active"?"bg-green-100 text-green-800":m.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:m.status==="active"?"활성":m.status==="pending"?"승인 대기":m.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[m.phone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"}),m.phone]}),m.businessInfo?.businessPhone&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"w-3 h-3"}),m.businessInfo.businessPhone]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3"}),X(m.createdAt)]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex gap-2",children:[m.status==="pending"?e.jsx("button",{onClick:()=>o(m.id),className:"text-green-600 hover:text-green-900",children:"승인"}):e.jsx("button",{onClick:()=>s(`/users/${m.id}`),className:"text-blue-600 hover:text-blue-900",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(m.id),className:"text-red-600 hover:text-red-900",children:e.jsx(Z,{className:"w-4 h-4"})})]})})]},m.id))})]})}),N>1&&e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>i(Math.max(1,p-1)),disabled:p===1,className:"px-4 py-2 border rounded-lg disabled:opacity-50",children:"이전"}),e.jsxs("span",{className:"px-4 py-2",children:[p," / ",N]}),e.jsx("button",{onClick:()=>i(Math.min(N,p+1)),disabled:p===N,className:"px-4 py-2 border rounded-lg disabled:opacity-50",children:"다음"})]})]})},Se=()=>{const[s,n]=c.useState([]),[l,j]=c.useState(!1),[f,p]=c.useState("all"),[i,N]=c.useState("all"),[u,v]=c.useState("");c.useEffect(()=>{d()},[]);const d=async()=>{j(!0);try{n([{id:"1",title:"상품 가격 변경 요청",type:"price_change",status:"pending",requestedBy:"공급자 A",requestedAt:"2024-01-27 10:00:00",details:{before:{price:5e4},after:{price:45e3},reason:"프로모션 진행"}},{id:"2",title:"신규 파트너 신청",type:"partner_application",status:"approved",requestedBy:"홍길동",requestedAt:"2024-01-26 14:00:00",reviewedBy:"관리자",reviewedAt:"2024-01-26 16:00:00",details:{notes:"자격 요건 충족"}},{id:"3",title:"광고 소재 승인 요청",type:"ad_material",status:"rejected",requestedBy:"파트너 B",requestedAt:"2024-01-25 09:00:00",reviewedBy:"관리자",reviewedAt:"2024-01-25 11:00:00",details:{reason:"가이드라인 위반"}}])}catch(a){console.error("Failed to fetch approvals:",a),h.error("승인 목록을 불러오는데 실패했습니다")}finally{j(!1)}},g=async a=>{if(confirm("승인하시겠습니까?"))try{h.success("승인 처리되었습니다"),d()}catch{h.error("승인 처리에 실패했습니다")}},b=async a=>{if(prompt("반려 사유를 입력해주세요:"))try{h.success("반려 처리되었습니다"),d()}catch{h.error("반려 처리에 실패했습니다")}},_=a=>{switch(a){case"approved":return e.jsx(L,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(q,{className:"w-5 h-5 text-red-500"});case"pending":return e.jsx(B,{className:"w-5 h-5 text-yellow-500"});default:return e.jsx(H,{className:"w-5 h-5 text-gray-500"})}},D=a=>{switch(a){case"price_change":return"가격 변경";case"product_add":return"상품 추가";case"partner_application":return"파트너 신청";case"ad_material":return"광고 소재";default:return a}},y=s.filter(a=>{const r=f==="all"||a.status===f,w=i==="all"||a.type===i,S=a.title.toLowerCase().includes(u.toLowerCase())||a.requestedBy.toLowerCase().includes(u.toLowerCase());return r&&w&&S});return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"승인 관리"}),e.jsx("p",{className:"text-gray-600",children:"가격 변경, 파트너 신청 등 승인이 필요한 항목을 관리합니다"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"대기 중"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:s.filter(a=>a.status==="pending").length})]}),e.jsx(B,{className:"w-8 h-8 text-yellow-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"승인됨"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.filter(a=>a.status==="approved").length})]}),e.jsx(L,{className:"w-8 h-8 text-green-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"반려됨"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:s.filter(a=>a.status==="rejected").length})]}),e.jsx(q,{className:"w-8 h-8 text-red-600 opacity-50"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"전체"}),e.jsx("p",{className:"text-2xl font-bold",children:s.length})]}),e.jsx(H,{className:"w-8 h-8 text-gray-600 opacity-50"})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"검색...",className:"w-full pl-10 pr-4 py-2 border rounded-lg",value:u,onChange:a=>v(a.target.value)})]})}),e.jsxs("select",{className:"px-4 py-2 border rounded-lg",value:f,onChange:a=>p(a.target.value),children:[e.jsx("option",{value:"all",children:"모든 상태"}),e.jsx("option",{value:"pending",children:"대기 중"}),e.jsx("option",{value:"approved",children:"승인됨"}),e.jsx("option",{value:"rejected",children:"반려됨"})]}),e.jsxs("select",{className:"px-4 py-2 border rounded-lg",value:i,onChange:a=>N(a.target.value),children:[e.jsx("option",{value:"all",children:"모든 유형"}),e.jsx("option",{value:"price_change",children:"가격 변경"}),e.jsx("option",{value:"product_add",children:"상품 추가"}),e.jsx("option",{value:"partner_application",children:"파트너 신청"}),e.jsx("option",{value:"ad_material",children:"광고 소재"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"유형"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"제목"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"요청자"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"요청 일시"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"승인 요청이 없습니다"})}):y.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[_(a.status),e.jsx("span",{className:"ml-2 text-sm",children:a.status==="pending"?"대기 중":a.status==="approved"?"승인됨":"반려됨"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:D(a.type)})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.title}),a.details.reason&&e.jsxs("div",{className:"text-xs text-gray-500",children:["사유: ",a.details.reason]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.requestedBy}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.requestedAt}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.status==="pending"?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>g(a.id),className:"text-green-600 hover:text-green-900",children:"승인"}),e.jsx("button",{onClick:()=>b(a.id),className:"text-red-600 hover:text-red-900",children:"반려"})]}):e.jsxs("span",{className:"text-gray-400",children:[a.reviewedBy," (",a.reviewedAt,")"]})})]},a.id))})]})})]})},ke=()=>{const[s,n]=c.useState([{id:"1",title:"기본 수수료 정책",supplier:"전체 공급자",partnerGrades:["bronze","silver","gold","platinum"],commissionRate:10,minOrderAmount:0,startDate:"2024-01-01",status:"active",createdAt:"2024-01-01T00:00:00"},{id:"2",title:"골드 등급 특별 수수료",supplier:"전체 공급자",partnerGrades:["gold","platinum"],commissionRate:15,minOrderAmount:1e5,startDate:"2024-02-01",status:"active",createdAt:"2024-02-01T00:00:00"},{id:"3",title:"신규 파트너 프로모션",supplier:"전체 공급자",partnerGrades:["bronze"],commissionRate:12,minOrderAmount:0,startDate:"2024-03-01",endDate:"2024-06-30",status:"scheduled",createdAt:"2024-03-01T00:00:00"}]),[l,j]=c.useState(!1),[f,p]=c.useState(null),[i,N]=c.useState([]),u=a=>{const w={active:{label:"활성",class:"bg-green-100 text-green-800"},scheduled:{label:"예약됨",class:"bg-blue-100 text-blue-800"},expired:{label:"만료됨",class:"bg-gray-100 text-gray-800"}}[a];return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w.class}`,children:w.label})},v=a=>{const r={bronze:"브론즈",silver:"실버",gold:"골드",platinum:"플래티넘"};return a.map(w=>r[w]).join(", ")},d=a=>{confirm("정책을 삭제하시겠습니까?")&&(n(s.filter(r=>r.id!==a)),h.success("정책이 삭제되었습니다"))},g=()=>{p(null),j(!0)},b=a=>{p(a),j(!0)},_=a=>{N(r=>r.includes(a)?r.filter(w=>w!==a):[...r,a])},D=()=>{i.length===s.length?N([]):N(s.map(a=>a.id))},y={total:s.length,active:s.filter(a=>a.status==="active").length,avgRate:s.length>0?(s.reduce((a,r)=>a+r.commissionRate,0)/s.length).toFixed(1):0,scheduled:s.filter(a=>a.status==="scheduled").length};return l?e.jsx(Ce,{policy:f,onClose:()=>j(!1)}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-normal text-gray-900",children:"수수료 정책"}),e.jsx("button",{onClick:g,className:"px-3 py-1 bg-wordpress-blue text-white text-sm rounded hover:bg-wordpress-blue-hover transition",children:"새로 추가"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"전체 정책"}),e.jsx("p",{className:"text-2xl font-bold",children:y.total})]}),e.jsx(me,{className:"h-8 w-8 text-gray-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"활성 정책"}),e.jsx("p",{className:"text-2xl font-bold",children:y.active})]}),e.jsx(T,{className:"h-8 w-8 text-green-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"평균 수수료율"}),e.jsxs("p",{className:"text-2xl font-bold",children:[y.avgRate,"%"]})]}),e.jsx(U,{className:"h-8 w-8 text-purple-400"})]})}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"예약된 정책"}),e.jsx("p",{className:"text-2xl font-bold",children:y.scheduled})]}),e.jsx(O,{className:"h-8 w-8 text-blue-400"})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-t-lg p-3 flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-3 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"일괄 작업"}),e.jsx("option",{value:"delete",children:"삭제"}),e.jsx("option",{value:"deactivate",children:"비활성화"})]}),e.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"적용"})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("select",{className:"px-3 py-1 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"모든 상태"}),e.jsx("option",{value:"active",children:"활성"}),e.jsx("option",{value:"scheduled",children:"예약됨"}),e.jsx("option",{value:"expired",children:"만료됨"})]}),e.jsx("button",{className:"px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50",children:"필터"})]})]}),e.jsx("div",{className:"bg-white border-x border-b border-gray-300 rounded-b-lg",children:e.jsxs("table",{className:"w-full wp-list-table widefat fixed striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("td",{className:"manage-column check-column",children:e.jsx("input",{type:"checkbox",onChange:D,checked:i.length===s.length&&s.length>0})}),e.jsx("th",{className:"manage-column column-title column-primary",children:e.jsx("span",{children:"정책명"})}),e.jsx("th",{className:"manage-column",children:"적용 등급"}),e.jsx("th",{className:"manage-column",children:"수수료율"}),e.jsx("th",{className:"manage-column",children:"최소 주문금액"}),e.jsx("th",{className:"manage-column",children:"기간"}),e.jsx("th",{className:"manage-column",children:"상태"})]})}),e.jsx("tbody",{children:s.map(a=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"check-column",children:e.jsx("input",{type:"checkbox",checked:i.includes(a.id),onChange:()=>_(a.id)})}),e.jsxs("td",{className:"title column-title column-primary page-title",children:[e.jsx("strong",{children:e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),b(a)},className:"row-title",children:a.title})}),e.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["공급자: ",a.supplier]}),e.jsxs("div",{className:"row-actions",children:[e.jsx("span",{className:"edit",children:e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),b(a)},children:"편집"})})," | ",e.jsx("span",{className:"trash",children:e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),d(a.id)},className:"submitdelete",children:"휴지통"})})]})]}),e.jsx("td",{children:e.jsx("span",{className:"text-sm",children:v(a.partnerGrades)})}),e.jsx("td",{children:e.jsxs("strong",{className:"text-lg text-wordpress-blue",children:[a.commissionRate,"%"]})}),e.jsx("td",{children:a.minOrderAmount>0?e.jsxs("span",{children:["₩",a.minOrderAmount.toLocaleString()]}):e.jsx("span",{className:"text-gray-400",children:"제한 없음"})}),e.jsxs("td",{className:"text-sm",children:[e.jsx("div",{children:new Date(a.startDate).toLocaleDateString("ko-KR")}),a.endDate&&e.jsxs("div",{className:"text-gray-500",children:["~ ",new Date(a.endDate).toLocaleDateString("ko-KR")]})]}),e.jsx("td",{children:u(a.status)})]},a.id))})]})})]})},Ce=({policy:s,onClose:n})=>{const[l,j]=c.useState({title:s?.title||"",supplier:s?.supplier||"전체 공급자",partnerGrades:s?.partnerGrades||["bronze","silver","gold","platinum"],commissionRate:s?.commissionRate||10,minOrderAmount:s?.minOrderAmount||0,startDate:s?.startDate||"",endDate:s?.endDate||""}),f=()=>{h.success(s?"정책이 수정되었습니다":"정책이 생성되었습니다"),n()};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-2xl font-normal text-gray-900",children:s?"수수료 정책 편집":"새 수수료 정책"})}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 max-w-4xl",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["정책명 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.title,onChange:p=>j({...l,title:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:border-wordpress-blue focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"수수료율 (%)"}),e.jsx("input",{type:"number",value:l.commissionRate,onChange:p=>j({...l,commissionRate:Number(p.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:border-wordpress-blue focus:outline-none",min:"0",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시작일"}),e.jsx("input",{type:"date",value:l.startDate,onChange:p=>j({...l,startDate:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:border-wordpress-blue focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"종료일 (선택)"}),e.jsx("input",{type:"date",value:l.endDate,onChange:p=>j({...l,endDate:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded focus:border-wordpress-blue focus:outline-none"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t flex justify-end gap-2",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"취소"}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-wordpress-blue text-white rounded hover:bg-wordpress-blue-hover",children:s?"업데이트":"정책 생성"})]})]})]})},Ae=()=>{const[s,n]=c.useState(null),[l,j]=c.useState(!1),[f,p]=c.useState(!1),[i,N]=c.useState(!1);c.useEffect(()=>{u()},[]);const u=async()=>{j(!0);try{n({cpts:{ds_supplier:"installed",ds_partner:"installed",ds_product:"installed",ds_commission_policy:"installed"},records:{suppliers:0,partners:0,products:0,commissions:0},fieldGroups:0,systemReady:!0})}catch(b){console.error("Failed to check system status:",b),n({cpts:{ds_supplier:"not_installed",ds_partner:"not_installed",ds_product:"not_installed",ds_commission_policy:"not_installed"},records:{suppliers:0,partners:0,products:0,commissions:0},fieldGroups:0,systemReady:!1})}finally{j(!1)}},v=async()=>{if(confirm("드롭쉬핑 시스템을 초기화하시겠습니까? CPT와 ACF 필드가 생성됩니다.")){p(!0);try{h.success("시스템이 이미 초기화되어 있습니다"),await u()}catch(b){console.error("Failed to initialize system:",b),h.error("시스템 초기화에 실패했습니다")}finally{p(!1)}}},d=async()=>{if(confirm("샘플 데이터를 생성하시겠습니까? 테스트용 공급자, 파트너, 상품이 생성됩니다.")){N(!0);try{h.info("샘플 데이터 생성 기능은 준비 중입니다")}catch(b){console.error("Failed to create sample data:",b),h.error("샘플 데이터 생성에 실패했습니다")}finally{N(!1)}}},g=b=>b==="installed"?e.jsxs("span",{className:"flex items-center text-green-600",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),"설치됨"]}):e.jsxs("span",{className:"flex items-center text-red-600",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"미설치"]});return l?e.jsx("div",{className:"p-6 flex items-center justify-center min-h-screen",children:e.jsx(E,{className:"h-8 w-8 animate-spin text-wordpress-blue"})}):e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"드롭쉬핑 시스템 설정"}),e.jsx("p",{className:"text-gray-600",children:"CPT/ACF 기반 드롭쉬핑 플랫폼 초기화 및 관리"})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(J,{className:"h-5 w-5 mr-2"}),"시스템 상태"]}),e.jsx("button",{onClick:u,className:"p-2 text-wordpress-blue hover:bg-blue-50 rounded transition",children:e.jsx(he,{className:"h-5 w-5"})})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 rounded-lg bg-gray-50 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"전체 시스템 상태"}),s?.systemReady?e.jsxs("span",{className:"flex items-center text-green-600 font-medium",children:[e.jsx(L,{className:"h-5 w-5 mr-2"}),"준비 완료"]}):e.jsxs("span",{className:"flex items-center text-yellow-600 font-medium",children:[e.jsx(Y,{className:"h-5 w-5 mr-2"}),"초기화 필요"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-700 mb-3",children:"Custom Post Types"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"공급자 (ds_supplier)"}),g(s?.cpts?.ds_supplier||"not_installed")]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"파트너 (ds_partner)"}),g(s?.cpts?.ds_partner||"not_installed")]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"상품 (ds_product)"}),g(s?.cpts?.ds_product||"not_installed")]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"수수료 정책 (ds_commission_policy)"}),g(s?.cpts?.ds_commission_policy||"not_installed")]})]})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-700 mb-3",children:"데이터 현황"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"등록된 공급자"}),e.jsxs("span",{className:"font-medium",children:[s?.records?.suppliers||0,"개"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"등록된 파트너"}),e.jsxs("span",{className:"font-medium",children:[s?.records?.partners||0,"개"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"등록된 상품"}),e.jsxs("span",{className:"font-medium",children:[s?.records?.products||0,"개"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{children:"수수료 정책"}),e.jsxs("span",{className:"font-medium",children:[s?.records?.commissions||0,"개"]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"ACF 필드 그룹"}),e.jsxs("span",{className:"text-sm font-bold text-blue-900",children:[s.fieldGroups,"개 등록"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(pe,{className:"h-8 w-8 text-wordpress-blue mb-2"}),e.jsx("h3",{className:"font-semibold text-lg",children:"시스템 초기화"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"CPT와 ACF 필드를 생성하여 시스템을 초기화합니다"})]}),e.jsx("button",{onClick:v,disabled:f||(s?.systemReady??!1),className:`w-full py-2 px-4 rounded font-medium transition ${s?.systemReady?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-wordpress-blue text-white hover:bg-wordpress-blue-hover"}`,children:f?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(E,{className:"h-4 w-4 mr-2 animate-spin"}),"초기화 중..."]}):s?.systemReady?"초기화 완료":"초기화 실행"})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(J,{className:"h-8 w-8 text-green-600 mb-2"}),e.jsx("h3",{className:"font-semibold text-lg",children:"샘플 데이터 생성"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"테스트용 공급자, 파트너, 상품 데이터를 생성합니다"})]}),e.jsx("button",{onClick:d,disabled:i||!s?.systemReady,className:`w-full py-2 px-4 rounded font-medium transition ${s?.systemReady?"bg-green-600 text-white hover:bg-green-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:i?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx(E,{className:"h-4 w-4 mr-2 animate-spin"}),"생성 중..."]}):"샘플 데이터 생성"})]}),e.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(ue,{className:"h-8 w-8 text-purple-600 mb-2"}),e.jsx("h3",{className:"font-semibold text-lg",children:"대시보드 이동"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"드롭쉬핑 관리 대시보드로 이동합니다"})]}),e.jsx("button",{onClick:()=>window.location.href="/dropshipping/products",disabled:!s?.systemReady,className:`w-full py-2 px-4 rounded font-medium transition ${s?.systemReady?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:"대시보드로 이동"})]})]}),e.jsxs("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-yellow-900 mb-2 flex items-center",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"중요 안내"]}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"시스템 초기화는 최초 1회만 실행하시면 됩니다"}),e.jsx("li",{children:"샘플 데이터는 테스트 목적으로만 사용하세요"}),e.jsx("li",{children:"실제 운영 시에는 샘플 데이터를 삭제하고 실제 데이터를 입력하세요"}),e.jsx("li",{children:"모든 데이터는 WordPress CPT 구조로 저장됩니다"})]})]})]})},Me=()=>e.jsxs(ge,{children:[e.jsx($,{path:"products",element:e.jsx(ye,{})}),e.jsx($,{path:"orders",element:e.jsx(Ne,{})}),e.jsx($,{path:"settlements",element:e.jsx(fe,{})}),e.jsx($,{path:"sellers",element:e.jsx(ve,{})}),e.jsx($,{path:"partners",element:e.jsx(we,{})}),e.jsx($,{path:"suppliers",element:e.jsx(_e,{})}),e.jsx($,{path:"approvals",element:e.jsx(Se,{})}),e.jsx($,{path:"commissions",element:e.jsx(ke,{})}),e.jsx($,{path:"setup",element:e.jsx(Ae,{})}),e.jsx($,{path:"/",element:e.jsx(je,{to:"/dropshipping/products",replace:!0})})]});export{Me as default};
//# sourceMappingURL=index-CSnsWwcD.js.map
