import{cs as O,r as n,j as e,ct as H,cu as v,cv as w,cw as b,cx as A,cy as D,cz as C,u as V,a1 as g,m as j,cA as U,cB as X,aX as G,E as J,ar as W,bk as Y,ad as Z,z as o}from"./vendor-react-P__8vGRG.js";import{c,p as T,B as d,h as _,i as ee,j as p,k as ae,a as u}from"./page-template-editor-BTdVTS-a.js";import{B as N}from"./index-C0gS3Jf3.js";import{u as se,a as te,b as f}from"./vendor-query-CucHvDcH.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-utils-dq2XMRwt.js";import"./vendor-socket-DgcwqWsT.js";const re=O,le=H,E=n.forwardRef(({className:t,...r},l)=>e.jsx(C,{className:c("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:l}));E.displayName=C.displayName;const k=n.forwardRef(({className:t,...r},l)=>e.jsxs(le,{children:[e.jsx(E,{}),e.jsx(v,{ref:l,className:c("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]}));k.displayName=v.displayName;const z=({className:t,...r})=>e.jsx("div",{className:c("flex flex-col space-y-2 text-center sm:text-left",t),...r});z.displayName="AlertDialogHeader";const F=({className:t,...r})=>e.jsx("div",{className:c("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});F.displayName="AlertDialogFooter";const P=n.forwardRef(({className:t,...r},l)=>e.jsx(w,{ref:l,className:c("text-lg font-semibold",t),...r}));P.displayName=w.displayName;const R=n.forwardRef(({className:t,...r},l)=>e.jsx(b,{ref:l,className:c("text-sm text-muted-foreground",t),...r}));R.displayName=b.displayName;const q=n.forwardRef(({className:t,...r},l)=>e.jsx(D,{ref:l,className:c(T(),t),...r}));q.displayName=D.displayName;const S=n.forwardRef(({className:t,...r},l)=>e.jsx(A,{ref:l,className:c(T({variant:"outline"}),"mt-2 sm:mt-0",t),...r}));S.displayName=A.displayName;const ie={header:X,footer:U,sidebar:j,general:j},ne={header:"헤더",footer:"푸터",sidebar:"사이드바",general:"일반"};function he(){const t=V(),r=se(),[l,h]=n.useState(null),[m,B]=n.useState("all"),{data:y=[],isLoading:$}=te({queryKey:["template-parts",m],queryFn:async()=>{const a=new URLSearchParams;m!=="all"&&a.append("area",m);const s=(await u.api.get(`/public/template-parts?${a}`)).data;if(s&&typeof s=="object"&&"success"in s){if(s.success)return s.data||[];throw new Error(s.error||"Failed to fetch template parts")}else return Array.isArray(s)?s:[]}}),L=f({mutationFn:async a=>{const i=await u.api.delete(`/template-parts/${a}`),s=i.data;if(s&&typeof s=="object"&&"success"in s&&!s.success)throw new Error(s.error||"Failed to delete template part");return i.data},onSuccess:()=>{o.success("템플릿 파트가 삭제되었습니다"),r.invalidateQueries({queryKey:["template-parts"]}),h(null)},onError:a=>{o.error(a.message||"템플릿 파트 삭제에 실패했습니다")}}),Q=f({mutationFn:async({id:a,isActive:i})=>{const s=await u.api.put(`/template-parts/${a}`,{isActive:i}),x=s.data;if(x&&typeof x=="object"&&"success"in x&&!x.success)throw new Error(x.error||"Failed to update template part");return s.data},onSuccess:()=>{o.success("상태가 변경되었습니다"),r.invalidateQueries({queryKey:["template-parts"]})},onError:a=>{o.error(a.message||"상태 변경에 실패했습니다")}}),I=f({mutationFn:async a=>{const i=await u.api.post(`/template-parts/${a}/duplicate`),s=i.data;if(s&&typeof s=="object"&&"success"in s&&!s.success)throw new Error(s.error||"Failed to duplicate template part");return i.data},onSuccess:()=>{o.success("템플릿 파트가 복제되었습니다"),r.invalidateQueries({queryKey:["template-parts"]})},onError:a=>{o.error(a.message||"템플릿 파트 복제에 실패했습니다")}}),K=a=>{h(a)},M=()=>{l&&L.mutate(l)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"템플릿 파트"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"사이트의 헤더, 푸터, 사이드바 등을 관리합니다"})]}),e.jsxs(d,{onClick:()=>t("/appearance/template-parts/new"),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"새 템플릿 파트"]})]}),e.jsxs(_,{value:m,onValueChange:B,children:[e.jsxs(ee,{children:[e.jsx(p,{value:"all",children:"전체"}),e.jsx(p,{value:"header",children:"헤더"}),e.jsx(p,{value:"footer",children:"푸터"}),e.jsx(p,{value:"sidebar",children:"사이드바"}),e.jsx(p,{value:"general",children:"일반"})]}),e.jsx(ae,{value:m,className:"mt-6",children:$?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"템플릿 파트가 없습니다"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"새 템플릿 파트를 만들어 사이트를 커스터마이즈하세요."}),e.jsx("div",{className:"mt-6",children:e.jsxs(d,{onClick:()=>t("/appearance/template-parts/new"),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"새 템플릿 파트 만들기"]})})]}):e.jsx("div",{className:"grid gap-4",children:y.map(a=>{const i=ie[a.area];return e.jsx("div",{className:"wp-card hover:shadow-md transition-shadow",children:e.jsx("div",{className:"wp-card-body",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{className:"w-8 h-8 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.name}),a.isDefault&&e.jsx(N,{variant:"secondary",children:"기본"}),e.jsx(N,{variant:a.isActive?"default":"secondary",children:a.isActive?"활성":"비활성"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description||`${ne[a.area]} 영역`}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["우선순위: ",a.priority]}),a.conditions&&e.jsx("span",{children:"조건부 표시 설정됨"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>Q.mutate({id:a.id,isActive:!a.isActive}),children:a.isActive?e.jsx(G,{className:"w-4 h-4"}):e.jsx(J,{className:"w-4 h-4"})}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>t(`/appearance/template-parts/${a.id}/edit`),children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>I.mutate(a.id),children:e.jsx(Y,{className:"w-4 h-4"})}),!a.isDefault&&e.jsx(d,{size:"sm",variant:"ghost",onClick:()=>K(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Z,{className:"w-4 h-4"})})]})]})})},a.id)})})})]}),e.jsx(re,{open:!!l,onOpenChange:()=>h(null),children:e.jsxs(k,{children:[e.jsxs(z,{children:[e.jsx(P,{children:"템플릿 파트 삭제"}),e.jsx(R,{children:"이 템플릿 파트를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})]}),e.jsxs(F,{children:[e.jsx(S,{children:"취소"}),e.jsx(q,{onClick:M,className:"bg-red-600 hover:bg-red-700",children:"삭제"})]})]})})]})}export{he as default};
//# sourceMappingURL=TemplateParts-LJutqcUZ.js.map
