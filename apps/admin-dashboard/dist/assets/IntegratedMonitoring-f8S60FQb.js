import{r as w,j as e,bm as g,bl as h,bF as S,dd as B,bD as y,cy as N,J as C,c2 as L}from"./vendor-react-k21L8gyu.js";import{a as A}from"./vendor-query-D5rBm9N_.js";import{B as l,J as D,N as E,K as T,C as t,k as r,l as c,m as i,a as R,b as F,d,e as x,t as n,s as M}from"./page-gutenberg-DfBK4wFH.js";import{a as f}from"./api-client-B2LQaTYj.js";import P from"./PerformanceDashboard-obcTcXn9.js";import"./wp-block-editor-DM9yXXIa.js";import"./wp-i18n-DQMG9Moe.js";import"./wp-core-CTkjrE6Y.js";import"./wp-blocks-core-m9M-jdYH.js";import"./wp-misc-eJXghOJf.js";import"./wp-data-CiqFlSQ4.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-utils-DQ8F5vJI.js";import"./wp-components-C7vO1IIk.js";function Z(){const[v,m]=w.useState("overview"),{data:s,isLoading:b,refetch:o}=A({queryKey:["monitoring-summary"],queryFn:async()=>(await f.get("/monitoring/summary")).data,refetchInterval:3e4}),u=async()=>{try{await f.post("/monitoring/backup/trigger"),o()}catch{}};if(b||!s)return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-admin-blue"})});const j=a=>{switch(a){case"healthy":return"text-green-500";case"degraded":return"text-yellow-500";case"critical":return"text-red-500";default:return"text-gray-500"}},p=a=>{const k={critical:"destructive",high:"destructive",error:"destructive",warning:"default",medium:"default",low:"secondary",info:"secondary"};return e.jsx(M,{variant:k[a]||"default",children:a})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"System Monitoring"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Comprehensive system health and security monitoring"})]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>o(),children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),s.system.health!=="healthy"&&e.jsxs(D,{variant:s.system.health==="critical"?"destructive":"default",children:[e.jsx(h,{className:"h-4 w-4"}),e.jsxs(E,{children:["System Health: ",s.system.health.toUpperCase()]}),e.jsxs(T,{children:["System performance is ",s.system.health,". Please check the performance dashboard for details."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(t,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{className:"text-sm font-medium",children:"System Health"}),e.jsx(S,{className:`w-4 h-4 ${j(s.system.health)}`})]})}),e.jsxs(i,{children:[e.jsx("div",{className:`text-2xl font-bold capitalize ${j(s.system.health)}`,children:s.system.health}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsxs("span",{children:["CPU: ",s.system.cpu,"%"]}),e.jsxs("span",{children:["Mem: ",s.system.memory,"%"]})]})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{className:"text-sm font-medium",children:"Backup Status"}),e.jsx(B,{className:`w-4 h-4 ${s.backup.status==="success"?"text-green-500":"text-red-500"}`})]})}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.backup.status==="running"?e.jsx("span",{className:"text-blue-500",children:"Running..."}):s.backup.lastBackup?new Date(s.backup.lastBackup).toLocaleDateString():"Never"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsxs("span",{children:[s.backup.totalBackups," total"]}),e.jsx("span",{children:s.backup.backupSize})]})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{className:"text-sm font-medium",children:"Error Alerts"}),e.jsx(h,{className:`w-4 h-4 ${s.errors.critical>0?"text-red-500":"text-green-500"}`})]})}),e.jsxs(i,{children:[e.jsxs("div",{className:"flex items-baseline gap-4",children:[e.jsx("span",{className:"text-2xl font-bold text-red-500",children:s.errors.critical}),e.jsx("span",{className:"text-lg text-orange-500",children:s.errors.error}),e.jsx("span",{className:"text-sm text-yellow-500",children:s.errors.warning})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Critical / Error / Warning"})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(c,{className:"text-sm font-medium",children:"Security"}),e.jsx(y,{className:`w-4 h-4 ${s.security.suspiciousActivities>0?"text-yellow-500":"text-green-500"}`})]})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Blocked IPs"}),e.jsx("span",{className:"font-medium",children:s.security.blockedIPs})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Failed Logins"}),e.jsx("span",{className:"font-medium",children:s.security.failedLogins})]})]})})]})]}),e.jsxs(R,{value:v,onValueChange:m,className:"space-y-4",children:[e.jsxs(F,{className:"grid w-full grid-cols-5",children:[e.jsx(d,{value:"overview",children:"Overview"}),e.jsx(d,{value:"performance",children:"Performance"}),e.jsx(d,{value:"backup",children:"Backup"}),e.jsx(d,{value:"errors",children:"Errors"}),e.jsx(d,{value:"security",children:"Security"})]}),e.jsxs(x,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Recent Errors"}),e.jsx(n,{children:"Latest error alerts from the system"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:s.errors.recent.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No recent errors"}):s.errors.recent.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-1",children:a.message}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(a.timestamp).toLocaleString()})]}),p(a.level)]},a.id))})})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Security Events"}),e.jsx(n,{children:"Latest security-related activities"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-3",children:s.security.recentEvents.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No recent security events"}):s.security.recentEvents.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:a.type}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.ipAddress," â€¢ ",new Date(a.timestamp).toLocaleString()]})]}),p(a.severity)]},a.id))})})]})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Quick Actions"}),e.jsx(n,{children:"Common monitoring and maintenance tasks"})]}),e.jsx(i,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(l,{variant:"outline",className:"h-auto flex-col py-4",onClick:u,disabled:s.backup.status==="running",children:[e.jsx(N,{className:"w-5 h-5 mb-2"}),e.jsx("span",{className:"text-xs",children:"Manual Backup"})]}),e.jsxs(l,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>m("errors"),children:[e.jsx(h,{className:"w-5 h-5 mb-2"}),e.jsx("span",{className:"text-xs",children:"View Errors"})]}),e.jsxs(l,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>m("security"),children:[e.jsx(y,{className:"w-5 h-5 mb-2"}),e.jsx("span",{className:"text-xs",children:"Security Logs"})]}),e.jsxs(l,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>window.location.href="/admin/settings",children:[e.jsx(C,{className:"w-5 h-5 mb-2"}),e.jsx("span",{className:"text-xs",children:"Settings"})]})]})})]})]}),e.jsx(x,{value:"performance",children:e.jsx(P,{})}),e.jsx(x,{value:"backup",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Backup Management"}),e.jsx(n,{children:"Manage and monitor system backups"})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Last Backup"}),e.jsx("p",{className:"font-medium",children:s.backup.lastBackup?new Date(s.backup.lastBackup).toLocaleString():"Never"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Next Backup"}),e.jsx("p",{className:"font-medium",children:s.backup.nextBackup?new Date(s.backup.nextBackup).toLocaleString():"Not scheduled"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Success Rate"}),e.jsx("p",{className:"font-medium",children:s.backup.totalBackups>0?`${((s.backup.totalBackups-s.backup.failedBackups)/s.backup.totalBackups*100).toFixed(1)}%`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Size"}),e.jsx("p",{className:"font-medium",children:s.backup.backupSize})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{onClick:u,disabled:s.backup.status==="running",children:s.backup.status==="running"?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 mr-2 animate-spin"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Start Backup"]})}),e.jsxs(l,{variant:"outline",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Schedule"]})]})]})]})}),e.jsx(x,{value:"errors",children:e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Error Log"}),e.jsx(n,{children:"System errors and alerts"})]}),e.jsx(i,{children:e.jsx("p",{className:"text-sm text-gray-500",children:"Error log details would be displayed here"})})]})}),e.jsx(x,{value:"security",children:e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(c,{children:"Security Audit Log"}),e.jsx(n,{children:"Security events and access logs"})]}),e.jsx(i,{children:e.jsx("p",{className:"text-sm text-gray-500",children:"Security audit log would be displayed here"})})]})})]})]})}export{Z as default};
