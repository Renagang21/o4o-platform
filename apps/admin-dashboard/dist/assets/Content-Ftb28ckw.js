import{r as e,j as s,u as a,V as l,bS as t,b as i,A as n,S as c,c8 as r,E as d,aH as o,b6 as x,aE as h,bY as m,b9 as u,bc as j,b7 as p,b8 as g,b0 as v,bD as y,cf as N,cg as b,c6 as f,ch as w,ba as k,C,aB as S,ci as F,aO as I,cj as P,aG as $,ck as L,cl as z,aS as A,aT as q,bq as E,cm as D,bW as M,cn as T,co as V,bk as R,cp as K,b1 as B,be as _,bo as H,cq as Q,bl as U,aX as Y,cr as O,aZ as W,bG as G,aU as X,aV as J,cs as Z,ct as ee,bL as se,bU as ae,cu as le,bN as te,cv as ie,cw as ne,cx as ce,cy as re,cz as de,cA as oe,cB as xe,cC as he,aD as me,cD as ue,cE as je,b5 as pe,b2 as ge,cF as ve,aF as ye,a_ as Ne,bA as be,bp as fe,br as we,c0 as ke,c1 as Ce,b$ as Se}from"./vendor-react-BqkIXTmC.js";import{I as Fe,S as Ie,h as Pe,i as $e,j as Le,k as ze,T as Ae,B as qe,b as Ee,l as De,L as Me,d as Te,e as Ve,f as Re,g as Ke,m as Be,c as _e}from"./page-template-editor-DmUXhR56.js";import{u as He,a as Qe,b as Ue}from"./vendor-query-C5jzPyjL.js";import{u as Ye,B as Oe,R as We}from"./RowActions-K98XbcAz.js";import{u as Ge,S as Xe}from"./ScreenMeta-dJf3zFqJ.js";import{cS as Je,cT as Ze,cQ as es,cJ as ss,cK as as,cL as ls,cO as ts,cN as is,cF as ns,cG as cs,cH as rs,cI as ds,cR as os,cU as xs,cV as hs,cW as ms,cX as us,cY as js,cZ as ps}from"./wp-misc-D0_U3Yh3.js";import{A as gs,R as vs,P as ys}from"./PageForm-COiv8WJd.js";import{C as Ns}from"./vendor-utils-C9jLuAcl.js";import{C as bs}from"./checkbox-DD58aj3L.js";import{M as fs}from"./MediaLibrary-B5NE81aP.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./wp-blocks-core-C_Umt3qd.js";import"./wp-block-editor-main-DEdKEcH7.js";import"./wp-block-editor-store-Cdz5rmmV.js";import"./wp-block-editor-utils-CmROb2t9.js";import"./wp-i18n-DP14Ry5v.js";import"./wp-core-skmJSxj5.js";import"./wp-components-i3qvAB06.js";import"./wp-api-Dq90bqIA.js";import"./wp-data-CsLR-lZb.js";import"./index-C056IMV_.js";import"./vendor-socket-CMcZe9fK.js";const ws=({post:a,formData:l,onUpdate:t,onSave:i,onCancel:n,isLoading:c,categories:r=[]})=>{const d=e.useRef(null);e.useEffect(()=>{d.current?.focus(),d.current?.select()},[]);return s.jsx("tr",{className:"inline-edit-row inline-edit-row-post quick-edit-row quick-edit-row-post inline-edit-post",onKeyDown:e=>{"Escape"===e.key?n():"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&i()},children:s.jsxs("td",{colSpan:7,className:"colspanchange",children:[s.jsxs("fieldset",{className:"inline-edit-col-left",children:[s.jsx("legend",{className:"inline-edit-legend",children:"Quick Edit"}),s.jsxs("div",{className:"inline-edit-col",children:[s.jsxs("label",{children:[s.jsx("span",{className:"title",children:"Title"}),s.jsx("span",{className:"input-text-wrap",children:s.jsx(Fe,{ref:d,type:"text",name:"post_title",className:"ptitle",value:l.title||"",onChange:e=>t("title",e.target.value)})})]}),s.jsxs("label",{children:[s.jsx("span",{className:"title",children:"Slug"}),s.jsx("span",{className:"input-text-wrap",children:s.jsx(Fe,{type:"text",name:"post_name",value:l.slug||"",onChange:e=>t("slug",e.target.value)})})]}),s.jsxs("fieldset",{className:"inline-edit-date",children:[s.jsx("legend",{children:s.jsx("span",{className:"title",children:"Date"})}),s.jsxs("div",{className:"timestamp-wrap",children:[s.jsxs("label",{children:[s.jsx("span",{className:"screen-reader-text",children:"Month"}),s.jsxs(Ie,{value:l.publishMonth||"01",onValueChange:e=>t("publishMonth",e),children:[s.jsx(Pe,{className:"inline-edit-month",children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"01",children:"Jan"}),s.jsx(ze,{value:"02",children:"Feb"}),s.jsx(ze,{value:"03",children:"Mar"}),s.jsx(ze,{value:"04",children:"Apr"}),s.jsx(ze,{value:"05",children:"May"}),s.jsx(ze,{value:"06",children:"Jun"}),s.jsx(ze,{value:"07",children:"Jul"}),s.jsx(ze,{value:"08",children:"Aug"}),s.jsx(ze,{value:"09",children:"Sep"}),s.jsx(ze,{value:"10",children:"Oct"}),s.jsx(ze,{value:"11",children:"Nov"}),s.jsx(ze,{value:"12",children:"Dec"})]})]})]}),s.jsxs("label",{children:[s.jsx("span",{className:"screen-reader-text",children:"Day"}),s.jsx(Fe,{type:"text",name:"jj",value:l.publishDay||"",size:2,maxLength:2,onChange:e=>t("publishDay",e.target.value),className:"inline-edit-day"})]}),",",s.jsxs("label",{children:[s.jsx("span",{className:"screen-reader-text",children:"Year"}),s.jsx(Fe,{type:"text",name:"aa",value:l.publishYear||"",size:4,maxLength:4,onChange:e=>t("publishYear",e.target.value),className:"inline-edit-year"})]})]})]}),s.jsx("br",{className:"clear"}),s.jsxs("label",{className:"inline-edit-author",children:[s.jsx("span",{className:"title",children:"Author"}),s.jsxs(Ie,{value:l.authorId||"",onValueChange:e=>t("authorId",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsx(Le,{children:s.jsx(ze,{value:a.author?.id||"",children:a.author?.name||"Unknown"})})]})]}),s.jsxs("label",{className:"inline-edit-password",children:[s.jsx("span",{className:"title",children:"Password"}),s.jsx("span",{className:"input-text-wrap",children:s.jsx(Fe,{type:"text",name:"post_password",value:l.password||"",onChange:e=>t("password",e.target.value)})}),s.jsx("em",{className:"alignleft",children:"–OR–"})]}),s.jsxs("label",{className:"inline-edit-private alignleft",children:[s.jsx("input",{type:"checkbox",name:"keep_private",checked:l.isPrivate||!1,onChange:e=>t("isPrivate",e.target.checked)}),s.jsx("span",{className:"checkbox-title",children:"Private"})]})]})]}),s.jsx("fieldset",{className:"inline-edit-col-center inline-edit-categories",children:s.jsxs("div",{className:"inline-edit-col",children:[s.jsx("span",{className:"title inline-edit-categories-label",children:"Categories"}),s.jsx("ul",{className:"cat-checklist category-checklist",children:r.map(e=>s.jsx("li",{className:"popular-category",children:s.jsxs("label",{className:"selectit",children:[s.jsx("input",{type:"checkbox",name:"post_category[]",value:e.id,checked:l.categoryIds?.includes(e.id)||!1,onChange:s=>{const a=l.categoryIds||[];s.target.checked?t("categoryIds",[...a,e.id]):t("categoryIds",a.filter(s=>s!==e.id))}})," ",e.name]})},e.id))})]})}),s.jsxs("fieldset",{className:"inline-edit-col-right",children:[s.jsxs("label",{className:"inline-edit-tags",children:[s.jsx("span",{className:"title",children:"Tags"}),s.jsx(Ae,{name:"tax_input[post_tag]",className:"tax_input_post_tag",value:l.tags||"",onChange:e=>t("tags",e.target.value),placeholder:"Separate tags with commas"})]}),s.jsxs("div",{className:"inline-edit-group wp-clearfix",children:[s.jsxs("label",{className:"alignleft",children:[s.jsx("span",{className:"title",children:"Comments"}),s.jsxs(Ie,{value:l.commentStatus||"open",onValueChange:e=>t("commentStatus",e),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"open",children:"Allow"}),s.jsx(ze,{value:"closed",children:"Do not allow"})]})]})]}),s.jsxs("label",{className:"alignleft",children:[s.jsx("span",{className:"title",children:"Pings"}),s.jsxs(Ie,{value:l.pingStatus||"open",onValueChange:e=>t("pingStatus",e),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"open",children:"Allow"}),s.jsx(ze,{value:"closed",children:"Do not allow"})]})]})]})]}),s.jsxs("div",{className:"inline-edit-group wp-clearfix",children:[s.jsxs("label",{className:"inline-edit-status alignleft",children:[s.jsx("span",{className:"title",children:"Status"}),s.jsxs(Ie,{value:l.status||"draft",onValueChange:e=>t("status",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"published",children:"Published"}),s.jsx(ze,{value:"draft",children:"Draft"}),s.jsx(ze,{value:"pending",children:"Pending Review"}),s.jsx(ze,{value:"private",children:"Private"})]})]})]}),s.jsxs("label",{className:"alignleft",children:[s.jsx("input",{type:"checkbox",name:"sticky",checked:l.isSticky||!1,onChange:e=>t("isSticky",e.target.checked)}),s.jsx("span",{className:"checkbox-title",children:"Make this post sticky"})]})]})]}),s.jsxs("div",{className:"submit inline-edit-save",children:[s.jsx(qe,{className:"button button-primary save",onClick:i,disabled:c,children:c?"Updating...":"Update"}),s.jsx(qe,{className:"button cancel",variant:"ghost",onClick:n,disabled:c,children:"Cancel"}),s.jsx("span",{className:"spinner"}),s.jsx("br",{className:"clear"}),s.jsx("div",{className:"notice notice-error notice-alt inline hidden",children:s.jsx("p",{className:"error"})})]})]})})},ks=()=>(Ge([{id:"overview",title:"Overview",content:"\n        <p>This screen provides access to all of your posts. You can customize the display of this screen to suit your workflow.</p>\n        <p>By default, this screen will show all of your posts in a simple list. You can customize the display of this screen in a number of ways:</p>\n        <ul>\n          <li>You can hide/display columns based on your needs and decide how many posts to list per screen using the Screen Options tab.</li>\n          <li>You can filter the list of posts by post status using the text links above the posts list to only show posts with that status.</li>\n          <li>You can view posts in a simple title list or with an excerpt using the Screen Options tab.</li>\n          <li>You can refine the list to show only posts in a specific category or from a specific month by using the dropdown menus above the posts list.</li>\n        </ul>\n      "},{id:"actions",title:"Available Actions",content:"\n        <p>Hovering over a row in the posts list will display action links that allow you to manage your post. You can perform the following actions:</p>\n        <ul>\n          <li><strong>Edit</strong> takes you to the editing screen for that post. You can also reach that screen by clicking on the post title.</li>\n          <li><strong>Quick Edit</strong> provides inline access to the metadata of your post, allowing you to update post details without leaving this screen.</li>\n          <li><strong>Trash</strong> removes your post from this list and places it in the Trash, from which you can permanently delete it.</li>\n          <li><strong>View</strong> will show you what your draft post will look like if you publish it.</li>\n        </ul>\n      "},{id:"bulk-actions",title:"Bulk Actions",content:"\n        <p>You can also edit or move multiple posts to the Trash at once. Select the posts you want to act on using the checkboxes, then select the action you want to take from the Bulk actions menu and click Apply.</p>\n        <p>When using Bulk Edit, you can change the metadata (categories, author, etc.) for all selected posts at once. To remove a post from the grouping, just click the x next to its name in the Bulk Edit area that appears.</p>\n      "},{id:"quick-edit",title:"Quick Edit",content:'\n        <p>Quick Edit is a powerful feature that allows you to make changes to post metadata without leaving the posts list screen. To use Quick Edit:</p>\n        <ol>\n          <li>Hover over any post in the list</li>\n          <li>Click the "Quick Edit" link that appears</li>\n          <li>The post row will transform into an edit form</li>\n          <li>Make your changes</li>\n          <li>Click "Update" to save or "Cancel" to discard changes</li>\n        </ol>\n        <p><strong>Available fields in Quick Edit:</strong></p>\n        <ul>\n          <li>Title and Slug</li>\n          <li>Date and Author</li>\n          <li>Categories and Tags</li>\n          <li>Comments and Pings settings</li>\n          <li>Status and Visibility</li>\n          <li>Password protection</li>\n        </ul>\n      '}],{title:"For more information:",content:'\n      <p><a href="https://wordpress.org/support/article/posts-screen/" target="_blank">Documentation on Managing Posts</a></p>\n      <p><a href="https://wordpress.org/support/article/quick-edit/" target="_blank">Quick Edit Documentation</a></p>\n      <p><a href="https://wordpress.org/support/" target="_blank">Support Forums</a></p>\n    '}),null),Cs=()=>{const i=a(),n=He(),[c,r]=e.useState(""),[d,o]=e.useState("all"),{data:x,isLoading:h,error:m}=Qe({queryKey:["posts",d,c],queryFn:async()=>{const e=new URLSearchParams;"all"!==d&&e.set("status",d),c&&e.set("search",c),e.set("type","post");return(await Ee.api.get(`/posts?${e}`)).data}}),u=x?.posts||[],{data:j}=Qe({queryKey:["categories"],queryFn:async()=>(await Ee.api.get("/categories")).data}),p=j||[],g=Ue({mutationFn:async({id:e,data:s})=>{const a={title:s.title,slug:s.slug,status:s.status,authorId:s.authorId,categoryIds:s.categoryIds,commentStatus:s.commentStatus,pingStatus:s.pingStatus};s.publishYear&&s.publishMonth&&s.publishDay&&(a.publishedAt=new Date(parseInt(s.publishYear),parseInt(s.publishMonth)-1,parseInt(s.publishDay)).toISOString()),s.tags&&(a.tags=s.tags.split(",").map(e=>e.trim()).filter(Boolean)),s.password&&(a.password=s.password),s.isPrivate&&(a.status="private"),a.isSticky=s.isSticky,await Ee.api.patch(`/posts/${e}`,a)},onSuccess:()=>{n.invalidateQueries({queryKey:["posts"]}),l.success("Post updated successfully")},onError:()=>{l.error("Failed to update post")}}),v=function({onSave:s,onCancel:a}){const[l,t]=e.useState(null),[i,n]=e.useState(!1),[c,r]=e.useState({}),d=e.useCallback((e,s)=>{t(e),r(s)},[]),o=e.useCallback(()=>{t(null),r({}),a?.()},[a]),x=e.useCallback(async()=>{if(l){n(!0);try{await s(l,c),t(null),r({})}finally{n(!1)}}},[l,c,s]),h=e.useCallback((e,s)=>{r(a=>({...a,[e]:s}))},[]),m=e.useCallback(e=>l===e,[l]);return{editingId:l,isEditing:m,isLoading:i,formData:c,startEdit:d,cancelEdit:o,saveEdit:x,updateField:h}}({onSave:async(e,s)=>{await g.mutateAsync({id:e,data:s})}}),y=Ue({mutationFn:async e=>{await Promise.all(e.map(e=>Ee.api.delete(`/posts/${e}`)))},onSuccess:()=>{n.invalidateQueries({queryKey:["posts"]}),l.success("Selected posts deleted successfully")},onError:()=>{l.error("Failed to delete some posts")}}),N=Ue({mutationFn:async({ids:e,status:s})=>{await Promise.all(e.map(e=>Ee.api.patch(`/posts/${e}`,{status:s})))},onSuccess:()=>{n.invalidateQueries({queryKey:["posts"]}),l.success("Posts status updated successfully")},onError:()=>{l.error("Failed to update some posts")}}),b=Ue({mutationFn:async e=>{await Ee.api.delete(`/posts/${e}`)},onSuccess:()=>{n.invalidateQueries({queryKey:["posts"]}),l.success("Post deleted successfully")},onError:()=>{l.error("Failed to delete post")}}),f=[{value:"trash",label:"Move to Trash",action:async e=>{await N.mutateAsync({ids:e,status:"trash"})},confirmMessage:"Are you sure you want to move {count} post(s) to trash?"},{value:"delete",label:"Delete Permanently",action:async e=>{await y.mutateAsync(e)},confirmMessage:"Are you sure you want to permanently delete {count} post(s)? This cannot be undone.",isDestructive:!0},{value:"publish",label:"Publish",action:async e=>{await N.mutateAsync({ids:e,status:"published"})}},{value:"draft",label:"Move to Draft",action:async e=>{await N.mutateAsync({ids:e,status:"draft"})}}],{selectedCount:w,isAllSelected:k,isProcessing:C,toggleAll:S,toggleItem:F,executeBulkAction:I,isSelected:P}=Ye({items:u,idField:"id",actions:f}),$=[{key:"title",label:"Title",sortable:!0,render:e=>s.jsxs("div",{children:[s.jsx(t,{to:`/posts/${e.id}/edit`,className:"font-medium text-blue-600 hover:text-blue-800",children:e.title||"(no title)"}),"draft"===e.status&&s.jsx("span",{className:"text-gray-500 text-sm ml-2",children:"— Draft"})]})},{key:"author",label:"Author",render:e=>e.author?.name||"Unknown"},{key:"categories",label:"Categories",render:e=>s.jsx("div",{className:"text-sm text-gray-600",children:e.categories?.map(e=>e.name).join(", ")||"—"})},{key:"tags",label:"Tags",render:e=>s.jsx("div",{className:"text-sm text-gray-600",children:e.tags?.map(e=>e.name).join(", ")||"—"})},{key:"comments",label:"Comments",render:e=>s.jsx("div",{className:"text-center",children:s.jsx("span",{className:"comment-count",children:e.commentCount||0})})},{key:"date",label:"Date",sortable:!0,render:e=>s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:"published"===e.status?"Published":"Last Modified"}),s.jsx("div",{className:"text-gray-600",children:De(e.updatedAt||e.createdAt)})]})}],L=e=>{const a=[{label:"Edit",onClick:()=>i(`/posts/${e.id}/edit`)},{label:"Quick Edit",onClick:()=>{v.startEdit(e.id,(e=>{const s=new Date(e.publishedAt||e.createdAt);return{title:e.title,slug:e.slug,status:e.status,authorId:e.author?.id,categoryIds:e.categories?.map(e=>e.id)||[],tags:e.tags?.map(e=>e.name).join(", ")||"",publishYear:s.getFullYear().toString(),publishMonth:(s.getMonth()+1).toString().padStart(2,"0"),publishDay:s.getDate().toString().padStart(2,"0"),commentStatus:e.commentStatus||"open",pingStatus:e.pingStatus||"open",password:e.password||"",isPrivate:"private"===e.status,isSticky:e.isSticky||!1}})(e))},className:"quick-edit"},{label:"Trash",onClick:async()=>{confirm("Are you sure you want to move this post to trash?")&&await b.mutateAsync(e.id)},className:"text-red-600"},{label:"View",href:`/posts/${e.slug}`,target:"_blank"}];return s.jsx(We,{actions:a,visible:!v.isEditing(e.id)})};return s.jsxs("div",{className:"wrap",children:[s.jsx(ks,{}),s.jsx(Xe,{}),s.jsx("h1",{className:"wp-heading-inline",children:"Posts"}),s.jsx(t,{to:"/posts/new",className:"page-title-action",children:"Add New"}),s.jsx("hr",{className:"wp-header-end"}),s.jsx("div",{className:"wp-filter",children:s.jsxs("div",{className:"filter-items",children:[s.jsxs(Ie,{value:d,onValueChange:e=>o(e),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"All posts"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"All posts"}),s.jsx(ze,{value:"published",children:"Published"}),s.jsx(ze,{value:"draft",children:"Draft"}),s.jsx(ze,{value:"scheduled",children:"Scheduled"}),s.jsx(ze,{value:"trash",children:"Trash"})]})]}),s.jsxs("div",{className:"search-box",children:[s.jsx(Fe,{type:"search",placeholder:"Search posts...",value:c,onChange:e=>r(e.target.value),className:"w-[300px]"}),s.jsx(qe,{variant:"secondary",children:"Search Posts"})]})]})}),s.jsx(Oe,{actions:f,selectedCount:w,onActionExecute:I,isProcessing:C,position:"top"}),h?s.jsx("div",{className:"text-center py-8",children:"Loading posts..."}):m?s.jsx("div",{className:"text-center py-8 text-red-600",children:"Error loading posts"}):s.jsxs("table",{className:"wp-list-table widefat fixed striped posts",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"manage-column column-cb check-column",children:[s.jsx("label",{className:"screen-reader-text",htmlFor:"cb-select-all",children:"Select All"}),s.jsx("input",{type:"checkbox",id:"cb-select-all",checked:k,onChange:S})]}),$.map(e=>s.jsx("th",{scope:"col",className:`manage-column column-${e.key}${e.sortable?" sortable":""}`,children:e.sortable?s.jsxs("a",{href:"#",children:[s.jsx("span",{children:e.label}),s.jsx("span",{className:"sorting-indicator"})]}):e.label},e.key))]})}),s.jsx("tbody",{id:"the-list",children:0===u.length?s.jsx("tr",{children:s.jsx("td",{colSpan:$.length+1,className:"colspanchange text-center py-4",children:"No posts found"})}):u.map((a,l)=>{const t=String(a.id),i=P(t),n=v.isEditing(t);return s.jsxs(e.Fragment,{children:[s.jsxs("tr",{className:`${i?"selected":""} ${l%2==0?"alternate":""} ${n?"hidden":""}`,children:[s.jsxs("th",{scope:"row",className:"check-column",children:[s.jsxs("label",{className:"screen-reader-text",htmlFor:`cb-select-${t}`,children:["Select ",a.title||`Post ${t}`]}),s.jsx("input",{type:"checkbox",id:`cb-select-${t}`,checked:i,onChange:()=>F(t)})]}),$.map(e=>s.jsxs("td",{className:`column-${e.key}`,children:[e.render?e.render(a):a[e.key],e.key===$[0].key&&L(a)]},e.key))]}),n&&s.jsx(ws,{post:a,formData:v.formData,onUpdate:v.updateField,onSave:v.saveEdit,onCancel:v.cancelEdit,isLoading:v.isLoading,categories:p})]},t)})}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"manage-column column-cb check-column",children:[s.jsx("label",{className:"screen-reader-text",htmlFor:"cb-select-all-2",children:"Select All"}),s.jsx("input",{type:"checkbox",id:"cb-select-all-2",checked:k,onChange:S})]}),$.map(e=>s.jsx("th",{scope:"col",className:`manage-column column-${e.key}`,children:e.label},e.key))]})})]}),s.jsx(Oe,{actions:f,selectedCount:w,onActionExecute:I,isProcessing:C,position:"bottom"}),s.jsx("div",{className:"tablenav bottom",children:s.jsx("div",{className:"tablenav-pages",children:s.jsxs("span",{className:"displaying-num",children:[u.length," items"]})})})]})};const Ss=new class{events={};on(e,s){return this.events[e]||(this.events[e]=[]),this.events[e].push(s),()=>{this.events[e]=this.events[e].filter(e=>e!==s)}}emit(e,...s){this.events[e]&&this.events[e].forEach(e=>{e(...s)})}off(e,s){this.events[e]&&(s?this.events[e]=this.events[e].filter(e=>e!==s):delete this.events[e])}},Fs="post:created",Is="post:updated",Ps=()=>{const t=a(),{id:x}=i(),h=He(),m=!!x,[u,j]=e.useState({title:"",content:"",excerpt:"",type:"post",status:"draft",visibility:"public",categoryIds:[],tagIds:[],meta:{seoTitle:"",seoDescription:"",seoKeywords:[]}}),[p,g]=e.useState([]),[v,y]=e.useState([]),[N,b]=e.useState(!1),[f,w]=e.useState(""),[k,C]=e.useState(""),[S,F]=e.useState(!1),[I,P]=e.useState(null),{data:$,isLoading:L}=Qe({queryKey:["post",x],queryFn:async()=>(await Ee.api.get(`/posts/${x}`)).data,enabled:m}),{data:z=[]}=Qe({queryKey:["categories"],queryFn:async()=>(await Ee.api.get("/categories")).data}),{data:A=[]}=Qe({queryKey:["tags"],queryFn:async()=>(await Ee.api.get("/tags")).data}),{isSaving:q,lastSaved:E,hasUnsavedChanges:D,savedInLocalStorage:M,recoverFromLocalStorage:T,clearLocalStorage:V}=Je(u,{postId:x,postType:"post",interval:3e4,onSaveSuccess:()=>{}});e.useEffect(()=>{(async()=>{const e=await T();e&&!x&&(P({data:e,timestamp:new Date}),F(!0))})()},[x,T]);const R=Ue({mutationFn:async e=>(await Ee.api.post("/posts",e)).data,onSuccess:e=>{l.success("게시글이 저장되었습니다"),h.invalidateQueries({queryKey:["posts"]}),V(),Ss.emit(Fs,{postType:"post",id:e.id}),t(`/content/posts/${e.id}/edit`)},onError:()=>{l.error("게시글 저장에 실패했습니다")}}),K=Ue({mutationFn:async e=>(await Ee.api.put(`/posts/${x}`,e)).data,onSuccess:()=>{l.success("게시글이 수정되었습니다"),h.invalidateQueries({queryKey:["posts"]}),h.invalidateQueries({queryKey:["post",x]}),V(),Ss.emit(Is,{postType:"post",id:x})},onError:()=>{l.error("게시글 수정에 실패했습니다")}});e.useEffect(()=>{if($&&(j({title:$.title,content:$.content,excerpt:$.excerpt||"",type:$.type,status:$.status,visibility:$.visibility,password:$.password,categoryIds:$.categoryIds||[],tagIds:$.tagIds||[],featuredImageId:$.featuredImageId,meta:$.meta||{seoTitle:"",seoDescription:"",seoKeywords:[]}}),g($.categoryIds||[]),y($.tagIds||[]),$.scheduledAt)){b(!0);const e=new Date($.scheduledAt);w(Ns(e,"yyyy-MM-dd")),C(Ns(e,"HH:mm"))}},[$]);const B=(e="draft")=>{const s={...u,status:e,categoryIds:p,tagIds:v,scheduledAt:N&&f&&k?new Date(`${f}T${k}`):void 0};m?K.mutate({id:x,...s}):R.mutate(s)};return m&&L?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>t("/content/posts"),children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"게시글 목록"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"게시글 수정":"새 게시글 작성"}),s.jsx(gs,{isSaving:q,lastSaved:E,hasUnsavedChanges:D,savedInLocalStorage:M})]}),S&&I&&s.jsx(vs,{timestamp:I.timestamp,onRecover:()=>{I&&(j(I.data),I.data.categoryIds&&g(I.data.categoryIds),I.data.tagIds&&y(I.data.tagIds),V(),F(!1),l.success("임시 저장된 내용이 복구되었습니다"))},onDiscard:()=>{V(),F(!1)}}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx("div",{className:"wp-card",children:s.jsxs("div",{className:"wp-card-body",children:[s.jsx(Me,{htmlFor:"title",children:"제목"}),s.jsx(Fe,{id:"title",placeholder:"게시글 제목을 입력하세요",value:u.title,onChange:e=>j({...u,title:e.target.value}),className:"mt-2"})]})}),s.jsx("div",{className:"wp-card",children:s.jsxs("div",{className:"wp-card-body",children:[s.jsx(Me,{children:"내용"}),s.jsx("div",{className:"mt-2",children:s.jsx(Ze,{content:u.content,onContentChange:e=>j({...u,content:e})})})]})}),s.jsx("div",{className:"wp-card",children:s.jsx("div",{className:"wp-card-body",children:s.jsxs(Te,{defaultValue:"excerpt",children:[s.jsxs(Ve,{className:"grid w-full grid-cols-3",children:[s.jsx(Re,{value:"excerpt",children:"요약"}),s.jsx(Re,{value:"seo",children:"SEO"}),s.jsx(Re,{value:"advanced",children:"고급"})]}),s.jsx(Ke,{value:"excerpt",className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"excerpt",children:"요약"}),s.jsx(Ae,{id:"excerpt",placeholder:"게시글 요약을 입력하세요 (선택사항)",value:u.excerpt,onChange:e=>j({...u,excerpt:e.target.value}),className:"mt-2",rows:3}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"요약은 목록에서 게시글 미리보기로 표시됩니다"})]})}),s.jsxs(Ke,{value:"seo",className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"seoTitle",children:"SEO 제목"}),s.jsx(Fe,{id:"seoTitle",placeholder:"검색 결과에 표시될 제목",value:u.meta?.seoTitle,onChange:e=>j({...u,meta:{...u.meta,seoTitle:e.target.value}}),className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"seoDescription",children:"SEO 설명"}),s.jsx(Ae,{id:"seoDescription",placeholder:"검색 결과에 표시될 설명",value:u.meta?.seoDescription,onChange:e=>j({...u,meta:{...u.meta,seoDescription:e.target.value}}),className:"mt-2",rows:3})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"seoKeywords",children:"SEO 키워드"}),s.jsx(Fe,{id:"seoKeywords",placeholder:"키워드를 쉼표로 구분하여 입력",value:u.meta?.seoKeywords?.join(", "),onChange:e=>j({...u,meta:{...u.meta,seoKeywords:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}}),className:"mt-2"})]})]}),s.jsx(Ke,{value:"advanced",className:"space-y-4",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"slug",children:"슬러그"}),s.jsx(Fe,{id:"slug",placeholder:"url-friendly-slug",value:u.slug||"",onChange:e=>j({...u,slug:e.target.value}),className:"mt-2"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"URL에 사용될 주소입니다. 비워두면 제목에서 자동 생성됩니다"})]})})})]})})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"게시"})}),s.jsxs("div",{className:"wp-card-body space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"상태:"}),s.jsxs(es,{variant:"published"===u.status?"default":"secondary",children:["draft"===u.status&&"임시저장","published"===u.status&&"게시됨","scheduled"===u.status&&"예약됨"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"공개 설정:"}),s.jsxs(Ie,{value:u.visibility,onValueChange:e=>j({...u,visibility:e}),children:[s.jsx(Pe,{className:"w-32",children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"public",children:"공개"}),s.jsx(ze,{value:"private",children:"비공개"}),s.jsx(ze,{value:"password",children:"비밀번호"})]})]})]}),"password"===u.visibility&&s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"password",children:"비밀번호"}),s.jsx(Fe,{id:"password",type:"password",value:u.password||"",onChange:e=>j({...u,password:e.target.value}),className:"mt-2"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{htmlFor:"schedule",className:"text-sm",children:"예약 게시"}),s.jsx(Be,{id:"schedule",checked:N,onCheckedChange:b})]}),N&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{type:"date",value:f,onChange:e=>w(e.target.value)}),s.jsx(Fe,{type:"time",value:k,onChange:e=>C(e.target.value)})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[s.jsxs(qe,{variant:"outline",className:"flex-1",onClick:()=>B("draft"),disabled:R.isPending||K.isPending,children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),"임시저장"]}),s.jsx(qe,{className:"flex-1",onClick:()=>B(N?"scheduled":"published"),disabled:R.isPending||K.isPending,children:N?s.jsxs(s.Fragment,{children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"예약"]}):s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"게시"]})})]})]})]}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"카테고리"})}),s.jsxs("div",{className:"wp-card-body",children:[s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:z.map(e=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:p.includes(e.id),onChange:s=>{s.target.checked?g([...p,e.id]):g(p.filter(s=>s!==e.id))}}),s.jsx("span",{className:"text-sm",children:e.name})]},e.id))}),0===z.length&&s.jsx("p",{className:"text-sm text-gray-500",children:"카테고리가 없습니다"})]})]}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"태그"})}),s.jsxs("div",{className:"wp-card-body",children:[s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:A.map(e=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:v.includes(e.id),onChange:s=>{s.target.checked?y([...v,e.id]):y(v.filter(s=>s!==e.id))}}),s.jsx("span",{className:"text-sm",children:e.name})]},e.id))}),0===A.length&&s.jsx("p",{className:"text-sm text-gray-500",children:"태그가 없습니다"})]})]}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"대표 이미지"})}),s.jsx("div",{className:"wp-card-body",children:u.featuredImage?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:u.featuredImage.url,alt:u.featuredImage.alt||"",className:"w-full h-32 object-cover rounded"}),s.jsx(qe,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>j({...u,featuredImageId:void 0,featuredImage:void 0}),children:"제거"})]}):s.jsxs(qe,{variant:"outline",className:"w-full",children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"이미지 선택"]})})]})]})]})]})},$s=e.forwardRef(({className:e,...a},l)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:l,className:_e("w-full caption-bottom text-sm",e),...a})}));$s.displayName="Table";const Ls=e.forwardRef(({className:e,...a},l)=>s.jsx("thead",{ref:l,className:_e("[&_tr]:border-b",e),...a}));Ls.displayName="TableHeader";const zs=e.forwardRef(({className:e,...a},l)=>s.jsx("tbody",{ref:l,className:_e("[&_tr:last-child]:border-0",e),...a}));zs.displayName="TableBody";e.forwardRef(({className:e,...a},l)=>s.jsx("tfoot",{ref:l,className:_e("border-t bg-gray-50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";const As=e.forwardRef(({className:e,...a},l)=>s.jsx("tr",{ref:l,className:_e("border-b transition-colors hover:bg-gray-50 data-[state=selected]:bg-gray-100",e),...a}));As.displayName="TableRow";const qs=e.forwardRef(({className:e,...a},l)=>s.jsx("th",{ref:l,className:_e("h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0",e),...a}));qs.displayName="TableHead";const Es=e.forwardRef(({className:e,...a},l)=>s.jsx("td",{ref:l,className:_e("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));Es.displayName="TableCell";e.forwardRef(({className:e,...a},l)=>s.jsx("caption",{ref:l,className:_e("mt-4 text-sm text-gray-500",e),...a})).displayName="TableCaption";const Ds=()=>{const i=a(),n=He(),[c,r]=e.useState(""),[o,v]=e.useState("all"),[y,N]=e.useState([]),{data:b,isLoading:f,error:w}=Qe({queryKey:["pages",o,c],queryFn:async()=>{const e=new URLSearchParams;"all"!==o&&e.set("status",o),c&&e.set("search",c),e.set("type","page");return(await Ee.api.get(`/posts?${e}`)).data}}),k=Ue({mutationFn:async e=>{await Ee.api.delete(`/posts/${e}`)},onSuccess:()=>{n.invalidateQueries({queryKey:["pages"]}),l.success("페이지가 삭제되었습니다")},onError:()=>{l.error("페이지 삭제에 실패했습니다")}}),C=Ue({mutationFn:async e=>{await Ee.api.post(`/posts/${e}/duplicate`)},onSuccess:()=>{n.invalidateQueries({queryKey:["pages"]}),l.success("페이지가 복제되었습니다")},onError:()=>{l.error("페이지 복제에 실패했습니다")}}),S=Ue({mutationFn:async e=>{await Ee.api.post("/settings/homepage",{pageId:e})},onSuccess:()=>{n.invalidateQueries({queryKey:["pages"]}),l.success("홈페이지로 설정되었습니다")},onError:()=>{l.error("홈페이지 설정에 실패했습니다")}}),F=e=>{switch(e){case"published":return s.jsx(es,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"게시됨"});case"draft":return s.jsx(es,{variant:"secondary",children:"임시저장"});case"scheduled":return s.jsx(es,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"예약됨"});case"trash":return s.jsx(es,{variant:"destructive",children:"휴지통"});default:return s.jsx(es,{children:e})}},I=b?.posts||[];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"페이지"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"사이트의 정적 페이지를 관리합니다"})]}),s.jsxs(qe,{onClick:()=>i("/content/pages/new"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"새 페이지"]})]}),s.jsx("div",{className:"wp-card",children:s.jsx("div",{className:"wp-card-body",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx(Fe,{placeholder:"페이지 검색...",value:c,onChange:e=>r(e.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:o,onValueChange:e=>v(e),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"상태 필터"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"모든 상태"}),s.jsx(ze,{value:"published",children:"게시됨"}),s.jsx(ze,{value:"draft",children:"임시저장"}),s.jsx(ze,{value:"scheduled",children:"예약됨"}),s.jsx(ze,{value:"trash",children:"휴지통"})]})]}),y.length>0&&s.jsxs(Ie,{onValueChange:e=>{0!==y.length||l.error("선택된 페이지가 없습니다")},children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"일괄 작업"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"delete",children:"삭제"}),s.jsx(ze,{value:"publish",children:"게시"}),s.jsx(ze,{value:"draft",children:"임시저장으로 변경"})]})]})]})})}),s.jsx("div",{className:"wp-card",children:s.jsx("div",{className:"wp-card-body p-0",children:f?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):w?s.jsx("div",{className:"text-center py-12 text-red-600",children:"페이지를 불러오는데 실패했습니다"}):0===I.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"페이지가 없습니다"}),s.jsx(qe,{onClick:()=>i("/content/pages/new"),children:"첫 페이지 만들기"})]}):s.jsxs($s,{children:[s.jsx(Ls,{children:s.jsxs(As,{children:[s.jsx(qs,{className:"w-12",children:s.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:y.length===I.length,onChange:e=>{e.target.checked?N(I.map(e=>e.id)):N([])}})}),s.jsx(qs,{children:"제목"}),s.jsx(qs,{children:"작성자"}),s.jsx(qs,{children:"템플릿"}),s.jsx(qs,{children:"상태"}),s.jsx(qs,{children:"날짜"}),s.jsx(qs,{className:"w-12"})]})}),s.jsx(zs,{children:I.map(e=>s.jsxs(As,{children:[s.jsx(Es,{children:s.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:y.includes(e.id),onChange:s=>{s.target.checked?N([...y,e.id]):N(y.filter(s=>s!==e.id))}})}),s.jsx(Es,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{children:[s.jsx(t,{to:`/content/pages/${e.id}/edit`,className:"font-medium text-gray-900 hover:text-gray-700",children:e.title||"(제목 없음)"}),e.slug&&s.jsxs("p",{className:"text-sm text-gray-500",children:["/",e.slug]})]}),e.isHomepage&&s.jsxs(es,{variant:"outline",className:"flex items-center gap-1",children:[s.jsx(m,{className:"w-3 h-3"}),"홈"]})]})}),s.jsx(Es,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium",children:e.author?.name}),s.jsx("div",{className:"text-gray-500",children:e.author?.email})]})}),s.jsx(Es,{children:e.template?s.jsx(es,{variant:"outline",children:e.template}):s.jsx("span",{className:"text-gray-500",children:"기본"})}),s.jsx(Es,{children:F(e.status)}),s.jsx(Es,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:De(e.publishedAt||e.createdAt)}),s.jsx("div",{className:"text-gray-500",children:"published"===e.status?"게시됨":"수정됨"})]})}),s.jsx(Es,{children:s.jsxs(ss,{children:[s.jsx(as,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(ls,{align:"end",children:[s.jsxs(ts,{onClick:()=>i(`/content/pages/${e.id}/edit`),children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"편집"]}),s.jsxs(ts,{onClick:()=>window.open(`/${e.slug}`,"_blank"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"보기"]}),s.jsxs(ts,{onClick:()=>C.mutate(e.id),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"복제"]}),!e.isHomepage&&s.jsxs(ts,{onClick:()=>S.mutate(e.id),children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"홈페이지로 설정"]}),s.jsx(is,{}),s.jsxs(ts,{className:"text-red-600",onClick:()=>{confirm("정말 이 페이지를 삭제하시겠습니까?")&&k.mutate(e.id)},disabled:e.isHomepage,children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})})]},e.id))})]})})})]})},Ms=()=>{const e=a(),t=He(),{data:i=[],isLoading:n}=Qe({queryKey:["custom-post-types"],queryFn:async()=>(await Ee.api.get("/v1/platform/custom-post-types")).data}),c=Ue({mutationFn:async e=>Ee.api.delete(`/v1/platform/custom-post-types/${e}`),onSuccess:()=>{t.invalidateQueries({queryKey:["custom-post-types"]}),l.success("사용자 정의 게시물 유형이 삭제되었습니다")},onError:()=>{l.error("삭제에 실패했습니다")}}),r=e=>{const s=[];return e.title&&s.push("제목"),e.editor&&s.push("에디터"),e.thumbnail&&s.push("대표 이미지"),e.customFields&&s.push("커스텀 필드"),e.comments&&s.push("댓글"),s};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"사용자 정의 게시물 유형"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"다양한 콘텐츠 유형을 생성하고 관리합니다"})]}),s.jsxs(qe,{onClick:()=>e("/content/cpt/new"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"새 게시물 유형"]})]}),n?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs(ns,{className:"border-gray-300",children:[s.jsx(cs,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(v,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx(rs,{className:"text-lg",children:"게시글"}),s.jsx("p",{className:"text-sm text-gray-500",children:"post"})]})]}),s.jsx(es,{variant:"secondary",children:"기본"})]})}),s.jsxs(ds,{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"블로그 게시글과 뉴스를 위한 기본 게시물 유형"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:["제목","에디터","카테고리","태그","대표 이미지"].map(e=>s.jsx(es,{variant:"outline",className:"text-xs",children:e},e))}),s.jsx("div",{className:"flex items-center justify-between pt-4 border-t",children:s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>e("/content/posts"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"게시글 관리"]})})]})]}),s.jsxs(ns,{className:"border-gray-300",children:[s.jsx(cs,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(v,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx(rs,{className:"text-lg",children:"페이지"}),s.jsx("p",{className:"text-sm text-gray-500",children:"page"})]})]}),s.jsx(es,{variant:"secondary",children:"기본"})]})}),s.jsxs(ds,{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"정적 페이지를 위한 기본 게시물 유형"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:["제목","에디터","페이지 속성","대표 이미지"].map(e=>s.jsx(es,{variant:"outline",className:"text-xs",children:e},e))}),s.jsx("div",{className:"flex items-center justify-between pt-4 border-t",children:s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>e("/content/pages"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"페이지 관리"]})})]})]}),i.map(a=>s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.icon?s.jsx("span",{className:"text-2xl",children:a.icon}):s.jsx(y,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx(rs,{className:"text-lg",children:a.pluralName}),s.jsx("p",{className:"text-sm text-gray-500",children:a.slug})]})]}),s.jsxs(ss,{children:[s.jsx(as,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(ls,{align:"end",children:[s.jsxs(ts,{onClick:()=>e(`/content/cpt/${a.id}/edit`),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"편집"]}),s.jsxs(ts,{onClick:()=>e(`/content/cpt/${a.id}/fields`),children:[s.jsx(b,{className:"w-4 h-4 mr-2"}),"필드 관리"]}),s.jsxs(ts,{onClick:()=>e(`/content/${a.slug}`),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"콘텐츠 보기"]}),s.jsx(is,{}),s.jsxs(ts,{onClick:()=>(e=>{confirm(`정말 "${e.name}"을(를) 삭제하시겠습니까?\n이 유형의 모든 게시물도 함께 삭제됩니다.`)&&c.mutate(e.id)})(a),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})]})}),s.jsxs(ds,{children:[a.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:a.description}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[a.isPublic?s.jsx(d,{className:"w-4 h-4 text-green-600"}):s.jsx(f,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm",children:a.isPublic?"공개":"비공개"})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:r(a.supports).map(e=>s.jsx(es,{variant:"outline",className:"text-xs",children:e},e))}),a.fieldGroups.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[a.fieldGroups.reduce((e,s)=>e+s.fields.length,0),"개 커스텀 필드"]})]}),a.taxonomies.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:a.taxonomies.map(e=>s.jsx(es,{variant:"secondary",className:"text-xs",children:e},e))})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.createdAt).toLocaleDateString()}),s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>e(`/content/${a.slug}`),children:"콘텐츠 관리"})]})]})]},a.id)),s.jsx(ns,{className:"border-dashed border-2 hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>e("/content/cpt/new"),children:s.jsxs(ds,{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[s.jsx("div",{className:"p-3 bg-gray-100 rounded-full mb-4",children:s.jsx(x,{className:"w-8 h-8 text-gray-600"})}),s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"새 게시물 유형 추가"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["제품, 포트폴리오, 이벤트 등",s.jsx("br",{}),"다양한 콘텐츠 유형을 만들어보세요"]})]})})]})]})},Ts=[{value:"📄",label:"문서"},{value:"📝",label:"글쓰기"},{value:"📊",label:"차트"},{value:"🎨",label:"디자인"},{value:"🛍️",label:"쇼핑"},{value:"📸",label:"사진"},{value:"🎬",label:"비디오"},{value:"🎵",label:"음악"},{value:"📅",label:"캘린더"},{value:"👥",label:"사람"},{value:"💼",label:"비즈니스"},{value:"🏢",label:"회사"},{value:"🎯",label:"목표"},{value:"💡",label:"아이디어"},{value:"🔧",label:"도구"}],Vs=()=>{const t=a(),{id:r}=i(),d=He(),o=!!r,[h,m]=e.useState({name:"",singularName:"",pluralName:"",slug:"",description:"",icon:"📄",menuPosition:5,isPublic:!0,showInMenu:!0,showInAdminBar:!0,hasArchive:!0,supports:{title:!0,editor:!0,excerpt:!0,thumbnail:!0,customFields:!0,comments:!1,revisions:!0,author:!0,pageAttributes:!1},labels:{},taxonomies:[]}),[u,j]=e.useState([]),{data:p,isLoading:g}=Qe({queryKey:["custom-post-type",r],queryFn:async()=>(await Ee.api.get(`/v1/platform/custom-post-types/${r}`)).data,enabled:o}),{data:v=[]}=Qe({queryKey:["taxonomies"],queryFn:async()=>[{id:"category",name:"카테고리",slug:"category"},{id:"tag",name:"태그",slug:"tag"}]}),y=Ue({mutationFn:async e=>(await Ee.api.post("/v1/platform/custom-post-types",e)).data,onSuccess:()=>{l.success("사용자 정의 게시물 유형이 생성되었습니다"),d.invalidateQueries({queryKey:["custom-post-types"]}),t("/cpt")},onError:()=>{l.error("생성에 실패했습니다")}}),N=Ue({mutationFn:async e=>(await Ee.api.put(`/v1/platform/custom-post-types/${r}`,e)).data,onSuccess:()=>{l.success("사용자 정의 게시물 유형이 수정되었습니다"),d.invalidateQueries({queryKey:["custom-post-types"]}),d.invalidateQueries({queryKey:["custom-post-type",r]})},onError:()=>{l.error("수정에 실패했습니다")}});e.useEffect(()=>{p&&(m({name:p.name,singularName:p.singularName,pluralName:p.pluralName,slug:p.slug,description:p.description,icon:p.icon,menuPosition:p.menuPosition,isPublic:p.isPublic,showInMenu:p.showInMenu,showInAdminBar:p.showInAdminBar,hasArchive:p.hasArchive,supports:p.supports,labels:p.labels,taxonomies:p.taxonomies}),j(p.taxonomies||[]))},[p]);const b=e=>e.toLowerCase().replace(/[^a-z0-9가-힣]+/g,"_").replace(/^_+|_+$/g,"");return o&&g?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>t("/content/cpt"),children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"CPT 목록"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o?"CPT 수정":"새 사용자 정의 게시물 유형"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(ns,{children:[s.jsxs(cs,{children:[s.jsx(rs,{children:"기본 정보"}),s.jsx(os,{children:"게시물 유형의 기본 정보를 입력하세요"})]}),s.jsxs(ds,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"icon",children:"아이콘"}),s.jsxs(Ie,{value:h.icon,onValueChange:e=>m({...h,icon:e}),children:[s.jsx(Pe,{className:"mt-2",children:s.jsx($e,{})}),s.jsx(Le,{children:Ts.map(e=>s.jsx(ze,{value:e.value,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:e.value}),s.jsx("span",{children:e.label})]})},e.value))})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"menuPosition",children:"메뉴 위치"}),s.jsx(Fe,{id:"menuPosition",type:"number",value:h.menuPosition,onChange:e=>m({...h,menuPosition:parseInt(e.target.value)||5}),className:"mt-2"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"숫자가 작을수록 상단에 표시"})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"name",children:"이름"}),s.jsx(Fe,{id:"name",value:h.name,onChange:e=>{return s=e.target.value,void m(o?{...h,name:s}:{...h,name:s,singularName:s,pluralName:s,slug:b(s)});var s},placeholder:"예: 제품",className:"mt-2",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"singularName",children:"단수형 이름"}),s.jsx(Fe,{id:"singularName",value:h.singularName,onChange:e=>m({...h,singularName:e.target.value}),placeholder:"예: 제품",className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"pluralName",children:"복수형 이름"}),s.jsx(Fe,{id:"pluralName",value:h.pluralName,onChange:e=>m({...h,pluralName:e.target.value}),placeholder:"예: 제품들",className:"mt-2"})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"slug",children:"슬러그 (URL)"}),s.jsx(Fe,{id:"slug",value:h.slug,onChange:e=>m({...h,slug:e.target.value}),placeholder:"예: product",className:"mt-2",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL에 사용될 고유 식별자"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"description",children:"설명 (선택)"}),s.jsx(Ae,{id:"description",value:h.description,onChange:e=>m({...h,description:e.target.value}),placeholder:"이 게시물 유형에 대한 설명",rows:3,className:"mt-2"})]})]})]}),s.jsxs(ns,{children:[s.jsxs(cs,{children:[s.jsx(rs,{children:"기능 지원"}),s.jsx(os,{children:"이 게시물 유형에서 사용할 기능을 선택하세요"})]}),s.jsx(ds,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.title,onCheckedChange:e=>m({...h,supports:{...h.supports,title:!!e}})}),s.jsx("span",{children:"제목"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.editor,onCheckedChange:e=>m({...h,supports:{...h.supports,editor:!!e}})}),s.jsx("span",{children:"에디터"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.excerpt,onCheckedChange:e=>m({...h,supports:{...h.supports,excerpt:!!e}})}),s.jsx("span",{children:"요약"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.thumbnail,onCheckedChange:e=>m({...h,supports:{...h.supports,thumbnail:!!e}})}),s.jsx("span",{children:"대표 이미지"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.customFields,onCheckedChange:e=>m({...h,supports:{...h.supports,customFields:!!e}})}),s.jsx("span",{children:"커스텀 필드"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.comments,onCheckedChange:e=>m({...h,supports:{...h.supports,comments:!!e}})}),s.jsx("span",{children:"댓글"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.revisions,onCheckedChange:e=>m({...h,supports:{...h.supports,revisions:!!e}})}),s.jsx("span",{children:"리비전"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.author,onCheckedChange:e=>m({...h,supports:{...h.supports,author:!!e}})}),s.jsx("span",{children:"작성자"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.pageAttributes,onCheckedChange:e=>m({...h,supports:{...h.supports,pageAttributes:!!e}})}),s.jsx("span",{children:"페이지 속성"})]})]})})]}),s.jsxs(ns,{children:[s.jsxs(cs,{children:[s.jsx(rs,{children:"분류 체계"}),s.jsx(os,{children:"이 게시물 유형에서 사용할 분류 체계를 선택하세요"})]}),s.jsxs(ds,{children:[s.jsx("div",{className:"space-y-2",children:v.map(e=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:u.includes(e.id),onCheckedChange:s=>{j(s?[...u,e.id]:u.filter(s=>s!==e.id))}}),s.jsx("span",{children:e.name}),s.jsx(es,{variant:"outline",className:"text-xs",children:e.slug})]},e.id))}),s.jsxs(qe,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>t("/content/taxonomies/new"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"새 분류 체계 추가"]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"공개 설정"})}),s.jsxs(ds,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Me,{htmlFor:"isPublic",children:"공개"}),s.jsx("p",{className:"text-xs text-gray-500",children:"사용자에게 표시"})]}),s.jsx(Be,{id:"isPublic",checked:h.isPublic,onCheckedChange:e=>m({...h,isPublic:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Me,{htmlFor:"showInMenu",children:"메뉴에 표시"}),s.jsx("p",{className:"text-xs text-gray-500",children:"관리자 메뉴에 표시"})]}),s.jsx(Be,{id:"showInMenu",checked:h.showInMenu,onCheckedChange:e=>m({...h,showInMenu:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Me,{htmlFor:"showInAdminBar",children:"관리 막대에 표시"}),s.jsx("p",{className:"text-xs text-gray-500",children:"상단 관리 막대에 표시"})]}),s.jsx(Be,{id:"showInAdminBar",checked:h.showInAdminBar,onCheckedChange:e=>m({...h,showInAdminBar:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Me,{htmlFor:"hasArchive",children:"아카이브 페이지"}),s.jsx("p",{className:"text-xs text-gray-500",children:"목록 페이지 생성"})]}),s.jsx(Be,{id:"hasArchive",checked:h.hasArchive,onCheckedChange:e=>m({...h,hasArchive:e})})]})]})]}),s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"작업"})}),s.jsxs(ds,{className:"space-y-3",children:[s.jsxs(qe,{onClick:()=>{const e={...h,taxonomies:u};o?N.mutate({id:r,...e}):y.mutate(e)},className:"w-full",disabled:!h.name||!h.slug||y.isPending||N.isPending,children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),o?"CPT 수정":"CPT 생성"]}),o&&s.jsxs(qe,{variant:"outline",className:"w-full",onClick:()=>t(`/content/cpt/${r}/fields`),children:[s.jsx(k,{className:"w-4 h-4 mr-2"}),"커스텀 필드 관리"]})]})]}),s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"미리보기"})}),s.jsx(ds,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:h.icon}),s.jsx("span",{className:"font-medium",children:h.pluralName||"새 게시물 유형"})]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["슬러그: ",s.jsx("code",{className:"bg-gray-100 px-1",children:h.slug||"slug"})]}),s.jsxs("p",{children:["URL: ",s.jsxs("code",{className:"bg-gray-100 px-1",children:["/content/",h.slug||"slug"]})]})]})]})})]})]})]})]})},Rs=[{value:"text",label:"텍스트",icon:I},{value:"textarea",label:"텍스트 영역",icon:v},{value:"number",label:"숫자",icon:P},{value:"select",label:"선택",icon:$},{value:"checkbox",label:"체크박스",icon:L},{value:"radio",label:"라디오",icon:z},{value:"date",label:"날짜",icon:r},{value:"image",label:"이미지",icon:o},{value:"file",label:"파일",icon:v},{value:"wysiwyg",label:"에디터",icon:v},{value:"color",label:"색상",icon:A},{value:"url",label:"URL",icon:q},{value:"email",label:"이메일",icon:E},{value:"repeater",label:"반복 필드",icon:p},{value:"relationship",label:"관계",icon:b}],Ks=()=>{const t=a(),{cptId:r}=i(),d=He(),[o,h]=e.useState([]),[m,u]=e.useState(null),[j,p]=e.useState(null),[v,y]=e.useState(!1),[N,b]=e.useState(!1),[f,w]=e.useState([]),[P,$]=e.useState({name:"",key:"",description:"",position:"normal",order:0}),[L,z]=e.useState({name:"",key:"",type:"text",label:"",description:"",required:!1}),{data:A,isLoading:q}=Qe({queryKey:["custom-post-type",r],queryFn:async()=>(await Ee.api.get(`/custom-post-types/${r}`)).data}),E=Ue({mutationFn:async e=>(await Ee.api.put(`/custom-post-types/${r}/field-groups`,{fieldGroups:e})).data,onSuccess:()=>{l.success("커스텀 필드가 저장되었습니다"),d.invalidateQueries({queryKey:["custom-post-type",r]})},onError:()=>{l.error("저장에 실패했습니다")}});e.useEffect(()=>{A?.fieldGroups&&(h(A.fieldGroups),w(A.fieldGroups.map(e=>e.id)))},[A]);const D=e=>e.toLowerCase().replace(/[^a-z0-9가-힣]+/g,"_").replace(/^_+|_+$/g,""),M=()=>{u(null),$({name:"",key:"",description:"",position:"normal",order:o.length}),y(!0)},T=e=>{const a=Rs.find(s=>s.value===e),l=a?.icon||I;return s.jsx(l,{className:"w-4 h-4"})};return q?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>t("/content/cpt"),children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"CPT 목록"]}),s.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[A?.name," - 커스텀 필드"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:0===o.length?s.jsx(ns,{children:s.jsxs(ds,{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"필드 그룹이 없습니다"}),s.jsxs(qe,{onClick:M,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"첫 필드 그룹 만들기"]})]})}):o.map(e=>s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("button",{onClick:()=>{return s=e.id,void w(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"flex items-center gap-2 text-left w-full",children:[f.includes(e.id)?s.jsx(C,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"}),s.jsx(rs,{className:"text-lg",children:e.name})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-6",children:e.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{variant:"outline",children:e.position}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>(e=>{u(e),$({name:e.name,key:e.key,description:e.description||"",position:e.position,order:e.order}),y(!0)})(e),children:s.jsx(k,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,void(confirm("정말 이 필드 그룹을 삭제하시겠습니까?")&&h(o.filter(e=>e.id!==s)));var s},children:s.jsx(g,{className:"w-4 h-4 text-red-500"})})]})]})}),f.includes(e.id)&&s.jsx(ds,{children:s.jsxs("div",{className:"space-y-2",children:[e.fields.map(a=>s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(F,{className:"w-5 h-5 text-gray-400 cursor-move"}),s.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[T(a.type),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:a.label}),s.jsxs("div",{className:"text-sm text-gray-500",children:[a.key," · ",Rs.find(e=>e.value===a.type)?.label,a.required&&" · 필수"]})]})]}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>((e,s)=>{p({...e,tempId:s}),z({name:e.name,key:e.key,type:e.type,label:e.label||"",description:e.description||"",required:e.required||!1,placeholder:e.placeholder,min:e.min,max:e.max,maxLength:e.maxLength,options:e.options}),b(!0)})(a,e.id),children:s.jsx(k,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{return s=a.id,l=e.id,void h(o.map(e=>e.id===l?{...e,fields:e.fields.filter(e=>e.id!==s)}:e));var s,l},children:s.jsx(g,{className:"w-4 h-4 text-red-500"})})]},a.id)),s.jsxs(qe,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>(p(null),z({name:"",key:"",type:"text",label:"",description:"",required:!1}),void b(!0)),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"필드 추가"]})]})})]},e.id))}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"작업"})}),s.jsxs(ds,{className:"space-y-3",children:[s.jsxs(qe,{onClick:()=>{E.mutate(o)},className:"w-full",disabled:E.isPending,children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),"변경사항 저장"]}),s.jsxs(qe,{variant:"outline",className:"w-full",onClick:M,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"새 필드 그룹"]})]})]}),s.jsxs(ns,{children:[s.jsxs(cs,{children:[s.jsx(rs,{children:"필드 유형"}),s.jsx(os,{children:"사용 가능한 필드 유형들"})]}),s.jsx(ds,{children:s.jsx("div",{className:"space-y-2",children:Rs.slice(0,8).map(e=>{const a=e.icon;return s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(a,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:e.label})]},e.value)})})})]})]})]}),s.jsx(xs,{open:v,onOpenChange:y,children:s.jsxs(hs,{children:[s.jsxs(ms,{children:[s.jsx(us,{children:m?"필드 그룹 수정":"새 필드 그룹"}),s.jsx(js,{children:"관련된 필드들을 그룹으로 묶어 관리하세요"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"groupName",children:"그룹 이름"}),s.jsx(Fe,{id:"groupName",value:P.name,onChange:e=>$({...P,name:e.target.value,key:D(e.target.value)}),placeholder:"예: 제품 정보"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"groupKey",children:"그룹 키"}),s.jsx(Fe,{id:"groupKey",value:P.key,onChange:e=>$({...P,key:e.target.value}),placeholder:"예: product_info"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"groupDescription",children:"설명 (선택)"}),s.jsx(Ae,{id:"groupDescription",value:P.description,onChange:e=>$({...P,description:e.target.value}),placeholder:"이 필드 그룹에 대한 설명",rows:2})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"groupPosition",children:"위치"}),s.jsxs(Ie,{value:P.position,onValueChange:e=>$({...P,position:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"normal",children:"일반"}),s.jsx(ze,{value:"side",children:"사이드바"}),s.jsx(ze,{value:"advanced",children:"고급"})]})]})]})]}),s.jsxs(ps,{children:[s.jsx(qe,{variant:"outline",onClick:()=>y(!1),children:"취소"}),s.jsx(qe,{onClick:()=>{const e={id:m?.id||`group-${Date.now()}`,...P,fields:m?.fields||[],rules:m?.rules||{}};h(m?o.map(s=>s.id===m.id?e:s):[...o,e]),y(!1)},children:"저장"})]})]})}),s.jsx(xs,{open:N,onOpenChange:b,children:s.jsxs(hs,{className:"max-w-2xl",children:[s.jsxs(ms,{children:[s.jsx(us,{children:j?"필드 수정":"새 필드"}),s.jsx(js,{children:"커스텀 필드를 생성하거나 수정합니다"})]}),s.jsxs("div",{className:"space-y-4 py-4 max-h-[500px] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldName",children:"필드 이름"}),s.jsx(Fe,{id:"fieldName",value:L.name,onChange:e=>z({...L,name:e.target.value,key:D(e.target.value),label:e.target.value}),placeholder:"예: 가격"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldKey",children:"필드 키"}),s.jsx(Fe,{id:"fieldKey",value:L.key,onChange:e=>z({...L,key:e.target.value}),placeholder:"예: price"})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldType",children:"필드 유형"}),s.jsxs(Ie,{value:L.type,onValueChange:e=>z({...L,type:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsx(Le,{children:Rs.map(e=>{const a=e.icon;return s.jsx(ze,{value:e.value,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(a,{className:"w-4 h-4"}),e.label]})},e.value)})})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldLabel",children:"레이블"}),s.jsx(Fe,{id:"fieldLabel",value:L.label,onChange:e=>z({...L,label:e.target.value}),placeholder:"편집 화면에 표시될 레이블"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldDescription",children:"설명 (선택)"}),s.jsx(Ae,{id:"fieldDescription",value:L.description,onChange:e=>z({...L,description:e.target.value}),placeholder:"필드 사용 방법에 대한 설명",rows:2})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldPlaceholder",children:"플레이스홀더 (선택)"}),s.jsx(Fe,{id:"fieldPlaceholder",value:L.placeholder,onChange:e=>z({...L,placeholder:e.target.value}),placeholder:"입력 필드에 표시될 힌트 텍스트"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{id:"fieldRequired",checked:L.required,onCheckedChange:e=>z({...L,required:e})}),s.jsx(Me,{htmlFor:"fieldRequired",children:"필수 필드"})]}),"number"===L.type&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldMin",children:"최소값"}),s.jsx(Fe,{id:"fieldMin",type:"number",value:L.min,onChange:e=>z({...L,min:parseInt(e.target.value)})})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldMax",children:"최대값"}),s.jsx(Fe,{id:"fieldMax",type:"number",value:L.max,onChange:e=>z({...L,max:parseInt(e.target.value)})})]})]}),("text"===L.type||"textarea"===L.type)&&s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"fieldMaxLength",children:"최대 길이"}),s.jsx(Fe,{id:"fieldMaxLength",type:"number",value:L.maxLength,onChange:e=>z({...L,maxLength:parseInt(e.target.value)})})]}),("select"===L.type||"checkbox"===L.type||"radio"===L.type)&&s.jsxs("div",{children:[s.jsx(Me,{children:"옵션"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[(L.options||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Fe,{placeholder:"레이블",value:e.label,onChange:s=>{const l=[...L.options||[]];l[a]={...e,label:s.target.value},z({...L,options:l})}}),s.jsx(Fe,{placeholder:"값",value:e.value,onChange:s=>{const l=[...L.options||[]];l[a]={...e,value:s.target.value},z({...L,options:l})}}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{const e=L.options?.filter((e,s)=>s!==a);z({...L,options:e})},children:s.jsx(g,{className:"w-4 h-4"})})]},a)),s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>{const e=[...L.options||[],{label:"",value:""}];z({...L,options:e})},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"옵션 추가"]})]})]})]}),s.jsxs(ps,{children:[s.jsx(qe,{variant:"outline",onClick:()=>b(!1),children:"취소"}),s.jsx(qe,{onClick:()=>{const e=j?.tempId||o[0]?.id;if(!e)return;const s={id:j?.id||`field-${Date.now()}`,name:L.name,key:L.key,type:L.type,label:L.label,description:L.description,required:L.required,...L.placeholder&&{placeholder:L.placeholder},...void 0!==L.min&&{min:L.min},...void 0!==L.max&&{max:L.max},...void 0!==L.maxLength&&{maxLength:L.maxLength},...L.options&&{options:L.options}};h(o.map(a=>a.id===e?j?.id?{...a,fields:a.fields.map(e=>e.id===j.id?s:e)}:{...a,fields:[...a.fields,s]}:a)),b(!1)},children:"저장"})]})]})})]})},Bs=()=>{const t=a(),{slug:n}=i(),c=He(),[o,m]=e.useState([]),[j,v]=e.useState(""),[y,b]=e.useState("all"),[f,w]=e.useState(1),{data:k}=Qe({queryKey:["custom-post-types"],queryFn:async()=>(await Ee.api.get("/custom-post-types")).data}),C=k?.find(e=>e.slug===n),{data:S,isLoading:F}=Qe({queryKey:["posts",n,{status:y,search:j,page:f,limit:20}],queryFn:async()=>{const e=new URLSearchParams({post_type:n||"",page:f.toString(),limit:20..toString()});"all"!==y&&e.append("status",y),j&&e.append("search",j);return(await Ee.api.get(`/posts?${e}`)).data},enabled:!!n}),I=Ue({mutationFn:async e=>Ee.api.delete(`/posts/${e}`),onSuccess:()=>{c.invalidateQueries({queryKey:["posts",n]}),l.success("콘텐츠가 삭제되었습니다")},onError:()=>{l.error("삭제에 실패했습니다")}}),P=e=>{switch(e){case"published":return"success";case"draft":return"secondary";case"scheduled":return"warning";case"trash":return"destructive";default:return"default"}},$=e=>{switch(e){case"published":return"공개됨";case"draft":return"임시저장";case"scheduled":return"예약됨";case"trash":return"휴지통";default:return e}};return n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:C?.pluralName||n}),C?.description&&s.jsx("p",{className:"text-gray-600 mt-1",children:C.description})]}),s.jsxs(qe,{onClick:()=>t(`/content/${n}/new`),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"새 ",C?.singularName||"항목"," 추가"]})]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(Fe,{placeholder:"제목, 내용으로 검색...",value:j,onChange:e=>v(e.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:y,onValueChange:e=>b(e),children:[s.jsxs(Pe,{className:"w-[180px]",children:[s.jsx(D,{className:"w-4 h-4 mr-2"}),s.jsx($e,{placeholder:"상태 필터"})]}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"모든 상태"}),s.jsx(ze,{value:"published",children:"공개됨"}),s.jsx(ze,{value:"draft",children:"임시저장"}),s.jsx(ze,{value:"scheduled",children:"예약됨"}),s.jsx(ze,{value:"trash",children:"휴지통"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[o.length>0&&s.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[o.length,"개 선택됨"]}),s.jsx(qe,{variant:"outline",size:"sm",className:"ml-4",onClick:()=>{},children:"일괄 작업"})]}),F?s.jsx("div",{className:"p-8 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):s.jsxs($s,{children:[s.jsx(Ls,{children:s.jsxs(As,{children:[s.jsx(qs,{className:"w-12",children:s.jsx(bs,{checked:o.length===S?.posts?.length&&S?.posts?.length>0,onCheckedChange:e=>{m(e&&S?.posts?.map(e=>e.id)||[])}})}),s.jsx(qs,{children:"제목"}),s.jsx(qs,{children:"작성자"}),s.jsx(qs,{children:"카테고리"}),s.jsx(qs,{children:"상태"}),s.jsx(qs,{children:"날짜"}),s.jsx(qs,{className:"text-right",children:"작업"})]})}),s.jsx(zs,{children:S?.posts?.map(e=>s.jsxs(As,{children:[s.jsx(Es,{children:s.jsx(bs,{checked:o.includes(e.id),onCheckedChange:()=>{return s=e.id,void m(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s}})}),s.jsx(Es,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.title}),e.excerpt&&s.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:e.excerpt})]})}),s.jsx(Es,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm",children:e.author?.name})]})}),s.jsx(Es,{children:e.categories&&e.categories.length>0?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(T,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm",children:e.categories[0].name})]}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx(Es,{children:s.jsx(es,{variant:P(e.status),children:$(e.status)})}),s.jsx(Es,{children:s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[s.jsx(r,{className:"w-4 h-4"}),new Date(e.updatedAt).toLocaleDateString()]})}),s.jsx(Es,{className:"text-right",children:s.jsxs(ss,{children:[s.jsx(as,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"h-4 w-4"})})}),s.jsxs(ls,{align:"end",children:[s.jsxs(ts,{onClick:()=>t(`/content/${n}/${e.id}/edit`),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"편집"]}),s.jsxs(ts,{onClick:()=>window.open(`/${n}/${e.slug}`,"_blank"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"보기"]}),s.jsxs(ts,{onClick:()=>{},children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"복제"]}),s.jsx(is,{}),s.jsxs(ts,{onClick:()=>(e=>{confirm(`정말 "${e.title}"을(를) 삭제하시겠습니까?`)&&I.mutate(e.id)})(e),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})})]},e.id))})]}),0===S?.posts?.length&&s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsxs("p",{children:["아직 ",C?.pluralName||"콘텐츠","가 없습니다."]}),s.jsxs(qe,{variant:"outline",className:"mt-4",onClick:()=>t(`/content/${n}/new`),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"첫 ",C?.singularName||"항목"," 만들기"]})]}),S?.totalPages>1&&s.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-700",children:["총 ",S.total,"개 중 ",20*(f-1)+1,"-",Math.min(20*f,S.total),"개 표시"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>w(f-1),disabled:1===f,children:"이전"}),s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>w(f+1),disabled:f===S.totalPages,children:"다음"})]})]})]})]}):s.jsx("div",{children:"콘텐츠 유형을 찾을 수 없습니다"})},_s=()=>{const e=a(),t=He(),{data:i=[],isLoading:n}=Qe({queryKey:["acf-field-groups"],queryFn:async()=>(await Ee.api.get("/v1/acf/field-groups")).data}),c=Ue({mutationFn:async e=>Ee.api.delete(`/v1/acf/field-groups/${e}`),onSuccess:()=>{t.invalidateQueries({queryKey:["acf-field-groups"]}),l.success("필드 그룹이 삭제되었습니다")},onError:()=>{l.error("삭제에 실패했습니다")}}),r=Ue({mutationFn:async e=>Ee.api.post(`/v1/acf/field-groups/${e}/duplicate`),onSuccess:()=>{t.invalidateQueries({queryKey:["acf-field-groups"]}),l.success("필드 그룹이 복제되었습니다")},onError:()=>{l.error("복제에 실패했습니다")}}),o=e=>{if(!e.location||0===e.location.length)return"위치 설정 없음";const s=e.location[0]?.rules[0];if(!s)return"위치 설정 없음";return`${{post_type:"게시물 유형",page_template:"페이지 템플릿",post_status:"게시물 상태",post_category:"카테고리",taxonomy:"분류",user_role:"사용자 역할"}[s.param]||s.param} ${s.operator} ${s.value}`},h=e=>e.fields.reduce((e,s)=>"repeater"===s.type||"group"===s.type||"flexible_content"===s.type?e+1+(s.subFields?.length||0):e+1,0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Advanced Custom Fields"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"고급 커스텀 필드 그룹을 생성하고 관리합니다"})]}),s.jsxs(qe,{onClick:()=>e("/content/acf/new"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"새 필드 그룹"]})]}),n?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[i.map(a=>s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(rs,{className:"text-lg",children:a.name}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o(a)})]}),s.jsxs(ss,{children:[s.jsx(as,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(ls,{align:"end",children:[s.jsxs(ts,{onClick:()=>e(`/content/acf/${a.id}/edit`),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"편집"]}),s.jsxs(ts,{onClick:()=>r.mutate(a.id),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"복제"]}),s.jsx(is,{}),s.jsxs(ts,{onClick:()=>(e=>{confirm(`정말 "${e.name}" 필드 그룹을 삭제하시겠습니까?`)&&c.mutate(e.id)})(a),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})]})}),s.jsxs(ds,{children:[a.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:a.description}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(b,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[h(a),"개 필드"]})]}),s.jsx("div",{className:"flex items-center gap-2",children:!1!==a.active?s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm text-green-600",children:"활성"})]}):s.jsxs(s.Fragment,{children:[s.jsx(f,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-400",children:"비활성"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(y,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["seamless"===a.style?"심리스":"기본"," 스타일"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(es,{variant:"outline",className:"text-xs",children:a.position||"normal"}),a.labelPlacement&&s.jsxs(es,{variant:"outline",className:"text-xs",children:["레이블 ","top"===a.labelPlacement?"상단":"왼쪽"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[s.jsx("span",{className:"text-xs text-gray-500",children:a.updatedAt?new Date(a.updatedAt).toLocaleDateString():""}),s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>e(`/content/acf/${a.id}/edit`),children:[s.jsx(w,{className:"w-4 h-4 mr-2"}),"필드 관리"]})]})]})]},a.id)),s.jsx(ns,{className:"border-dashed border-2 hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>e("/content/acf/new"),children:s.jsxs(ds,{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[s.jsx("div",{className:"p-3 bg-gray-100 rounded-full mb-4",children:s.jsx(x,{className:"w-8 h-8 text-gray-600"})}),s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"새 필드 그룹 추가"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["고급 커스텀 필드로",s.jsx("br",{}),"더 강력한 콘텐츠를 만드세요"]})]})})]})]})},Hs=[{value:"text",label:"텍스트",icon:I,category:"basic",description:"단일 행 텍스트 입력"},{value:"textarea",label:"텍스트 영역",icon:v,category:"basic",description:"여러 행 텍스트 입력"},{value:"number",label:"숫자",icon:P,category:"basic",description:"숫자 입력"},{value:"email",label:"이메일",icon:E,category:"basic",description:"이메일 주소 입력"},{value:"url",label:"URL",icon:q,category:"basic",description:"웹사이트 주소 입력"},{value:"wysiwyg",label:"에디터",icon:v,category:"content",description:"WYSIWYG 리치 텍스트 에디터"},{value:"image",label:"이미지",icon:o,category:"content",description:"단일 이미지 업로드"},{value:"gallery",label:"갤러리",icon:V,category:"content",description:"여러 이미지 갤러리"},{value:"file",label:"파일",icon:v,category:"content",description:"파일 업로드"},{value:"select",label:"선택",icon:$,category:"choice",description:"드롭다운 선택"},{value:"checkbox",label:"체크박스",icon:L,category:"choice",description:"다중 선택 체크박스"},{value:"radio",label:"라디오",icon:z,category:"choice",description:"단일 선택 라디오 버튼"},{value:"button_group",label:"버튼 그룹",icon:R,category:"choice",description:"버튼 형태의 선택"},{value:"true_false",label:"참/거짓",icon:L,category:"choice",description:"토글 스위치"},{value:"relationship",label:"관계",icon:K,category:"relational",description:"게시물 간 관계 설정"},{value:"post_object",label:"게시물 선택",icon:b,category:"relational",description:"게시물 선택기"},{value:"taxonomy",label:"분류",icon:b,category:"relational",description:"카테고리/태그 선택"},{value:"user",label:"사용자",icon:B,category:"relational",description:"사용자 선택"},{value:"repeater",label:"반복 필드",icon:p,category:"layout",description:"반복 가능한 필드 그룹"},{value:"flexible_content",label:"유연한 콘텐츠",icon:_,category:"layout",description:"유연한 레이아웃 블록"},{value:"group",label:"그룹",icon:y,category:"layout",description:"필드 그룹화"},{value:"clone",label:"복제",icon:p,category:"layout",description:"다른 필드 복제"},{value:"date_picker",label:"날짜 선택",icon:r,category:"advanced",description:"날짜 선택기"},{value:"date_time_picker",label:"날짜/시간",icon:r,category:"advanced",description:"날짜와 시간 선택"},{value:"color_picker",label:"색상",icon:A,category:"advanced",description:"색상 선택기"},{value:"google_map",label:"구글 지도",icon:H,category:"advanced",description:"위치 선택"}],Qs=({onSelect:e,selectedType:a})=>s.jsx("div",{className:"space-y-6",children:[{key:"basic",label:"기본 필드"},{key:"content",label:"콘텐츠 필드"},{key:"choice",label:"선택 필드"},{key:"relational",label:"관계 필드"},{key:"layout",label:"레이아웃 필드"},{key:"advanced",label:"고급 필드"}].map(l=>{const t=Hs.filter(e=>e.category===l.key);return s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:l.label}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(l=>{const t=l.icon,i=a===l.value;return s.jsx(qe,{variant:i?"default":"outline",size:"sm",className:"justify-start h-auto py-3 px-3",onClick:()=>e(l.value),children:s.jsxs("div",{className:"flex items-start gap-3 w-full",children:[s.jsx(t,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:l.label}),s.jsx("div",{className:"text-xs text-gray-500 font-normal",children:l.description})]})]})},l.value)})})]},l.key)})}),Us=({field:e,onChange:a})=>{const l=e=>e.toLowerCase().replace(/[^a-z0-9가-힣]+/g,"_").replace(/^_+|_+$/g,"");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-name`,children:"필드 이름"}),s.jsx(Fe,{id:`${e.id}-name`,value:e.name,onChange:s=>{return t=s.target.value,void a({...e,name:t,key:l(t),label:t});var t},placeholder:"예: 가격"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-key`,children:"필드 키"}),s.jsx(Fe,{id:`${e.id}-key`,value:e.key,onChange:s=>a({...e,key:s.target.value}),placeholder:"예: price"})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-label`,children:"레이블"}),s.jsx(Fe,{id:`${e.id}-label`,value:e.label,onChange:s=>a({...e,label:s.target.value}),placeholder:"편집 화면에 표시될 레이블"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-description`,children:"설명 (선택)"}),s.jsx(Ae,{id:`${e.id}-description`,value:e.description||"",onChange:s=>a({...e,description:s.target.value}),placeholder:"필드 사용 방법에 대한 설명",rows:2})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-placeholder`,children:"플레이스홀더 (선택)"}),s.jsx(Fe,{id:`${e.id}-placeholder`,value:e.placeholder||"",onChange:s=>a({...e,placeholder:s.target.value}),placeholder:"입력 필드에 표시될 힌트 텍스트"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{id:`${e.id}-required`,checked:e.required||!1,onCheckedChange:s=>a({...e,required:s})}),s.jsx(Me,{htmlFor:`${e.id}-required`,children:"필수 필드"})]}),"number"===e.type&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-min`,children:"최소값"}),s.jsx(Fe,{id:`${e.id}-min`,type:"number",value:e.min||"",onChange:s=>a({...e,min:s.target.value?parseInt(s.target.value):void 0})})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-max`,children:"최대값"}),s.jsx(Fe,{id:`${e.id}-max`,type:"number",value:e.max||"",onChange:s=>a({...e,max:s.target.value?parseInt(s.target.value):void 0})})]})]}),("text"===e.type||"textarea"===e.type)&&s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-maxLength`,children:"최대 길이"}),s.jsx(Fe,{id:`${e.id}-maxLength`,type:"number",value:e.maxLength||"",onChange:s=>a({...e,maxLength:s.target.value?parseInt(s.target.value):void 0})})]}),("select"===e.type||"checkbox"===e.type||"radio"===e.type)&&s.jsxs("div",{children:[s.jsx(Me,{children:"옵션"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[(e.options||[]).map((l,t)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Fe,{placeholder:"레이블",value:l.label,onChange:s=>{const i=[...e.options||[]];i[t]={...l,label:s.target.value},a({...e,options:i})}}),s.jsx(Fe,{placeholder:"값",value:l.value,onChange:s=>{const i=[...e.options||[]];i[t]={...l,value:s.target.value},a({...e,options:i})}}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{const s=e.options?.filter((e,s)=>s!==t);a({...e,options:s})},children:s.jsx(g,{className:"w-4 h-4"})})]},t)),s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>{const s=[...e.options||[],{label:"",value:""}];a({...e,options:s})},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"옵션 추가"]})]})]}),"image"===e.type&&s.jsxs("div",{children:[s.jsx(Me,{children:"이미지 설정"}),s.jsx("div",{className:"space-y-2 mt-2",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-minWidth`,children:"최소 너비 (px)"}),s.jsx(Fe,{id:`${e.id}-minWidth`,type:"number",value:e.minWidth||"",onChange:s=>a({...e,minWidth:s.target.value?parseInt(s.target.value):void 0})})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-minHeight`,children:"최소 높이 (px)"}),s.jsx(Fe,{id:`${e.id}-minHeight`,type:"number",value:e.minHeight||"",onChange:s=>a({...e,minHeight:s.target.value?parseInt(s.target.value):void 0})})]})]})})]}),"wysiwyg"===e.type&&s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-rows`,children:"에디터 행 수"}),s.jsx(Fe,{id:`${e.id}-rows`,type:"number",value:e.rows||10,onChange:s=>a({...e,rows:s.target.value?parseInt(s.target.value):10})})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:`${e.id}-defaultValue`,children:"기본값 (선택)"}),"textarea"===e.type||"wysiwyg"===e.type?s.jsx(Ae,{id:`${e.id}-defaultValue`,value:e.defaultValue||"",onChange:s=>a({...e,defaultValue:s.target.value}),placeholder:"필드의 기본값",rows:3}):"checkbox"===e.type||"true_false"===e.type?s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(Be,{id:`${e.id}-defaultValue`,checked:!0===e.defaultValue,onCheckedChange:s=>a({...e,defaultValue:s})}),s.jsx(Me,{htmlFor:`${e.id}-defaultValue`,children:"기본적으로 체크됨"})]}):s.jsx(Fe,{id:`${e.id}-defaultValue`,value:e.defaultValue||"",onChange:s=>a({...e,defaultValue:s.target.value}),placeholder:"필드의 기본값"})]})]})},Ys=({field:a,onChange:l})=>{const[t,i]=e.useState([]),n=()=>{const e={id:`field-${Date.now()}`,name:"",key:"",type:"text",label:"",required:!1};l({...a,subFields:[...a.subFields||[],e]})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"minRows",children:"최소 행 수"}),s.jsx(Fe,{id:"minRows",type:"number",min:"0",value:a.minRows||"",onChange:e=>l({...a,minRows:e.target.value?parseInt(e.target.value):void 0}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"maxRows",children:"최대 행 수"}),s.jsx(Fe,{id:"maxRows",type:"number",min:"0",value:a.maxRows||"",onChange:e=>l({...a,maxRows:e.target.value?parseInt(e.target.value):void 0}),placeholder:"무제한"})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"buttonLabel",children:"추가 버튼 텍스트"}),s.jsx(Fe,{id:"buttonLabel",value:a.buttonLabel||"",onChange:e=>l({...a,buttonLabel:e.target.value}),placeholder:"행 추가"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"하위 필드"}),s.jsxs(qe,{variant:"outline",size:"sm",onClick:n,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"필드 추가"]})]}),0===a.subFields?.length?s.jsx(ns,{className:"border-dashed",children:s.jsxs(ds,{className:"text-center py-6",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"아직 하위 필드가 없습니다"}),s.jsxs(qe,{variant:"outline",size:"sm",onClick:n,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"첫 필드 추가"]})]})}):s.jsx("div",{className:"space-y-2",children:a.subFields?.map((e,n)=>s.jsxs(ns,{children:[s.jsx(cs,{className:"py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>{return s=e.id,void i(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"flex items-center gap-2 text-left flex-1",children:[t.includes(e.id)?s.jsx(C,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"}),s.jsx(F,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:e.label||"(제목 없음)"}),s.jsx(es,{variant:"outline",className:"text-xs",children:e.type}),e.required&&s.jsx(es,{variant:"destructive",className:"text-xs",children:"필수"})]}),e.key&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.key})]})]}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>(e=>{const s=a.subFields?.filter((s,a)=>a!==e)||[];l({...a,subFields:s})})(n),children:s.jsx(g,{className:"w-4 h-4 text-red-500"})})]})}),t.includes(e.id)&&s.jsx(ds,{className:"pt-0",children:s.jsx(Us,{field:e,onChange:e=>((e,s)=>{const t=[...a.subFields||[]];t[e]=s,l({...a,subFields:t})})(n,e)})})]},e.id))})]})]})},Os=()=>{const t=a(),{id:r}=i(),d=He(),o=!!r,[h,m]=e.useState({name:"",key:"",description:"",position:"normal",style:"default",labelPlacement:"top",instructionPlacement:"label",active:!0,showInRest:!0,fields:[],location:[{rules:[{param:"post_type",operator:"==",value:"post"}],operator:"AND"}]}),[u,j]=e.useState([]),[p,v]=e.useState(!1),[y,N]=e.useState(null),[b,f]=e.useState("text"),{data:w,isLoading:I}=Qe({queryKey:["acf-field-group",r],queryFn:async()=>(await Ee.api.get(`/acf/field-groups/${r}`)).data,enabled:o}),P=Ue({mutationFn:async e=>(await Ee.api.post("/acf/field-groups",e)).data,onSuccess:()=>{l.success("필드 그룹이 생성되었습니다"),d.invalidateQueries({queryKey:["acf-field-groups"]}),t("/content/acf")},onError:()=>{l.error("생성에 실패했습니다")}}),$=Ue({mutationFn:async e=>(await Ee.api.put(`/acf/field-groups/${r}`,e)).data,onSuccess:()=>{l.success("필드 그룹이 수정되었습니다"),d.invalidateQueries({queryKey:["acf-field-groups"]}),d.invalidateQueries({queryKey:["acf-field-group",r]})},onError:()=>{l.error("수정에 실패했습니다")}});e.useEffect(()=>{w&&(m(w),j(w.fields.map(e=>e.id)))},[w]);const L=()=>{N(null),f("text"),v(!0)};return o&&I?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>t("/content/acf"),children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"ACF 목록"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o?"필드 그룹 수정":"새 필드 그룹"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(ns,{children:[s.jsxs(cs,{children:[s.jsx(rs,{children:"기본 정보"}),s.jsx(os,{children:"필드 그룹의 기본 정보를 입력하세요"})]}),s.jsxs(ds,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"name",children:"필드 그룹 이름"}),s.jsx(Fe,{id:"name",value:h.name,onChange:e=>{return m({...h,name:e.target.value,key:(s=e.target.value,s.toLowerCase().replace(/[^a-z0-9가-힣]+/g,"_").replace(/^_+|_+$/g,""))});var s},placeholder:"예: 제품 정보",required:!0})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"key",children:"필드 그룹 키"}),s.jsx(Fe,{id:"key",value:h.key,onChange:e=>m({...h,key:e.target.value}),placeholder:"예: product_info",required:!0})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"description",children:"설명 (선택)"}),s.jsx(Ae,{id:"description",value:h.description,onChange:e=>m({...h,description:e.target.value}),placeholder:"이 필드 그룹에 대한 설명",rows:3})]})]})]}),s.jsxs(ns,{children:[s.jsxs(cs,{children:[s.jsx(rs,{children:"필드"}),s.jsx(os,{children:"이 그룹에 포함될 필드들을 추가하세요"})]}),s.jsx(ds,{children:0===h.fields?.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"아직 필드가 없습니다"}),s.jsxs(qe,{onClick:L,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"첫 필드 추가"]})]}):s.jsxs("div",{className:"space-y-4",children:[h.fields?.map(e=>s.jsxs(ns,{children:[s.jsx(cs,{className:"py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>{return s=e.id,void j(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"flex items-center gap-2 text-left flex-1",children:[u.includes(e.id)?s.jsx(C,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"}),s.jsx(F,{className:"w-5 h-5 text-gray-400 cursor-move"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:e.label}),s.jsx(es,{variant:"outline",className:"text-xs",children:e.type}),e.required&&s.jsx(es,{variant:"destructive",className:"text-xs",children:"필수"})]}),s.jsx("div",{className:"text-sm text-gray-500",children:e.key})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>(e=>{N(e),f(e.type),v(!0)})(e),children:s.jsx(k,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,void(confirm("정말 이 필드를 삭제하시겠습니까?")&&m({...h,fields:h.fields?.filter(e=>e.id!==s)||[]}));var s},children:s.jsx(g,{className:"w-4 h-4 text-red-500"})})]})]})}),u.includes(e.id)&&s.jsx(ds,{className:"pt-0",children:s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.description&&s.jsx("p",{children:e.description}),e.placeholder&&s.jsxs("p",{children:["플레이스홀더: ",e.placeholder]}),e.defaultValue&&s.jsxs("p",{children:["기본값: ",e.defaultValue]})]})})]},e.id)),s.jsxs(qe,{variant:"outline",className:"w-full",onClick:L,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"필드 추가"]})]})})]}),s.jsxs(ns,{children:[s.jsxs(cs,{children:[s.jsx(rs,{children:"위치 규칙"}),s.jsx(os,{children:"이 필드 그룹이 표시될 위치를 설정하세요"})]}),s.jsx(ds,{children:s.jsxs("div",{className:"space-y-4",children:[h.location?.map((e,a)=>s.jsx("div",{className:"p-4 border rounded-lg",children:e.rules.map((e,l)=>s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs(Ie,{value:e.param,onValueChange:e=>{const s=[...h.location||[]];s[a].rules[l].param=e,m({...h,location:s})},children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"post_type",children:"게시물 유형"}),s.jsx(ze,{value:"page_template",children:"페이지 템플릿"}),s.jsx(ze,{value:"post_status",children:"게시물 상태"}),s.jsx(ze,{value:"post_category",children:"카테고리"}),s.jsx(ze,{value:"taxonomy",children:"분류"}),s.jsx(ze,{value:"user_role",children:"사용자 역할"})]})]}),s.jsxs(Ie,{value:e.operator,onValueChange:e=>{const s=[...h.location||[]];s[a].rules[l].operator=e,m({...h,location:s})},children:[s.jsx(Pe,{className:"w-[100px]",children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"==",children:"같음"}),s.jsx(ze,{value:"!=",children:"같지 않음"})]})]}),s.jsx(Fe,{value:e.value,onChange:e=>{const s=[...h.location||[]];s[a].rules[l].value=e.target.value,m({...h,location:s})},placeholder:"값",className:"flex-1"})]},l))},a)),s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>{m({...h,location:[...h.location||[],{rules:[{param:"post_type",operator:"==",value:""}],operator:"AND"}]})},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"규칙 추가"]})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"상태"})}),s.jsxs(ds,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{htmlFor:"active",children:"활성화"}),s.jsx(Be,{id:"active",checked:h.active,onCheckedChange:e=>m({...h,active:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{htmlFor:"showInRest",children:"REST API 표시"}),s.jsx(Be,{id:"showInRest",checked:h.showInRest,onCheckedChange:e=>m({...h,showInRest:e})})]})]})]}),s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"표시 설정"})}),s.jsxs(ds,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"position",children:"위치"}),s.jsxs(Ie,{value:h.position,onValueChange:e=>m({...h,position:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"normal",children:"일반"}),s.jsx(ze,{value:"side",children:"사이드바"}),s.jsx(ze,{value:"advanced",children:"고급"})]})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"style",children:"스타일"}),s.jsxs(Ie,{value:h.style,onValueChange:e=>m({...h,style:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"default",children:"기본"}),s.jsx(ze,{value:"seamless",children:"심리스"})]})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"labelPlacement",children:"레이블 위치"}),s.jsxs(Ie,{value:h.labelPlacement,onValueChange:e=>m({...h,labelPlacement:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"top",children:"상단"}),s.jsx(ze,{value:"left",children:"왼쪽"})]})]})]})]})]}),s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"작업"})}),s.jsx(ds,{className:"space-y-3",children:s.jsxs(qe,{onClick:()=>{o?$.mutate(h):P.mutate(h)},className:"w-full",disabled:!h.name||!h.key||P.isPending||$.isPending,children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),o?"필드 그룹 수정":"필드 그룹 생성"]})})]})]})]}),s.jsx(xs,{open:p,onOpenChange:v,children:s.jsxs(hs,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[s.jsxs(ms,{children:[s.jsx(us,{children:y?"필드 수정":"새 필드"}),s.jsx(js,{children:"필드 유형을 선택하고 설정을 구성하세요"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 py-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-3",children:"필드 유형"}),s.jsx(Qs,{selectedType:b,onSelect:f})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-3",children:"필드 설정"}),"repeater"===b?s.jsx(Ys,{field:y||{id:"",name:"",key:"",type:"repeater",label:"",required:!1,subFields:[]},onChange:()=>{}}):s.jsx(Us,{field:y||{id:"",name:"",key:"",type:b,label:"",required:!1},onChange:()=>{}})]})]}),s.jsxs(ps,{children:[s.jsx(qe,{variant:"outline",onClick:()=>v(!1),children:"취소"}),s.jsx(qe,{onClick:()=>{(e=>{const s={...e,id:y?.id||`field-${Date.now()}`};m(y?{...h,fields:h.fields?.map(e=>e.id===y.id?s:e)||[]}:{...h,fields:[...h.fields||[],s]}),v(!1)})({id:y?.id||"",name:y?.name||"",key:y?.key||"",type:b,label:y?.label||"",required:!1})},children:"저장"})]})]})})]})},Ws=[{type:"hero",name:"Hero Section",icon:s.jsx(o,{className:"w-5 h-5"}),category:"Basic",description:"대형 배너와 CTA 버튼이 있는 히어로 섹션"},{type:"heading",name:"Heading",icon:s.jsx(I,{className:"w-5 h-5"}),category:"Basic",description:"제목 텍스트 (H1-H6)"},{type:"paragraph",name:"Paragraph",icon:s.jsx(I,{className:"w-5 h-5"}),category:"Basic",description:"일반 텍스트 단락"},{type:"button",name:"Button",icon:s.jsx(Q,{className:"w-5 h-5"}),category:"Basic",description:"클릭 가능한 버튼"},{type:"spacer",name:"Spacer",icon:s.jsx(U,{className:"w-5 h-5"}),category:"Basic",description:"공백 영역"},{type:"divider",name:"Divider",icon:s.jsx(U,{className:"w-5 h-5"}),category:"Basic",description:"구분선"},{type:"image",name:"Image",icon:s.jsx(o,{className:"w-5 h-5"}),category:"Media",description:"단일 이미지"},{type:"video",name:"Video",icon:s.jsx(Y,{className:"w-5 h-5"}),category:"Media",description:"비디오 플레이어"},{type:"gallery",name:"Gallery",icon:s.jsx(o,{className:"w-5 h-5"}),category:"Media",description:"이미지 갤러리"},{type:"carousel",name:"Carousel",icon:s.jsx(O,{className:"w-5 h-5"}),category:"Media",description:"이미지 슬라이더"},{type:"columns",name:"Columns",icon:s.jsx(W,{className:"w-5 h-5"}),category:"Layout",description:"다단 레이아웃"},{type:"card",name:"Card",icon:s.jsx(G,{className:"w-5 h-5"}),category:"Layout",description:"카드 컨테이너"},{type:"list",name:"List",icon:s.jsx($,{className:"w-5 h-5"}),category:"Content",description:"순서 있는/없는 목록"},{type:"quote",name:"Quote",icon:s.jsx(X,{className:"w-5 h-5"}),category:"Content",description:"인용문"},{type:"code",name:"Code",icon:s.jsx(J,{className:"w-5 h-5"}),category:"Content",description:"코드 블록"},{type:"testimonial",name:"Testimonial",icon:s.jsx(Z,{className:"w-5 h-5"}),category:"Content",description:"고객 후기"},{type:"faq",name:"FAQ",icon:s.jsx(ee,{className:"w-5 h-5"}),category:"Content",description:"자주 묻는 질문"},{type:"contact-form",name:"Contact Form",icon:s.jsx(E,{className:"w-5 h-5"}),category:"Interactive",description:"연락처 폼"},{type:"newsletter",name:"Newsletter",icon:s.jsx(E,{className:"w-5 h-5"}),category:"Interactive",description:"뉴스레터 구독 폼"},{type:"social-media",name:"Social Media",icon:s.jsx(se,{className:"w-5 h-5"}),category:"Interactive",description:"소셜 미디어 링크"},{type:"map",name:"Map",icon:s.jsx(H,{className:"w-5 h-5"}),category:"Interactive",description:"지도"},{type:"pricing-table",name:"Pricing Table",icon:s.jsx(G,{className:"w-5 h-5"}),category:"Advanced",description:"가격표"},{type:"countdown",name:"Countdown",icon:s.jsx(ae,{className:"w-5 h-5"}),category:"Advanced",description:"카운트다운 타이머"},{type:"progress-bar",name:"Progress Bar",icon:s.jsx(le,{className:"w-5 h-5"}),category:"Advanced",description:"진행률 바"}],Gs=["Basic","Media","Layout","Content","Interactive","Advanced"],Xs=({onAddBlock:a})=>{const[l,t]=e.useState("Basic"),i=Ws.filter(e=>e.category===l);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"space-y-2",children:Gs.map(e=>s.jsx("button",{onClick:()=>t(e),className:"w-full text-left px-3 py-2 rounded-md text-sm transition-colors "+(l===e?"bg-blue-100 text-blue-900 font-medium":"text-gray-600 hover:bg-gray-100"),children:e},e))}),s.jsx("div",{className:"space-y-2",children:i.map(e=>s.jsx("div",{className:"border rounded-lg p-3 hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-all group",onClick:()=>a(e.type),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-blue-100 transition-colors",children:e.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm text-gray-900 group-hover:text-blue-900",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed",children:e.description})]})]})},e.type))}),s.jsxs("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-sm text-gray-900 mb-2",children:"💡 사용 팁"}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[s.jsx("li",{children:"• 블록을 클릭하여 캔버스에 추가"}),s.jsx("li",{children:"• 드래그하여 순서 변경"}),s.jsx("li",{children:"• 오른쪽 패널에서 상세 설정"}),s.jsx("li",{children:"• 복사/붙여넣기로 빠른 복제"})]})]})]})},Js=e.forwardRef(({className:a,value:l,defaultValue:t=[0],onValueChange:i,min:n=0,max:c=100,step:r=1,disabled:d},o)=>{const[x,h]=e.useState(t),m=(l??x)[0]??0,u=e.useRef(null),j=e.useRef(!1),p=e=>{const s=Math.min(Math.max(e,n),c),a=[Math.round(s/r)*r];void 0===l&&h(a),i?.(a)},g=e=>{if(!u.current)return;const s=u.current.getBoundingClientRect();return(e-s.left)/s.width*(c-n)+n},v=e=>{if(d)return;j.current=!0;const s=g(e.clientX);void 0!==s&&p(s)};e.useEffect(()=>{const e=e=>{if(!j.current||d)return;const s=g(e.clientX);void 0!==s&&p(s)},s=()=>{j.current=!1};if(j.current)return document.addEventListener("mousemove",e),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",s)}},[d,p,c,n]);const y=(m-n)/(c-n)*100;return s.jsxs("div",{ref:o,className:_e("relative flex w-full touch-none select-none items-center",d&&"opacity-50 cursor-not-allowed",a),children:[s.jsx("div",{ref:u,className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary cursor-pointer",onMouseDown:v,children:s.jsx("div",{className:"absolute h-full bg-primary transition-none",style:{width:`${y}%`}})}),s.jsx("div",{className:_e("absolute h-5 w-5 rounded-full border-2 border-primary bg-background","ring-offset-background transition-colors","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",d&&"pointer-events-none",!d&&"cursor-grab active:cursor-grabbing"),style:{left:`${y}%`,transform:"translateX(-50%)"},onMouseDown:v,children:s.jsx("input",{type:"range",value:m,min:n,max:c,step:r,disabled:d,className:"sr-only",onChange:e=>p(Number(e.target.value))})})]})});Js.displayName="Slider";const Zs=({block:a,onChange:l})=>{const[t,i]=e.useState("desktop"),n=(e,s)=>{l({content:{...a.content,[e]:s}})},c=(e,s,t)=>{const i=a.settings;l({settings:{...a.settings,[e]:{...i[e]||{},[s]:t}}})},r=({label:e,value:a,onChange:l})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(Me,{className:"text-sm",children:e}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:a||"#000000",onChange:e=>l(e.target.value),className:"w-8 h-8 rounded border cursor-pointer"}),s.jsx(Fe,{value:a||"",onChange:e=>l(e.target.value),placeholder:"#000000",className:"flex-1"})]})]}),d=({label:e,value:a={},onChange:l})=>s.jsxs(ns,{children:[s.jsx(cs,{className:"pb-3",children:s.jsx(rs,{className:"text-sm",children:e})}),s.jsx(ds,{className:"space-y-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(Me,{className:"text-xs",children:"Top"}),s.jsx(Fe,{value:a.top||"",onChange:e=>l({...a,top:e.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),s.jsxs("div",{children:[s.jsx(Me,{className:"text-xs",children:"Right"}),s.jsx(Fe,{value:a.right||"",onChange:e=>l({...a,right:e.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),s.jsxs("div",{children:[s.jsx(Me,{className:"text-xs",children:"Bottom"}),s.jsx(Fe,{value:a.bottom||"",onChange:e=>l({...a,bottom:e.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),s.jsxs("div",{children:[s.jsx(Me,{className:"text-xs",children:"Left"}),s.jsx(Fe,{value:a.left||"",onChange:e=>l({...a,left:e.target.value}),placeholder:"0px",className:"text-xs h-8"})]})]})})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"pb-4 border-b",children:[s.jsx("h3",{className:"font-semibold text-lg capitalize",children:a.type}),s.jsxs("p",{className:"text-sm text-gray-600",children:["블록 ID: ",a.id]})]}),s.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[s.jsx(qe,{size:"sm",variant:"desktop"===t?"default":"ghost",onClick:()=>i("desktop"),children:s.jsx(te,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"tablet"===t?"default":"ghost",onClick:()=>i("tablet"),children:s.jsx(ie,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"mobile"===t?"default":"ghost",onClick:()=>i("mobile"),children:s.jsx(ne,{className:"w-4 h-4"})})]}),s.jsxs(Te,{defaultValue:"content",className:"w-full",children:[s.jsxs(Ve,{className:"grid w-full grid-cols-3",children:[s.jsx(Re,{value:"content",children:"내용"}),s.jsx(Re,{value:"design",children:"디자인"}),s.jsx(Re,{value:"advanced",children:"고급"})]}),s.jsx(Ke,{value:"content",className:"space-y-4",children:(()=>{switch(a.type){case"hero":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"제목"}),s.jsx(Fe,{value:a.content.title||"",onChange:e=>n("title",e.target.value),placeholder:"Hero 제목"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"부제목"}),s.jsx(Fe,{value:a.content.subtitle||"",onChange:e=>n("subtitle",e.target.value),placeholder:"Hero 부제목"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"배경 이미지"}),s.jsx(Fe,{value:a.content.backgroundImage||"",onChange:e=>n("backgroundImage",e.target.value),placeholder:"이미지 URL"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"버튼"}),(a.content.buttons||[]).map((e,l)=>s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(Fe,{value:String(e.text||""),onChange:s=>{const t=[...a.content.buttons||[]];t[l]={...e,text:s.target.value},n("buttons",t)},placeholder:"버튼 텍스트"}),s.jsx(Fe,{value:String(e.url||""),onChange:s=>{const t=[...a.content.buttons||[]];t[l]={...e,url:s.target.value},n("buttons",t)},placeholder:"URL"}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:()=>{const e=(a.content.buttons||[]).filter((e,s)=>s!==l);n("buttons",e)},children:s.jsx(g,{className:"w-4 h-4"})})]},l)),s.jsxs(qe,{size:"sm",variant:"outline",onClick:()=>{const e=[...a.content.buttons||[],{text:"버튼",url:"#",style:"primary"}];n("buttons",e)},className:"mt-2",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"버튼 추가"]})]})]});case"heading":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"텍스트"}),s.jsx(Fe,{value:a.content.text||"",onChange:e=>n("text",e.target.value),placeholder:"제목 텍스트"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"레벨"}),s.jsxs(Ie,{value:a.content.level?.toString()||"2",onValueChange:e=>n("level",parseInt(e)),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"1",children:"H1"}),s.jsx(ze,{value:"2",children:"H2"}),s.jsx(ze,{value:"3",children:"H3"}),s.jsx(ze,{value:"4",children:"H4"}),s.jsx(ze,{value:"5",children:"H5"}),s.jsx(ze,{value:"6",children:"H6"})]})]})]})]});case"paragraph":return s.jsxs("div",{children:[s.jsx(Me,{children:"텍스트"}),s.jsx(Ae,{value:a.content.text||"",onChange:e=>n("text",e.target.value),placeholder:"단락 텍스트를 입력하세요",rows:4})]});case"image":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"이미지 URL"}),s.jsx(Fe,{value:a.content.src||"",onChange:e=>n("src",e.target.value),placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"대체 텍스트"}),s.jsx(Fe,{value:a.content.alt||"",onChange:e=>n("alt",e.target.value),placeholder:"이미지 설명"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"캡션"}),s.jsx(Fe,{value:a.content.caption||"",onChange:e=>n("caption",e.target.value),placeholder:"이미지 캡션"})]})]});case"button":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"텍스트"}),s.jsx(Fe,{value:a.content.text||"",onChange:e=>n("text",e.target.value),placeholder:"버튼 텍스트"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"URL"}),s.jsx(Fe,{value:a.content.url||"",onChange:e=>n("url",e.target.value),placeholder:"https://example.com"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"스타일"}),s.jsxs(Ie,{value:a.content.style||"primary",onValueChange:e=>n("style",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"primary",children:"Primary"}),s.jsx(ze,{value:"secondary",children:"Secondary"}),s.jsx(ze,{value:"outline",children:"Outline"}),s.jsx(ze,{value:"ghost",children:"Ghost"})]})]})]})]});case"columns":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"컬럼 수"}),s.jsxs(Ie,{value:(a.content.columns?.length||2).toString(),onValueChange:e=>{const s=parseInt(e),l=Array.from({length:s},(e,s)=>a.content.columns?.[s]||{content:""});n("columns",l)},children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"1",children:"1 컬럼"}),s.jsx(ze,{value:"2",children:"2 컬럼"}),s.jsx(ze,{value:"3",children:"3 컬럼"}),s.jsx(ze,{value:"4",children:"4 컬럼"})]})]})]}),(a.content.columns||[]).map((e,l)=>s.jsxs("div",{children:[s.jsxs(Me,{children:["컬럼 ",l+1," 내용"]}),s.jsx(Ae,{value:String(e.content||""),onChange:s=>{const t=[...a.content.columns||[]];t[l]={...e,content:s.target.value},n("columns",t)},placeholder:`컬럼 ${l+1} 내용`,rows:3})]},l))]});default:return s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(k,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{children:"이 블록 타입에 대한 편집기가 준비 중입니다."})]})}})()}),s.jsxs(Ke,{value:"design",className:"space-y-4",children:[s.jsx(d,{label:"여백 (Margin)",value:a.settings.margin||{},onChange:e=>l({settings:{...a.settings,margin:e}})}),s.jsx(d,{label:"패딩 (Padding)",value:a.settings.padding||{},onChange:e=>l({settings:{...a.settings,padding:e}})}),s.jsxs(ns,{children:[s.jsx(cs,{className:"pb-3",children:s.jsx(rs,{className:"text-sm",children:"배경"})}),s.jsxs(ds,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"타입"}),s.jsxs(Ie,{value:a.settings.background?.type||"none",onValueChange:e=>c("background","type",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"none",children:"없음"}),s.jsx(ze,{value:"color",children:"색상"}),s.jsx(ze,{value:"gradient",children:"그라디언트"}),s.jsx(ze,{value:"image",children:"이미지"})]})]})]}),"color"===a.settings.background?.type&&s.jsx(r,{label:"배경 색상",value:a.settings.background?.color||"",onChange:e=>c("background","color",e)}),"image"===a.settings.background?.type&&s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"이미지 URL"}),s.jsx(Fe,{value:a.settings.background?.image?.url||"",onChange:e=>c("background","image",{...a.settings.background?.image,url:e.target.value}),placeholder:"https://example.com/bg.jpg"})]})]})]}),s.jsxs(ns,{children:[s.jsx(cs,{className:"pb-3",children:s.jsx(rs,{className:"text-sm",children:"테두리"})}),s.jsxs(ds,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"두께"}),s.jsx(Fe,{value:a.settings.border?.width||"",onChange:e=>c("border","width",e.target.value),placeholder:"1px"})]}),s.jsx(r,{label:"색상",value:a.settings.border?.color||"",onChange:e=>c("border","color",e)}),s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"둥근 모서리"}),s.jsx(Fe,{value:a.settings.border?.radius||"",onChange:e=>c("border","radius",e.target.value),placeholder:"4px"})]})]})]})]}),s.jsxs(Ke,{value:"advanced",className:"space-y-4",children:[s.jsxs(ns,{children:[s.jsx(cs,{className:"pb-3",children:s.jsx(rs,{className:"text-sm",children:"애니메이션"})}),s.jsxs(ds,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"타입"}),s.jsxs(Ie,{value:a.settings.animation?.type||"none",onValueChange:e=>c("animation","type",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"none",children:"없음"}),s.jsx(ze,{value:"fade",children:"페이드"}),s.jsx(ze,{value:"slide",children:"슬라이드"}),s.jsx(ze,{value:"zoom",children:"줌"}),s.jsx(ze,{value:"bounce",children:"바운스"})]})]})]}),"none"!==a.settings.animation?.type&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"지속시간 (ms)"}),s.jsx(Js,{value:[a.settings.animation?.duration||300],onValueChange:([e])=>c("animation","duration",e),max:2e3,min:100,step:100}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.settings.animation?.duration||300,"ms"]})]}),s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"지연시간 (ms)"}),s.jsx(Js,{value:[a.settings.animation?.delay||0],onValueChange:([e])=>c("animation","delay",e),max:2e3,min:0,step:100}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.settings.animation?.delay||0,"ms"]})]})]})]})]}),s.jsxs(ns,{children:[s.jsx(cs,{className:"pb-3",children:s.jsx(rs,{className:"text-sm",children:"표시 설정"})}),s.jsxs(ds,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{className:"text-sm",children:"데스크톱에서 표시"}),s.jsx(Be,{checked:!1!==a.settings.visibility?.desktop,onCheckedChange:e=>c("visibility","desktop",e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{className:"text-sm",children:"태블릿에서 표시"}),s.jsx(Be,{checked:!1!==a.settings.visibility?.tablet,onCheckedChange:e=>c("visibility","tablet",e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{className:"text-sm",children:"모바일에서 표시"}),s.jsx(Be,{checked:!1!==a.settings.visibility?.mobile,onCheckedChange:e=>c("visibility","mobile",e)})]})]})]})]})]})]})},ea=({block:a,isSelected:l,isPreview:t,onSelect:i,onAddBlock:n,onDelete:c,onDuplicate:r,onMove:d})=>{const o=()=>{const{settings:e}=a,s={};if(e.margin&&(s.marginTop=e.margin.top||"0",s.marginRight=e.margin.right||"0",s.marginBottom=e.margin.bottom||"0",s.marginLeft=e.margin.left||"0"),e.padding&&(s.paddingTop=e.padding.top||"0",s.paddingRight=e.padding.right||"0",s.paddingBottom=e.padding.bottom||"0",s.paddingLeft=e.padding.left||"0"),e.background)switch(e.background.type){case"color":s.backgroundColor=e.background.color;break;case"image":e.background.image?.url&&(s.backgroundImage=`url(${e.background.image.url})`,s.backgroundPosition=e.background.image.position||"center",s.backgroundRepeat=e.background.image.repeat||"no-repeat",s.backgroundSize=e.background.image.size||"cover");break;case"gradient":if(e.background.gradient){const{colors:a,direction:l="45deg"}=e.background.gradient;s.background=`linear-gradient(${l}, ${a?.join(", ")||""})`}}return e.border&&(e.border.width&&(s.borderWidth=e.border.width),e.border.color&&(s.borderColor=e.border.color),e.border.style&&(s.borderStyle=e.border.style),e.border.radius&&(s.borderRadius=e.border.radius)),s},h=()=>{switch(a.type){case"hero":return s.jsxs("div",{className:"hero-section relative overflow-hidden",style:{minHeight:"400px"},children:[a.content.backgroundImage&&s.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${a.content.backgroundImage})`}}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center p-8",children:[a.content.title&&s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-white",children:a.content.title}),a.content.subtitle&&s.jsx("p",{className:"text-xl md:text-2xl mb-8 text-white/90",children:a.content.subtitle}),a.content.buttons&&s.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:a.content.buttons.map((e,a)=>s.jsx("button",{className:"px-6 py-3 rounded-lg font-medium transition-colors "+("primary"===e.style?"bg-blue-600 text-white hover:bg-blue-700":"bg-white text-gray-900 hover:bg-gray-100"),children:String(e.text)},a))})]})]});case"heading":const l=a.content.level||2,t="font-bold "+(1===l?"text-4xl":2===l?"text-3xl":3===l?"text-2xl":4===l?"text-xl":5===l?"text-lg":"text-base");return e.createElement(`h${l}`,{className:t},a.content.text||"Heading Text");case"paragraph":return s.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.content.text||"Enter your paragraph text here..."});case"image":return s.jsxs("div",{className:"text-center",children:[a.content.src?s.jsx("img",{src:a.content.src,alt:a.content.alt||"",className:"max-w-full h-auto rounded-lg"}):s.jsx("div",{className:"bg-gray-200 border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:s.jsxs("div",{className:"text-gray-500",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{children:"이미지를 추가하세요"})]})}),a.content.caption&&s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:a.content.caption})]});case"video":return s.jsx("div",{className:"text-center",children:a.content.src?s.jsxs("video",{controls:!0,className:"max-w-full h-auto rounded-lg",poster:a.content.poster,children:[s.jsx("source",{src:a.content.src}),"Your browser does not support the video tag."]}):s.jsx("div",{className:"bg-gray-200 border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:s.jsxs("div",{className:"text-gray-500",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),s.jsx("p",{children:"비디오를 추가하세요"})]})})});case"button":return s.jsx("div",{className:"text-center",children:s.jsx("button",{className:"px-6 py-3 rounded-lg font-medium transition-colors "+("primary"===a.content.style?"bg-blue-600 text-white hover:bg-blue-700":"secondary"===a.content.style?"bg-gray-600 text-white hover:bg-gray-700":"outline"===a.content.style?"border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white":"text-blue-600 hover:text-blue-700"),children:a.content.text||"Button Text"})});case"columns":const i=a.content.columns?.length||2;return s.jsx("div",{className:`grid grid-cols-1 md:grid-cols-${i} gap-6`,children:(a.content.columns||[]).map((e,a)=>s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg min-h-[100px]",children:e.content?s.jsx("div",{className:"prose prose-sm",children:String(e.content||"").split("\n").map((e,a)=>s.jsx("p",{children:e},a))}):s.jsx("div",{className:"text-gray-500 text-center",children:s.jsxs("p",{children:["Column ",a+1," content"]})})})},a))});case"spacer":return s.jsx("div",{style:{height:a.content.height||"2rem"},className:"w-full bg-gray-100 border-2 border-dashed border-gray-300 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-gray-500 text-sm",children:"Spacer"})});case"card":return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 shadow-sm",children:[a.content.title&&s.jsx("h3",{className:"text-xl font-semibold mb-3",children:a.content.title}),a.content.content&&s.jsx("div",{className:"text-gray-700",children:a.content.content}),!a.content.title&&!a.content.content&&s.jsx("div",{className:"text-gray-500 text-center py-8",children:s.jsx("p",{children:"카드 내용을 추가하세요"})})]});case"list":const n="ordered"===a.content.type,c=n?"ol":"ul";return s.jsx(c,{className:n?"list-decimal list-inside space-y-2":"list-disc list-inside space-y-2",children:(a.content.items||["목록 항목 1","목록 항목 2"]).map((e,a)=>s.jsx("li",{className:"text-gray-700",children:e},a))});case"quote":return s.jsxs("blockquote",{className:"border-l-4 border-blue-500 pl-6 py-4 bg-gray-50 rounded-r-lg",children:[s.jsxs("p",{className:"text-lg text-gray-700 italic mb-2",children:['"',a.content.text||"인용문을 입력하세요",'"']}),a.content.author&&s.jsxs("cite",{className:"text-sm text-gray-600",children:["— ",a.content.author]})]});case"divider":return s.jsx("hr",{className:`border-t ${"dashed"===a.content.style?"border-dashed":"dotted"===a.content.style?"border-dotted":"border-solid"} border-gray-300`});default:return s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[s.jsxs("p",{children:["Block type: ",a.type]}),s.jsx("p",{className:"text-sm mt-2",children:"Renderer not implemented yet"})]})}};return t?s.jsx("div",{style:o(),children:h()}):s.jsxs("div",{className:"group relative border-2 transition-all duration-200 "+(l?"border-blue-500 shadow-lg":"border-transparent hover:border-gray-300"),onClick:i,children:[s.jsxs("div",{className:"absolute -top-10 left-0 right-0 flex items-center justify-between transition-opacity "+(l?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[s.jsxs("div",{className:"flex items-center gap-1 bg-white border rounded-lg shadow-sm p-1",children:[s.jsx("span",{className:"text-xs text-gray-600 px-2",children:a.type}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),d("up")},children:s.jsx(ce,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),d("down")},children:s.jsx(re,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),r()},children:s.jsx(p,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),c()},className:"text-red-600 hover:text-red-700",children:s.jsx(g,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-white border rounded-lg shadow-sm p-1",children:[!1!==a.settings.visibility?.desktop&&s.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-xs",children:"D"})}),!1!==a.settings.visibility?.tablet&&s.jsx("div",{className:"w-4 h-4 bg-green-100 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-xs",children:"T"})}),!1!==a.settings.visibility?.mobile&&s.jsx("div",{className:"w-4 h-4 bg-purple-100 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-xs",children:"M"})})]})]}),s.jsx("div",{style:o(),children:h()}),s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 transition-opacity "+(l?"opacity-100":"opacity-0 group-hover:opacity-100"),children:s.jsxs(qe,{size:"sm",variant:"outline",className:"bg-white shadow-sm",onClick:e=>{e.stopPropagation(),n("paragraph")},children:[s.jsx(x,{className:"w-3 h-3 mr-1"}),"Add Block"]})})]})},sa=({template:a,onClose:t,onSave:i})=>{const n=He(),r=e.useRef(null),[o,h]=e.useState(()=>({template:a||{id:"",name:"",description:"",type:"page",category:"homepage",status:"draft",blocks:[],settings:{layout:{containerWidth:"1200px",contentWidth:"100%",sidebar:{enabled:!1,position:"right",width:"300px"},header:{enabled:!0,sticky:!1,transparent:!1},footer:{enabled:!0,sticky:!1}},typography:{fontFamily:{primary:"Inter",secondary:"Inter",monospace:"Monaco"},fontSize:{base:"16px",scale:1.25},lineHeight:{tight:1.25,normal:1.5,loose:1.75},fontWeight:{normal:400,medium:500,bold:700}},colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#f59e0b",background:"#ffffff",surface:"#f8fafc",text:{primary:"#1e293b",secondary:"#64748b",muted:"#94a3b8"},border:"#e2e8f0",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},spacing:{top:"0",right:"0",bottom:"0",left:"0"},seo:{}},preview:{thumbnail:"",screenshots:[]},metadata:{tags:[],author:"",version:"1.0.0",compatibility:[],usageCount:0,rating:0,downloads:0},createdBy:"",createdAt:new Date,updatedAt:new Date},selectedBlockId:null,previewMode:!1,devicePreview:"desktop",zoom:1,history:[],historyIndex:-1})),[m,u]=e.useState("blocks"),j=Ue({mutationFn:async e=>Ee.api.post("/templates",e),onSuccess:()=>{l.success("템플릿이 생성되었습니다"),n.invalidateQueries({queryKey:["templates"]}),i()},onError:()=>{l.error("생성에 실패했습니다")}}),v=Ue({mutationFn:async e=>Ee.api.put(`/templates/${e.id}`,e.updates),onSuccess:()=>{l.success("템플릿이 저장되었습니다"),n.invalidateQueries({queryKey:["templates"]}),i()},onError:()=>{l.error("저장에 실패했습니다")}}),y=e.useCallback(e=>{const s={blocks:[...o.template.blocks],settings:{...o.template.settings},timestamp:new Date,action:e};h(e=>({...e,history:[...e.history.slice(0,e.historyIndex+1),s],historyIndex:e.historyIndex+1}))},[o.template.blocks,o.template.settings,o.historyIndex]),N=e.useCallback(e=>{h(s=>({...s,template:{...s.template,...e}}))},[]),b=e.useCallback((e,s)=>{const a={id:`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:e,content:aa(e),settings:{margin:{top:"0",right:"0",bottom:"1rem",left:"0"},padding:{top:"1rem",right:"1rem",bottom:"1rem",left:"1rem"},background:{type:"none"},border:{},animation:{type:"none",duration:300,delay:0,trigger:"page-load"},visibility:{desktop:!0,tablet:!0,mobile:!0}},order:o.template.blocks.length};let l=[...o.template.blocks];if(s){const e=l.findIndex(e=>e.id===s);l.splice(e+1,0,a)}else l.push(a);l=l.map((e,s)=>({...e,order:s})),N({blocks:l}),h(e=>({...e,selectedBlockId:a.id})),y(`Added ${e} block`)},[o.template.blocks,N,y]),f=e.useCallback((e,s)=>{const a=o.template.blocks.map(a=>a.id===e?{...a,...s}:a);N({blocks:a})},[o.template.blocks,N]),w=e.useCallback(e=>{const s=o.template.blocks.filter(s=>s.id!==e).map((e,s)=>({...e,order:s}));N({blocks:s}),h(s=>({...s,selectedBlockId:s.selectedBlockId===e?null:s.selectedBlockId})),y("Deleted block")},[o.template.blocks,N,y]),k=e.useCallback((e,s)=>{const a=[...o.template.blocks],l=a.findIndex(s=>s.id===e);if(-1===l)return;const t="up"===s?l-1:l+1;if(t<0||t>=a.length)return;[a[l],a[t]]=[a[t],a[l]];const i=a.map((e,s)=>({...e,order:s}));N({blocks:i}),y(`Moved block ${s}`)},[o.template.blocks,N,y]),C=e.useCallback(e=>{const s=o.template.blocks.find(s=>s.id===e);if(!s)return;const a={...s,id:`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`},l=[...o.template.blocks],t=l.findIndex(s=>s.id===e);l.splice(t+1,0,a);const i=l.map((e,s)=>({...e,order:s}));N({blocks:i}),h(e=>({...e,selectedBlockId:a.id})),y("Duplicated block")},[o.template.blocks,N,y]),S=e.useCallback(()=>{if(o.historyIndex>0){const e=o.history[o.historyIndex-1];N({blocks:e.blocks,settings:e.settings}),h(e=>({...e,historyIndex:e.historyIndex-1}))}},[o.history,o.historyIndex,N]),F=e.useCallback(()=>{if(o.historyIndex<o.history.length-1){const e=o.history[o.historyIndex+1];N({blocks:e.blocks,settings:e.settings}),h(e=>({...e,historyIndex:e.historyIndex+1}))}},[o.history,o.historyIndex,N]);return s.jsx(xs,{open:!0,onOpenChange:t,children:s.jsx(hs,{className:"max-w-full w-full h-full m-0 rounded-none",children:s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"w-80 border-r bg-white flex flex-col",children:[s.jsx(ms,{className:"p-4 border-b",children:s.jsx(us,{children:"템플릿 빌더"})}),s.jsxs(Te,{value:m,onValueChange:u,className:"flex-1 flex flex-col",children:[s.jsxs(Ve,{className:"grid w-full grid-cols-3 mx-4 mt-4",children:[s.jsx(Re,{value:"blocks",children:"블록"}),s.jsx(Re,{value:"layers",children:"레이어"}),s.jsx(Re,{value:"settings",children:"설정"})]}),s.jsx(Ke,{value:"blocks",className:"flex-1 overflow-y-auto p-4",children:s.jsx(Xs,{onAddBlock:b})}),s.jsx(Ke,{value:"layers",className:"flex-1 overflow-y-auto p-4",children:s.jsx("div",{className:"space-y-2",children:o.template.blocks.map((e,a)=>s.jsxs("div",{className:"group flex items-center gap-2 p-2 rounded cursor-pointer transition-colors "+(o.selectedBlockId===e.id?"bg-blue-100 border border-blue-300":"hover:bg-gray-100"),onClick:()=>h(s=>({...s,selectedBlockId:e.id})),children:[s.jsx(_,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"flex-1 text-sm",children:e.type}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:[s.jsx(qe,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),k(e.id,"up")},disabled:0===a,children:s.jsx(ce,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),k(e.id,"down")},disabled:a===o.template.blocks.length-1,children:s.jsx(re,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),C(e.id)},children:s.jsx(p,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),w(e.id)},children:s.jsx(g,{className:"w-3 h-3"})})]})]},e.id))})}),s.jsx(Ke,{value:"settings",className:"flex-1 overflow-y-auto p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"template-name",children:"템플릿 이름"}),s.jsx(Fe,{id:"template-name",value:o.template.name,onChange:e=>N({name:e.target.value}),placeholder:"템플릿 이름을 입력하세요"})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"template-description",children:"설명"}),s.jsx(Ae,{id:"template-description",value:o.template.description,onChange:e=>N({description:e.target.value}),placeholder:"템플릿 설명을 입력하세요",rows:3})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"template-type",children:"타입"}),s.jsxs(Ie,{value:o.template.type,onValueChange:e=>N({type:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"page",children:"페이지"}),s.jsx(ze,{value:"post",children:"포스트"}),s.jsx(ze,{value:"email",children:"이메일"}),s.jsx(ze,{value:"popup",children:"팝업"})]})]})]}),s.jsxs("div",{children:[s.jsx(Me,{htmlFor:"template-category",children:"카테고리"}),s.jsxs(Ie,{value:o.template.category,onValueChange:e=>N({category:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"homepage",children:"홈페이지"}),s.jsx(ze,{value:"landing-page",children:"랜딩 페이지"}),s.jsx(ze,{value:"blog",children:"블로그"}),s.jsx(ze,{value:"ecommerce",children:"이커머스"}),s.jsx(ze,{value:"portfolio",children:"포트폴리오"})]})]})]})]})})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"border-b bg-white p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[s.jsx(qe,{size:"sm",variant:"desktop"===o.devicePreview?"default":"ghost",onClick:()=>h(e=>({...e,devicePreview:"desktop"})),children:s.jsx(te,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"tablet"===o.devicePreview?"default":"ghost",onClick:()=>h(e=>({...e,devicePreview:"tablet"})),children:s.jsx(ie,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"mobile"===o.devicePreview?"default":"ghost",onClick:()=>h(e=>({...e,devicePreview:"mobile"})),children:s.jsx(ne,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qe,{size:"sm",variant:"ghost",onClick:S,disabled:o.historyIndex<=0,children:s.jsx(de,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:F,disabled:o.historyIndex>=o.history.length-1,children:s.jsx(oe,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qe,{size:"sm",variant:"ghost",onClick:()=>h(e=>({...e,zoom:Math.max(e.zoom-.1,.5)})),children:s.jsx(xe,{className:"w-4 h-4"})}),s.jsxs("span",{className:"text-sm text-gray-600 min-w-[3rem] text-center",children:[Math.round(100*o.zoom),"%"]}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:()=>h(e=>({...e,zoom:Math.min(e.zoom+.1,2)})),children:s.jsx(he,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(qe,{variant:"outline",onClick:()=>h(e=>({...e,previewMode:!e.previewMode})),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),o.previewMode?"편집":"미리보기"]}),s.jsxs(qe,{onClick:()=>{o.template.name?a?.id?v.mutate({id:a.id,updates:{name:o.template.name,description:o.template.description,blocks:o.template.blocks,settings:o.template.settings,status:o.template.status}}):j.mutate({name:o.template.name,description:o.template.description,type:o.template.type,category:o.template.category,template:o.template}):l.error("템플릿 이름을 입력해주세요")},children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),"저장"]}),s.jsx(qe,{variant:"ghost",onClick:t,children:s.jsx(me,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"flex-1 bg-gray-100 overflow-auto",children:s.jsx("div",{ref:r,className:"min-h-full p-8 flex justify-center",style:{transform:`scale(${o.zoom})`},children:s.jsx("div",{className:`bg-white shadow-lg ${(()=>{switch(o.devicePreview){case"mobile":return"max-w-sm";case"tablet":return"max-w-2xl";default:return"max-w-full"}})()} min-h-96 transition-all duration-300`,children:0===o.template.blocks.length?s.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(x,{className:"w-12 h-12 mx-auto mb-4"}),s.jsx("p",{children:"블록을 추가해서 시작하세요"})]})}):o.template.blocks.map(e=>s.jsx(ea,{block:e,isSelected:o.selectedBlockId===e.id,isPreview:o.previewMode,onSelect:()=>h(s=>({...s,selectedBlockId:e.id})),onAddBlock:s=>b(s,e.id),onUpdate:s=>f(e.id,s),onDelete:()=>w(e.id),onDuplicate:()=>C(e.id),onMove:s=>k(e.id,s)},e.id))})})})]}),o.selectedBlockId&&!o.previewMode&&s.jsxs("div",{className:"w-80 border-l bg-white overflow-y-auto",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("h3",{className:"font-semibold",children:"블록 편집"})}),s.jsx("div",{className:"p-4",children:s.jsx(Zs,{block:o.template.blocks.find(e=>e.id===o.selectedBlockId),onChange:e=>f(o.selectedBlockId,e)})})]})]})})})};function aa(e){switch(e){case"hero":return{title:"Hero Title",subtitle:"Hero subtitle text",backgroundImage:"",buttons:[{text:"Get Started",url:"#",style:"primary"}]};case"heading":return{text:"Heading Text",level:2};case"paragraph":return{text:"Your paragraph text goes here..."};case"image":return{src:"",alt:"Image description",caption:""};case"button":return{text:"Button Text",url:"#",style:"primary"};case"columns":return{columns:[{content:""},{content:""}]};default:return{}}}const la=({onClose:a,onImport:t})=>{const i=He(),[n,c]=e.useState({category:void 0,search:"",isPremium:void 0,rating:void 0}),[r,o]=e.useState(null),[x,m]=e.useState("all"),{data:u,isLoading:j}=Qe({queryKey:["template-library",n],queryFn:async()=>{const e=new URLSearchParams;n.search&&e.append("search",n.search),n.category&&e.append("category",n.category),void 0!==n.isPremium&&e.append("isPremium",n.isPremium.toString()),n.rating&&e.append("rating",n.rating.toString());return(await Ee.api.get(`/template-library?${e}`)).data}}),p=Ue({mutationFn:async e=>Ee.api.post(`/template-library/${e}/import`),onSuccess:()=>{l.success("템플릿이 가져와졌습니다"),i.invalidateQueries({queryKey:["templates"]}),t()},onError:()=>{l.error("가져오기에 실패했습니다")}}),g=e=>{e.isPremium?l("프리미엄 템플릿은 구매가 필요합니다"):p.mutate(e.id)},v=e=>({"landing-page":"bg-blue-100 text-blue-800",homepage:"bg-green-100 text-green-800",about:"bg-purple-100 text-purple-800",contact:"bg-orange-100 text-orange-800",portfolio:"bg-pink-100 text-pink-800",blog:"bg-indigo-100 text-indigo-800",ecommerce:"bg-red-100 text-red-800",business:"bg-gray-100 text-gray-800",personal:"bg-yellow-100 text-yellow-800",creative:"bg-teal-100 text-teal-800",education:"bg-cyan-100 text-cyan-800",nonprofit:"bg-lime-100 text-lime-800"}[e]||"bg-gray-100 text-gray-800"),y=e=>s.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>s.jsx(pe,{className:"w-3 h-3 "+(a<=e?"text-yellow-400 fill-current":"text-gray-300")},a)),s.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e.toFixed(1)})]}),N=(()=>{if(!u?.items)return[];let e=u.items;switch(x){case"free":e=e.filter(e=>!e.isPremium);break;case"premium":e=e.filter(e=>e.isPremium);break;case"featured":e=e.filter(e=>e.featured);break;case"popular":e=e.sort((e,s)=>s.popularity-e.popularity)}return e})();return s.jsx(xs,{open:!0,onOpenChange:a,children:s.jsxs(hs,{className:"max-w-6xl w-full h-[80vh] flex flex-col",children:[s.jsx(ms,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(us,{children:"템플릿 라이브러리"}),s.jsx(qe,{variant:"ghost",onClick:a,children:s.jsx(me,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"border-b pb-4 mb-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(Fe,{placeholder:"템플릿 검색...",value:n.search||"",onChange:e=>c({...n,search:e.target.value}),className:"pl-10"})]}),s.jsxs(Ie,{value:n.category||"all",onValueChange:e=>c({...n,category:"all"===e?void 0:e}),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"카테고리"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"모든 카테고리"}),s.jsx(ze,{value:"homepage",children:"홈페이지"}),s.jsx(ze,{value:"landing-page",children:"랜딩 페이지"}),s.jsx(ze,{value:"blog",children:"블로그"}),s.jsx(ze,{value:"ecommerce",children:"이커머스"}),s.jsx(ze,{value:"portfolio",children:"포트폴리오"}),s.jsx(ze,{value:"business",children:"비즈니스"})]})]}),s.jsxs(Ie,{value:void 0===n.isPremium?"all":n.isPremium?"premium":"free",onValueChange:e=>c({...n,isPremium:"all"===e?void 0:"premium"===e}),children:[s.jsx(Pe,{className:"w-[120px]",children:s.jsx($e,{placeholder:"가격"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"전체"}),s.jsx(ze,{value:"free",children:"무료"}),s.jsx(ze,{value:"premium",children:"프리미엄"})]})]})]})}),s.jsxs(Te,{value:x,onValueChange:m,className:"flex-1 flex flex-col",children:[s.jsxs(Ve,{className:"grid w-full grid-cols-5",children:[s.jsx(Re,{value:"all",children:"전체"}),s.jsx(Re,{value:"free",children:"무료"}),s.jsx(Re,{value:"premium",children:"프리미엄"}),s.jsx(Re,{value:"featured",children:"추천"}),s.jsx(Re,{value:"popular",children:"인기"})]}),s.jsx(Ke,{value:x,className:"flex-1 overflow-y-auto mt-4",children:j?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===N.length?s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500",children:[s.jsx(D,{className:"w-12 h-12 mx-auto mb-4"}),s.jsx("p",{children:"조건에 맞는 템플릿이 없습니다"})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>s.jsxs(ns,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"aspect-video bg-gray-100 relative group",children:[e.preview?.thumbnail?s.jsx("img",{src:e.preview.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-2 flex items-center justify-center",children:"📄"}),s.jsx("p",{className:"text-sm",children:"No Preview"})]})}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(qe,{size:"sm",variant:"secondary",onClick:()=>o(e),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"미리보기"]}),s.jsxs(qe,{size:"sm",onClick:()=>g(e),disabled:p.isPending,children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"가져오기"]})]})}),s.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[e.isPremium&&s.jsxs(es,{className:"bg-yellow-500 text-white",children:[s.jsx(je,{className:"w-3 h-3 mr-1"}),"Premium"]}),e.featured&&s.jsxs(es,{className:"bg-red-500 text-white",children:[s.jsx(pe,{className:"w-3 h-3 mr-1"}),"Featured"]})]}),e.isPremium&&e.price&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs(es,{variant:"secondary",children:["$",e.price]})})]}),s.jsxs(ds,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg truncate",children:e.name}),s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(ge,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),s.jsx("div",{className:"mb-3",children:s.jsx(es,{className:v(e.category),children:e.category})}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{className:"w-3 h-3"}),e.metadata.downloads]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ve,{className:"w-3 h-3"}),e.popularity]})]}),y(e.metadata.rating)]}),s.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.metadata.tags.slice(0,3).map(e=>s.jsx(es,{variant:"outline",className:"text-xs",children:e},e)),e.metadata.tags.length>3&&s.jsxs(es,{variant:"outline",className:"text-xs",children:["+",e.metadata.tags.length-3]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(qe,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>o(e),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"미리보기"]}),s.jsxs(qe,{size:"sm",className:"flex-1",onClick:()=>g(e),disabled:p.isPending,children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),e.isPremium?"구매":"가져오기"]})]})]})]},e.id))})})]})]}),r&&s.jsx(xs,{open:!0,onOpenChange:()=>o(null),children:s.jsxs(hs,{className:"max-w-4xl",children:[s.jsx(ms,{children:s.jsx(us,{children:r.name})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:r.preview?.thumbnail?s.jsx("img",{src:r.preview.thumbnail,alt:r.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No preview available"})}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:r.description}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx(es,{className:v(r.category),children:r.category}),r.isPremium&&s.jsxs(es,{className:"bg-yellow-500 text-white",children:[s.jsx(je,{className:"w-3 h-3 mr-1"}),"Premium $",r.price]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{className:"w-4 h-4"}),r.metadata.downloads," downloads"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ae,{className:"w-4 h-4"}),"Updated ",r.metadata.author]}),y(r.metadata.rating)]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(qe,{variant:"outline",onClick:()=>o(null),children:"닫기"}),s.jsxs(qe,{onClick:()=>{g(r),o(null)},disabled:p.isPending,children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),r.isPremium?"구매하기":"가져오기"]})]})]})]})]})})]})})},ta=()=>{const a=He(),[t,i]=e.useState("grid"),[n,c]=e.useState(""),[r,d]=e.useState("all"),[o,m]=e.useState("all"),[j,v]=e.useState("all"),[y,b]=e.useState(!1),[f,w]=e.useState(!1),[k,C]=e.useState(null),[S,F]=e.useState(1),{data:I,isLoading:P,refetch:L}=Qe({queryKey:["templates",{search:n,category:r,type:o,status:j,page:S,limit:12}],queryFn:async()=>{const e=new URLSearchParams({page:S.toString(),limit:12..toString()});n&&e.append("search",n),"all"!==r&&e.append("category",r),"all"!==o&&e.append("type",o),"all"!==j&&e.append("status",j);return(await Ee.api.get(`/templates?${e}`)).data}}),z=Ue({mutationFn:async e=>Ee.api.delete(`/templates/${e}`),onSuccess:()=>{a.invalidateQueries({queryKey:["templates"]}),l.success("템플릿이 삭제되었습니다")},onError:()=>{l.error("삭제에 실패했습니다")}}),A=Ue({mutationFn:async e=>Ee.api.post(`/templates/${e}/duplicate`),onSuccess:()=>{a.invalidateQueries({queryKey:["templates"]}),l.success("템플릿이 복제되었습니다")},onError:()=>{l.error("복제에 실패했습니다")}}),q=e=>({"landing-page":"bg-blue-100 text-blue-800",homepage:"bg-green-100 text-green-800",about:"bg-purple-100 text-purple-800",contact:"bg-orange-100 text-orange-800",portfolio:"bg-pink-100 text-pink-800",blog:"bg-indigo-100 text-indigo-800",ecommerce:"bg-red-100 text-red-800",business:"bg-gray-100 text-gray-800",personal:"bg-yellow-100 text-yellow-800",creative:"bg-teal-100 text-teal-800",education:"bg-cyan-100 text-cyan-800",nonprofit:"bg-lime-100 text-lime-800"}[e]||"bg-gray-100 text-gray-800"),E=e=>{switch(e){case"page":default:return"📄";case"post":return"📝";case"category":return"📁";case"archive":return"📚";case"search":return"🔍";case"404":return"❌";case"email":return"📧";case"popup":return"💬"}},D=()=>{C(null),b(!0)},M=e=>{C(e),b(!0)},T=e=>{confirm(`정말 "${e.name}" 템플릿을 삭제하시겠습니까?`)&&z.mutate(e.id)},V=e=>{A.mutate(e.id)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"템플릿 관리"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"페이지 및 컨텐츠 템플릿을 관리합니다"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(qe,{variant:"outline",onClick:()=>w(!0),children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"템플릿 라이브러리"]}),s.jsxs(qe,{onClick:D,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"새 템플릿"]})]})]}),s.jsx(ns,{children:s.jsx(ds,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(Fe,{placeholder:"템플릿 검색...",value:n,onChange:e=>c(e.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:r,onValueChange:d,children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"카테고리"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"모든 카테고리"}),s.jsx(ze,{value:"homepage",children:"홈페이지"}),s.jsx(ze,{value:"landing-page",children:"랜딩 페이지"}),s.jsx(ze,{value:"blog",children:"블로그"}),s.jsx(ze,{value:"ecommerce",children:"이커머스"}),s.jsx(ze,{value:"portfolio",children:"포트폴리오"}),s.jsx(ze,{value:"business",children:"비즈니스"})]})]}),s.jsxs(Ie,{value:o,onValueChange:m,children:[s.jsx(Pe,{className:"w-[150px]",children:s.jsx($e,{placeholder:"타입"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"모든 타입"}),s.jsx(ze,{value:"page",children:"페이지"}),s.jsx(ze,{value:"post",children:"포스트"}),s.jsx(ze,{value:"email",children:"이메일"}),s.jsx(ze,{value:"popup",children:"팝업"})]})]}),s.jsxs(Ie,{value:j,onValueChange:v,children:[s.jsx(Pe,{className:"w-[150px]",children:s.jsx($e,{placeholder:"상태"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"모든 상태"}),s.jsx(ze,{value:"draft",children:"초안"}),s.jsx(ze,{value:"published",children:"게시됨"}),s.jsx(ze,{value:"archived",children:"보관됨"})]})]}),s.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[s.jsx(qe,{variant:"grid"===t?"default":"ghost",size:"sm",onClick:()=>i("grid"),children:s.jsx(ye,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"list"===t?"default":"ghost",size:"sm",onClick:()=>i("list"),children:s.jsx($,{className:"w-4 h-4"})})]})]})})}),P?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===I?.templates?.length?s.jsx(ns,{children:s.jsxs(ds,{className:"text-center py-12",children:[s.jsx(Ne,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"템플릿이 없습니다"}),s.jsxs(qe,{onClick:D,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"첫 템플릿 만들기"]})]})}):"grid"===t?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:I?.templates?.map(e=>s.jsxs(ns,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"aspect-video bg-gray-100 relative",children:[e.preview?.thumbnail?s.jsx("img",{src:e.preview.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:s.jsx(Ne,{className:"w-12 h-12"})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"text-2xl",children:E(e.type)})}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs(ss,{children:[s.jsx(as,{children:s.jsx(qe,{variant:"ghost",size:"sm",className:"bg-white/80 hover:bg-white",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(ls,{align:"end",children:[s.jsxs(ts,{onClick:()=>M(e),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"편집"]}),s.jsxs(ts,{onClick:()=>V(e),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"복제"]}),s.jsx(is,{}),s.jsxs(ts,{onClick:()=>T(e),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})})]}),s.jsxs(ds,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg truncate",children:e.name}),e.metadata?.featured&&s.jsx(pe,{className:"w-4 h-4 text-yellow-500 flex-shrink-0 ml-2"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(es,{className:q(e.category),children:e.category}),s.jsx(es,{variant:"published"===e.status?"default":"draft"===e.status?"secondary":"outline",children:e.status})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("span",{children:["사용: ",e.metadata?.usageCount||0,"회"]}),s.jsx("span",{children:new Date(e.updatedAt).toLocaleDateString()})]})]})]},e.id))}):s.jsx(ns,{children:s.jsx(ds,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"템플릿"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"카테고리"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"상태"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"사용횟수"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"수정일"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"작업"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:I?.templates?.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-lg",children:E(e.type)})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:e.name}),s.jsx("div",{className:"text-sm text-gray-500",children:e.description})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(es,{className:q(e.category),children:e.category})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(es,{variant:"published"===e.status?"default":"draft"===e.status?"secondary":"outline",children:e.status})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.metadata?.usageCount||0}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(e.updatedAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(ss,{children:[s.jsx(as,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(ls,{align:"end",children:[s.jsxs(ts,{onClick:()=>M(e),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"편집"]}),s.jsxs(ts,{onClick:()=>V(e),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"복제"]}),s.jsx(is,{}),s.jsxs(ts,{onClick:()=>T(e),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})})]},e.id))})]})})})}),I&&I.totalPages>1&&s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>F(S-1),disabled:1===S,children:"이전"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[S," / ",I.totalPages]}),s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>F(S+1),disabled:S===I.totalPages,children:"다음"})]}),y&&s.jsx(sa,{template:k,onClose:()=>{b(!1),C(null)},onSave:()=>{L(),b(!1),C(null)}}),f&&s.jsx(la,{onClose:()=>w(!1),onImport:()=>{L(),w(!1)}})]})},ia=[{type:"text",name:"텍스트",description:"일반 텍스트 콘텐츠",icon:s.jsx(I,{className:"w-5 h-5"}),category:"content",defaultContent:{text:"",autoP:!0}},{type:"html",name:"HTML",description:"커스텀 HTML 코드",icon:s.jsx(J,{className:"w-5 h-5"}),category:"advanced",defaultContent:{html:""}},{type:"image",name:"이미지",description:"단일 이미지",icon:s.jsx(o,{className:"w-5 h-5"}),category:"media",defaultContent:{url:"",alt:"",size:"medium"}},{type:"menu",name:"메뉴",description:"네비게이션 메뉴",icon:s.jsx(be,{className:"w-5 h-5"}),category:"navigation",defaultContent:{menuId:"",showHierarchy:!0,maxDepth:3}},{type:"recent-posts",name:"최근 게시글",description:"최신 게시글 목록",icon:s.jsx(v,{className:"w-5 h-5"}),category:"content",defaultContent:{count:5,showDate:!0,showExcerpt:!1,excerptLength:100}},{type:"categories",name:"카테고리",description:"게시글 카테고리 목록",icon:s.jsx(P,{className:"w-5 h-5"}),category:"navigation",defaultContent:{showPostCount:!0,showHierarchy:!0,hideEmpty:!0}},{type:"search",name:"검색",description:"검색 폼",icon:s.jsx(h,{className:"w-5 h-5"}),category:"forms",defaultContent:{placeholder:"검색...",buttonText:"검색",searchCategories:!1}},{type:"social-links",name:"소셜 링크",description:"소셜 미디어 링크",icon:s.jsx(se,{className:"w-5 h-5"}),category:"social",defaultContent:{links:[],style:"icons",size:"medium",openInNewTab:!0}},{type:"contact-info",name:"연락처 정보",description:"연락처 및 주소 정보",icon:s.jsx(fe,{className:"w-5 h-5"}),category:"content",defaultContent:{address:"",phone:"",email:"",showMap:!1}},{type:"newsletter",name:"뉴스레터",description:"이메일 구독 폼",icon:s.jsx(E,{className:"w-5 h-5"}),category:"forms",defaultContent:{title:"뉴스레터 구독",description:"최신 소식을 받아보세요",placeholder:"이메일 주소",buttonText:"구독하기",successMessage:"구독해주셔서 감사합니다!",provider:"custom"}}],na=({widget:a,onSave:t,onCancel:i})=>{const[n,r]=e.useState(a?.type||"text"),[o,x]=e.useState({title:a?.title||"",position:a?.position||"footer-1",content:a?.content||{},settings:a?.settings||{showTitle:!0,visibility:{desktop:!0,tablet:!0,mobile:!0},animation:{type:"none",duration:300,delay:0},spacing:{margin:{top:"0",right:"0",bottom:"1rem",left:"0"},padding:{top:"1rem",right:"1rem",bottom:"1rem",left:"1rem"}},styling:{textAlign:"left"}}}),h=Boolean(a),m=ia.find(e=>e.type===n);e.useEffect(()=>{!h&&m&&x(e=>({...e,content:m.defaultContent}))},[n,m,h]);const u=Ue({mutationFn:async e=>Ee.api.post("/widgets",e),onSuccess:()=>{l.success("위젯이 생성되었습니다"),t()},onError:()=>{l.error("생성에 실패했습니다")}}),j=Ue({mutationFn:async e=>Ee.api.put(`/widgets/${a.id}`,e),onSuccess:()=>{l.success("위젯이 수정되었습니다"),t()},onError:()=>{l.error("수정에 실패했습니다")}}),p=(e,s)=>{x(a=>({...a,content:{...a.content,[e]:s}}))},g=(e,s)=>{x(a=>({...a,settings:{...a.settings,[e]:s}}))},v=(e,s,a)=>{x(l=>({...l,settings:{...l.settings,[e]:{...l.settings[e]||{},[s]:a}}}))};return s.jsx(xs,{open:!0,onOpenChange:i,children:s.jsxs(hs,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsx(ms,{children:s.jsx(us,{children:h?"위젯 편집":"새 위젯 추가"})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[s.jsxs("div",{className:"space-y-6",children:[!h&&s.jsxs("div",{children:[s.jsx(Me,{children:"위젯 타입"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:ia.map(e=>s.jsxs(qe,{variant:n===e.type?"default":"outline",size:"sm",onClick:()=>r(e.type),className:"flex flex-col h-auto p-3",children:[e.icon,s.jsx("span",{className:"text-xs mt-1",children:e.name})]},e.type))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"위젯 제목"}),s.jsx(Fe,{value:o.title,onChange:e=>x(s=>({...s,title:e.target.value})),placeholder:"위젯 제목"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"위치"}),s.jsxs(Ie,{value:o.position,onValueChange:e=>x(s=>({...s,position:e})),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"footer-1",children:"푸터 1"}),s.jsx(ze,{value:"footer-2",children:"푸터 2"}),s.jsx(ze,{value:"footer-3",children:"푸터 3"}),s.jsx(ze,{value:"footer-4",children:"푸터 4"}),s.jsx(ze,{value:"sidebar-main",children:"메인 사이드바"}),s.jsx(ze,{value:"sidebar-shop",children:"쇼핑 사이드바"}),s.jsx(ze,{value:"header-top",children:"헤더 상단"}),s.jsx(ze,{value:"header-bottom",children:"헤더 하단"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{checked:o.settings.showTitle,onCheckedChange:e=>g("showTitle",e)}),s.jsx(Me,{children:"제목 표시"})]})]})]}),s.jsx("div",{className:"lg:col-span-2 overflow-y-auto",children:s.jsxs(Te,{defaultValue:"content",className:"h-full",children:[s.jsxs(Ve,{className:"grid w-full grid-cols-3",children:[s.jsx(Re,{value:"content",children:"내용"}),s.jsx(Re,{value:"settings",children:"설정"}),s.jsx(Re,{value:"preview",children:"미리보기"})]}),s.jsx(Ke,{value:"content",className:"space-y-4 mt-4",children:(()=>{switch(n){case"text":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"텍스트 내용"}),s.jsx(Ae,{value:o.content.text||"",onChange:e=>p("text",e.target.value),placeholder:"텍스트 내용을 입력하세요",rows:6})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{checked:o.content.autoP||!1,onCheckedChange:e=>p("autoP",e)}),s.jsx(Me,{children:"자동 단락 나누기"})]})]});case"html":return s.jsxs("div",{children:[s.jsx(Me,{children:"HTML 코드"}),s.jsx(Ae,{value:o.content.html||"",onChange:e=>p("html",e.target.value),placeholder:"HTML 코드를 입력하세요",rows:8,className:"font-mono text-sm"})]});case"image":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"이미지 URL"}),s.jsx(Fe,{value:o.content.url||"",onChange:e=>p("url",e.target.value),placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"대체 텍스트"}),s.jsx(Fe,{value:o.content.alt||"",onChange:e=>p("alt",e.target.value),placeholder:"이미지 설명"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"링크 URL (선택사항)"}),s.jsx(Fe,{value:o.content.link||"",onChange:e=>p("link",e.target.value),placeholder:"https://example.com"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"이미지 크기"}),s.jsxs(Ie,{value:o.content.size||"medium",onValueChange:e=>p("size",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"thumbnail",children:"썸네일"}),s.jsx(ze,{value:"medium",children:"중간"}),s.jsx(ze,{value:"large",children:"큰"}),s.jsx(ze,{value:"full",children:"전체"})]})]})]})]});case"recent-posts":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"표시할 게시글 수"}),s.jsx(Fe,{type:"number",value:o.content.count||5,onChange:e=>p("count",parseInt(e.target.value)||5),min:"1",max:"20"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{checked:o.content.showDate||!1,onCheckedChange:e=>p("showDate",e)}),s.jsx(Me,{children:"날짜 표시"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{checked:o.content.showExcerpt||!1,onCheckedChange:e=>p("showExcerpt",e)}),s.jsx(Me,{children:"요약 표시"})]}),o.content.showExcerpt&&s.jsxs("div",{children:[s.jsx(Me,{children:"요약 길이"}),s.jsx(Fe,{type:"number",value:o.content.excerptLength||100,onChange:e=>p("excerptLength",parseInt(e.target.value)||100),min:"50",max:"300"})]})]});case"search":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"플레이스홀더"}),s.jsx(Fe,{value:o.content.placeholder||"",onChange:e=>p("placeholder",e.target.value),placeholder:"검색..."})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"버튼 텍스트"}),s.jsx(Fe,{value:o.content.buttonText||"",onChange:e=>p("buttonText",e.target.value),placeholder:"검색"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{checked:o.content.searchCategories||!1,onCheckedChange:e=>p("searchCategories",e)}),s.jsx(Me,{children:"카테고리 검색 포함"})]})]});case"social-links":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"표시 스타일"}),s.jsxs(Ie,{value:o.content.style||"icons",onValueChange:e=>p("style",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"icons",children:"아이콘만"}),s.jsx(ze,{value:"buttons",children:"버튼"}),s.jsx(ze,{value:"text",children:"텍스트"})]})]})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"크기"}),s.jsxs(Ie,{value:o.content.size||"medium",onValueChange:e=>p("size",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"small",children:"작음"}),s.jsx(ze,{value:"medium",children:"중간"}),s.jsx(ze,{value:"large",children:"큼"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{checked:o.content.openInNewTab||!0,onCheckedChange:e=>p("openInNewTab",e)}),s.jsx(Me,{children:"새 탭에서 열기"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"소셜 링크"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[(o.content.links||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ie,{value:String(e.platform||""),onValueChange:s=>{const l=[...o.content.links||[]];l[a]={...e,platform:s},p("links",l)},children:[s.jsx(Pe,{className:"w-32",children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"facebook",children:"Facebook"}),s.jsx(ze,{value:"twitter",children:"Twitter"}),s.jsx(ze,{value:"instagram",children:"Instagram"}),s.jsx(ze,{value:"youtube",children:"YouTube"}),s.jsx(ze,{value:"linkedin",children:"LinkedIn"})]})]}),s.jsx(Fe,{value:String(e.url||""),onChange:s=>{const l=[...o.content.links||[]];l[a]={...e,url:s.target.value},p("links",l)},placeholder:"URL",className:"flex-1"}),s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>{const e=(o.content.links||[]).filter((e,s)=>s!==a);p("links",e)},children:s.jsx(me,{className:"w-4 h-4"})})]},a)),s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>{const e=[...o.content.links||[],{platform:"facebook",url:""}];p("links",e)},children:"링크 추가"})]})]})]});case"contact-info":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"주소"}),s.jsx(Ae,{value:o.content.address||"",onChange:e=>p("address",e.target.value),placeholder:"주소를 입력하세요",rows:2})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"전화번호"}),s.jsx(Fe,{value:o.content.phone||"",onChange:e=>p("phone",e.target.value),placeholder:"02-1234-5678"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"이메일"}),s.jsx(Fe,{value:o.content.email||"",onChange:e=>p("email",e.target.value),placeholder:"contact@example.com"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"웹사이트"}),s.jsx(Fe,{value:o.content.website||"",onChange:e=>p("website",e.target.value),placeholder:"https://example.com"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Be,{checked:o.content.showMap||!1,onCheckedChange:e=>p("showMap",e)}),s.jsx(Me,{children:"지도 표시"})]})]});case"newsletter":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Me,{children:"제목"}),s.jsx(Fe,{value:o.content.title||"",onChange:e=>p("title",e.target.value),placeholder:"뉴스레터 구독"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"설명"}),s.jsx(Ae,{value:o.content.description||"",onChange:e=>p("description",e.target.value),placeholder:"최신 소식을 받아보세요",rows:2})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"플레이스홀더"}),s.jsx(Fe,{value:o.content.placeholder||"",onChange:e=>p("placeholder",e.target.value),placeholder:"이메일 주소"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"버튼 텍스트"}),s.jsx(Fe,{value:o.content.buttonText||"",onChange:e=>p("buttonText",e.target.value),placeholder:"구독하기"})]}),s.jsxs("div",{children:[s.jsx(Me,{children:"성공 메시지"}),s.jsx(Fe,{value:o.content.successMessage||"",onChange:e=>p("successMessage",e.target.value),placeholder:"구독해주셔서 감사합니다!"})]})]});default:return s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(k,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{children:"이 위젯 타입에 대한 편집기가 준비 중입니다."})]})}})()}),s.jsx(Ke,{value:"settings",className:"mt-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{className:"text-sm",children:"표시 설정"})}),s.jsxs(ds,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{className:"text-sm",children:"데스크톱에서 표시"}),s.jsx(Be,{checked:!1!==o.settings.visibility?.desktop,onCheckedChange:e=>v("visibility","desktop",e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{className:"text-sm",children:"태블릿에서 표시"}),s.jsx(Be,{checked:!1!==o.settings.visibility?.tablet,onCheckedChange:e=>v("visibility","tablet",e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Me,{className:"text-sm",children:"모바일에서 표시"}),s.jsx(Be,{checked:!1!==o.settings.visibility?.mobile,onCheckedChange:e=>v("visibility","mobile",e)})]})]})]}),s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{className:"text-sm",children:"애니메이션"})}),s.jsxs(ds,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"타입"}),s.jsxs(Ie,{value:o.settings.animation?.type||"none",onValueChange:e=>v("animation","type",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"none",children:"없음"}),s.jsx(ze,{value:"fade",children:"페이드"}),s.jsx(ze,{value:"slide",children:"슬라이드"}),s.jsx(ze,{value:"bounce",children:"바운스"})]})]})]}),"none"!==o.settings.animation?.type&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"지속시간 (ms)"}),s.jsx(Js,{value:[o.settings.animation?.duration||300],onValueChange:([e])=>v("animation","duration",e),max:2e3,min:100,step:100}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[o.settings.animation?.duration||300,"ms"]})]}),s.jsxs("div",{children:[s.jsx(Me,{className:"text-sm",children:"지연시간 (ms)"}),s.jsx(Js,{value:[o.settings.animation?.delay||0],onValueChange:([e])=>v("animation","delay",e),max:1e3,min:0,step:100}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[o.settings.animation?.delay||0,"ms"]})]})]})]})]}),s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{className:"text-sm",children:"커스텀 CSS"})}),s.jsx(ds,{children:s.jsx(Ae,{value:o.settings.customCSS||"",onChange:e=>g("customCSS",e.target.value),placeholder:".my-widget { color: red; }",rows:4,className:"font-mono text-sm"})})]})]})}),s.jsx(Ke,{value:"preview",className:"mt-4",children:s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsxs(rs,{className:"flex items-center gap-2",children:[s.jsx(d,{className:"w-4 h-4"}),"미리보기"]})}),s.jsx(ds,{children:s.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("p",{children:"위젯 미리보기"}),s.jsx("p",{className:"text-sm mt-1",children:"실제 사이트에서의 모습을 확인할 수 있습니다"})]})})})]})})]})})]})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx(qe,{variant:"outline",onClick:i,children:"취소"}),s.jsxs(qe,{onClick:()=>{o.title.trim()?h?j.mutate({title:o.title,content:o.content,settings:o.settings,position:o.position}):u.mutate({type:n,title:o.title,content:o.content,position:o.position,settings:o.settings}):l.error("위젯 제목을 입력하세요")},disabled:u.isPending||j.isPending,children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),h?"수정":"생성"]})]})]})})};const ca=({onApplyTemplate:a})=>{const[t,i]=e.useState(""),[n,c]=e.useState("all"),[r,o]=e.useState("grid"),[x,m]=e.useState(!1),{data:u=[],isLoading:j}=Qe({queryKey:["widget-templates",n,t,x],queryFn:async()=>{const e=new URLSearchParams;"all"!==n&&e.append("category",n),t&&e.append("search",t),x&&e.append("premium","true");return(await Ee.api.get(`/widget-templates?${e}`)).data.templates}}),p=Ue({mutationFn:async e=>Ee.api.post(`/widget-templates/${e}/apply`,{targetArea:"footer-1",replaceExisting:!1}),onSuccess:()=>{l.success("위젯 템플릿이 적용되었습니다"),a()},onError:()=>{l.error("템플릿 적용에 실패했습니다")}}),g=e=>{e.isPremium?l("프리미엄 템플릿은 구매가 필요합니다"):p.mutate(e.id)},v=e=>({content:"콘텐츠",navigation:"네비게이션",social:"소셜",forms:"폼",media:"미디어",advanced:"고급"}[e]||e),y=u.filter(e=>{const s=e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()),a="all"===n||e.category===n,l=!x||e.isPremium;return s&&a&&l}),N=e=>s.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>s.jsx(pe,{className:"w-3 h-3 "+(a<=e?"text-yellow-400 fill-current":"text-gray-300")},a)),s.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e.toFixed(1)})]});return j?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"위젯 템플릿을 불러오는 중..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"위젯 라이브러리"}),s.jsx("p",{className:"text-gray-600",children:"미리 만들어진 위젯 템플릿을 사용하여 빠르게 사이트를 구성하세요"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"grid"===r?"default":"outline",size:"sm",onClick:()=>o("grid"),children:s.jsx(ye,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"list"===r?"default":"outline",size:"sm",onClick:()=>o("list"),children:s.jsx($,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(Fe,{placeholder:"템플릿 검색...",value:t,onChange:e=>i(e.target.value),className:"pl-10"})]})}),s.jsxs(Ie,{value:n,onValueChange:e=>c(e),children:[s.jsx(Pe,{className:"w-48",children:s.jsx($e,{placeholder:"카테고리 선택"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"모든 카테고리"}),s.jsx(ze,{value:"content",children:"콘텐츠"}),s.jsx(ze,{value:"navigation",children:"네비게이션"}),s.jsx(ze,{value:"social",children:"소셜"}),s.jsx(ze,{value:"forms",children:"폼"}),s.jsx(ze,{value:"media",children:"미디어"}),s.jsx(ze,{value:"advanced",children:"고급"})]})]}),s.jsxs(qe,{variant:x?"default":"outline",onClick:()=>m(!x),className:"flex items-center gap-2",children:[s.jsx(je,{className:"w-4 h-4"}),"프리미엄만"]})]}),"grid"===r?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(e=>s.jsxs(ns,{className:"group hover:shadow-lg transition-shadow",children:[s.jsxs(cs,{className:"pb-2",children:[s.jsxs("div",{className:"aspect-video bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg mb-3 relative overflow-hidden",children:[e.preview?s.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:s.jsx(d,{className:"w-8 h-8"})}),e.isPremium&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs(es,{className:"bg-yellow-500 text-white",children:[s.jsx(je,{className:"w-3 h-3 mr-1"}),"Premium"]})})]}),s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx(rs,{className:"text-lg",children:e.name}),s.jsx(es,{variant:"outline",className:"mt-1",children:v(e.category)})]})})]}),s.jsxs(ds,{className:"pt-0",children:[s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[N(e.rating),s.jsx("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ue,{className:"w-3 h-3"}),e.downloads.toLocaleString()]})})]}),s.jsx(qe,{className:"w-full",onClick:()=>g(e),disabled:p.isPending,children:e.isPremium?s.jsxs(s.Fragment,{children:[s.jsx(je,{className:"w-4 h-4 mr-2"}),"구매하기"]}):s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"적용하기"]})})]})]},e.id))}):s.jsx("div",{className:"space-y-4",children:y.map(e=>s.jsx(ns,{children:s.jsx(ds,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-16 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg flex-shrink-0 overflow-hidden",children:e.preview?s.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:s.jsx(d,{className:"w-6 h-6"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-start justify-between mb-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-medium",children:e.name}),e.isPremium&&s.jsxs(es,{className:"bg-yellow-500 text-white",children:[s.jsx(je,{className:"w-3 h-3 mr-1"}),"Premium"]}),s.jsx(es,{variant:"outline",children:v(e.category)})]})}),s.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-1",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4",children:[N(e.rating),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(ue,{className:"w-3 h-3"}),e.downloads.toLocaleString(),"회 다운로드"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(qe,{variant:"outline",size:"sm",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"미리보기"]}),s.jsx(qe,{size:"sm",onClick:()=>g(e),disabled:p.isPending,children:e.isPremium?s.jsxs(s.Fragment,{children:[s.jsx(je,{className:"w-4 h-4 mr-2"}),"구매"]}):s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"적용"]})})]})]})})},e.id))}),0===y.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"템플릿을 찾을 수 없습니다"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"다른 검색어나 필터를 시도해보세요"}),s.jsx(qe,{variant:"outline",onClick:()=>{i(""),c("all"),m(!1)},children:"필터 초기화"})]}),s.jsxs("div",{className:"mt-12",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"추천 템플릿"}),s.jsx("p",{className:"text-gray-600",children:"인기 있는 위젯 템플릿들을 확인해보세요"})]}),s.jsxs(qe,{variant:"outline",size:"sm",children:["전체 보기",s.jsx(we,{className:"w-4 h-4 ml-2"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.slice(0,3).map(e=>s.jsxs(ns,{className:"group hover:shadow-lg transition-shadow",children:[s.jsxs(cs,{className:"pb-2",children:[s.jsxs("div",{className:"aspect-video bg-gradient-to-br from-purple-50 to-pink-100 rounded-lg mb-3 relative overflow-hidden",children:[e.preview?s.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:s.jsx(d,{className:"w-8 h-8"})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsxs(es,{className:"bg-purple-500 text-white",children:[s.jsx(pe,{className:"w-3 h-3 mr-1"}),"추천"]})})]}),s.jsx(rs,{className:"text-base",children:e.name})]}),s.jsxs(ds,{className:"pt-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[N(e.rating),s.jsxs("span",{className:"text-xs text-gray-500",children:[e.downloads.toLocaleString(),"회"]})]}),s.jsxs(qe,{size:"sm",className:"w-full",onClick:()=>g(e),children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"적용하기"]})]})]},e.id))})]})]})},ra=()=>{const[a,t]=e.useState("builder"),[i,n]=e.useState(""),[c,r]=e.useState("all"),[o,h]=e.useState("desktop"),[m,j]=e.useState(!1),[v,y]=e.useState(null),b=He(),{data:w,isLoading:C}=Qe({queryKey:["widgets"],queryFn:async()=>(await Ee.api.get("/widgets")).data}),S=Ue({mutationFn:async e=>Ee.api.delete(`/widgets/${e}`),onSuccess:()=>{l.success("위젯이 삭제되었습니다"),b.invalidateQueries({queryKey:["widgets"]})},onError:()=>{l.error("삭제에 실패했습니다")}}),F=Ue({mutationFn:async e=>Ee.api.patch(`/widgets/${e.id}`,{isActive:e.isActive}),onSuccess:()=>{b.invalidateQueries({queryKey:["widgets"]})}}),I=w?.widgets||[],P=w?.areas||[],$=I.filter(e=>{const s=e.title.toLowerCase().includes(i.toLowerCase())||e.type.toLowerCase().includes(i.toLowerCase()),a="all"===c||e.position===c;return s&&a}),L=I.reduce((e,s)=>(e[s.position]||(e[s.position]=[]),e[s.position].push(s),e),{});Object.keys(L).forEach(e=>{L[e].sort((e,s)=>e.order-s.order)});const z=e=>{y(e),j(!0)},A=e=>{confirm(`"${e.title}" 위젯을 삭제하시겠습니까?`)&&S.mutate(e.id)},q=e=>{F.mutate({id:e.id,isActive:!e.isActive})},E=e=>({text:"텍스트",html:"HTML",image:"이미지",menu:"메뉴","recent-posts":"최근 게시글",categories:"카테고리",tags:"태그",archives:"아카이브",search:"검색","social-links":"소셜 링크","contact-info":"연락처 정보",newsletter:"뉴스레터","custom-code":"커스텀 코드","rss-feed":"RSS 피드",calendar:"캘린더"}[e]||e);return C?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"위젯을 불러오는 중..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"위젯 관리"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"사이트의 위젯을 관리하고 레이아웃을 구성하세요"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center border rounded-lg p-1",children:[s.jsx(qe,{size:"sm",variant:"desktop"===o?"default":"ghost",onClick:()=>h("desktop"),children:s.jsx(te,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"tablet"===o?"default":"ghost",onClick:()=>h("tablet"),children:s.jsx(ie,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"mobile"===o?"default":"ghost",onClick:()=>h("mobile"),children:s.jsx(ne,{className:"w-4 h-4"})})]}),s.jsxs(qe,{onClick:()=>{y(null),j(!0)},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"위젯 추가"]})]})]}),s.jsxs(Te,{value:a,onValueChange:e=>t(e),children:[s.jsxs(Ve,{children:[s.jsx(Re,{value:"builder",children:"위젯 빌더"}),s.jsx(Re,{value:"list",children:"목록 보기"}),s.jsx(Re,{value:"library",children:"위젯 라이브러리"})]}),s.jsx(Ke,{value:"builder",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[s.jsx("div",{className:"xl:col-span-2",children:s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsxs(rs,{className:"flex items-center gap-2",children:[s.jsx(Ne,{className:"w-5 h-5"}),"위젯 영역"]})}),s.jsx(ds,{children:s.jsx("div",{className:"space-y-6",children:P.map(e=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]}),s.jsx(es,{variant:e.isActive?"default":"secondary",children:e.isActive?"활성":"비활성"})]}),s.jsx("div",{className:"grid gap-3 "+(e.settings.columns>1?`grid-cols-${e.settings.columns}`:"grid-cols-1"),children:L[e.position]?.map(e=>s.jsxs("div",{className:"border rounded-lg p-3 transition-all "+(e.isActive?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{variant:"outline",className:"text-xs",children:E(e.type)}),!e.isActive&&s.jsx(es,{variant:"secondary",className:"text-xs",children:"비활성"})]}),s.jsxs(ss,{children:[s.jsx(as,{children:s.jsx(qe,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",children:s.jsx(u,{className:"w-3 h-3"})})}),s.jsxs(ls,{align:"end",children:[s.jsxs(ts,{onClick:()=>z(e),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"편집"]}),s.jsx(ts,{onClick:()=>q(e),children:e.isActive?s.jsxs(s.Fragment,{children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"비활성화"]}):s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"활성화"]})}),s.jsxs(ts,{children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"복제"]}),s.jsx(is,{}),s.jsxs(ts,{onClick:()=>A(e),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"삭제"]})]})]})]}),s.jsx("h4",{className:"font-medium text-sm",children:e.title}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["순서: ",e.order]})]},e.id))||s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center text-gray-500",children:[s.jsx(x,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"위젯을 추가하세요"})]})})]},e.id))})})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"위젯 통계"})}),s.jsx(ds,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"전체 위젯"}),s.jsxs("span",{className:"font-medium",children:[I.length,"개"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"활성 위젯"}),s.jsxs("span",{className:"font-medium text-green-600",children:[I.filter(e=>e.isActive).length,"개"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"비활성 위젯"}),s.jsxs("span",{className:"font-medium text-red-600",children:[I.filter(e=>!e.isActive).length,"개"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"위젯 영역"}),s.jsxs("span",{className:"font-medium",children:[P.length,"개"]})]})]})})]}),s.jsxs(ns,{children:[s.jsx(cs,{children:s.jsx(rs,{children:"빠른 작업"})}),s.jsx(ds,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(qe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{y(null),j(!0)},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"새 위젯 추가"]}),s.jsxs(qe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>t("library"),children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"위젯 라이브러리"]}),s.jsxs(qe,{variant:"outline",size:"sm",className:"w-full justify-start",children:[s.jsx(k,{className:"w-4 h-4 mr-2"}),"영역 설정"]})]})})]})]})]})}),s.jsxs(Ke,{value:"list",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Fe,{placeholder:"위젯 검색...",value:i,onChange:e=>n(e.target.value),className:"max-w-md"})}),s.jsxs(Ie,{value:c,onValueChange:e=>r(e),children:[s.jsx(Pe,{className:"w-48",children:s.jsx($e,{placeholder:"위치 선택"})}),s.jsxs(Le,{children:[s.jsx(ze,{value:"all",children:"모든 위치"}),s.jsx(ze,{value:"footer-1",children:"푸터 1"}),s.jsx(ze,{value:"footer-2",children:"푸터 2"}),s.jsx(ze,{value:"footer-3",children:"푸터 3"}),s.jsx(ze,{value:"footer-4",children:"푸터 4"}),s.jsx(ze,{value:"sidebar-main",children:"메인 사이드바"}),s.jsx(ze,{value:"sidebar-shop",children:"쇼핑 사이드바"}),s.jsx(ze,{value:"header-top",children:"헤더 상단"}),s.jsx(ze,{value:"header-bottom",children:"헤더 하단"})]})]})]}),s.jsx("div",{className:"grid gap-4",children:$.map(e=>{return s.jsx(ns,{children:s.jsx(ds,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-medium",children:e.title}),s.jsx(es,{variant:"outline",className:"text-xs",children:E(e.type)}),!e.isActive&&s.jsx(es,{variant:"secondary",className:"text-xs",children:"비활성"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[(a=e.position,{"footer-1":"푸터 1","footer-2":"푸터 2","footer-3":"푸터 3","footer-4":"푸터 4","sidebar-main":"메인 사이드바","sidebar-shop":"쇼핑 사이드바","header-top":"헤더 상단","header-bottom":"헤더 하단"}[a]||a)," • 순서: ",e.order]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>z(e),children:s.jsx(N,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>q(e),children:e.isActive?s.jsx(f,{className:"w-4 h-4"}):s.jsx(d,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>A(e),className:"text-red-600 hover:text-red-700",children:s.jsx(g,{className:"w-4 h-4"})})]})]})})},e.id);var a})}),0===$.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ne,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"위젯이 없습니다"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"새로운 위젯을 추가해보세요"}),s.jsxs(qe,{onClick:()=>{y(null),j(!0)},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"위젯 추가"]})]})]}),s.jsx(Ke,{value:"library",children:s.jsx(ca,{onApplyTemplate:()=>{b.invalidateQueries({queryKey:["widgets"]}),t("builder")}})})]}),m&&s.jsx(na,{widget:v,onSave:()=>{j(!1),y(null),b.invalidateQueries({queryKey:["widgets"]})},onCancel:()=>{j(!1),y(null)}})]})},da=()=>s.jsxs(ke,{children:[s.jsx(Ce,{path:"/",element:s.jsx(Se,{to:"posts",replace:!0})}),s.jsx(Ce,{path:"posts",element:s.jsx(Cs,{})}),s.jsx(Ce,{path:"posts/new",element:s.jsx(Ps,{})}),s.jsx(Ce,{path:"posts/:id/edit",element:s.jsx(Ps,{})}),s.jsx(Ce,{path:"pages",element:s.jsx(Ds,{})}),s.jsx(Ce,{path:"pages/new",element:s.jsx(ys,{})}),s.jsx(Ce,{path:"pages/:id/edit",element:s.jsx(ys,{})}),s.jsx(Ce,{path:"cpt",element:s.jsx(Ms,{})}),s.jsx(Ce,{path:"cpt/new",element:s.jsx(Vs,{})}),s.jsx(Ce,{path:"cpt/:id/edit",element:s.jsx(Vs,{})}),s.jsx(Ce,{path:"cpt/:cptId/fields",element:s.jsx(Ks,{})}),s.jsx(Ce,{path:"acf",element:s.jsx(_s,{})}),s.jsx(Ce,{path:"acf/new",element:s.jsx(Os,{})}),s.jsx(Ce,{path:"acf/:id/edit",element:s.jsx(Os,{})}),s.jsx(Ce,{path:"media",element:s.jsx(fs,{})}),s.jsx(Ce,{path:"templates",element:s.jsx(ta,{})}),s.jsx(Ce,{path:"widgets",element:s.jsx(ra,{})}),s.jsx(Ce,{path:":slug",element:s.jsx(Bs,{})}),s.jsx(Ce,{path:":slug/new",element:s.jsx(Ps,{})}),s.jsx(Ce,{path:":slug/:id/edit",element:s.jsx(Ps,{})})]});export{da as default};
