import{r as x,u as C,b as k,j as e,E as b,A as E,cm as P,cn as S,co as A,bq as L}from"./vendor-react-P__8vGRG.js";import{v as T}from"./index-C0gS3Jf3.js";import"./vendor-query-CucHvDcH.js";import"./page-template-editor-BTdVTS-a.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-utils-dq2XMRwt.js";import"./vendor-socket-DgcwqWsT.js";const R=()=>{const[i,d]=x.useState(null),[o,m]=x.useState("desktop"),[u,y]=x.useState(!0);C();const{id:c}=k();x.useEffect(()=>{(async()=>{try{if(c){const l=await T.get(c);if(!l.success){d({title:"Error Loading Content",blocks:[],postId:c});return}const s=l.data;if(!s){d({title:"Not Found",blocks:[],postId:c});return}let t=[];if(s.content)try{const a=JSON.parse(s.content);Array.isArray(a)?t=a:a&&typeof a=="object"&&"blocks"in a?t=a.blocks||[]:a&&typeof a=="object"&&(t=[a]),t=t.filter(n=>n&&typeof n=="object"&&n.type)}catch{t=[]}d({title:s.title||"Untitled Post",blocks:t,postId:s.id,status:s.status})}else{const l=sessionStorage.getItem("previewContent");if(l)try{const s=JSON.parse(l);d(s)}catch{}}}catch{}finally{y(!1)}})()},[c]);const g=r=>{const{type:l,content:s,attributes:t}=r,a=typeof s=="string"?s:s?.text||"";switch(l){case"core/paragraph":case"paragraph":return e.jsx("p",{className:"mb-4 text-gray-700 leading-relaxed",style:{textAlign:t?.align||"left",fontSize:t?.fontSize||"16px",color:t?.textColor||"#374151"},children:a},r.id);case"core/heading":case"heading":const n=`h${s?.level||2}`,f={h1:"text-4xl font-bold mb-6 text-gray-900",h2:"text-3xl font-semibold mb-5 text-gray-800",h3:"text-2xl font-semibold mb-4 text-gray-800",h4:"text-xl font-medium mb-3 text-gray-700",h5:"text-lg font-medium mb-2 text-gray-700",h6:"text-base font-medium mb-2 text-gray-600"};return e.jsx(n,{className:f[n],style:{textAlign:t?.align||"left",color:t?.textColor},children:a},r.id);case"core/list":case"list":const N=t?.ordered?"ol":"ul",w=s?.items||[a];return e.jsx(N,{className:`mb-4 ${t?.ordered?"list-decimal":"list-disc"} list-inside text-gray-700`,children:w.map((h,p)=>e.jsx("li",{className:"mb-1",children:h},p))},r.id);case"core/quote":case"quote":return e.jsxs("blockquote",{className:"border-l-4 border-gray-300 pl-4 py-2 mb-4 italic text-gray-600",children:[e.jsx("p",{children:a}),s?.citation&&e.jsxs("cite",{className:"block mt-2 text-sm text-gray-500 not-italic",children:["â€” ",s.citation]})]},r.id);case"core/code":case"code":return e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg mb-4 overflow-x-auto",children:e.jsx("code",{className:"text-sm font-mono",children:a})},r.id);case"core/image":case"image":return e.jsxs("figure",{className:"mb-6",children:[e.jsx("img",{src:s?.url||t?.url||"",alt:s?.alt||t?.alt||"",className:"w-full h-auto rounded-lg",style:{maxWidth:t?.width||"100%",height:t?.height||"auto"}}),(s?.caption||t?.caption)&&e.jsx("figcaption",{className:"mt-2 text-sm text-gray-600 text-center",children:s?.caption||t?.caption})]},r.id);case"core/button":case"button":return e.jsx("div",{className:"mb-4",children:e.jsx("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",style:{backgroundColor:t?.backgroundColor||"#2563eb",color:t?.textColor||"#ffffff",borderRadius:t?.borderRadius||"8px"},children:a||"Click here"})},r.id);case"core/separator":case"separator":return e.jsx("hr",{className:"my-8 border-t border-gray-300"},r.id);case"core/spacer":case"spacer":return e.jsx("div",{style:{height:t?.height||"50px"}},r.id);case"core/columns":case"columns":return e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-4",children:s?.columns?.map((h,p)=>e.jsx("div",{className:"p-4",children:h.blocks?.map(v=>g(v))},p))},r.id);default:return e.jsx("div",{className:"p-4 mb-4 bg-gray-100 rounded",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Unsupported block type: ",l]})},r.id)}},j=()=>{switch(o){case"tablet":return"max-w-3xl";case"mobile":return"max-w-sm";default:return"max-w-5xl"}};return u?e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading preview..."})]})}):i?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>window.close(),className:"flex items-center gap-2 px-3 py-1.5 text-gray-600 hover:text-gray-900 transition-colors",title:"Close preview",children:[e.jsx(E,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Back to Editor"})]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Preview Mode"}),i.status&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:i.status})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>m("desktop"),className:`p-2 rounded ${o==="desktop"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Desktop view",children:e.jsx(P,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m("tablet"),className:`p-2 rounded ${o==="tablet"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Tablet view",children:e.jsx(S,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m("mobile"),className:`p-2 rounded ${o==="mobile"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Mobile view",children:e.jsx(A,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("button",{onClick:()=>window.open(window.location.href,"_blank"),className:"flex items-center gap-2 px-3 py-1.5 text-gray-600 hover:text-gray-900 transition-colors",title:"Open in new tab",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"New Tab"})]})})]})})}),e.jsx("div",{className:"flex justify-center px-4 py-8",children:e.jsx("div",{className:`w-full ${j()} transition-all duration-300`,children:e.jsxs("article",{className:"bg-white rounded-lg shadow-lg p-8 md:p-12",children:[e.jsx("header",{className:"mb-8 pb-6 border-b border-gray-200",children:e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 leading-tight",children:i.title||"Untitled Post"})}),e.jsx("div",{className:"prose prose-lg max-w-none",children:i.blocks.map(r=>g(r))}),i.blocks.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No content blocks to display"})})]})})}),o!=="desktop"&&e.jsx("div",{className:"fixed inset-0 pointer-events-none z-40",children:e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:`border-8 border-gray-800 rounded-3xl ${o==="tablet"?"w-3/4 h-3/4":"w-96 h-[680px]"}`,style:{pointerEvents:"none"}})})})]}):e.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Preview Available"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No content to preview. Please go back to the editor."}),e.jsx("button",{onClick:()=>window.close(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Close Preview"})]})})};export{R as default};
//# sourceMappingURL=PostPreview-BHyJLofm.js.map
