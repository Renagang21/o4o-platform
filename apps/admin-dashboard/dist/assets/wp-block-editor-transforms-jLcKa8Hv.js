import{_ as e,B as o,W as t,V as s,u as r,b as n,b9 as a,aJ as i,ab as l,bb as c,T as m,e as p}from"./wp-block-editor-misc-pHCPYvR2.js";import{ap as u}from"./wp-block-editor-a11y-DrduSWFW.js";import{w as d,g as b,c as f,a as k}from"./wp-blocks-core-6vwQKPfS.js";import{P as g,B as h}from"./wp-block-editor-preview-iw2Xu1ib.js";import{r as x,j as v}from"./vendor-react-BQ6HOJoh.js";import{a as j,M as w,f as T}from"./wp-block-editor-menus-BTQ2wZ-f.js";import{c8 as _,c9 as N,a2 as S,U as B}from"./wp-block-editor-utils-M5qXzE1L.js";import{Z as y,ah as C,aD as I,aE as G,au as U,T as H,aF as D,aG as M,aH as z}from"./wp-block-editor-library-BpQvynjE.js";import{s as P}from"./wp-block-editor-store-B-g1aSix.js";import{c as R}from"./vendor-ui-CrFdsnXa.js";const V=({className:o,possibleBlockTransformations:t,possibleBlockVariationTransformations:s,onSelect:r,onSelectVariation:n,blocks:a})=>{const[i,l]=x.useState(),{priorityTextTransformations:c,restTransformations:m}=function(e){const o={"core/paragraph":1,"core/heading":2,"core/list":3,"core/quote":4},t=x.useMemo(()=>{const t=Object.keys(o),s=e.reduce((e,o)=>{const{name:s}=o;return t.includes(s)?e.priorityTextTransformations.push(o):e.restTransformations.push(o),e},{priorityTextTransformations:[],restTransformations:[]});if(1===s.priorityTextTransformations.length&&"core/quote"===s.priorityTextTransformations[0].name){const e=s.priorityTextTransformations.pop();s.restTransformations.push(e)}return s},[e]);return t.priorityTextTransformations.sort(({name:e},{name:t})=>o[e]<o[t]?-1:1),t}(t),p=c.length&&m.length,b=!!m.length&&v.jsx(W,{restTransformations:m,onSelect:r,setHoveredTransformItemName:l});return v.jsxs(v.Fragment,{children:[v.jsxs(j,{label:e("Transform to"),className:o,children:[i&&v.jsx(g,{blocks:d(a,i)}),!!s?.length&&v.jsx(u,{transformations:s,blocks:a,onSelect:n}),c.map(e=>v.jsx($,{item:e,onSelect:r,setHoveredTransformItemName:l},e.name)),!p&&b]}),!!p&&v.jsx(j,{className:o,children:b})]})};function W({restTransformations:e,onSelect:o,setHoveredTransformItemName:t}){return e.map(e=>v.jsx($,{item:e,onSelect:o,setHoveredTransformItemName:t},e.name))}function $({item:e,onSelect:t,setHoveredTransformItemName:s}){const{name:r,icon:n,title:a,isDisabled:i}=e;return v.jsxs(w,{className:b(r),onClick:e=>{e.preventDefault(),t(r)},disabled:i,onMouseLeave:()=>s(null),onMouseEnter:()=>s(r),children:[v.jsx(o,{icon:n,showColors:!0}),a]})}const E=(e,o)=>{const t=N(o.name,o.attributes);e.attributes={...e.attributes,...t}},F=(e,o)=>x.useMemo(()=>e.reduce((e,t)=>{const s=((e,o)=>{const t=o.map(e=>f(e)),s=new Set;for(const r of e){let e=!1;for(const o of t){const t=_(o,r.name,s);if(t){e=!0,s.add(t.clientId),E(t,r);break}}if(!e)return}return t})(o,t.blocks);return s&&e.push({...t,transformedBlocks:s}),e},[]),[e,o]);function L({blocks:o,patterns:t,onSelect:s}){const[r,n]=x.useState(!1),a=F(t,o);return a.length?v.jsxs(j,{className:"block-editor-block-switcher__pattern__transforms__menugroup",children:[r&&v.jsx(q,{patterns:a,onSelect:s}),v.jsx(w,{onClick:e=>{e.preventDefault(),n(!r)},icon:y,children:e("Patterns")})]}):null}function q({patterns:e,onSelect:o}){const t=S("medium","<");return v.jsx("div",{className:"block-editor-block-switcher__popover-preview-container",children:v.jsx(T,{className:"block-editor-block-switcher__popover-preview",placement:t?"bottom":"right-start",offset:16,children:v.jsx("div",{className:"block-editor-block-switcher__preview is-pattern-list-preview",children:v.jsx(J,{patterns:e,onSelect:o})})})})}function J({patterns:o,onSelect:s}){return v.jsx(t,{role:"listbox",className:"block-editor-block-switcher__preview-patterns-container","aria-label":e("Patterns list"),children:o.map(e=>v.jsx(O,{pattern:e,onSelect:s},e.name))})}function O({pattern:e,onSelect:o}){const r="block-editor-block-switcher__preview-patterns-container",n=B(O,`${r}-list__item-description`);return v.jsxs("div",{className:`${r}-list__list-item`,children:[v.jsxs(t.Item,{render:v.jsx("div",{role:"option","aria-label":e.title,"aria-describedby":e.description?n:void 0,className:`${r}-list__item`}),onClick:()=>o(e.transformedBlocks),children:[v.jsx(h,{blocks:e.transformedBlocks,viewportWidth:e.viewportWidth||500}),v.jsx("div",{className:`${r}-list__item-title`,children:e.title})]}),!!e.description&&v.jsx(s,{id:n,children:e.description})]})}function Z(e){return r(o=>{const{getBlocksByClientId:t,getSelectedBlockClientIds:s,isUngroupable:r,isGroupable:n}=o(P),{getGroupingBlockName:a,getBlockType:i}=o(k),l=e?.length?e:s(),c=t(l),[m]=c,p=1===l.length&&r(l[0]);return{clientIds:l,isGroupable:n(l),isUngroupable:p,blocksSelection:c,groupingBlockName:a(),onUngroup:p&&i(m.name)?.transforms?.ungroup}},[e])}const A={group:{type:"constrained"},row:{type:"flex",flexWrap:"nowrap"},stack:{type:"flex",orientation:"vertical"},grid:{type:"grid"}};function K(){const{blocksSelection:e,clientIds:o,groupingBlockName:t,isGroupable:s}=Z(),{replaceBlocks:c}=n(P),{canRemove:m,variations:p}=r(e=>{const{canRemoveBlocks:s}=e(P),{getBlockVariations:r}=e(k);return{canRemove:s(o),variations:r(t,"transform")}},[o,t]),u=s=>{const r=d(e,t);"string"!=typeof s&&(s="group"),r&&r.length>0&&(r[0].attributes.layout=A[s],c(o,r))};if(!s||!m)return null;const b=!!p.find(({name:e})=>"group-row"===e),f=!!p.find(({name:e})=>"group-stack"===e),g=!!p.find(({name:e})=>"group-grid"===e);return v.jsxs(a,{children:[v.jsx(i,{icon:C,label:l("Group","verb"),onClick:u}),b&&v.jsx(i,{icon:I,label:l("Row","single horizontal line"),onClick:()=>u("row")}),f&&v.jsx(i,{icon:G,label:l("Stack","verb"),onClick:()=>u("stack")}),g&&v.jsx(i,{icon:U,label:l("Grid","verb"),onClick:()=>u("grid")})]})}function Q({clientIds:e,isGroupable:o,isUngroupable:t,onUngroup:s,blocksSelection:a,groupingBlockName:i,onClose:m=()=>{}}){const{getSelectedBlockClientIds:p}=r(P),{replaceBlocks:u}=n(P);if(!o&&!t)return null;const b=p();return v.jsxs(v.Fragment,{children:[o&&v.jsx(w,{shortcut:b.length>1?c.primary("g"):void 0,onClick:()=>{(()=>{const o=d(a,i);o&&u(e,o)})(),m()},children:l("Group","verb")}),t&&v.jsx(w,{onClick:()=>{(()=>{let o=a[0].innerBlocks;o.length&&(s&&(o=s(a[0].attributes,a[0].innerBlocks)),u(e,o))})(),m()},children:l("Ungroup","Ungrouping blocks from within a grouping block back into individual blocks within the Editor")})]})}const X=[{label:e("None"),value:"none",icon:H},{label:e("Uppercase"),value:"uppercase",icon:D},{label:e("Lowercase"),value:"lowercase",icon:M},{label:e("Capitalize"),value:"capitalize",icon:z}];function Y({className:o,value:t,onChange:s}){return v.jsx(m,{isDeselectable:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:e("Letter case"),className:R("block-editor-text-transform-control",o),value:t,onChange:e=>{s(e===t?void 0:e)},children:X.map(e=>v.jsx(p,{value:e.value,icon:e.icon,label:e.label},e.value))})}export{V as B,Q as C,L as P,Y as T,K as a,Z as u};
