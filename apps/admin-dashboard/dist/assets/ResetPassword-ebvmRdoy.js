import{u as e,c4 as s,r as t,j as a,bh as l,bS as r,bg as n,c5 as i,c6 as c,E as d}from"./vendor-react-DqgGMt48.js";import"./vendor-monaco-BxJH8uUv.js";const m=()=>{const m=e(),[x]=s(),o=x.get("token"),[u,h]=t.useState(""),[p,g]=t.useState(""),[f,j]=t.useState(!1),[b,y]=t.useState(!1),[N,v]=t.useState(!1),[w,k]=t.useState(!1),[S,C]=t.useState(""),[$,z]=t.useState([]);t.useEffect(()=>{o||C("유효하지 않은 비밀번호 재설정 링크입니다.")},[o]);const P=()=>{const e=[];return u.length<8&&e.push("비밀번호는 최소 8자 이상이어야 합니다."),/[A-Z]/.test(u)||e.push("대문자를 하나 이상 포함해야 합니다."),/[a-z]/.test(u)||e.push("소문자를 하나 이상 포함해야 합니다."),/[0-9]/.test(u)||e.push("숫자를 하나 이상 포함해야 합니다."),/[!@#$%^&*]/.test(u)||e.push("특수문자(!@#$%^&*)를 하나 이상 포함해야 합니다."),u!==p&&e.push("비밀번호가 일치하지 않습니다."),z(e),0===e.length};return w?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(l,{className:"mx-auto h-12 w-12 text-green-500"}),a.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"비밀번호가 재설정되었습니다"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"새로운 비밀번호로 로그인할 수 있습니다."}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"잠시 후 로그인 페이지로 이동합니다..."})]}),a.jsx("div",{className:"mt-8",children:a.jsx(r,{to:"/login",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue",children:"지금 로그인하기"})})]})}):o?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"새 비밀번호 설정"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"안전한 새 비밀번호를 입력해주세요."})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),P()){C(""),v(!0);try{const e="https://api.neture.co.kr/api/v1",s=await fetch(`${e}/auth/v2/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:o,password:u})}),t=await s.json();s.ok?(k(!0),setTimeout(()=>{m("/login")},3e3)):C(t.error||"비밀번호 재설정에 실패했습니다.")}catch(s){C("서버와의 연결에 실패했습니다. 잠시 후 다시 시도해주세요.")}finally{v(!1)}}},children:[S&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(n,{className:"h-5 w-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:S})})]})}),$.length>0&&a.jsx("div",{className:"rounded-md bg-yellow-50 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(n,{className:"h-5 w-5 text-yellow-400"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"비밀번호 요구사항"}),a.jsx("ul",{className:"mt-2 text-sm text-yellow-700 list-disc list-inside",children:$.map((e,s)=>a.jsx("li",{children:e},s))})]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"새 비밀번호"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(i,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:f?"text":"password",autoComplete:"new-password",required:!0,value:u,onChange:e=>{h(e.target.value),$.length>0&&P()},className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-admin-blue focus:border-admin-blue focus:z-10 sm:text-sm",placeholder:"새 비밀번호",disabled:N}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>j(!f),children:f?a.jsx(c,{className:"h-5 w-5 text-gray-400"}):a.jsx(d,{className:"h-5 w-5 text-gray-400"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"비밀번호 확인"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(i,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:b?"text":"password",autoComplete:"new-password",required:!0,value:p,onChange:e=>{g(e.target.value),$.length>0&&P()},className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-admin-blue focus:border-admin-blue focus:z-10 sm:text-sm",placeholder:"비밀번호 확인",disabled:N}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>y(!b),children:b?a.jsx(c,{className:"h-5 w-5 text-gray-400"}):a.jsx(d,{className:"h-5 w-5 text-gray-400"})})]})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"비밀번호 요구사항:"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[a.jsx("li",{className:u.length>=8?"text-green-600":"",children:"• 최소 8자 이상"}),a.jsx("li",{className:/[A-Z]/.test(u)?"text-green-600":"",children:"• 대문자 포함"}),a.jsx("li",{className:/[a-z]/.test(u)?"text-green-600":"",children:"• 소문자 포함"}),a.jsx("li",{className:/[0-9]/.test(u)?"text-green-600":"",children:"• 숫자 포함"}),a.jsx("li",{className:/[!@#$%^&*]/.test(u)?"text-green-600":"",children:"• 특수문자 포함 (!@#$%^&*)"}),a.jsx("li",{className:u&&u===p?"text-green-600":"",children:"• 비밀번호 일치"})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:N||!u||!p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue disabled:opacity-50 disabled:cursor-not-allowed",children:N?a.jsx("span",{children:"비밀번호 재설정 중..."}):a.jsx("span",{children:"비밀번호 재설정"})})})]})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(n,{className:"mx-auto h-12 w-12 text-red-500"}),a.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"유효하지 않은 링크"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"비밀번호 재설정 링크가 유효하지 않거나 만료되었습니다."})]}),a.jsx("div",{className:"mt-8",children:a.jsx(r,{to:"/forgot-password",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue",children:"비밀번호 재설정 다시 요청하기"})})]})})};export{m as default};
