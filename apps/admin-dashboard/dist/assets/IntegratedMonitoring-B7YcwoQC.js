import{r as e,j as s,bx as a,bw as t,bO as r,dg as c,bM as i,cD as l,ba as n,c8 as d}from"./vendor-react-BoWgD0Bu.js";import{a as x}from"./vendor-query-CbBSyLUF.js";import{cT as m,cX as h,cU as o,cy as j,cz as u,cA as p,cB as y,cK as g,cJ as N}from"./wp-misc-fiKRzvVp.js";import{B as f,d as v,e as b,f as w,g as k}from"./page-template-editor-CWJwXWLM.js";import{a as S}from"./api-client-CxLCD9ze.js";import B from"./PerformanceDashboard-C7S1XOLe.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-utils-C9jLuAcl.js";import"./wp-foundation-BzBJX52f.js";import"./wp-block-editor-main-y2nlPlta.js";import"./wp-i18n-BPC8WmOV.js";import"./wp-block-editor-store-PPID3vJI.js";import"./wp-block-editor-utils-C52tDze8.js";import"./wp-components-CKWj6dcl.js";function L(){const[L,C]=e.useState("overview"),{data:E,isLoading:D,refetch:A}=x({queryKey:["monitoring-summary"],queryFn:async()=>(await S.get("/monitoring/summary")).data,refetchInterval:3e4}),z=async()=>{try{await S.post("/monitoring/backup/trigger"),A()}catch(e){}};if(D||!E)return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-admin-blue"})});const M=e=>{switch(e){case"healthy":return"text-green-500";case"degraded":return"text-yellow-500";case"critical":return"text-red-500";default:return"text-gray-500"}},P=e=>s.jsx(N,{variant:{critical:"destructive",high:"destructive",error:"destructive",warning:"default",medium:"default",low:"secondary",info:"secondary"}[e]||"default",children:e});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"System Monitoring"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"Comprehensive system health and security monitoring"})]}),s.jsxs(f,{variant:"outline",size:"sm",onClick:()=>A(),children:[s.jsx(a,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),"healthy"!==E.system.health&&s.jsxs(m,{variant:"critical"===E.system.health?"destructive":"default",children:[s.jsx(t,{className:"h-4 w-4"}),s.jsxs(h,{children:["System Health: ",E.system.health.toUpperCase()]}),s.jsxs(o,{children:["System performance is ",E.system.health,". Please check the performance dashboard for details."]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(j,{children:[s.jsx(u,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(p,{className:"text-sm font-medium",children:"System Health"}),s.jsx(r,{className:`w-4 h-4 ${M(E.system.health)}`})]})}),s.jsxs(y,{children:[s.jsx("div",{className:`text-2xl font-bold capitalize ${M(E.system.health)}`,children:E.system.health}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[s.jsxs("span",{children:["CPU: ",E.system.cpu,"%"]}),s.jsxs("span",{children:["Mem: ",E.system.memory,"%"]})]})]})]}),s.jsxs(j,{children:[s.jsx(u,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(p,{className:"text-sm font-medium",children:"Backup Status"}),s.jsx(c,{className:"w-4 h-4 "+("success"===E.backup.status?"text-green-500":"text-red-500")})]})}),s.jsxs(y,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"running"===E.backup.status?s.jsx("span",{className:"text-blue-500",children:"Running..."}):E.backup.lastBackup?new Date(E.backup.lastBackup).toLocaleDateString():"Never"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[s.jsxs("span",{children:[E.backup.totalBackups," total"]}),s.jsx("span",{children:E.backup.backupSize})]})]})]}),s.jsxs(j,{children:[s.jsx(u,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(p,{className:"text-sm font-medium",children:"Error Alerts"}),s.jsx(t,{className:"w-4 h-4 "+(E.errors.critical>0?"text-red-500":"text-green-500")})]})}),s.jsxs(y,{children:[s.jsxs("div",{className:"flex items-baseline gap-4",children:[s.jsx("span",{className:"text-2xl font-bold text-red-500",children:E.errors.critical}),s.jsx("span",{className:"text-lg text-orange-500",children:E.errors.error}),s.jsx("span",{className:"text-sm text-yellow-500",children:E.errors.warning})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Critical / Error / Warning"})]})]}),s.jsxs(j,{children:[s.jsx(u,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(p,{className:"text-sm font-medium",children:"Security"}),s.jsx(i,{className:"w-4 h-4 "+(E.security.suspiciousActivities>0?"text-yellow-500":"text-green-500")})]})}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Blocked IPs"}),s.jsx("span",{className:"font-medium",children:E.security.blockedIPs})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Failed Logins"}),s.jsx("span",{className:"font-medium",children:E.security.failedLogins})]})]})})]})]}),s.jsxs(v,{value:L,onValueChange:C,className:"space-y-4",children:[s.jsxs(b,{className:"grid w-full grid-cols-5",children:[s.jsx(w,{value:"overview",children:"Overview"}),s.jsx(w,{value:"performance",children:"Performance"}),s.jsx(w,{value:"backup",children:"Backup"}),s.jsx(w,{value:"errors",children:"Errors"}),s.jsx(w,{value:"security",children:"Security"})]}),s.jsxs(k,{value:"overview",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs(j,{children:[s.jsxs(u,{children:[s.jsx(p,{children:"Recent Errors"}),s.jsx(g,{children:"Latest error alerts from the system"})]}),s.jsx(y,{children:s.jsx("div",{className:"space-y-3",children:0===E.errors.recent.length?s.jsx("p",{className:"text-sm text-gray-500",children:"No recent errors"}):E.errors.recent.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium line-clamp-1",children:e.message}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),P(e.level)]},e.id))})})]}),s.jsxs(j,{children:[s.jsxs(u,{children:[s.jsx(p,{children:"Security Events"}),s.jsx(g,{children:"Latest security-related activities"})]}),s.jsx(y,{children:s.jsx("div",{className:"space-y-3",children:0===E.security.recentEvents.length?s.jsx("p",{className:"text-sm text-gray-500",children:"No recent security events"}):E.security.recentEvents.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:e.type}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.ipAddress," â€¢ ",new Date(e.timestamp).toLocaleString()]})]}),P(e.severity)]},e.id))})})]})]}),s.jsxs(j,{children:[s.jsxs(u,{children:[s.jsx(p,{children:"Quick Actions"}),s.jsx(g,{children:"Common monitoring and maintenance tasks"})]}),s.jsx(y,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs(f,{variant:"outline",className:"h-auto flex-col py-4",onClick:z,disabled:"running"===E.backup.status,children:[s.jsx(l,{className:"w-5 h-5 mb-2"}),s.jsx("span",{className:"text-xs",children:"Manual Backup"})]}),s.jsxs(f,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>C("errors"),children:[s.jsx(t,{className:"w-5 h-5 mb-2"}),s.jsx("span",{className:"text-xs",children:"View Errors"})]}),s.jsxs(f,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>C("security"),children:[s.jsx(i,{className:"w-5 h-5 mb-2"}),s.jsx("span",{className:"text-xs",children:"Security Logs"})]}),s.jsxs(f,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>window.location.href="/admin/settings",children:[s.jsx(n,{className:"w-5 h-5 mb-2"}),s.jsx("span",{className:"text-xs",children:"Settings"})]})]})})]})]}),s.jsx(k,{value:"performance",children:s.jsx(B,{})}),s.jsx(k,{value:"backup",className:"space-y-4",children:s.jsxs(j,{children:[s.jsxs(u,{children:[s.jsx(p,{children:"Backup Management"}),s.jsx(g,{children:"Manage and monitor system backups"})]}),s.jsxs(y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Last Backup"}),s.jsx("p",{className:"font-medium",children:E.backup.lastBackup?new Date(E.backup.lastBackup).toLocaleString():"Never"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Next Backup"}),s.jsx("p",{className:"font-medium",children:E.backup.nextBackup?new Date(E.backup.nextBackup).toLocaleString():"Not scheduled"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Success Rate"}),s.jsx("p",{className:"font-medium",children:E.backup.totalBackups>0?`${((E.backup.totalBackups-E.backup.failedBackups)/E.backup.totalBackups*100).toFixed(1)}%`:"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Size"}),s.jsx("p",{className:"font-medium",children:E.backup.backupSize})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(f,{onClick:z,disabled:"running"===E.backup.status,children:"running"===E.backup.status?s.jsxs(s.Fragment,{children:[s.jsx(a,{className:"w-4 h-4 mr-2 animate-spin"}),"Running..."]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{className:"w-4 h-4 mr-2"}),"Start Backup"]})}),s.jsxs(f,{variant:"outline",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"Schedule"]})]})]})]})}),s.jsx(k,{value:"errors",children:s.jsxs(j,{children:[s.jsxs(u,{children:[s.jsx(p,{children:"Error Log"}),s.jsx(g,{children:"System errors and alerts"})]}),s.jsx(y,{children:s.jsx("p",{className:"text-sm text-gray-500",children:"Error log details would be displayed here"})})]})}),s.jsx(k,{value:"security",children:s.jsxs(j,{children:[s.jsxs(u,{children:[s.jsx(p,{children:"Security Audit Log"}),s.jsx(g,{children:"Security events and access logs"})]}),s.jsx(y,{children:s.jsx("p",{className:"text-sm text-gray-500",children:"Security audit log would be displayed here"})})]})})]})]})}export{L as default};
