import{a1 as O,c6 as T,r as a,j as e,Z as A,bT as g,Y as u,c7 as j,c8 as y,O as b}from"./vendor-react-CMQx0Rxg.js";import"./wp-all-CpKe89B2.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";const R=()=>{const N=O(),[w]=T(),r=w.get("token"),[s,v]=a.useState(""),[l,S]=a.useState(""),[o,k]=a.useState(!1),[d,P]=a.useState(!1),[n,h]=a.useState(!1),[C,E]=a.useState(!1),[p,i]=a.useState(""),[c,$]=a.useState([]);a.useEffect(()=>{r||i("유효하지 않은 비밀번호 재설정 링크입니다.")},[r]);const m=()=>{const t=[];return s.length<8&&t.push("비밀번호는 최소 8자 이상이어야 합니다."),/[A-Z]/.test(s)||t.push("대문자를 하나 이상 포함해야 합니다."),/[a-z]/.test(s)||t.push("소문자를 하나 이상 포함해야 합니다."),/[0-9]/.test(s)||t.push("숫자를 하나 이상 포함해야 합니다."),/[!@#$%^&*]/.test(s)||t.push("특수문자(!@#$%^&*)를 하나 이상 포함해야 합니다."),s!==l&&t.push("비밀번호가 일치하지 않습니다."),$(t),t.length===0},z=async t=>{if(t.preventDefault(),!!m()){i(""),h(!0);try{const f=await fetch("https://api.neture.co.kr/api/v1/auth/v2/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,password:s})}),L=await f.json();f.ok?(E(!0),setTimeout(()=>{N("/login")},3e3)):i(L.error||"비밀번호 재설정에 실패했습니다.")}catch{i("서버와의 연결에 실패했습니다. 잠시 후 다시 시도해주세요.")}finally{h(!1)}}};return C?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(A,{className:"mx-auto h-12 w-12 text-green-500"}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"비밀번호가 재설정되었습니다"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"새로운 비밀번호로 로그인할 수 있습니다."}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"잠시 후 로그인 페이지로 이동합니다..."})]}),e.jsx("div",{className:"mt-8",children:e.jsx(g,{to:"/login",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue",children:"지금 로그인하기"})})]})}):r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"새 비밀번호 설정"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"안전한 새 비밀번호를 입력해주세요."})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:z,children:[p&&e.jsx("div",{className:"rounded-md bg-red-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(u,{className:"h-5 w-5 text-red-400"}),e.jsx("div",{className:"ml-3",children:e.jsx("h3",{className:"text-sm font-medium text-red-800",children:p})})]})}),c.length>0&&e.jsx("div",{className:"rounded-md bg-yellow-50 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(u,{className:"h-5 w-5 text-yellow-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"비밀번호 요구사항"}),e.jsx("ul",{className:"mt-2 text-sm text-yellow-700 list-disc list-inside",children:c.map((t,x)=>e.jsx("li",{children:t},x))})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"새 비밀번호"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:o?"text":"password",autoComplete:"new-password",required:!0,value:s,onChange:t=>{v(t.target.value),c.length>0&&m()},className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-admin-blue focus:border-admin-blue focus:z-10 sm:text-sm",placeholder:"새 비밀번호",disabled:n}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>k(!o),children:o?e.jsx(y,{className:"h-5 w-5 text-gray-400"}):e.jsx(b,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"비밀번호 확인"}),e.jsxs("div",{className:"mt-1 relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:d?"text":"password",autoComplete:"new-password",required:!0,value:l,onChange:t=>{S(t.target.value),c.length>0&&m()},className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-admin-blue focus:border-admin-blue focus:z-10 sm:text-sm",placeholder:"비밀번호 확인",disabled:n}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>P(!d),children:d?e.jsx(y,{className:"h-5 w-5 text-gray-400"}):e.jsx(b,{className:"h-5 w-5 text-gray-400"})})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"비밀번호 요구사항:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{className:s.length>=8?"text-green-600":"",children:"• 최소 8자 이상"}),e.jsx("li",{className:/[A-Z]/.test(s)?"text-green-600":"",children:"• 대문자 포함"}),e.jsx("li",{className:/[a-z]/.test(s)?"text-green-600":"",children:"• 소문자 포함"}),e.jsx("li",{className:/[0-9]/.test(s)?"text-green-600":"",children:"• 숫자 포함"}),e.jsx("li",{className:/[!@#$%^&*]/.test(s)?"text-green-600":"",children:"• 특수문자 포함 (!@#$%^&*)"}),e.jsx("li",{className:s&&s===l?"text-green-600":"",children:"• 비밀번호 일치"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:n||!s||!l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsx("span",{children:"비밀번호 재설정 중..."}):e.jsx("span",{children:"비밀번호 재설정"})})})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(u,{className:"mx-auto h-12 w-12 text-red-500"}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"유효하지 않은 링크"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"비밀번호 재설정 링크가 유효하지 않거나 만료되었습니다."})]}),e.jsx("div",{className:"mt-8",children:e.jsx(g,{to:"/forgot-password",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue",children:"비밀번호 재설정 다시 요청하기"})})]})})};export{R as default};
