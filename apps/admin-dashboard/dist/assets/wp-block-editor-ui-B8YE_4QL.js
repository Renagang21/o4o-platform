import{h as e,Q as t,a as n,e as o,p as s,f as r,G as l,n as i,K as a,A as c,J as d,t as u,c as g,r as p,i as m,R as h}from"./wp-blocks-core-6vwQKPfS.js";import{ak as b,g as k,c5 as x,aj as f,cc as j,ad as y,T as C,X as I,a2 as _,cd as S,V as v,ce as B,ae as w}from"./wp-block-editor-utils-M5qXzE1L.js";import{m as P,n as N,o as T,s as M,p as D}from"./wp-block-editor-store-B-g1aSix.js";import{_ as F,ab as A,bV as E,u as O,c as L,b as R,s as H,aY as z,bW as V,bX as U,W,a as G,B as q,a8 as $,aj as K,bY as Q,aQ as X,N as Y,bZ as Z,b_ as J,a0 as ee,aG as te,Q as ne,ae as oe,Y as se,b$ as re,H as le,a9 as ie,aD as ae,D as ce,z as de,I as ue,a$ as ge,S as pe,y as me,a5 as he,b2 as be,a2 as ke,O as xe,a_ as fe,V as je,r as ye,b6 as Ce,aq as Ie,bs as _e,c0 as Se,c1 as ve,bb as Be,b9 as we,aM as Pe,aH as Ne,c2 as Te,c3 as Me,c4 as De,aI as Fe,b8 as Ae,c5 as Ee,aJ as Oe,c6 as Le,c7 as Re,$ as He,aN as ze,v as Ve,c8 as Ue,c9 as We,ca as Ge,cb as qe}from"./wp-block-editor-misc-pHCPYvR2.js";import{ah as $e,ao as Ke}from"./wp-block-editor-a11y-DrduSWFW.js";import{r as Qe,j as Xe}from"./vendor-react-BQ6HOJoh.js";import{c as Ye}from"./vendor-ui-CrFdsnXa.js";import{i as Ze,j as Je,D as et,a as tt}from"./wp-block-editor-dnd-BYoS8-II.js";import{a1 as nt,af as ot,Z as st,Y as rt,aI as lt,p as it,aJ as at}from"./wp-block-editor-library-BpQvynjE.js";import{s as ct,w as dt,x as ut,t as gt}from"./wp-misc-DS9m4_P2.js";import{a as pt,b as mt,m as ht,T as bt,M as kt,f as xt,h as ft,i as jt}from"./wp-block-editor-menus-BTQ2wZ-f.js";import{u as yt,C as Ct,a as It}from"./wp-block-editor-transforms-jLcKa8Hv.js";import{S as _t}from"./wp-block-editor-global-styles-CV5-K6QF.js";import{u as St}from"./wp-block-editor-clipboard-Dg0Y1gQ6.js";import{j as vt}from"./wp-block-editor-selection-CC4tJpUu.js";import{c as Bt,P as wt,a as Pt}from"./wp-block-editor-patterns-BXdHo9lm.js";import{N as Nt,B as Tt}from"./wp-block-editor-navigation-BFSoKzg0.js";import{b as Mt}from"./wp-block-editor-borders-BH1devca.js";import{B as Dt}from"./wp-block-editor-preview-iw2Xu1ib.js";import{a4 as Ft,a as At,p as Et}from"./wp-block-editor-api-Buev8_QU.js";import{M as Ot,a as Lt}from"./wp-block-editor-media-Bg-JiQDT.js";const Rt={user:"user",theme:"theme",directory:"directory"},Ht="fully",zt="unsynced",Vt={name:"allPatterns",label:A("All","patterns")},Ut={name:"myPatterns",label:F("My patterns")};function Wt(e,t,n){const o=e.name.startsWith("core/block"),s="core"===e.source||e.source?.startsWith("pattern-directory");return!(t!==Rt.theme||!o&&!s)||(!(t!==Rt.directory||!o&&s)||(t===Rt.user&&e.type!==Rt.user||(n===Ht&&""!==e.syncStatus||!(n!==zt||"unsynced"===e.syncStatus||!o))))}const Gt=["color","border","dimensions","typography","spacing"],qt={"color.palette":e=>e.colors,"color.gradients":e=>e.gradients,"color.custom":e=>void 0===e.disableCustomColors?void 0:!e.disableCustomColors,"color.customGradient":e=>void 0===e.disableCustomGradients?void 0:!e.disableCustomGradients,"typography.fontSizes":e=>e.fontSizes,"typography.customFontSize":e=>void 0===e.disableCustomFontSizes?void 0:!e.disableCustomFontSizes,"typography.lineHeight":e=>e.enableCustomLineHeight,"spacing.units":e=>{if(void 0!==e.enableCustomUnits)return!0===e.enableCustomUnits?["px","em","rem","vh","vw","%"]:e.enableCustomUnits},"spacing.padding":e=>e.enableCustomSpacing},$t={"border.customColor":"border.color","border.customStyle":"border.style","border.customWidth":"border.width","typography.customFontStyle":"typography.fontStyle","typography.customFontWeight":"typography.fontWeight","typography.customLetterSpacing":"typography.letterSpacing","typography.customTextDecorations":"typography.textDecoration","typography.customTextTransforms":"typography.textTransform","border.customRadius":"border.radius","spacing.customMargin":"spacing.margin","spacing.customPadding":"spacing.padding","typography.customLineHeight":"typography.lineHeight"};function Kt(n,o,...s){const r=P(n,o),l=[];if(o){let t=o;do{const o=P(n,t);e(o,"__experimentalSettings",!1)&&l.push(t)}while(t=n.blocks.parents.get(t))}return s.map(e=>{if(Gt.includes(e))return;let s=b("blockEditor.useSetting.before",void 0,e,o,r);if(void 0!==s)return s;const i=(e=>$t[e]||e)(e);for(const t of l){var a;const e=N(n,t);if(s=null!==(a=k(e.settings?.blocks?.[r],i))&&void 0!==a?a:k(e.settings,i),void 0!==s)break}const c=T(n);var d,u;if(void 0===s&&r&&(s=k(c.__experimentalFeatures?.blocks?.[r],i)),void 0===s&&(s=k(c.__experimentalFeatures,i)),void 0!==s)return t[i]?null!==(d=null!==(u=s.custom)&&void 0!==u?u:s.theme)&&void 0!==d?d:s.default:s;const g=qt[i]?.(c);return void 0!==g?g:"typography.dropCap"===i||void 0})}const Qt=e=>e.name||"",Xt=e=>e.title,Yt=e=>e.description||"",Zt=e=>e.keywords||[],Jt=e=>e.category,en=()=>null,tn=[/([\p{Ll}\p{Lo}\p{N}])([\p{Lu}\p{Lt}])/gu,/([\p{Lu}\p{Lt}])([\p{Lu}\p{Lt}][\p{Ll}\p{Lo}])/gu],nn=/(\p{C}|\p{P}|\p{S})+/giu,on=new Map,sn=new Map;function rn(e=""){if(on.has(e))return on.get(e);const t=Ft(e,{splitRegexp:tn,stripRegexp:nn}).split(" ").filter(Boolean);return on.set(e,t),t}function ln(e=""){if(sn.has(e))return sn.get(e);let t=E(e);return t=t.replace(/^\//,""),t=t.toLowerCase(),sn.set(e,t),t}const an=(e="")=>rn(ln(e)),cn=(e,t,n,o)=>{if(0===an(o).length)return e;return dn(e,o,{getCategory:e=>t.find(({slug:t})=>t===e.category)?.title,getCollection:e=>n[e.name.split("/")[0]]?.title})},dn=(e=[],t="",n={})=>{if(0===an(t).length)return e;const o=e.map(e=>[e,un(e,t,n)]).filter(([,e])=>e>0);return o.sort(([,e],[,t])=>t-e),o.map(([e])=>e)};function un(e,t,n={}){const{getName:o=Qt,getTitle:s=Xt,getDescription:r=Yt,getKeywords:l=Zt,getCategory:i=Jt,getCollection:a=en}=n,c=o(e),d=s(e),u=r(e),g=l(e),p=i(e),m=a(e),h=ln(t),b=ln(d);let k=0;if(h===b)k+=30;else if(b.startsWith(h))k+=20;else{const e=[c,d,u,...g,p,m].join(" ");0===((e,t)=>e.filter(e=>!an(t).some(t=>t.includes(e))))(rn(h),e).length&&(k+=10)}if(0!==k&&c.startsWith("core/")){k+=c!==e.id?1:2}return k}const gn=(e,t,i)=>{const a=Qe.useMemo(()=>({[x]:!!i}),[i]),[c]=O(t=>[t(M).getInserterItems(e,a)],[e,a]),{getClosestAllowedInsertionPoint:d}=L(O(M)),{createErrorNotice:u}=R(ct),[g,p]=O(e=>{const{getCategories:t,getCollections:o}=e(n);return[t(),o()]},[]);return[c,g,p,Qe.useCallback(({name:n,initialAttributes:i,innerBlocks:a,syncStatus:c,content:g},p)=>{const m=d(n,e);if(null===m){var h;const e=null!==(h=o(n)?.title)&&void 0!==h?h:n;return void u(H(F('Block "%s" can\'t be inserted.'),e),{type:"snackbar",id:"inserter-notice"})}const b="unsynced"===c?s(g,{__unstableSkipMigrationLogs:!0}):r(n,i,l(a));t(b,void 0,p,m)},[t,d,e])]},pn=(e,t)=>t?(e.sort(({id:e},{id:n})=>{let o=t.indexOf(e),s=t.indexOf(n);return o<0&&(o=t.length),s<0&&(s=t.length),o-s}),e):e,mn=[z(F("While writing, you can press <kbd>/</kbd> to quickly insert new blocks."),{kbd:Xe.jsx("kbd",{})}),z(F("Indent a list by pressing <kbd>space</kbd> at the beginning of a line."),{kbd:Xe.jsx("kbd",{})}),z(F("Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line."),{kbd:Xe.jsx("kbd",{})}),F("Drag files into the editor to automatically insert media blocks."),F("Change a block's type by pressing the block icon on the toolbar.")];function hn(){const[e]=Qe.useState(Math.floor(Math.random()*mn.length));return Xe.jsx(V,{children:mn[e]})}function bn({item:e}){var t;const{name:n,title:o,icon:s,description:l,initialAttributes:c,example:d}=e,u=i(e),g=Qe.useMemo(()=>d?a(n,{attributes:{...d.attributes,...c},innerBlocks:d.innerBlocks}):r(n,c),[n,d,c]),p=144,m=null!==(t=d?.viewportWidth)&&void 0!==t?t:500,h=280/m,b=0!==h&&h<1?p/h:p;return Xe.jsxs("div",{className:"block-editor-inserter__preview-container",children:[Xe.jsx("div",{className:"block-editor-inserter__preview",children:u||d?Xe.jsx("div",{className:"block-editor-inserter__preview-content",children:Xe.jsx(Dt,{blocks:g,viewportWidth:m,minHeight:p,additionalStyles:[{css:`\n\t\t\t\t\t\t\t\t\t\tbody { \n\t\t\t\t\t\t\t\t\t\t\tpadding: 24px;\n\t\t\t\t\t\t\t\t\t\t\tmin-height:${Math.round(b)}px;\n\t\t\t\t\t\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t.is-root-container { width: 100%; }\n\t\t\t\t\t\t\t\t\t`}]})}):Xe.jsx("div",{className:"block-editor-inserter__preview-content-missing",children:F("No preview available.")})}),!u&&Xe.jsx(U,{title:o,icon:s,description:l})]})}const kn=Qe.forwardRef(function(e,t){const[n,o]=Qe.useState(!1);return Qe.useEffect(()=>{n&&$e(F("Use left and right arrow keys to move through blocks"))},[n]),Xe.jsx("div",{ref:t,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{o(!0)},onBlur:e=>{!e.currentTarget.contains(e.relatedTarget)&&o(!1)},...e})});const xn=Qe.forwardRef(function(e,t){return Xe.jsx(W.Group,{role:"presentation",ref:t,...e})});const fn=Qe.forwardRef(function({isFirst:e,as:t,children:n,...o},s){return Xe.jsx(W.Item,{ref:s,role:"option",accessibleWhenDisabled:!0,...o,render:o=>{const s={...o,tabIndex:e?0:o.tabIndex};return t?Xe.jsx(t,{...s,children:n}):"function"==typeof n?n(s):Xe.jsx(G,{__next40pxDefaultSize:!0,...s,children:n})}})});function jn({children:e}){return Xe.jsx(W,{focusShift:!0,focusWrap:"horizontal",render:Xe.jsx(Xe.Fragment,{}),children:e})}const yn=({isEnabled:e,blocks:t,icon:o,children:s,pattern:l})=>{const i={type:"inserter",blocks:t},a=O(e=>{const{getBlockType:o}=e(n);return 1===t.length&&o(t[0].name)?.icon},[t]),{startDragging:d,stopDragging:u}=L(R(M));return e?Xe.jsx(Ze,{__experimentalTransferDataType:"wp-blocks",transferData:i,onDragStart:e=>{d();const n=l?.type===Rt.user&&"unsynced"!==l?.syncStatus?[r("core/block",{ref:l.id})]:t;e.dataTransfer.setData("text/html",c(n))},onDragEnd:()=>{u()},__experimentalDragComponent:Xe.jsx(Je,{count:t.length,icon:o||!l&&a,isPattern:!!l}),children:({onDraggableStart:e,onDraggableEnd:t})=>s({draggable:!0,onDragStart:e,onDragEnd:t})}):s({draggable:!1,onDragStart:void 0,onDragEnd:void 0})};const Cn=Qe.memo(function({className:e,isFirst:t,item:n,onSelect:o,onHover:s,isDraggable:a,...c}){const u=Qe.useRef(!1),g=n.icon?{backgroundColor:n.icon.background,color:n.icon.foreground}:{},p=Qe.useMemo(()=>[r(n.name,n.initialAttributes,l(n.innerBlocks))],[n.name,n.initialAttributes,n.innerBlocks]),m=i(n)&&"unsynced"!==n.syncStatus||d(n);return Xe.jsx(yn,{isEnabled:a&&!n.isDisabled,blocks:p,icon:n.icon,children:({draggable:r,onDragStart:l,onDragEnd:i})=>Xe.jsx("div",{className:Ye("block-editor-block-types-list__list-item",{"is-synced":m}),draggable:r,onDragStart:e=>{u.current=!0,l&&(s(null),l(e))},onDragEnd:e=>{u.current=!1,i&&i(e)},children:Xe.jsxs(fn,{isFirst:t,className:Ye("block-editor-block-types-list__item",e),disabled:n.isDisabled,onClick:e=>{e.preventDefault(),o(n,Q()?e.metaKey:e.ctrlKey),s(null)},onKeyDown:e=>{const{keyCode:t}=e;t===K&&(e.preventDefault(),o(n,Q()?e.metaKey:e.ctrlKey),s(null))},onMouseEnter:()=>{u.current||s(n)},onMouseLeave:()=>s(null),...c,children:[Xe.jsx("span",{className:"block-editor-block-types-list__item-icon",style:g,children:Xe.jsx(q,{icon:n.icon,showColors:!0})}),Xe.jsx("span",{className:"block-editor-block-types-list__item-title",children:Xe.jsx($,{numberOfLines:3,children:n.title})})]})})})});function In({title:e,icon:t,children:n}){return Xe.jsxs(Xe.Fragment,{children:[Xe.jsxs("div",{className:"block-editor-inserter__panel-header",children:[Xe.jsx("h2",{className:"block-editor-inserter__panel-title",children:e}),Xe.jsx(X,{icon:t})]}),Xe.jsx("div",{className:"block-editor-inserter__panel-content",children:n})]})}function _n(){return Xe.jsxs("div",{className:"block-editor-inserter__no-results",children:[Xe.jsx(Y,{className:"block-editor-inserter__no-results-icon",icon:nt}),Xe.jsx("p",{children:F("No results found.")})]})}const Sn=[];function vn({items:e,collections:t,categories:n,onSelectItem:o,onHover:s,showMostUsedBlocks:r,className:l}){const i=Qe.useMemo(()=>f(e,"frecency","desc").slice(0,6),[e]),a=Qe.useMemo(()=>e.filter(e=>!e.category),[e]),c=Qe.useMemo(()=>{const n={...t};return Object.keys(t).forEach(t=>{n[t]=e.filter(e=>(e=>e.name.split("/")[0])(e)===t),0===n[t].length&&delete n[t]}),n},[e,t]);Qe.useEffect(()=>()=>s(null),[]);const d=j(n),u=n.length===d.length,g=Qe.useMemo(()=>Object.entries(t),[t]),p=j(u?g:Sn);return Xe.jsxs("div",{className:l,children:[r&&e.length>3&&!!i.length&&Xe.jsx(In,{title:A("Most used","blocks"),children:Xe.jsx(Z,{items:i,onSelect:o,onHover:s,label:A("Most used","blocks")})}),d.map(t=>{const n=e.filter(e=>e.category===t.slug);return n&&n.length?Xe.jsx(In,{title:t.title,icon:t.icon,children:Xe.jsx(Z,{items:n,onSelect:o,onHover:s,label:t.title})},t.slug):null}),u&&a.length>0&&Xe.jsx(In,{className:"block-editor-inserter__uncategorized-blocks-panel",title:F("Uncategorized"),children:Xe.jsx(Z,{items:a,onSelect:o,onHover:s,label:F("Uncategorized")})}),p.map(([e,t])=>{const n=c[e];return n&&n.length?Xe.jsx(In,{title:t.title,icon:t.icon,children:Xe.jsx(Z,{items:n,onSelect:o,onHover:s,label:t.title})},e):null})]})}const Bn=Qe.forwardRef(function({rootClientId:e,onInsert:t,onHover:n,showMostUsedBlocks:o},s){const[r,l,i,a]=gn(e,t);if(!r.length)return Xe.jsx(_n,{});const c=[],d=[];for(const u of r)"reusable"!==u.category&&(e&&u.isAllowedInCurrentRoot?c.push(u):d.push(u));return Xe.jsx(jn,{children:Xe.jsxs("div",{ref:s,children:[!!c.length&&Xe.jsx(Xe.Fragment,{children:Xe.jsx(vn,{items:c,categories:l,collections:i,onSelectItem:a,onHover:n,showMostUsedBlocks:o,className:"block-editor-inserter__insertable-blocks-at-selection"})}),Xe.jsx(vn,{items:d,categories:l,collections:i,onSelectItem:a,onHover:n,showMostUsedBlocks:o,className:"block-editor-inserter__all-blocks"})]})})});function wn({selectedCategory:e,patternCategories:t,onClickCategory:n}){const o="block-editor-block-patterns-explorer__sidebar";return Xe.jsx("div",{className:`${o}__categories-list`,children:t.map(({name:t,label:s})=>Xe.jsx(G,{__next40pxDefaultSize:!0,label:s,className:`${o}__categories-list__item`,isPressed:e===t,onClick:()=>{n(t)},children:s},t))})}function Pn({searchValue:e,setSearchValue:t}){return Xe.jsx("div",{className:"block-editor-block-patterns-explorer__search",children:Xe.jsx(J,{__nextHasNoMarginBottom:!0,onChange:t,value:e,label:F("Search for patterns"),placeholder:F("Search")})})}function Nn({selectedCategory:e,patternCategories:t,onClickCategory:n,searchValue:o,setSearchValue:s}){return Xe.jsxs("div",{className:"block-editor-block-patterns-explorer__sidebar",children:[Xe.jsx(Pn,{searchValue:o,setSearchValue:s}),!o&&Xe.jsx(wn,{selectedCategory:e,patternCategories:t,onClickCategory:n})]})}function Tn({destinationRootClientId:e,destinationIndex:t,rootClientId:n,registry:o}){if(n===e)return t;const s=["",...o.select(M).getBlockParents(e),e],r=s.indexOf(n);return-1!==r?o.select(M).getBlockIndex(s[r+1])+1:o.select(M).getBlockOrder(n).length}function Mn({rootClientId:e="",insertionIndex:t,clientId:n,isAppender:o,onSelect:s,shouldFocusBlock:r=!0,selectBlockOnInsert:l=!0}){const i=At(),{getSelectedBlock:a,getClosestAllowedInsertionPoint:c,isBlockInsertionPointVisible:d}=L(O(M)),{destinationRootClientId:g,destinationIndex:p}=O(s=>{const{getSelectedBlockClientId:r,getBlockRootClientId:l,getBlockIndex:i,getBlockOrder:a,getInsertionPoint:c}=L(s(M)),d=r();let u,g=e;const p=c();return void 0!==t?u=t:p&&p.hasOwnProperty("index")?(g=p?.rootClientId?p.rootClientId:e,u=p.index):n?u=i(n):!o&&d?(g=l(d),u=i(d)+1):u=a(g).length,{destinationRootClientId:g,destinationIndex:u}},[e,t,n,o]),{replaceBlocks:m,insertBlocks:h,showInsertionPoint:b,hideInsertionPoint:k,setLastFocus:x}=L(R(M)),f=Qe.useCallback((e,t,n=!1,c)=>{(n||r||l)&&x(null);const d=a();!o&&d&&u(d)?m(d.clientId,e,null,r||n?0:null,t):h(e,o||void 0===c?p:Tn({destinationRootClientId:g,destinationIndex:p,rootClientId:c,registry:i}),o||void 0===c?g:c,l,r||n?0:null,t);const b=Array.isArray(e)?e.length:1,k=H(ee("%d block added.","%d blocks added.",b),b);$e(k),s&&s(e)},[o,a,m,h,g,p,s,r,l]),j=Qe.useCallback(e=>{if(e&&!d()){const t=c(e.name,g);null!==t&&b(t,Tn({destinationRootClientId:g,destinationIndex:p,rootClientId:t,registry:i}))}else k()},[c,d,b,k,g,p]);return[g,f,j]}const Dn=(e,t,n,o)=>{const s=Qe.useMemo(()=>({[x]:!!o}),[o]),{patternCategories:l,patterns:i,userPatternCategories:a}=O(e=>{const{getSettings:n,__experimentalGetAllowedPatterns:o}=L(e(M)),{__experimentalUserPatternCategories:r,__experimentalBlockPatternCategories:l}=n();return{patterns:o(t,s),userPatternCategories:r,patternCategories:l}},[t,s]),{getClosestAllowedInsertionPointForPattern:c}=L(O(M)),d=Qe.useMemo(()=>{const e=[...l];return a?.forEach(t=>{e.find(e=>e.name===t.name)||e.push(t)}),e},[l,a]),{createSuccessNotice:u}=R(ct);return[i,d,Qe.useCallback((s,l)=>{const i=o?t:c(s,t);if(null===i)return;const a=s.type===Rt.user&&"unsynced"!==s.syncStatus?[r("core/block",{ref:s.id})]:l;e((null!=a?a:[]).map(e=>{const t=g(e);return t.attributes.metadata?.categories?.includes(n)&&(t.attributes.metadata.categories=[n]),t}),s.name,!1,i),u(H(F('Block pattern "%s" inserted.'),s.title),{type:"snackbar",id:"inserter-notice"})},[u,e,n,t,c,o])]};function Fn(e,t,n,o=""){const[s,r]=Qe.useState(1),l=y(t),i=y(o);l===t&&i===o||1===s||r(1);const a=e.length,c=s-1,d=Qe.useMemo(()=>e.slice(20*c,20*c+20),[c,e]),u=j(d,{step:5}),g=Math.ceil(e.length/20);return Qe.useEffect(function(){const e=te(n?.current);e?.scrollTo(0,0)},[t,n]),{totalItems:a,categoryPatterns:d,categoryPatternsAsyncList:u,numPages:g,changePage:e=>{const t=te(n?.current);t?.scrollTo(0,0),r(e)},currentPage:s}}function An({filterValue:e,filteredBlockPatternsLength:t}){return e?Xe.jsx(ne,{level:2,lineHeight:"48px",className:"block-editor-block-patterns-explorer__search-results-count",children:H(ee("%d pattern found","%d patterns found",t),t)}):null}function En({searchValue:e,selectedCategory:t,patternCategories:n,rootClientId:o}){const s=Qe.useRef(),r=C($e,500),[l,i]=Mn({rootClientId:o,shouldFocusBlock:!0}),[a,,c]=Dn(i,l,t),d=Qe.useMemo(()=>n.map(e=>e.name),[n]),u=Qe.useMemo(()=>{const n=a.filter(e=>{if(t===Vt.name)return!0;if(t===Ut.name&&e.type===Rt.user)return!0;if("uncategorized"===t){const t=e.categories.some(e=>d.includes(e));return!e.categories?.length||!t}return e.categories?.includes(t)});return e?dn(n,e):n},[e,a,t,d]);Qe.useEffect(()=>{if(!e)return;const t=u.length,n=H(ee("%d result found.","%d results found.",t),t);r(n)},[e,r,u.length]);const g=Fn(u,t,s),[p,m]=Qe.useState(e);e!==p&&(m(e),g.changePage(1));const h=!!u?.length;return Xe.jsxs("div",{className:"block-editor-block-patterns-explorer__list",ref:s,children:[Xe.jsx(An,{filterValue:e,filteredBlockPatternsLength:u.length}),Xe.jsx(jn,{children:h&&Xe.jsxs(Xe.Fragment,{children:[Xe.jsx(Bt,{shownPatterns:g.categoryPatternsAsyncList,blockPatterns:g.categoryPatterns,onClickPattern:c,isDraggable:!1}),Xe.jsx(wt,{...g})]})})]})}function On(e,t="all"){const[n,o]=Dn(void 0,e),s=Qe.useMemo(()=>"all"===t?n:n.filter(e=>!Wt(e,t)),[t,n]);return Qe.useMemo(()=>{const e=o.filter(e=>s.some(t=>t.categories?.includes(e.name))).sort((e,t)=>e.label.localeCompare(t.label));return s.some(e=>!function(e,t){return!(!e.categories||!e.categories.length)&&e.categories.some(e=>t.some(t=>t.name===e))}(e,o))&&!e.find(e=>"uncategorized"===e.name)&&e.push({name:"uncategorized",label:A("Uncategorized")}),s.some(e=>e.type===Rt.user)&&e.unshift(Ut),s.length>0&&e.unshift({name:Vt.name,label:Vt.label}),$e(H(ee("%d category button displayed.","%d category buttons displayed.",e.length),e.length)),e},[o,s])}function Ln({initialCategory:e,rootClientId:t}){const[n,o]=Qe.useState(""),[s,r]=Qe.useState(e?.name),l=On(t);return Xe.jsxs("div",{className:"block-editor-block-patterns-explorer",children:[Xe.jsx(Nn,{selectedCategory:s,patternCategories:l,onClickCategory:r,searchValue:n,setSearchValue:o}),Xe.jsx(En,{searchValue:n,selectedCategory:s,patternCategories:l,rootClientId:t})]})}function Rn({onModalClose:e,...t}){return Xe.jsx(oe,{title:F("Patterns"),onRequestClose:e,isFullScreen:!0,children:Xe.jsx(Ln,{...t})})}function Hn({title:e}){return Xe.jsx(ce,{spacing:0,children:Xe.jsx(de,{children:Xe.jsx(ue,{marginBottom:0,paddingX:4,paddingY:3,children:Xe.jsxs(le,{spacing:2,children:[Xe.jsx(Nt.BackButton,{style:{minWidth:24,padding:0},icon:ae()?st:ot,size:"small",label:F("Back")}),Xe.jsx(ue,{children:Xe.jsx(ne,{level:5,children:e})})]})})})})}function zn({categories:e,children:t}){return Xe.jsxs(Nt,{initialPath:"/",className:"block-editor-inserter__mobile-tab-navigation",children:[Xe.jsx(Nt.Screen,{path:"/",children:Xe.jsx(se,{children:e.map(e=>Xe.jsx(Nt.Button,{path:`/category/${e.name}`,as:re,isAction:!0,children:Xe.jsxs(le,{children:[Xe.jsx(ie,{children:e.label}),Xe.jsx(Y,{icon:ae()?ot:st})]})},e.name))})}),e.map(e=>Xe.jsxs(Nt.Screen,{path:`/category/${e.name}`,children:[Xe.jsx(Hn,{title:F("Back")}),t(e)]},e.name))]})}const Vn=e=>"all"!==e&&"user"!==e,Un=[{value:"all",label:A("All","patterns")},{value:Rt.directory,label:F("Pattern Directory")},{value:Rt.theme,label:F("Theme & Plugins")},{value:Rt.user,label:F("User")}];function Wn({setPatternSyncFilter:e,setPatternSourceFilter:t,patternSyncFilter:n,patternSourceFilter:o,scrollContainerRef:s,category:r}){const l=r.name===Ut.name?Rt.user:o,i=Vn(l),a=(e=>e.name===Ut.name)(r),c=Qe.useMemo(()=>[{value:"all",label:A("All","patterns")},{value:Ht,label:A("Synced","patterns"),disabled:i},{value:zt,label:A("Not synced","patterns"),disabled:i}],[i]);return Xe.jsx(Xe.Fragment,{children:Xe.jsx(et,{popoverProps:{placement:"right-end"},label:F("Filter patterns"),toggleProps:{size:"compact"},icon:Xe.jsx(Y,{icon:Xe.jsx(pe,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Xe.jsx(me,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z",fill:"currentColor"})})}),children:()=>Xe.jsxs(Xe.Fragment,{children:[!a&&Xe.jsx(pt,{label:F("Source"),children:Xe.jsx(mt,{choices:Un,onSelect:n=>{var o;t(o=n),Vn(o)&&e("all"),s.current?.scrollTo(0,0)},value:l})}),Xe.jsx(pt,{label:F("Type"),children:Xe.jsx(mt,{choices:c,onSelect:t=>{e(t),s.current?.scrollTo(0,0)},value:n})}),Xe.jsx("div",{className:"block-editor-tool-selector__help",children:z(F("Patterns are available from the <Link>WordPress.org Pattern Directory</Link>, bundled in the active theme, or created by users on this site. Only patterns created on this site can be synced."),{Link:Xe.jsx(ge,{href:F("https://wordpress.org/patterns/")})})})]})})})}const Gn=()=>{};function qn({rootClientId:e,onInsert:t,onHover:n=Gn,category:o,showTitlesAsTooltip:s}){const r=O(e=>"zoom-out"===e(M).__unstableGetEditorMode(),[]),[l,,i]=Dn(t,e,o?.name),[a,c]=Qe.useState("all"),[d,u]=Qe.useState("all"),g=On(e,d),p=Qe.useRef(),m=Qe.useMemo(()=>l.filter(e=>!Wt(e,d,a)&&(o.name===Vt.name||(o.name===Ut.name&&e.type===Rt.user||("uncategorized"===o.name?!e.categories||!e.categories.some(e=>g.some(t=>t.name===e)):e.categories?.includes(o.name))))),[l,g,o.name,d,a]),h=Fn(m,o,p),{changePage:b}=h;Qe.useEffect(()=>()=>n(null),[]);const k=Qe.useCallback(e=>{c(e),b(1)},[c,b]),x=Qe.useCallback(e=>{u(e),b(1)},[u,b]);return Xe.jsxs(Xe.Fragment,{children:[Xe.jsxs(ce,{spacing:2,className:"block-editor-inserter__patterns-category-panel-header",children:[Xe.jsxs(le,{children:[Xe.jsx(ie,{children:Xe.jsx(ne,{className:"block-editor-inserter__patterns-category-panel-title",size:13,level:4,as:"div",children:o.label})}),Xe.jsx(Wn,{patternSyncFilter:a,patternSourceFilter:d,setPatternSyncFilter:k,setPatternSourceFilter:x,scrollContainerRef:p,category:o})]}),!m.length&&Xe.jsx(he,{variant:"muted",className:"block-editor-inserter__patterns-category-no-results",children:F("No results found")})]}),m.length>0&&Xe.jsxs(Xe.Fragment,{children:[r&&Xe.jsx(he,{size:"12",as:"p",className:"block-editor-inserter__help-text",children:F("Drag and drop patterns into the canvas.")}),Xe.jsx(Bt,{ref:p,shownPatterns:h.categoryPatternsAsyncList,blockPatterns:h.categoryPatterns,onClickPattern:i,onHover:n,label:o.label,orientation:"vertical",category:o.name,isDraggable:!0,showTitlesAsTooltip:s,patternFilter:d,pagingProps:h})]})]})}const{Tabs:$n}=L(Et);function Kn({categories:e,selectedCategory:t,onSelectCategory:n,children:o}){const s={type:"tween",duration:I()?0:.25,ease:[.6,0,.4,1]},r=y(t);return Xe.jsxs($n,{className:"block-editor-inserter__category-tabs",selectOnMove:!1,selectedTabId:t?t.name:null,orientation:"vertical",onSelect:t=>{n(e.find(e=>e.name===t))},children:[Xe.jsx($n.TabList,{className:"block-editor-inserter__category-tablist",children:e.map(e=>Xe.jsx($n.Tab,{tabId:e.name,className:"block-editor-inserter__category-tab","aria-label":e.label,"aria-current":e===t?"true":void 0,children:Xe.jsxs(le,{children:[Xe.jsx(ie,{children:e.label}),Xe.jsx(Y,{icon:ae()?ot:st})]})},e.name))}),e.map(e=>Xe.jsx($n.TabPanel,{tabId:e.name,focusable:!1,children:Xe.jsx(ht.div,{className:"block-editor-inserter__category-panel",initial:r?"open":"closed",animate:"open",variants:{open:{transform:"translateX( 0 )",transitionEnd:{zIndex:"1"}},closed:{transform:"translateX( -100% )",zIndex:"-1"}},transition:s,children:o})},e.name))]})}function Qn({onSelectCategory:e,selectedCategory:t,onInsert:n,rootClientId:o,children:s}){const[r,l]=Qe.useState(!1),i=On(o),a=_("medium","<");return O(e=>L(e(M)).isResolvingPatterns(),[])?Xe.jsx("div",{className:"block-editor-inserter__patterns-loading",children:Xe.jsx(be,{})}):i.length?Xe.jsxs(Xe.Fragment,{children:[!a&&Xe.jsxs("div",{className:"block-editor-inserter__block-patterns-tabs-container",children:[Xe.jsx(Kn,{categories:i,selectedCategory:t,onSelectCategory:e,children:s}),Xe.jsx(G,{__next40pxDefaultSize:!0,className:"block-editor-inserter__patterns-explore-button",onClick:()=>l(!0),variant:"secondary",children:F("Explore all patterns")})]}),a&&Xe.jsx(zn,{categories:i,children:e=>Xe.jsx("div",{className:"block-editor-inserter__category-panel",children:Xe.jsx(qn,{onInsert:n,rootClientId:o,category:e,showTitlesAsTooltip:!1},e.name)})}),r&&Xe.jsx(Rn,{initialCategory:t||i[0],patternCategories:i,onModalClose:()=>l(!1),rootClientId:o})]}):Xe.jsx(_n,{})}const Xn={image:"img",video:"video",audio:"audio"};function Yn(e,t){const n={id:e.id||void 0,caption:e.caption||void 0},o=e.url,s=e.alt||void 0;"image"===t?(n.url=o,n.alt=s):["video","audio"].includes(t)&&(n.src=o);const l=Xn[t],i=Xe.jsx(l,{src:e.previewUrl||o,alt:s,controls:"audio"===t||void 0,inert:"true",onError:({currentTarget:t})=>{t.src===e.previewUrl&&(t.src=o)}});return[r(`core/${t}`,n),i]}const Zn=["image"],Jn={position:"bottom left",className:"block-editor-inserter__media-list__item-preview-options__popover"};function eo({category:e,media:t}){if(!e.getReportUrl)return null;const n=e.getReportUrl(t);return Xe.jsx(et,{className:"block-editor-inserter__media-list__item-preview-options",label:F("Options"),popoverProps:Jn,icon:rt,children:()=>Xe.jsx(pt,{children:Xe.jsx(kt,{onClick:()=>window.open(n,"_blank").focus(),icon:lt,children:H(F("Report %s"),e.mediaType)})})})}function to({onClose:e,onSubmit:t}){return Xe.jsxs(oe,{title:F("Insert external image"),onRequestClose:e,className:"block-editor-inserter-media-tab-media-preview-inserter-external-image-modal",children:[Xe.jsxs(ce,{spacing:3,children:[Xe.jsx("p",{children:F("This image cannot be uploaded to your Media Library, but it can still be inserted as an external image.")}),Xe.jsx("p",{children:F("External images can be removed by the external provider without warning and could even have legal compliance issues related to privacy legislation.")})]}),Xe.jsxs(ke,{className:"block-editor-block-lock-modal__actions",justify:"flex-end",expanded:!1,children:[Xe.jsx(xe,{children:Xe.jsx(G,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:e,children:F("Cancel")})}),Xe.jsx(xe,{children:Xe.jsx(G,{__next40pxDefaultSize:!0,variant:"primary",onClick:t,children:F("Insert")})})]})]})}function no({media:e,onClick:t,category:n}){const[o,s]=Qe.useState(!1),[r,l]=Qe.useState(!1),[i,a]=Qe.useState(!1),[c,d]=Qe.useMemo(()=>Yn(e,n.mediaType),[e,n.mediaType]),{createErrorNotice:u,createSuccessNotice:p}=R(ct),{getSettings:m,getBlock:h}=O(M),{updateBlockAttributes:b}=R(M),k=Qe.useCallback(e=>{if(i)return;const n=m(),o=g(e),{id:r,url:l,caption:c}=o.attributes;r||n.mediaUpload?r?t(o):(a(!0),window.fetch(l).then(e=>e.blob()).then(e=>{const s=dt(l)||"image.jpg",r=new File([e],s,{type:e.type});n.mediaUpload({filesList:[r],additionalData:{caption:c},onFileChange([e]){ut(e.url)||(h(o.clientId)?b(o.clientId,{...o.attributes,id:e.id,url:e.url}):(t({...o,attributes:{...o.attributes,id:e.id,url:e.url}}),p(F("Image uploaded and inserted."),{type:"snackbar",id:"inserter-notice"})),a(!1))},allowedTypes:Zn,onError(e){u(e,{type:"snackbar",id:"inserter-notice"}),a(!1)}})}).catch(()=>{s(!0),a(!1)})):s(!0)},[i,m,t,p,b,u,h]),x="string"==typeof e.title?e.title:e.title?.rendered||F("no title");let f;if(x.length>25){const e="...";f=x.slice(0,25-e.length)+e}const j=Qe.useCallback(()=>l(!0),[]),y=Qe.useCallback(()=>l(!1),[]);return Xe.jsxs(Xe.Fragment,{children:[Xe.jsx(yn,{isEnabled:!0,blocks:[c],children:({draggable:t,onDragStart:o,onDragEnd:s})=>Xe.jsx("div",{className:Ye("block-editor-inserter__media-list__list-item",{"is-hovered":r}),draggable:t,onDragStart:o,onDragEnd:s,children:Xe.jsxs("div",{onMouseEnter:j,onMouseLeave:y,children:[Xe.jsx(bt,{text:f||x,children:Xe.jsx(W.Item,{render:Xe.jsx("div",{"aria-label":x,role:"option",className:"block-editor-inserter__media-list__item"}),onClick:()=>k(c),children:Xe.jsxs("div",{className:"block-editor-inserter__media-list__item-preview",children:[d,i&&Xe.jsx("div",{className:"block-editor-inserter__media-list__item-preview-spinner",children:Xe.jsx(be,{})})]})})}),!i&&Xe.jsx(eo,{category:n,media:e})]})})}),o&&Xe.jsx(to,{onClose:()=>s(!1),onSubmit:()=>{t(g(c)),p(F("Image inserted."),{type:"snackbar",id:"inserter-notice"}),s(!1)}})]})}function oo({mediaList:e,category:t,onClick:n,label:o=F("Media List")}){return Xe.jsx(W,{role:"listbox",className:"block-editor-inserter__media-list","aria-label":o,children:e.map((e,o)=>Xe.jsx(no,{media:e,category:t,onClick:n},e.id||e.sourceId||o))})}function so({rootClientId:e,onInsert:t,category:n}){const[o,s,r]=S(),{mediaList:l,isLoading:i}=function(e,t={}){const[n,o]=Qe.useState(),[s,r]=Qe.useState(!1),l=Qe.useRef();return Qe.useEffect(()=>{(async()=>{const n=JSON.stringify({category:e.name,...t});l.current=n,r(!0),o([]);const s=await(e.fetch?.(t));n===l.current&&(o(s),r(!1))})()},[e.name,...Object.values(t)]),{mediaList:n,isLoading:s}}(n,{per_page:r?20:10,search:r}),a="block-editor-inserter__media-panel",c=n.labels.search_items||F("Search");return Xe.jsxs("div",{className:a,children:[Xe.jsx(J,{__nextHasNoMarginBottom:!0,className:`${a}-search`,onChange:s,value:o,label:c,placeholder:c}),i&&Xe.jsx("div",{className:`${a}-spinner`,children:Xe.jsx(be,{})}),!i&&!l?.length&&Xe.jsx(_n,{}),!i&&!!l?.length&&Xe.jsx(oo,{rootClientId:e,onClick:t,mediaList:l,category:n})]})}const ro=["image","video","audio"];function lo({rootClientId:e,selectedCategory:t,onSelectCategory:n,onInsert:o,children:s}){const r=function(e){const[t,n]=Qe.useState([]),o=O(e=>L(e(M)).getInserterMediaCategories(),[]),{canInsertImage:s,canInsertVideo:r,canInsertAudio:l}=O(t=>{const{canInsertBlockType:n}=t(M);return{canInsertImage:n("core/image",e),canInsertVideo:n("core/video",e),canInsertAudio:n("core/audio",e)}},[e]);return Qe.useEffect(()=>{(async()=>{const e=[];if(!o)return;const t=new Map(await Promise.all(o.map(async e=>{if(e.isExternalResource)return[e.name,!0];let t=[];try{t=await e.fetch({per_page:1})}catch(n){}return[e.name,!!t.length]}))),i={image:s,video:r,audio:l};o.forEach(n=>{i[n.mediaType]&&t.get(n.name)&&e.push(n)}),e.length&&n(e)})()},[s,r,l,o]),t}(e),l=_("medium","<"),i=Qe.useCallback(e=>{if(!e?.url)return;const[t]=Yn(e,e.type);o(t)},[o]),a=Qe.useMemo(()=>r.map(e=>({...e,label:e.labels.name})),[r]);return a.length?Xe.jsxs(Xe.Fragment,{children:[!l&&Xe.jsxs("div",{className:"block-editor-inserter__media-tabs-container",children:[Xe.jsx(Kn,{categories:a,selectedCategory:t,onSelectCategory:n,children:s}),Xe.jsx(Ot,{children:Xe.jsx(Lt,{multiple:!1,onSelect:i,allowedTypes:ro,render:({open:e})=>Xe.jsx(G,{__next40pxDefaultSize:!0,onClick:t=>{t.target.focus(),e()},className:"block-editor-inserter__media-library-button",variant:"secondary","data-unstable-ignore-focus-outside-for-relatedtarget":".media-modal",children:F("Open Media Library")})})})]}),l&&Xe.jsx(zn,{categories:a,children:t=>Xe.jsx(so,{onInsert:o,rootClientId:e,category:t})})]}):Xe.jsx(_n,{})}const{Fill:io,Slot:ao}=fe("__unstableInserterMenuExtension");io.Slot=ao;const co=[];function uo({filterValue:e,onSelect:t,onHover:n,onHoverPattern:o,rootClientId:s,clientId:r,isAppender:l,__experimentalInsertionIndex:i,maxBlockPatterns:a,maxBlockTypes:c,showBlockDirectory:d=!1,isDraggable:u=!0,shouldFocusBlock:g=!0,prioritizePatterns:p,selectBlockOnInsert:m,isQuick:h}){const b=C($e,500),{prioritizedBlocks:k}=O(e=>{const t=e(M).getBlockListSettings(s);return{prioritizedBlocks:t?.prioritizedInserterBlocks||co}},[s]),[x,y]=Mn({onSelect:t,rootClientId:s,clientId:r,isAppender:l,insertionIndex:i,shouldFocusBlock:g,selectBlockOnInsert:m}),[I,_,S,v]=gn(x,y,h),[B,,w]=Dn(y,x),P=Qe.useMemo(()=>{if(0===a)return[];const t=dn(B,e);return void 0!==a?t.slice(0,a):t},[e,B,a]);let N=c;p&&P.length>2&&(N=0);const T=Qe.useMemo(()=>{if(0===N)return[];const t=I.filter(e=>"core/block"!==e.name);let n=f(t,"frecency","desc");!e&&k.length&&(n=pn(n,k));const o=cn(n,_,S,e);return void 0!==N?o.slice(0,N):o},[e,I,_,S,N,k]);Qe.useEffect(()=>{if(!e)return;const t=T.length+P.length,n=H(ee("%d result found.","%d results found.",t),t);b(n)},[e,b,T,P]);const D=j(T,{step:9}),A=j(D.length===T.length?P:co),E=T.length>0||P.length>0,L=!!T.length&&Xe.jsx(In,{title:Xe.jsx(je,{children:F("Blocks")}),children:Xe.jsx(Z,{items:D,onSelect:v,onHover:n,label:F("Blocks"),isDraggable:u})}),R=!!P.length&&Xe.jsx(In,{title:Xe.jsx(je,{children:F("Block patterns")}),children:Xe.jsx("div",{className:"block-editor-inserter__quick-inserter-patterns",children:Xe.jsx(Bt,{shownPatterns:A,blockPatterns:P,onClickPattern:w,onHover:o,isDraggable:u})})});return Xe.jsxs(jn,{children:[!d&&!E&&Xe.jsx(_n,{}),p?R:L,!!T.length&&!!P.length&&Xe.jsx("div",{className:"block-editor-inserter__quick-inserter-separator"}),p?L:R,d&&Xe.jsx(io.Slot,{fillProps:{onSelect:v,onHover:n,filterValue:e,hasItems:E,rootClientId:x},children:e=>e.length?e:E?null:Xe.jsx(_n,{})})]})}const go=()=>{};const po=Qe.forwardRef(function({rootClientId:e,clientId:t,isAppender:n,__experimentalInsertionIndex:o,onSelect:s,showInserterHelpPanel:r,showMostUsedBlocks:l,__experimentalFilterValue:i="",shouldFocusBlock:a=!0,onPatternCategorySelection:c,onClose:d,__experimentalInitialTab:u,__experimentalInitialCategory:g},p){const m=O(e=>"zoom-out"===e(M).__unstableGetEditorMode(),[]),[h,b,k]=S(i),[x,f]=Qe.useState(null),[j,y]=Qe.useState(g),[C,I]=Qe.useState("all"),[_,v]=Qe.useState(null),[B,w]=Qe.useState(u||(m?"patterns":void 0)),[P,N,T]=Mn({rootClientId:e,clientId:t,isAppender:n,insertionIndex:o,shouldFocusBlock:a}),D=Qe.useRef(),A=Qe.useCallback((e,t,n,o)=>{N(e,t,n,o),s(e),window.requestAnimationFrame(()=>{a||D.current?.contains(p.current.ownerDocument.activeElement)||D.current?.querySelector("button").focus()})},[N,s,a]),E=Qe.useCallback((e,t,...n)=>{T(!1),N(e,{patternName:t},...n),s()},[N,s]),L=Qe.useCallback(e=>{T(e),f(e)},[T,f]),R=Qe.useCallback((e,t)=>{y(e),I(t),c?.()},[y,c]),H="patterns"===B&&!k&&!!j,z="media"===B&&!!_,V=Qe.useMemo(()=>"media"===B?null:Xe.jsxs(Xe.Fragment,{children:[Xe.jsx(J,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",onChange:e=>{x&&f(null),b(e)},value:h,label:F("Search for blocks and patterns"),placeholder:F("Search")}),!!k&&Xe.jsx(uo,{filterValue:k,onSelect:s,onHover:L,rootClientId:e,clientId:t,isAppender:n,__experimentalInsertionIndex:o,showBlockDirectory:!0,shouldFocusBlock:a,prioritizePatterns:"patterns"===B})]}),[B,x,f,b,h,k,s,L,a,t,e,o,n]),U=Qe.useMemo(()=>Xe.jsxs(Xe.Fragment,{children:[Xe.jsx("div",{className:"block-editor-inserter__block-list",children:Xe.jsx(Bn,{ref:D,rootClientId:P,onInsert:A,onHover:L,showMostUsedBlocks:l})}),r&&Xe.jsxs("div",{className:"block-editor-inserter__tips",children:[Xe.jsx(je,{as:"h2",children:F("A tip for using the block editor")}),Xe.jsx(hn,{})]})]}),[P,A,L,l,r]),W=Qe.useMemo(()=>Xe.jsx(Qn,{rootClientId:P,onInsert:E,onSelectCategory:R,selectedCategory:j,children:H&&Xe.jsx(qn,{rootClientId:P,onInsert:E,category:j,patternFilter:C,showTitlesAsTooltip:!0})}),[P,E,R,C,j,H]),G=Qe.useMemo(()=>Xe.jsx(lo,{rootClientId:P,selectedCategory:_,onSelectCategory:v,onInsert:A,children:z&&Xe.jsx(so,{rootClientId:P,onInsert:A,category:_})}),[P,A,_,v,z]),q=Qe.useRef();return Qe.useLayoutEffect(()=>{q.current&&window.requestAnimationFrame(()=>{q.current.querySelector('[role="tab"][aria-selected="true"]')?.focus()})},[]),Xe.jsxs("div",{className:Ye("block-editor-inserter__menu",{"show-panel":H||z,"is-zoom-out":m}),ref:p,children:[Xe.jsx("div",{className:"block-editor-inserter__main-area",children:Xe.jsx(ye,{ref:q,onSelect:e=>{"patterns"!==e&&y(null),w(e)},onClose:d,selectedTab:B,closeButtonLabel:F("Close block inserter"),tabs:[{name:"blocks",title:F("Blocks"),panel:Xe.jsxs(Xe.Fragment,{children:[V,"blocks"===B&&!k&&U]})},{name:"patterns",title:F("Patterns"),panel:Xe.jsxs(Xe.Fragment,{children:[V,"patterns"===B&&!k&&W]})},{name:"media",title:F("Media"),panel:Xe.jsxs(Xe.Fragment,{children:[V,G]})}]})}),r&&x&&Xe.jsx(xt,{className:"block-editor-inserter__preview-container__popover",placement:"right-start",offset:16,focusOnMount:!1,animate:!1,children:Xe.jsx(bn,{item:x})})]})});const mo=Qe.forwardRef(function(e,t){return Xe.jsx(po,{...e,onPatternCategorySelection:go,ref:t})});function ho({onSelect:e,rootClientId:t,clientId:n,isAppender:o,prioritizePatterns:s,selectBlockOnInsert:r,hasSearch:l=!0}){const[i,a]=Qe.useState(""),[c,d]=Mn({onSelect:e,rootClientId:t,clientId:n,isAppender:o,selectBlockOnInsert:r}),[u]=gn(c,d,!0),[g]=Dn(d,c,void 0,!0),{setInserterIsOpened:p,insertionIndex:m}=O(e=>{const{getSettings:t,getBlockIndex:o,getBlockCount:s}=e(M),r=t(),l=o(n),i=s();return{setInserterIsOpened:r.__experimentalSetIsInserterOpened,insertionIndex:-1===l?i:l}},[n]),h=g.length&&(!!i||s),b=l&&(h&&g.length>6||u.length>6);Qe.useEffect(()=>{p&&p(!1)},[p]);let k=0;return h&&(k=s?4:2),Xe.jsxs("div",{className:Ye("block-editor-inserter__quick-inserter",{"has-search":b,"has-expand":p}),children:[b&&Xe.jsx(J,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",value:i,onChange:e=>{a(e)},label:F("Search for blocks and patterns"),placeholder:F("Search")}),Xe.jsx("div",{className:"block-editor-inserter__quick-inserter-results",children:Xe.jsx(uo,{filterValue:i,onSelect:e,rootClientId:t,clientId:n,isAppender:o,maxBlockPatterns:k,maxBlockTypes:6,isDraggable:!1,prioritizePatterns:s,selectBlockOnInsert:r,isQuick:!0})}),p&&Xe.jsx(G,{__next40pxDefaultSize:!0,className:"block-editor-inserter__quick-inserter-expand",onClick:()=>{p({filterValue:i,onSelect:e,rootClientId:t,insertionIndex:m})},"aria-label":F("Browse all. This will open the main inserter panel in the editor toolbar."),children:F("Browse all")})]})}const bo=({onToggle:e,disabled:t,isOpen:n,blockTitle:o,hasSingleBlockType:s,toggleProps:r={},prioritizePatterns:l})=>{const{as:i=G,label:a,onClick:c,...d}=r;let u=a;return!u&&s?u=H(A("Add %s","directly add the only allowed block"),o):!u&&l?u=F("Add pattern"):u||(u=A("Add block","Generic label for block inserter button")),Xe.jsx(i,{icon:it,label:u,tooltipPosition:"bottom",onClick:function(t){e&&e(t),c&&c(t)},className:"block-editor-inserter__toggle","aria-haspopup":!s&&"true","aria-expanded":!s&&n,disabled:t,...d})};class ko extends Qe.Component{constructor(){super(...arguments),this.onToggle=this.onToggle.bind(this),this.renderToggle=this.renderToggle.bind(this),this.renderContent=this.renderContent.bind(this)}onToggle(e){const{onToggle:t}=this.props;t&&t(e)}renderToggle({onToggle:e,isOpen:t}){const{disabled:n,blockTitle:o,hasSingleBlockType:s,directInsertBlock:r,toggleProps:l,hasItems:i,renderToggle:a=bo,prioritizePatterns:c}=this.props;return a({onToggle:e,isOpen:t,disabled:n||!i,blockTitle:o,hasSingleBlockType:s,directInsertBlock:r,toggleProps:l,prioritizePatterns:c})}renderContent({onClose:e}){const{rootClientId:t,clientId:n,isAppender:o,showInserterHelpPanel:s,__experimentalIsQuick:r,prioritizePatterns:l,onSelectOrClose:i,selectBlockOnInsert:a}=this.props;return r?Xe.jsx(ho,{onSelect:t=>{const n=Array.isArray(t)&&t?.length?t[0]:t;i&&"function"==typeof i&&i(n),e()},rootClientId:t,clientId:n,isAppender:o,prioritizePatterns:l,selectBlockOnInsert:a}):Xe.jsx(mo,{onSelect:()=>{e()},rootClientId:t,clientId:n,isAppender:o,showInserterHelpPanel:s})}render(){const{position:e,hasSingleBlockType:t,directInsertBlock:n,insertOnlyAllowedBlock:o,__experimentalIsQuick:s,onSelectOrClose:r}=this.props;return t||n?this.renderToggle({onToggle:o}):Xe.jsx(tt,{className:"block-editor-inserter",contentClassName:Ye("block-editor-inserter__popover",{"is-quick":s}),popoverProps:{position:e,shift:!0},onToggle:this.onToggle,expandOnMobile:!0,headerTitle:F("Add a block"),renderToggle:this.renderToggle,renderContent:this.renderContent,onClose:r})}}const xo=v([Ce((e,{clientId:t,rootClientId:o,shouldDirectInsert:s=!0})=>{const{getBlockRootClientId:r,hasInserterItems:l,getAllowedBlocks:i,getDirectInsertBlock:a,getSettings:c}=e(M),{getBlockVariations:d}=e(n),u=i(o=o||r(t)||void 0),g=s&&a(o),p=c(),m=1===u?.length&&0===d(u[0].name,"inserter")?.length;let h=!1;return m&&(h=u[0]),{hasItems:l(o),hasSingleBlockType:m,blockTitle:h?h.title:"",allowedBlockType:h,directInsertBlock:g,rootClientId:o,prioritizePatterns:p.__experimentalPreferPatternsOnRoot&&!o}}),Ie((e,t,{select:n})=>({insertOnlyAllowedBlock(){const{rootClientId:o,clientId:s,isAppender:l,hasSingleBlockType:i,allowedBlockType:a,directInsertBlock:c,onSelectOrClose:d,selectBlockOnInsert:u}=t;if(!i&&!c)return;const{insertBlock:g}=e(M);let p;if(c){const e=function(e){const{getBlock:t,getPreviousBlockClientId:r}=n(M);if(!e||!s&&!o)return{};const l={};let i={};if(s){const e=t(s),n=t(r(s));e?.name===n?.name&&(i=n?.attributes||{})}else{const e=t(o);if(e?.innerBlocks?.length){const t=e.innerBlocks[e.innerBlocks.length-1];c&&c?.name===t.name&&(i=t.attributes)}}return e.forEach(e=>{i.hasOwnProperty(e)&&(l[e]=i[e])}),l}(c.attributesToCopy);p=r(c.name,{...c.attributes||{},...e})}else p=r(a.name);g(p,function(){const{getBlockIndex:e,getBlockSelectionEnd:t,getBlockOrder:r,getBlockRootClientId:i}=n(M);if(s)return e(s);const a=t();return!l&&a&&i(a)===o?e(a)+1:r(o).length}(),o,u),d&&d({clientId:p?.clientId});const m=H(F("%s block added"),a.title);$e(m)}})),B(({hasItems:e,isAppender:t,rootClientId:n,clientId:o})=>e||!t&&!n&&!o)])(ko),{clearTimeout:fo,setTimeout:jo}=window;function yo({ref:e,isFocused:t,highlightParent:n,debounceTimeout:o=200}){const{getSelectedBlockClientId:s,getBlockRootClientId:r}=O(M),{toggleBlockHighlight:l}=R(M),i=Qe.useRef(),a=O(e=>e(M).getSettings().isDistractionFree,[]),c=e=>{if(e&&a)return;const t=s(),o=n?r(t):t;l(o,e)},d=()=>{const n=e?.current&&e.current.matches(":hover");return!t&&!n},u=()=>{const e=i.current;e&&fo&&fo(e)};return Qe.useEffect(()=>()=>{c(!1),u()},[]),{debouncedShowGestures:e=>{e&&e.stopPropagation(),u(),c(!0)},debouncedHideGestures:e=>{e&&e.stopPropagation(),u(),i.current=jo(()=>{d()&&c(!1)},o)}}}function Co({ref:e,highlightParent:t=!1,debounceTimeout:n=200}){const[o,s]=Qe.useState(!1),{debouncedShowGestures:r,debouncedHideGestures:l}=yo({ref:e,debounceTimeout:n,isFocused:o,highlightParent:t}),i=Qe.useRef(!1),a=()=>e?.current&&e.current.contains(e.current.ownerDocument.activeElement);return Qe.useEffect(()=>{const t=e.current,n=()=>{a()&&(s(!0),r())},o=()=>{a()||(s(!1),l())};return t&&!i.current&&(t.addEventListener("focus",n,!0),t.addEventListener("blur",o,!0),i.current=!0),()=>{t&&(t.removeEventListener("focus",n),t.removeEventListener("blur",o))}},[e,i,s,r,l]),{onMouseMove:r,onMouseLeave:l}}const{Fill:Io,Slot:_o}=fe("__unstableBlockToolbarLastItem");function So({clientId:e}){const t=O(t=>t(M).getBlock(e),[e]),{replaceBlocks:n}=R(M);return t&&"core/html"===t.name?Xe.jsx(kt,{onClick:()=>n(e,p({HTML:m(t)})),children:F("Convert to Blocks")}):null}Io.Slot=_o;const{Fill:vo,Slot:Bo}=fe("__unstableBlockSettingsMenuFirstItem");vo.Slot=Bo;const wo=()=>{};function Po({clientId:t,onToggle:n=wo}){const{blockType:s,mode:r,isCodeEditingEnabled:l}=O(e=>{const{getBlock:n,getBlockMode:s,getSettings:r}=e(M),l=n(t);return{mode:s(t),blockType:l?o(l.name):null,isCodeEditingEnabled:r().codeEditingEnabled}},[t]),{toggleBlockMode:i}=R(M);if(!s||!e(s,"html",!0)||!l)return null;const a=F("visual"===r?"Edit as HTML":"Edit visually");return Xe.jsx(kt,{onClick:()=>{i(t),n()},children:a})}const{Fill:No,Slot:To}=fe("BlockSettingsMenuControls");function Mo({...e}){return Xe.jsx(_t,{document:document,children:Xe.jsx(No,{...e})})}function Do({parentClientId:e,parentBlockType:t}){const n=_("medium","<"),{selectBlock:o}=R(M),s=Qe.useRef(),r=Co({ref:s,highlightParent:!0});return n?Xe.jsx(kt,{...r,ref:s,icon:Xe.jsx(q,{icon:t.icon}),onClick:()=>o(e),children:H(F("Select parent block (%s)"),t.title)}):null}Mo.Slot=({fillProps:e,clientIds:t=null})=>{const{selectedBlocks:n,selectedClientIds:o,isContentOnly:s}=O(e=>{const{getBlockNamesByClientId:n,getSelectedBlockClientIds:o,getBlockEditingMode:s}=e(M),r=null!==t?t:o();return{selectedBlocks:n(r),selectedClientIds:r,isContentOnly:"contentOnly"===s(r[0])}},[t]),{canLock:r}=_e(o[0]),{canRename:l}=Se(n[0]),i=1===o.length&&r&&!s,a=1===o.length&&l&&!s,c=yt(o),{isGroupable:d,isUngroupable:u}=c,g=d||u;return Xe.jsx(To,{fillProps:{...e,selectedBlocks:n,selectedClientIds:o},children:t=>!t?.length>0&&!g&&!i?null:Xe.jsxs(pt,{children:[g&&Xe.jsx(Ct,{...c,onClose:e?.onClose}),i&&Xe.jsx(ft,{clientId:o[0]}),a&&Xe.jsx(ve,{clientId:o[0]}),t,1===o.length&&Xe.jsx(jt,{clientId:o[0],onClose:e?.onClose}),1===e?.count&&!s&&Xe.jsx(Po,{clientId:e?.firstBlockClientId,onToggle:e?.onClose})]})})};const Fo={className:"block-editor-block-settings-menu__popover",placement:"bottom-start"};function Ao({clientIds:e,onCopy:t,label:n,shortcut:o}){const{getBlocksByClientId:s}=O(M),r=St(()=>c(s(e)),t),l=n||F("Copy");return Xe.jsx(kt,{ref:r,shortcut:o,children:l})}function Eo({block:e,clientIds:t,children:s,__experimentalSelectBlock:r,...l}){const i=e?.clientId,a=t.length,c=t[0],{firstParentClientId:d,parentBlockType:u,previousBlockClientId:g,selectedBlockClientIds:p,openedBlockSettingsMenu:m,isContentOnly:h}=O(e=>{const{getBlockName:t,getBlockRootClientId:s,getPreviousBlockClientId:r,getSelectedBlockClientIds:l,getBlockAttributes:i,getOpenedBlockSettingsMenu:a,getBlockEditingMode:d}=L(e(M)),{getActiveBlockVariation:u}=e(n),g=s(c),p=g&&t(g);return{firstParentClientId:g,parentBlockType:g&&(u(p,i(g))||o(p)),previousBlockClientId:r(c),selectedBlockClientIds:l(),openedBlockSettingsMenu:a(),isContentOnly:"contentOnly"===d(c)}},[c]),{getBlockOrder:b,getSelectedBlockClientIds:k}=O(M),{setOpenedBlockSettingsMenu:x}=L(R(M)),f=O(e=>{const{getShortcutRepresentation:t}=e(gt);return{duplicate:t("core/block-editor/duplicate"),remove:t("core/block-editor/remove"),insertAfter:t("core/block-editor/insert-after"),insertBefore:t("core/block-editor/insert-before")}},[]),j=p.length>0;async function y(e){if(!r)return;const t=await e;t&&t[0]&&r(t[0],!1)}function C(){if(!r)return;let e=g||d;e||(e=b()[0]);const t=j&&0===k().length;r(e,t)}const I=p?.includes(d),_=i?m===i||!1:void 0;function S(e){e&&m!==i?x(i):!e&&m&&m===i&&x(void 0)}const v=!I&&!!d;return Xe.jsx(D,{clientIds:t,__experimentalUpdateSelection:!r,children:({canCopyStyles:e,canDuplicate:n,canInsertBlock:o,canRemove:r,onDuplicate:i,onInsertAfter:g,onInsertBefore:p,onRemove:m,onCopy:b,onPasteStyles:k})=>!r&&!n&&!o&&h?null:Xe.jsx(et,{icon:rt,label:F("Options"),className:"block-editor-block-settings-menu",popoverProps:Fo,open:_,onToggle:S,noIcons:!0,...l,children:({onClose:l})=>Xe.jsxs(Xe.Fragment,{children:[Xe.jsxs(pt,{children:[Xe.jsx(vo.Slot,{fillProps:{onClose:l}}),v&&Xe.jsx(Do,{parentClientId:d,parentBlockType:u}),1===a&&Xe.jsx(So,{clientId:c}),!h&&Xe.jsx(Ao,{clientIds:t,onCopy:b,shortcut:Be.primary("c")}),n&&Xe.jsx(kt,{onClick:w(l,i,y),shortcut:f.duplicate,children:F("Duplicate")}),o&&!h&&Xe.jsxs(Xe.Fragment,{children:[Xe.jsx(kt,{onClick:w(l,p),shortcut:f.insertBefore,children:F("Add before")}),Xe.jsx(kt,{onClick:w(l,g),shortcut:f.insertAfter,children:F("Add after")})]})]}),e&&!h&&Xe.jsxs(pt,{children:[Xe.jsx(Ao,{clientIds:t,onCopy:b,label:F("Copy styles")}),Xe.jsx(kt,{onClick:k,children:F("Paste styles")})]}),Xe.jsx(Mo.Slot,{fillProps:{onClose:l,count:a,firstBlockClientId:c},clientIds:t}),"function"==typeof s?s({onClose:l}):Qe.Children.map(e=>Qe.cloneElement(e,{onClose:l})),r&&Xe.jsx(pt,{children:Xe.jsx(kt,{onClick:w(l,m,C),shortcut:f.remove,children:F("Delete")})})]})})})}function Oo({clientIds:e,...t}){return Xe.jsx(we,{children:Xe.jsx(Pe,{children:n=>Xe.jsx(Eo,{clientIds:e,toggleProps:n,...t})})})}const Lo=Qe.createContext("");function Ro(){const{isToolbarEnabled:t,isBlockDisabled:n}=O(t=>{const{getBlockEditingMode:n,getBlockName:s,getBlockSelectionStart:r}=t(M),l=r(),i=l&&o(s(l));return{isToolbarEnabled:i&&e(i,"__experimentalToolbar",!0),isBlockDisabled:"disabled"===n(l)}},[]);return!(!t||n)}function Ho({hideDragHandle:t,focusOnMount:n,__experimentalInitialIndex:s,__experimentalOnIndexChange:r,variant:l="unstyled"}){const{blockClientId:a,blockClientIds:c,isDefaultEditingMode:u,blockType:g,toolbarKey:p,shouldShowVisualToolbar:m,showParentSelector:h,isUsingBindings:b,hasParentPattern:k,hasContentOnlyLocking:x}=O(t=>{const{getBlockName:n,getBlockMode:s,getBlockParents:r,getSelectedBlockClientIds:l,isBlockValid:i,getBlockEditingMode:a,getBlockAttributes:c,getBlockParentsByBlockName:d,getTemplateLock:u,getParentSectionBlock:g}=L(t(M)),p=l(),m=p[0],h=r(m),b=g(m),k=null!=b?b:h[h.length-1],x=n(k),f=o(x),j="default"===a(m),y=n(m),C=p.every(e=>i(e)),I=p.every(e=>"visual"===s(e)),_=p.every(e=>!!c(e)?.metadata?.bindings),S=p.every(e=>d(e,"core/block",!0).length>0),v=p.some(e=>"contentOnly"===u(e));return{blockClientId:m,blockClientIds:p,isDefaultEditingMode:j,blockType:m&&o(y),shouldShowVisualToolbar:C&&I,toolbarKey:`${m}${k}`,showParentSelector:f&&"disabled"!==a(k)&&e(f,"__experimentalParentSelector",!0)&&1===p.length,isUsingBindings:_,hasParentPattern:S,hasContentOnlyLocking:v}},[]),f=Qe.useRef(null),j=Qe.useRef(),y=Co({ref:j}),C=!_("medium","<");if(!Ro())return null;const I=c.length>1,S=i(g)||d(g),v=Ye("block-editor-block-contextual-toolbar",{"has-parent":h}),B=Ye("block-editor-block-toolbar",{"is-synced":S,"is-connected":b});return Xe.jsx(Ne,{focusEditorOnEscape:!0,className:v,"aria-label":F("Block tools"),variant:"toolbar"===l?void 0:l,focusOnMount:n,__experimentalInitialIndex:s,__experimentalOnIndexChange:r,children:Xe.jsxs("div",{ref:f,className:B,children:[!I&&C&&Xe.jsx(Te,{}),(m||I)&&!k&&Xe.jsx("div",{ref:j,...y,children:Xe.jsxs(we,{className:"block-editor-block-toolbar__block-controls",children:[Xe.jsx(Me,{clientIds:c}),!I&&u&&Xe.jsx(De,{clientId:a}),Xe.jsx(Fe,{clientIds:c,hideDragHandle:t})]})}),!x&&m&&I&&Xe.jsx(It,{}),m&&Xe.jsxs(Xe.Fragment,{children:[Xe.jsx(Ae.Slot,{group:"parent",className:"block-editor-block-toolbar__slot"}),Xe.jsx(Ae.Slot,{group:"block",className:"block-editor-block-toolbar__slot"}),Xe.jsx(Ae.Slot,{className:"block-editor-block-toolbar__slot"}),Xe.jsx(Ae.Slot,{group:"inline",className:"block-editor-block-toolbar__slot"}),Xe.jsx(Ae.Slot,{group:"other",className:"block-editor-block-toolbar__slot"}),Xe.jsx(Lo.Provider,{value:g?.name,children:Xe.jsx(Io.Slot,{})})]}),Xe.jsx(Ee,{clientIds:c}),Xe.jsx(Oo,{clientIds:c})]})},p)}function zo({hideDragHandle:e,variant:t}){return Xe.jsx(Ho,{hideDragHandle:e,variant:t,focusOnMount:void 0,__experimentalInitialIndex:void 0,__experimentalOnIndexChange:void 0})}const Vo=[];function Uo(e){return Xe.jsx(we,{children:Xe.jsx(Oe,{...e})})}function Wo({clientId:e,as:t=Uo}){const{categories:n,patterns:o,patternName:s}=O(t=>{const{getBlockAttributes:n,getBlockRootClientId:o,__experimentalGetAllowedPatterns:s}=t(M),r=n(e),l=r?.metadata?.categories||Vo,i=r?.metadata?.patternName,a=o(e);return{categories:l,patterns:l.length>0?s(a):Vo,patternName:i}},[e]),{replaceBlocks:r}=R(M),l=Qe.useMemo(()=>0!==n.length&&o&&0!==o.length?o.filter(e=>{const t="core"===e.source||e.source?.startsWith("pattern-directory")&&"pattern-directory/theme"!==e.source;return 1===e.blocks.length&&!t&&e.categories?.some(e=>n.includes(e))&&("unsynced"===e.syncStatus||!e.id)}):Vo,[n,o]);if(l.length<2)return null;const i=t;return Xe.jsx(i,{label:F("Shuffle"),icon:at,className:"block-editor-block-toolbar-shuffle",onClick:()=>{const t=function(){const e=l.length,t=l.findIndex(({name:e})=>e===s);return l[t+1<e?t+1:0]}();t.blocks[0].attributes={...t.blocks[0].attributes,metadata:{...t.blocks[0].attributes.metadata,categories:n}},r(e,t.blocks)}})}function Go({clientId:e}){return Xe.jsx(Ue,{title:F("Styles"),children:Xe.jsx(Pt,{clientId:e})})}const qo=({showNoBlockSelectedMessage:e=!0})=>{const{count:t,selectedBlockName:n,selectedBlockClientId:s,blockType:r,isSectionBlock:l}=O(e=>{const{getSelectedBlockClientId:t,getSelectedBlockCount:n,getBlockName:s,getParentSectionBlock:r,isSectionBlock:l}=L(e(M)),i=r(t())||t(),a=i&&s(i),c=a&&o(a);return{count:n(),selectedBlockClientId:i,selectedBlockName:a,blockType:c,isSectionBlock:l(i)}},[]),i=Le(r?.name),a=i?.length>1,c=function(e){return O(t=>{if(e){const n=t(M).getSettings().blockInspectorAnimation,o=n?.animationParent,{getSelectedBlockClientId:s,getBlockParentsByBlockName:r}=t(M);return r(s(),o,!0)[0]||e.name===o?n?.[e.name]:null}return null},[e])}(r),d=Mt({blockName:n});if(t>1&&!l)return Xe.jsxs("div",{className:"block-editor-block-inspector",children:[Xe.jsx(vt,{}),a?Xe.jsx(Re,{tabs:i}):Xe.jsxs(Xe.Fragment,{children:[Xe.jsx(He.Slot,{}),Xe.jsx(He.Slot,{group:"color",label:F("Color"),className:"color-block-support-panel__inner-wrapper"}),Xe.jsx(He.Slot,{group:"background",label:F("Background image")}),Xe.jsx(He.Slot,{group:"typography",label:F("Typography")}),Xe.jsx(He.Slot,{group:"dimensions",label:F("Dimensions")}),Xe.jsx(He.Slot,{group:"border",label:d}),Xe.jsx(He.Slot,{group:"styles"})]})]});const u=n===h();return r&&s&&!u?Xe.jsx($o,{animate:c,wrapper:e=>Xe.jsx(Ko,{blockInspectorAnimationSettings:c,selectedBlockClientId:s,children:e}),children:Xe.jsx(Qo,{clientId:s,blockName:r.name,isSectionBlock:l})}):e?Xe.jsx("span",{className:"block-editor-block-inspector__no-blocks",children:F("No block selected.")}):null},$o=({animate:e,wrapper:t,children:n})=>e?t(n):n,Ko=({blockInspectorAnimationSettings:e,selectedBlockClientId:t,children:n})=>{const o=e&&"leftToRight"===e.enterDirection?-50:50;return Xe.jsx(ht.div,{animate:{x:0,opacity:1,transition:{ease:"easeInOut",duration:.14}},initial:{x:o,opacity:0},children:n},t)},Qo=({clientId:e,blockName:t,isSectionBlock:o})=>{const s=Le(t),r=!o&&s?.length>1,l=O(e=>{const{getBlockStyles:o}=e(n),s=o(t);return s&&s.length>0},[t]),i=ze(e),a=Mt({blockName:t}),c=O(t=>{if(!o)return;const{getClientIdsOfDescendants:n,getBlockName:s,getBlockEditingMode:r}=t(M);return n(e).filter(e=>"core/list-item"!==s(e)&&"contentOnly"===r(e))},[o,e]);return Xe.jsxs("div",{className:"block-editor-block-inspector",children:[Xe.jsx(U,{...i,className:i.isSynced&&"is-synced"}),Xe.jsx(Ke,{blockClientId:e}),Xe.jsx(Ve.Slot,{}),r&&Xe.jsx(Re,{hasBlockStyles:l,clientId:e,blockName:t,tabs:s}),!r&&Xe.jsxs(Xe.Fragment,{children:[l&&Xe.jsx(Go,{clientId:e}),c&&c?.length>0&&Xe.jsx(Ue,{title:F("Content"),children:Xe.jsx(Tt,{clientIds:c})}),!o&&Xe.jsxs(Xe.Fragment,{children:[Xe.jsx(He.Slot,{}),Xe.jsx(He.Slot,{group:"list"}),Xe.jsx(He.Slot,{group:"color",label:F("Color"),className:"color-block-support-panel__inner-wrapper"}),Xe.jsx(He.Slot,{group:"background",label:F("Background image")}),Xe.jsx(He.Slot,{group:"typography",label:F("Typography")}),Xe.jsx(He.Slot,{group:"dimensions",label:F("Dimensions")}),Xe.jsx(He.Slot,{group:"border",label:a}),Xe.jsx(He.Slot,{group:"styles"}),Xe.jsx(We,{}),Xe.jsx(He.Slot,{group:"bindings"}),Xe.jsx("div",{children:Xe.jsx(Ge,{})})]})]}),Xe.jsx(qe,{},"back")]})},Xo=()=>{};const Yo=Qe.forwardRef(function({rootClientId:e,clientId:t,isAppender:n,showInserterHelpPanel:o,showMostUsedBlocks:s=!1,__experimentalInsertionIndex:r,__experimentalInitialTab:l,__experimentalInitialCategory:i,__experimentalFilterValue:a,onPatternCategorySelection:c,onSelect:d=Xo,shouldFocusBlock:u=!1,onClose:g},p){const{destinationRootClientId:m}=O(n=>{const{getBlockRootClientId:o}=n(M);return{destinationRootClientId:e||o(t)||void 0}},[t,e]);return Xe.jsx(po,{onSelect:d,rootClientId:m,clientId:t,isAppender:n,showInserterHelpPanel:o,showMostUsedBlocks:s,__experimentalInsertionIndex:r,__experimentalFilterValue:a,onPatternCategorySelection:c,__experimentalInitialTab:l,__experimentalInitialCategory:i,shouldFocusBlock:u,ref:p,onClose:g})});const Zo=Qe.forwardRef(function(e,t){return Xe.jsx(Yo,{...e,onPatternCategorySelection:void 0,ref:t})});export{Eo as B,xo as I,Yo as P,ho as Q,Wo as S,vo as _,Ho as a,gn as b,kn as c,xn as d,rn as e,Cn as f,an as g,Co as h,Io as i,Lo as j,io as k,qo as l,Oo as m,ln as n,pn as o,Mo as p,zo as q,Zo as r,cn as s,yn as t,Ro as u,Rt as v,bn as w,Kt as x};
