import{a1 as M,r as i,j as e,cI as D,S as B,co as E,bB as F,bE as I,O as P,bF as H,cN as L,Z as T,cO as R,bv as W,bV as Q}from"./vendor-react-BZRIq8oW.js";import{u as U,a as V,b as X}from"./useOrders-DMJhbSu4.js";import{H as Z}from"./page-gutenberg-iVBL5IS_.js";import{f as q,k as z}from"./vendor-utils-DQ8F5vJI.js";import"./wp-block-editor-C14Ds6es.js";import"./wp-blocks-CnCGET8b.js";import"./wp-core-BctBwZpo.js";import"./wp-i18n-Niz9RVma.js";import"./wp-element-CB9_H0_F.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-query-GrNIwsDq.js";import"./ecommerceApi-BYZDW90k.js";import"./unified-client-CqH62OT1.js";import"./main-CV2H0Ay8.js";import"./vendor-socket-Ch6lN7-G.js";import"./wp-components-CLkQS2qf.js";const me=()=>{const g=M(),[r,x]=i.useState(1),[c,h]=i.useState({}),[b,v]=i.useState(""),[l,d]=i.useState([]),[j,w]=i.useState(!1),[n,y]=i.useState(""),{data:p,isLoading:k}=U(r,20,{...c,search:b}),f=V(),C=X(),m=p?.data||[],o=Math.ceil((p?.total||0)/20),u={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:e.jsx(Q,{className:"w-4 h-4"})},processing:{bg:"bg-blue-100",text:"text-blue-800",icon:e.jsx(W,{className:"w-4 h-4"})},shipped:{bg:"bg-purple-100",text:"text-purple-800",icon:e.jsx(R,{className:"w-4 h-4"})},completed:{bg:"bg-green-100",text:"text-green-800",icon:e.jsx(T,{className:"w-4 h-4"})},cancelled:{bg:"bg-gray-100",text:"text-gray-800",icon:e.jsx(L,{className:"w-4 h-4"})},refunded:{bg:"bg-red-100",text:"text-red-800",icon:e.jsx(H,{className:"w-4 h-4"})}},S=s=>{s.preventDefault(),x(1)},_=async()=>{if(!n||l.length===0||n==="delete"&&!window.confirm(`정말로 ${l.length}개의 주문을 삭제하시겠습니까?`))return;const s=n.startsWith("status_")?"update_status":n;await f.mutateAsync({action:s,orderIds:l,data:n.startsWith("status_")?{status:n.replace("status_","")}:void 0}),d([]),y("")},O=async(s,t)=>{await C.mutateAsync({orderId:s,status:t,note:`상태가 ${t}로 변경되었습니다.`})},N=s=>({pending:"대기중",processing:"처리중",shipped:"배송중",completed:"완료",cancelled:"취소됨",refunded:"환불됨"})[s]||s,$=s=>({card:"신용카드",bank_transfer:"계좌이체",virtual_account:"가상계좌",phone:"휴대폰결제",kakao_pay:"카카오페이",naver_pay:"네이버페이",toss:"토스"})[s]||s;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"주문 관리"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["총 ",p?.total||0,"개의 주문이 있습니다"]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>{f.mutate({action:"export",orderIds:l.length>0?l:[]})},className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"내보내기"]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("form",{onSubmit:S,className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:b,onChange:s=>v(s.target.value),placeholder:"주문번호, 고객명, 이메일로 검색...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("button",{onClick:()=>w(!j),className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50 ml-4",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"필터"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[e.jsxs("button",{onClick:()=>h({}),className:`px-4 py-2 rounded-lg whitespace-nowrap ${c.status?"bg-gray-100 hover:bg-gray-200":"bg-blue-600 text-white"}`,children:["전체 (",p?.total||0,")"]}),["pending","processing","shipped","completed","cancelled","refunded"].map(s=>{const t=u[s];return e.jsxs("button",{onClick:()=>h({...c,status:s}),className:`px-4 py-2 rounded-lg whitespace-nowrap flex items-center gap-2 ${c.status===s?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[t.icon,N(s)]},s)})]}),j&&e.jsxs("div",{className:"border-t pt-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"주문 상태"}),e.jsxs("select",{value:c.status||"",onChange:s=>h({...c,status:s.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"전체 상태"}),e.jsx("option",{value:"pending",children:"대기중"}),e.jsx("option",{value:"processing",children:"처리중"}),e.jsx("option",{value:"shipped",children:"배송중"}),e.jsx("option",{value:"completed",children:"완료"}),e.jsx("option",{value:"cancelled",children:"취소됨"}),e.jsx("option",{value:"refunded",children:"환불됨"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"검색 기간"}),e.jsxs("select",{className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"전체 기간"}),e.jsx("option",{value:"today",children:"오늘"}),e.jsx("option",{value:"week",children:"이번 주"}),e.jsx("option",{value:"month",children:"이번 달"})]})]})]})]}),l.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-blue-800",children:[l.length,"개의 주문이 선택되었습니다"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:n,onChange:s=>y(s.target.value),className:"border rounded px-3 py-1",children:[e.jsx("option",{value:"",children:"일괄 작업 선택"}),e.jsx("option",{value:"status_processing",children:"처리중으로 변경"}),e.jsx("option",{value:"status_shipped",children:"배송중으로 변경"}),e.jsx("option",{value:"status_completed",children:"완료로 변경"}),e.jsx("option",{value:"export",children:"선택 항목 내보내기"}),e.jsx("option",{value:"delete",children:"삭제"})]}),e.jsx("button",{onClick:_,disabled:!n,className:"px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"적용"})]})]}),k?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):m.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[e.jsx(F,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"주문이 없습니다"}),e.jsx("p",{className:"text-gray-500",children:"아직 주문이 없습니다."})]}):e.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:l.length===m.length,onChange:s=>{s.target.checked?d(m.map(t=>t.id)):d([])},className:"rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"주문번호"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"일시"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"고객"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"결제"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"총액"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"작업"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(s=>{const t=u[s.status]||u.pending;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:l.includes(s.id),onChange:a=>{a.target.checked?d([...l,s.id]):d(l.filter(A=>A!==s.id))},className:"rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("a",{href:`#/orders/${s.id}`,onClick:a=>{a.preventDefault(),g(`/orders/${s.id}`)},className:"text-blue-600 hover:text-blue-800 font-medium",children:["#",s.orderNumber]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(new Date(s.createdAt),"yyyy-MM-dd HH:mm",{locale:z})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${t.bg} ${t.text}`,children:[t.icon,N(s.status)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.customerName||"게스트"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.customerEmail})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(I,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:$(s.paymentMethod||"")})]}),s.paymentStatus==="completed"?e.jsx("span",{className:"text-xs text-green-600",children:"결제완료"}):e.jsx("span",{className:"text-xs text-red-600",children:"미결제"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Z(s.total)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>g(`/orders/${s.id}`),className:"text-gray-400 hover:text-gray-600",title:"주문 상세보기",children:e.jsx(P,{className:"w-4 h-4"})}),e.jsxs("select",{value:s.status,onChange:a=>O(s.id,a.target.value),className:"text-sm border rounded px-2 py-1",onClick:a=>a.stopPropagation(),children:[e.jsx("option",{value:"pending",children:"대기중"}),e.jsx("option",{value:"processing",children:"처리중"}),e.jsx("option",{value:"shipped",children:"배송중"}),e.jsx("option",{value:"completed",children:"완료"}),e.jsx("option",{value:"cancelled",children:"취소"}),e.jsx("option",{value:"refunded",children:"환불"})]})]})})]},s.id)})})]})}),o>1&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("nav",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>x(Math.max(1,r-1)),disabled:r===1,className:"px-3 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"이전"}),Array.from({length:Math.min(o,5)},(s,t)=>{const a=r>3?r-2+t:t+1;return a>o?null:e.jsx("button",{onClick:()=>x(a),className:`px-3 py-2 border rounded-lg ${r===a?"bg-blue-600 text-white":"hover:bg-gray-50"}`,children:a},a)}),e.jsx("button",{onClick:()=>x(Math.min(o,r+1)),disabled:r===o,className:"px-3 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"다음"})]})})]})};export{me as default};
