import{j as e,r as t}from"./vendor-react-BQ6HOJoh.js";import{_ as n,L as s,G as i,u as a,s as o,H as l,aQ as u,J as r,bF as c,a as d,M as p,D as m,ab as g,X as h,a1 as f,a4 as v,N as b,bG as x,bH as S,bI as w,Z as j,i as y,g as z,c as C,b as _,$ as k,T as I,bJ as M}from"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-a11y-DrduSWFW.js";import{z as D,ad as O,v as R,m as V,A as B,D as F,E as L}from"./wp-block-editor-utils-M5qXzE1L.js";import{c as A}from"./vendor-ui-CrFdsnXa.js";import{d as N}from"./wp-blocks-core-6vwQKPfS.js";import{T as H,d as $}from"./wp-block-editor-menus-BTQ2wZ-f.js";import{a as P}from"./wp-block-editor-core-DL280tSA.js";import{s as W}from"./wp-block-editor-store-B-g1aSix.js";import{b as G,c as E}from"./wp-block-editor-global-styles-CV5-K6QF.js";import{av as T,aw as U,ax as q,ay as J,az as X,aA as K,aB as Q,aC as Z,a as Y,b as ee,a9 as te,aa as ne}from"./wp-block-editor-library-BpQvynjE.js";import{c as se}from"./wp-block-editor-colors-D38h-Odz.js";const ie=["top","right","bottom","left"],ae={top:void 0,right:void 0,bottom:void 0,left:void 0},oe={custom:Q,axial:Q,horizontal:K,vertical:X,top:J,right:q,bottom:U,left:T},le={default:n("Spacing control"),top:n("Top"),bottom:n("Bottom"),left:n("Left"),right:n("Right"),mixed:n("Mixed"),vertical:n("Vertical"),horizontal:n("Horizontal"),axial:n("Horizontal & vertical"),custom:n("Custom")},ue="axial",re="custom";function ce(e){return!!e?.includes&&("0"===e||e.includes("var:preset|spacing|"))}function de(e,t){if(!ce(e))return e;const n=ge(e),s=t.find(e=>String(e.slug)===n);return s?.size}function pe(e,t){if(!e||ce(e)||"0"===e)return e;const n=t.find(t=>String(t.size)===String(e));return n?.slug?`var:preset|spacing|${n.slug}`:e}function me(e){if(!e)return;const t=e.match(/var:preset\|spacing\|(.+)/);return t?`var(--wp--preset--spacing--${t[1]})`:e}function ge(e){if(!e)return;if("0"===e||"default"===e)return e;const t=e.match(/var:preset\|spacing\|(.+)/);return t?t[1]:void 0}function he(e,t){if(!e||!e.length)return!1;const n=e.includes("horizontal")||e.includes("left")&&e.includes("right"),s=e.includes("vertical")||e.includes("top")&&e.includes("bottom");return"horizontal"===t?n:"vertical"===t?s:n||s}function fe(e,t="0"){const n=function(e){if(!e)return null;const t="string"==typeof e;return{top:t?e:e?.top,left:t?e:e?.left}}(e);if(!n)return null;const s=me(n?.top)||t,i=me(n?.left)||t;return s===i?s:`${s} ${i}`}function ve({__next40pxDefaultSize:t=!1,value:a,onChange:o,__unstableInputWidth:l="60px",...u}){const[r]=s("spacing.units"),c=D({availableUnits:r||["px","em","rem"],defaultValues:{px:2,em:.2,rem:.2}});return e.jsx(i,{__next40pxDefaultSize:t,...u,label:n("Letter spacing"),value:a,__unstableInputWidth:l,units:c,onChange:o})}const be={px:{max:300,steps:1},"%":{max:100,steps:1},vw:{max:100,steps:1},vh:{max:100,steps:1},em:{max:10,steps:.1},rm:{max:10,steps:.1},svw:{max:100,steps:1},lvw:{max:100,steps:1},dvw:{max:100,steps:1},svh:{max:100,steps:1},lvh:{max:100,steps:1},dvh:{max:100,steps:1},vi:{max:100,steps:1},svi:{max:100,steps:1},lvi:{max:100,steps:1},dvi:{max:100,steps:1},vb:{max:100,steps:1},svb:{max:100,steps:1},lvb:{max:100,steps:1},dvb:{max:100,steps:1},vmin:{max:100,steps:1},svmin:{max:100,steps:1},lvmin:{max:100,steps:1},dvmin:{max:100,steps:1},vmax:{max:100,steps:1},svmax:{max:100,steps:1},lvmax:{max:100,steps:1},dvmax:{max:100,steps:1}};function xe({icon:p,isMixed:m=!1,minimumCustomValue:g,onChange:h,onMouseOut:f,onMouseOver:v,showSideInLabel:b=!0,side:x,spacingSizes:S,type:w,value:j}){var y,z;j=pe(j,S);let C=S;const _=S.length<=8,k=a(e=>{const t=e(W).getSettings();return t?.disableCustomSpacingSizes}),[I,M]=t.useState(!k&&void 0!==j&&!ce(j)),[V,B]=t.useState(g),F=O(j);j&&F!==j&&!ce(j)&&!0!==I&&M(!0);const[L]=s("spacing.units"),A=D({availableUnits:L||["px","em","rem"]});let N=null;!_&&!I&&void 0!==j&&(!ce(j)||ce(j)&&m)?(C=[...S,{name:m?n("Mixed"):o(n("Custom (%s)"),j),slug:"custom",size:j}],N=C.length-1):m||(N=I?de(j,S):function(e,t){if(void 0===e)return 0;const n=0===parseFloat(e,10)?"0":ge(e),s=t.findIndex(e=>String(e.slug)===n);return-1!==s?s:NaN}(j,S));const H=t.useMemo(()=>R(N),[N])[1]||A[0]?.value,$=parseFloat(N,10),P=(e,t)=>{const n=parseInt(e,10);if("selectList"===t){if(0===n)return;if(1===n)return"0"}else if(0===n)return"0";return`var:preset|spacing|${S[e]?.slug}`},G=m?n("Mixed"):null,E=C.map((e,t)=>({key:t,name:e.name})),T=S.slice(1,S.length-1).map((e,t)=>({value:t+1,label:void 0})),U=ie.includes(x)&&b?le[x]:"",q=b?w?.toLowerCase():w,J=o(n("%1$s %2$s"),U,q).trim();return e.jsxs(l,{className:"spacing-sizes-control__wrapper",children:[p&&e.jsx(u,{className:"spacing-sizes-control__icon",icon:p,size:24}),I&&e.jsxs(e.Fragment,{children:[e.jsx(i,{onMouseOver:v,onMouseOut:f,onFocus:v,onBlur:f,onChange:e=>h((e=>isNaN(parseFloat(e))?void 0:e)(e)),value:N,units:A,min:V,placeholder:G,disableUnits:m,label:J,hideLabelFromVision:!0,className:"spacing-sizes-control__custom-value-input",size:"__unstable-large",onDragStart:()=>{"-"===j?.charAt(0)&&B(0)},onDrag:()=>{"-"===j?.charAt(0)&&B(0)},onDragEnd:()=>{B(g)}}),e.jsx(r,{__next40pxDefaultSize:!0,onMouseOver:v,onMouseOut:f,onFocus:v,onBlur:f,value:$,min:0,max:null!==(y=be[H]?.max)&&void 0!==y?y:10,step:null!==(z=be[H]?.steps)&&void 0!==z?z:.1,withInputField:!1,onChange:e=>{h([e,H].join(""))},className:"spacing-sizes-control__custom-value-range",__nextHasNoMarginBottom:!0,label:J,hideLabelFromVision:!0})]}),_&&!I&&e.jsx(r,{__next40pxDefaultSize:!0,onMouseOver:v,onMouseOut:f,className:"spacing-sizes-control__range-control",value:N,onChange:e=>h(P(e)),onMouseDown:e=>{e?.nativeEvent?.offsetX<35&&void 0===j&&h("0")},withInputField:!1,"aria-valuenow":N,"aria-valuetext":S[N]?.name,renderTooltipContent:e=>void 0===j?void 0:S[e]?.name,min:0,max:S.length-1,marks:T,label:J,hideLabelFromVision:!0,__nextHasNoMarginBottom:!0,onFocus:v,onBlur:f}),!_&&!I&&e.jsx(c,{className:"spacing-sizes-control__custom-select-control",value:E.find(e=>e.key===N)||"",onChange:e=>{h(P(e.selectedItem.key,"selectList"))},options:E,label:J,hideLabelFromVision:!0,size:"__unstable-large",onMouseOver:v,onMouseOut:f,onFocus:v,onBlur:f}),!k&&e.jsx(d,{label:n(I?"Use size preset":"Set custom size"),icon:Z,onClick:()=>{M(!I)},isPressed:I,size:"small",className:"spacing-sizes-control__custom-toggle",iconSize:24})]})}const Se=["vertical","horizontal"];function we({minimumCustomValue:t,onChange:n,onMouseOut:s,onMouseOver:i,sides:a,spacingSizes:o,type:l,values:u}){const r=e=>t=>{if(!n)return;const s={...Object.keys(u).reduce((e,t)=>(e[t]=pe(u[t],o),e),{})};"vertical"===e&&(s.top=t,s.bottom=t),"horizontal"===e&&(s.left=t,s.right=t),n(s)},c=a?.length?Se.filter(e=>he(a,e)):Se;return e.jsx(e.Fragment,{children:c.map(n=>{const a="vertical"===n?u.top:u.left;return e.jsx(xe,{icon:oe[n],label:le[n],minimumCustomValue:t,onChange:r(n),onMouseOut:s,onMouseOver:i,side:n,spacingSizes:o,type:l,value:a,withInputField:!1},`spacing-sizes-control-${n}`)})})}function je({minimumCustomValue:t,onChange:n,onMouseOut:s,onMouseOver:i,sides:a,spacingSizes:o,type:l,values:u}){const r=a?.length?ie.filter(e=>a.includes(e)):ie,c=e=>t=>{const s={...Object.keys(u).reduce((e,t)=>(e[t]=pe(u[t],o),e),{})};s[e]=t,n(s)};return e.jsx(e.Fragment,{children:r.map(n=>e.jsx(xe,{icon:oe[n],label:le[n],minimumCustomValue:t,onChange:c(n),onMouseOut:s,onMouseOver:i,side:n,spacingSizes:o,type:l,value:u[n],withInputField:!1},`spacing-sizes-control-${n}`))})}function ye({minimumCustomValue:t,onChange:n,onMouseOut:s,onMouseOver:i,showSideInLabel:a,side:o,spacingSizes:l,type:u,values:r}){return e.jsx(xe,{label:le[o],minimumCustomValue:t,onChange:(c=o,e=>{const t={...Object.keys(r).reduce((e,t)=>(e[t]=pe(r[t],l),e),{})};t[c]=e,n(t)}),onMouseOut:s,onMouseOver:i,showSideInLabel:a,side:o,spacingSizes:l,type:u,value:r[o],withInputField:!1});var c}function ze({isLinked:t,...s}){const i=t?o(n("Unlink %1$s"),s.label.toLowerCase()).trim():o(n("Link %1$s"),s.label.toLowerCase()).trim();return e.jsx(H,{text:i,children:e.jsx(d,{...s,size:"small",icon:t?Y:ee,iconSize:24,"aria-label":i})})}const Ce=[],_e=new Intl.Collator("und",{numeric:!0}).compare;function ke(){const[e,i,a,o]=s("spacing.spacingSizes.custom","spacing.spacingSizes.theme","spacing.spacingSizes.default","spacing.defaultSpacingSizes"),l=null!=e?e:Ce,u=null!=i?i:Ce,r=a&&!1!==o?a:Ce;return t.useMemo(()=>{const e=[{name:n("None"),slug:"0",size:0},...l,...u,...r];return e.every(({slug:e})=>/^[0-9]/.test(e))&&e.sort((e,t)=>_e(e.slug,t.slug)),e.length>8?[{name:n("Default"),slug:"default",size:void 0},...e]:e},[l,u,r])}function Ie({inputProps:s,label:i,minimumCustomValue:a=0,onChange:u,onMouseOut:r,onMouseOver:c,showSideInLabel:d=!0,sides:g=ie,useSelect:h,values:f}){const v=ke(),b=f||ae,x=1===g?.length,S=g?.includes("horizontal")&&g?.includes("vertical")&&2===g?.length,[w,j]=t.useState(function(e={},t){const{top:n,right:s,bottom:i,left:a}=e,o=[n,s,i,a].filter(Boolean),l=!(n!==i||a!==s||!n&&!a),u=!o.length&&function(e=[]){const t={top:0,right:0,bottom:0,left:0};return e.forEach(e=>t[e]+=1),(t.top+t.bottom)%2==0&&(t.left+t.right)%2==0}(t),r=t?.includes("horizontal")&&t?.includes("vertical")&&2===t?.length;if(he(t)&&(l||u))return ue;if(r&&1===o.length){let t;return Object.entries(e).some(([e,n])=>(t=e,void 0!==n)),t}return 1!==t?.length||o.length?re:t[0]}(b,g)),y={...s,minimumCustomValue:a,onChange:e=>{const t={...f,...e};u(t)},onMouseOut:r,onMouseOver:c,sides:g,spacingSizes:v,type:i,useSelect:h,values:b},z=ie.includes(w)&&d?le[w]:"",C=o(n("%1$s %2$s"),i,z).trim();return e.jsxs("fieldset",{className:"spacing-sizes-control",children:[e.jsxs(l,{className:"spacing-sizes-control__header",children:[e.jsx(p.VisualLabel,{as:"legend",className:"spacing-sizes-control__label",children:C}),!x&&!S&&e.jsx(ze,{label:i,onClick:()=>{j(w===ue?re:ue)},isLinked:w===ue})]}),e.jsx(m,{spacing:.5,children:w===ue?e.jsx(we,{...y}):w===re?e.jsx(je,{...y}):e.jsx(ye,{side:w,...y,showSideInLabel:d})})]})}function Me({panelId:t,value:i,onChange:a=()=>{},options:o,defaultValue:l="auto",hasValue:u,isShownByDefault:r=!0}){const c=null!=i?i:"auto",[d,p,m]=s("dimensions.aspectRatios.default","dimensions.aspectRatios.theme","dimensions.defaultAspectRatios"),v=p?.map(({name:e,ratio:t})=>({label:e,value:t})),b=d?.map(({name:e,ratio:t})=>({label:e,value:t})),x=[{label:g("Original","Aspect ratio option for dimensions control"),value:"auto"},...m?b:[],...v||[],{label:g("Custom","Aspect ratio option for dimensions control"),value:"custom",disabled:!0,hidden:!0}];return e.jsx(h,{hasValue:u||(()=>c!==l),label:n("Aspect ratio"),onDeselect:()=>a(void 0),isShownByDefault:r,panelId:t,children:e.jsx(f,{label:n("Aspect ratio"),value:c,options:null!=o?o:x,onChange:a,size:"__unstable-large",__nextHasNoMarginBottom:!0})})}const De=["horizontal","vertical"];function Oe(e){const t=Re(e),n=Ve(e),s=Be(e),i=Fe(e),a=Le(e),o=Ae(e),l=Ne(e),u=He(e);return t||n||s||i||a||o||l||u}function Re(e){return e?.layout?.contentSize}function Ve(e){return e?.layout?.wideSize}function Be(e){return e?.spacing?.padding}function Fe(e){return e?.spacing?.margin}function Le(e){return e?.spacing?.blockGap}function Ae(e){return e?.dimensions?.minHeight}function Ne(e){return e?.dimensions?.aspectRatio}function He(e){var t;const{type:n="default",default:{type:s="default"}={},allowSizingOnChildren:i=!1}=null!==(t=e?.parentLayout)&&void 0!==t?t:{},a=("flex"===s||"flex"===n||"grid"===s||"grid"===n)&&i;return!!e?.layout&&a}function $e(e,t){if(!t||!e)return e;const n={};return t.forEach(t=>{"vertical"===t&&(n.top=e.top,n.bottom=e.bottom),"horizontal"===t&&(n.left=e.left,n.right=e.right),n[t]=e?.[t]}),n}function Pe(e){return e&&"string"==typeof e?{top:e,right:e,bottom:e,left:e}:e}function We({resetAllFilter:t,onChange:s,value:i,panelId:a,children:o}){const l=E();return e.jsx(j,{label:n("Dimensions"),resetAll:()=>{const e=t(i);s(e)},panelId:a,dropdownMenuProps:l,children:o})}const Ge={contentSize:!0,wideSize:!0,padding:!0,margin:!0,blockGap:!0,minHeight:!0,aspectRatio:!0,childLayout:!0};function Ee({as:s=We,value:a,onChange:o,inheritedValue:l=a,settings:u,panelId:r,defaultControls:c=Ge,onVisualize:d=()=>{},includeLayoutControls:p=!1}){var m,g,f,j,y,z,C,_;const{dimensions:k,spacing:I}=u,M=e=>e&&"object"==typeof e?Object.keys(e).reduce((t,n)=>(t[n]=G({settings:{dimensions:k,spacing:I}},"",e[n]),t),{}):G({settings:{dimensions:k,spacing:I}},"",e),O=function(e){const{defaultSpacingSizes:t,spacingSizes:n}=e?.spacing||{};return!1!==t&&n?.default?.length>0||n?.theme?.length>0||n?.custom?.length>0}(u),R=D({availableUnits:u?.spacing?.units||["%","px","em","rem","vw"]}),F=-1/0,[L,N]=t.useState(F),H=Re(u)&&p,$=M(l?.layout?.contentSize),P=e=>{o(B(a,["layout","contentSize"],e||void 0))},W=Ve(u)&&p,E=M(l?.layout?.wideSize),T=e=>{o(B(a,["layout","wideSize"],e||void 0))},U=Be(u),q=Pe(M(l?.spacing?.padding)),J=Array.isArray(u?.spacing?.padding)?u?.spacing?.padding:u?.spacing?.padding?.sides,X=J&&J.some(e=>De.includes(e)),K=e=>{const t=$e(e,J);o(B(a,["spacing","padding"],t))},Q=()=>d("padding"),Z=Fe(u),Y=Pe(M(l?.spacing?.margin)),ee=Array.isArray(u?.spacing?.margin)?u?.spacing?.margin:u?.spacing?.margin?.sides,se=ee&&ee.some(e=>De.includes(e)),ie=e=>{const t=$e(e,ee);o(B(a,["spacing","margin"],t))},ae=()=>d("margin"),oe=Le(u),le=M(l?.spacing?.blockGap),ue=function(e){return e&&"string"==typeof e?{top:e}:e?{...e,right:e?.left,bottom:e?.top}:e}(le),re=Array.isArray(u?.spacing?.blockGap)?u?.spacing?.blockGap:u?.spacing?.blockGap?.sides,ce=re&&re.some(e=>De.includes(e)),de=e=>{o(B(a,["spacing","blockGap"],e))},pe=e=>{e||de(null),!ce&&e?.hasOwnProperty("top")?de(e.top):de({top:e?.top,left:e?.left})},me=Ae(u),ge=M(l?.dimensions?.minHeight),he=e=>{const t=B(a,["dimensions","minHeight"],e);o(B(t,["dimensions","aspectRatio"],void 0))},fe=Ne(u),ve=M(l?.dimensions?.aspectRatio),be=He(u),xe=l?.layout,Se=t.useCallback(e=>({...e,layout:V({...e?.layout,contentSize:void 0,wideSize:void 0,selfStretch:void 0,flexSize:void 0,columnStart:void 0,rowStart:void 0,columnSpan:void 0,rowSpan:void 0}),spacing:{...e?.spacing,padding:void 0,margin:void 0,blockGap:void 0},dimensions:{...e?.dimensions,minHeight:void 0,aspectRatio:void 0}}),[]),we=()=>d(!1),je={min:L,onDragStart:()=>{N(0)},onDragEnd:()=>{N(F)}};return e.jsxs(s,{resetAllFilter:Se,value:a,onChange:o,panelId:r,children:[(H||W)&&e.jsx("span",{className:"span-columns",children:n("Set the width of the main content area.")}),H&&e.jsx(h,{label:n("Content width"),hasValue:()=>!!a?.layout?.contentSize,onDeselect:()=>P(void 0),isShownByDefault:null!==(m=c.contentSize)&&void 0!==m?m:Ge.contentSize,panelId:r,children:e.jsx(i,{__next40pxDefaultSize:!0,label:n("Content width"),labelPosition:"top",value:$||"",onChange:e=>{P(e)},units:R,prefix:e.jsx(v,{variant:"icon",children:e.jsx(b,{icon:te})})})}),W&&e.jsx(h,{label:n("Wide width"),hasValue:()=>!!a?.layout?.wideSize,onDeselect:()=>T(void 0),isShownByDefault:null!==(g=c.wideSize)&&void 0!==g?g:Ge.wideSize,panelId:r,children:e.jsx(i,{__next40pxDefaultSize:!0,label:n("Wide width"),labelPosition:"top",value:E||"",onChange:e=>{T(e)},units:R,prefix:e.jsx(v,{variant:"icon",children:e.jsx(b,{icon:ne})})})}),U&&e.jsxs(h,{hasValue:()=>!!a?.spacing?.padding&&Object.keys(a?.spacing?.padding).length,label:n("Padding"),onDeselect:()=>K(void 0),isShownByDefault:null!==(f=c.padding)&&void 0!==f?f:Ge.padding,className:A({"tools-panel-item-spacing":O}),panelId:r,children:[!O&&e.jsx(x,{__next40pxDefaultSize:!0,values:q,onChange:K,label:n("Padding"),sides:J,units:R,allowReset:!1,splitOnAxis:X,onMouseOver:Q,onMouseOut:we}),O&&e.jsx(Ie,{values:q,onChange:K,label:n("Padding"),sides:J,units:R,allowReset:!1,onMouseOver:Q,onMouseOut:we})]}),Z&&e.jsxs(h,{hasValue:()=>!!a?.spacing?.margin&&Object.keys(a?.spacing?.margin).length,label:n("Margin"),onDeselect:()=>ie(void 0),isShownByDefault:null!==(j=c.margin)&&void 0!==j?j:Ge.margin,className:A({"tools-panel-item-spacing":O}),panelId:r,children:[!O&&e.jsx(x,{__next40pxDefaultSize:!0,values:Y,onChange:ie,inputProps:je,label:n("Margin"),sides:ee,units:R,allowReset:!1,splitOnAxis:se,onMouseOver:ae,onMouseOut:we}),O&&e.jsx(Ie,{values:Y,onChange:ie,minimumCustomValue:-1/0,label:n("Margin"),sides:ee,units:R,allowReset:!1,onMouseOver:ae,onMouseOut:we})]}),oe&&e.jsxs(h,{hasValue:()=>!!a?.spacing?.blockGap,label:n("Block spacing"),onDeselect:()=>de(void 0),isShownByDefault:null!==(y=c.blockGap)&&void 0!==y?y:Ge.blockGap,className:A({"tools-panel-item-spacing":O,"single-column":!O&&!ce}),panelId:r,children:[!O&&(ce?e.jsx(x,{__next40pxDefaultSize:!0,label:n("Block spacing"),min:0,onChange:pe,units:R,sides:re,values:ue,allowReset:!1,splitOnAxis:ce}):e.jsx(i,{__next40pxDefaultSize:!0,label:n("Block spacing"),min:0,onChange:de,units:R,value:le})),O&&e.jsx(Ie,{label:n("Block spacing"),min:0,onChange:pe,showSideInLabel:!1,sides:ce?re:["top"],values:ue,allowReset:!1})]}),be&&e.jsx(S,{value:xe,onChange:e=>{o({...a,layout:{...e}})},parentLayout:u?.parentLayout,panelId:r,isShownByDefault:null!==(z=c.childLayout)&&void 0!==z?z:Ge.childLayout}),me&&e.jsx(h,{hasValue:()=>!!a?.dimensions?.minHeight,label:n("Minimum height"),onDeselect:()=>{he(void 0)},isShownByDefault:null!==(C=c.minHeight)&&void 0!==C?C:Ge.minHeight,panelId:r,children:e.jsx(w,{label:n("Minimum height"),value:ge,onChange:he})}),fe&&e.jsx(Me,{hasValue:()=>!!a?.dimensions?.aspectRatio,value:ve,onChange:e=>{const t=B(a,["dimensions","aspectRatio"],e);o(B(t,["dimensions","minHeight"],void 0))},panelId:r,isShownByDefault:null!==(_=c.aspectRatio)&&void 0!==_?_:Ge.aspectRatio})]})}function Te({clientId:n,value:s,computeStyle:i,forceShow:a}){const o=P(n),[l,u]=t.useReducer(()=>i(o));t.useLayoutEffect(()=>{o&&window.requestAnimationFrame(()=>window.requestAnimationFrame(u))},[o,s]);const r=t.useRef(s),[c,d]=t.useState(!1);return t.useEffect(()=>{if(y(s,r.current)||a)return;d(!0),r.current=s;const e=setTimeout(()=>{d(!1)},400);return()=>{d(!1),clearTimeout(e)}},[s,a]),c||a?e.jsx($,{clientId:n,__unstablePopoverSlot:"block-toolbar",children:e.jsx("div",{className:"block-editor__spacing-visualizer",style:l})}):null}function Ue(e,t){return e.ownerDocument.defaultView.getComputedStyle(e).getPropertyValue(t)}function qe({clientId:t,value:n,forceShow:s}){return e.jsx(Te,{clientId:t,value:n?.spacing?.margin,computeStyle:e=>{const t=Ue(e,"margin-top"),n=Ue(e,"margin-right"),s=Ue(e,"margin-bottom"),i=Ue(e,"margin-left");return{borderTopWidth:t,borderRightWidth:n,borderBottomWidth:s,borderLeftWidth:i,top:t?`-${t}`:0,right:n?`-${n}`:0,bottom:s?`-${s}`:0,left:i?`-${i}`:0}},forceShow:s})}function Je({clientId:t,value:n,forceShow:s}){return e.jsx(Te,{clientId:t,value:n?.spacing?.padding,computeStyle:e=>({borderTopWidth:Ue(e,"padding-top"),borderRightWidth:Ue(e,"padding-right"),borderBottomWidth:Ue(e,"padding-bottom"),borderLeftWidth:Ue(e,"padding-left")}),forceShow:s})}const Xe="dimensions",Ke="spacing";function Qe({children:n,resetAllFilter:s}){const i=t.useCallback(e=>{const t=e.style,n=s(t);return{...e,style:n}},[s]);return e.jsx(k,{group:"dimensions",resetAllFilter:i,children:n})}function Ze({clientId:n,name:s,setAttributes:i,settings:o}){const l=Oe(o),u=a(e=>e(W).getBlockAttributes(n)?.style,[n]),[r,c]=function(){const[e,n]=t.useState(!1),{hideBlockInterface:s,showBlockInterface:i}=C(_(W));return t.useEffect(()=>{e?s():i()},[e,i,s]),[e,n]}();if(!l)return null;const d={...N(s,[Xe,"__experimentalDefaultControls"]),...N(s,[Ke,"__experimentalDefaultControls"])};return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{as:Qe,panelId:n,settings:o,value:u,onChange:e=>{i({style:V(e)})},defaultControls:d,onVisualize:c}),!!o?.spacing?.padding&&e.jsx(Je,{forceShow:"padding"===r,clientId:n,value:u}),!!o?.spacing?.margin&&e.jsx(qe,{forceShow:"margin"===r,clientId:n,value:u})]})}function Ye(e,t="any"){const n=N(e,Xe);return!0===n||("any"===t?!(!n?.aspectRatio&&!n?.minHeight):!!n?.[t])}const et={useBlockProps:function({name:e,minHeight:t,style:n}){if(!Ye(e,"aspectRatio")||F(e,Xe,"aspectRatio"))return{};const s=A({"has-aspect-ratio":!!n?.dimensions?.aspectRatio}),i={};n?.dimensions?.aspectRatio?i.minHeight="unset":(t||n?.dimensions?.minHeight)&&(i.aspectRatio="unset");return{className:s,style:i}},attributeKeys:["minHeight","style"],hasSupport:e=>Ye(e,"aspectRatio")};function tt(){z("wp.blockEditor.__experimentalUseCustomSides",{since:"6.3",version:"6.4"})}function nt(e){const{style:t}=e;return{style:L({spacing:t?.spacing||{}})}}const st=[{value:"fill",label:g("Fill","Scale option for dimensions control"),help:n("Fill the space by stretching the content.")},{value:"contain",label:g("Contain","Scale option for dimensions control"),help:n("Fit the content to the space without clipping.")},{value:"cover",label:g("Cover","Scale option for dimensions control"),help:n("Fill the space by clipping what doesn't fit.")},{value:"none",label:g("None","Scale option for dimensions control"),help:n("Do not adjust the sizing of the content. Content that is too large will be clipped, and content that is too small will have additional padding.")},{value:"scale-down",label:g("Scale down","Scale option for dimensions control"),help:n("Scale down the content to fit the space if it is too big. Content that is too small will have additional padding.")}];function it({panelId:s,value:i,onChange:a,options:o=st,defaultValue:l=st[0].value,isShownByDefault:u=!0}){const r=null!=i?i:"fill",c=t.useMemo(()=>o.reduce((e,t)=>(e[t.value]=t.help,e),{}),[o]);return e.jsx(h,{label:n("Scale"),isShownByDefault:u,hasValue:()=>r!==l,onDeselect:()=>a(l),panelId:s,children:e.jsx(I,{__nextHasNoMarginBottom:!0,label:n("Scale"),isBlock:!0,help:c[r],value:r,onChange:a,size:"__unstable-large",children:o.map(t=>e.jsx(M,{...t},t.value))})})}const at=se(h,{target:"ef8pe3d0"})({name:"957xgf",styles:"grid-column:span 1"});function ot({panelId:t,value:s={},onChange:a=()=>{},units:o,isShownByDefault:l=!0}){var u,r;const c="auto"===s.width?"":null!==(u=s.width)&&void 0!==u?u:"",d="auto"===s.height?"":null!==(r=s.height)&&void 0!==r?r:"",p=e=>t=>{const n={...s};t?n[e]=t:delete n[e],a(n)};return e.jsxs(e.Fragment,{children:[e.jsx(at,{label:n("Width"),isShownByDefault:l,hasValue:()=>""!==c,onDeselect:p("width"),panelId:t,children:e.jsx(i,{label:n("Width"),placeholder:n("Auto"),labelPosition:"top",units:o,min:0,value:c,onChange:p("width"),size:"__unstable-large"})}),e.jsx(at,{label:n("Height"),isShownByDefault:l,hasValue:()=>""!==d,onDeselect:p("height"),panelId:t,children:e.jsx(i,{label:n("Height"),placeholder:n("Auto"),labelPosition:"top",units:o,min:0,value:d,onChange:p("height"),size:"__unstable-large"})})]})}function lt({panelId:n,value:s={},onChange:i=()=>{},aspectRatioOptions:a,defaultAspectRatio:o="auto",scaleOptions:l,defaultScale:u="fill",unitsOptions:r,tools:c=["aspectRatio","widthHeight","scale"]}){const d=void 0===s.width||"auto"===s.width?null:s.width,p=void 0===s.height||"auto"===s.height?null:s.height,m=void 0===s.aspectRatio||"auto"===s.aspectRatio?null:s.aspectRatio,g=void 0===s.scale||"fill"===s.scale?null:s.scale,[h,f]=t.useState(g),[v,b]=t.useState(m),x=d&&p?"custom":v,S=m||d&&p;return e.jsxs(e.Fragment,{children:[c.includes("aspectRatio")&&e.jsx(Me,{panelId:n,options:a,defaultValue:o,value:x,onChange:e=>{const t={...s};b(e="auto"===e?null:e),e?t.aspectRatio=e:delete t.aspectRatio,e?h?t.scale=h:(t.scale=u,f(u)):delete t.scale,"custom"!==e&&d&&p&&delete t.height,i(t)}}),c.includes("widthHeight")&&e.jsx(ot,{panelId:n,units:r,value:{width:d,height:p},onChange:({width:e,height:t})=>{const n={...s};t="auto"===t?null:t,(e="auto"===e?null:e)?n.width=e:delete n.width,t?n.height=t:delete n.height,e&&t?delete n.aspectRatio:v&&(n.aspectRatio=v),v||!!e==!!t?h?n.scale=h:(n.scale=u,f(u)):delete n.scale,i(n)}}),c.includes("scale")&&S&&e.jsx(it,{panelId:n,options:l,defaultValue:u,value:h,onChange:e=>{const t={...s};f(e="fill"===e?null:e),e?t.scale=e:delete t.scale,i(t)}})]})}export{lt as D,ve as L,Ie as S,Ee as a,Oe as b,tt as c,nt as d,me as e,de as f,fe as g,Xe as h,ce as i,Ke as j,Ze as k,et as l,ke as u};
