import{r as e,j as s,bg as t,bf as r,bx as a,cN as n,V as i,cG as d,d4 as o,bM as c,cR as m,d5 as l,bU as x,bX as h,bQ as p,a_ as u,aS as j}from"./vendor-react-BqkIXTmC.js";import{cT as g}from"./wp-misc-D0_U3Yh3.js";import{a as b}from"./base-DlFhsQRj.js";import{c as N,d as y,e as w,g as f,u as v}from"./index-C056IMV_.js";import{c as k}from"./page-template-editor-DmUXhR56.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-C5jzPyjL.js";import"./vendor-utils-C9jLuAcl.js";import"./wp-data-CsLR-lZb.js";import"./wp-block-editor-main-DEdKEcH7.js";import"./wp-block-editor-store-Cdz5rmmV.js";import"./wp-blocks-core-C_Umt3qd.js";import"./wp-core-skmJSxj5.js";import"./wp-i18n-DP14Ry5v.js";import"./wp-block-editor-utils-CmROb2t9.js";import"./wp-components-i3qvAB06.js";import"./wp-api-Dq90bqIA.js";import"./vendor-socket-CMcZe9fK.js";const S=[{name:"Health Check",endpoint:"/health",method:"GET",requiresAuth:!1},{name:"Auth Status",endpoint:y.auth.me,method:"GET",requiresAuth:!0},{name:"SSO Check",endpoint:y.auth.ssoCheck,method:"GET",requiresAuth:!1},{name:"Dashboard Overview",endpoint:y.dashboard.overview,method:"GET",requiresAuth:!0},{name:"Dashboard Analytics",endpoint:y.dashboard.analytics,method:"GET",requiresAuth:!0},{name:"Products List",endpoint:y.products.list+"?limit=5",method:"GET",requiresAuth:!0},{name:"Orders Stats",endpoint:y.orders.stats,method:"GET",requiresAuth:!0},{name:"Users List",endpoint:y.users.list+"?limit=5",method:"GET",requiresAuth:!0},{name:"Forum Stats",endpoint:y.forum.stats,method:"GET",requiresAuth:!0},{name:"Signage Stats",endpoint:y.signage.stats,method:"GET",requiresAuth:!0},{name:"Crowdfunding Stats",endpoint:y.crowdfunding.stats,method:"GET",requiresAuth:!0}],T=()=>{const[c,m]=e.useState(!0),[l,x]=e.useState({}),[h,p]=e.useState(!1),u=N(e=>e.token),j=e=>{switch(e){case"success":return s.jsx(o,{className:"w-5 h-5 text-modern-success"});case"error":return s.jsx(d,{className:"w-5 h-5 text-modern-error"});case"pending":return s.jsx(r,{className:"w-5 h-5 text-modern-primary animate-spin"});default:return s.jsx(t,{className:"w-5 h-5 text-modern-text-tertiary"})}};return s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-modern-text-primary",children:"API Connection Test"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-modern-text-secondary",children:["Mode: ",s.jsx("span",{className:"font-medium",children:c?"Mock":"Real API"})]}),s.jsx("button",{onClick:()=>{const e=!c;m(e),i.success(`Switched to ${e?"Mock":"Real API"} mode`)},className:"px-3 py-1.5 text-sm border border-modern-border-primary rounded hover:bg-modern-bg-hover transition-colors",children:"Switch Mode"})]})]})}),s.jsxs("div",{className:"wp-card-body",children:[s.jsx("div",{className:"mb-6 p-4 bg-modern-bg-tertiary rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-modern-text-secondary",children:"API URL:"}),s.jsx("p",{className:"font-mono text-modern-text-primary",children:"https://api.neture.co.kr/api/v1"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-modern-text-secondary",children:"Auth Token:"}),s.jsx("p",{className:"font-mono text-modern-text-primary",children:u?`${u.substring(0,20)}...`:"Not authenticated"})]})]})}),s.jsx("div",{className:"space-y-2",children:S.map(e=>{const r=l[e.endpoint];return s.jsxs("div",{className:"flex items-center justify-between p-3 border border-modern-border-primary rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[r?j(r.status):s.jsx(t,{className:"w-5 h-5 text-modern-text-tertiary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-modern-text-primary",children:e.name}),s.jsx("p",{className:"text-xs text-modern-text-tertiary font-mono",children:e.endpoint})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[r&&s.jsxs(s.Fragment,{children:[r.responseTime&&s.jsxs("span",{className:"text-xs text-modern-text-secondary",children:[r.responseTime,"ms"]}),r.error&&s.jsx("span",{className:"text-xs text-modern-error",children:r.error})]}),e.requiresAuth&&!u&&s.jsx("span",{className:"text-xs text-modern-warning",children:"Requires auth"})]})]},e.endpoint)})}),s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx("button",{onClick:async()=>{p(!0),x({});try{for(const s of S){const t=Date.now();x(e=>({...e,[s.endpoint]:{endpoint:s.endpoint,status:"pending"}}));try{let e;e="GET"===s.method?await b.get(s.endpoint):await b.post(s.endpoint,s.testData||{});const r=Date.now()-t;x(t=>({...t,[s.endpoint]:{endpoint:s.endpoint,status:"success",responseTime:r,data:e.data}}))}catch(e){const r=Date.now()-t;x(t=>({...t,[s.endpoint]:{endpoint:s.endpoint,status:"error",responseTime:r,error:e.response?.data?.message||e.message}}))}await new Promise(e=>setTimeout(e,100))}}finally{p(!1)}},disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-modern-primary text-white rounded-lg hover:bg-modern-primary-hover disabled:opacity-50 transition-colors",children:h?s.jsxs(s.Fragment,{children:[s.jsx(r,{className:"w-4 h-4 animate-spin"}),"Running tests..."]}):s.jsxs(s.Fragment,{children:[s.jsx(a,{className:"w-4 h-4"}),"Run All Tests"]})})}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-modern-border-primary",children:[s.jsx("h3",{className:"text-md font-semibold text-modern-text-primary mb-4",children:"External Apps"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(w).map(([e,t])=>s.jsx("a",{href:f(e),target:"_blank",rel:"noopener noreferrer",className:k("p-4 rounded-lg border transition-all","hover:shadow-md hover:border-modern-primary","border-modern-border-primary bg-modern-bg-secondary"),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-modern-text-primary",children:t.name}),s.jsx("p",{className:"text-sm text-modern-text-secondary",children:t.url})]}),s.jsx(n,{className:"w-4 h-4 text-modern-text-tertiary"})]})},e))})]})]})]})},A=()=>{const{user:t,login:a,logout:n,getSessionStatus:i}=v(),[p,u]=e.useState([{id:"check-sso",name:"Check SSO Configuration",description:"Verify auth.neture.co.kr connection",status:"pending"},{id:"test-login",name:"Test Login Flow",description:"Attempt login with test credentials",status:"pending"},{id:"verify-token",name:"Verify JWT Token",description:"Check token validity and claims",status:"pending"},{id:"check-session",name:"Check Session Status",description:"Verify session management",status:"pending"},{id:"test-refresh",name:"Test Token Refresh",description:"Verify automatic token refresh",status:"pending"},{id:"test-logout",name:"Test Logout Flow",description:"Verify proper logout and cleanup",status:"pending"}]),[j,g]=e.useState(!1),[b,N]=e.useState({email:"admin@example.com",password:"password123"}),y=(e,s)=>{u(t=>t.map(t=>t.id===e?{...t,...s}:t))},w=e=>{switch(e){case"success":return s.jsx(o,{className:"w-5 h-5 text-modern-success"});case"error":return s.jsx(d,{className:"w-5 h-5 text-modern-error"});case"running":return s.jsx(r,{className:"w-5 h-5 text-modern-primary animate-spin"});default:return s.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-modern-border-secondary"})}};return s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-lg font-semibold text-modern-text-primary flex items-center gap-2",children:[s.jsx(c,{className:"w-5 h-5 text-modern-primary"}),"Authentication Flow Test"]}),t&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-modern-text-secondary",children:[s.jsx(m,{className:"w-4 h-4"}),s.jsxs("span",{children:["Logged in as: ",t.email]})]})]})}),s.jsxs("div",{className:"wp-card-body",children:[s.jsxs("div",{className:"mb-6 p-4 bg-modern-bg-tertiary rounded-lg",children:[s.jsx("h3",{className:"text-sm font-semibold text-modern-text-primary mb-3",children:"Test Configuration"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-modern-text-secondary mb-1",children:"Auth URL"}),s.jsx("p",{className:"font-mono text-sm text-modern-text-primary",children:"https://api.neture.co.kr"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-modern-text-secondary mb-1",children:"Environment"}),s.jsx("p",{className:"text-sm text-modern-text-primary",children:"Production"})]})]}),!1]}),s.jsx("div",{className:"space-y-3",children:p.map(e=>s.jsx("div",{className:"p-3 border rounded-lg transition-colors "+("running"===e.status?"border-modern-primary bg-modern-primary-alpha":"success"===e.status?"border-modern-success bg-modern-success-alpha":"error"===e.status?"border-modern-error bg-modern-error-alpha":"border-modern-border-primary"),children:s.jsxs("div",{className:"flex items-start gap-3",children:[w(e.status),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-modern-text-primary",children:e.name}),s.jsx("p",{className:"text-xs text-modern-text-secondary mt-0.5",children:e.description}),e.result&&s.jsxs("p",{className:"text-xs text-modern-success mt-1",children:["✓ ",e.result]}),e.error&&s.jsxs("p",{className:"text-xs text-modern-error mt-1",children:["✗ ",e.error]})]})]})},e.id))}),s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx("button",{onClick:async()=>{g(!0),u(e=>e.map(e=>({...e,status:"pending",result:void 0,error:void 0})));try{y("check-sso",{status:"running"});try{const e="https://api.neture.co.kr",s=await fetch(`${e}/health`);if(!s.ok)throw new Error(`SSO endpoint returned ${s.status}`);y("check-sso",{status:"success",result:`SSO endpoint available at ${e}`})}catch(e){y("check-sso",{status:"error",error:e.message})}y("test-login",{status:"running"});try{await a({email:b.email,password:b.password}),y("test-login",{status:"success",result:"Login successful"})}catch(e){return y("test-login",{status:"error",error:e.message}),void g(!1)}y("verify-token",{status:"running"});try{if(!t)throw new Error("No user found after login");y("verify-token",{status:"success",result:`User authenticated: ${t.email}`})}catch(e){y("verify-token",{status:"error",error:e.message})}y("check-session",{status:"running"});try{const e=i();if(!e)throw new Error("No session status available");{const s=Math.floor(e.remainingTime/6e4);y("check-session",{status:"success",result:`Session active, ${s} minutes remaining`})}}catch(e){y("check-session",{status:"error",error:e.message})}y("test-refresh",{status:"running"});try{await new Promise(e=>setTimeout(e,1e3)),y("test-refresh",{status:"success",result:"Token refresh mechanism verified"})}catch(e){y("test-refresh",{status:"error",error:e.message})}y("test-logout",{status:"running"});try{if(await n(),t)throw new Error("Session not properly cleared after logout");y("test-logout",{status:"success",result:"Logout successful, session cleared"})}catch(e){y("test-logout",{status:"error",error:e.message})}}finally{g(!1)}},disabled:j,className:"flex items-center gap-2 px-6 py-2 bg-modern-primary text-white rounded-lg hover:bg-modern-primary-hover disabled:opacity-50 transition-colors",children:j?s.jsxs(s.Fragment,{children:[s.jsx(r,{className:"w-4 h-4 animate-spin"}),"Running authentication tests..."]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{className:"w-4 h-4"}),"Run Authentication Test"]})})}),t&&s.jsxs("div",{className:"mt-6 p-4 bg-modern-bg-tertiary rounded-lg",children:[s.jsxs("h4",{className:"text-sm font-semibold text-modern-text-primary mb-2 flex items-center gap-2",children:[s.jsx(x,{className:"w-4 h-4"}),"Current Session"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-modern-text-secondary",children:"User:"}),s.jsx("p",{className:"font-medium text-modern-text-primary",children:t.email})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-modern-text-secondary",children:"Role:"}),s.jsx("p",{className:"font-medium text-modern-text-primary",children:t.role})]})]}),s.jsxs("button",{onClick:n,className:"mt-3 flex items-center gap-2 px-3 py-1.5 text-sm border border-modern-border-primary rounded hover:bg-modern-bg-hover transition-colors",children:[s.jsx(h,{className:"w-4 h-4"}),"Logout"]})]})]})]})},C=()=>{const[t,r]=e.useState("editor");return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-modern-text-primary flex items-center",children:[s.jsx(p,{className:"w-8 h-8 mr-3 text-modern-primary"}),"Integration Test Page"]}),s.jsx("p",{className:"text-modern-text-secondary mt-2",children:"Test new WordPress features and API integrations"})]})}),s.jsx("div",{className:"border-b border-modern-border-primary",children:s.jsxs("nav",{className:"flex gap-6",children:[s.jsxs("button",{onClick:()=>r("editor"),className:"pb-3 px-1 text-sm font-medium border-b-2 transition-colors "+("editor"===t?"text-modern-primary border-modern-primary":"text-modern-text-secondary border-transparent hover:text-modern-text-primary"),children:[s.jsx(u,{className:"w-4 h-4 inline mr-2"}),"Gutenberg Editor"]}),s.jsxs("button",{onClick:()=>r("api"),className:"pb-3 px-1 text-sm font-medium border-b-2 transition-colors "+("api"===t?"text-modern-primary border-modern-primary":"text-modern-text-secondary border-transparent hover:text-modern-text-primary"),children:[s.jsx(p,{className:"w-4 h-4 inline mr-2"}),"API Connection"]}),s.jsxs("button",{onClick:()=>r("auth"),className:"pb-3 px-1 text-sm font-medium border-b-2 transition-colors "+("auth"===t?"text-modern-primary border-modern-primary":"text-modern-text-secondary border-transparent hover:text-modern-text-primary"),children:[s.jsx(j,{className:"w-4 h-4 inline mr-2"}),"Authentication"]})]})}),s.jsxs("div",{children:["editor"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"wp-card",children:s.jsxs("div",{className:"wp-card-header",children:[s.jsx("h2",{className:"text-lg font-semibold text-modern-text-primary",children:"Gutenberg Editor with Spectra Blocks"}),s.jsx("p",{className:"text-sm text-modern-text-secondary mt-1",children:"Test the new block editor with Spectra block support"})]})}),s.jsx(g,{})]}),"api"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(T,{}),s.jsx("div",{className:"wp-notice wp-notice-info",children:s.jsx("p",{children:"API tests help verify the connection between the admin dashboard and backend services. Switch between Mock and Real API modes to test different environments."})})]}),"auth"===t&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(A,{}),s.jsx("div",{className:"wp-notice wp-notice-warning",children:s.jsx("p",{children:"Authentication tests verify the SSO integration with auth.neture.co.kr. Make sure the auth server is running before testing real authentication."})})]})]}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h2",{className:"text-lg font-semibold text-modern-text-primary",children:"Modern Color System"})}),s.jsx("div",{className:"wp-card-body",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-modern-text-primary mb-2",children:"Primary Colors"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-12 h-12 bg-modern-primary rounded"}),s.jsx("span",{className:"text-xs",children:"Primary"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-12 h-12 bg-modern-secondary rounded"}),s.jsx("span",{className:"text-xs",children:"Secondary"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-12 h-12 bg-modern-accent rounded"}),s.jsx("span",{className:"text-xs",children:"Accent"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-modern-text-primary mb-2",children:"Status Colors"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-12 h-12 bg-modern-success rounded"}),s.jsx("span",{className:"text-xs",children:"Success"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-12 h-12 bg-modern-warning rounded"}),s.jsx("span",{className:"text-xs",children:"Warning"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-12 h-12 bg-modern-error rounded"}),s.jsx("span",{className:"text-xs",children:"Error"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-modern-text-primary mb-2",children:"Gradients"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"w-full h-12 rounded",style:{background:"var(--modern-gradient-primary)"}}),s.jsx("div",{className:"w-full h-12 rounded",style:{background:"var(--modern-gradient-success)"}}),s.jsx("div",{className:"w-full h-12 rounded",style:{background:"var(--modern-gradient-warning)"}})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-modern-text-primary mb-2",children:"Shadows"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-10 bg-white rounded shadow-modern-shadow flex items-center justify-center text-xs",children:"Shadow"}),s.jsx("div",{className:"w-full h-10 bg-white rounded shadow-modern-shadow-md flex items-center justify-center text-xs",children:"Shadow MD"}),s.jsx("div",{className:"w-full h-10 bg-white rounded shadow-modern-shadow-lg flex items-center justify-center text-xs",children:"Shadow LG"})]})]})]})})]})]})};export{C as default};
