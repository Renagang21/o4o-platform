{"version":3,"file":"Media--wF89kmR.js","sources":["../../src/pages/media/MediaUpload.tsx","../../src/pages/media/Media.tsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AdminBreadcrumb from '@/components/common/AdminBreadcrumb';\nimport { authClient } from '@o4o/auth-client';\nimport toast from 'react-hot-toast';\n\nconst MediaUpload: React.FC = () => {\n  const navigate = useNavigate();\n  const [isDragging, setIsDragging] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleDrop = async (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    \n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      await uploadFiles(files);\n    }\n  };\n\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      const files = Array.from(e.target.files);\n      await uploadFiles(files);\n    }\n  };\n\n  const uploadFiles = async (files: File[]) => {\n    setUploading(true);\n    let successCount = 0;\n\n    for (const file of files) {\n      try {\n        const formData = new FormData();\n        formData.append('file', file);\n        formData.append('title', file.name.replace(/\\.[^/.]+$/, ''));\n\n        await authClient.api.post('/v1/content/media/upload', formData, {\n          headers: { 'Content-Type': 'multipart/form-data' },\n        });\n        successCount++;\n      } catch (error) {\n        toast.error(`Failed to upload ${file.name}`);\n      }\n    }\n\n    setUploading(false);\n    \n    if (successCount > 0) {\n      toast.success(`${successCount} file${successCount > 1 ? 's' : ''} uploaded`);\n      setTimeout(() => navigate('/media'), 1000);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b px-8 py-3\">\n        <AdminBreadcrumb \n          items={[\n            { label: 'Dashboard', path: '/' },\n            { label: 'Media', path: '/media' },\n            { label: 'Add New' }\n          ]}\n        />\n      </div>\n\n      <div className=\"px-8 py-6\">\n        <h1 className=\"text-2xl font-normal mb-6\">Upload New Media</h1>\n        \n        {/* WordPress-style upload area */}\n        <div\n          onDrop={handleDrop}\n          onDragOver={(e) => { e.preventDefault(); setIsDragging(true); }}\n          onDragLeave={() => setIsDragging(false)}\n          className=\"bg-white border-4 border-dashed rounded-lg p-24 text-center transition-colors\"\n          style={{\n            borderColor: isDragging ? '#2563eb' : '#d1d5db',\n            backgroundColor: isDragging ? '#f0f9ff' : '#fff'\n          }}\n        >\n          <h2 className=\"text-xl font-normal mb-4\">\n            Drop files to upload\n          </h2>\n          <p className=\"text-lg mb-6 text-gray-600\">or</p>\n          <button\n            onClick={() => fileInputRef.current?.click()}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n            disabled={uploading}\n          >\n            {uploading ? 'Uploading...' : 'Select Files'}\n          </button>\n          <p className=\"mt-8 text-sm text-gray-500\">\n            Maximum upload file size: 50 MB\n          </p>\n        </div>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          multiple\n          className=\"hidden\"\n          onChange={handleFileSelect}\n          accept=\"image/*,video/*,audio/*,application/pdf,.txt,.md,.json,.doc,.docx,.csv\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default MediaUpload;","import { FC } from 'react';\nimport { Routes, Route } from 'react-router-dom'\nimport MediaListWordPress from './MediaListWordPress'\nimport MediaUpload from './MediaUpload'\n\nconst Media: FC = () => {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<MediaListWordPress />} />\n      <Route path=\"/library\" element={<MediaListWordPress />} />\n      <Route path=\"/upload\" element={<MediaUpload />} />\n      <Route path=\"/new\" element={<MediaUpload />} />\n    </Routes>\n  )\n}\n\nexport default Media"],"names":["MediaUpload","navigate","useNavigate","isDragging","setIsDragging","useState","uploading","setUploading","fileInputRef","useRef","handleDrop","e","files","uploadFiles","handleFileSelect","successCount","file","formData","authClient","toast","jsxs","jsx","AdminBreadcrumb","Media","Routes","Route","MediaListWordPress"],"mappings":"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"}