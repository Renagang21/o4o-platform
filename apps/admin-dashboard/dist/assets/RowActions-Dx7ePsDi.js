import{r as c,j as l,cr as j}from"./vendor-react-CPLvoCm3.js";import{a as w}from"./main-pecHBbtw.js";import{B as v}from"./page-gutenberg-DLeK6fOm.js";import{c as x}from"./vendor-ui-BkLtITBR.js";function C({items:a,idField:t="id",actions:m}){const[s,o]=c.useState(new Set),[e,d]=c.useState(!1),{success:f,error:r}=w(),h=c.useMemo(()=>a.length===0?!1:a.every(n=>s.has(String(n[t]))),[a,s,t]),b=c.useMemo(()=>a.length===0?!1:a.some(n=>s.has(String(n[t])))&&!h,[a,s,t,h]),S=c.useCallback(()=>{if(h)o(new Set);else{const n=new Set(a.map(i=>String(i[t])));o(n)}},[a,t,h]),g=c.useCallback(n=>{o(i=>{const u=new Set(i);return u.has(n)?u.delete(n):u.add(n),u})},[]),p=c.useCallback(()=>{o(new Set)},[]),k=c.useCallback(async n=>{const i=m.find(u=>u.value===n);if(!i){r("Invalid action selected");return}if(s.size===0){r("No items selected");return}if(!(i.confirmMessage&&!window.confirm(i.confirmMessage.replace("{count}",String(s.size))))){d(!0);try{await i.action(Array.from(s)),f(`${i.label} applied to ${s.size} item(s)`),p()}catch(u){r(`Failed to apply ${i.label}: ${u instanceof Error?u.message:"Unknown error"}`)}finally{d(!1)}}},[m,s,f,r,p]);return{selectedIds:s,selectedCount:s.size,isAllSelected:h,isSomeSelected:b,isProcessing:e,toggleAll:S,toggleItem:g,clearSelection:p,executeBulkAction:k,isSelected:n=>s.has(n)}}const D=({actions:a,selectedCount:t,onActionExecute:m,isProcessing:s=!1,position:o="top"})=>{const[e,d]=c.useState(""),f=()=>{e&&(m(e),d(""))};return l.jsx("div",{className:`tablenav ${o}`,children:l.jsxs("div",{className:"alignleft actions bulkactions",children:[l.jsx("label",{htmlFor:`bulk-action-selector-${o}`,className:"screen-reader-text",children:"Select bulk action"}),l.jsxs("select",{id:`bulk-action-selector-${o}`,name:"action",value:e,onChange:r=>d(r.target.value),disabled:s,children:[l.jsx("option",{value:"",children:"Bulk actions"}),a.map(r=>l.jsx("option",{value:r.value,children:r.label},r.value))]}),l.jsx(v,{className:"button action",onClick:f,disabled:!e||t===0||s,children:s?"Processing...":"Apply"}),t>0&&l.jsxs("span",{className:"selected-count",children:[t," item",t!==1?"s":""," selected"]})]})})},$=({actions:a,visible:t=!1})=>{const[m,s]=c.useState(t),o=c.useRef(null);return c.useEffect(()=>{s(t)},[t]),l.jsx("div",{ref:o,className:x("row-actions",!m&&"hidden"),children:a.map((e,d)=>{const f=d===a.length-1;return e.href?l.jsxs("span",{children:[l.jsx(j,{to:e.href,className:x("row-action-link",e.isDelete&&"text-red-600 hover:text-red-800",e.isDisabled&&"opacity-50 cursor-not-allowed",e.className),onClick:e.isDisabled?r=>r.preventDefault():void 0,children:e.label}),!f&&l.jsx("span",{className:"text-gray-400 mx-1",children:"|"})]},d):l.jsxs("span",{children:[l.jsx("button",{onClick:e.onClick,disabled:e.isDisabled,className:x("row-action-button",e.isDelete&&"text-red-600 hover:text-red-800",e.isDisabled&&"opacity-50 cursor-not-allowed",e.className),children:e.label}),!f&&l.jsx("span",{className:"text-gray-400 mx-1",children:"|"})]},d)})})};export{D as B,$ as R,C as u};
