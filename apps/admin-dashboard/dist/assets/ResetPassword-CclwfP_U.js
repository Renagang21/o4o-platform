import{u as e,cI as s,r as t,j as r,bV as a,cu as l,bU as i,cJ as o,cK as n,E as c}from"./vendor-react-BQ6HOJoh.js";import"./wp-block-editor-a11y-DrduSWFW.js";import"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-api-Buev8_QU.js";import"./wp-block-editor-utils-M5qXzE1L.js";import"./wp-block-editor-colors-D38h-Odz.js";import"./wp-blocks-core-6vwQKPfS.js";import"./wp-block-editor-clipboard-Dg0Y1gQ6.js";import"./wp-misc-DS9m4_P2.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-LYSOqK5P.js";import"./page-template-editor-C7FodHrK.js";import"./vendor-utils-D-spY-QM.js";import"./wp-core-Y-jV-nrZ.js";import"./wp-block-editor-keyboard-CeHTtvP5.js";import"./wp-data-BmtL8k4r.js";import"./wp-block-editor-store-B-g1aSix.js";import"./wp-block-editor-dnd-BYoS8-II.js";import"./wp-block-editor-library-BpQvynjE.js";import"./wp-block-editor-menus-BTQ2wZ-f.js";import"./wp-block-editor-typography-Bl_1REQP.js";import"./wp-block-editor-spacing-BD_2CpN7.js";import"./wp-block-editor-core-DL280tSA.js";import"./wp-block-editor-selection-CC4tJpUu.js";import"./wp-block-editor-formats-CLXkimOp.js";import"./wp-block-editor-inline-CpXpUhQU.js";import"./wp-block-editor-ui-B8YE_4QL.js";import"./wp-block-editor-transforms-jLcKa8Hv.js";import"./wp-block-editor-preview-iw2Xu1ib.js";import"./wp-block-editor-global-styles-CV5-K6QF.js";import"./wp-block-editor-borders-BH1devca.js";import"./wp-block-editor-patterns-BXdHo9lm.js";import"./wp-block-editor-navigation-BFSoKzg0.js";import"./wp-block-editor-media-Bg-JiQDT.js";import"./wp-api-BeoadipR.js";import"./wp-i18n-DGPtqsXY.js";import"./vendor-monaco-BxJH8uUv.js";import"./wp-block-editor-upload-BLw1R9wP.js";import"./wp-block-editor-templates-o1_wAMb9.js";import"./wp-components-CeQNCpMW.js";const d=()=>{const d=e(),[m]=s(),p=m.get("token"),[x,u]=t.useState(""),[j,h]=t.useState(""),[b,g]=t.useState(!1),[f,w]=t.useState(!1),[y,N]=t.useState(!1),[v,k]=t.useState(!1),[S,C]=t.useState(""),[z,$]=t.useState([]);t.useEffect(()=>{p||C("유효하지 않은 비밀번호 재설정 링크입니다.")},[p]);const q=()=>{const e=[];return x.length<8&&e.push("비밀번호는 최소 8자 이상이어야 합니다."),/[A-Z]/.test(x)||e.push("대문자를 하나 이상 포함해야 합니다."),/[a-z]/.test(x)||e.push("소문자를 하나 이상 포함해야 합니다."),/[0-9]/.test(x)||e.push("숫자를 하나 이상 포함해야 합니다."),/[!@#$%^&*]/.test(x)||e.push("특수문자(!@#$%^&*)를 하나 이상 포함해야 합니다."),x!==j&&e.push("비밀번호가 일치하지 않습니다."),$(e),0===e.length};return v?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(a,{className:"mx-auto h-12 w-12 text-green-500"}),r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"비밀번호가 재설정되었습니다"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"새로운 비밀번호로 로그인할 수 있습니다."}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"잠시 후 로그인 페이지로 이동합니다..."})]}),r.jsx("div",{className:"mt-8",children:r.jsx(l,{to:"/login",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue",children:"지금 로그인하기"})})]})}):p?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"새 비밀번호 설정"}),r.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"안전한 새 비밀번호를 입력해주세요."})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:async e=>{if(e.preventDefault(),q()){C(""),N(!0);try{const e="https://api.neture.co.kr/api/v1",s=await fetch(`${e}/auth/v2/reset-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:p,password:x})}),t=await s.json();s.ok?(k(!0),setTimeout(()=>{d("/login")},3e3)):C(t.error||"비밀번호 재설정에 실패했습니다.")}catch(s){C("서버와의 연결에 실패했습니다. 잠시 후 다시 시도해주세요.")}finally{N(!1)}}},children:[S&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx(i,{className:"h-5 w-5 text-red-400"}),r.jsx("div",{className:"ml-3",children:r.jsx("h3",{className:"text-sm font-medium text-red-800",children:S})})]})}),z.length>0&&r.jsx("div",{className:"rounded-md bg-yellow-50 p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx(i,{className:"h-5 w-5 text-yellow-400"}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"비밀번호 요구사항"}),r.jsx("ul",{className:"mt-2 text-sm text-yellow-700 list-disc list-inside",children:z.map((e,s)=>r.jsx("li",{children:e},s))})]})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"새 비밀번호"}),r.jsxs("div",{className:"mt-1 relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(o,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"password",name:"password",type:b?"text":"password",autoComplete:"new-password",required:!0,value:x,onChange:e=>{u(e.target.value),z.length>0&&q()},className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-admin-blue focus:border-admin-blue focus:z-10 sm:text-sm",placeholder:"새 비밀번호",disabled:y}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>g(!b),children:b?r.jsx(n,{className:"h-5 w-5 text-gray-400"}):r.jsx(c,{className:"h-5 w-5 text-gray-400"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"비밀번호 확인"}),r.jsxs("div",{className:"mt-1 relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(o,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:f?"text":"password",autoComplete:"new-password",required:!0,value:j,onChange:e=>{h(e.target.value),z.length>0&&q()},className:"appearance-none relative block w-full px-3 py-2 pl-10 pr-10 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-admin-blue focus:border-admin-blue focus:z-10 sm:text-sm",placeholder:"비밀번호 확인",disabled:y}),r.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>w(!f),children:f?r.jsx(n,{className:"h-5 w-5 text-gray-400"}):r.jsx(c,{className:"h-5 w-5 text-gray-400"})})]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"비밀번호 요구사항:"}),r.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[r.jsx("li",{className:x.length>=8?"text-green-600":"",children:"• 최소 8자 이상"}),r.jsx("li",{className:/[A-Z]/.test(x)?"text-green-600":"",children:"• 대문자 포함"}),r.jsx("li",{className:/[a-z]/.test(x)?"text-green-600":"",children:"• 소문자 포함"}),r.jsx("li",{className:/[0-9]/.test(x)?"text-green-600":"",children:"• 숫자 포함"}),r.jsx("li",{className:/[!@#$%^&*]/.test(x)?"text-green-600":"",children:"• 특수문자 포함 (!@#$%^&*)"}),r.jsx("li",{className:x&&x===j?"text-green-600":"",children:"• 비밀번호 일치"})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:y||!x||!j,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue disabled:opacity-50 disabled:cursor-not-allowed",children:y?r.jsx("span",{children:"비밀번호 재설정 중..."}):r.jsx("span",{children:"비밀번호 재설정"})})})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(i,{className:"mx-auto h-12 w-12 text-red-500"}),r.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"유효하지 않은 링크"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"비밀번호 재설정 링크가 유효하지 않거나 만료되었습니다."})]}),r.jsx("div",{className:"mt-8",children:r.jsx(l,{to:"/forgot-password",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-admin-blue hover:bg-admin-blue-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-admin-blue",children:"비밀번호 재설정 다시 요청하기"})})]})})};export{d as default};
