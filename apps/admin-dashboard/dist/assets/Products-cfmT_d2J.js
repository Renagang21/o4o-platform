import{j as e,a1 as M,r as d,U,cI as _,x as z,S as F,co as Q,G as W,L as K,bB as N,E as V,J as G,y as R,z as T}from"./vendor-react-BZRIq8oW.js";import{u as q,a as J,b as O}from"./useProducts-DiDZ_MeD.js";import{c as b,B as f,H as w}from"./page-gutenberg-iVBL5IS_.js";import"./wp-block-editor-C14Ds6es.js";import"./wp-blocks-CnCGET8b.js";import"./wp-core-BctBwZpo.js";import"./wp-i18n-Niz9RVma.js";import"./wp-element-CB9_H0_F.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-query-GrNIwsDq.js";import"./ecommerceApi-BLPvKjQZ.js";import"./unified-client-Du7SbmdK.js";import"./vendor-utils-DQ8F5vJI.js";import"./main-leEspGRm.js";import"./vendor-socket-Ch6lN7-G.js";import"./wp-components-CLkQS2qf.js";const k=({icon:t,title:l,description:n,action:a,secondaryAction:i,className:r,children:c})=>e.jsxs("div",{className:b("empty-state",r),children:[t&&e.jsx("div",{className:"empty-state-icon",children:typeof t=="function"?e.jsx(t,{className:"w-full h-full"}):t}),e.jsx("h2",{className:"empty-state-title",children:l}),n&&e.jsx("p",{className:"empty-state-description",children:n}),c,(a||i)&&e.jsxs("div",{className:"empty-state-actions",children:[a&&e.jsxs(f,{onClick:a.onClick,className:b(a.variant==="secondary"?"empty-state-action-secondary":"empty-state-action-primary"),children:[a.icon&&e.jsx("span",{className:"mr-2",children:a.icon}),a.label]}),i&&e.jsxs(f,{onClick:i.onClick,className:"empty-state-action-secondary",variant:"outline",children:[i.icon&&e.jsx("span",{className:"mr-2",children:i.icon}),i.label]})]})]}),X=({title:t="데이터가 없습니다",description:l="아직 등록된 항목이 없습니다. 새로운 항목을 추가해보세요.",onAdd:n})=>e.jsx(k,{icon:()=>e.jsx("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),title:t,description:l,action:n?{label:"새로 추가",onClick:n,icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}:void 0}),Y=({searchTerm:t,onClear:l})=>e.jsx(k,{icon:()=>e.jsx("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),title:"검색 결과가 없습니다",description:t?`"${t}"에 대한 검색 결과를 찾을 수 없습니다.`:"다른 검색어를 시도해보세요.",action:l?{label:"검색 초기화",onClick:l,variant:"secondary"}:void 0}),Z=({title:t="데이터를 불러오는 중...",description:l="잠시만 기다려주세요."})=>e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-700",children:t}),l&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l})]}),pe=()=>{const t=M(),[l,n]=d.useState("grid"),[a,i]=d.useState(1),[r,c]=d.useState({}),[x,j]=d.useState(""),[p,m]=d.useState([]),[y,C]=d.useState(!1),{data:u,isLoading:S}=q(a,20,{...r,search:x}),P=J(),L=O(),h=u?.data||[],g=Math.ceil((u?.total||0)/20),$=s=>{s.preventDefault(),i(1)},v=async s=>{window.confirm("정말로 이 상품을 삭제하시겠습니까?")&&await P.mutateAsync(s)},D=async s=>{await L.mutateAsync(s)},E=({product:s})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-t-lg bg-gray-200",children:s.images&&s.images[0]?e.jsx("img",{src:s.images[0].url,alt:s.name,className:"object-cover object-center"}):e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx(N,{className:"w-12 h-12 text-gray-400"})})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:s.name}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:[e.jsxs("button",{onClick:()=>t(`/ecommerce/products/${s.id}/edit`),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:[e.jsx(G,{className:"w-4 h-4 inline mr-2"}),"편집"]}),e.jsxs("button",{onClick:()=>D(s.id),className:"block w-full text-left px-4 py-2 text-sm hover:bg-gray-100",children:[e.jsx(R,{className:"w-4 h-4 inline mr-2"}),"복제"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>v(s.id),className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[e.jsx(T,{className:"w-4 h-4 inline mr-2"}),"삭제"]})]})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["SKU: ",s.sku]}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-lg font-semibold",children:w(s.retailPrice||0)}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${s.stockQuantity>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.stockQuantity>0?`재고: ${s.stockQuantity}`:"품절"})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status==="active"?"판매중":s.status==="draft"?"임시저장":"비공개"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:s.type==="simple"?"단순상품":s.type==="variable"?"가변상품":"기타"})]})]})]}),B=({product:s})=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:p.includes(s.id),onChange:o=>{o.target.checked?m([...p,s.id]):m(p.filter(H=>H!==s.id))},className:"rounded"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:s.images&&s.images[0]?e.jsx("img",{className:"h-10 w-10 rounded object-cover",src:s.images[0].url,alt:s.name}):e.jsx("div",{className:"h-10 w-10 rounded bg-gray-200 flex items-center justify-center",children:e.jsx(N,{className:"w-5 h-5 text-gray-400"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["SKU: ",s.sku]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.status==="active"?"판매중":s.status==="draft"?"임시저장":"비공개"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w(s.retailPrice||0)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.stockQuantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.categories?.[0]?.name||"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>t(`/ecommerce/products/${s.id}/edit`),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"편집"}),e.jsx("button",{onClick:()=>v(s.id),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]});return e.jsx("div",{className:"products-page",style:{position:"relative",zIndex:1,backgroundColor:"#f1f1f1",minHeight:"100vh"},children:e.jsxs("div",{className:"space-y-6",style:{padding:"20px",maxWidth:"100%",margin:"0 auto"},children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"상품 관리"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["총 ",u?.total||0,"개의 상품이 등록되어 있습니다"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"가져오기"]}),e.jsxs("button",{className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),"내보내기"]}),e.jsxs("button",{onClick:()=>t("/ecommerce/products/new"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"상품 추가"]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("form",{onSubmit:$,className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:x,onChange:s=>j(s.target.value),placeholder:"상품명, SKU로 검색...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>C(!y),className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"필터"]}),e.jsxs("div",{className:"flex border rounded-lg",children:[e.jsx("button",{onClick:()=>n("grid"),className:`p-2 ${l==="grid"?"bg-gray-100":"hover:bg-gray-50"}`,children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>n("list"),className:`p-2 ${l==="list"?"bg-gray-100":"hover:bg-gray-50"}`,children:e.jsx(K,{className:"w-4 h-4"})})]})]})]}),y&&e.jsxs("div",{className:"border-t pt-4 grid grid-cols-4 gap-4",children:[e.jsxs("select",{value:r.status||"",onChange:s=>c({...r,status:s.target.value||void 0}),className:"border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"모든 상태"}),e.jsx("option",{value:"active",children:"판매중"}),e.jsx("option",{value:"inactive",children:"판매중지"})]}),e.jsxs("select",{value:r.type||"",onChange:s=>c({...r,type:s.target.value||void 0}),className:"border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"모든 유형"}),e.jsx("option",{value:"physical",children:"실물"}),e.jsx("option",{value:"digital",children:"디지털"}),e.jsx("option",{value:"service",children:"서비스"})]}),e.jsx("select",{value:r.category||"",onChange:s=>c({...r,category:s.target.value}),className:"border rounded-lg px-3 py-2",children:e.jsx("option",{value:"",children:"모든 카테고리"})}),e.jsxs("select",{value:r.stockStatus||"",onChange:s=>c({...r,stockStatus:s.target.value||void 0}),className:"border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"재고 상태"}),e.jsx("option",{value:"in_stock",children:"재고 있음"}),e.jsx("option",{value:"out_of_stock",children:"품절"}),e.jsx("option",{value:"low_stock",children:"재고 부족"})]})]})]}),S?e.jsx(Z,{title:"상품을 불러오는 중...",description:"잠시만 기다려주세요"}):h.length===0?x?e.jsx(Y,{searchTerm:x,onClear:()=>j("")}):e.jsx(X,{title:"등록된 상품이 없습니다",description:"첫 번째 상품을 등록하여 판매를 시작해보세요",onAdd:()=>t("/ecommerce/products/new")}):l==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:h.map(s=>e.jsx(E,{product:s},s.id))}):e.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",onChange:s=>{s.target.checked?m(h.map(o=>o.id)):m([])},className:"rounded"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"재고"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"카테고리"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"작업"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(s=>e.jsx(B,{product:s},s.id))})]})}),g>1&&e.jsx("div",{className:"flex justify-center",children:e.jsxs("nav",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>i(Math.max(1,a-1)),disabled:a===1,className:"px-3 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"이전"}),Array.from({length:g},(s,o)=>o+1).map(s=>e.jsx("button",{onClick:()=>i(s),className:`px-3 py-2 border rounded-lg ${a===s?"bg-blue-600 text-white":"hover:bg-gray-50"}`,children:s},s)),e.jsx("button",{onClick:()=>i(Math.min(g,a+1)),disabled:a===g,className:"px-3 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"다음"})]})})]})})};export{pe as default};
