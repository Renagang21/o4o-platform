import{a3 as e,r as s,j as a,bF as t,P as r,bR as n,w as l,S as i,cj as c,c5 as d,Y as m}from"./vendor-react-B2e3hjul.js";import{a as o}from"./vendor-query-gT6dZ-b7.js";import{B as x,C as h,m as j,s as p,I as u,k as g,l as N,j as v}from"./page-gutenberg-C_zDdNV3.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-utils-B-KQWpLj.js";import"./wp-all-B6DO5GFQ.js";const y=()=>{const y=e(),[f,b]=s.useState(""),[w,C]=s.useState("all"),[P,k]=s.useState(1),{data:M,isLoading:S}=o({queryKey:["crowdfunding-projects",{search:f,status:w,page:P,limit:12}],queryFn:async()=>{const e={page:P,limit:12,...f&&{search:f},..."all"!==w&&{status:w}},s=new URLSearchParams(Object.entries(e).reduce((e,[s,a])=>(void 0!==a&&(e[s]=String(a)),e),{})).toString();return(await v.api.get(`/v1/crowdfunding-simple/projects?${s}`)).data}}),q=M?.data||[],z=M?.pagination,{data:D}=o({queryKey:["crowdfunding-stats"],queryFn:async()=>(await v.api.get("/v1/crowdfunding-simple/dashboard/stats")).data}),L=D?.data,$=e=>{const s={recruiting:{label:"모집중",variant:"default",color:"bg-blue-500"},in_progress:{label:"진행중",variant:"secondary",color:"bg-yellow-500"},completed:{label:"완료",variant:"outline",color:"bg-green-500"},cancelled:{label:"중단",variant:"destructive",color:"bg-red-500"}},t=s[e]||s.recruiting;return a.jsx(p,{variant:t.variant,children:t.label})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-modern-text-primary flex items-center gap-2",children:[a.jsx(t,{className:"w-8 h-8 text-modern-primary"}),"크라우드펀딩 프로젝트"]}),a.jsx("p",{className:"text-modern-text-secondary mt-1",children:"제품 개발사와 판매자를 연결하여 비용을 절감하는 B2B 크라우드펀딩"})]}),a.jsxs(x,{onClick:()=>y("/crowdfunding/projects/new"),children:[a.jsx(r,{className:"w-4 h-4 mr-2"}),"새 프로젝트"]})]}),L&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(h,{children:a.jsx(j,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-modern-text-secondary",children:"전체 프로젝트"}),a.jsx("p",{className:"text-2xl font-bold text-modern-text-primary",children:L.totalProjects})]}),a.jsx(t,{className:"w-8 h-8 text-modern-primary opacity-20"})]})})}),a.jsx(h,{children:a.jsx(j,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-modern-text-secondary",children:"활성 프로젝트"}),a.jsx("p",{className:"text-2xl font-bold text-modern-primary",children:L.activeProjects})]}),a.jsx(n,{className:"w-8 h-8 text-modern-warning opacity-20"})]})})}),a.jsx(h,{children:a.jsx(j,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-modern-text-secondary",children:"완료 프로젝트"}),a.jsx("p",{className:"text-2xl font-bold text-modern-primary",children:L.completedProjects})]}),a.jsx(p,{className:"w-8 h-8 text-modern-success opacity-20"})]})})}),a.jsx(h,{children:a.jsx(j,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-modern-text-secondary",children:"성공률"}),a.jsxs("p",{className:"text-2xl font-bold text-modern-text-primary",children:[L.successRate,"%"]})]}),a.jsx(l,{className:"w-8 h-8 text-modern-primary opacity-20"})]})})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("form",{onSubmit:e=>{e.preventDefault(),k(1)},className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-modern-text-tertiary w-5 h-5"}),a.jsx(u,{type:"text",placeholder:"프로젝트명, 설명, 개발사명으로 검색...",value:f,onChange:e=>b(e.target.value),className:"pl-10"})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(c,{className:"w-5 h-5 text-modern-text-secondary"}),a.jsxs("select",{value:w,onChange:e=>{C(e.target.value),k(1)},className:"px-4 py-2 border border-modern-border-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-modern-primary",children:[a.jsx("option",{value:"all",children:"모든 상태"}),a.jsx("option",{value:"recruiting",children:"모집중"}),a.jsx("option",{value:"in_progress",children:"진행중"}),a.jsx("option",{value:"completed",children:"완료"}),a.jsx("option",{value:"cancelled",children:"중단"})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[S?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,s)=>a.jsx(h,{className:"animate-pulse",children:a.jsx(j,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-4 bg-modern-bg-tertiary rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-modern-bg-tertiary rounded w-1/2"}),a.jsx("div",{className:"h-20 bg-modern-bg-tertiary rounded"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("div",{className:"h-3 bg-modern-bg-tertiary rounded w-1/4"}),a.jsx("div",{className:"h-3 bg-modern-bg-tertiary rounded w-1/4"})]})]})})},s))}):0===q.length?a.jsx(h,{children:a.jsxs(j,{className:"p-12 text-center",children:[a.jsx(t,{className:"w-16 h-16 text-modern-text-tertiary mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-modern-text-primary mb-2",children:"프로젝트가 없습니다"}),a.jsx("p",{className:"text-modern-text-secondary mb-4",children:"첫 번째 크라우드펀딩 프로젝트를 만들어보세요!"}),a.jsxs(x,{onClick:()=>y("/crowdfunding/projects/new"),children:[a.jsx(r,{className:"w-4 h-4 mr-2"}),"새 프로젝트 만들기"]})]})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(e=>{const s=(t=e.currentParticipantCount,(r=e.targetParticipantCount)>0?Math.min(t/r*100,100):0);var t,r;const n=(e=>{const s=new Date(e),a=new Date,t=s.getTime()-a.getTime(),r=Math.ceil(t/864e5);return Math.max(0,r)})(e.endDate),i="recruiting"===e.status&&n>0;return a.jsxs(h,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[a.jsx(g,{className:"pb-3",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx(N,{className:"text-lg line-clamp-2 mb-2",children:e.title}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-modern-text-secondary",children:[a.jsxs("span",{children:["by ",e.creatorName]}),$(e.status)]})]})})}),a.jsx(j,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-modern-text-secondary line-clamp-3",children:e.description}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-modern-text-secondary",children:"진행률"}),a.jsxs("span",{className:"font-medium text-modern-text-primary",children:[e.currentParticipantCount,"/",e.targetParticipantCount," (",Math.round(s),"%)"]})]}),a.jsx("div",{className:"w-full bg-modern-bg-tertiary rounded-full h-2",children:a.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(s>=100?"bg-modern-success":s>=50?"bg-modern-primary":"bg-modern-warning"),style:{width:`${s}%`}})})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-modern-text-secondary",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(d,{className:"w-4 h-4"}),a.jsx("span",{children:i?`${n}일 남음`:"종료"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(l,{className:"w-4 h-4"}),a.jsxs("span",{children:[e.currentParticipantCount,"명 참여"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(x,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>y(`/crowdfunding/projects/${e.id}`),children:[a.jsx(m,{className:"w-4 h-4 mr-2"}),"상세보기"]}),e.forumLink&&a.jsx(x,{variant:"ghost",size:"sm",onClick:()=>y(e.forumLink),children:"포럼"})]})]})})]},e.id)})}),z&&z.totalPages>1&&a.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[a.jsx(x,{variant:"outline",size:"sm",disabled:P<=1,onClick:()=>k(e=>Math.max(1,e-1)),children:"이전"}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,z.totalPages)},(e,s)=>{const t=Math.max(1,Math.min(z.totalPages-4,Math.max(1,P-2)))+s;return a.jsx(x,{variant:t===P?"default":"ghost",size:"sm",onClick:()=>k(t),className:"w-8 h-8 p-0",children:t},t)})}),a.jsx(x,{variant:"outline",size:"sm",disabled:P>=z.totalPages,onClick:()=>k(e=>Math.min(z.totalPages,e+1)),children:"다음"})]})]})]})};export{y as default};
