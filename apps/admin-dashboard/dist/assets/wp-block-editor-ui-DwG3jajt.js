import{h as e,P as t,a as n,e as o,p as s,f as r,F as l,n as i,J as a,s as c,I as d,t as u,c as g,r as p,i as m,Q as h}from"./wp-blocks-core-65VcejHr.js";import{r as b,B as k,l as x,i as f,e as j,h as y,C as I,b as C,D as _,p as S,m as v}from"./wp-core-BVMytgUH.js";import{g as B,ah as w,J as P}from"./wp-block-editor-utils-BmaAXcuk.js";import{j as N,k as T,l as M,s as E,B as A}from"./wp-block-editor-store-BOagVFfu.js";import{a as O,c as D,s as F,b as R,i as L}from"./wp-i18n-BuBz6Sgx.js";import{aj as H,u as U,b as z,a as V,J as G,ak as q,B as W,n as K,al as Q,am as X,f as $,K as Y,w as Z,Z as J,an as ee,ao as te,Q as ne,N as oe,ap as se,aq as re,ar as le,C as ie,M as ae,as as ce,at as de,au as ue,I as ge,F as pe,h as me,av as he,aw as be,ax as ke}from"./wp-block-editor-misc-Bvzg-2Jv.js";import{j as xe,N as fe,I as je,aP as ye,G as Ie,b4 as Ce,b3 as _e,b5 as Se,bc as ve,bq as Be,br as we,aL as Pe,bL as Ne,M as Te,aB as Me,bM as Ee}from"./wp-misc-DyLrwF9p.js";import{d as Ae,r as Oe,j as De}from"./vendor-react-DqgGMt48.js";import{Tip as Fe,Composite as Re,Button as Le,Draggable as He,__experimentalTruncate as Ue,Icon as ze,SearchControl as Ve,__experimentalHeading as Ge,Modal as qe,Navigator as We,__experimentalItemGroup as Ke,__experimentalItem as Qe,__experimentalHStack as Xe,FlexBlock as $e,__experimentalVStack as Ye,__experimentalView as Ze,__experimentalSpacer as Je,DropdownMenu as et,MenuGroup as tt,MenuItemsChoice as nt,ExternalLink as ot,__experimentalText as st,__unstableMotion as rt,privateApis as lt,Spinner as it,Tooltip as at,MenuItem as ct,Flex as dt,FlexItem as ut,createSlotFill as gt,VisuallyHidden as pt,Popover as mt,Dropdown as ht,__experimentalStyleProvider as bt,ToolbarGroup as kt,ToolbarItem as xt,ToolbarButton as ft,PanelBody as jt}from"./wp-components-Uj2D7Nfy.js";import{c as yt}from"./vendor-ui-CrFdsnXa.js";import{u as It,C as Ct,a as _t}from"./wp-block-editor-transforms-Bg08EtRt.js";import{c as St,M as vt}from"./wp-block-editor-menus-CucXu4UM.js";import{b as Bt}from"./wp-block-editor-selection-DBFjOmhH.js";import{a as wt}from"./wp-block-editor-a11y-BVzCbFSD.js";import{c as Pt,P as Nt,a as Tt}from"./wp-block-editor-patterns-DIcm1rGW.js";import{B as Mt}from"./wp-block-editor-navigation-ufXSM7dn.js";import{b as Et}from"./wp-block-editor-borders-C-QIiBvP.js";import{B as At}from"./wp-block-editor-preview-WXXja22U.js";import{u as Ot}from"./wp-block-editor-api-MRWBPx9C.js";import{c as Dt}from"./wp-block-editor-dnd-yPphmZPp.js";import{M as Ft,a as Rt}from"./wp-block-editor-media-CatADaW3.js";var Lt,Ht={exports:{}};var Ut=function(){if(Lt)return Ht.exports;Lt=1;var e={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ấ":"A","Ắ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Æ":"AE","Ầ":"A","Ằ":"A","Ȃ":"A","Ả":"A","Ạ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","Ç":"C","Ḉ":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ế":"E","Ḗ":"E","Ề":"E","Ḕ":"E","Ḝ":"E","Ȇ":"E","Ẻ":"E","Ẽ":"E","Ẹ":"E","Ể":"E","Ễ":"E","Ệ":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ḯ":"I","Ȋ":"I","Ỉ":"I","Ị":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","Ố":"O","Ṍ":"O","Ṓ":"O","Ȏ":"O","Ỏ":"O","Ọ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ớ":"O","Ợ":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ủ":"U","Ụ":"U","Ử":"U","Ữ":"U","Ự":"U","Ý":"Y","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ấ":"a","ắ":"a","ẳ":"a","ẵ":"a","ặ":"a","æ":"ae","ầ":"a","ằ":"a","ȃ":"a","ả":"a","ạ":"a","ẩ":"a","ẫ":"a","ậ":"a","ç":"c","ḉ":"c","è":"e","é":"e","ê":"e","ë":"e","ế":"e","ḗ":"e","ề":"e","ḕ":"e","ḝ":"e","ȇ":"e","ẻ":"e","ẽ":"e","ẹ":"e","ể":"e","ễ":"e","ệ":"e","ì":"i","í":"i","î":"i","ï":"i","ḯ":"i","ȋ":"i","ỉ":"i","ị":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ố":"o","ṍ":"o","ṓ":"o","ȏ":"o","ỏ":"o","ọ":"o","ổ":"o","ỗ":"o","ộ":"o","ờ":"o","ở":"o","ỡ":"o","ớ":"o","ợ":"o","ù":"u","ú":"u","û":"u","ü":"u","ủ":"u","ụ":"u","ử":"u","ữ":"u","ự":"u","ý":"y","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","C̆":"C","c̆":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","Ǵ":"G","ĝ":"g","ǵ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ḫ":"H","ḫ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","Ḱ":"K","ḱ":"k","K̆":"K","k̆":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"l","ł":"l","Ḿ":"M","ḿ":"m","M̆":"M","m̆":"m","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"n","N̆":"N","n̆":"n","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","P̆":"P","p̆":"p","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","R̆":"R","r̆":"r","Ȓ":"R","ȓ":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","Ș":"S","ș":"s","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","ț":"t","Ț":"T","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","T̆":"T","t̆":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ȗ":"U","ȗ":"u","V̆":"V","v̆":"v","Ŵ":"W","ŵ":"w","Ẃ":"W","ẃ":"w","X̆":"X","x̆":"x","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Y̆":"Y","y̆":"y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","ſ":"s","ƒ":"f","Ơ":"O","ơ":"o","Ư":"U","ư":"u","Ǎ":"A","ǎ":"a","Ǐ":"I","ǐ":"i","Ǒ":"O","ǒ":"o","Ǔ":"U","ǔ":"u","Ǖ":"U","ǖ":"u","Ǘ":"U","ǘ":"u","Ǚ":"U","ǚ":"u","Ǜ":"U","ǜ":"u","Ứ":"U","ứ":"u","Ṹ":"U","ṹ":"u","Ǻ":"A","ǻ":"a","Ǽ":"AE","ǽ":"ae","Ǿ":"O","ǿ":"o","Þ":"TH","þ":"th","Ṕ":"P","ṕ":"p","Ṥ":"S","ṥ":"s","X́":"X","x́":"x","Ѓ":"Г","ѓ":"г","Ќ":"К","ќ":"к","A̋":"A","a̋":"a","E̋":"E","e̋":"e","I̋":"I","i̋":"i","Ǹ":"N","ǹ":"n","Ồ":"O","ồ":"o","Ṑ":"O","ṑ":"o","Ừ":"U","ừ":"u","Ẁ":"W","ẁ":"w","Ỳ":"Y","ỳ":"y","Ȁ":"A","ȁ":"a","Ȅ":"E","ȅ":"e","Ȉ":"I","ȉ":"i","Ȍ":"O","ȍ":"o","Ȑ":"R","ȑ":"r","Ȕ":"U","ȕ":"u","B̌":"B","b̌":"b","Č̣":"C","č̣":"c","Ê̌":"E","ê̌":"e","F̌":"F","f̌":"f","Ǧ":"G","ǧ":"g","Ȟ":"H","ȟ":"h","J̌":"J","ǰ":"j","Ǩ":"K","ǩ":"k","M̌":"M","m̌":"m","P̌":"P","p̌":"p","Q̌":"Q","q̌":"q","Ř̩":"R","ř̩":"r","Ṧ":"S","ṧ":"s","V̌":"V","v̌":"v","W̌":"W","w̌":"w","X̌":"X","x̌":"x","Y̌":"Y","y̌":"y","A̧":"A","a̧":"a","B̧":"B","b̧":"b","Ḑ":"D","ḑ":"d","Ȩ":"E","ȩ":"e","Ɛ̧":"E","ɛ̧":"e","Ḩ":"H","ḩ":"h","I̧":"I","i̧":"i","Ɨ̧":"I","ɨ̧":"i","M̧":"M","m̧":"m","O̧":"O","o̧":"o","Q̧":"Q","q̧":"q","U̧":"U","u̧":"u","X̧":"X","x̧":"x","Z̧":"Z","z̧":"z","й":"и","Й":"И","ё":"е","Ё":"Е"},t=Object.keys(e).join("|"),n=new RegExp(t,"g"),o=new RegExp(t,"");function s(t){return e[t]}var r=function(e){return e.replace(n,s)};return Ht.exports=r,Ht.exports.has=function(e){return!!e.match(o)},Ht.exports.remove=r,Ht.exports}();const zt=Ae(Ut),Vt={user:"user",theme:"theme",directory:"directory"},Gt="fully",qt="unsynced",Wt={name:"allPatterns",label:D("All","patterns")},Kt={name:"myPatterns",label:O("My patterns")};function Qt(e,t,n){const o=e.name.startsWith("core/block"),s="core"===e.source||e.source?.startsWith("pattern-directory");return!(t!==Vt.theme||!o&&!s)||(!(t!==Vt.directory||!o&&s)||(t===Vt.user&&e.type!==Vt.user||(n===Gt&&""!==e.syncStatus||!(n!==qt||"unsynced"===e.syncStatus||!o))))}const Xt=["color","border","dimensions","typography","spacing"],$t={"color.palette":e=>e.colors,"color.gradients":e=>e.gradients,"color.custom":e=>void 0===e.disableCustomColors?void 0:!e.disableCustomColors,"color.customGradient":e=>void 0===e.disableCustomGradients?void 0:!e.disableCustomGradients,"typography.fontSizes":e=>e.fontSizes,"typography.customFontSize":e=>void 0===e.disableCustomFontSizes?void 0:!e.disableCustomFontSizes,"typography.lineHeight":e=>e.enableCustomLineHeight,"spacing.units":e=>{if(void 0!==e.enableCustomUnits)return!0===e.enableCustomUnits?["px","em","rem","vh","vw","%"]:e.enableCustomUnits},"spacing.padding":e=>e.enableCustomSpacing},Yt={"border.customColor":"border.color","border.customStyle":"border.style","border.customWidth":"border.width","typography.customFontStyle":"typography.fontStyle","typography.customFontWeight":"typography.fontWeight","typography.customLetterSpacing":"typography.letterSpacing","typography.customTextDecorations":"typography.textDecoration","typography.customTextTransforms":"typography.textTransform","border.customRadius":"border.radius","spacing.customMargin":"spacing.margin","spacing.customPadding":"spacing.padding","typography.customLineHeight":"typography.lineHeight"};function Zt(n,o,...s){const r=N(n,o),l=[];if(o){let t=o;do{const o=N(n,t);e(o,"__experimentalSettings",!1)&&l.push(t)}while(t=n.blocks.parents.get(t))}return s.map(e=>{if(Xt.includes(e))return;let s=b("blockEditor.useSetting.before",void 0,e,o,r);if(void 0!==s)return s;const i=(e=>Yt[e]||e)(e);for(const t of l){var a;const e=T(n,t);if(s=null!==(a=B(e.settings?.blocks?.[r],i))&&void 0!==a?a:B(e.settings,i),void 0!==s)break}const c=M(n);var d,u;if(void 0===s&&r&&(s=B(c.__experimentalFeatures?.blocks?.[r],i)),void 0===s&&(s=B(c.__experimentalFeatures,i)),void 0!==s)return t[i]?null!==(d=null!==(u=s.custom)&&void 0!==u?u:s.theme)&&void 0!==d?d:s.default:s;const g=$t[i]?.(c);return void 0!==g?g:"typography.dropCap"===i||void 0})}const Jt=e=>e.name||"",en=e=>e.title,tn=e=>e.description||"",nn=e=>e.keywords||[],on=e=>e.category,sn=()=>null,rn=[/([\p{Ll}\p{Lo}\p{N}])([\p{Lu}\p{Lt}])/gu,/([\p{Lu}\p{Lt}])([\p{Lu}\p{Lt}][\p{Ll}\p{Lo}])/gu],ln=/(\p{C}|\p{P}|\p{S})+/giu,an=new Map,cn=new Map;function dn(e=""){if(an.has(e))return an.get(e);const t=H(e,{splitRegexp:rn,stripRegexp:ln}).split(" ").filter(Boolean);return an.set(e,t),t}function un(e=""){if(cn.has(e))return cn.get(e);let t=zt(e);return t=t.replace(/^\//,""),t=t.toLowerCase(),cn.set(e,t),t}const gn=(e="")=>dn(un(e)),pn=(e,t,n,o)=>{if(0===gn(o).length)return e;return mn(e,o,{getCategory:e=>t.find(({slug:t})=>t===e.category)?.title,getCollection:e=>n[e.name.split("/")[0]]?.title})},mn=(e=[],t="",n={})=>{if(0===gn(t).length)return e;const o=e.map(e=>[e,hn(e,t,n)]).filter(([,e])=>e>0);return o.sort(([,e],[,t])=>t-e),o.map(([e])=>e)};function hn(e,t,n={}){const{getName:o=Jt,getTitle:s=en,getDescription:r=tn,getKeywords:l=nn,getCategory:i=on,getCollection:a=sn}=n,c=o(e),d=s(e),u=r(e),g=l(e),p=i(e),m=a(e),h=un(t),b=un(d);let k=0;if(h===b)k+=30;else if(b.startsWith(h))k+=20;else{const e=[c,d,u,...g,p,m].join(" ");0===((e,t)=>e.filter(e=>!gn(t).some(t=>t.includes(e))))(dn(h),e).length&&(k+=10)}if(0!==k&&c.startsWith("core/")){k+=c!==e.id?1:2}return k}const bn=(e,t,i)=>{const a=Oe.useMemo(()=>({[w]:!!i}),[i]),[c]=U(t=>[t(E).getInserterItems(e,a)],[e,a]),{getClosestAllowedInsertionPoint:d}=z(U(E)),{createErrorNotice:u}=V(xe),[g,p]=U(e=>{const{getCategories:t,getCollections:o}=e(n);return[t(),o()]},[]);return[c,g,p,Oe.useCallback(({name:n,initialAttributes:i,innerBlocks:a,syncStatus:c,content:g},p)=>{const m=d(n,e);if(null===m){var h;const e=null!==(h=o(n)?.title)&&void 0!==h?h:n;return void u(F(O('Block "%s" can\'t be inserted.'),e),{type:"snackbar",id:"inserter-notice"})}const b="unsynced"===c?s(g,{__unstableSkipMigrationLogs:!0}):r(n,i,l(a));t(b,void 0,p,m)},[t,d,e])]},kn=(e,t)=>t?(e.sort(({id:e},{id:n})=>{let o=t.indexOf(e),s=t.indexOf(n);return o<0&&(o=t.length),s<0&&(s=t.length),o-s}),e):e,xn=[G(O("While writing, you can press <kbd>/</kbd> to quickly insert new blocks."),{kbd:De.jsx("kbd",{})}),G(O("Indent a list by pressing <kbd>space</kbd> at the beginning of a line."),{kbd:De.jsx("kbd",{})}),G(O("Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line."),{kbd:De.jsx("kbd",{})}),O("Drag files into the editor to automatically insert media blocks."),O("Change a block's type by pressing the block icon on the toolbar.")];function fn(){const[e]=Oe.useState(Math.floor(Math.random()*xn.length));return De.jsx(Fe,{children:xn[e]})}function jn({item:e}){var t;const{name:n,title:o,icon:s,description:l,initialAttributes:c,example:d}=e,u=i(e),g=Oe.useMemo(()=>d?a(n,{attributes:{...d.attributes,...c},innerBlocks:d.innerBlocks}):r(n,c),[n,d,c]),p=144,m=null!==(t=d?.viewportWidth)&&void 0!==t?t:500,h=280/m,b=0!==h&&h<1?p/h:p;return De.jsxs("div",{className:"block-editor-inserter__preview-container",children:[De.jsx("div",{className:"block-editor-inserter__preview",children:u||d?De.jsx("div",{className:"block-editor-inserter__preview-content",children:De.jsx(At,{blocks:g,viewportWidth:m,minHeight:p,additionalStyles:[{css:`\n\t\t\t\t\t\t\t\t\t\tbody { \n\t\t\t\t\t\t\t\t\t\t\tpadding: 24px;\n\t\t\t\t\t\t\t\t\t\t\tmin-height:${Math.round(b)}px;\n\t\t\t\t\t\t\t\t\t\t\tdisplay:flex;\n\t\t\t\t\t\t\t\t\t\t\talign-items:center;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t.is-root-container { width: 100%; }\n\t\t\t\t\t\t\t\t\t`}]})}):De.jsx("div",{className:"block-editor-inserter__preview-content-missing",children:O("No preview available.")})}),!u&&De.jsx(q,{title:o,icon:s,description:l})]})}const yn=Oe.forwardRef(function(e,t){const[n,o]=Oe.useState(!1);return Oe.useEffect(()=>{n&&fe(O("Use left and right arrow keys to move through blocks"))},[n]),De.jsx("div",{ref:t,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{o(!0)},onBlur:e=>{!e.currentTarget.contains(e.relatedTarget)&&o(!1)},...e})});const In=Oe.forwardRef(function(e,t){return De.jsx(Re.Group,{role:"presentation",ref:t,...e})});const Cn=Oe.forwardRef(function({isFirst:e,as:t,children:n,...o},s){return De.jsx(Re.Item,{ref:s,role:"option",accessibleWhenDisabled:!0,...o,render:o=>{const s={...o,tabIndex:e?0:o.tabIndex};return t?De.jsx(t,{...s,children:n}):"function"==typeof n?n(s):De.jsx(Le,{__next40pxDefaultSize:!0,...s,children:n})}})});function _n({children:e}){return De.jsx(Re,{focusShift:!0,focusWrap:"horizontal",render:De.jsx(De.Fragment,{}),children:e})}const Sn=({isEnabled:e,blocks:t,icon:o,children:s,pattern:l})=>{const i={type:"inserter",blocks:t},a=U(e=>{const{getBlockType:o}=e(n);return 1===t.length&&o(t[0].name)?.icon},[t]),{startDragging:d,stopDragging:u}=z(V(E));return e?De.jsx(He,{__experimentalTransferDataType:"wp-blocks",transferData:i,onDragStart:e=>{d();const n=l?.type===Vt.user&&"unsynced"!==l?.syncStatus?[r("core/block",{ref:l.id})]:t;e.dataTransfer.setData("text/html",c(n))},onDragEnd:()=>{u()},__experimentalDragComponent:De.jsx(Dt,{count:t.length,icon:o||!l&&a,isPattern:!!l}),children:({onDraggableStart:e,onDraggableEnd:t})=>s({draggable:!0,onDragStart:e,onDragEnd:t})}):s({draggable:!1,onDragStart:void 0,onDragEnd:void 0})};const vn=Oe.memo(function({className:e,isFirst:t,item:n,onSelect:o,onHover:s,isDraggable:a,...c}){const u=Oe.useRef(!1),g=n.icon?{backgroundColor:n.icon.background,color:n.icon.foreground}:{},p=Oe.useMemo(()=>[r(n.name,n.initialAttributes,l(n.innerBlocks))],[n.name,n.initialAttributes,n.innerBlocks]),m=i(n)&&"unsynced"!==n.syncStatus||d(n);return De.jsx(Sn,{isEnabled:a&&!n.isDisabled,blocks:p,icon:n.icon,children:({draggable:r,onDragStart:l,onDragEnd:i})=>De.jsx("div",{className:yt("block-editor-block-types-list__list-item",{"is-synced":m}),draggable:r,onDragStart:e=>{u.current=!0,l&&(s(null),l(e))},onDragEnd:e=>{u.current=!1,i&&i(e)},children:De.jsxs(Cn,{isFirst:t,className:yt("block-editor-block-types-list__item",e),disabled:n.isDisabled,onClick:e=>{e.preventDefault(),o(n,Q()?e.metaKey:e.ctrlKey),s(null)},onKeyDown:e=>{const{keyCode:t}=e;t===K&&(e.preventDefault(),o(n,Q()?e.metaKey:e.ctrlKey),s(null))},onMouseEnter:()=>{u.current||s(n)},onMouseLeave:()=>s(null),...c,children:[De.jsx("span",{className:"block-editor-block-types-list__item-icon",style:g,children:De.jsx(W,{icon:n.icon,showColors:!0})}),De.jsx("span",{className:"block-editor-block-types-list__item-title",children:De.jsx(Ue,{numberOfLines:3,children:n.title})})]})})})});function Bn({title:e,icon:t,children:n}){return De.jsxs(De.Fragment,{children:[De.jsxs("div",{className:"block-editor-inserter__panel-header",children:[De.jsx("h2",{className:"block-editor-inserter__panel-title",children:e}),De.jsx(ze,{icon:t})]}),De.jsx("div",{className:"block-editor-inserter__panel-content",children:n})]})}function wn(){return De.jsxs("div",{className:"block-editor-inserter__no-results",children:[De.jsx(je,{className:"block-editor-inserter__no-results-icon",icon:ye}),De.jsx("p",{children:O("No results found.")})]})}const Pn=[];function Nn({items:e,collections:t,categories:n,onSelectItem:o,onHover:s,showMostUsedBlocks:r,className:l}){const i=Oe.useMemo(()=>P(e,"frecency","desc").slice(0,6),[e]),a=Oe.useMemo(()=>e.filter(e=>!e.category),[e]),c=Oe.useMemo(()=>{const n={...t};return Object.keys(t).forEach(t=>{n[t]=e.filter(e=>(e=>e.name.split("/")[0])(e)===t),0===n[t].length&&delete n[t]}),n},[e,t]);Oe.useEffect(()=>()=>s(null),[]);const d=k(n),u=n.length===d.length,g=Oe.useMemo(()=>Object.entries(t),[t]),p=k(u?g:Pn);return De.jsxs("div",{className:l,children:[r&&e.length>3&&!!i.length&&De.jsx(Bn,{title:D("Most used","blocks"),children:De.jsx(X,{items:i,onSelect:o,onHover:s,label:D("Most used","blocks")})}),d.map(t=>{const n=e.filter(e=>e.category===t.slug);return n&&n.length?De.jsx(Bn,{title:t.title,icon:t.icon,children:De.jsx(X,{items:n,onSelect:o,onHover:s,label:t.title})},t.slug):null}),u&&a.length>0&&De.jsx(Bn,{className:"block-editor-inserter__uncategorized-blocks-panel",title:O("Uncategorized"),children:De.jsx(X,{items:a,onSelect:o,onHover:s,label:O("Uncategorized")})}),p.map(([e,t])=>{const n=c[e];return n&&n.length?De.jsx(Bn,{title:t.title,icon:t.icon,children:De.jsx(X,{items:n,onSelect:o,onHover:s,label:t.title})},e):null})]})}const Tn=Oe.forwardRef(function({rootClientId:e,onInsert:t,onHover:n,showMostUsedBlocks:o},s){const[r,l,i,a]=bn(e,t);if(!r.length)return De.jsx(wn,{});const c=[],d=[];for(const u of r)"reusable"!==u.category&&(e&&u.isAllowedInCurrentRoot?c.push(u):d.push(u));return De.jsx(_n,{children:De.jsxs("div",{ref:s,children:[!!c.length&&De.jsx(De.Fragment,{children:De.jsx(Nn,{items:c,categories:l,collections:i,onSelectItem:a,onHover:n,showMostUsedBlocks:o,className:"block-editor-inserter__insertable-blocks-at-selection"})}),De.jsx(Nn,{items:d,categories:l,collections:i,onSelectItem:a,onHover:n,showMostUsedBlocks:o,className:"block-editor-inserter__all-blocks"})]})})});function Mn({selectedCategory:e,patternCategories:t,onClickCategory:n}){const o="block-editor-block-patterns-explorer__sidebar";return De.jsx("div",{className:`${o}__categories-list`,children:t.map(({name:t,label:s})=>De.jsx(Le,{__next40pxDefaultSize:!0,label:s,className:`${o}__categories-list__item`,isPressed:e===t,onClick:()=>{n(t)},children:s},t))})}function En({searchValue:e,setSearchValue:t}){return De.jsx("div",{className:"block-editor-block-patterns-explorer__search",children:De.jsx(Ve,{__nextHasNoMarginBottom:!0,onChange:t,value:e,label:O("Search for patterns"),placeholder:O("Search")})})}function An({selectedCategory:e,patternCategories:t,onClickCategory:n,searchValue:o,setSearchValue:s}){return De.jsxs("div",{className:"block-editor-block-patterns-explorer__sidebar",children:[De.jsx(En,{searchValue:o,setSearchValue:s}),!o&&De.jsx(Mn,{selectedCategory:e,patternCategories:t,onClickCategory:n})]})}function On({destinationRootClientId:e,destinationIndex:t,rootClientId:n,registry:o}){if(n===e)return t;const s=["",...o.select(E).getBlockParents(e),e],r=s.indexOf(n);return-1!==r?o.select(E).getBlockIndex(s[r+1])+1:o.select(E).getBlockOrder(n).length}function Dn({rootClientId:e="",insertionIndex:t,clientId:n,isAppender:o,onSelect:s,shouldFocusBlock:r=!0,selectBlockOnInsert:l=!0}){const i=Ot(),{getSelectedBlock:a,getClosestAllowedInsertionPoint:c,isBlockInsertionPointVisible:d}=z(U(E)),{destinationRootClientId:g,destinationIndex:p}=U(s=>{const{getSelectedBlockClientId:r,getBlockRootClientId:l,getBlockIndex:i,getBlockOrder:a,getInsertionPoint:c}=z(s(E)),d=r();let u,g=e;const p=c();return void 0!==t?u=t:p&&p.hasOwnProperty("index")?(g=p?.rootClientId?p.rootClientId:e,u=p.index):n?u=i(n):!o&&d?(g=l(d),u=i(d)+1):u=a(g).length,{destinationRootClientId:g,destinationIndex:u}},[e,t,n,o]),{replaceBlocks:m,insertBlocks:h,showInsertionPoint:b,hideInsertionPoint:k,setLastFocus:x}=z(V(E)),f=Oe.useCallback((e,t,n=!1,c)=>{(n||r||l)&&x(null);const d=a();!o&&d&&u(d)?m(d.clientId,e,null,r||n?0:null,t):h(e,o||void 0===c?p:On({destinationRootClientId:g,destinationIndex:p,rootClientId:c,registry:i}),o||void 0===c?g:c,l,r||n?0:null,t);const b=Array.isArray(e)?e.length:1,k=F(R("%d block added.","%d blocks added.",b),b);fe(k),s&&s(e)},[o,a,m,h,g,p,s,r,l]),j=Oe.useCallback(e=>{if(e&&!d()){const t=c(e.name,g);null!==t&&b(t,On({destinationRootClientId:g,destinationIndex:p,rootClientId:t,registry:i}))}else k()},[c,d,b,k,g,p]);return[g,f,j]}const Fn=(e,t,n,o)=>{const s=Oe.useMemo(()=>({[w]:!!o}),[o]),{patternCategories:l,patterns:i,userPatternCategories:a}=U(e=>{const{getSettings:n,__experimentalGetAllowedPatterns:o}=z(e(E)),{__experimentalUserPatternCategories:r,__experimentalBlockPatternCategories:l}=n();return{patterns:o(t,s),userPatternCategories:r,patternCategories:l}},[t,s]),{getClosestAllowedInsertionPointForPattern:c}=z(U(E)),d=Oe.useMemo(()=>{const e=[...l];return a?.forEach(t=>{e.find(e=>e.name===t.name)||e.push(t)}),e},[l,a]),{createSuccessNotice:u}=V(xe);return[i,d,Oe.useCallback((s,l)=>{const i=o?t:c(s,t);if(null===i)return;const a=s.type===Vt.user&&"unsynced"!==s.syncStatus?[r("core/block",{ref:s.id})]:l;e((null!=a?a:[]).map(e=>{const t=g(e);return t.attributes.metadata?.categories?.includes(n)&&(t.attributes.metadata.categories=[n]),t}),s.name,!1,i),u(F(O('Block pattern "%s" inserted.'),s.title),{type:"snackbar",id:"inserter-notice"})},[u,e,n,t,c,o])]};function Rn(e,t,n,o=""){const[s,r]=Oe.useState(1),l=x(t),i=x(o);l===t&&i===o||1===s||r(1);const a=e.length,c=s-1,d=Oe.useMemo(()=>e.slice(20*c,20*c+20),[c,e]),u=k(d,{step:5}),g=Math.ceil(e.length/20);return Oe.useEffect(function(){const e=Ie(n?.current);e?.scrollTo(0,0)},[t,n]),{totalItems:a,categoryPatterns:d,categoryPatternsAsyncList:u,numPages:g,changePage:e=>{const t=Ie(n?.current);t?.scrollTo(0,0),r(e)},currentPage:s}}function Ln({filterValue:e,filteredBlockPatternsLength:t}){return e?De.jsx(Ge,{level:2,lineHeight:"48px",className:"block-editor-block-patterns-explorer__search-results-count",children:F(R("%d pattern found","%d patterns found",t),t)}):null}function Hn({searchValue:e,selectedCategory:t,patternCategories:n,rootClientId:o}){const s=Oe.useRef(),r=f(fe,500),[l,i]=Dn({rootClientId:o,shouldFocusBlock:!0}),[a,,c]=Fn(i,l,t),d=Oe.useMemo(()=>n.map(e=>e.name),[n]),u=Oe.useMemo(()=>{const n=a.filter(e=>{if(t===Wt.name)return!0;if(t===Kt.name&&e.type===Vt.user)return!0;if("uncategorized"===t){const t=e.categories.some(e=>d.includes(e));return!e.categories?.length||!t}return e.categories?.includes(t)});return e?mn(n,e):n},[e,a,t,d]);Oe.useEffect(()=>{if(!e)return;const t=u.length,n=F(R("%d result found.","%d results found.",t),t);r(n)},[e,r,u.length]);const g=Rn(u,t,s),[p,m]=Oe.useState(e);e!==p&&(m(e),g.changePage(1));const h=!!u?.length;return De.jsxs("div",{className:"block-editor-block-patterns-explorer__list",ref:s,children:[De.jsx(Ln,{filterValue:e,filteredBlockPatternsLength:u.length}),De.jsx(_n,{children:h&&De.jsxs(De.Fragment,{children:[De.jsx(Pt,{shownPatterns:g.categoryPatternsAsyncList,blockPatterns:g.categoryPatterns,onClickPattern:c,isDraggable:!1}),De.jsx(Nt,{...g})]})})]})}function Un(e,t="all"){const[n,o]=Fn(void 0,e),s=Oe.useMemo(()=>"all"===t?n:n.filter(e=>!Qt(e,t)),[t,n]);return Oe.useMemo(()=>{const e=o.filter(e=>s.some(t=>t.categories?.includes(e.name))).sort((e,t)=>e.label.localeCompare(t.label));return s.some(e=>!function(e,t){return!(!e.categories||!e.categories.length)&&e.categories.some(e=>t.some(t=>t.name===e))}(e,o))&&!e.find(e=>"uncategorized"===e.name)&&e.push({name:"uncategorized",label:D("Uncategorized")}),s.some(e=>e.type===Vt.user)&&e.unshift(Kt),s.length>0&&e.unshift({name:Wt.name,label:Wt.label}),fe(F(R("%d category button displayed.","%d category buttons displayed.",e.length),e.length)),e},[o,s])}function zn({initialCategory:e,rootClientId:t}){const[n,o]=Oe.useState(""),[s,r]=Oe.useState(e?.name),l=Un(t);return De.jsxs("div",{className:"block-editor-block-patterns-explorer",children:[De.jsx(An,{selectedCategory:s,patternCategories:l,onClickCategory:r,searchValue:n,setSearchValue:o}),De.jsx(Hn,{searchValue:n,selectedCategory:s,patternCategories:l,rootClientId:t})]})}function Vn({onModalClose:e,...t}){return De.jsx(qe,{title:O("Patterns"),onRequestClose:e,isFullScreen:!0,children:De.jsx(zn,{...t})})}function Gn({title:e}){return De.jsx(Ye,{spacing:0,children:De.jsx(Ze,{children:De.jsx(Je,{marginBottom:0,paddingX:4,paddingY:3,children:De.jsxs(Xe,{spacing:2,children:[De.jsx(We.BackButton,{style:{minWidth:24,padding:0},icon:L()?_e:Ce,size:"small",label:O("Back")}),De.jsx(Je,{children:De.jsx(Ge,{level:5,children:e})})]})})})})}function qn({categories:e,children:t}){return De.jsxs(We,{initialPath:"/",className:"block-editor-inserter__mobile-tab-navigation",children:[De.jsx(We.Screen,{path:"/",children:De.jsx(Ke,{children:e.map(e=>De.jsx(We.Button,{path:`/category/${e.name}`,as:Qe,isAction:!0,children:De.jsxs(Xe,{children:[De.jsx($e,{children:e.label}),De.jsx(je,{icon:L()?Ce:_e})]})},e.name))})}),e.map(e=>De.jsxs(We.Screen,{path:`/category/${e.name}`,children:[De.jsx(Gn,{title:O("Back")}),t(e)]},e.name))]})}const Wn=e=>"all"!==e&&"user"!==e,Kn=[{value:"all",label:D("All","patterns")},{value:Vt.directory,label:O("Pattern Directory")},{value:Vt.theme,label:O("Theme & Plugins")},{value:Vt.user,label:O("User")}];function Qn({setPatternSyncFilter:e,setPatternSourceFilter:t,patternSyncFilter:n,patternSourceFilter:o,scrollContainerRef:s,category:r}){const l=r.name===Kt.name?Vt.user:o,i=Wn(l),a=(e=>e.name===Kt.name)(r),c=Oe.useMemo(()=>[{value:"all",label:D("All","patterns")},{value:Gt,label:D("Synced","patterns"),disabled:i},{value:qt,label:D("Not synced","patterns"),disabled:i}],[i]);return De.jsx(De.Fragment,{children:De.jsx(et,{popoverProps:{placement:"right-end"},label:O("Filter patterns"),toggleProps:{size:"compact"},icon:De.jsx(je,{icon:De.jsx(Se,{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:De.jsx(ve,{d:"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z",fill:"currentColor"})})}),children:()=>De.jsxs(De.Fragment,{children:[!a&&De.jsx(tt,{label:O("Source"),children:De.jsx(nt,{choices:Kn,onSelect:n=>{var o;t(o=n),Wn(o)&&e("all"),s.current?.scrollTo(0,0)},value:l})}),De.jsx(tt,{label:O("Type"),children:De.jsx(nt,{choices:c,onSelect:t=>{e(t),s.current?.scrollTo(0,0)},value:n})}),De.jsx("div",{className:"block-editor-tool-selector__help",children:G(O("Patterns are available from the <Link>WordPress.org Pattern Directory</Link>, bundled in the active theme, or created by users on this site. Only patterns created on this site can be synced."),{Link:De.jsx(ot,{href:O("https://wordpress.org/patterns/")})})})]})})})}const Xn=()=>{};function $n({rootClientId:e,onInsert:t,onHover:n=Xn,category:o,showTitlesAsTooltip:s}){const r=U(e=>"zoom-out"===e(E).__unstableGetEditorMode(),[]),[l,,i]=Fn(t,e,o?.name),[a,c]=Oe.useState("all"),[d,u]=Oe.useState("all"),g=Un(e,d),p=Oe.useRef(),m=Oe.useMemo(()=>l.filter(e=>!Qt(e,d,a)&&(o.name===Wt.name||(o.name===Kt.name&&e.type===Vt.user||("uncategorized"===o.name?!e.categories||!e.categories.some(e=>g.some(t=>t.name===e)):e.categories?.includes(o.name))))),[l,g,o.name,d,a]),h=Rn(m,o,p),{changePage:b}=h;Oe.useEffect(()=>()=>n(null),[]);const k=Oe.useCallback(e=>{c(e),b(1)},[c,b]),x=Oe.useCallback(e=>{u(e),b(1)},[u,b]);return De.jsxs(De.Fragment,{children:[De.jsxs(Ye,{spacing:2,className:"block-editor-inserter__patterns-category-panel-header",children:[De.jsxs(Xe,{children:[De.jsx($e,{children:De.jsx(Ge,{className:"block-editor-inserter__patterns-category-panel-title",size:13,level:4,as:"div",children:o.label})}),De.jsx(Qn,{patternSyncFilter:a,patternSourceFilter:d,setPatternSyncFilter:k,setPatternSourceFilter:x,scrollContainerRef:p,category:o})]}),!m.length&&De.jsx(st,{variant:"muted",className:"block-editor-inserter__patterns-category-no-results",children:O("No results found")})]}),m.length>0&&De.jsxs(De.Fragment,{children:[r&&De.jsx(st,{size:"12",as:"p",className:"block-editor-inserter__help-text",children:O("Drag and drop patterns into the canvas.")}),De.jsx(Pt,{ref:p,shownPatterns:h.categoryPatternsAsyncList,blockPatterns:h.categoryPatterns,onClickPattern:i,onHover:n,label:o.label,orientation:"vertical",category:o.name,isDraggable:!0,showTitlesAsTooltip:s,patternFilter:d,pagingProps:h})]})]})}const{Tabs:Yn}=z(lt);function Zn({categories:e,selectedCategory:t,onSelectCategory:n,children:o}){const s={type:"tween",duration:j()?0:.25,ease:[.6,0,.4,1]},r=x(t);return De.jsxs(Yn,{className:"block-editor-inserter__category-tabs",selectOnMove:!1,selectedTabId:t?t.name:null,orientation:"vertical",onSelect:t=>{n(e.find(e=>e.name===t))},children:[De.jsx(Yn.TabList,{className:"block-editor-inserter__category-tablist",children:e.map(e=>De.jsx(Yn.Tab,{tabId:e.name,className:"block-editor-inserter__category-tab","aria-label":e.label,"aria-current":e===t?"true":void 0,children:De.jsxs(Xe,{children:[De.jsx($e,{children:e.label}),De.jsx(je,{icon:L()?Ce:_e})]})},e.name))}),e.map(e=>De.jsx(Yn.TabPanel,{tabId:e.name,focusable:!1,children:De.jsx(rt.div,{className:"block-editor-inserter__category-panel",initial:r?"open":"closed",animate:"open",variants:{open:{transform:"translateX( 0 )",transitionEnd:{zIndex:"1"}},closed:{transform:"translateX( -100% )",zIndex:"-1"}},transition:s,children:o})},e.name))]})}function Jn({onSelectCategory:e,selectedCategory:t,onInsert:n,rootClientId:o,children:s}){const[r,l]=Oe.useState(!1),i=Un(o),a=y("medium","<");return U(e=>z(e(E)).isResolvingPatterns(),[])?De.jsx("div",{className:"block-editor-inserter__patterns-loading",children:De.jsx(it,{})}):i.length?De.jsxs(De.Fragment,{children:[!a&&De.jsxs("div",{className:"block-editor-inserter__block-patterns-tabs-container",children:[De.jsx(Zn,{categories:i,selectedCategory:t,onSelectCategory:e,children:s}),De.jsx(Le,{__next40pxDefaultSize:!0,className:"block-editor-inserter__patterns-explore-button",onClick:()=>l(!0),variant:"secondary",children:O("Explore all patterns")})]}),a&&De.jsx(qn,{categories:i,children:e=>De.jsx("div",{className:"block-editor-inserter__category-panel",children:De.jsx($n,{onInsert:n,rootClientId:o,category:e,showTitlesAsTooltip:!1},e.name)})}),r&&De.jsx(Vn,{initialCategory:t||i[0],patternCategories:i,onModalClose:()=>l(!1),rootClientId:o})]}):De.jsx(wn,{})}const eo={image:"img",video:"video",audio:"audio"};function to(e,t){const n={id:e.id||void 0,caption:e.caption||void 0},o=e.url,s=e.alt||void 0;"image"===t?(n.url=o,n.alt=s):["video","audio"].includes(t)&&(n.src=o);const l=eo[t],i=De.jsx(l,{src:e.previewUrl||o,alt:s,controls:"audio"===t||void 0,inert:"true",onError:({currentTarget:t})=>{t.src===e.previewUrl&&(t.src=o)}});return[r(`core/${t}`,n),i]}const no=["image"],oo={position:"bottom left",className:"block-editor-inserter__media-list__item-preview-options__popover"};function so({category:e,media:t}){if(!e.getReportUrl)return null;const n=e.getReportUrl(t);return De.jsx(et,{className:"block-editor-inserter__media-list__item-preview-options",label:O("Options"),popoverProps:oo,icon:Pe,children:()=>De.jsx(tt,{children:De.jsx(ct,{onClick:()=>window.open(n,"_blank").focus(),icon:Ne,children:F(O("Report %s"),e.mediaType)})})})}function ro({onClose:e,onSubmit:t}){return De.jsxs(qe,{title:O("Insert external image"),onRequestClose:e,className:"block-editor-inserter-media-tab-media-preview-inserter-external-image-modal",children:[De.jsxs(Ye,{spacing:3,children:[De.jsx("p",{children:O("This image cannot be uploaded to your Media Library, but it can still be inserted as an external image.")}),De.jsx("p",{children:O("External images can be removed by the external provider without warning and could even have legal compliance issues related to privacy legislation.")})]}),De.jsxs(dt,{className:"block-editor-block-lock-modal__actions",justify:"flex-end",expanded:!1,children:[De.jsx(ut,{children:De.jsx(Le,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:e,children:O("Cancel")})}),De.jsx(ut,{children:De.jsx(Le,{__next40pxDefaultSize:!0,variant:"primary",onClick:t,children:O("Insert")})})]})]})}function lo({media:e,onClick:t,category:n}){const[o,s]=Oe.useState(!1),[r,l]=Oe.useState(!1),[i,a]=Oe.useState(!1),[c,d]=Oe.useMemo(()=>to(e,n.mediaType),[e,n.mediaType]),{createErrorNotice:u,createSuccessNotice:p}=V(xe),{getSettings:m,getBlock:h}=U(E),{updateBlockAttributes:b}=V(E),k=Oe.useCallback(e=>{if(i)return;const n=m(),o=g(e),{id:r,url:l,caption:c}=o.attributes;r||n.mediaUpload?r?t(o):(a(!0),window.fetch(l).then(e=>e.blob()).then(e=>{const s=Be(l)||"image.jpg",r=new File([e],s,{type:e.type});n.mediaUpload({filesList:[r],additionalData:{caption:c},onFileChange([e]){we(e.url)||(h(o.clientId)?b(o.clientId,{...o.attributes,id:e.id,url:e.url}):(t({...o,attributes:{...o.attributes,id:e.id,url:e.url}}),p(O("Image uploaded and inserted."),{type:"snackbar",id:"inserter-notice"})),a(!1))},allowedTypes:no,onError(e){u(e,{type:"snackbar",id:"inserter-notice"}),a(!1)}})}).catch(()=>{s(!0),a(!1)})):s(!0)},[i,m,t,p,b,u,h]),x="string"==typeof e.title?e.title:e.title?.rendered||O("no title");let f;if(x.length>25){const e="...";f=x.slice(0,25-e.length)+e}const j=Oe.useCallback(()=>l(!0),[]),y=Oe.useCallback(()=>l(!1),[]);return De.jsxs(De.Fragment,{children:[De.jsx(Sn,{isEnabled:!0,blocks:[c],children:({draggable:t,onDragStart:o,onDragEnd:s})=>De.jsx("div",{className:yt("block-editor-inserter__media-list__list-item",{"is-hovered":r}),draggable:t,onDragStart:o,onDragEnd:s,children:De.jsxs("div",{onMouseEnter:j,onMouseLeave:y,children:[De.jsx(at,{text:f||x,children:De.jsx(Re.Item,{render:De.jsx("div",{"aria-label":x,role:"option",className:"block-editor-inserter__media-list__item"}),onClick:()=>k(c),children:De.jsxs("div",{className:"block-editor-inserter__media-list__item-preview",children:[d,i&&De.jsx("div",{className:"block-editor-inserter__media-list__item-preview-spinner",children:De.jsx(it,{})})]})})}),!i&&De.jsx(so,{category:n,media:e})]})})}),o&&De.jsx(ro,{onClose:()=>s(!1),onSubmit:()=>{t(g(c)),p(O("Image inserted."),{type:"snackbar",id:"inserter-notice"}),s(!1)}})]})}function io({mediaList:e,category:t,onClick:n,label:o=O("Media List")}){return De.jsx(Re,{role:"listbox",className:"block-editor-inserter__media-list","aria-label":o,children:e.map((e,o)=>De.jsx(lo,{media:e,category:t,onClick:n},e.id||e.sourceId||o))})}function ao({rootClientId:e,onInsert:t,category:n}){const[o,s,r]=I(),{mediaList:l,isLoading:i}=function(e,t={}){const[n,o]=Oe.useState(),[s,r]=Oe.useState(!1),l=Oe.useRef();return Oe.useEffect(()=>{(async()=>{const n=JSON.stringify({category:e.name,...t});l.current=n,r(!0),o([]);const s=await(e.fetch?.(t));n===l.current&&(o(s),r(!1))})()},[e.name,...Object.values(t)]),{mediaList:n,isLoading:s}}(n,{per_page:r?20:10,search:r}),a="block-editor-inserter__media-panel",c=n.labels.search_items||O("Search");return De.jsxs("div",{className:a,children:[De.jsx(Ve,{__nextHasNoMarginBottom:!0,className:`${a}-search`,onChange:s,value:o,label:c,placeholder:c}),i&&De.jsx("div",{className:`${a}-spinner`,children:De.jsx(it,{})}),!i&&!l?.length&&De.jsx(wn,{}),!i&&!!l?.length&&De.jsx(io,{rootClientId:e,onClick:t,mediaList:l,category:n})]})}const co=["image","video","audio"];function uo({rootClientId:e,selectedCategory:t,onSelectCategory:n,onInsert:o,children:s}){const r=function(e){const[t,n]=Oe.useState([]),o=U(e=>z(e(E)).getInserterMediaCategories(),[]),{canInsertImage:s,canInsertVideo:r,canInsertAudio:l}=U(t=>{const{canInsertBlockType:n}=t(E);return{canInsertImage:n("core/image",e),canInsertVideo:n("core/video",e),canInsertAudio:n("core/audio",e)}},[e]);return Oe.useEffect(()=>{(async()=>{const e=[];if(!o)return;const t=new Map(await Promise.all(o.map(async e=>{if(e.isExternalResource)return[e.name,!0];let t=[];try{t=await e.fetch({per_page:1})}catch(n){}return[e.name,!!t.length]}))),i={image:s,video:r,audio:l};o.forEach(n=>{i[n.mediaType]&&t.get(n.name)&&e.push(n)}),e.length&&n(e)})()},[s,r,l,o]),t}(e),l=y("medium","<"),i=Oe.useCallback(e=>{if(!e?.url)return;const[t]=to(e,e.type);o(t)},[o]),a=Oe.useMemo(()=>r.map(e=>({...e,label:e.labels.name})),[r]);return a.length?De.jsxs(De.Fragment,{children:[!l&&De.jsxs("div",{className:"block-editor-inserter__media-tabs-container",children:[De.jsx(Zn,{categories:a,selectedCategory:t,onSelectCategory:n,children:s}),De.jsx(Ft,{children:De.jsx(Rt,{multiple:!1,onSelect:i,allowedTypes:co,render:({open:e})=>De.jsx(Le,{__next40pxDefaultSize:!0,onClick:t=>{t.target.focus(),e()},className:"block-editor-inserter__media-library-button",variant:"secondary","data-unstable-ignore-focus-outside-for-relatedtarget":".media-modal",children:O("Open Media Library")})})})]}),l&&De.jsx(qn,{categories:a,children:t=>De.jsx(ao,{onInsert:o,rootClientId:e,category:t})})]}):De.jsx(wn,{})}const{Fill:go,Slot:po}=gt("__unstableInserterMenuExtension");go.Slot=po;const mo=[];function ho({filterValue:e,onSelect:t,onHover:n,onHoverPattern:o,rootClientId:s,clientId:r,isAppender:l,__experimentalInsertionIndex:i,maxBlockPatterns:a,maxBlockTypes:c,showBlockDirectory:d=!1,isDraggable:u=!0,shouldFocusBlock:g=!0,prioritizePatterns:p,selectBlockOnInsert:m,isQuick:h}){const b=f(fe,500),{prioritizedBlocks:x}=U(e=>{const t=e(E).getBlockListSettings(s);return{prioritizedBlocks:t?.prioritizedInserterBlocks||mo}},[s]),[j,y]=Dn({onSelect:t,rootClientId:s,clientId:r,isAppender:l,insertionIndex:i,shouldFocusBlock:g,selectBlockOnInsert:m}),[I,C,_,S]=bn(j,y,h),[v,,B]=Fn(y,j),w=Oe.useMemo(()=>{if(0===a)return[];const t=mn(v,e);return void 0!==a?t.slice(0,a):t},[e,v,a]);let N=c;p&&w.length>2&&(N=0);const T=Oe.useMemo(()=>{if(0===N)return[];const t=I.filter(e=>"core/block"!==e.name);let n=P(t,"frecency","desc");!e&&x.length&&(n=kn(n,x));const o=pn(n,C,_,e);return void 0!==N?o.slice(0,N):o},[e,I,C,_,N,x]);Oe.useEffect(()=>{if(!e)return;const t=T.length+w.length,n=F(R("%d result found.","%d results found.",t),t);b(n)},[e,b,T,w]);const M=k(T,{step:9}),A=k(M.length===T.length?w:mo),D=T.length>0||w.length>0,L=!!T.length&&De.jsx(Bn,{title:De.jsx(pt,{children:O("Blocks")}),children:De.jsx(X,{items:M,onSelect:S,onHover:n,label:O("Blocks"),isDraggable:u})}),H=!!w.length&&De.jsx(Bn,{title:De.jsx(pt,{children:O("Block patterns")}),children:De.jsx("div",{className:"block-editor-inserter__quick-inserter-patterns",children:De.jsx(Pt,{shownPatterns:A,blockPatterns:w,onClickPattern:B,onHover:o,isDraggable:u})})});return De.jsxs(_n,{children:[!d&&!D&&De.jsx(wn,{}),p?H:L,!!T.length&&!!w.length&&De.jsx("div",{className:"block-editor-inserter__quick-inserter-separator"}),p?L:H,d&&De.jsx(go.Slot,{fillProps:{onSelect:S,onHover:n,filterValue:e,hasItems:D,rootClientId:j},children:e=>e.length?e:D?null:De.jsx(wn,{})})]})}const bo=()=>{};const ko=Oe.forwardRef(function({rootClientId:e,clientId:t,isAppender:n,__experimentalInsertionIndex:o,onSelect:s,showInserterHelpPanel:r,showMostUsedBlocks:l,__experimentalFilterValue:i="",shouldFocusBlock:a=!0,onPatternCategorySelection:c,onClose:d,__experimentalInitialTab:u,__experimentalInitialCategory:g},p){const m=U(e=>"zoom-out"===e(E).__unstableGetEditorMode(),[]),[h,b,k]=I(i),[x,f]=Oe.useState(null),[j,y]=Oe.useState(g),[C,_]=Oe.useState("all"),[S,v]=Oe.useState(null),[B,w]=Oe.useState(u||(m?"patterns":void 0)),[P,N,T]=Dn({rootClientId:e,clientId:t,isAppender:n,insertionIndex:o,shouldFocusBlock:a}),M=Oe.useRef(),A=Oe.useCallback((e,t,n,o)=>{N(e,t,n,o),s(e),window.requestAnimationFrame(()=>{a||M.current?.contains(p.current.ownerDocument.activeElement)||M.current?.querySelector("button").focus()})},[N,s,a]),D=Oe.useCallback((e,t,...n)=>{T(!1),N(e,{patternName:t},...n),s()},[N,s]),F=Oe.useCallback(e=>{T(e),f(e)},[T,f]),R=Oe.useCallback((e,t)=>{y(e),_(t),c?.()},[y,c]),L="patterns"===B&&!k&&!!j,H="media"===B&&!!S,z=Oe.useMemo(()=>"media"===B?null:De.jsxs(De.Fragment,{children:[De.jsx(Ve,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",onChange:e=>{x&&f(null),b(e)},value:h,label:O("Search for blocks and patterns"),placeholder:O("Search")}),!!k&&De.jsx(ho,{filterValue:k,onSelect:s,onHover:F,rootClientId:e,clientId:t,isAppender:n,__experimentalInsertionIndex:o,showBlockDirectory:!0,shouldFocusBlock:a,prioritizePatterns:"patterns"===B})]}),[B,x,f,b,h,k,s,F,a,t,e,o,n]),V=Oe.useMemo(()=>De.jsxs(De.Fragment,{children:[De.jsx("div",{className:"block-editor-inserter__block-list",children:De.jsx(Tn,{ref:M,rootClientId:P,onInsert:A,onHover:F,showMostUsedBlocks:l})}),r&&De.jsxs("div",{className:"block-editor-inserter__tips",children:[De.jsx(pt,{as:"h2",children:O("A tip for using the block editor")}),De.jsx(fn,{})]})]}),[P,A,F,l,r]),G=Oe.useMemo(()=>De.jsx(Jn,{rootClientId:P,onInsert:D,onSelectCategory:R,selectedCategory:j,children:L&&De.jsx($n,{rootClientId:P,onInsert:D,category:j,patternFilter:C,showTitlesAsTooltip:!0})}),[P,D,R,C,j,L]),q=Oe.useMemo(()=>De.jsx(uo,{rootClientId:P,selectedCategory:S,onSelectCategory:v,onInsert:A,children:H&&De.jsx(ao,{rootClientId:P,onInsert:A,category:S})}),[P,A,S,v,H]),W=Oe.useRef();return Oe.useLayoutEffect(()=>{W.current&&window.requestAnimationFrame(()=>{W.current.querySelector('[role="tab"][aria-selected="true"]')?.focus()})},[]),De.jsxs("div",{className:yt("block-editor-inserter__menu",{"show-panel":L||H,"is-zoom-out":m}),ref:p,children:[De.jsx("div",{className:"block-editor-inserter__main-area",children:De.jsx($,{ref:W,onSelect:e=>{"patterns"!==e&&y(null),w(e)},onClose:d,selectedTab:B,closeButtonLabel:O("Close block inserter"),tabs:[{name:"blocks",title:O("Blocks"),panel:De.jsxs(De.Fragment,{children:[z,"blocks"===B&&!k&&V]})},{name:"patterns",title:O("Patterns"),panel:De.jsxs(De.Fragment,{children:[z,"patterns"===B&&!k&&G]})},{name:"media",title:O("Media"),panel:De.jsxs(De.Fragment,{children:[z,q]})}]})}),r&&x&&De.jsx(mt,{className:"block-editor-inserter__preview-container__popover",placement:"right-start",offset:16,focusOnMount:!1,animate:!1,children:De.jsx(jn,{item:x})})]})});const xo=Oe.forwardRef(function(e,t){return De.jsx(ko,{...e,onPatternCategorySelection:bo,ref:t})});function fo({onSelect:e,rootClientId:t,clientId:n,isAppender:o,prioritizePatterns:s,selectBlockOnInsert:r,hasSearch:l=!0}){const[i,a]=Oe.useState(""),[c,d]=Dn({onSelect:e,rootClientId:t,clientId:n,isAppender:o,selectBlockOnInsert:r}),[u]=bn(c,d,!0),[g]=Fn(d,c,void 0,!0),{setInserterIsOpened:p,insertionIndex:m}=U(e=>{const{getSettings:t,getBlockIndex:o,getBlockCount:s}=e(E),r=t(),l=o(n),i=s();return{setInserterIsOpened:r.__experimentalSetIsInserterOpened,insertionIndex:-1===l?i:l}},[n]),h=g.length&&(!!i||s),b=l&&(h&&g.length>6||u.length>6);Oe.useEffect(()=>{p&&p(!1)},[p]);let k=0;return h&&(k=s?4:2),De.jsxs("div",{className:yt("block-editor-inserter__quick-inserter",{"has-search":b,"has-expand":p}),children:[b&&De.jsx(Ve,{__nextHasNoMarginBottom:!0,className:"block-editor-inserter__search",value:i,onChange:e=>{a(e)},label:O("Search for blocks and patterns"),placeholder:O("Search")}),De.jsx("div",{className:"block-editor-inserter__quick-inserter-results",children:De.jsx(ho,{filterValue:i,onSelect:e,rootClientId:t,clientId:n,isAppender:o,maxBlockPatterns:k,maxBlockTypes:6,isDraggable:!1,prioritizePatterns:s,selectBlockOnInsert:r,isQuick:!0})}),p&&De.jsx(Le,{__next40pxDefaultSize:!0,className:"block-editor-inserter__quick-inserter-expand",onClick:()=>{p({filterValue:i,onSelect:e,rootClientId:t,insertionIndex:m})},"aria-label":O("Browse all. This will open the main inserter panel in the editor toolbar."),children:O("Browse all")})]})}const jo=({onToggle:e,disabled:t,isOpen:n,blockTitle:o,hasSingleBlockType:s,toggleProps:r={},prioritizePatterns:l})=>{const{as:i=Le,label:a,onClick:c,...d}=r;let u=a;return!u&&s?u=F(D("Add %s","directly add the only allowed block"),o):!u&&l?u=O("Add pattern"):u||(u=D("Add block","Generic label for block inserter button")),De.jsx(i,{icon:Te,label:u,tooltipPosition:"bottom",onClick:function(t){e&&e(t),c&&c(t)},className:"block-editor-inserter__toggle","aria-haspopup":!s&&"true","aria-expanded":!s&&n,disabled:t,...d})};class yo extends Oe.Component{constructor(){super(...arguments),this.onToggle=this.onToggle.bind(this),this.renderToggle=this.renderToggle.bind(this),this.renderContent=this.renderContent.bind(this)}onToggle(e){const{onToggle:t}=this.props;t&&t(e)}renderToggle({onToggle:e,isOpen:t}){const{disabled:n,blockTitle:o,hasSingleBlockType:s,directInsertBlock:r,toggleProps:l,hasItems:i,renderToggle:a=jo,prioritizePatterns:c}=this.props;return a({onToggle:e,isOpen:t,disabled:n||!i,blockTitle:o,hasSingleBlockType:s,directInsertBlock:r,toggleProps:l,prioritizePatterns:c})}renderContent({onClose:e}){const{rootClientId:t,clientId:n,isAppender:o,showInserterHelpPanel:s,__experimentalIsQuick:r,prioritizePatterns:l,onSelectOrClose:i,selectBlockOnInsert:a}=this.props;return r?De.jsx(fo,{onSelect:t=>{const n=Array.isArray(t)&&t?.length?t[0]:t;i&&"function"==typeof i&&i(n),e()},rootClientId:t,clientId:n,isAppender:o,prioritizePatterns:l,selectBlockOnInsert:a}):De.jsx(xo,{onSelect:()=>{e()},rootClientId:t,clientId:n,isAppender:o,showInserterHelpPanel:s})}render(){const{position:e,hasSingleBlockType:t,directInsertBlock:n,insertOnlyAllowedBlock:o,__experimentalIsQuick:s,onSelectOrClose:r}=this.props;return t||n?this.renderToggle({onToggle:o}):De.jsx(ht,{className:"block-editor-inserter",contentClassName:yt("block-editor-inserter__popover",{"is-quick":s}),popoverProps:{position:e,shift:!0},onToggle:this.onToggle,expandOnMobile:!0,headerTitle:O("Add a block"),renderToggle:this.renderToggle,renderContent:this.renderContent,onClose:r})}}const Io=C([Y((e,{clientId:t,rootClientId:o,shouldDirectInsert:s=!0})=>{const{getBlockRootClientId:r,hasInserterItems:l,getAllowedBlocks:i,getDirectInsertBlock:a,getSettings:c}=e(E),{getBlockVariations:d}=e(n),u=i(o=o||r(t)||void 0),g=s&&a(o),p=c(),m=1===u?.length&&0===d(u[0].name,"inserter")?.length;let h=!1;return m&&(h=u[0]),{hasItems:l(o),hasSingleBlockType:m,blockTitle:h?h.title:"",allowedBlockType:h,directInsertBlock:g,rootClientId:o,prioritizePatterns:p.__experimentalPreferPatternsOnRoot&&!o}}),Z((e,t,{select:n})=>({insertOnlyAllowedBlock(){const{rootClientId:o,clientId:s,isAppender:l,hasSingleBlockType:i,allowedBlockType:a,directInsertBlock:c,onSelectOrClose:d,selectBlockOnInsert:u}=t;if(!i&&!c)return;const{insertBlock:g}=e(E);let p;if(c){const e=function(e){const{getBlock:t,getPreviousBlockClientId:r}=n(E);if(!e||!s&&!o)return{};const l={};let i={};if(s){const e=t(s),n=t(r(s));e?.name===n?.name&&(i=n?.attributes||{})}else{const e=t(o);if(e?.innerBlocks?.length){const t=e.innerBlocks[e.innerBlocks.length-1];c&&c?.name===t.name&&(i=t.attributes)}}return e.forEach(e=>{i.hasOwnProperty(e)&&(l[e]=i[e])}),l}(c.attributesToCopy);p=r(c.name,{...c.attributes||{},...e})}else p=r(a.name);g(p,function(){const{getBlockIndex:e,getBlockSelectionEnd:t,getBlockOrder:r,getBlockRootClientId:i}=n(E);if(s)return e(s);const a=t();return!l&&a&&i(a)===o?e(a)+1:r(o).length}(),o,u),d&&d({clientId:p?.clientId});const m=F(O("%s block added"),a.title);fe(m)}})),_(({hasItems:e,isAppender:t,rootClientId:n,clientId:o})=>e||!t&&!n&&!o)])(yo),{clearTimeout:Co,setTimeout:_o}=window;function So({ref:e,isFocused:t,highlightParent:n,debounceTimeout:o=200}){const{getSelectedBlockClientId:s,getBlockRootClientId:r}=U(E),{toggleBlockHighlight:l}=V(E),i=Oe.useRef(),a=U(e=>e(E).getSettings().isDistractionFree,[]),c=e=>{if(e&&a)return;const t=s(),o=n?r(t):t;l(o,e)},d=()=>{const n=e?.current&&e.current.matches(":hover");return!t&&!n},u=()=>{const e=i.current;e&&Co&&Co(e)};return Oe.useEffect(()=>()=>{c(!1),u()},[]),{debouncedShowGestures:e=>{e&&e.stopPropagation(),u(),c(!0)},debouncedHideGestures:e=>{e&&e.stopPropagation(),u(),i.current=_o(()=>{d()&&c(!1)},o)}}}function vo({ref:e,highlightParent:t=!1,debounceTimeout:n=200}){const[o,s]=Oe.useState(!1),{debouncedShowGestures:r,debouncedHideGestures:l}=So({ref:e,debounceTimeout:n,isFocused:o,highlightParent:t}),i=Oe.useRef(!1),a=()=>e?.current&&e.current.contains(e.current.ownerDocument.activeElement);return Oe.useEffect(()=>{const t=e.current,n=()=>{a()&&(s(!0),r())},o=()=>{a()||(s(!1),l())};return t&&!i.current&&(t.addEventListener("focus",n,!0),t.addEventListener("blur",o,!0),i.current=!0),()=>{t&&(t.removeEventListener("focus",n),t.removeEventListener("blur",o))}},[e,i,s,r,l]),{onMouseMove:r,onMouseLeave:l}}const{Fill:Bo,Slot:wo}=gt("__unstableBlockToolbarLastItem");function Po({clientId:e}){const t=U(t=>t(E).getBlock(e),[e]),{replaceBlocks:n}=V(E);return t&&"core/html"===t.name?De.jsx(ct,{onClick:()=>n(e,p({HTML:m(t)})),children:O("Convert to Blocks")}):null}Bo.Slot=wo;const{Fill:No,Slot:To}=gt("__unstableBlockSettingsMenuFirstItem");No.Slot=To;const Mo=()=>{};function Eo({clientId:t,onToggle:n=Mo}){const{blockType:s,mode:r,isCodeEditingEnabled:l}=U(e=>{const{getBlock:n,getBlockMode:s,getSettings:r}=e(E),l=n(t);return{mode:s(t),blockType:l?o(l.name):null,isCodeEditingEnabled:r().codeEditingEnabled}},[t]),{toggleBlockMode:i}=V(E);if(!s||!e(s,"html",!0)||!l)return null;const a=O("visual"===r?"Edit as HTML":"Edit visually");return De.jsx(ct,{onClick:()=>{i(t),n()},children:a})}const{Fill:Ao,Slot:Oo}=gt("BlockSettingsMenuControls");function Do({...e}){return De.jsx(bt,{document:document,children:De.jsx(Ao,{...e})})}function Fo({parentClientId:e,parentBlockType:t}){const n=y("medium","<"),{selectBlock:o}=V(E),s=Oe.useRef(),r=vo({ref:s,highlightParent:!0});return n?De.jsx(ct,{...r,ref:s,icon:De.jsx(W,{icon:t.icon}),onClick:()=>o(e),children:F(O("Select parent block (%s)"),t.title)}):null}Do.Slot=({fillProps:e,clientIds:t=null})=>{const{selectedBlocks:n,selectedClientIds:o,isContentOnly:s}=U(e=>{const{getBlockNamesByClientId:n,getSelectedBlockClientIds:o,getBlockEditingMode:s}=e(E),r=null!==t?t:o();return{selectedBlocks:n(r),selectedClientIds:r,isContentOnly:"contentOnly"===s(r[0])}},[t]),{canLock:r}=J(o[0]),{canRename:l}=ee(n[0]),i=1===o.length&&r&&!s,a=1===o.length&&l&&!s,c=It(o),{isGroupable:d,isUngroupable:u}=c,g=d||u;return De.jsx(Oo,{fillProps:{...e,selectedBlocks:n,selectedClientIds:o},children:t=>!t?.length>0&&!g&&!i?null:De.jsxs(tt,{children:[g&&De.jsx(Ct,{...c,onClose:e?.onClose}),i&&De.jsx(St,{clientId:o[0]}),a&&De.jsx(te,{clientId:o[0]}),t,1===o.length&&De.jsx(vt,{clientId:o[0],onClose:e?.onClose}),1===e?.count&&!s&&De.jsx(Eo,{clientId:e?.firstBlockClientId,onToggle:e?.onClose})]})})};const Ro={className:"block-editor-block-settings-menu__popover",placement:"bottom-start"};function Lo({clientIds:e,onCopy:t,label:n,shortcut:o}){const{getBlocksByClientId:s}=U(E),r=v(()=>c(s(e)),t),l=n||O("Copy");return De.jsx(ct,{ref:r,shortcut:o,children:l})}function Ho({block:e,clientIds:t,children:s,__experimentalSelectBlock:r,...l}){const i=e?.clientId,a=t.length,c=t[0],{firstParentClientId:d,parentBlockType:u,previousBlockClientId:g,selectedBlockClientIds:p,openedBlockSettingsMenu:m,isContentOnly:h}=U(e=>{const{getBlockName:t,getBlockRootClientId:s,getPreviousBlockClientId:r,getSelectedBlockClientIds:l,getBlockAttributes:i,getOpenedBlockSettingsMenu:a,getBlockEditingMode:d}=z(e(E)),{getActiveBlockVariation:u}=e(n),g=s(c),p=g&&t(g);return{firstParentClientId:g,parentBlockType:g&&(u(p,i(g))||o(p)),previousBlockClientId:r(c),selectedBlockClientIds:l(),openedBlockSettingsMenu:a(),isContentOnly:"contentOnly"===d(c)}},[c]),{getBlockOrder:b,getSelectedBlockClientIds:k}=U(E),{setOpenedBlockSettingsMenu:x}=z(V(E)),f=U(e=>{const{getShortcutRepresentation:t}=e(Me);return{duplicate:t("core/block-editor/duplicate"),remove:t("core/block-editor/remove"),insertAfter:t("core/block-editor/insert-after"),insertBefore:t("core/block-editor/insert-before")}},[]),j=p.length>0;async function y(e){if(!r)return;const t=await e;t&&t[0]&&r(t[0],!1)}function I(){if(!r)return;let e=g||d;e||(e=b()[0]);const t=j&&0===k().length;r(e,t)}const C=p?.includes(d),_=i?m===i||!1:void 0;function v(e){e&&m!==i?x(i):!e&&m&&m===i&&x(void 0)}const B=!C&&!!d;return De.jsx(A,{clientIds:t,__experimentalUpdateSelection:!r,children:({canCopyStyles:e,canDuplicate:n,canInsertBlock:o,canRemove:r,onDuplicate:i,onInsertAfter:g,onInsertBefore:p,onRemove:m,onCopy:b,onPasteStyles:k})=>!r&&!n&&!o&&h?null:De.jsx(et,{icon:Pe,label:O("Options"),className:"block-editor-block-settings-menu",popoverProps:Ro,open:_,onToggle:v,noIcons:!0,...l,children:({onClose:l})=>De.jsxs(De.Fragment,{children:[De.jsxs(tt,{children:[De.jsx(No.Slot,{fillProps:{onClose:l}}),B&&De.jsx(Fo,{parentClientId:d,parentBlockType:u}),1===a&&De.jsx(Po,{clientId:c}),!h&&De.jsx(Lo,{clientIds:t,onCopy:b,shortcut:ne.primary("c")}),n&&De.jsx(ct,{onClick:S(l,i,y),shortcut:f.duplicate,children:O("Duplicate")}),o&&!h&&De.jsxs(De.Fragment,{children:[De.jsx(ct,{onClick:S(l,p),shortcut:f.insertBefore,children:O("Add before")}),De.jsx(ct,{onClick:S(l,g),shortcut:f.insertAfter,children:O("Add after")})]})]}),e&&!h&&De.jsxs(tt,{children:[De.jsx(Lo,{clientIds:t,onCopy:b,label:O("Copy styles")}),De.jsx(ct,{onClick:k,children:O("Paste styles")})]}),De.jsx(Do.Slot,{fillProps:{onClose:l,count:a,firstBlockClientId:c},clientIds:t}),"function"==typeof s?s({onClose:l}):Oe.Children.map(e=>Oe.cloneElement(e,{onClose:l})),r&&De.jsx(tt,{children:De.jsx(ct,{onClick:S(l,m,I),shortcut:f.remove,children:O("Delete")})})]})})})}function Uo({clientIds:e,...t}){return De.jsx(kt,{children:De.jsx(xt,{children:n=>De.jsx(Ho,{clientIds:e,toggleProps:n,...t})})})}const zo=Oe.createContext("");function Vo(){const{isToolbarEnabled:t,isBlockDisabled:n}=U(t=>{const{getBlockEditingMode:n,getBlockName:s,getBlockSelectionStart:r}=t(E),l=r(),i=l&&o(s(l));return{isToolbarEnabled:i&&e(i,"__experimentalToolbar",!0),isBlockDisabled:"disabled"===n(l)}},[]);return!(!t||n)}function Go({hideDragHandle:t,focusOnMount:n,__experimentalInitialIndex:s,__experimentalOnIndexChange:r,variant:l="unstyled"}){const{blockClientId:a,blockClientIds:c,isDefaultEditingMode:u,blockType:g,toolbarKey:p,shouldShowVisualToolbar:m,showParentSelector:h,isUsingBindings:b,hasParentPattern:k,hasContentOnlyLocking:x}=U(t=>{const{getBlockName:n,getBlockMode:s,getBlockParents:r,getSelectedBlockClientIds:l,isBlockValid:i,getBlockEditingMode:a,getBlockAttributes:c,getBlockParentsByBlockName:d,getTemplateLock:u,getParentSectionBlock:g}=z(t(E)),p=l(),m=p[0],h=r(m),b=g(m),k=null!=b?b:h[h.length-1],x=n(k),f=o(x),j="default"===a(m),y=n(m),I=p.every(e=>i(e)),C=p.every(e=>"visual"===s(e)),_=p.every(e=>!!c(e)?.metadata?.bindings),S=p.every(e=>d(e,"core/block",!0).length>0),v=p.some(e=>"contentOnly"===u(e));return{blockClientId:m,blockClientIds:p,isDefaultEditingMode:j,blockType:m&&o(y),shouldShowVisualToolbar:I&&C,toolbarKey:`${m}${k}`,showParentSelector:f&&"disabled"!==a(k)&&e(f,"__experimentalParentSelector",!0)&&1===p.length,isUsingBindings:_,hasParentPattern:S,hasContentOnlyLocking:v}},[]),f=Oe.useRef(null),j=Oe.useRef(),I=vo({ref:j}),C=!y("medium","<");if(!Vo())return null;const _=c.length>1,S=i(g)||d(g),v=yt("block-editor-block-contextual-toolbar",{"has-parent":h}),B=yt("block-editor-block-toolbar",{"is-synced":S,"is-connected":b});return De.jsx(oe,{focusEditorOnEscape:!0,className:v,"aria-label":O("Block tools"),variant:"toolbar"===l?void 0:l,focusOnMount:n,__experimentalInitialIndex:s,__experimentalOnIndexChange:r,children:De.jsxs("div",{ref:f,className:B,children:[!_&&C&&De.jsx(se,{}),(m||_)&&!k&&De.jsx("div",{ref:j,...I,children:De.jsxs(kt,{className:"block-editor-block-toolbar__block-controls",children:[De.jsx(re,{clientIds:c}),!_&&u&&De.jsx(le,{clientId:a}),De.jsx(ie,{clientIds:c,hideDragHandle:t})]})}),!x&&m&&_&&De.jsx(_t,{}),m&&De.jsxs(De.Fragment,{children:[De.jsx(ae.Slot,{group:"parent",className:"block-editor-block-toolbar__slot"}),De.jsx(ae.Slot,{group:"block",className:"block-editor-block-toolbar__slot"}),De.jsx(ae.Slot,{className:"block-editor-block-toolbar__slot"}),De.jsx(ae.Slot,{group:"inline",className:"block-editor-block-toolbar__slot"}),De.jsx(ae.Slot,{group:"other",className:"block-editor-block-toolbar__slot"}),De.jsx(zo.Provider,{value:g?.name,children:De.jsx(Bo.Slot,{})})]}),De.jsx(ce,{clientIds:c}),De.jsx(Uo,{clientIds:c})]})},p)}function qo({hideDragHandle:e,variant:t}){return De.jsx(Go,{hideDragHandle:e,variant:t,focusOnMount:void 0,__experimentalInitialIndex:void 0,__experimentalOnIndexChange:void 0})}const Wo=[];function Ko(e){return De.jsx(kt,{children:De.jsx(ft,{...e})})}function Qo({clientId:e,as:t=Ko}){const{categories:n,patterns:o,patternName:s}=U(t=>{const{getBlockAttributes:n,getBlockRootClientId:o,__experimentalGetAllowedPatterns:s}=t(E),r=n(e),l=r?.metadata?.categories||Wo,i=r?.metadata?.patternName,a=o(e);return{categories:l,patterns:l.length>0?s(a):Wo,patternName:i}},[e]),{replaceBlocks:r}=V(E),l=Oe.useMemo(()=>0!==n.length&&o&&0!==o.length?o.filter(e=>{const t="core"===e.source||e.source?.startsWith("pattern-directory")&&"pattern-directory/theme"!==e.source;return 1===e.blocks.length&&!t&&e.categories?.some(e=>n.includes(e))&&("unsynced"===e.syncStatus||!e.id)}):Wo,[n,o]);if(l.length<2)return null;const i=t;return De.jsx(i,{label:O("Shuffle"),icon:Ee,className:"block-editor-block-toolbar-shuffle",onClick:()=>{const t=function(){const e=l.length,t=l.findIndex(({name:e})=>e===s);return l[t+1<e?t+1:0]}();t.blocks[0].attributes={...t.blocks[0].attributes,metadata:{...t.blocks[0].attributes.metadata,categories:n}},r(e,t.blocks)}})}function Xo({clientId:e}){return De.jsx(jt,{title:O("Styles"),children:De.jsx(Tt,{clientId:e})})}const $o=({showNoBlockSelectedMessage:e=!0})=>{const{count:t,selectedBlockName:n,selectedBlockClientId:s,blockType:r,isSectionBlock:l}=U(e=>{const{getSelectedBlockClientId:t,getSelectedBlockCount:n,getBlockName:s,getParentSectionBlock:r,isSectionBlock:l}=z(e(E)),i=r(t())||t(),a=i&&s(i),c=a&&o(a);return{count:n(),selectedBlockClientId:i,selectedBlockName:a,blockType:c,isSectionBlock:l(i)}},[]),i=de(r?.name),a=i?.length>1,c=function(e){return U(t=>{if(e){const n=t(E).getSettings().blockInspectorAnimation,o=n?.animationParent,{getSelectedBlockClientId:s,getBlockParentsByBlockName:r}=t(E);return r(s(),o,!0)[0]||e.name===o?n?.[e.name]:null}return null},[e])}(r),d=Et({blockName:n});if(t>1&&!l)return De.jsxs("div",{className:"block-editor-block-inspector",children:[De.jsx(Bt,{}),a?De.jsx(ue,{tabs:i}):De.jsxs(De.Fragment,{children:[De.jsx(ge.Slot,{}),De.jsx(ge.Slot,{group:"color",label:O("Color"),className:"color-block-support-panel__inner-wrapper"}),De.jsx(ge.Slot,{group:"background",label:O("Background image")}),De.jsx(ge.Slot,{group:"typography",label:O("Typography")}),De.jsx(ge.Slot,{group:"dimensions",label:O("Dimensions")}),De.jsx(ge.Slot,{group:"border",label:d}),De.jsx(ge.Slot,{group:"styles"})]})]});const u=n===h();return r&&s&&!u?De.jsx(Yo,{animate:c,wrapper:e=>De.jsx(Zo,{blockInspectorAnimationSettings:c,selectedBlockClientId:s,children:e}),children:De.jsx(Jo,{clientId:s,blockName:r.name,isSectionBlock:l})}):e?De.jsx("span",{className:"block-editor-block-inspector__no-blocks",children:O("No block selected.")}):null},Yo=({animate:e,wrapper:t,children:n})=>e?t(n):n,Zo=({blockInspectorAnimationSettings:e,selectedBlockClientId:t,children:n})=>{const o=e&&"leftToRight"===e.enterDirection?-50:50;return De.jsx(rt.div,{animate:{x:0,opacity:1,transition:{ease:"easeInOut",duration:.14}},initial:{x:o,opacity:0},children:n},t)},Jo=({clientId:e,blockName:t,isSectionBlock:o})=>{const s=de(t),r=!o&&s?.length>1,l=U(e=>{const{getBlockStyles:o}=e(n),s=o(t);return s&&s.length>0},[t]),i=pe(e),a=Et({blockName:t}),c=U(t=>{if(!o)return;const{getClientIdsOfDescendants:n,getBlockName:s,getBlockEditingMode:r}=t(E);return n(e).filter(e=>"core/list-item"!==s(e)&&"contentOnly"===r(e))},[o,e]);return De.jsxs("div",{className:"block-editor-block-inspector",children:[De.jsx(q,{...i,className:i.isSynced&&"is-synced"}),De.jsx(wt,{blockClientId:e}),De.jsx(me.Slot,{}),r&&De.jsx(ue,{hasBlockStyles:l,clientId:e,blockName:t,tabs:s}),!r&&De.jsxs(De.Fragment,{children:[l&&De.jsx(Xo,{clientId:e}),c&&c?.length>0&&De.jsx(jt,{title:O("Content"),children:De.jsx(Mt,{clientIds:c})}),!o&&De.jsxs(De.Fragment,{children:[De.jsx(ge.Slot,{}),De.jsx(ge.Slot,{group:"list"}),De.jsx(ge.Slot,{group:"color",label:O("Color"),className:"color-block-support-panel__inner-wrapper"}),De.jsx(ge.Slot,{group:"background",label:O("Background image")}),De.jsx(ge.Slot,{group:"typography",label:O("Typography")}),De.jsx(ge.Slot,{group:"dimensions",label:O("Dimensions")}),De.jsx(ge.Slot,{group:"border",label:a}),De.jsx(ge.Slot,{group:"styles"}),De.jsx(he,{}),De.jsx(ge.Slot,{group:"bindings"}),De.jsx("div",{children:De.jsx(be,{})})]})]}),De.jsx(ke,{},"back")]})},es=()=>{};const ts=Oe.forwardRef(function({rootClientId:e,clientId:t,isAppender:n,showInserterHelpPanel:o,showMostUsedBlocks:s=!1,__experimentalInsertionIndex:r,__experimentalInitialTab:l,__experimentalInitialCategory:i,__experimentalFilterValue:a,onPatternCategorySelection:c,onSelect:d=es,shouldFocusBlock:u=!1,onClose:g},p){const{destinationRootClientId:m}=U(n=>{const{getBlockRootClientId:o}=n(E);return{destinationRootClientId:e||o(t)||void 0}},[t,e]);return De.jsx(ko,{onSelect:d,rootClientId:m,clientId:t,isAppender:n,showInserterHelpPanel:o,showMostUsedBlocks:s,__experimentalInsertionIndex:r,__experimentalFilterValue:a,onPatternCategorySelection:c,__experimentalInitialTab:l,__experimentalInitialCategory:i,shouldFocusBlock:u,ref:p,onClose:g})});const ns=Oe.forwardRef(function(e,t){return De.jsx(ts,{...e,onPatternCategorySelection:void 0,ref:t})});export{Ho as B,Io as I,ts as P,fo as Q,Qo as S,No as _,Go as a,bn as b,yn as c,In as d,dn as e,vn as f,gn as g,vo as h,Bo as i,zo as j,go as k,$o as l,Uo as m,un as n,kn as o,Do as p,qo as q,ns as r,pn as s,Sn as t,Vo as u,Vt as v,jn as w,Zt as x,zt as y};
