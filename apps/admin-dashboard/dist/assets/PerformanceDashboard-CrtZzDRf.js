import{r as b,j as e,bv as U,dq as F,dr as w,dp as q,bO as f,bJ as C,Z as o,bu as $,ds as A}from"./vendor-react-LfmQXg7x.js";import{a as P}from"./vendor-query-D_Ku9Rpr.js";import{B,C as t,k as r,l as i,m as l,P as h,a as I,b as S,d as j,e as p,t as g}from"./page-gutenberg-Bgd5YFXg.js";import{a as R}from"./api-client-B2LQaTYj.js";import"./wp-blocks-CxaEvwYA.js";import"./wp-i18n-DqTnaU2e.js";import"./wp-core-B49sp2kV.js";import"./vendor-ui-BkLtITBR.js";import"./wp-misc-ifGAUd0I.js";import"./wp-data-DJ51zZuL.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-utils-DQ8F5vJI.js";import"./wp-components-CCcEz8J1.js";function Y(){const[u,T]=b.useState(!0),[v]=b.useState(5e3),{data:s,isLoading:k,refetch:M}=P({queryKey:["performance-metrics"],queryFn:async()=>(await R.get("/monitoring/metrics")).data,refetchInterval:u?v:!1}),{data:n}=P({queryKey:["performance-history"],queryFn:async()=>(await R.get("/monitoring/metrics/history")).data,refetchInterval:u?v:!1}),c=a=>{const d=["B","KB","MB","GB","TB"];let m=a,x=0;for(;m>=1024&&x<d.length-1;)m/=1024,x++;return`${m.toFixed(2)} ${d[x]}`},D=a=>{const d=Math.floor(a/86400),m=Math.floor(a%86400/3600),x=Math.floor(a%3600/60);return`${d}d ${m}h ${x}m`},N=(a,d=!1)=>d?a<30?"text-green-500":a<70?"text-yellow-500":"text-red-500":a>90?"text-red-500":a>70?"text-yellow-500":"text-green-500",y=a=>a>90?"bg-red-500":a>70?"bg-yellow-500":"bg-green-500";return k||!s?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-admin-blue"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Performance Dashboard"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Real-time system performance monitoring"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm",children:"Auto Refresh"}),e.jsx("input",{type:"checkbox",checked:u,onChange:a=>T(a.target.checked),className:"rounded"})]}),e.jsxs(B,{variant:"outline",size:"sm",onClick:()=>M(),children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(t,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{className:"text-sm font-medium",children:"CPU Usage"}),e.jsx(F,{className:`w-4 h-4 ${N(s.cpu.usage)}`})]})}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.cpu.usage.toFixed(1),"%"]}),e.jsx(h,{value:s.cpu.usage,className:`mt-2 h-2 ${y(s.cpu.usage)}`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Load: ",s.cpu.loadAverage.map(a=>a.toFixed(2)).join(", ")]})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{className:"text-sm font-medium",children:"Memory Usage"}),e.jsx(w,{className:`w-4 h-4 ${N(s.memory.percentage)}`})]})}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.memory.percentage.toFixed(1),"%"]}),e.jsx(h,{value:s.memory.percentage,className:`mt-2 h-2 ${y(s.memory.percentage)}`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[c(s.memory.used)," / ",c(s.memory.total)]})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{className:"text-sm font-medium",children:"Disk Usage"}),e.jsx(q,{className:`w-4 h-4 ${N(s.disk.percentage)}`})]})}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.disk.percentage.toFixed(1),"%"]}),e.jsx(h,{value:s.disk.percentage,className:`mt-2 h-2 ${y(s.disk.percentage)}`}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[c(s.disk.used)," / ",c(s.disk.total)]})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(i,{className:"text-sm font-medium",children:"API Performance"}),e.jsx(f,{className:"w-4 h-4 text-blue-500"})]})}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.api.averageResponseTime,"ms"]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[e.jsxs("span",{children:[s.api.requestsPerMinute," req/min"]}),e.jsxs("span",{children:[s.api.errorRate.toFixed(2),"% errors"]})]})]})]})]}),e.jsxs(I,{defaultValue:"realtime",className:"space-y-4",children:[e.jsxs(S,{children:[e.jsx(j,{value:"realtime",children:"Real-time"}),e.jsx(j,{value:"history",children:"History"}),e.jsx(j,{value:"database",children:"Database"}),e.jsx(j,{value:"api",children:"API Stats"})]}),e.jsxs(p,{value:"realtime",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"CPU & Memory Usage"}),e.jsx(g,{children:"Real-time resource utilization"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"h-[300px] bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"CPU & Memory Chart"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Chart visualization coming soon"})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Current CPU:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s?.cpu?.usage?.toFixed(1)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Current Memory:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s?.memory?.percentage?.toFixed(1)||0,"%"]})]})]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Memory Distribution"}),e.jsx(g,{children:"Current memory allocation"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"h-[300px] bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(w,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Memory Distribution Chart"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Chart visualization coming soon"})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Used Memory:"}),e.jsx("span",{className:"ml-2 font-medium",children:c(s.memory.used)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Free Memory:"}),e.jsx("span",{className:"ml-2 font-medium",children:c(s.memory.free)})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"Usage:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[s.memory.percentage.toFixed(1),"%"]})]})]})]})]})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(i,{children:"System Information"})}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Uptime"}),e.jsx("p",{className:"font-medium",children:D(s.uptime)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"CPU Cores"}),e.jsx("p",{className:"font-medium",children:s.cpu.cores})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Memory"}),e.jsx("p",{className:"font-medium",children:c(s.memory.total)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Disk"}),e.jsx("p",{className:"font-medium",children:c(s.disk.total)})]})]})})]})]}),e.jsx(p,{value:"history",className:"space-y-4",children:e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Performance History"}),e.jsx(g,{children:"System performance over time"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"h-[400px] bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Performance History Chart"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Chart visualization coming soon"})]})}),n&&n.length>0&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Recent Data Points:"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Latest CPU:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[n[n.length-1]?.cpu?.toFixed(1)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Latest Memory:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[n[n.length-1]?.memory?.toFixed(1)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Latest Response:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[n[n.length-1]?.responseTime||0,"ms"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Data Points:"}),e.jsx("span",{className:"ml-2 font-medium",children:n.length})]})]})]})]})]})}),e.jsx(p,{value:"database",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(i,{children:"Database Connections"})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-sm",children:"Active Connections"}),e.jsxs("span",{className:"text-sm font-medium",children:[s.database.connections," / ",s.database.maxConnections]})]}),e.jsx(h,{value:s.database.connections/s.database.maxConnections*100,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Avg Query Time"}),e.jsxs("p",{className:"text-xl font-bold",children:[s.database.queryTime,"ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Slow Queries"}),e.jsx("p",{className:"text-xl font-bold",children:s.database.slowQueries})]})]})]})})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(i,{children:"Database Performance"})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Connection Pool"}),e.jsx(o,{className:"w-4 h-4 text-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Query Cache"}),e.jsx(o,{className:"w-4 h-4 text-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Index Usage"}),e.jsx(o,{className:"w-4 h-4 text-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Replication"}),e.jsx($,{className:"w-4 h-4 text-yellow-500"})]})]})})]})]})}),e.jsxs(p,{value:"api",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(i,{children:"Request Volume"})}),e.jsxs(l,{children:[e.jsx("div",{className:"text-3xl font-bold",children:s.api.requestsPerMinute}),e.jsx("p",{className:"text-sm text-gray-500",children:"requests per minute"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(C,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-500",children:"+12% from last hour"})]})]})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(i,{children:"Response Time"})}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[s.api.averageResponseTime,"ms"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"average response time"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-500",children:"-5ms from last hour"})]})]})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(i,{children:"Error Rate"})}),e.jsxs(l,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[s.api.errorRate.toFixed(2),"%"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"of all requests"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(o,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-500",children:"Within normal range"})]})]})]})]}),e.jsxs(t,{children:[e.jsxs(r,{children:[e.jsx(i,{children:"Response Time Distribution"}),e.jsx(g,{children:"API endpoint performance breakdown"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"h-[300px] bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Response Time Distribution Chart"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Chart visualization coming soon"})]})}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Sample Endpoint Performance:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"/api/posts"}),e.jsx("span",{className:"font-medium",children:"45ms"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"/api/users"}),e.jsx("span",{className:"font-medium",children:"32ms"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"/api/products"}),e.jsx("span",{className:"font-medium",children:"58ms"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"/api/orders"}),e.jsx("span",{className:"font-medium",children:"72ms"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-600",children:"/api/analytics"}),e.jsx("span",{className:"font-medium",children:"125ms"})]})]})]})]})]})]})]})]})}export{Y as default};
