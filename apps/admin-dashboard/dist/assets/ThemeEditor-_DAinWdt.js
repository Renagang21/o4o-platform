import{a3 as e,a4 as n,r as s,V as a,j as t,bq as r,J as l,X as i,a1 as o,S as c,F as p,B as d,du as h,o as m,a as x,d as g,c as u,d3 as f,ck as j,d0 as y}from"./vendor-react-Bb0TGSr4.js";import{B as v}from"./page-gutenberg-CGPrHM9_.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-BEO_OofR.js";import"./vendor-utils-B-KQWpLj.js";import"./wp-foundation-Ht0JG6Uo.js";import"./wp-components-CoD93iDH.js";const b=()=>{const b=e(),{id:w}=n(),[N,S]=s.useState([]),[k,T]=s.useState(null),[_,C]=s.useState(new Set),[F,L]=s.useState(""),[z,E]=s.useState(!1),[M,O]=s.useState(!0),[P,q]=s.useState(!1),[B,D]=s.useState(""),[U,R]=s.useState("vs-dark"),H=s.useRef(null);s.useEffect(()=>{V()},[w]),s.useEffect(()=>{const e=e=>{P&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[P]);const V=async()=>{try{O(!0),S(Y())}catch(e){a.error("Failed to load theme files")}finally{O(!1)}},Y=()=>[{name:"styles",path:"/styles",type:"directory",children:[{name:"main.css",path:"/styles/main.css",type:"file",language:"css",content:"/* Main Theme Styles */\n:root {\n  --primary-color: #3b82f6;\n  --secondary-color: #8b5cf6;\n  --text-color: #1a1a1a;\n  --bg-color: #ffffff;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;\n  color: var(--text-color);\n  background-color: var(--bg-color);\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 15px;\n}\n\n/* Header Styles */\n.header {\n  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));\n  padding: 20px 0;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}"},{name:"responsive.css",path:"/styles/responsive.css",type:"file",language:"css",content:"/* Responsive Styles */\n@media (max-width: 768px) {\n  .container {\n    padding: 0 10px;\n  }\n  \n  .header {\n    padding: 15px 0;\n  }\n}"}]},{name:"templates",path:"/templates",type:"directory",children:[{name:"header.php",path:"/templates/header.php",type:"file",language:"php",content:'<?php\n/**\n * Theme Header Template\n */\n?>\n<!DOCTYPE html>\n<html <?php language_attributes(); ?>>\n<head>\n  <meta charset="<?php bloginfo(\'charset\'); ?>">\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <?php wp_head(); ?>\n</head>\n<body <?php body_class(); ?>>\n  <header class="header">\n    <div class="container">\n      <h1><?php bloginfo(\'name\'); ?></h1>\n      <nav><?php wp_nav_menu([\'theme_location\' => \'primary\']); ?></nav>\n    </div>\n  </header>'},{name:"footer.php",path:"/templates/footer.php",type:"file",language:"php",content:"<?php\n/**\n * Theme Footer Template\n */\n?>\n  <footer class=\"footer\">\n    <div class=\"container\">\n      <p>&copy; <?php echo date('Y'); ?> <?php bloginfo('name'); ?></p>\n    </div>\n  </footer>\n  <?php wp_footer(); ?>\n</body>\n</html>"},{name:"index.php",path:"/templates/index.php",type:"file",language:"php",content:'<?php\n/**\n * Main Template File\n */\nget_header();\n?>\n\n<main class="main">\n  <div class="container">\n    <?php if (have_posts()) : ?>\n      <?php while (have_posts()) : the_post(); ?>\n        <article>\n          <h2><?php the_title(); ?></h2>\n          <?php the_content(); ?>\n        </article>\n      <?php endwhile; ?>\n    <?php endif; ?>\n  </div>\n</main>\n\n<?php get_footer(); ?>'}]},{name:"scripts",path:"/scripts",type:"directory",children:[{name:"main.js",path:"/scripts/main.js",type:"file",language:"javascript",content:"// Main Theme Scripts\ndocument.addEventListener('DOMContentLoaded', function() {\n  // console.log('Theme initialized');\n  \n  // Mobile menu toggle\n  const menuToggle = document.querySelector('.menu-toggle');\n  const navigation = document.querySelector('.navigation');\n  \n  if (menuToggle) {\n    menuToggle.addEventListener('click', function() {\n      navigation.classList.toggle('active');\n    });\n  }\n});"}]},{name:"theme.json",path:"/theme.json",type:"file",language:"json",content:'{\n  "name": "Custom Theme",\n  "version": "1.0.0",\n  "description": "A custom WordPress-style theme",\n  "author": "O4O Platform",\n  "license": "GPL v2",\n  "textDomain": "custom-theme",\n  "supportedFeatures": [\n    "responsive",\n    "customizer",\n    "widgets",\n    "menus",\n    "post-thumbnails"\n  ]\n}'}],A=e=>{var n;"directory"===e.type?(n=e.path,C(e=>{const s=new Set(e);return s.has(n)?s.delete(n):s.add(n),s})):(T({path:e.path,content:e.content||"",language:e.language||"text"}),D(e.content||""))},G=e=>{if("directory"===e.type)return _.has(e.path)?t.jsx(f,{className:"w-4 h-4 text-yellow-600"}):t.jsx(j,{className:"w-4 h-4 text-yellow-600"});let n="text-gray-500";switch(e.name.split(".").pop()){case"css":case"scss":n="text-blue-500";break;case"js":case"jsx":case"ts":case"tsx":n="text-yellow-500";break;case"php":n="text-purple-500";break;case"html":n="text-orange-500";break;case"json":n="text-green-500"}return t.jsx(y,{className:`w-4 h-4 ${n}`})},I=(e,n=0)=>e.map(e=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 hover:bg-gray-100 cursor-pointer "+(k?.path===e.path?"bg-blue-50":""),style:{paddingLeft:20*n+8+"px"},onClick:()=>A(e),children:["directory"===e.type&&(_.has(e.path)?t.jsx(g,{className:"w-3 h-3"}):t.jsx(u,{className:"w-3 h-3"})),G(e),t.jsx("span",{className:"text-sm",children:e.name})]}),"directory"===e.type&&_.has(e.path)&&e.children&&I(e.children,n+1)]},e.path));return M?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):t.jsxs("div",{className:"h-screen flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-white",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("h1",{className:"text-xl font-bold",children:"테마 에디터"}),P&&t.jsxs("span",{className:"text-sm text-orange-500 flex items-center gap-1",children:[t.jsx(r,{className:"w-4 h-4"}),"변경사항이 있습니다"]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(v,{variant:"outline",size:"sm",onClick:()=>R("vs-dark"===U?"light":"vs-dark"),children:t.jsx(l,{className:"w-4 h-4"})}),t.jsxs(v,{variant:"outline",size:"sm",onClick:()=>b("/themes"),children:[t.jsx(i,{className:"w-4 h-4 mr-1"}),"닫기"]}),t.jsx(v,{size:"sm",onClick:async()=>{if(k)try{E(!0),await new Promise(e=>setTimeout(e,1e3)),a.success("파일이 저장되었습니다"),q(!1)}catch(e){a.error("파일 저장에 실패했습니다")}finally{E(!1)}},disabled:!P||z,children:z?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"저장 중..."]}):t.jsxs(t.Fragment,{children:[t.jsx(o,{className:"w-4 h-4 mr-1"}),"저장"]})})]})]}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsxs("div",{className:"w-64 border-r bg-gray-50 overflow-y-auto",children:[t.jsx("div",{className:"p-2 border-b bg-white",children:t.jsxs("div",{className:"relative",children:[t.jsx(c,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),t.jsx("input",{type:"text",placeholder:"파일 검색...",value:F,onChange:e=>L(e.target.value),className:"w-full pl-8 pr-2 py-1 text-sm border rounded"})]})}),t.jsx("div",{className:"p-2",children:I(N)})]}),t.jsx("div",{className:"flex-1 flex flex-col",children:k?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"px-4 py-2 border-b bg-white flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(p,{className:"w-4 h-4 text-gray-500"}),t.jsx("span",{className:"text-sm font-medium",children:k.path})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx(v,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(B),a.success("코드가 클립보드에 복사되었습니다")},children:t.jsx(d,{className:"w-4 h-4"})})})]}),t.jsx("div",{className:"flex-1",children:t.jsx(h,{value:B,language:k.language,theme:U,onChange:e=>{D(e||""),q(!0)},onMount:e=>{H.current=e},options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,formatOnPaste:!0,formatOnType:!0}})})]}):t.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx(m,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),t.jsx("p",{children:"파일을 선택하세요"})]})})})]}),t.jsxs("div",{className:"px-4 py-1 border-t bg-gray-100 text-xs text-gray-600 flex justify-between",children:[t.jsx("div",{className:"flex items-center gap-4",children:k&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:k.language.toUpperCase()}),t.jsx("span",{children:"UTF-8"}),t.jsxs("span",{children:["줄 ",B.split("\n").length]})]})}),t.jsx("div",{className:"flex items-center gap-2",children:P?t.jsxs("span",{className:"flex items-center gap-1 text-orange-500",children:[t.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"수정됨"]}):t.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[t.jsx(x,{className:"w-3 h-3"}),"저장됨"]})})]})]})};export{b as default};
