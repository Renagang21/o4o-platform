import{r as e,j as s,a3 as a,a4 as t,a5 as i,a1 as r,Y as l,V as n}from"./vendor-react-B2e3hjul.js";import{c,B as d,L as o,I as h,T as m,W as p,a as g,b as x,d as u,e as j,S as v,f,g as y,h as N,i as b,j as w}from"./page-gutenberg-C_zDdNV3.js";import{u as C,a as k,b as F}from"./vendor-query-gT6dZ-b7.js";import{s as S}from"./wp-all-B6DO5GFQ.js";const B=e.forwardRef(({className:e,checked:a,onCheckedChange:t,onChange:i,...r},l)=>s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",ref:l,checked:a,onChange:e=>{i?.(e),t?.(e.target.checked)},className:"sr-only peer",...r}),s.jsx("div",{className:c("w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2","peer-focus:ring-blue-500 peer-focus:ring-offset-2 rounded-full","peer peer-checked:after:translate-x-full peer-checked:after:border-white","after:content-[''] after:absolute after:top-[2px] after:left-[2px]","after:bg-white after:border-gray-300 after:border after:rounded-full","after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600","peer-disabled:opacity-50 peer-disabled:cursor-not-allowed",e)})]}));B.displayName="Switch";const A=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const c=a(),{id:A}=t(),D=C(),q=A&&"new"!==A,[W,_]=e.useState({name:"",slug:"",description:"",area:"general",content:[],settings:{containerWidth:"wide",backgroundColor:"",textColor:"",padding:{top:"",bottom:"",left:"",right:""},customCss:""},isActive:!0,isDefault:!1,priority:0,conditions:{pages:[],postTypes:[],categories:[],userRoles:[]}}),[I,K]=e.useState([]),{data:T,isLoading:V}=k({queryKey:["template-part",A],queryFn:async()=>{if(!q)return null;return(await w.api.get(`/template-parts/${A}`)).data},enabled:!!q});e.useEffect(()=>{T&&(_({name:T.name,slug:T.slug,description:T.description||"",area:T.area,content:T.content,settings:{...W.settings,...T.settings},isActive:T.isActive,isDefault:T.isDefault,priority:T.priority||0,conditions:T.conditions||W.conditions}),K(T.content))},[T]);const z=F({mutationFn:async e=>(await w.api.post("/template-parts",e)).data,onSuccess:()=>{n.success("템플릿 파트가 생성되었습니다"),D.invalidateQueries({queryKey:["template-parts"]}),c("/appearance/template-parts")},onError:()=>{n.error("템플릿 파트 생성에 실패했습니다")}}),E=F({mutationFn:async e=>(await w.api.put(`/template-parts/${A}`,e)).data,onSuccess:()=>{n.success("템플릿 파트가 수정되었습니다"),D.invalidateQueries({queryKey:["template-parts"]}),D.invalidateQueries({queryKey:["template-part",A]})},onError:()=>{n.error("템플릿 파트 수정에 실패했습니다")}}),L=e=>e.map(e=>({id:e.clientId,type:e.name,data:e.attributes,innerBlocks:e.innerBlocks?L(e.innerBlocks):void 0}));return q&&V?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>c("/appearance/template-parts"),children:[s.jsx(i,{className:"w-4 h-4 mr-2"}),"템플릿 파트 목록"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:q?"템플릿 파트 수정":"새 템플릿 파트"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx("div",{className:"wp-card",children:s.jsxs("div",{className:"wp-card-body space-y-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"name",children:"이름"}),s.jsx(h,{id:"name",value:W.name,onChange:e=>{_({...W,name:e.target.value}),q||W.slug||_(s=>{return{...s,slug:(a=e.target.value,a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,""))};var a})},placeholder:"템플릿 파트 이름",className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"slug",children:"슬러그"}),s.jsx(h,{id:"slug",value:W.slug,onChange:e=>_({...W,slug:e.target.value}),placeholder:"template-part-slug",className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"description",children:"설명 (선택사항)"}),s.jsx(m,{id:"description",value:W.description,onChange:e=>_({...W,description:e.target.value}),placeholder:"이 템플릿 파트에 대한 설명",className:"mt-2",rows:3})]})]})}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h2",{className:"text-lg font-medium",children:"콘텐츠 편집"})}),s.jsx("div",{className:"wp-card-body",children:s.jsx(p,{initialContent:S(I),onChange:(e,s)=>{K(s)},showReusableBlocks:!0})})]}),s.jsx("div",{className:"wp-card",children:s.jsx("div",{className:"wp-card-body",children:s.jsxs(g,{defaultValue:"styles",children:[s.jsxs(x,{children:[s.jsx(u,{value:"styles",children:"스타일"}),s.jsx(u,{value:"conditions",children:"조건"}),s.jsx(u,{value:"advanced",children:"고급"})]}),s.jsxs(j,{value:"styles",className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"containerWidth",children:"컨테이너 너비"}),s.jsxs(v,{value:W.settings.containerWidth,onValueChange:e=>_({...W,settings:{...W.settings,containerWidth:e}}),children:[s.jsx(f,{className:"mt-2",children:s.jsx(y,{})}),s.jsxs(N,{children:[s.jsx(b,{value:"full",children:"전체 너비"}),s.jsx(b,{value:"wide",children:"넓은 너비 (max-w-7xl)"}),s.jsx(b,{value:"narrow",children:"좁은 너비 (max-w-4xl)"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(o,{htmlFor:"backgroundColor",children:"배경색"}),s.jsx(h,{id:"backgroundColor",type:"color",value:W.settings.backgroundColor||"#ffffff",onChange:e=>_({...W,settings:{...W.settings,backgroundColor:e.target.value}}),className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"textColor",children:"텍스트 색상"}),s.jsx(h,{id:"textColor",type:"color",value:W.settings.textColor||"#000000",onChange:e=>_({...W,settings:{...W.settings,textColor:e.target.value}}),className:"mt-2"})]})]}),s.jsxs("div",{children:[s.jsx(o,{children:"패딩"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[s.jsx(h,{placeholder:"상단",value:W.settings.padding?.top||"",onChange:e=>_({...W,settings:{...W.settings,padding:{...W.settings.padding,top:e.target.value}}})}),s.jsx(h,{placeholder:"우측",value:W.settings.padding?.right||"",onChange:e=>_({...W,settings:{...W.settings,padding:{...W.settings.padding,right:e.target.value}}})}),s.jsx(h,{placeholder:"하단",value:W.settings.padding?.bottom||"",onChange:e=>_({...W,settings:{...W.settings,padding:{...W.settings.padding,bottom:e.target.value}}})}),s.jsx(h,{placeholder:"좌측",value:W.settings.padding?.left||"",onChange:e=>_({...W,settings:{...W.settings,padding:{...W.settings.padding,left:e.target.value}}})})]})]}),s.jsxs("div",{children:[s.jsx(o,{htmlFor:"customCss",children:"사용자 정의 CSS"}),s.jsx(m,{id:"customCss",value:W.settings.customCss||"",onChange:e=>_({...W,settings:{...W.settings,customCss:e.target.value}}),placeholder:".template-part-header { /* CSS */ }",className:"mt-2 font-mono text-sm",rows:5})]})]}),s.jsxs(j,{value:"conditions",className:"space-y-4 mt-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"특정 페이지나 조건에서만 이 템플릿 파트가 표시되도록 설정할 수 있습니다."}),s.jsx("div",{className:"text-center py-8 text-gray-500",children:"조건부 표시 설정은 추후 업데이트될 예정입니다."})]}),s.jsx(j,{value:"advanced",className:"space-y-4 mt-4",children:s.jsxs("div",{children:[s.jsx(o,{htmlFor:"priority",children:"우선순위"}),s.jsx(h,{id:"priority",type:"number",value:W.priority,onChange:e=>_({...W,priority:parseInt(e.target.value)||0}),className:"mt-2"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"같은 영역에 여러 템플릿 파트가 있을 때 표시 순서를 결정합니다. (낮은 숫자가 먼저 표시)"})]})})]})})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"게시"})}),s.jsxs("div",{className:"wp-card-body space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"영역:"}),s.jsxs(v,{value:W.area,onValueChange:e=>_({...W,area:e}),children:[s.jsx(f,{className:"w-32",children:s.jsx(y,{})}),s.jsxs(N,{children:[s.jsx(b,{value:"header",children:"헤더"}),s.jsx(b,{value:"footer",children:"푸터"}),s.jsx(b,{value:"sidebar",children:"사이드바"}),s.jsx(b,{value:"general",children:"일반"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(o,{htmlFor:"isActive",className:"text-sm",children:"활성화"}),s.jsx(B,{id:"isActive",checked:W.isActive,onCheckedChange:e=>_({...W,isActive:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(o,{htmlFor:"isDefault",className:"text-sm",children:"기본 템플릿"}),s.jsx(B,{id:"isDefault",checked:W.isDefault,onCheckedChange:e=>_({...W,isDefault:e})})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsxs(d,{className:"w-full",onClick:()=>{const e=I.map(e=>({id:e.clientId,type:e.name,data:e.attributes,innerBlocks:e.innerBlocks?L(e.innerBlocks):void 0})),s={...W,content:e};q?E.mutate(s):z.mutate(s)},disabled:z.isPending||E.isPending,children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),q?"업데이트":"게시"]})})]})]}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"미리보기"})}),s.jsxs("div",{className:"wp-card-body",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"저장 후 사이트에서 실제로 어떻게 보이는지 확인할 수 있습니다."}),s.jsxs(d,{variant:"outline",className:"w-full mt-4",onClick:()=>window.open("/","_blank"),children:[s.jsx(l,{className:"w-4 h-4 mr-2"}),"사이트에서 보기"]})]})]})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{B as S,A as T};
