const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/wp-all-CpKe89B2.js","assets/vendor-react-CMQx0Rxg.js","assets/vendor-monaco-cpVGocfO.js","assets/vendor-ui-BkLtITBR.js","assets/index-BPQ3eyG8.js","assets/index-Bxe-0qP2.js","assets/index-BvcPMdbx.js"])))=>i.map(i=>d[i]);
import{r as l,j as e,C as Be,a as He,b as gt,c as ft,V as re,u as pt,X as he,S as oe,G,L as K,I as le,U as bt,A as qe,d as We,e as Ge,R as vt,M as yt,T as ee,f as Je,g as jt,h as Ke,P as Qe,i as Ye,Q as je,k as wt,l as Nt,m as kt,n as Ct,o as Xe,p as ce,q as St,F as we,s as Tt,H as Bt,t as Pt,v as Et,w as me,x as Y,y as Ne,z as Rt,E as Dt,B as pe,D as It,J as be,K as De,N as ae,O as Ie,W as Lt,Y as Ze,Z as Mt,_ as At,$ as _t,a0 as zt}from"./vendor-react-CMQx0Rxg.js";import{t as Ft,c as D}from"./vendor-ui-BkLtITBR.js";import{u as Ut,a as Ot,b as $t}from"./vendor-query-B9kD0akd.js";import{a as et,f as Vt}from"./vendor-utils-DQ8F5vJI.js";import{p as Ht,c as ve,P as qt,B as Wt,a as Gt,W as Jt,O as Kt,b as Qt,d as Yt,s as Le}from"./wp-all-CpKe89B2.js";const Xt="modulepreload",Zt=function(s){return"/"+s},Me={},X=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){let h=function(x){return Promise.all(x.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=f?.nonce||f?.getAttribute("nonce");r=h(n.map(x=>{if(x=Zt(x),x in Me)return;Me[x]=!0;const v=x.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${b}`))return;const c=document.createElement("link");if(c.rel=v?"stylesheet":Xt,v||(c.as="script"),c.crossOrigin="",c.href=x,p&&c.setAttribute("nonce",p),document.head.appendChild(c),v)return new Promise((m,u)=>{c.addEventListener("load",m),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return r.then(f=>{for(const p of f||[])p.status==="rejected"&&d(p.reason);return t().catch(d)})};class es{constructor(t){this.baseURL=t,this.api=et.create({baseURL:this.baseURL,headers:{"Content-Type":"application/json"}}),this.api.interceptors.request.use(n=>{let o=localStorage.getItem("accessToken")||localStorage.getItem("authToken");if(!o){const r=localStorage.getItem("auth-storage");if(r)try{const d=JSON.parse(r);d.state?.token&&(o=d.state.token)}catch{}}return o&&(n.headers.Authorization=`Bearer ${o}`),n})}async login(t){return(await this.api.post("/auth/login",t)).data}async logout(){await this.api.post("/auth/logout")}async checkSession(){try{return(await this.api.get("/accounts/sso/check")).data}catch{return{isAuthenticated:!1}}}}const ts=()=>{const s="https://api.neture.co.kr/api/v1";if(typeof window>"u")return s;try{if(globalThis.import?.meta?.env?.VITE_API_URL)return globalThis.import.meta.env.VITE_API_URL}catch{}return window.__API_URL__?window.__API_URL__:s},Ae=new es(ts());class ss{constructor(t){this.refreshPromise=null,this.currentToken=null,this.baseURL=t,this.api=et.create({baseURL:this.baseURL,headers:{"Content-Type":"application/json"},withCredentials:!0}),this.api.interceptors.response.use(n=>n,async n=>{const o=n.config;if(n.response?.status===401&&!o._retry){if(o._retry=!0,this.refreshPromise){if(await this.refreshPromise)return this.api.request(o);throw n}this.refreshPromise=this.refreshToken();const r=await this.refreshPromise;if(this.refreshPromise=null,r)return this.api.request(o)}return Promise.reject(n)})}async login(t){const n=await this.api.post("/auth/v2/login",t);return n.data.token&&(this.currentToken=n.data.token),n.data}async register(t){return(await this.api.post("/auth/v2/register",t)).data}async logout(){try{await this.api.post("/auth/v2/logout")}catch(t){console.error("Logout error:",t)}finally{this.currentToken=null}}async logoutAll(){await this.api.post("/auth/v2/logout-all"),this.currentToken=null}async refreshToken(){try{return(await this.api.post("/auth/v2/refresh")).data.success}catch{return!1}}async getCurrentUser(){try{return(await this.api.get("/auth/v2/me")).data.user}catch{return null}}getApiUrl(){return this.baseURL}getAccessToken(){return this.currentToken}setupSessionSync(){typeof window>"u"||window.addEventListener("storage",t=>{t.key==="auth-logout"?window.location.reload():t.key==="auth-login"&&this.refreshToken()})}broadcastAuthChange(t){if(typeof window>"u")return;const n=`auth-${t}`;localStorage.setItem(n,Date.now().toString()),setTimeout(()=>localStorage.removeItem(n),100)}async loginWithSync(t){const n=await this.login(t);return this.broadcastAuthChange("login"),n}async logoutWithSync(){await this.logout(),this.broadcastAuthChange("logout")}}const as=new ss(typeof window<"u"&&window.location.hostname==="localhost"?"http://localhost:4000/api/v1":"/api/v1");typeof window<"u"&&as.setupSessionSync();class rs{constructor(t){this.checkInterval=null,this.handleStorageEvent=n=>{n.key==="sso:logout"?this.handleLogout():n.key==="sso:login"&&this.checkSession()},this.config={checkInterval:3e4,...t}}initialize(t){this.onSessionChange=t,typeof window<"u"&&window.addEventListener("storage",this.handleStorageEvent),this.startSessionMonitoring(),this.checkSession()}destroy(){typeof window<"u"&&window.removeEventListener("storage",this.handleStorageEvent),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}startSessionMonitoring(){this.checkInterval&&clearInterval(this.checkInterval),this.checkInterval=setInterval(()=>{this.checkSession()},this.config.checkInterval)}async checkSession(){try{const t=await fetch(`${this.config.apiUrl}/auth/v2/me`,{credentials:"include",headers:{"Content-Type":"application/json"}});if(t.ok){const o=(await t.json()).user;return this.onSessionChange?.(o),o}else return this.onSessionChange?.(null),null}catch(t){return console.error("Session check error:",t),this.onSessionChange?.(null),null}}broadcastLogin(){typeof window<"u"&&(localStorage.setItem("sso:login",Date.now().toString()),localStorage.removeItem("sso:login"))}broadcastLogout(){typeof window<"u"&&(localStorage.setItem("sso:logout",Date.now().toString()),localStorage.removeItem("sso:logout"))}handleLogout(){this.onSessionChange?.(null),this.config.domain&&(window.location.href="/login")}getSessionId(){if(typeof document>"u")return null;const t=document.cookie.match(/sessionId=([^;]+)/);return t?t[1]:null}hasSession(){return!!this.getSessionId()}}new rs({apiUrl:typeof window<"u"&&window.location.hostname==="localhost"?"http://localhost:4000/api/v1":"/api/v1"});function ns(s,t="KRW",n="ko-KR"){const o=typeof s=="string"?parseFloat(s):s;return isNaN(o)?"₩0":new Intl.NumberFormat(n,{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(o)}function os(s,t="medium",n="ko-KR"){const o=typeof s=="string"||typeof s=="number"?new Date(s):s;if(isNaN(o.getTime()))return"";const r={};switch(t){case"short":r.year="numeric",r.month="2-digit",r.day="2-digit";break;case"medium":r.year="numeric",r.month="long",r.day="numeric";break;case"long":r.year="numeric",r.month="long",r.day="numeric",r.weekday="long";break;case"full":r.year="numeric",r.month="long",r.day="numeric",r.weekday="long",r.hour="2-digit",r.minute="2-digit";break}return new Intl.DateTimeFormat(n,r).format(o)}const na=ns,oa=os;function B(...s){return Ft(D(s))}const J=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:B("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));J.displayName="Card";const ls=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:B("flex flex-col space-y-1.5 p-6",s),...t}));ls.displayName="CardHeader";const is=l.forwardRef(({className:s,...t},n)=>e.jsx("h3",{ref:n,className:B("text-2xl font-semibold leading-none tracking-tight",s),...t}));is.displayName="CardTitle";const cs=l.forwardRef(({className:s,...t},n)=>e.jsx("p",{ref:n,className:B("text-sm text-muted-foreground",s),...t}));cs.displayName="CardDescription";const ds=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:B("p-6 pt-0",s),...t}));ds.displayName="CardContent";const us=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:B("flex items-center p-6 pt-0",s),...t}));us.displayName="CardFooter";const _e=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,ze=D,xe=(s,t)=>n=>{var o;if(t?.variants==null)return ze(s,n?.class,n?.className);const{variants:r,defaultVariants:d}=t,f=Object.keys(r).map(x=>{const v=n?.[x],b=d?.[x];if(v===null)return null;const c=_e(v)||_e(b);return r[x][c]}),p=n&&Object.entries(n).reduce((x,v)=>{let[b,c]=v;return c===void 0||(x[b]=c),x},{}),h=t==null||(o=t.compoundVariants)===null||o===void 0?void 0:o.reduce((x,v)=>{let{class:b,className:c,...m}=v;return Object.entries(m).every(u=>{let[j,N]=u;return Array.isArray(N)?N.includes({...d,...p}[j]):{...d,...p}[j]===N})?[...x,b,c]:x},[]);return ze(s,f,h,n?.class,n?.className)},ms=xe("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transform active:scale-95",{variants:{variant:{default:"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md hover:from-blue-700 hover:to-blue-800 hover:shadow-lg focus-visible:ring-blue-500",destructive:"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-md hover:from-red-700 hover:to-red-800 hover:shadow-lg focus-visible:ring-red-500",outline:"border-2 border-gray-300 bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-400 focus-visible:ring-gray-500",secondary:"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 shadow-sm hover:from-gray-200 hover:to-gray-300 focus-visible:ring-gray-500",ghost:"text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus-visible:ring-gray-500",link:"text-blue-600 underline-offset-4 hover:underline hover:text-blue-800 focus-visible:ring-blue-500",primary:"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md hover:from-blue-700 hover:to-blue-800 hover:shadow-lg transform hover:-translate-y-0.5 focus-visible:ring-blue-500",success:"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-md hover:from-green-700 hover:to-green-800 hover:shadow-lg focus-visible:ring-green-500"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-md px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=l.forwardRef(({className:s,variant:t,size:n,...o},r)=>e.jsx("button",{className:B(ms({variant:t,size:n,className:s})),ref:r,...o}));E.displayName="Button";const te=l.createContext(null),hs=l.createContext(null),ye=({open:s,defaultOpen:t=!1,onOpenChange:n,children:o})=>{const[r,d]=l.useState(t),f=s??r,p=h=>{s===void 0&&d(h),n?.(h)};return e.jsx(te.Provider,{value:{open:f,onOpenChange:p},children:e.jsx("div",{className:"relative inline-block text-left",children:o})})},de=l.forwardRef(({onClick:s,...t},n)=>{const o=l.useContext(te);if(!o)throw new Error("DropdownMenuTrigger must be used within DropdownMenu");return e.jsx("button",{ref:n,onClick:r=>{s?.(r),o.onOpenChange(!o.open)},"aria-expanded":o.open,"aria-haspopup":"true",...t})}),ue=l.forwardRef(({className:s,sideOffset:t=4,children:n,...o})=>{const r=l.useContext(te);if(!r)throw new Error("DropdownMenuContent must be used within DropdownMenu");const d=l.useRef(null);return l.useEffect(()=>{const f=p=>{d.current&&!d.current.contains(p.target)&&r.onOpenChange(!1)};if(r.open)return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[r]),r.open?e.jsx("div",{ref:d,className:B("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","animate-in fade-in-0 zoom-in-95",s),style:{marginTop:`${t}px`},...o,children:n}):null}),q=l.forwardRef(({className:s,inset:t,disabled:n,onClick:o,...r},d)=>{const f=l.useContext(te);return e.jsx("div",{ref:d,className:B("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors","hover:bg-accent hover:text-accent-foreground","focus:bg-accent focus:text-accent-foreground",n&&"pointer-events-none opacity-50",t&&"pl-8",s),onClick:p=>{n||(o?.(p),f?.onOpenChange(!1))},role:"menuitem","aria-disabled":n,...r})}),xs=l.forwardRef(({className:s,children:t,checked:n,onCheckedChange:o,disabled:r,onClick:d,...f},p)=>e.jsxs("div",{ref:p,className:B("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors","hover:bg-accent hover:text-accent-foreground","focus:bg-accent focus:text-accent-foreground",r&&"pointer-events-none opacity-50",s),onClick:h=>{r||(d?.(h),o?.(!n))},role:"menuitemcheckbox","aria-checked":n,"aria-disabled":r,...f,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n&&e.jsx(Be,{className:"h-4 w-4"})}),t]})),gs=l.forwardRef(({className:s,children:t,value:n,disabled:o,onClick:r,...d},f)=>{const p=l.useContext(hs),h=p?.value===n;return e.jsxs("div",{ref:f,className:B("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors","hover:bg-accent hover:text-accent-foreground","focus:bg-accent focus:text-accent-foreground",o&&"pointer-events-none opacity-50",s),onClick:x=>{o||(r?.(x),p?.onValueChange(n))},role:"menuitemradio","aria-checked":h,"aria-disabled":o,...d,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h&&e.jsx(He,{className:"h-2 w-2 fill-current"})}),t]})}),fs=l.forwardRef(({className:s,inset:t,...n},o)=>e.jsx("div",{ref:o,className:B("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...n})),ps=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:B("-mx-1 my-1 h-px bg-muted",s),role:"separator",...t})),bs=l.forwardRef(({className:s,inset:t,children:n,disabled:o,...r},d)=>{const f=l.useContext(te);if(!f)throw new Error("DropdownMenuSubTrigger must be used within DropdownMenuSub");return e.jsxs("div",{ref:d,className:B("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none","hover:bg-accent","data-[state=open]:bg-accent",o&&"pointer-events-none opacity-50",t&&"pl-8",s),onClick:()=>!o&&f.onOpenChange(!f.open),"data-state":f.open?"open":"closed",...r,children:[n,e.jsx(gt,{className:"ml-auto h-4 w-4"})]})}),vs=l.forwardRef(({className:s,children:t,...n},o)=>{const r=l.useContext(te);if(!r)throw new Error("DropdownMenuSubContent must be used within DropdownMenuSub");return r.open?e.jsx("div",{ref:o,className:B("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg","absolute left-full top-0 ml-1","animate-in fade-in-0 zoom-in-95",s),...n,children:t}):null});de.displayName="DropdownMenuTrigger";ue.displayName="DropdownMenuContent";q.displayName="DropdownMenuItem";xs.displayName="DropdownMenuCheckboxItem";gs.displayName="DropdownMenuRadioItem";fs.displayName="DropdownMenuLabel";ps.displayName="DropdownMenuSeparator";vs.displayName="DropdownMenuSubContent";bs.displayName="DropdownMenuSubTrigger";const U=l.forwardRef(({className:s,type:t,...n},o)=>e.jsx("input",{type:t,className:B("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:o,...n}));U.displayName="Input";const ys=xe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function H({className:s,variant:t,...n}){return e.jsx("div",{className:B(ys({variant:t}),s),...n})}const js=xe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=l.forwardRef(({className:s,...t},n)=>e.jsx("label",{ref:n,className:B(js(),s),...t}));R.displayName="Label";const ie=l.createContext(null),Fe=({value:s,defaultValue:t="",onValueChange:n,children:o})=>{const[r,d]=l.useState(t),[f,p]=l.useState(!1),h=s??r,x=v=>{s===void 0&&d(v),n?.(v),p(!1)};return e.jsx(ie.Provider,{value:{value:h,onValueChange:x,open:f,setOpen:p},children:o})},Ue=({placeholder:s})=>{const t=l.useContext(ie);if(!t)throw new Error("SelectValue must be used within Select");return e.jsx("span",{children:t.value||s})},ke=l.forwardRef(({className:s,children:t,...n})=>{const o=l.useContext(ie);if(!o)throw new Error("SelectTrigger must be used within Select");const r=l.useRef(null);return l.useEffect(()=>{const d=f=>{if(r.current&&!r.current.contains(f.target)){const p=document.getElementById("select-content");p&&!p.contains(f.target)&&o.setOpen(!1)}};if(o.open)return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[o]),e.jsxs("button",{ref:r,onClick:()=>o.setOpen(!o.open),className:B("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[t,e.jsx(ft,{className:"h-4 w-4 opacity-50"})]})}),Ce=l.forwardRef(({className:s,children:t,position:n="popper",...o},r)=>{const d=l.useContext(ie);if(!d)throw new Error("SelectContent must be used within Select");return d.open?e.jsx("div",{id:"select-content",ref:r,className:B("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md","animate-in fade-in-0 zoom-in-95",n==="popper"&&"mt-1",s),...o,children:e.jsx("div",{className:B("p-1 overflow-auto max-h-[300px]",n==="popper"&&"min-w-full"),children:t})}):null}),ws=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:B("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})),W=l.forwardRef(({className:s,children:t,value:n,...o},r)=>{const d=l.useContext(ie);if(!d)throw new Error("SelectItem must be used within Select");const f=d.value===n;return e.jsxs("div",{ref:r,onClick:()=>d.onValueChange(n),className:B("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none","hover:bg-accent hover:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50",f&&"bg-accent text-accent-foreground",s),...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f&&e.jsx(Be,{className:"h-4 w-4"})}),t]})}),Ns=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:B("-mx-1 my-1 h-px bg-muted",s),...t}));ke.displayName="SelectTrigger";Ce.displayName="SelectContent";ws.displayName="SelectLabel";W.displayName="SelectItem";Ns.displayName="SelectSeparator";const Pe=l.createContext(null),Ee=l.forwardRef(({value:s,defaultValue:t="",onValueChange:n,className:o,children:r,...d},f)=>{const[p,h]=l.useState(t),x=s??p,v=b=>{s||h(b),n?.(b)};return e.jsx(Pe.Provider,{value:{value:x,onValueChange:v},children:e.jsx("div",{ref:f,className:o,...d,children:r})})}),Re=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,role:"tablist",className:B("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t})),Z=l.forwardRef(({className:s,value:t,children:n,...o},r)=>{const d=l.useContext(Pe);if(!d)throw new Error("TabsTrigger must be used within Tabs");const f=d.value===t;return e.jsx("button",{ref:r,role:"tab","aria-selected":f,"data-state":f?"active":"inactive",onClick:()=>d.onValueChange(t),className:B("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",f&&"bg-background text-foreground shadow-sm",s),...o,children:n})}),ne=l.forwardRef(({className:s,value:t,children:n,...o},r)=>{const d=l.useContext(Pe);if(!d)throw new Error("TabsContent must be used within Tabs");return d.value===t?e.jsx("div",{ref:r,role:"tabpanel",className:B("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...o,children:n}):null});Ee.displayName="Tabs";Re.displayName="TabsList";Z.displayName="TabsTrigger";ne.displayName="TabsContent";const ge=l.forwardRef(({className:s,...t},n)=>e.jsx("textarea",{className:B("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...t}));ge.displayName="Textarea";function ks(s,t){const[n,o]=l.useState(s);return l.useEffect(()=>{const r=setTimeout(()=>{o(s)},t);return()=>{clearTimeout(r)}},[s,t]),n}function Cs(s,t={}){const{saveInterval:n=t.interval||3e4,debounceDelay:o=1e3,enableLocalStorage:r=!0,enableCloudSave:d=!0,onSave:f,onRestore:p,storageKey:h=t.postId?`wordpress-editor-autosave-${t.postType||"post"}-${t.postId}`:"wordpress-editor-autosave",onSaveSuccess:x}=t,[v,b]=l.useState({isSaving:!1,lastSavedAt:null,hasUnsavedChanges:!1,error:null,backupExists:!1}),[c,m]=l.useState(s||null),u=ks(c,o),j=l.useRef(void 0),N=l.useRef(!1);l.useEffect(()=>{if(r){const g=localStorage.getItem(h);b(k=>({...k,backupExists:!!g}))}},[r,h]);const C=l.useCallback(g=>{if(r)try{const k={content:g,timestamp:new Date().toISOString(),version:"1.0"};localStorage.setItem(h,JSON.stringify(k))}catch(k){if(k instanceof DOMException&&k.name==="QuotaExceededError")try{localStorage.removeItem(h+"-old"),localStorage.setItem(h+"-old",localStorage.getItem(h)||""),localStorage.setItem(h,JSON.stringify(g))}catch{}}},[r,h]),P=l.useCallback(async g=>{if(!(!d||!f)){b(k=>({...k,isSaving:!0,error:null}));try{await f(g),b(k=>({...k,isSaving:!1,lastSavedAt:new Date,hasUnsavedChanges:!1})),x&&x(),r&&(localStorage.removeItem(h),b(k=>({...k,backupExists:!1})))}catch(k){const z=k instanceof Error?k.message:"Unknown error";b(V=>({...V,isSaving:!1,error:z})),C(g),re.error("Failed to save to cloud. Local backup created.")}}},[d,f,r,h,C,x]),I=l.useCallback(async(g=c,k=!1)=>{!g||N.current||(C(g),(k||!j.current)&&await P(g))},[c,C,P]),$=l.useCallback(g=>{N.current||(m(g),b(k=>({...k,hasUnsavedChanges:!0})))},[]);l.useEffect(()=>{!u||N.current||I(u)},[u,I]),l.useEffect(()=>{if(!d||!v.hasUnsavedChanges)return;const g=setInterval(()=>{v.hasUnsavedChanges&&c&&I(c,!0)},n);return()=>clearInterval(g)},[d,v.hasUnsavedChanges,c,I,n]);const y=l.useCallback(async()=>{N.current=!0;try{if(p){const g=await p();if(g)return m(g),b(k=>({...k,hasUnsavedChanges:!1,lastSavedAt:new Date})),N.current=!1,g}if(r){const g=localStorage.getItem(h);if(g){const{content:k,timestamp:z}=JSON.parse(g);return m(k),re.success(`Restored from backup (${new Date(z).toLocaleString()})`),N.current=!1,k}}}catch{re.error("Failed to restore backup")}finally{N.current=!1}return null},[p,r,h]),T=l.useCallback(()=>{r&&(localStorage.removeItem(h),localStorage.removeItem(h+"-old"),t.postId&&(localStorage.removeItem(`page-${t.postId}-draft`),localStorage.removeItem(`post-${t.postId}-draft`)),b(g=>({...g,backupExists:!1,hasUnsavedChanges:!1})),N.current=!0,setTimeout(()=>{N.current=!1},100))},[r,h,t.postId]);return l.useEffect(()=>{const g=k=>{if(v.hasUnsavedChanges){const z="You have unsaved changes. Are you sure you want to leave?";return k.preventDefault(),k.returnValue=z,z}};return window.addEventListener("beforeunload",g),()=>window.removeEventListener("beforeunload",g)},[v.hasUnsavedChanges]),l.useEffect(()=>{const g=()=>{document.hidden&&v.hasUnsavedChanges&&c&&I(c,!0)};return document.addEventListener("visibilitychange",g),()=>document.removeEventListener("visibilitychange",g)},[v.hasUnsavedChanges,c,I]),{...v,updateContent:$,save:()=>I(c,!0),restoreFromBackup:y,clearBackup:T,lastSaved:v.lastSavedAt,savedInLocalStorage:v.backupExists,recoverFromLocalStorage:y,clearLocalStorage:T}}const Ss=({_isOpen:s,onClose:t,onSelect:n,allowMultiple:o=!1,acceptedTypes:r=["image/*"]})=>{const[d,f]=l.useState("grid"),[p,h]=l.useState(""),[x,v]=l.useState([]),[b,c]=l.useState("library"),m=Ut(),{data:u=[],isLoading:j}=Ot({queryKey:["media",p],queryFn:async()=>{const g=new URLSearchParams;return p&&g.append("search",p),(await Ae.api.get(`/media?${g}`)).data},enabled:s}),N=$t({mutationFn:async g=>{const k=new FormData;return g.forEach(V=>{k.append("files",V)}),(await Ae.api.post("/media/upload",k,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:()=>{re.success("파일이 업로드되었습니다"),m.invalidateQueries({queryKey:["media"]}),c("library")},onError:()=>{re.error("파일 업로드에 실패했습니다")}}),C=l.useCallback(g=>{N.mutate(g)},[N]),{getRootProps:P,getInputProps:I,isDragActive:$}=pt({onDrop:C,accept:r.reduce((g,k)=>({...g,[k]:[]}),{}),multiple:!0}),y=g=>{o?v(k=>k.includes(g.id)?k.filter(z=>z!==g.id):[...k,g.id]):(n(g),t())},T=()=>{const g=u.filter(k=>x.includes(k.id));g.length>0&&(g.forEach(k=>n(k)),t())};return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"미디어 라이브러리"}),e.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(he,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsx("button",{onClick:()=>c("library"),className:D("px-6 py-3 font-medium transition-colors",b==="library"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"),children:"미디어 라이브러리"}),e.jsx("button",{onClick:()=>c("upload"),className:D("px-6 py-3 font-medium transition-colors",b==="upload"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"),children:"파일 업로드"})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:b==="library"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(U,{type:"search",placeholder:"미디어 검색...",value:p,onChange:g=>h(g.target.value),className:"pl-10 w-64"})]}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-lg",children:[e.jsx("button",{onClick:()=>f("grid"),className:D("p-2 transition-colors",d==="grid"?"bg-gray-100":"hover:bg-gray-50"),children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f("list"),className:D("p-2 transition-colors",d==="list"?"bg-gray-100":"hover:bg-gray-50"),children:e.jsx(K,{className:"w-4 h-4"})})]})]}),o&&x.length>0&&e.jsxs(E,{onClick:T,children:[x.length,"개 선택 완료"]})]}),e.jsx("div",{className:"p-4 overflow-y-auto h-full",children:j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):u.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(le,{className:"w-16 h-16 mb-4"}),e.jsx("p",{children:"미디어가 없습니다"})]}):d==="grid"?e.jsx("div",{className:"grid grid-cols-6 gap-4",children:u.map(g=>e.jsxs("div",{onClick:()=>y(g),className:D("relative aspect-square rounded-lg overflow-hidden cursor-pointer group","border-2 transition-all hover:shadow-lg",x.includes(g.id)?"border-blue-600":"border-gray-200 hover:border-gray-300"),children:[e.jsx("img",{src:g.thumbnailUrl||g.url,alt:g.alt||g.filename,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-opacity",children:x.includes(g.id)&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(Be,{className:"w-4 h-4 text-white"})})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("p",{className:"text-xs text-white truncate",children:g.filename})})]},g.id))}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"파일"}),e.jsx("th",{className:"text-left py-2",children:"파일명"}),e.jsx("th",{className:"text-left py-2",children:"업로드 일시"}),e.jsx("th",{className:"text-left py-2",children:"크기"})]})}),e.jsx("tbody",{children:u.map(g=>e.jsxs("tr",{onClick:()=>y(g),className:D("border-b cursor-pointer hover:bg-gray-50",x.includes(g.id)&&"bg-blue-50"),children:[e.jsx("td",{className:"py-2",children:e.jsx("img",{src:g.thumbnailUrl||g.url,alt:g.alt||g.filename,className:"w-10 h-10 object-cover rounded"})}),e.jsx("td",{className:"py-2",children:g.filename}),e.jsx("td",{className:"py-2 text-sm text-gray-600",children:Vt(new Date(g.uploadedAt),"yyyy-MM-dd HH:mm")}),e.jsxs("td",{className:"py-2 text-sm text-gray-600",children:[(g.size/1024/1024).toFixed(2)," MB"]})]},g.id))})]})})]}):e.jsxs("div",{className:"p-8 h-full flex items-center justify-center",children:[e.jsxs("div",{...P(),className:D("w-full max-w-2xl h-64 border-2 border-dashed rounded-lg","flex flex-col items-center justify-center cursor-pointer","transition-colors",$?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[e.jsx("input",{...I()}),e.jsx(bt,{className:"w-12 h-12 text-gray-400 mb-4"}),$?e.jsx("p",{className:"text-lg text-blue-600",children:"파일을 여기에 놓으세요"}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-lg text-gray-600 mb-2",children:"파일을 드래그하거나 클릭하여 업로드"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["지원 형식: ",r.join(", ")]})]})]}),N.isPending&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})})]})})]})}):null},Ts=({settings:s,onChange:t})=>{const n=[{value:"left",icon:qe,label:"왼쪽"},{value:"center",icon:We,label:"가운데"},{value:"right",icon:Ge,label:"오른쪽"},{value:"wide",icon:vt,label:"넓게"},{value:"full",icon:yt,label:"전체 너비"}],o=[{value:"thumbnail",label:"썸네일 (150x150)"},{value:"medium",label:"중간 (300x300)"},{value:"large",label:"크게 (1024x1024)"},{value:"full",label:"원본 크기"}];return e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-2 block",children:"정렬"}),e.jsx("div",{className:"flex gap-1",children:n.map(r=>{const d=r.icon;return e.jsx("button",{onClick:()=>t({...s,alignment:r.value}),className:D("p-2 rounded transition-colors",s.alignment===r.value?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"),title:r.label,children:e.jsx(d,{className:"w-4 h-4"})},r.value)})})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-2 block",children:"이미지 크기"}),e.jsx("select",{value:s.size||"large",onChange:r=>t({...s,size:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:o.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),s.size==="full"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"width",className:"text-sm",children:"너비"}),e.jsx(U,{id:"width",type:"number",value:s.width||"",onChange:r=>t({...s,width:parseInt(r.target.value)||void 0}),placeholder:"px"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"height",className:"text-sm",children:"높이"}),e.jsx(U,{id:"height",type:"number",value:s.height||"",onChange:r=>t({...s,height:parseInt(r.target.value)||void 0}),placeholder:"px"})]})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"alt",className:"text-sm font-medium mb-1 block",children:[e.jsx(ee,{className:"w-3 h-3 inline mr-1"}),"대체 텍스트"]}),e.jsx(U,{id:"alt",value:s.alt||"",onChange:r=>t({...s,alt:r.target.value}),placeholder:"이미지 설명"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"접근성을 위해 이미지를 설명하세요"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"caption",className:"text-sm font-medium mb-1 block",children:"캡션"}),e.jsx(ge,{id:"caption",value:s.caption||"",onChange:r=>t({...s,caption:r.target.value}),placeholder:"이미지 캡션 (선택사항)",rows:2})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"link",className:"text-sm font-medium mb-1 block",children:[e.jsx(Je,{className:"w-3 h-3 inline mr-1"}),"링크 URL"]}),e.jsx(U,{id:"link",type:"url",value:s.link||"",onChange:r=>t({...s,link:r.target.value}),placeholder:"https://example.com"}),s.link&&e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.linkTarget==="_blank",onChange:r=>t({...s,linkTarget:r.target.checked?"_blank":"_self"}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"새 탭에서 열기"})]})})]})]})},Bs=({settings:s,onChange:t})=>{const n=[1,2,3,4,5,6];return e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"text-sm font-medium mb-2 block",children:[e.jsx(G,{className:"w-3 h-3 inline mr-1"}),"컬럼 수"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:n.map(o=>e.jsxs("button",{onClick:()=>t({...s,columns:o}),className:D("p-2 rounded transition-colors text-sm",s.columns===o?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300"),children:[o,"열"]},o))})]}),e.jsxs("div",{children:[e.jsxs(R,{className:"text-sm font-medium mb-2 block",children:[e.jsx(jt,{className:"w-3 h-3 inline mr-1"}),"이미지 표시"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t({...s,imageCrop:!0}),className:D("flex-1 p-2 rounded transition-colors text-sm",s.imageCrop?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300"),children:"자르기"}),e.jsx("button",{onClick:()=>t({...s,imageCrop:!1}),className:D("flex-1 p-2 rounded transition-colors text-sm",s.imageCrop?"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300":"bg-blue-600 text-white"),children:"전체 표시"})]})]}),e.jsxs("div",{children:[e.jsxs(R,{className:"text-sm font-medium mb-2 block",children:[e.jsx(Je,{className:"w-3 h-3 inline mr-1"}),"이미지 클릭 시"]}),e.jsxs("select",{value:s.linkTo||"none",onChange:o=>t({...s,linkTo:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"none",children:"링크 없음"}),e.jsx("option",{value:"media",children:"미디어 파일"}),e.jsx("option",{value:"attachment",children:"첨부 페이지"})]})]}),s.images&&s.images.length>0&&e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-2 block",children:"이미지 관리"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.images.map((o,r)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded border",children:[e.jsx("img",{src:o.thumbnailUrl||o.url,alt:o.alt||"",className:"w-10 h-10 object-cover rounded"}),e.jsx("span",{className:"flex-1 text-sm truncate",children:o.alt||`이미지 ${r+1}`}),e.jsx("button",{onClick:()=>{const d=s.images.filter((f,p)=>p!==r);t({...s,images:d})},className:"text-red-600 hover:text-red-700 text-sm",children:"제거"})]},r))})]})]})},Ps=({settings:s,onChange:t})=>{const n=[{value:"left",icon:qe,label:"왼쪽"},{value:"center",icon:We,label:"가운데"},{value:"right",icon:Ge,label:"오른쪽"}],o=[{color:"rgba(0, 0, 0, 0.5)",label:"블랙 50%"},{color:"rgba(0, 0, 0, 0.7)",label:"블랙 70%"},{color:"rgba(255, 255, 255, 0.5)",label:"화이트 50%"},{color:"rgba(0, 51, 102, 0.7)",label:"네이비 70%"},{color:"rgba(0, 0, 0, 0)",label:"투명"}];return e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"title",className:"text-sm font-medium mb-1 block",children:[e.jsx(ee,{className:"w-3 h-3 inline mr-1"}),"제목"]}),e.jsx(U,{id:"title",value:s.title||"",onChange:r=>t({...s,title:r.target.value}),placeholder:"Cover 제목"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"text",className:"text-sm font-medium mb-1 block",children:"부제목"}),e.jsx(ge,{id:"text",value:s.text||"",onChange:r=>t({...s,text:r.target.value}),placeholder:"Cover 부제목 텍스트",rows:2})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-2 block",children:"콘텐츠 정렬"}),e.jsx("div",{className:"flex gap-1",children:n.map(r=>{const d=r.icon;return e.jsx("button",{onClick:()=>t({...s,contentAlign:r.value}),className:D("p-2 rounded transition-colors",s.contentAlign===r.value?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"),title:r.label,children:e.jsx(d,{className:"w-4 h-4"})},r.value)})})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"minHeight",className:"text-sm font-medium mb-1 block",children:[e.jsx(Ke,{className:"w-3 h-3 inline mr-1"}),"최소 높이"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"range",min:"100",max:"800",value:s.minHeight||300,onChange:r=>t({...s,minHeight:parseInt(r.target.value)}),className:"flex-1"}),e.jsxs("span",{className:"text-sm w-16 text-right",children:[s.minHeight||300,"px"]})]})]}),e.jsxs("div",{children:[e.jsxs(R,{className:"text-sm font-medium mb-2 block",children:[e.jsx(Qe,{className:"w-3 h-3 inline mr-1"}),"오버레이 색상"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map(r=>e.jsxs("button",{onClick:()=>t({...s,overlayColor:r.color}),className:D("p-2 rounded border-2 text-sm transition-colors",s.overlayColor===r.color?"border-blue-600":"border-gray-300 hover:border-gray-400"),children:[e.jsx("div",{className:"w-full h-8 rounded mb-1",style:{backgroundColor:r.color,border:"1px solid #e5e7eb"}}),e.jsx("span",{className:"text-xs",children:r.label})]},r.color))}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"customColor",className:"text-xs text-gray-600",children:"커스텀 색상"}),e.jsx(U,{id:"customColor",type:"text",value:s.overlayColor||"",onChange:r=>t({...s,overlayColor:r.target.value}),placeholder:"rgba(0, 0, 0, 0.5)",className:"mt-1"})]})]})]})]})},Es=({settings:s,onChange:t})=>{const n=[{bg:"#007cba",text:"#ffffff",label:"파란색"},{bg:"#28a745",text:"#ffffff",label:"초록색"},{bg:"#dc3545",text:"#ffffff",label:"빨간색"},{bg:"#ffc107",text:"#000000",label:"노란색"},{bg:"#6c757d",text:"#ffffff",label:"회색"},{bg:"#000000",text:"#ffffff",label:"검정색"}];return e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"text",className:"text-sm font-medium mb-1 block",children:[e.jsx(ee,{className:"w-3 h-3 inline mr-1"}),"버튼 텍스트"]}),e.jsx(U,{id:"text",value:s.text||"",onChange:o=>t({...s,text:o.target.value}),placeholder:"버튼 텍스트"})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"url",className:"text-sm font-medium mb-1 block",children:[e.jsx(Ye,{className:"w-3 h-3 inline mr-1"}),"링크 URL"]}),e.jsx(U,{id:"url",type:"url",value:s.url||"",onChange:o=>t({...s,url:o.target.value}),placeholder:"https://example.com"}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.target==="_blank",onChange:o=>t({...s,target:o.target.checked?"_blank":"_self"}),className:"rounded"}),e.jsx("span",{className:"text-sm",children:"새 탭에서 열기"})]})})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-2 block",children:"버튼 스타일"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t({...s,style:"fill"}),className:D("flex-1 p-2 rounded transition-colors text-sm",s.style==="fill"?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300"),children:"채우기"}),e.jsx("button",{onClick:()=>t({...s,style:"outline"}),className:D("flex-1 p-2 rounded transition-colors text-sm",s.style==="outline"?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-300"),children:"윤곽선"})]})]}),e.jsxs("div",{children:[e.jsxs(R,{className:"text-sm font-medium mb-2 block",children:[e.jsx(Qe,{className:"w-3 h-3 inline mr-1"}),"색상"]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-2",children:n.map(o=>e.jsx("button",{onClick:()=>t({...s,backgroundColor:o.bg,textColor:o.text}),className:D("p-2 rounded border-2 transition-colors",s.backgroundColor===o.bg?"border-blue-600":"border-gray-300 hover:border-gray-400"),children:e.jsx("div",{className:"w-full h-6 rounded flex items-center justify-center text-xs font-medium",style:{backgroundColor:o.bg,color:o.text},children:o.label})},o.bg))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"bgColor",className:"text-xs text-gray-600",children:"배경색"}),e.jsx(U,{id:"bgColor",type:"color",value:s.backgroundColor||"#007cba",onChange:o=>t({...s,backgroundColor:o.target.value}),className:"mt-1 h-8"})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"textColor",className:"text-xs text-gray-600",children:"텍스트색"}),e.jsx(U,{id:"textColor",type:"color",value:s.textColor||"#ffffff",onChange:o=>t({...s,textColor:o.target.value}),className:"mt-1 h-8"})]})]})]}),e.jsxs("div",{children:[e.jsxs(R,{htmlFor:"borderRadius",className:"text-sm font-medium mb-1 block",children:[e.jsx(He,{className:"w-3 h-3 inline mr-1"}),"모서리 둥글기"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"range",min:"0",max:"50",value:s.borderRadius||4,onChange:o=>t({...s,borderRadius:parseInt(o.target.value)}),className:"flex-1"}),e.jsxs("span",{className:"text-sm w-12 text-right",children:[s.borderRadius||4,"px"]})]})]}),e.jsxs("div",{children:[e.jsx(R,{className:"text-sm font-medium mb-2 block",children:"미리보기"}),e.jsx("div",{className:"p-4 bg-white rounded border flex justify-center",children:e.jsx("button",{className:D("px-4 py-2 rounded transition-colors",s.style==="fill"&&"text-white",s.style==="outline"&&"border-2"),style:{backgroundColor:s.style==="fill"?s.backgroundColor:"transparent",color:s.style==="fill"?s.textColor:s.backgroundColor,borderColor:s.style==="outline"?s.backgroundColor:"transparent",borderRadius:`${s.borderRadius}px`},children:s.text||"버튼"})})]})]})},Rs=[{id:"uagb/advanced-heading",name:"Advanced Heading",icon:ee,category:"text"},{id:"uagb/info-box",name:"Info Box",icon:we,category:"layout"},{id:"uagb/testimonial",name:"Testimonial",icon:je,category:"text"},{id:"uagb/team",name:"Team",icon:Tt,category:"layout"},{id:"uagb/social-share",name:"Social Share",icon:Bt,category:"social"},{id:"uagb/google-map",name:"Google Map",icon:Pt,category:"embed"},{id:"uagb/icon-list",name:"Icon List",icon:K,category:"text"},{id:"uagb/price-list",name:"Price List",icon:Et,category:"layout"},{id:"uagb/post-carousel",name:"Post Carousel",icon:G,category:"layout"},{id:"uagb/table-of-contents",name:"Table of Contents",icon:K,category:"text"},{id:"uagb/timeline",name:"Timeline",icon:we,category:"layout"},{id:"uagb/blockquote",name:"Blockquote",icon:je,category:"text"},{id:"uagb/call-to-action",name:"Call To Action",icon:me,category:"layout"},{id:"uagb/columns",name:"Advanced Columns",icon:Xe,category:"layout"},{id:"uagb/section",name:"Section",icon:ce,category:"layout"}],Ds=[{id:"o4o/cpt-acf-loop",name:"CPT/ACF Loop",icon:K,category:"o4o"}],Is=[{id:"core/paragraph",name:"Paragraph",icon:ee,category:"text"},{id:"core/heading",name:"Heading",icon:ee,category:"text"},{id:"core/list",name:"List",icon:K,category:"text"},{id:"core/quote",name:"Quote",icon:je,category:"text"},{id:"core/code",name:"Code",icon:wt,category:"text"},{id:"core/table",name:"Table",icon:Nt,category:"text"},{id:"core/image",name:"Image",icon:le,category:"media"},{id:"core/gallery",name:"Gallery",icon:G,category:"media"},{id:"core/video",name:"Video",icon:kt,category:"media"},{id:"core/audio",name:"Audio",icon:Ct,category:"media"},{id:"core/cover",name:"Cover",icon:le,category:"media"},{id:"core/columns",name:"Columns",icon:Xe,category:"design"},{id:"core/group",name:"Group",icon:ce,category:"design"},{id:"core/button",name:"Button",icon:St,category:"design"},{id:"core/spacer",name:"Spacer",icon:ce,category:"design"},{id:"core/separator",name:"Separator",icon:ce,category:"design"}],Ls=s=>{if(!s||!s.trim())return[];const t=/<!-- wp:([a-z0-9-]+\/[a-z0-9-]+)(\s+({[^}]*}))?\s*-->([\s\S]*?)<!-- \/wp:\1 -->/g,n=[...s.matchAll(t)];return n.length>0?n.map((o,r)=>{const d=o[1],f=o[3],p=o[4].trim();let h={};if(f)try{h=JSON.parse(f)}catch{}let x={};switch(d){case"core/paragraph":const v=p.match(/<p>(.*?)<\/p>/s);x={text:v?v[1]:p};break;case"core/heading":const b=p.match(/<h(\d)>(.*?)<\/h\d>/s);b&&(x={text:b[2],level:parseInt(b[1])});break;case"core/list":x={items:[...p.matchAll(/<li>(.*?)<\/li>/gs)].map(P=>P[1])};break;case"core/quote":const m=p.match(/<blockquote[^>]*><p>(.*?)<\/p>(?:<cite>(.*?)<\/cite>)?<\/blockquote>/s);m&&(x={text:m[1],citation:m[2]});break;case"core/image":const u=p.match(/<img[^>]+src="([^"]+)"[^>]*alt="([^"]*)"[^>]*>/),j=p.match(/<figcaption>(.*?)<\/figcaption>/);u&&(x={url:u[1],alt:u[2],caption:j?j[1]:void 0});break;case"o4o/cpt-acf-loop":const N=p.match(/data-block='([^']+)'/);if(N)try{x=JSON.parse(N[1])}catch{}break;default:const C=p.match(/data-block='([^']+)'/);if(C)try{x=JSON.parse(C[1])}catch{x={raw:p}}else x={raw:p}}return{id:`block-${Date.now()}-${r}`,type:d,content:x,attributes:h}}):[{id:`block-${Date.now()}`,type:"core/paragraph",content:{text:s.replace(/<[^>]*>/g,"")},attributes:{}}]},Ms=s=>s.map(t=>{const n=t.type,o=t.attributes||{},r=t.content;let d=`<!-- wp:${n}`;switch(Object.keys(o).length>0&&(d+=` ${JSON.stringify(o)}`),d+=` -->
`,t.type){case"core/paragraph":d+=`<p>${r.text||""}</p>`;break;case"core/heading":const f=r.level||2;d+=`<h${f}>${r.text||""}</h${f}>`;break;case"core/list":d+=`<ul>${(r.items||[]).map(p=>`<li>${p}</li>`).join(`
`)}</ul>`;break;case"core/quote":d+=`<blockquote class="wp-block-quote"><p>${r.text||""}</p>`,r.citation&&(d+=`<cite>${r.citation}</cite>`),d+="</blockquote>";break;case"core/image":d+=`<figure class="wp-block-image"><img src="${r.url||""}" alt="${r.alt||""}"/>`,r.caption&&(d+=`<figcaption>${r.caption}</figcaption>`),d+="</figure>";break;case"o4o/cpt-acf-loop":d+=`<div class="wp-block-o4o-cpt-acf-loop" data-block='${JSON.stringify(r)}'></div>`;break;default:d+=`<div class="wp-block-${n.replace("/","-")}" data-block='${JSON.stringify(r)}'></div>`}return d+=`
<!-- /wp:${n} -->
`,d}).join(`
`),la=({initialBlocks:s=[],onChange:t,content:n,onContentChange:o})=>{const[r,d]=l.useState(()=>n?Ls(n):s),[f,p]=l.useState(!1),[h,x]=l.useState(null),[v,b]=l.useState("all"),[c,m]=l.useState(!1),[u,j]=l.useState(null),[N,C]=l.useState(!1),P=[...Is,...Rs,...Ds],I=["all","text","media","design","layout","social","embed","o4o"],$=v==="all"?P:P.filter(a=>a.category===v),y=a=>{d(a),t?.(a),o?.(Ms(a))},T=a=>{const S={id:`block-${Date.now()}`,type:a,content:g(a),attributes:{}},i=[...r,S];y(i),p(!1)},g=a=>{switch(a){case"core/paragraph":return{text:"Start writing or type / to choose a block"};case"core/heading":return{text:"Heading",level:2};case"uagb/advanced-heading":return{text:"Advanced Heading",level:2,alignment:"center"};case"core/image":return{url:"",alt:"",caption:"",alignment:"center",size:"large"};case"core/gallery":return{images:[],columns:3,imageCrop:!0,linkTo:"none"};case"core/video":return{url:"",autoplay:!1,loop:!1,muted:!1,controls:!0};case"core/cover":return{url:"",overlayColor:"rgba(0, 0, 0, 0.5)",minHeight:300,contentAlign:"center",title:"Cover Title",text:"Cover subtitle text"};case"core/columns":return{columns:[{id:`col-${Date.now()}-1`,content:[],width:50},{id:`col-${Date.now()}-2`,content:[],width:50}]};case"core/button":return{text:"Click me",url:"#",target:"_self",style:"fill",backgroundColor:"#007cba",textColor:"#ffffff",borderRadius:4};case"core/spacer":return{height:100};case"core/separator":return{style:"default",color:"#cccccc"};case"core/code":return{content:"// Your code here",language:"javascript"};case"core/table":return{head:[["Column 1","Column 2","Column 3"]],body:[["Row 1 Cell 1","Row 1 Cell 2","Row 1 Cell 3"],["Row 2 Cell 1","Row 2 Cell 2","Row 2 Cell 3"]],foot:[]};case"core/group":return{blocks:[],backgroundColor:"",padding:20};default:return{}}},k=a=>{const S=r.filter(i=>i.id!==a);y(S)},z=a=>{const S=r.findIndex(i=>i.id===a);if(S!==-1){const w={...r[S],id:`block-${Date.now()}`},L=[...r.slice(0,S+1),w,...r.slice(S+1)];y(L)}},V=a=>{const S=P.find(i=>i.id===a.type)?.icon||we;return e.jsxs("div",{className:D("group relative border-2 rounded-lg p-4 mb-4 transition-all",h===a.id?"border-modern-primary bg-modern-primary-alpha":"border-transparent hover:border-modern-border-primary"),onClick:()=>x(a.id),children:[e.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex items-center gap-1 bg-modern-bg-card border border-modern-border-primary rounded-lg shadow-modern-shadow p-1",children:[e.jsx("button",{className:"p-1 hover:bg-modern-bg-hover rounded",children:e.jsx(Ke,{className:"w-4 h-4 text-modern-text-secondary"})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),z(a.id)},className:"p-1 hover:bg-modern-bg-hover rounded",children:e.jsx(Ne,{className:"w-4 h-4 text-modern-text-secondary"})}),e.jsx("button",{onClick:i=>{i.stopPropagation(),k(a.id)},className:"p-1 hover:bg-modern-bg-hover rounded",children:e.jsx(Rt,{className:"w-4 h-4 text-modern-error"})}),e.jsx("button",{className:"p-1 hover:bg-modern-bg-hover rounded",children:e.jsx(Dt,{className:"w-4 h-4 text-modern-text-secondary"})})]})}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-modern-bg-tertiary rounded flex items-center justify-center",children:e.jsx(S,{className:"w-4 h-4 text-modern-text-secondary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-modern-text-tertiary mb-1",children:P.find(i=>i.id===a.type)?.name}),a.type.includes("heading")&&e.jsx("h2",{className:"text-2xl font-bold text-modern-text-primary",children:a.content.text}),a.type.includes("paragraph")&&e.jsx("p",{className:"text-modern-text-primary",children:a.content.text}),a.type==="core/image"&&e.jsxs("div",{className:"space-y-2",children:[a.content.url?e.jsxs("div",{className:D("relative",a.content.alignment==="left"&&"mr-auto",a.content.alignment==="center"&&"mx-auto",a.content.alignment==="right"&&"ml-auto",a.content.size==="thumbnail"&&"max-w-[150px]",a.content.size==="medium"&&"max-w-[300px]",a.content.size==="large"&&"max-w-[1024px]",a.content.size==="full"&&"max-w-full"),children:[e.jsx("img",{src:a.content.url,alt:a.content.alt||"",className:"w-full h-auto rounded"}),a.content.caption&&e.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:a.content.caption})]}):e.jsx("button",{onClick:i=>{i.stopPropagation(),j(()=>w=>{const L={...a,content:{...a.content,url:w.url,alt:w.alt||w.filename,width:w.width,height:w.height}},_=r.map(A=>A.id===a.id?L:A);y(_),m(!1)}),m(!0)},className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-modern-primary hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"미디어 선택"})]})}),h===a.id&&a.content.url&&e.jsx("button",{onClick:i=>{i.stopPropagation(),C(!0)},className:"absolute top-2 right-2 p-1 bg-white rounded shadow hover:bg-gray-100",children:e.jsx(pe,{className:"w-4 h-4"})})]}),a.type==="core/gallery"&&e.jsxs("div",{className:"space-y-2",children:[a.content.images&&a.content.images.length>0?e.jsx("div",{className:D("grid gap-2",a.content.columns===1&&"grid-cols-1",a.content.columns===2&&"grid-cols-2",a.content.columns===3&&"grid-cols-3",a.content.columns===4&&"grid-cols-4",a.content.columns===5&&"grid-cols-5",a.content.columns===6&&"grid-cols-6"),children:a.content.images.map((i,w)=>e.jsx("div",{className:"relative aspect-square",children:e.jsx("img",{src:i.url||i.thumbnailUrl,alt:i.alt||"",className:D("w-full h-full rounded",a.content.imageCrop?"object-cover":"object-contain")})},w))}):e.jsx("button",{onClick:i=>{i.stopPropagation(),j(()=>w=>{const L={...a,content:{...a.content,images:[...a.content.images||[],{id:w.id,url:w.url,thumbnailUrl:w.thumbnailUrl,alt:w.alt||w.filename}]}},_=r.map(A=>A.id===a.id?L:A);y(_)}),m(!0)},className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-modern-primary hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"갤러리 이미지 추가"})]})}),h===a.id&&a.content.images?.length>0&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),j(()=>w=>{const L={...a,content:{...a.content,images:[...a.content.images,{id:w.id,url:w.url,thumbnailUrl:w.thumbnailUrl,alt:w.alt||w.filename}]}},_=r.map(A=>A.id===a.id?L:A);y(_)}),m(!0)},className:"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50",children:"이미지 추가"}),e.jsx("button",{onClick:i=>{i.stopPropagation(),C(!0)},className:"p-1 border border-gray-300 rounded hover:bg-gray-50",children:e.jsx(pe,{className:"w-4 h-4"})})]})]}),a.type==="core/cover"&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden",style:{minHeight:a.content.minHeight||300},children:[a.content.url?e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${a.content.url})`},children:e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:a.content.overlayColor}})}):e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:a.content.overlayColor||"#000"}}),e.jsxs("div",{className:D("relative z-10 h-full flex flex-col justify-center p-8 text-white",a.content.contentAlign==="left"&&"items-start text-left",a.content.contentAlign==="center"&&"items-center text-center",a.content.contentAlign==="right"&&"items-end text-right"),children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:a.content.title}),e.jsx("p",{className:"text-lg",children:a.content.text})]}),!a.content.url&&e.jsx("button",{onClick:i=>{i.stopPropagation(),j(()=>w=>{const L={...a,content:{...a.content,url:w.url}},_=r.map(A=>A.id===a.id?L:A);y(_),m(!1)}),m(!0)},className:"absolute top-4 right-4 p-2 bg-white rounded shadow hover:bg-gray-100",children:e.jsx(le,{className:"w-4 h-4"})}),h===a.id&&e.jsx("button",{onClick:i=>{i.stopPropagation(),C(!0)},className:"absolute top-4 left-4 p-1 bg-white rounded shadow hover:bg-gray-100",children:e.jsx(pe,{className:"w-4 h-4"})})]}),a.type==="core/button"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:a.content.url,target:a.content.target,className:D("inline-flex items-center px-4 py-2 rounded transition-colors",a.content.style==="fill"&&"text-white",a.content.style==="outline"&&"border-2"),style:{backgroundColor:a.content.style==="fill"?a.content.backgroundColor:"transparent",color:a.content.style==="fill"?a.content.textColor:a.content.backgroundColor,borderColor:a.content.style==="outline"?a.content.backgroundColor:"transparent",borderRadius:`${a.content.borderRadius}px`},children:a.content.text}),e.jsx(Ye,{className:"w-4 h-4 text-gray-400"})]}),a.type==="core/spacer"&&e.jsx("div",{className:"relative border-2 border-dashed border-gray-300 rounded",style:{height:a.content.height},children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:e.jsxs("span",{className:"text-sm",children:[a.content.height,"px"]})})}),a.type==="core/separator"&&e.jsx("div",{className:"py-4",children:e.jsx("hr",{className:D(a.content.style==="wide"&&"w-full",a.content.style==="default"&&"w-24 mx-auto",a.content.style==="dots"&&"border-dotted"),style:{borderColor:a.content.color}})}),a.type==="core/code"&&e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:e.jsx("code",{className:`language-${a.content.language}`,children:a.content.content})}),a.type==="core/table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border-collapse",children:[a.content.head.length>0&&e.jsx("thead",{children:a.content.head.map((i,w)=>e.jsx("tr",{children:i.map((L,_)=>e.jsx("th",{className:"border border-gray-300 px-4 py-2 bg-gray-100 font-semibold",children:L},_))},w))}),e.jsx("tbody",{children:a.content.body.map((i,w)=>e.jsx("tr",{children:i.map((L,_)=>e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:L},_))},w))})]})}),a.type==="core/video"&&e.jsx("div",{className:"space-y-2",children:a.content.url?e.jsx("video",{src:a.content.url,controls:a.content.controls,autoPlay:a.content.autoplay,loop:a.content.loop,muted:a.content.muted,className:"w-full rounded"}):e.jsx("button",{onClick:i=>{i.stopPropagation(),j(()=>w=>{const L={...a,content:{...a.content,url:w.url}},_=r.map(A=>A.id===a.id?L:A);y(_),m(!1)}),m(!0)},className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-modern-primary hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(It,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"비디오 선택"})]})})}),a.type==="core/columns"&&e.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:a.content.columns.map(i=>`${i.width}%`).join(" ")},children:a.content.columns.map((i,w)=>e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded p-4 min-h-[100px]",children:e.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:["Column ",w+1]})},i.id))}),a.type==="core/group"&&e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded min-h-[100px]",style:{backgroundColor:a.content.backgroundColor,padding:`${a.content.padding}px`},children:e.jsx("div",{className:"text-sm text-gray-500",children:"Group Block"})})]})]})]},a.id)};return e.jsxs("div",{className:"gutenberg-editor bg-modern-bg-card rounded-lg",children:[e.jsx("div",{className:"border-b border-modern-border-primary p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-modern-text-primary",children:"Block Editor"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"px-3 py-1.5 text-sm border border-modern-border-primary rounded hover:bg-modern-bg-hover",children:"Preview"}),e.jsx("button",{className:"px-3 py-1.5 text-sm bg-modern-primary text-white rounded hover:bg-modern-primary-hover",children:"Update"})]})]})}),e.jsxs("div",{className:"p-8 min-h-[400px]",children:[r.map(V),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>p(!f),className:D("w-full py-4 border-2 border-dashed rounded-lg transition-all","hover:border-modern-primary hover:bg-modern-primary-alpha","flex items-center justify-center gap-2",f?"border-modern-primary bg-modern-primary-alpha":"border-modern-border-secondary"),children:[e.jsx(Y,{className:"w-5 h-5 text-modern-text-secondary"}),e.jsx("span",{className:"text-modern-text-secondary",children:"Add block"})]}),f&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-modern-bg-card border border-modern-border-primary rounded-lg shadow-modern-shadow-xl z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex items-center gap-2 mb-4 pb-4 border-b border-modern-border-primary",children:I.map(a=>e.jsx("button",{onClick:()=>b(a),className:D("px-3 py-1.5 text-sm rounded transition-colors capitalize",v===a?"bg-modern-primary text-white":"text-modern-text-secondary hover:bg-modern-bg-hover"),children:a},a))}),e.jsx("div",{className:"grid grid-cols-3 gap-2 max-h-96 overflow-y-auto",children:$.map(a=>{const S=a.icon;return e.jsxs("button",{onClick:()=>T(a.id),className:"flex flex-col items-center gap-2 p-4 border border-modern-border-primary rounded-lg hover:border-modern-primary hover:bg-modern-bg-hover transition-all",children:[e.jsx(S,{className:"w-6 h-6 text-modern-text-secondary"}),e.jsx("span",{className:"text-xs text-modern-text-secondary text-center",children:a.name})]},a.id)})})]})})]})]}),e.jsx(Ss,{_isOpen:c,onClose:()=>{m(!1),j(null)},onSelect:a=>{u&&u(a)},allowMultiple:r.find(a=>a.id===h)?.type==="core/gallery"}),N&&h&&e.jsxs("div",{className:"fixed inset-y-0 right-0 w-80 bg-white shadow-xl z-40",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"font-semibold",children:"블록 설정"}),e.jsx("button",{onClick:()=>C(!1),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(he,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto h-full",children:[r.find(a=>a.id===h)?.type==="core/image"&&e.jsx(Ts,{settings:r.find(a=>a.id===h)?.content||{},onChange:a=>{const S=r.map(i=>i.id===h?{...i,content:{...i.content,...a}}:i);y(S)}}),r.find(a=>a.id===h)?.type==="core/gallery"&&e.jsx(Bs,{settings:r.find(a=>a.id===h)?.content||{},onChange:a=>{const S=r.map(i=>i.id===h?{...i,content:{...i.content,...a}}:i);y(S)}}),r.find(a=>a.id===h)?.type==="core/cover"&&e.jsx(Ps,{settings:r.find(a=>a.id===h)?.content||{},onChange:a=>{const S=r.map(i=>i.id===h?{...i,content:{...i.content,...a}}:i);y(S)}}),r.find(a=>a.id===h)?.type==="core/button"&&e.jsx(Es,{settings:r.find(a=>a.id===h)?.content||{},onChange:a=>{const S=r.map(i=>i.id===h?{...i,content:{...i.content,...a}}:i);y(S)}})]})]})]})},se=l.createContext(null),tt=({open:s,defaultOpen:t=!1,onOpenChange:n,children:o})=>{const[r,d]=l.useState(t),f=s??r,p=h=>{s===void 0&&d(h),n?.(h)};return e.jsx(se.Provider,{value:{open:f,onOpenChange:p},children:o})},As=l.forwardRef(({onClick:s,...t},n)=>{const o=l.useContext(se);if(!o)throw new Error("DialogTrigger must be used within Dialog");return e.jsx("button",{ref:n,onClick:r=>{s?.(r),o.onOpenChange(!0)},...t})}),st=({children:s})=>{const t=l.useContext(se);if(!t)throw new Error("DialogPortal must be used within Dialog");return t.open?e.jsx(e.Fragment,{children:s}):null},at=l.forwardRef(({onClick:s,...t},n)=>{const o=l.useContext(se);if(!o)throw new Error("DialogClose must be used within Dialog");return e.jsx("button",{ref:n,onClick:r=>{s?.(r),o.onOpenChange(!1)},...t})}),rt=l.forwardRef(({className:s,onClick:t,...n},o)=>{const r=l.useContext(se);if(!r)throw new Error("DialogOverlay must be used within Dialog");return e.jsx("div",{ref:o,className:B("fixed inset-0 z-[100000] bg-black/80",s),onClick:d=>{t?.(d),d.target===d.currentTarget&&r.onOpenChange(!1)},...n})}),nt=l.forwardRef(({className:s,children:t,...n},o)=>{const r=l.useContext(se);if(!r)throw new Error("DialogContent must be used within Dialog");return l.useEffect(()=>{if(r.open){const d=f=>{f.key==="Escape"&&r.onOpenChange(!1)};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)}},[r]),e.jsxs(st,{children:[e.jsx(rt,{}),e.jsxs("div",{ref:o,className:B("fixed left-[50%] top-[50%] z-[100001] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg",s),...n,children:[t,e.jsxs(at,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}),ot=({className:s,...t})=>e.jsx("div",{className:B("flex flex-col space-y-1.5 text-center sm:text-left",s),...t}),lt=({className:s,...t})=>e.jsx("div",{className:B("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t}),it=l.forwardRef(({className:s,...t},n)=>e.jsx("h2",{ref:n,className:B("text-lg font-semibold leading-none tracking-tight",s),...t})),ct=l.forwardRef(({className:s,...t},n)=>e.jsx("p",{ref:n,className:B("text-sm text-muted-foreground",s),...t}));tt.displayName="Dialog";As.displayName="DialogTrigger";st.displayName="DialogPortal";at.displayName="DialogClose";rt.displayName="DialogOverlay";nt.displayName="DialogContent";ot.displayName="DialogHeader";lt.displayName="DialogFooter";it.displayName="DialogTitle";ct.displayName="DialogDescription";const _s=l.forwardRef(({className:s,value:t=0,max:n=100,...o},r)=>{const d=Math.min(Math.max(0,t/n*100),100);return e.jsx("div",{ref:r,role:"progressbar","aria-valuemin":0,"aria-valuemax":n,"aria-valuenow":t,className:B("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...o,children:e.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-d}%)`}})})});_s.displayName="Progress";const zs=xe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Se=l.forwardRef(({className:s,variant:t,...n},o)=>e.jsx("div",{ref:o,role:"alert",className:B(zs({variant:t}),s),...n}));Se.displayName="Alert";const Fs=l.forwardRef(({className:s,...t},n)=>e.jsx("h5",{ref:n,className:B("mb-1 font-medium leading-none tracking-tight",s),...t}));Fs.displayName="AlertTitle";const Te=l.forwardRef(({className:s,...t},n)=>e.jsx("div",{ref:n,className:B("text-sm [&_p]:leading-relaxed",s),...t}));Te.displayName="AlertDescription";const Us=({onInsertBlock:s,onEditBlock:t,onCreateNew:n,compact:o=!1})=>{const[r,d]=l.useState([]),[f,p]=l.useState(!0),[h,x]=l.useState(""),[v,b]=l.useState("all"),[c,m]=l.useState("grid"),[u,j]=l.useState([]),[N,C]=l.useState(1),[P,I]=l.useState(1),$=async(a=1,S="",i="all")=>{p(!0);try{const w=new URLSearchParams({page:a.toString(),per_page:o?"8":"12",search:S,status:"active",order:"DESC",orderby:"usageCount"});i!=="all"&&w.append("category",i);const L=await fetch(`/api/reusable-blocks?${w}`,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch blocks");const _=await L.json(),A=parseInt(L.headers.get("X-WP-TotalPages")||"1");d(_),I(A)}catch{}finally{p(!1)}},y=async()=>{try{const a=await fetch("/api/reusable-blocks/categories",{credentials:"include"});if(a.ok){const S=await a.json();j(S)}}catch{}};l.useEffect(()=>{$(N,h,v)},[N,h,v]),l.useEffect(()=>{y()},[]);const T=a=>{s&&s(a)},g=async a=>{try{(await fetch(`/api/reusable-blocks/${a}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})})).ok&&$(N,h,v)}catch{}},k=async a=>{if(confirm("Are you sure you want to delete this reusable block?"))try{(await fetch(`/api/reusable-blocks/${a}`,{method:"DELETE",credentials:"include"})).ok&&$(N,h,v)}catch{}},z=a=>e.jsxs(J,{className:"group relative overflow-hidden",children:[e.jsxs("div",{className:"aspect-video bg-gray-50 border-b overflow-hidden",children:[a.preview?.screenshot?e.jsx("img",{src:a.preview.screenshot,alt:a.title,className:"w-full h-full object-cover"}):a.preview?.html?e.jsx("div",{className:"w-full h-full p-2 text-xs overflow-hidden",dangerouslySetInnerHTML:{__html:a.preview.html}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(G,{className:"h-8 w-8"})}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx(E,{size:"sm",onClick:()=>T(a),className:"bg-blue-600 hover:bg-blue-700",children:"Insert"}),a.isEditable&&t&&e.jsx(E,{size:"sm",variant:"outline",onClick:()=>t(a.id),children:e.jsx(be,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:a.title}),e.jsxs(ye,{children:[e.jsx(de,{children:e.jsx(E,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",children:"•••"})}),e.jsxs(ue,{align:"end",children:[e.jsxs(q,{onClick:()=>T(a),children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Insert Block"]}),e.jsxs(q,{onClick:()=>g(a.id),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),a.isEditable&&t&&e.jsxs(q,{onClick:()=>t(a.id),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Edit"]}),a.author.id==="current-user-id"&&e.jsxs(q,{onClick:()=>k(a.id),className:"text-red-600",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),a.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a.category&&e.jsx(H,{variant:"secondary",className:"text-xs",children:a.category}),a.isGlobal&&e.jsxs(H,{variant:"outline",className:"text-xs",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"Global"]})]}),e.jsxs("span",{children:[a.usageCount," uses"]})]}),a.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[a.tags.slice(0,3).map(S=>e.jsx(H,{variant:"outline",className:"text-xs",children:S},S)),a.tags.length>3&&e.jsxs(H,{variant:"outline",className:"text-xs",children:["+",a.tags.length-3]})]})]})]},a.id),V=a=>e.jsx(J,{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-12 bg-gray-100 rounded border overflow-hidden flex-shrink-0",children:a.preview?.screenshot?e.jsx("img",{src:a.preview.screenshot,alt:a.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-medium text-sm truncate",children:a.title}),a.description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:a.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.category&&e.jsx(H,{variant:"secondary",className:"text-xs",children:a.category}),e.jsxs("span",{className:"text-xs text-gray-500",children:[a.usageCount," uses"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["by ",a.author.name]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{size:"sm",onClick:()=>T(a),children:"Insert"}),e.jsxs(ye,{children:[e.jsx(de,{children:e.jsx(E,{variant:"ghost",size:"sm",children:"•••"})}),e.jsxs(ue,{align:"end",children:[e.jsxs(q,{onClick:()=>g(a.id),children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),a.isEditable&&t&&e.jsxs(q,{onClick:()=>t(a.id),children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Edit"]}),a.author.id==="current-user-id"&&e.jsxs(q,{onClick:()=>k(a.id),className:"text-red-600",children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})})]})},a.id);return o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(U,{placeholder:"Search reusable blocks...",value:h,onChange:a=>x(a.target.value),className:"pl-10"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:f?Array.from({length:4}).map((a,S)=>e.jsx("div",{className:"aspect-video bg-gray-100 rounded animate-pulse"},S)):r.length===0?e.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:"No reusable blocks found"}):r.map(z)}),n&&e.jsxs(E,{onClick:n,className:"w-full",variant:"outline",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Create New Block"]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Reusable Blocks"}),e.jsx("p",{className:"text-gray-600",children:"Browse and manage your reusable block library"})]}),n&&e.jsxs(E,{onClick:n,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Create New Block"]})]}),e.jsx(J,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(U,{placeholder:"Search reusable blocks...",value:h,onChange:a=>x(a.target.value),className:"pl-10 w-64"})]}),e.jsxs(ye,{children:[e.jsx(de,{children:e.jsxs(E,{variant:"outline",children:["Category: ",v==="all"?"All":v]})}),e.jsxs(ue,{children:[e.jsx(q,{onClick:()=>b("all"),children:"All Categories"}),u.map(a=>e.jsx(q,{onClick:()=>b(a),children:a},a))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:c==="grid"?"default":"outline",size:"sm",onClick:()=>m("grid"),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(E,{variant:c==="list"?"default":"outline",size:"sm",onClick:()=>m("list"),children:e.jsx(K,{className:"h-4 w-4"})})]})]})}),e.jsxs(Ee,{defaultValue:"all",className:"space-y-4",children:[e.jsxs(Re,{children:[e.jsx(Z,{value:"all",children:"All Blocks"}),e.jsx(Z,{value:"mine",children:"My Blocks"}),e.jsx(Z,{value:"global",children:"Global Blocks"})]}),e.jsxs(ne,{value:"all",className:"space-y-4",children:[f?e.jsx("div",{className:`grid ${c==="grid"?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"gap-3"}`,children:Array.from({length:8}).map((a,S)=>e.jsx("div",{className:c==="grid"?"aspect-video bg-gray-100 rounded animate-pulse":"h-20 bg-gray-100 rounded animate-pulse"},S))}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No reusable blocks found"}),n&&e.jsxs(E,{onClick:n,children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Create Your First Block"]})]}):e.jsx("div",{className:c==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-3",children:c==="grid"?r.map(z):r.map(V)}),P>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",N," of ",P]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",disabled:N===1,onClick:()=>C(N-1),children:"Previous"}),e.jsx(E,{variant:"outline",disabled:N===P,onClick:()=>C(N+1),children:"Next"})]})]})]}),e.jsx(ne,{value:"mine",children:e.jsx("p",{className:"text-gray-500",children:"Your personal reusable blocks"})}),e.jsx(ne,{value:"global",children:e.jsx("p",{className:"text-gray-500",children:"Blocks shared across the organization"})})]})]})};let Oe=!1;async function Os(){if(Oe)return;await X(()=>import("./wordpress-hooks-shim-yGIyN5X3.js"),[]);const{default:s}=await X(async()=>{const{default:t}=await import("./wordpress-polyfill-Cnl6Oox7.js");return{default:t}},[]);s(),Oe=!0}const dt=()=>{const[s,t]=l.useState(!1),[n,o]=l.useState(null),r=l.useCallback(async b=>{t(!0),o(null);try{const c=await fetch("/api/reusable-blocks",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(b)});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to save reusable block")}return await c.json()}catch(c){const m=c instanceof Error?c.message:"Unknown error occurred";return o(m),null}finally{t(!1)}},[]),d=l.useCallback(async b=>{t(!0),o(null);try{const c=await fetch(`/api/reusable-blocks/${b}`,{credentials:"include"});if(!c.ok){const j=await c.json();throw new Error(j.error||"Failed to fetch reusable block")}const m=await c.json();let u;if(Array.isArray(m.content))u=m.content;else if(window.wp?.blocks?.parse)u=window.wp.blocks.parse(m.content);else{const{parse:j}=await X(async()=>{const{parse:N}=await import("./wp-all-CpKe89B2.js").then(C=>C.aG);return{parse:N}},__vite__mapDeps([0,1,2,3]));u=j(m.content)}return u}catch(c){const m=c instanceof Error?c.message:"Unknown error occurred";return o(m),null}finally{t(!1)}},[]),f=l.useCallback(async b=>{t(!0),o(null);try{const c=await fetch(`/api/reusable-blocks/${b}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(!c.ok){const u=await c.json();throw new Error(u.error||"Failed to duplicate reusable block")}return await c.json()}catch(c){const m=c instanceof Error?c.message:"Unknown error occurred";return o(m),null}finally{t(!1)}},[]),p=l.useCallback(async b=>{t(!0),o(null);try{const c=await fetch(`/api/reusable-blocks/${b}`,{method:"DELETE",credentials:"include"});if(!c.ok){const m=await c.json();throw new Error(m.error||"Failed to delete reusable block")}return!0}catch(c){const m=c instanceof Error?c.message:"Unknown error occurred";return o(m),!1}finally{t(!1)}},[]),h=l.useCallback(async(b,c)=>{t(!0),o(null);try{const m=await fetch(`/api/reusable-blocks/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!m.ok){const j=await m.json();throw new Error(j.error||"Failed to update reusable block")}return await m.json()}catch(m){const u=m instanceof Error?m.message:"Unknown error occurred";return o(u),null}finally{t(!1)}},[]),x=l.useCallback(b=>{const c=b.map(N=>N.name||"unknown").join(", "),m=`Reusable Block (${c})`,u=N=>N.map(C=>C.attributes?.content?C.attributes.content.replace(/<[^>]*>/g,""):C.innerBlocks?.length?u(C.innerBlocks):"").filter(Boolean).join(" ").slice(0,200),j=u(b);return{title:m,description:j||void 0,content:b,category:"general",tags:[],visibility:"private",isGlobal:!1,metadata:{version:"1.0.0",compatibility:["wordpress-6.0+"],keywords:c.split(", "),difficulty:"beginner"}}},[]),v=l.useCallback(b=>{const c=[];return(!b.title||b.title.trim().length===0)&&c.push("Title is required"),b.title&&b.title.length>255&&c.push("Title must be less than 255 characters"),(!b.content||!Array.isArray(b.content)||b.content.length===0)&&c.push("Block content is required"),b.description&&b.description.length>1e3&&c.push("Description must be less than 1000 characters"),b.category&&b.category.length>100&&c.push("Category must be less than 100 characters"),b.tags&&b.tags.length>10&&c.push("Maximum 10 tags allowed"),b.tags&&b.tags.filter(u=>u.length>50).length>0&&c.push("Each tag must be less than 50 characters"),b.visibility&&!["private","public","organization"].includes(b.visibility)&&c.push("Invalid visibility setting"),{valid:c.length===0,errors:c}},[]);return{loading:s,error:n,saveAsReusableBlock:r,insertReusableBlock:d,duplicateReusableBlock:f,deleteReusableBlock:p,updateReusableBlock:h,convertBlocksToReusable:x,validateBlockData:v}},$s=({isOpen:s,onClose:t,selectedBlocks:n,onSaved:o})=>{const{saveAsReusableBlock:r,convertBlocksToReusable:d,validateBlockData:f,loading:p,error:h}=dt(),[x,v]=l.useState({title:"",description:"",category:"",tags:[],visibility:"private",isGlobal:!1}),[b,c]=l.useState(""),[m,u]=l.useState([]),[j,N]=l.useState([]);l.useEffect(()=>{if(s&&n.length>0){const y=d(n);v({title:y.title,description:y.description||"",category:y.category||"",tags:y.tags||[],visibility:y.visibility||"private",isGlobal:y.isGlobal||!1})}},[s,n,d]),l.useEffect(()=>{s&&(async()=>{try{const T=await fetch("/api/reusable-blocks/categories",{credentials:"include"});if(T.ok){const g=await T.json();N(g)}}catch{}})()},[s]);const C=async()=>{const y={title:x.title,description:x.description||void 0,content:n,category:x.category||void 0,tags:x.tags,visibility:x.visibility,isGlobal:x.isGlobal,metadata:{version:"1.0.0",compatibility:["wordpress-6.0+"],keywords:x.tags,difficulty:"beginner"}},T=f(y);if(!T.valid){u(T.errors);return}u([]);try{const g=await r(y);g&&(o?.(g),t(),v({title:"",description:"",category:"",tags:[],visibility:"private",isGlobal:!1}))}catch{}},P=()=>{const y=b.trim();y&&!x.tags.includes(y)&&x.tags.length<10&&(v(T=>({...T,tags:[...T.tags,y]})),c(""))},I=y=>{v(T=>({...T,tags:T.tags.filter(g=>g!==y)}))},$=y=>{y.key==="Enter"&&(y.preventDefault(),P())};return e.jsx(tt,{open:s,onOpenChange:t,children:e.jsxs(nt,{className:"sm:max-w-md",children:[e.jsxs(ot,{children:[e.jsx(it,{children:"Save as Reusable Block"}),e.jsx(ct,{children:"Save the selected blocks as a reusable block that can be used across your site."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(R,{htmlFor:"title",children:"Title *"}),e.jsx(U,{id:"title",value:x.title,onChange:y=>v(T=>({...T,title:y.target.value})),placeholder:"Enter block title...",maxLength:255})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"description",children:"Description"}),e.jsx(ge,{id:"description",value:x.description,onChange:y=>v(T=>({...T,description:y.target.value})),placeholder:"Describe what this block does...",rows:3,maxLength:1e3}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[x.description.length,"/1000 characters"]})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"category",children:"Category"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Fe,{value:x.category,onValueChange:y=>v(T=>({...T,category:y})),children:[e.jsx(ke,{className:"flex-1",children:e.jsx(Ue,{placeholder:"Select or create category..."})}),e.jsxs(Ce,{children:[e.jsx(W,{value:"general",children:"General"}),e.jsx(W,{value:"layout",children:"Layout"}),e.jsx(W,{value:"content",children:"Content"}),e.jsx(W,{value:"media",children:"Media"}),e.jsx(W,{value:"widgets",children:"Widgets"}),j.map(y=>e.jsx(W,{value:y,children:y},y))]})]}),e.jsx(U,{placeholder:"Or type new category",value:x.category,onChange:y=>v(T=>({...T,category:y.target.value})),className:"flex-1",maxLength:100})]})]}),e.jsxs("div",{children:[e.jsx(R,{children:"Tags"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(U,{placeholder:"Add tags...",value:b,onChange:y=>c(y.target.value),onKeyPress:$,maxLength:50,disabled:x.tags.length>=10}),e.jsx(E,{type:"button",variant:"outline",size:"sm",onClick:P,disabled:!b.trim()||x.tags.includes(b.trim())||x.tags.length>=10,children:e.jsx(Y,{className:"h-4 w-4"})})]}),x.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:x.tags.map(y=>e.jsxs(H,{variant:"secondary",className:"flex items-center gap-1",children:[y,e.jsx("button",{type:"button",onClick:()=>I(y),className:"ml-1 text-gray-500 hover:text-red-500",children:e.jsx(he,{className:"h-3 w-3"})})]},y))}),e.jsxs("div",{className:"text-xs text-gray-500",children:[x.tags.length,"/10 tags"]})]})]}),e.jsxs("div",{children:[e.jsx(R,{htmlFor:"visibility",children:"Visibility"}),e.jsxs(Fe,{value:x.visibility,onValueChange:y=>v(T=>({...T,visibility:y})),children:[e.jsx(ke,{children:e.jsx(Ue,{})}),e.jsxs(Ce,{children:[e.jsx(W,{value:"private",children:"Private (Only me)"}),e.jsx(W,{value:"organization",children:"Organization (Team members)"}),e.jsx(W,{value:"public",children:"Public (Everyone)"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Blocks to save:"})," ",n.length," block",n.length!==1?"s":""]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n.map(y=>y.name||"unknown").join(", ")})]}),(m.length>0||h)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsxs("div",{className:"text-sm text-red-800",children:[h&&e.jsx("div",{className:"mb-2",children:h}),m.map((y,T)=>e.jsxs("div",{children:["• ",y]},T))]})})]}),e.jsxs(lt,{children:[e.jsx(E,{variant:"outline",onClick:t,disabled:p,children:"Cancel"}),e.jsx(E,{onClick:C,disabled:p||!x.title.trim(),children:p?"Saving...":"Save Block"})]})]})})},ut=l.forwardRef(({className:s,children:t,orientation:n="vertical",...o},r)=>e.jsx("div",{ref:r,className:B("relative overflow-auto",{"overflow-y-auto overflow-x-hidden":n==="vertical","overflow-x-auto overflow-y-hidden":n==="horizontal","overflow-auto":n==="both"},"scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100","hover:scrollbar-thumb-gray-400",s),...o,children:t}));ut.displayName="ScrollArea";function F({className:s,...t}){return e.jsx("div",{className:B("animate-pulse rounded-md bg-gray-200",s),...t})}const Vs=({onInsertPattern:s,onPreviewPattern:t,compact:n=!1,selectedCategory:o="all"})=>{const[r,d]=l.useState([]),[f,p]=l.useState([]),[h,x]=l.useState(!0),[v,b]=l.useState(""),[c,m]=l.useState(o),[u,j]=l.useState("grid"),[N,C]=l.useState(1),[P,I]=l.useState(1),[$,y]=l.useState(null),T=async(i=1,w="",L="all")=>{x(!0);try{const _=new URLSearchParams({page:i.toString(),per_page:n?"12":"24",search:w,orderby:"featured",order:"DESC"});L!=="all"&&_.append("category",L);const A=await fetch(`/api/block-patterns?${_}`);if(!A.ok)throw new Error("Failed to fetch patterns");const fe=await A.json(),M=parseInt(A.headers.get("X-WP-TotalPages")||"1");d(fe),I(M)}catch{}finally{x(!1)}},g=async()=>{try{const i=await fetch("/api/block-patterns/categories");if(i.ok){const w=await i.json();p(w)}}catch{}};l.useEffect(()=>{g()},[]),l.useEffect(()=>{T(N,v,c)},[N,v,c]);const k=i=>{s&&s(i)},z=i=>{t&&t(i)},V=i=>e.jsxs(J,{className:`group relative overflow-hidden cursor-pointer transition-all ${$===i.id?"ring-2 ring-blue-500":""}`,onMouseEnter:()=>y(i.id),onMouseLeave:()=>y(null),onClick:()=>k(i),children:[e.jsxs("div",{className:"aspect-[4/3] bg-gray-50 border-b overflow-hidden relative",children:[i.preview?.screenshot?e.jsx("img",{src:i.preview.screenshot,alt:i.title,className:"w-full h-full object-cover"}):i.preview?.html?e.jsx("div",{className:"w-full h-full p-4 overflow-hidden",children:e.jsx("div",{className:"transform scale-50 origin-top-left w-[200%] h-[200%]",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:i.preview.html}})})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ae,{className:"h-12 w-12 text-gray-300"})}),e.jsxs("div",{className:"absolute top-2 left-2 flex gap-1",children:[i.featured&&e.jsxs(H,{className:"bg-yellow-500 text-white",children:[e.jsx(me,{className:"h-3 w-3 mr-1 fill-current"}),"Featured"]}),i.isPremium&&e.jsx(H,{className:"bg-purple-500 text-white",children:"Pro"}),i.source==="core"&&e.jsx(H,{variant:"secondary",children:"Core"})]}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx(E,{size:"sm",onClick:w=>{w.stopPropagation(),k(i)},className:"bg-blue-600 hover:bg-blue-700",children:"Insert Pattern"}),t&&e.jsx(E,{size:"sm",variant:"outline",onClick:w=>{w.stopPropagation(),z(i)},className:"text-white border-white hover:bg-white/20",children:e.jsx(Ie,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium text-sm mb-1",children:i.title}),i.description&&e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{variant:"outline",className:"text-xs",children:f.find(w=>w.id===i.category)?.name||i.category}),i.usageCount>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[i.usageCount," uses"]})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:["by ",i.author.name]})]}),i.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:i.tags.slice(0,3).map(w=>e.jsxs("span",{className:"text-xs text-gray-500",children:["#",w]},w))})]})]},i.id),a=i=>e.jsx(J,{className:"p-4 hover:bg-gray-50 cursor-pointer",onClick:()=>k(i),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-16 bg-gray-100 rounded border overflow-hidden flex-shrink-0",children:i.preview?.screenshot?e.jsx("img",{src:i.preview.screenshot,alt:i.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ae,{className:"h-6 w-6 text-gray-400"})})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h3",{className:"font-medium text-sm flex items-center gap-2",children:[i.title,i.featured&&e.jsx(me,{className:"h-3 w-3 text-yellow-500 fill-current"}),i.isPremium&&e.jsx(H,{className:"text-xs bg-purple-500 text-white",children:"Pro"})]}),i.description&&e.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1",children:i.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx(H,{variant:"outline",className:"text-xs",children:f.find(w=>w.id===i.category)?.name||i.category}),e.jsxs("span",{className:"text-xs text-gray-500",children:[i.usageCount," uses"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["by ",i.author.name]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{size:"sm",onClick:w=>{w.stopPropagation(),k(i)},children:"Insert"}),t&&e.jsx(E,{size:"sm",variant:"ghost",onClick:w=>{w.stopPropagation(),z(i)},children:e.jsx(Ie,{className:"h-4 w-4"})})]})]})})]})},i.id),S=()=>e.jsx("div",{className:u==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-3",children:Array.from({length:6}).map((i,w)=>e.jsxs(J,{className:"overflow-hidden",children:[e.jsx(F,{className:u==="grid"?"h-48":"h-20"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx(F,{className:"h-4 w-3/4"}),e.jsx(F,{className:"h-3 w-full"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(F,{className:"h-5 w-16"}),e.jsx(F,{className:"h-5 w-16"})]})]})]},w))});return n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(U,{placeholder:"Search patterns...",value:v,onChange:i=>b(i.target.value),className:"pl-10"})]}),e.jsx(ut,{className:"w-full",children:e.jsxs("div",{className:"flex gap-2 pb-2",children:[e.jsx(E,{variant:c==="all"?"default":"outline",size:"sm",onClick:()=>m("all"),children:"All"}),f.map(i=>e.jsxs(E,{variant:c===i.id?"default":"outline",size:"sm",onClick:()=>m(i.id),children:[i.name," (",i.count,")"]},i.id))]})}),e.jsx("div",{className:"space-y-3",children:h?S():r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ae,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No patterns found"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:r.slice(0,6).map(V)})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Block Patterns"}),e.jsx("p",{className:"text-gray-600",children:"Pre-designed block layouts to speed up your workflow"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{variant:u==="grid"?"default":"outline",size:"sm",onClick:()=>j("grid"),children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(E,{variant:u==="list"?"default":"outline",size:"sm",onClick:()=>j("list"),children:e.jsx(K,{className:"h-4 w-4"})})]})]}),e.jsx(J,{className:"p-4",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(oe,{className:"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(U,{placeholder:"Search patterns...",value:v,onChange:i=>b(i.target.value),className:"pl-10"})]})})}),e.jsxs(Ee,{value:c,onValueChange:m,children:[e.jsxs(Re,{className:"w-full justify-start overflow-x-auto",children:[e.jsxs(Z,{value:"all",children:["All Patterns",f.length>0&&e.jsxs("span",{className:"ml-2 text-xs",children:["(",f.reduce((i,w)=>i+w.count,0),")"]})]}),f.map(i=>e.jsxs(Z,{value:i.id,children:[i.name,e.jsxs("span",{className:"ml-2 text-xs",children:["(",i.count,")"]})]},i.id))]}),e.jsx(ne,{value:c,className:"mt-6",children:h?S():r.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ae,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No patterns found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:u==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-3",children:u==="grid"?r.map(V):r.map(a)}),P>1&&e.jsxs("div",{className:"flex items-center justify-between mt-8",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Page ",N," of ",P]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",disabled:N===1,onClick:()=>C(N-1),children:"Previous"}),e.jsx(E,{variant:"outline",disabled:N===P,onClick:()=>C(N+1),children:"Next"})]})]})]})})]})]})},Hs=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,mt=s=>s.map(t=>({name:t.name,attributes:t.attributes,innerBlocks:t.innerBlocks?mt(t.innerBlocks):void 0,innerHTML:t.innerHTML})),$e=s=>{const t=n=>{const o={name:n.name,attributes:n.attributes||{},innerBlocks:[],innerHTML:n.innerHTML||""};return n.innerBlocks&&n.innerBlocks.length>0&&(o.innerBlocks=n.innerBlocks.map(t)),o.clientId=Hs(),o};return s.content.map(t)},qs=()=>{const[s,t]=l.useState(!1),[n,o]=l.useState(null),r=l.useCallback(async c=>{t(!0),o(null);try{const m=await fetch(`/api/block-patterns/${c}`);if(!m.ok){const N=await m.json();throw new Error(N.error||"Failed to fetch block pattern")}const u=await m.json();return $e(u)}catch(m){const u=m instanceof Error?m.message:"Unknown error occurred";return o(u),null}finally{t(!1)}},[]),d=l.useCallback(async c=>{t(!0),o(null);try{const m=await fetch("/api/block-patterns",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});if(!m.ok){const j=await m.json();throw new Error(j.error||"Failed to create block pattern")}return await m.json()}catch(m){const u=m instanceof Error?m.message:"Unknown error occurred";return o(u),null}finally{t(!1)}},[]),f=l.useCallback(async c=>{t(!0),o(null);try{const m=await fetch(`/api/block-patterns/${c}/duplicate`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({})});if(!m.ok){const j=await m.json();throw new Error(j.error||"Failed to duplicate block pattern")}return await m.json()}catch(m){const u=m instanceof Error?m.message:"Unknown error occurred";return o(u),null}finally{t(!1)}},[]),p=l.useCallback(async c=>{t(!0),o(null);try{const m=await fetch(`/api/block-patterns/${c}`,{method:"DELETE",credentials:"include"});if(!m.ok){const u=await m.json();throw new Error(u.error||"Failed to delete block pattern")}return!0}catch(m){const u=m instanceof Error?m.message:"Unknown error occurred";return o(u),!1}finally{t(!1)}},[]),h=l.useCallback(async(c,m)=>{t(!0),o(null);try{const u=await fetch(`/api/block-patterns/${c}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(m)});if(!u.ok){const N=await u.json();throw new Error(N.error||"Failed to update block pattern")}return await u.json()}catch(u){const j=u instanceof Error?u.message:"Unknown error occurred";return o(j),null}finally{t(!1)}},[]),x=l.useCallback(c=>{const m=c.map(C=>({name:C.name,attributes:C.attributes,innerBlocks:C.innerBlocks?mt(C.innerBlocks):void 0,innerHTML:C.innerHTML})),u=c.map(C=>C.name);let j="general";return u.includes("core/navigation")||u.includes("core/site-logo")?j="header":u.includes("core/heading")&&u.includes("core/buttons")?j="hero":u.includes("core/columns")&&u.length>3?j="features":(u.includes("core/quote")||u.includes("core/testimonial"))&&(j="testimonials"),{title:`Custom ${j.charAt(0).toUpperCase()+j.slice(1)} Pattern`,description:`A custom ${j} pattern created from selected blocks`,content:m,category:j,tags:[],visibility:"private",metadata:{blockTypes:u,createdFrom:"editor"}}},[]),v=l.useCallback((c,m)=>!c.dependencies||c.dependencies.length===0?!0:(c.metadata?.blockTypes||[]).every(j=>m.includes(j)),[]),b=l.useCallback((c,m)=>{if(c.colorScheme&&c.colorScheme.length>0&&c.colorScheme.forEach((u,j)=>{m.style.setProperty(`--pattern-color-${j+1}`,u)}),c.typography&&(c.typography.fontFamily&&(m.style.fontFamily=c.typography.fontFamily),c.typography.fontSize&&(m.style.fontSize=c.typography.fontSize),c.typography.lineHeight&&(m.style.lineHeight=c.typography.lineHeight),c.typography.fontWeight&&(m.style.fontWeight=c.typography.fontWeight)),c.preview?.css){const u=document.createElement("style");u.textContent=c.preview.css,m.appendChild(u)}},[]);return{loading:s,error:n,insertBlockPattern:r,createBlockPattern:d,duplicateBlockPattern:f,deleteBlockPattern:p,updateBlockPattern:h,convertBlocksToPattern:x,transformPatternToBlocks:$e,validatePatternCompatibility:v,applyPatternStyles:b}},Ws=`
  /* Group Block Styles */
  .o4o-group-block {
    box-sizing: border-box;
  }
  
  .o4o-group-block.flex {
    display: flex;
  }
  
  .o4o-group-block.grid {
    display: grid;
  }
  
  /* Columns Block Styles */
  .o4o-columns-block {
    display: flex;
    width: 100%;
    box-sizing: border-box;
  }
  
  .o4o-column-block {
    box-sizing: border-box;
    flex-grow: 0;
    flex-shrink: 0;
  }
  
  @media (max-width: 768px) {
    .o4o-columns-block.stack-on-mobile {
      flex-direction: column !important;
    }
    
    .o4o-columns-block.stack-on-mobile .o4o-column-block {
      flex-basis: 100% !important;
      margin-bottom: 20px;
    }
  }
  
  /* Cover Block Styles */
  .o4o-cover-block {
    position: relative;
    overflow: hidden;
    box-sizing: border-box;
  }
  
  .o4o-cover-block.is-dark {
    color: #ffffff;
  }
  
  .o4o-cover-block.is-light {
    color: #000000;
  }
  
  .o4o-cover-block__overlay {
    transition: opacity 0.3s ease;
  }
  
  .o4o-cover-block__content {
    text-align: center;
  }
  
  /* InnerBlocks Styles */
  .block-editor-inner-blocks {
    height: 100%;
  }
  
  .block-editor-inner-blocks .block-editor-block-list__layout {
    height: 100%;
  }
  
  /* Block Appender Styles */
  .block-list-appender {
    margin-top: 20px;
  }
  
  .block-editor-button-block-appender {
    width: 100%;
    justify-content: center;
    padding: 12px;
    border: 2px dashed #ddd;
    color: #555;
    transition: all 0.2s ease;
  }
  
  .block-editor-button-block-appender:hover {
    border-color: #007cba;
    color: #007cba;
    background-color: rgba(0, 124, 186, 0.04);
  }
`;function Gs(){(window.wp?.domReady||(t=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",t):t()}))(()=>{const t=document.createElement("style");t.textContent=Ws,document.head.appendChild(t)})}const ht={"o4o/group":()=>X(()=>import("./index-BPQ3eyG8.js"),__vite__mapDeps([4,1,0,3,2])),"o4o/columns":()=>X(()=>import("./index-Bxe-0qP2.js"),__vite__mapDeps([5,1,0,3,2])),"o4o/cover":()=>X(()=>import("./index-BvcPMdbx.js"),__vite__mapDeps([6,1,0,3,2]))},Ve=new Set;async function xt(s){if(Ve.has(s))return;const t=ht[s];if(t)try{await t(),Ve.add(s)}catch{}}async function Js(s){const t=/<!-- wp:(\S+)/g,n=new Set;let o;for(;(o=t.exec(s))!==null;)n.add(o[1]);const r=Array.from(n).map(d=>xt(d));await Promise.all(r)}function Ks(){if(typeof window<"u"&&window.wp?.data){const{subscribe:s}=window.wp.data;if(!s)return;let t=new Set;s(()=>{const n=window.wp?.data?.select;if(!n)return;const o=n("core/block-editor")?.getBlocks;if(!o)return;const r=o();if(!r)return;const d=new Set,f=p=>{p.forEach(h=>{d.add(h.name),h.innerBlocks?.length>0&&f(h.innerBlocks)})};f(r),d.forEach(p=>{!t.has(p)&&ht[p]&&xt(p)}),t=d})}}function Qs(s={}){const{enableMonitoring:t=!0,warnThreshold:n={blockCount:100,renderTime:100,memoryUsage:50*1024*1024,fps:30},onPerformanceIssue:o}=s,[r,d]=l.useState({blockCount:0,renderTime:0,memoryUsage:0,fps:60,lagSpikes:0}),f=l.useRef(0),p=l.useRef(performance.now()),h=l.useRef([]),x=l.useRef(void 0),v=l.useCallback(()=>{const u=performance.now(),j=u-p.current;if(j>0){const N=1e3/j;h.current.push(N),h.current.length>60&&h.current.shift();const C=h.current.reduce((P,I)=>P+I,0)/h.current.length;j>33&&d(P=>({...P,lagSpikes:P.lagSpikes+1})),d(P=>({...P,fps:Math.round(C)}))}p.current=u,f.current++,t&&(x.current=requestAnimationFrame(v))},[t]),b=l.useCallback(async()=>{if("memory"in performance&&performance.memory){const u=performance.memory;d(j=>({...j,memoryUsage:u.usedJSHeapSize}))}},[]),c=l.useCallback(()=>{if(typeof window<"u"&&window.wp?.data){const{getBlocks:u}=window.wp.data.select("core/block-editor"),j=u();if(j){let N=0;const C=P=>{P.forEach(I=>{N++,I.innerBlocks?.length>0&&C(I.innerBlocks)})};C(j),d(P=>({...P,blockCount:N}))}}},[]),m=l.useCallback(u=>{const j=performance.now();u(),requestAnimationFrame(()=>{const N=performance.now()-j;d(C=>({...C,renderTime:N}))})},[]);return l.useEffect(()=>{if(!t)return;const u=[];n.blockCount&&r.blockCount>n.blockCount&&u.push(`High block count: ${r.blockCount}`),n.renderTime&&r.renderTime>n.renderTime&&u.push(`Slow render: ${r.renderTime.toFixed(2)}ms`),n.memoryUsage&&r.memoryUsage>n.memoryUsage&&u.push(`High memory usage: ${(r.memoryUsage/1024/1024).toFixed(2)}MB`),n.fps&&r.fps<n.fps&&u.push(`Low FPS: ${r.fps}`),u.length>0&&o&&o(r)},[r,n,o,t]),l.useEffect(()=>{if(!t)return;v();const u=setInterval(()=>{b(),c()},1e3);return()=>{x.current&&cancelAnimationFrame(x.current),clearInterval(u)}},[t,v,b,c]),{metrics:r,measureRenderTime:m,resetMetrics:()=>{d({blockCount:0,renderTime:0,memoryUsage:0,fps:60,lagSpikes:0}),h.current=[]}}}const Ys=({showSidebar:s=!0})=>e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"flex-1 p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded",children:[e.jsx(F,{className:"h-8 w-8"}),e.jsx(F,{className:"h-8 w-8"}),e.jsx(F,{className:"h-8 w-8"}),e.jsx("div",{className:"flex-1"}),e.jsx(F,{className:"h-8 w-24"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(F,{className:"h-12 w-2/3"}),e.jsx(F,{className:"h-4 w-full"}),e.jsx(F,{className:"h-4 w-full"}),e.jsx(F,{className:"h-4 w-3/4"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[e.jsx(F,{className:"h-32"}),e.jsx(F,{className:"h-32"})]})]})]}),s&&e.jsxs("div",{className:"w-80 border-l p-4 space-y-4",children:[e.jsx(F,{className:"h-8 w-full"}),e.jsx(F,{className:"h-12 w-full"}),e.jsx(F,{className:"h-12 w-full"}),e.jsx(F,{className:"h-12 w-full"})]})]}),Xs=({isSaving:s,lastSavedAt:t,hasError:n})=>{if(s)return e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Lt,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"Saving..."})]});if(n)return e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[e.jsx(Ze,{className:"h-3 w-3"}),e.jsx("span",{children:"Save failed"})]});if(t){const o=Zs(t);return e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx(Mt,{className:"h-3 w-3"}),e.jsxs("span",{children:["Saved ",o]})]})}return null};function Zs(s){const t=Math.floor((new Date().getTime()-s.getTime())/1e3);return t<60?"just now":t<3600?`${Math.floor(t/60)}m ago`:t<86400?`${Math.floor(t/3600)}h ago`:`${Math.floor(t/86400)}d ago`}const ia=({initialContent:s="",onChange:t,settings:n={},showReusableBlocks:o=!0})=>{const[r,d]=l.useState([]),[f]=l.useState([]),[p,h]=l.useState(!1),[x,v]=l.useState(!1),[b,c]=l.useState(!1),[m,u]=l.useState(!0),[j,N]=l.useState(!1),C=l.useRef(null),{insertReusableBlock:P,loading:I}=dt(),{insertBlockPattern:$,loading:y}=qs(),{metrics:T,measureRenderTime:g}=Qs({onPerformanceIssue:M=>{M.blockCount>100}}),{isSaving:k,lastSavedAt:z,backupExists:V,updateContent:a,restoreFromBackup:S}=Cs(r,{onSave:async M=>{t&&t(Le(M),M)},saveInterval:3e4,debounceDelay:1e3}),i={alignWide:!0,availableTemplates:[],allowedBlockTypes:!0,disableCustomColors:!1,disableCustomFontSizes:!1,disableCustomGradients:!1,enableCustomSpacing:!0,isRTL:!1,mediaUpload:M=>{},__experimentalBlockPatterns:[],__experimentalSetIsInserterOpened:()=>{},...n};l.useEffect(()=>{Os().then(()=>{N(!0)})},[]),l.useEffect(()=>{if(!j)return;(async()=>{u(!0);try{if(Gs(),Ks(),s&&await Js(s),V&&!s&&window.confirm("Found unsaved changes. Would you like to restore them?")){const Q=await S();if(Q){d(Q),u(!1);return}}}catch{}finally{u(!1)}})()},[j]),l.useEffect(()=>{if(s)try{const M=Ht(s);if(M.length>0)d(M);else{const O=ve("core/paragraph",{content:s});d([O])}}catch{const O=ve("core/paragraph");d([O])}else{const M=ve("core/paragraph");d([M])}},[s]);const w=M=>{g(()=>{if(d(M),a(M),t)try{const O=Le(M);t(O,M)}catch{}})},L=async M=>{try{const O=await P(M.id);if(O&&O.length>0){const Q=[...r,...O];w(Q),h(!1)}}catch{}},_=async M=>{try{const O=await $(M.id);if(O&&O.length>0){const Q=[...r,...O];w(Q),c(!1)}}catch{}},A=()=>{f.length>0&&v(!0)},fe=()=>{};return!j||m?e.jsx(Ys,{showSidebar:!0}):e.jsxs("div",{className:"wordpress-block-editor",ref:C,children:[T.blockCount>100&&e.jsxs(Se,{className:"mb-4",children:[e.jsx(Ze,{className:"h-4 w-4"}),e.jsxs(Te,{children:["High block count (",T.blockCount," blocks) may affect performance. Consider splitting content into multiple pages."]})]}),V&&e.jsx(Se,{className:"mb-4",children:e.jsxs(Te,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Found unsaved changes from your last session."}),e.jsxs(E,{size:"sm",variant:"outline",onClick:S,children:[e.jsx(At,{className:"h-4 w-4 mr-2"}),"Restore"]})]})}),e.jsx(qt,{children:e.jsxs(Wt,{value:r,onInput:w,onChange:w,settings:i,useSubRegistry:!1,children:[e.jsx("div",{className:"block-editor-toolbar",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Gt,{}),e.jsx(Xs,{isSaving:k,lastSavedAt:z,hasError:!1})]}),o&&e.jsxs("div",{className:"flex items-center gap-2",children:[f.length>0&&e.jsxs(E,{size:"sm",variant:"outline",onClick:A,disabled:I,children:[e.jsx(_t,{className:"h-4 w-4 mr-2"}),"Save as Reusable"]}),e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>h(!0),children:[e.jsx(zt,{className:"h-4 w-4 mr-2"}),"Reusable Blocks"]}),e.jsxs(E,{size:"sm",variant:"outline",onClick:()=>c(!0),disabled:y,children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Block Patterns"]})]})]})}),e.jsx("div",{className:"block-editor-content",children:e.jsx(Jt,{children:e.jsx(Kt,{children:e.jsx(Qt,{className:"block-editor-block-list"})})})}),e.jsx("div",{className:"block-editor-inspector",children:e.jsx(Yt,{})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Reusable Blocks"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>h(!1),children:"×"})]}),e.jsx("div",{className:"p-4 overflow-auto max-h-[calc(90vh-120px)]",children:e.jsx(Us,{onInsertBlock:L,compact:!1})})]})}),e.jsx($s,{isOpen:x,onClose:()=>v(!1),selectedBlocks:f,onSaved:fe}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Block Patterns"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>c(!1),children:"×"})]}),e.jsx("div",{className:"p-4 overflow-auto max-h-[calc(90vh-120px)]",children:e.jsx(Vs,{onInsertPattern:_,compact:!1})})]})}),e.jsx("style",{children:`
        .wordpress-block-editor {
          display: flex;
          flex-direction: column;
          height: 100%;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;
        }

        .block-editor-toolbar {
          background: #fff;
          border-bottom: 1px solid #e0e0e0;
          padding: 8px 16px;
          position: sticky;
          top: 0;
          z-index: 20;
        }

        .block-editor-content {
          flex: 1;
          overflow: auto;
          padding: 16px;
          background: #fff;
        }

        .block-editor-inspector {
          width: 280px;
          background: #f8f9fa;
          border-left: 1px solid #e0e0e0;
          overflow: auto;
        }

        /* WordPress Block Editor Styles */
        :global(.block-editor-block-list__layout) {
          max-width: 840px;
          margin: 0 auto;
        }

        :global(.block-editor-block-list__block) {
          margin: 28px 0;
        }

        :global(.block-editor-block-list__block.is-selected) {
          outline: 1px solid #007cba;
          outline-offset: -1px;
        }

        :global(.block-editor-block-list__block.is-hovered) {
          outline: 1px solid #007cba;
          outline-offset: -1px;
          outline-style: dashed;
        }

        /* Block Toolbar Styles */
        :global(.block-editor-block-toolbar) {
          background: #fff;
          border: 1px solid #e0e0e0;
          border-radius: 4px;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        /* Popover Styles */
        :global(.components-popover) {
          z-index: 1000000;
        }

        :global(.components-popover__content) {
          background: #fff;
          border: 1px solid #e0e0e0;
          border-radius: 4px;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        /* Inspector Styles */
        :global(.block-editor-block-inspector) {
          padding: 16px;
        }

        :global(.block-editor-block-inspector .components-panel) {
          border: none;
          margin-bottom: 16px;
        }

        :global(.block-editor-block-inspector .components-panel__header) {
          background: #f8f9fa;
          border-bottom: 1px solid #e0e0e0;
          padding: 8px 16px;
          font-weight: 600;
        }

        :global(.block-editor-block-inspector .components-panel__body) {
          padding: 16px;
        }
      `})]})};export{es as A,E as B,J as C,ye as D,ct as E,lt as F,la as G,na as H,U as I,Se as J,Te as K,R as L,ms as M,Fs as N,ut as O,_s as P,us as Q,Us as R,Fe as S,ge as T,Os as U,ia as W,X as _,Ee as a,Re as b,B as c,Z as d,ne as e,ke as f,Ue as g,Ce as h,W as i,Ae as j,ls as k,is as l,ds as m,de as n,ue as o,fs as p,ps as q,q as r,H as s,cs as t,oa as u,Cs as v,tt as w,nt as x,ot as y,it as z};
