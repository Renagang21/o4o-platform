import{u as e,b as t,r as s,V as n,j as a,c8 as r,bO as o,bf as i,S as l,bg as p,bE as c,bL as d,e6 as m,bx as h,a as x,C as g,bd as j,dI as u,c$ as b,dF as f}from"./vendor-react-BQ6HOJoh.js";import{B as w}from"./page-template-editor-C7FodHrK.js";import"./wp-block-editor-a11y-DrduSWFW.js";import"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-api-Buev8_QU.js";import"./wp-block-editor-utils-M5qXzE1L.js";import"./wp-block-editor-colors-D38h-Odz.js";import"./wp-blocks-core-6vwQKPfS.js";import"./wp-block-editor-clipboard-Dg0Y1gQ6.js";import"./wp-misc-DS9m4_P2.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-LYSOqK5P.js";import"./vendor-utils-D-spY-QM.js";import"./wp-core-Y-jV-nrZ.js";import"./wp-block-editor-keyboard-CeHTtvP5.js";import"./wp-data-BmtL8k4r.js";import"./wp-block-editor-store-B-g1aSix.js";import"./wp-block-editor-dnd-BYoS8-II.js";import"./wp-block-editor-library-BpQvynjE.js";import"./wp-block-editor-menus-BTQ2wZ-f.js";import"./wp-block-editor-typography-Bl_1REQP.js";import"./wp-block-editor-spacing-BD_2CpN7.js";import"./wp-block-editor-core-DL280tSA.js";import"./wp-block-editor-selection-CC4tJpUu.js";import"./wp-block-editor-formats-CLXkimOp.js";import"./wp-block-editor-inline-CpXpUhQU.js";import"./wp-block-editor-ui-B8YE_4QL.js";import"./wp-block-editor-transforms-jLcKa8Hv.js";import"./wp-block-editor-preview-iw2Xu1ib.js";import"./wp-block-editor-global-styles-CV5-K6QF.js";import"./wp-block-editor-borders-BH1devca.js";import"./wp-block-editor-patterns-BXdHo9lm.js";import"./wp-block-editor-navigation-BFSoKzg0.js";import"./wp-block-editor-media-Bg-JiQDT.js";import"./wp-api-BeoadipR.js";import"./wp-i18n-DGPtqsXY.js";import"./vendor-monaco-BxJH8uUv.js";import"./wp-block-editor-upload-BLw1R9wP.js";import"./wp-block-editor-templates-o1_wAMb9.js";import"./wp-components-CeQNCpMW.js";const y=()=>{const y=e(),{id:v}=t(),[k,N]=s.useState([]),[S,T]=s.useState(null),[_,C]=s.useState(new Set),[F,L]=s.useState(""),[E,z]=s.useState(!1),[O,M]=s.useState(!0),[P,D]=s.useState(!1),[q,B]=s.useState(""),[U,H]=s.useState("vs-dark"),R=s.useRef(null);s.useEffect(()=>{A()},[v]),s.useEffect(()=>{const e=e=>{P&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[P]);const A=async()=>{try{M(!0),N(G())}catch(e){n.error("Failed to load theme files")}finally{M(!1)}},G=()=>[{name:"styles",path:"/styles",type:"directory",children:[{name:"main.css",path:"/styles/main.css",type:"file",language:"css",content:"/* Main Theme Styles */\n:root {\n  --primary-color: #3b82f6;\n  --secondary-color: #8b5cf6;\n  --text-color: #1a1a1a;\n  --bg-color: #ffffff;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;\n  color: var(--text-color);\n  background-color: var(--bg-color);\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 15px;\n}\n\n/* Header Styles */\n.header {\n  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));\n  padding: 20px 0;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}"},{name:"responsive.css",path:"/styles/responsive.css",type:"file",language:"css",content:"/* Responsive Styles */\n@media (max-width: 768px) {\n  .container {\n    padding: 0 10px;\n  }\n  \n  .header {\n    padding: 15px 0;\n  }\n}"}]},{name:"templates",path:"/templates",type:"directory",children:[{name:"header.php",path:"/templates/header.php",type:"file",language:"php",content:'<?php\n/**\n * Theme Header Template\n */\n?>\n<!DOCTYPE html>\n<html <?php language_attributes(); ?>>\n<head>\n  <meta charset="<?php bloginfo(\'charset\'); ?>">\n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <?php wp_head(); ?>\n</head>\n<body <?php body_class(); ?>>\n  <header class="header">\n    <div class="container">\n      <h1><?php bloginfo(\'name\'); ?></h1>\n      <nav><?php wp_nav_menu([\'theme_location\' => \'primary\']); ?></nav>\n    </div>\n  </header>'},{name:"footer.php",path:"/templates/footer.php",type:"file",language:"php",content:"<?php\n/**\n * Theme Footer Template\n */\n?>\n  <footer class=\"footer\">\n    <div class=\"container\">\n      <p>&copy; <?php echo date('Y'); ?> <?php bloginfo('name'); ?></p>\n    </div>\n  </footer>\n  <?php wp_footer(); ?>\n</body>\n</html>"},{name:"index.php",path:"/templates/index.php",type:"file",language:"php",content:'<?php\n/**\n * Main Template File\n */\nget_header();\n?>\n\n<main class="main">\n  <div class="container">\n    <?php if (have_posts()) : ?>\n      <?php while (have_posts()) : the_post(); ?>\n        <article>\n          <h2><?php the_title(); ?></h2>\n          <?php the_content(); ?>\n        </article>\n      <?php endwhile; ?>\n    <?php endif; ?>\n  </div>\n</main>\n\n<?php get_footer(); ?>'}]},{name:"scripts",path:"/scripts",type:"directory",children:[{name:"main.js",path:"/scripts/main.js",type:"file",language:"javascript",content:"// Main Theme Scripts\ndocument.addEventListener('DOMContentLoaded', function() {\n  // console.log('Theme initialized');\n  \n  // Mobile menu toggle\n  const menuToggle = document.querySelector('.menu-toggle');\n  const navigation = document.querySelector('.navigation');\n  \n  if (menuToggle) {\n    menuToggle.addEventListener('click', function() {\n      navigation.classList.toggle('active');\n    });\n  }\n});"}]},{name:"theme.json",path:"/theme.json",type:"file",language:"json",content:'{\n  "name": "Custom Theme",\n  "version": "1.0.0",\n  "description": "A custom WordPress-style theme",\n  "author": "O4O Platform",\n  "license": "GPL v2",\n  "textDomain": "custom-theme",\n  "supportedFeatures": [\n    "responsive",\n    "customizer",\n    "widgets",\n    "menus",\n    "post-thumbnails"\n  ]\n}'}],I=e=>{var t;"directory"===e.type?(t=e.path,C(e=>{const s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s})):(T({path:e.path,content:e.content||"",language:e.language||"text"}),B(e.content||""))},V=e=>{if("directory"===e.type)return _.has(e.path)?a.jsx(u,{className:"w-4 h-4 text-yellow-600"}):a.jsx(b,{className:"w-4 h-4 text-yellow-600"});let t="text-gray-500";switch(e.name.split(".").pop()){case"css":case"scss":t="text-blue-500";break;case"js":case"jsx":case"ts":case"tsx":t="text-yellow-500";break;case"php":t="text-purple-500";break;case"html":t="text-orange-500";break;case"json":t="text-green-500"}return a.jsx(f,{className:`w-4 h-4 ${t}`})},Y=(e,t=0)=>e.map(e=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 hover:bg-gray-100 cursor-pointer "+(S?.path===e.path?"bg-blue-50":""),style:{paddingLeft:20*t+8+"px"},onClick:()=>I(e),children:["directory"===e.type&&(_.has(e.path)?a.jsx(g,{className:"w-3 h-3"}):a.jsx(j,{className:"w-3 h-3"})),V(e),a.jsx("span",{className:"text-sm",children:e.name})]}),"directory"===e.type&&_.has(e.path)&&e.children&&Y(e.children,t+1)]},e.path));return O?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900"})}):a.jsxs("div",{className:"h-screen flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-white",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-bold",children:"테마 에디터"}),P&&a.jsxs("span",{className:"text-sm text-orange-500 flex items-center gap-1",children:[a.jsx(r,{className:"w-4 h-4"}),"변경사항이 있습니다"]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(w,{variant:"outline",size:"sm",onClick:()=>H("vs-dark"===U?"light":"vs-dark"),children:a.jsx(o,{className:"w-4 h-4"})}),a.jsxs(w,{variant:"outline",size:"sm",onClick:()=>y("/themes"),children:[a.jsx(i,{className:"w-4 h-4 mr-1"}),"닫기"]}),a.jsx(w,{size:"sm",onClick:async()=>{if(S)try{z(!0),await new Promise(e=>setTimeout(e,1e3)),n.success("파일이 저장되었습니다"),D(!1)}catch(e){n.error("파일 저장에 실패했습니다")}finally{z(!1)}},disabled:!P||E,children:E?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"저장 중..."]}):a.jsxs(a.Fragment,{children:[a.jsx(l,{className:"w-4 h-4 mr-1"}),"저장"]})})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-64 border-r bg-gray-50 overflow-y-auto",children:[a.jsx("div",{className:"p-2 border-b bg-white",children:a.jsxs("div",{className:"relative",children:[a.jsx(p,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"파일 검색...",value:F,onChange:e=>L(e.target.value),className:"w-full pl-8 pr-2 py-1 text-sm border rounded"})]})}),a.jsx("div",{className:"p-2",children:Y(k)})]}),a.jsx("div",{className:"flex-1 flex flex-col",children:S?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"px-4 py-2 border-b bg-white flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(c,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium",children:S.path})]}),a.jsx("div",{className:"flex gap-2",children:a.jsx(w,{variant:"ghost",size:"sm",onClick:()=>{navigator.clipboard.writeText(q),n.success("코드가 클립보드에 복사되었습니다")},children:a.jsx(d,{className:"w-4 h-4"})})})]}),a.jsx("div",{className:"flex-1",children:a.jsx(m,{value:q,language:S.language,theme:U,onChange:e=>{B(e||""),D(!0)},onMount:e=>{R.current=e},options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",roundedSelection:!1,scrollBeyondLastLine:!1,automaticLayout:!0,formatOnPaste:!0,formatOnType:!0}})})]}):a.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(h,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),a.jsx("p",{children:"파일을 선택하세요"})]})})})]}),a.jsxs("div",{className:"px-4 py-1 border-t bg-gray-100 text-xs text-gray-600 flex justify-between",children:[a.jsx("div",{className:"flex items-center gap-4",children:S&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:S.language.toUpperCase()}),a.jsx("span",{children:"UTF-8"}),a.jsxs("span",{children:["줄 ",q.split("\n").length]})]})}),a.jsx("div",{className:"flex items-center gap-2",children:P?a.jsxs("span",{className:"flex items-center gap-1 text-orange-500",children:[a.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"수정됨"]}):a.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[a.jsx(x,{className:"w-3 h-3"}),"저장됨"]})})]})]})};export{y as default};
