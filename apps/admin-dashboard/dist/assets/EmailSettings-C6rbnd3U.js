import{r as o,j as e,bv as M,aX as O,E as I,au as C,bN as L}from"./vendor-react-P__8vGRG.js";import{u as n}from"./unified-client-DYKT-pLO.js";import{s as c}from"./index-C0gS3Jf3.js";class D{async getGeneralSettings(){return(await n.raw.get(c.settings.general)).data}async updateGeneralSettings(s){return(await n.raw.put(c.settings.general,s)).data}async getAppearanceSettings(){return(await n.raw.get(c.settings.appearance)).data}async updateAppearanceSettings(s){return(await n.raw.put(c.settings.appearance,s)).data}async uploadLogo(s){const t=new FormData;return t.append("file",s),t.append("type","logo"),(await n.raw.post(`${c.settings.appearance}/upload`,t,{headers:{"Content-Type":"multipart/form-data"}})).data}async getEmailSettings(){return(await n.raw.get(c.settings.email)).data}async updateEmailSettings(s){return(await n.raw.put(c.settings.email,s)).data}async testEmailSettings(s){return(await n.raw.post(`${c.settings.email}/test`,{testEmail:s})).data}async getIntegrationSettings(){return(await n.raw.get(c.settings.integrations)).data}async updateIntegrationSettings(s){return(await n.raw.put(c.settings.integrations,s)).data}async testIntegration(s){return(await n.raw.post(`${c.settings.integrations}/test/${s}`)).data}async getSecuritySettings(){return(await n.platform.settings.get()).data}async updateSecuritySettings(s){return(await n.platform.settings.update(s)).data}async getAllSettings(){const[s,t,i,d,m]=await Promise.all([this.getGeneralSettings(),this.getAppearanceSettings(),this.getEmailSettings(),this.getIntegrationSettings(),this.getSecuritySettings()]);return{general:s,appearance:t,email:i,integrations:d,security:m}}async exportSettings(){return(await n.raw.get("/v1/settings/export",{responseType:"blob"})).data}async importSettings(s){const t=new FormData;return t.append("file",s),(await n.raw.post("/v1/settings/import",t,{headers:{"Content-Type":"multipart/form-data"}})).data}async resetSettings(s){const t=s?`/v1/settings/${s}/reset`:"/v1/settings/reset";await n.raw.post(t)}async clearCache(s){await n.raw.post("/v1/settings/cache/clear",{type:s||"all"})}}const g=new D,_=1,G=1e6;let w=0;function R(){return w=(w+1)%Number.MAX_SAFE_INTEGER,w.toString()}const N=new Map,f=a=>{if(N.has(a))return;const s=setTimeout(()=>{N.delete(a),h({type:"REMOVE_TOAST",toastId:a})},G);N.set(a,s)},U=(a,s)=>{switch(s.type){case"ADD_TOAST":return{...a,toasts:[s.toast,...a.toasts].slice(0,_)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(t=>t.id===s.toast.id?{...t,...s.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=s;return t?f(t):a.toasts.forEach(i=>{f(i.id)}),{...a,toasts:a.toasts.map(i=>i.id===t||t===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return s.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(t=>t.id!==s.toastId)}}},u=[];let j={toasts:[]};function h(a){j=U(j,a),u.forEach(s=>{s(j)})}function $({...a}){const s=R(),t=d=>h({type:"UPDATE_TOAST",toast:{...d,id:s}}),i=()=>h({type:"DISMISS_TOAST",toastId:s});return h({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:d=>{d||i()}}}),{id:s,dismiss:i,update:t}}function q(){const[a,s]=o.useState(j);return o.useEffect(()=>(u.push(s),()=>{const t=u.indexOf(s);t>-1&&u.splice(t,1)}),[a]),{...a,toast:$,dismiss:t=>h({type:"DISMISS_TOAST",toastId:t})}}const V=()=>{const{toast:a}=q(),[s,t]=o.useState(!1),[i,d]=o.useState(!1),[m,b]=o.useState(!1),[x,y]=o.useState(""),[l,S]=o.useState({provider:"smtp",smtpHost:"",smtpPort:587,smtpUser:"",smtpSecure:!1,fromEmail:"",fromName:""});o.useEffect(()=>{T()},[]);const T=async()=>{try{t(!0);const r=await g.getEmailSettings();S(r),r.fromEmail&&y(r.fromEmail)}catch{}finally{t(!1)}},E=async r=>{if(r.preventDefault(),!l.smtpHost||!l.smtpPort||!l.smtpUser||!l.fromEmail){a({title:"오류",description:"모든 필수 항목을 입력해주세요.",variant:"destructive"});return}try{t(!0),await g.updateEmailSettings(l),a({title:"성공",description:"SMTP 설정이 저장되었습니다."})}catch{a({title:"오류",description:"SMTP 설정 저장에 실패했습니다.",variant:"destructive"})}finally{t(!1)}},P=async()=>{if(!x){a({title:"오류",description:"테스트 이메일 주소를 입력해주세요.",variant:"destructive"});return}try{d(!0);const r=await g.testEmailSettings(x);r.success?a({title:"성공",description:`테스트 이메일이 ${x}로 발송되었습니다.`}):a({title:"실패",description:r.message||"테스트 이메일 발송에 실패했습니다.",variant:"destructive"})}catch(r){a({title:"오류",description:r.response?.data?.message||"테스트 이메일 발송 중 오류가 발생했습니다.",variant:"destructive"})}finally{d(!1)}},p=(r,v)=>{S(A=>({...A,[r]:v}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"wp-card",children:e.jsx("div",{className:"wp-card-body",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-wp-text-primary",children:"이메일 설정"}),e.jsx("p",{className:"text-sm text-wp-text-secondary mt-1",children:"WordPress에서 이메일을 발송하기 위한 SMTP 설정을 구성합니다."})]})]})})}),e.jsxs("form",{onSubmit:E,className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsx("h3",{className:"wp-card-title",children:"SMTP 서버 설정"})}),e.jsxs("div",{className:"wp-card-body space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"wp-label",children:["SMTP 호스트 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.smtpHost||"",onChange:r=>p("smtpHost",r.target.value),className:"wp-input",placeholder:"예: smtp.gmail.com",required:!0}),e.jsx("p",{className:"mt-1 text-sm text-wp-text-secondary",children:"이메일 서비스 제공자의 SMTP 서버 주소"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"wp-label",children:["SMTP 포트 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:l.smtpPort||587,onChange:r=>p("smtpPort",parseInt(r.target.value)),className:"wp-input",placeholder:"587",required:!0}),e.jsx("p",{className:"mt-1 text-sm text-wp-text-secondary",children:"일반적으로 587 (TLS) 또는 465 (SSL)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"wp-label",children:"암호화"}),e.jsxs("select",{value:l.smtpSecure?"ssl":"tls",onChange:r=>p("smtpSecure",r.target.value==="ssl"),className:"wp-input",children:[e.jsx("option",{value:"tls",children:"TLS (권장)"}),e.jsx("option",{value:"ssl",children:"SSL"})]}),e.jsx("p",{className:"mt-1 text-sm text-wp-text-secondary",children:"포트 587은 TLS, 포트 465는 SSL 사용"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"wp-label",children:["SMTP 사용자명 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:l.smtpUser||"",onChange:r=>p("smtpUser",r.target.value),className:"wp-input",placeholder:"예: your-email@gmail.com",required:!0}),e.jsx("p",{className:"mt-1 text-sm text-wp-text-secondary",children:"일반적으로 이메일 주소와 동일"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"wp-label",children:["SMTP 비밀번호 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:m?"text":"password",value:l.smtpPass||"",onChange:r=>p("smtpPass",r.target.value),className:"wp-input pr-10",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!m),className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 text-wp-text-secondary hover:text-wp-text-primary",children:m?e.jsx(O,{className:"w-5 h-5"}):e.jsx(I,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"mt-1 text-sm text-wp-text-secondary",children:"Gmail의 경우 앱 비밀번호를 사용하세요"})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h4",{className:"font-medium text-wp-text-primary mb-4",children:"발신자 정보"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"wp-label",children:["발신자 이메일 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:l.fromEmail||"",onChange:r=>p("fromEmail",r.target.value),className:"wp-input",placeholder:"예: noreply@yourdomain.com",required:!0}),e.jsx("p",{className:"mt-1 text-sm text-wp-text-secondary",children:"받는 사람에게 표시될 발신자 이메일 주소"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"wp-label",children:"발신자 이름"}),e.jsx("input",{type:"text",value:l.fromName||"",onChange:r=>p("fromName",r.target.value),className:"wp-input",placeholder:"예: WordPress Site"}),e.jsx("p",{className:"mt-1 text-sm text-wp-text-secondary",children:"받는 사람에게 표시될 발신자 이름 (선택사항)"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:s,className:"wp-button-primary",children:s?"저장 중...":"설정 저장"})})]})]}),e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsx("h3",{className:"wp-card-title",children:"테스트 이메일 발송"})}),e.jsxs("div",{className:"wp-card-body",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium",children:"테스트 전 확인사항:"}),e.jsxs("ul",{className:"mt-1 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"SMTP 설정을 먼저 저장해주세요"}),e.jsx("li",{children:"Gmail 사용 시 앱 비밀번호를 생성하여 사용하세요"}),e.jsx("li",{children:"방화벽이 SMTP 포트를 차단하지 않는지 확인하세요"})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"email",value:x,onChange:r=>y(r.target.value),className:"wp-input flex-1",placeholder:"테스트 이메일을 받을 주소 입력",disabled:i}),e.jsx("button",{type:"button",onClick:P,disabled:i||!x,className:"wp-button-primary flex items-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"발송 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4"}),"테스트 발송"]})})]}),e.jsx("p",{className:"mt-2 text-sm text-wp-text-secondary",children:"설정이 올바른지 확인하기 위해 테스트 이메일을 발송합니다."})]})]}),e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsx("h3",{className:"wp-card-title",children:"주요 이메일 서비스 SMTP 설정"})}),e.jsx("div",{className:"wp-card-body",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Gmail"}),e.jsxs("dl",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"호스트:"}),e.jsx("dd",{children:"smtp.gmail.com"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"포트:"}),e.jsx("dd",{children:"587 (TLS) / 465 (SSL)"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"비밀번호:"}),e.jsx("dd",{children:"앱 비밀번호 사용 필요"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Naver"}),e.jsxs("dl",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"호스트:"}),e.jsx("dd",{children:"smtp.naver.com"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"포트:"}),e.jsx("dd",{children:"587 (TLS)"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"사용자명:"}),e.jsx("dd",{children:"네이버 아이디"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Outlook/Office 365"}),e.jsxs("dl",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"호스트:"}),e.jsx("dd",{children:"smtp.office365.com"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"포트:"}),e.jsx("dd",{children:"587 (TLS)"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"사용자명:"}),e.jsx("dd",{children:"전체 이메일 주소"})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"SendGrid"}),e.jsxs("dl",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"호스트:"}),e.jsx("dd",{children:"smtp.sendgrid.net"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"포트:"}),e.jsx("dd",{children:"587 (TLS) / 465 (SSL)"})]}),e.jsxs("div",{className:"flex",children:[e.jsx("dt",{className:"text-wp-text-secondary w-20",children:"사용자명:"}),e.jsx("dd",{children:"apikey"})]})]})]})]})})})]})]})};export{V as E,q as u};
//# sourceMappingURL=EmailSettings-C6rbnd3U.js.map
