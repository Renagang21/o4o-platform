import{a3 as o,a4 as e,r,V as s,j as m,a5 as a,a1 as i}from"./vendor-react-40ZmJ4HC.js";import{u as d,a as u,b as p}from"./vendor-query-DJJ0FlEA.js";import{j as t,B as l,C as n,k as c,l as f,m as h,L as b,I as N,S as v,f as x,g as F,h as g,i as j,T as P}from"./page-gutenberg-CxDN_6a_.js";import{S as E}from"./page-template-editor-D1qjPzcz.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-utils-EdRAegAf.js";import"./wp-all-BeSh6B1c.js";const V=()=>{const V=o(),{id:D}=e(),y=d(),k=!!D,[w,C]=r.useState({title:"",content:"",categoryId:"",status:"published",isPinned:!1,isLocked:!1}),{data:q}=u({queryKey:["forum-categories"],queryFn:async()=>(await t.api.get("/forum/categories")).data}),L=q?.data||[],{data:I,isLoading:S}=u({queryKey:["forum-post",D],queryFn:async()=>(await t.api.get(`/forum/posts/${D}`)).data.data,enabled:k}),K=p({mutationFn:async o=>(await t.api.post("/forum/posts",o)).data,onSuccess:()=>{s.success("게시글이 작성되었습니다"),y.invalidateQueries({queryKey:["forum-posts"]}),V("/forum")},onError:()=>{s.error("게시글 작성에 실패했습니다")}}),Q=p({mutationFn:async o=>(await t.api.put(`/forum/posts/${D}`,o)).data,onSuccess:()=>{s.success("게시글이 수정되었습니다"),y.invalidateQueries({queryKey:["forum-posts"]}),y.invalidateQueries({queryKey:["forum-post",D]}),V("/forum")},onError:()=>{s.error("게시글 수정에 실패했습니다")}});r.useEffect(()=>{I&&C({title:I.title,content:I.content,categoryId:I.category.id,status:I.status,isPinned:I.isPinned,isLocked:I.isLocked})},[I]);const $=(o,e)=>{C(r=>({...r,[o]:e}))};return k&&S?m.jsxDEV("div",{className:"flex items-center justify-center h-96",children:m.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-modern-primary"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:144,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:143,columnNumber:7},void 0):m.jsxDEV("div",{className:"max-w-4xl mx-auto",children:[m.jsxDEV("div",{className:"flex items-center gap-4 mb-6",children:[m.jsxDEV(l,{variant:"ghost",size:"sm",onClick:()=>V("/forum"),children:[m.jsxDEV(a,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:157,columnNumber:11},void 0),"게시판 목록"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:152,columnNumber:9},void 0),m.jsxDEV("h1",{className:"text-2xl font-bold text-modern-text-primary",children:k?"게시글 수정":"새 게시글 작성"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:160,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:151,columnNumber:7},void 0),m.jsxDEV("form",{onSubmit:o=>{o.preventDefault(),w.title.trim()?w.content.trim()?w.categoryId?k?Q.mutate(w):K.mutate(w):s.error("카테고리를 선택하세요"):s.error("내용을 입력하세요"):s.error("제목을 입력하세요")},children:[m.jsxDEV("div",{className:"space-y-6",children:[m.jsxDEV(n,{children:[m.jsxDEV(c,{children:m.jsxDEV(f,{children:"게시글 정보"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:170,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:169,columnNumber:13},void 0),m.jsxDEV(h,{className:"space-y-4",children:[m.jsxDEV("div",{children:[m.jsxDEV(b,{htmlFor:"title",children:"제목 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:174,columnNumber:17},void 0),m.jsxDEV(N,{id:"title",value:w.title,onChange:o=>$("title",o.target.value),placeholder:"게시글 제목을 입력하세요",required:!0},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:175,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:173,columnNumber:15},void 0),m.jsxDEV("div",{children:[m.jsxDEV(b,{htmlFor:"category",children:"카테고리 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:185,columnNumber:17},void 0),m.jsxDEV(v,{value:w.categoryId,onValueChange:o=>$("categoryId",o),children:[m.jsxDEV(x,{children:m.jsxDEV(F,{placeholder:"카테고리를 선택하세요"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:191,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:190,columnNumber:19},void 0),m.jsxDEV(g,{children:L.map(o=>m.jsxDEV(j,{value:o.id,children:o.name},o.id,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:195,columnNumber:23},void 0))},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:193,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:186,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:184,columnNumber:15},void 0),m.jsxDEV("div",{children:[m.jsxDEV(b,{htmlFor:"content",children:"내용 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:204,columnNumber:17},void 0),m.jsxDEV(P,{id:"content",value:w.content,onChange:o=>$("content",o.target.value),placeholder:"게시글 내용을 입력하세요...",rows:12,required:!0},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:205,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:203,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:172,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:168,columnNumber:11},void 0),m.jsxDEV(n,{children:[m.jsxDEV(c,{children:m.jsxDEV(f,{children:"게시 옵션"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:220,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:219,columnNumber:13},void 0),m.jsxDEV(h,{className:"space-y-4",children:[m.jsxDEV("div",{children:[m.jsxDEV(b,{htmlFor:"status",children:"상태"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:224,columnNumber:17},void 0),m.jsxDEV(v,{value:w.status,onValueChange:o=>$("status",o),children:[m.jsxDEV(x,{children:m.jsxDEV(F,{},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:230,columnNumber:21},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:229,columnNumber:19},void 0),m.jsxDEV(g,{children:[m.jsxDEV(j,{value:"published",children:"게시"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:233,columnNumber:21},void 0),m.jsxDEV(j,{value:"draft",children:"초안"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:234,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:232,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:225,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:223,columnNumber:15},void 0),m.jsxDEV("div",{className:"flex items-center justify-between",children:[m.jsxDEV("div",{children:[m.jsxDEV(b,{htmlFor:"isPinned",children:"상단 고정"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:241,columnNumber:19},void 0),m.jsxDEV("p",{className:"text-sm text-modern-text-secondary",children:"게시글을 목록 상단에 고정합니다"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:242,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:240,columnNumber:17},void 0),m.jsxDEV(E,{id:"isPinned",checked:w.isPinned,onCheckedChange:o=>$("isPinned",o)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:246,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:239,columnNumber:15},void 0),m.jsxDEV("div",{className:"flex items-center justify-between",children:[m.jsxDEV("div",{children:[m.jsxDEV(b,{htmlFor:"isLocked",children:"댓글 잠금"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:255,columnNumber:19},void 0),m.jsxDEV("p",{className:"text-sm text-modern-text-secondary",children:"새 댓글 작성을 차단합니다"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:256,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:254,columnNumber:17},void 0),m.jsxDEV(E,{id:"isLocked",checked:w.isLocked,onCheckedChange:o=>$("isLocked",o)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:260,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:253,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:222,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:218,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:166,columnNumber:9},void 0),m.jsxDEV("div",{className:"flex justify-end gap-3 mt-6",children:[m.jsxDEV(l,{type:"button",variant:"outline",onClick:()=>V("/forum"),children:"취소"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:272,columnNumber:11},void 0),m.jsxDEV(l,{type:"submit",disabled:K.isPending||Q.isPending,children:[m.jsxDEV(i,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:283,columnNumber:13},void 0),k?"수정하기":"작성하기"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:279,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:271,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:165,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/forum/ForumPostForm.tsx",lineNumber:150,columnNumber:5},void 0)};export{V as default};
//# sourceMappingURL=ForumPostForm-VPOT2Nk0.js.map
