import{r,j as e,a1 as P,E as R,ar as $,bk as M,ad as F,i as H,bv as V,bU as A,bV as O,Z as z,ay as q,au as U,c6 as X,c7 as v,a2 as Z}from"./vendor-react-P__8vGRG.js";import{u as G,E as J}from"./EmailSettings-C6rbnd3U.js";import{C as o,d as h,D as T,i as I,j as L,k as E,r as K,B as Q}from"./index-C0gS3Jf3.js";import{B as i,L as m,I as w,T as W,S as Y,d as ee,e as se,f as te,g as u}from"./page-template-editor-BTdVTS-a.js";import"./unified-client-DYKT-pLO.js";import"./vendor-utils-dq2XMRwt.js";import"./vendor-query-CucHvDcH.js";import"./vendor-socket-DgcwqWsT.js";import"./vendor-ui-BkLtITBR.js";const ae=()=>{const{toast:c}=G(),[x,d]=r.useState([]),[t,n]=r.useState(null),[b,a]=r.useState(!1),[S,g]=r.useState(!1),[p,C]=r.useState(null),y=[{id:1,name:"회원가입 환영",subject:"{{site_name}}에 오신 것을 환영합니다!",slug:"welcome",type:"system",category:"회원",htmlContent:"<h1>환영합니다, {{user_name}}님!</h1><p>{{site_name}}의 회원이 되신 것을 축하합니다.</p>",variables:["site_name","user_name","user_email"],enabled:!0,updatedAt:new Date().toISOString()},{id:2,name:"비밀번호 재설정",subject:"비밀번호 재설정 요청",slug:"password-reset",type:"system",category:"인증",htmlContent:'<p>비밀번호 재설정을 요청하셨습니다.</p><p><a href="{{reset_link}}">여기를 클릭</a>하여 비밀번호를 재설정하세요.</p>',variables:["user_name","reset_link","expire_time"],enabled:!0,updatedAt:new Date().toISOString()},{id:3,name:"주문 확인",subject:"주문이 확인되었습니다 - 주문번호: {{order_number}}",slug:"order-confirmation",type:"system",category:"주문",htmlContent:"<h2>주문이 확인되었습니다</h2><p>주문번호: {{order_number}}</p><p>총 금액: {{total_amount}}</p>",variables:["order_number","total_amount","order_items","shipping_address"],enabled:!0,updatedAt:new Date().toISOString()},{id:4,name:"배송 알림",subject:"상품이 배송되었습니다",slug:"shipping-notification",type:"system",category:"배송",htmlContent:"<p>주문하신 상품이 배송되었습니다.</p><p>운송장번호: {{tracking_number}}</p>",variables:["order_number","tracking_number","carrier","expected_delivery"],enabled:!0,updatedAt:new Date().toISOString()}];r.useEffect(()=>{k()},[]);const k=async()=>{d(y)},D=s=>{n(s),a(!0)},N=s=>{C(s),g(!0)},f=s=>{const l={...s,id:Date.now(),name:`${s.name} (복사본)`,slug:`${s.slug}-copy`,type:"custom"};d([...x,l]),c({title:"템플릿 복제됨",description:"템플릿이 성공적으로 복제되었습니다."})},_=s=>{d(x.map(l=>l.id===s?{...l,enabled:!l.enabled}:l))},j=()=>{t&&(d(x.map(s=>s.id===t.id?t:s)),c({title:"저장됨",description:"템플릿이 성공적으로 저장되었습니다."}),a(!1),n(null))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"이메일 템플릿"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"시스템에서 발송되는 이메일 템플릿을 관리합니다"})]}),e.jsxs(i,{onClick:()=>{n({id:Date.now(),name:"새 템플릿",subject:"",slug:"",type:"custom",category:"기타",htmlContent:"",variables:[],enabled:!0,updatedAt:new Date().toISOString()}),a(!0)},children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"새 템플릿"]})]}),e.jsx(o,{children:e.jsx(h,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"템플릿"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"카테고리"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"유형"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"수정일"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.subject})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:s.category})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.type==="system"?"bg-gray-100 text-gray-800":"bg-green-100 text-green-800"}`,children:s.type==="system"?"시스템":"사용자정의"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>_(s.id),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s.enabled?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.enabled?"translate-x-6":"translate-x-1"}`})})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(s.updatedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>N(s),children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>D(s),children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>f(s),children:e.jsx(M,{className:"h-4 w-4"})}),s.type==="custom"&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{d(x.filter(l=>l.id!==s.id)),c({title:"삭제됨",description:"템플릿이 삭제되었습니다."})},children:e.jsx(F,{className:"h-4 w-4 text-red-500"})})]})})]},s.id))})]})})})}),e.jsx(T,{open:b,onOpenChange:a,children:e.jsxs(I,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsx(L,{children:e.jsx(E,{children:t?.id?"템플릿 편집":"새 템플릿"})}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"템플릿 이름"}),e.jsx(w,{value:t.name,onChange:s=>n({...t,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"슬러그"}),e.jsx(w,{value:t.slug,onChange:s=>n({...t,slug:s.target.value}),placeholder:"welcome-email"})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"제목"}),e.jsx(w,{value:t.subject,onChange:s=>n({...t,subject:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(m,{children:"HTML 내용"}),e.jsx(W,{rows:10,value:t.htmlContent,onChange:s=>n({...t,htmlContent:s.target.value}),className:"font-mono text-sm"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"사용 가능한 변수"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.variables.map(s=>e.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-sm font-mono",children:`{{${s}}}`},s))})]})]}),e.jsxs(K,{children:[e.jsx(i,{variant:"outline",onClick:()=>a(!1),children:"취소"}),e.jsx(i,{onClick:j,children:"저장"})]})]})}),e.jsx(T,{open:S,onOpenChange:g,children:e.jsxs(I,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(L,{children:e.jsx(E,{children:"템플릿 미리보기"})}),p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"제목"}),e.jsx("div",{className:"p-2 bg-gray-50 rounded",children:p.subject})]}),e.jsxs("div",{children:[e.jsx(m,{children:"내용"}),e.jsx("div",{className:"p-4 bg-white border rounded",dangerouslySetInnerHTML:{__html:p.htmlContent}})]})]})]})})]})},le=()=>{const[c,x]=r.useState([]),[d,t]=r.useState(""),[n,b]=r.useState("all"),[a,S]=r.useState(null),[g,p]=r.useState(!1),C=[{id:1,recipient:"user1@example.com",subject:"회원가입을 환영합니다!",status:"sent",provider:"smtp",sentAt:new Date().toISOString(),messageId:"msg_001",emailType:"welcome",retryCount:0},{id:2,recipient:"user2@example.com",subject:"주문이 확인되었습니다",status:"sent",provider:"smtp",sentAt:new Date(Date.now()-36e5).toISOString(),messageId:"msg_002",emailType:"order-confirmation",retryCount:0},{id:3,recipient:"user3@example.com",subject:"비밀번호 재설정",status:"failed",provider:"smtp",sentAt:new Date(Date.now()-72e5).toISOString(),error:"Connection timeout",emailType:"password-reset",retryCount:3},{id:4,recipient:"user4@example.com",subject:"배송이 시작되었습니다",status:"pending",provider:"smtp",sentAt:new Date(Date.now()-18e5).toISOString(),emailType:"shipping",retryCount:1}];r.useEffect(()=>{y()},[]);const y=async()=>{x(C)},k=()=>{y()},D=s=>{},N=s=>{switch(s){case"sent":return e.jsx(A,{className:"h-4 w-4 text-green-500"});case"failed":return e.jsx(O,{className:"h-4 w-4 text-red-500"});case"pending":return e.jsx(z,{className:"h-4 w-4 text-yellow-500"});case"bounced":return e.jsx(U,{className:"h-4 w-4 text-orange-500"});default:return null}},f=s=>{const l={sent:"success",failed:"destructive",pending:"warning",bounced:"destructive"};return e.jsxs(Q,{variant:l[s]||"default",children:[s==="sent"&&"발송완료",s==="failed"&&"발송실패",s==="pending"&&"대기중",s==="bounced"&&"반송됨"]})},_=c.filter(s=>{const l=s.recipient.toLowerCase().includes(d.toLowerCase())||s.subject.toLowerCase().includes(d.toLowerCase()),B=n==="all"||s.status===n;return l&&B}),j={total:c.length,sent:c.filter(s=>s.status==="sent").length,failed:c.filter(s=>s.status==="failed").length,pending:c.filter(s=>s.status==="pending").length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"이메일 발송 기록"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"시스템에서 발송된 이메일 내역을 확인합니다"})]}),e.jsxs(i,{onClick:k,children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"새로고침"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx(o,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"전체"}),e.jsx("p",{className:"text-2xl font-bold",children:j.total})]}),e.jsx(V,{className:"h-8 w-8 text-gray-400"})]})})}),e.jsx(o,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"발송완료"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.sent})]}),e.jsx(A,{className:"h-8 w-8 text-green-400"})]})})}),e.jsx(o,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"발송실패"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:j.failed})]}),e.jsx(O,{className:"h-8 w-8 text-red-400"})]})})}),e.jsx(o,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"대기중"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:j.pending})]}),e.jsx(z,{className:"h-8 w-8 text-yellow-400"})]})})})]}),e.jsx(o,{children:e.jsx(h,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(w,{placeholder:"이메일 또는 제목으로 검색...",value:d,onChange:s=>t(s.target.value),className:"pl-10"})]})}),e.jsxs(Y,{value:n,onValueChange:b,children:[e.jsx(ee,{className:"w-[180px]",children:e.jsx(se,{placeholder:"상태 필터"})}),e.jsxs(te,{children:[e.jsx(u,{value:"all",children:"전체"}),e.jsx(u,{value:"sent",children:"발송완료"}),e.jsx(u,{value:"failed",children:"발송실패"}),e.jsx(u,{value:"pending",children:"대기중"}),e.jsx(u,{value:"bounced",children:"반송됨"})]})]})]})})}),e.jsx(o,{children:e.jsx(h,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"수신자"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"제목"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"유형"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"발송시간"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[N(s.status),f(s.status)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.recipient})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.subject}),s.error&&e.jsx("div",{className:"text-xs text-red-500 mt-1",children:s.error})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded bg-gray-100",children:s.emailType||"system"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(s.sentAt).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>{S(s),p(!0)},children:"상세보기"}),(s.status==="failed"||s.status==="pending")&&e.jsx(i,{variant:"ghost",size:"sm",onClick:()=>D(),children:"재발송"})]})})]},s.id))})]})})})}),e.jsx(T,{open:g,onOpenChange:p,children:e.jsxs(I,{className:"max-w-2xl",children:[e.jsx(L,{children:e.jsx(E,{children:"이메일 상세 정보"})}),a&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"수신자"}),e.jsx("p",{className:"font-medium",children:a.recipient})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"상태"}),e.jsxs("div",{className:"flex items-center gap-2",children:[N(a.status),f(a.status)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"제목"}),e.jsx("p",{className:"font-medium",children:a.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"발송시간"}),e.jsx("p",{className:"font-medium",children:new Date(a.sentAt).toLocaleString()})]}),a.messageId&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"메시지 ID"}),e.jsx("p",{className:"font-mono text-sm",children:a.messageId})]}),a.error&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"오류 메시지"}),e.jsx("p",{className:"text-red-600",children:a.error})]})]})})]})})]})},pe=()=>e.jsxs(X,{children:[e.jsx(v,{path:"/",element:e.jsx(Z,{to:"/mail/smtp",replace:!0})}),e.jsx(v,{path:"/smtp",element:e.jsx(J,{})}),e.jsx(v,{path:"/templates",element:e.jsx(ae,{})}),e.jsx(v,{path:"/logs",element:e.jsx(le,{})})]});export{pe as default};
//# sourceMappingURL=MailManagement-Du-72rfA.js.map
