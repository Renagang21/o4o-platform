import{a as e}from"./vendor-utils-C9jLuAcl.js";import{c as t}from"./index-BCeA-8sG.js";const o=e.create({baseURL:"https://api.neture.co.kr/api/v1",timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});o.interceptors.request.use(e=>{let o=t.getState().token;if(o||(o=localStorage.getItem("authToken")),!o){const e=localStorage.getItem("admin-auth-storage");if(e)try{const t=JSON.parse(e);t.state?.token&&(o=t.state.token)}catch(a){}}return o&&(e.headers.Authorization=`Bearer ${o}`),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{if(401===e.response?.status){const o=window.location.pathname;localStorage.removeItem("auth-storage"),localStorage.removeItem("authToken"),localStorage.removeItem("admin-auth-storage"),"/login"===o||e.config?.url?.includes("/auth")||(t.getState().logout(),window.location.href="/login")}return Promise.reject(e)});export{o as a};
