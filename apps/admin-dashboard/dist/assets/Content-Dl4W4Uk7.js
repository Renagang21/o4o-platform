import{r as f,j as e,a1 as ye,V as M,bT as Ze,a2 as Oe,a3 as Xe,$ as qe,ca as Re,O as le,I as be,x as J,S as Ce,bZ as ps,E as ke,J as Ks,y as je,z as ce,F as ve,bB as ls,ch as Se,ci as Ve,c8 as Ge,cj as Fs,B as Fe,c as ns,b as is,ck as rs,T as Ae,cl as cs,L as Ue,cm as es,cn as Ps,P as Is,i as Ds,bP as _e,co as Ts,bX as Qs,cp as Hs,cq as Os,cr as Us,cs as Ys,s as ss,N as $s,ct as Ls,cu as Ws,cv as gs,m as Gs,cw as Js,o as Xs,bE as vs,Q as Zs,k as Ms,cx as ea,cy as sa,bK as Es,bV as As,cz as aa,bN as ds,cA as os,cB as xs,cC as qs,cD as zs,cE as ta,cF as la,cG as na,cH as ia,X as hs,cI as pe,cJ as fe,w as Ke,H as ra,cK as ca,G as Bs,p as Je,by as da,cL as oa,cM as xa,c1 as ha,c2 as ae,c0 as ma}from"./vendor-react-CMQx0Rxg.js";import{I as k,S as _,f as K,g as Q,h as H,i as d,T as re,B as u,j as V,u as Rs,v as ua,L as x,G as ja,a as ze,b as Be,d as te,e as de,s as R,c as ge,D as Pe,n as Ie,o as De,r as X,q as Te,C as z,k as Y,l as W,m as B,t as we,w as $e,x as Le,y as Me,z as Ee,E as as,F as ts}from"./page-gutenberg-Bg9cnlWs.js";import{u as he,a as ne,b as G}from"./vendor-query-B9kD0akd.js";import{u as pa,B as ys,R as ga}from"./RowActions-DoekcHNq.js";import{u as va,S as ya}from"./ScreenMeta-_3MZhjY2.js";import{A as Na,R as fa,P as Ns}from"./PageForm-BBT1tzZG.js";import{S as ee}from"./page-template-editor-C4kVNhH9.js";import{f as fs}from"./vendor-utils-DQ8F5vJI.js";import{C as ue}from"./checkbox-DK2sx4k6.js";import{M as ba}from"./MediaLibrary-BIPndfpM.js";import"./wp-all-CpKe89B2.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./main-CHvD777f.js";import"./vendor-socket-Ch6lN7-G.js";function wa({onSave:a,onCancel:c}){const[g,j]=f.useState(null),[t,l]=f.useState(!1),[w,h]=f.useState({}),v=f.useCallback((D,L)=>{j(D),h(L)},[]),n=f.useCallback(()=>{j(null),h({}),c?.()},[c]),o=f.useCallback(async()=>{if(g){l(!0);try{await a(g,w),j(null),h({})}finally{l(!1)}}},[g,w,a]),N=f.useCallback((D,L)=>{h(E=>({...E,[D]:L}))},[]),m=f.useCallback(D=>g===D,[g]);return{editingId:g,isEditing:m,isLoading:t,formData:w,startEdit:v,cancelEdit:n,saveEdit:o,updateField:N}}const Ca=({post:a,formData:c,onUpdate:g,onSave:j,onCancel:t,isLoading:l,categories:w=[]})=>{const h=f.useRef(null);f.useEffect(()=>{h.current?.focus(),h.current?.select()},[]);const v=n=>{n.key==="Escape"?t():n.key==="Enter"&&(n.ctrlKey||n.metaKey)&&j()};return e.jsx("tr",{className:"inline-edit-row inline-edit-row-post quick-edit-row quick-edit-row-post inline-edit-post",onKeyDown:v,children:e.jsxs("td",{colSpan:7,className:"colspanchange",children:[e.jsxs("fieldset",{className:"inline-edit-col-left",children:[e.jsx("legend",{className:"inline-edit-legend",children:"Quick Edit"}),e.jsxs("div",{className:"inline-edit-col",children:[e.jsxs("label",{children:[e.jsx("span",{className:"title",children:"Title"}),e.jsx("span",{className:"input-text-wrap",children:e.jsx(k,{ref:h,type:"text",name:"post_title",className:"ptitle",value:c.title||"",onChange:n=>g("title",n.target.value)})})]}),e.jsxs("label",{children:[e.jsx("span",{className:"title",children:"Slug"}),e.jsx("span",{className:"input-text-wrap",children:e.jsx(k,{type:"text",name:"post_name",value:c.slug||"",onChange:n=>g("slug",n.target.value)})})]}),e.jsxs("fieldset",{className:"inline-edit-date",children:[e.jsx("legend",{children:e.jsx("span",{className:"title",children:"Date"})}),e.jsxs("div",{className:"timestamp-wrap",children:[e.jsxs("label",{children:[e.jsx("span",{className:"screen-reader-text",children:"Month"}),e.jsxs(_,{value:c.publishMonth||"01",onValueChange:n=>g("publishMonth",n),children:[e.jsx(K,{className:"inline-edit-month",children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"01",children:"Jan"}),e.jsx(d,{value:"02",children:"Feb"}),e.jsx(d,{value:"03",children:"Mar"}),e.jsx(d,{value:"04",children:"Apr"}),e.jsx(d,{value:"05",children:"May"}),e.jsx(d,{value:"06",children:"Jun"}),e.jsx(d,{value:"07",children:"Jul"}),e.jsx(d,{value:"08",children:"Aug"}),e.jsx(d,{value:"09",children:"Sep"}),e.jsx(d,{value:"10",children:"Oct"}),e.jsx(d,{value:"11",children:"Nov"}),e.jsx(d,{value:"12",children:"Dec"})]})]})]}),e.jsxs("label",{children:[e.jsx("span",{className:"screen-reader-text",children:"Day"}),e.jsx(k,{type:"text",name:"jj",value:c.publishDay||"",size:2,maxLength:2,onChange:n=>g("publishDay",n.target.value),className:"inline-edit-day"})]}),",",e.jsxs("label",{children:[e.jsx("span",{className:"screen-reader-text",children:"Year"}),e.jsx(k,{type:"text",name:"aa",value:c.publishYear||"",size:4,maxLength:4,onChange:n=>g("publishYear",n.target.value),className:"inline-edit-year"})]})]})]}),e.jsx("br",{className:"clear"}),e.jsxs("label",{className:"inline-edit-author",children:[e.jsx("span",{className:"title",children:"Author"}),e.jsxs(_,{value:c.authorId||"",onValueChange:n=>g("authorId",n),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsx(H,{children:e.jsx(d,{value:a.author?.id||"",children:a.author?.name||"Unknown"})})]})]}),e.jsxs("label",{className:"inline-edit-password",children:[e.jsx("span",{className:"title",children:"Password"}),e.jsx("span",{className:"input-text-wrap",children:e.jsx(k,{type:"text",name:"post_password",value:c.password||"",onChange:n=>g("password",n.target.value)})}),e.jsx("em",{className:"alignleft",children:"‚ÄìOR‚Äì"})]}),e.jsxs("label",{className:"inline-edit-private alignleft",children:[e.jsx("input",{type:"checkbox",name:"keep_private",checked:c.isPrivate||!1,onChange:n=>g("isPrivate",n.target.checked)}),e.jsx("span",{className:"checkbox-title",children:"Private"})]})]})]}),e.jsx("fieldset",{className:"inline-edit-col-center inline-edit-categories",children:e.jsxs("div",{className:"inline-edit-col",children:[e.jsx("span",{className:"title inline-edit-categories-label",children:"Categories"}),e.jsx("ul",{className:"cat-checklist category-checklist",children:w.map(n=>e.jsx("li",{className:"popular-category",children:e.jsxs("label",{className:"selectit",children:[e.jsx("input",{type:"checkbox",name:"post_category[]",value:n.id,checked:c.categoryIds?.includes(n.id)||!1,onChange:o=>{const N=c.categoryIds||[];o.target.checked?g("categoryIds",[...N,n.id]):g("categoryIds",N.filter(m=>m!==n.id))}})," ",n.name]})},n.id))})]})}),e.jsxs("fieldset",{className:"inline-edit-col-right",children:[e.jsxs("label",{className:"inline-edit-tags",children:[e.jsx("span",{className:"title",children:"Tags"}),e.jsx(re,{name:"tax_input[post_tag]",className:"tax_input_post_tag",value:c.tags||"",onChange:n=>g("tags",n.target.value),placeholder:"Separate tags with commas"})]}),e.jsxs("div",{className:"inline-edit-group wp-clearfix",children:[e.jsxs("label",{className:"alignleft",children:[e.jsx("span",{className:"title",children:"Comments"}),e.jsxs(_,{value:c.commentStatus||"open",onValueChange:n=>g("commentStatus",n),children:[e.jsx(K,{className:"w-[180px]",children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"open",children:"Allow"}),e.jsx(d,{value:"closed",children:"Do not allow"})]})]})]}),e.jsxs("label",{className:"alignleft",children:[e.jsx("span",{className:"title",children:"Pings"}),e.jsxs(_,{value:c.pingStatus||"open",onValueChange:n=>g("pingStatus",n),children:[e.jsx(K,{className:"w-[180px]",children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"open",children:"Allow"}),e.jsx(d,{value:"closed",children:"Do not allow"})]})]})]})]}),e.jsxs("div",{className:"inline-edit-group wp-clearfix",children:[e.jsxs("label",{className:"inline-edit-status alignleft",children:[e.jsx("span",{className:"title",children:"Status"}),e.jsxs(_,{value:c.status||"draft",onValueChange:n=>g("status",n),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"published",children:"Published"}),e.jsx(d,{value:"draft",children:"Draft"}),e.jsx(d,{value:"pending",children:"Pending Review"}),e.jsx(d,{value:"private",children:"Private"})]})]})]}),e.jsxs("label",{className:"alignleft",children:[e.jsx("input",{type:"checkbox",name:"sticky",checked:c.isSticky||!1,onChange:n=>g("isSticky",n.target.checked)}),e.jsx("span",{className:"checkbox-title",children:"Make this post sticky"})]})]})]}),e.jsxs("div",{className:"submit inline-edit-save",children:[e.jsx(u,{className:"button button-primary save",onClick:j,disabled:l,children:l?"Updating...":"Update"}),e.jsx(u,{className:"button cancel",variant:"ghost",onClick:t,disabled:l,children:"Cancel"}),e.jsx("span",{className:"spinner"}),e.jsx("br",{className:"clear"}),e.jsx("div",{className:"notice notice-error notice-alt inline hidden",children:e.jsx("p",{className:"error"})})]})]})})},ka=()=>(va([{id:"overview",title:"Overview",content:`
        <p>This screen provides access to all of your posts. You can customize the display of this screen to suit your workflow.</p>
        <p>By default, this screen will show all of your posts in a simple list. You can customize the display of this screen in a number of ways:</p>
        <ul>
          <li>You can hide/display columns based on your needs and decide how many posts to list per screen using the Screen Options tab.</li>
          <li>You can filter the list of posts by post status using the text links above the posts list to only show posts with that status.</li>
          <li>You can view posts in a simple title list or with an excerpt using the Screen Options tab.</li>
          <li>You can refine the list to show only posts in a specific category or from a specific month by using the dropdown menus above the posts list.</li>
        </ul>
      `},{id:"actions",title:"Available Actions",content:`
        <p>Hovering over a row in the posts list will display action links that allow you to manage your post. You can perform the following actions:</p>
        <ul>
          <li><strong>Edit</strong> takes you to the editing screen for that post. You can also reach that screen by clicking on the post title.</li>
          <li><strong>Quick Edit</strong> provides inline access to the metadata of your post, allowing you to update post details without leaving this screen.</li>
          <li><strong>Trash</strong> removes your post from this list and places it in the Trash, from which you can permanently delete it.</li>
          <li><strong>View</strong> will show you what your draft post will look like if you publish it.</li>
        </ul>
      `},{id:"bulk-actions",title:"Bulk Actions",content:`
        <p>You can also edit or move multiple posts to the Trash at once. Select the posts you want to act on using the checkboxes, then select the action you want to take from the Bulk actions menu and click Apply.</p>
        <p>When using Bulk Edit, you can change the metadata (categories, author, etc.) for all selected posts at once. To remove a post from the grouping, just click the x next to its name in the Bulk Edit area that appears.</p>
      `},{id:"quick-edit",title:"Quick Edit",content:`
        <p>Quick Edit is a powerful feature that allows you to make changes to post metadata without leaving the posts list screen. To use Quick Edit:</p>
        <ol>
          <li>Hover over any post in the list</li>
          <li>Click the "Quick Edit" link that appears</li>
          <li>The post row will transform into an edit form</li>
          <li>Make your changes</li>
          <li>Click "Update" to save or "Cancel" to discard changes</li>
        </ol>
        <p><strong>Available fields in Quick Edit:</strong></p>
        <ul>
          <li>Title and Slug</li>
          <li>Date and Author</li>
          <li>Categories and Tags</li>
          <li>Comments and Pings settings</li>
          <li>Status and Visibility</li>
          <li>Password protection</li>
        </ul>
      `}],{title:"For more information:",content:`
      <p><a href="https://wordpress.org/support/article/posts-screen/" target="_blank">Documentation on Managing Posts</a></p>
      <p><a href="https://wordpress.org/support/article/quick-edit/" target="_blank">Quick Edit Documentation</a></p>
      <p><a href="https://wordpress.org/support/" target="_blank">Support Forums</a></p>
    `}),null),Sa=()=>{const a=ye(),c=he(),[g,j]=f.useState(""),[t,l]=f.useState("all"),{data:w,isLoading:h,error:v}=ne({queryKey:["posts",t,g],queryFn:async()=>{const y=new URLSearchParams;return t!=="all"&&y.set("status",t),g&&y.set("search",g),y.set("type","post"),(await V.api.get(`/posts?${y}`)).data}}),n=w?.posts||[],{data:o}=ne({queryKey:["categories"],queryFn:async()=>(await V.api.get("/categories")).data}),N=o||[],m=G({mutationFn:async({id:y,data:$})=>{const b={title:$.title,slug:$.slug,status:$.status,authorId:$.authorId,categoryIds:$.categoryIds,commentStatus:$.commentStatus,pingStatus:$.pingStatus};$.publishYear&&$.publishMonth&&$.publishDay&&(b.publishedAt=new Date(parseInt($.publishYear),parseInt($.publishMonth)-1,parseInt($.publishDay)).toISOString()),$.tags&&(b.tags=$.tags.split(",").map(me=>me.trim()).filter(Boolean)),$.password&&(b.password=$.password),$.isPrivate&&(b.status="private"),b.isSticky=$.isSticky,await V.api.patch(`/posts/${y}`,b)},onSuccess:()=>{c.invalidateQueries({queryKey:["posts"]}),M.success("Post updated successfully")},onError:()=>{M.error("Failed to update post")}}),D=wa({onSave:async(y,$)=>{await m.mutateAsync({id:y,data:$})}}),L=y=>{const $=new Date(y.publishedAt||y.createdAt);return{title:y.title,slug:y.slug,status:y.status,authorId:y.author?.id,categoryIds:y.categories?.map(b=>b.id)||[],tags:y.tags?.map(b=>b.name).join(", ")||"",publishYear:$.getFullYear().toString(),publishMonth:($.getMonth()+1).toString().padStart(2,"0"),publishDay:$.getDate().toString().padStart(2,"0"),commentStatus:y.commentStatus||"open",pingStatus:y.pingStatus||"open",password:y.password||"",isPrivate:y.status==="private",isSticky:y.isSticky||!1}},E=G({mutationFn:async y=>{await Promise.all(y.map($=>V.api.delete(`/posts/${$}`)))},onSuccess:()=>{c.invalidateQueries({queryKey:["posts"]}),M.success("Selected posts deleted successfully")},onError:()=>{M.error("Failed to delete some posts")}}),i=G({mutationFn:async({ids:y,status:$})=>{await Promise.all(y.map(b=>V.api.patch(`/posts/${b}`,{status:$})))},onSuccess:()=>{c.invalidateQueries({queryKey:["posts"]}),M.success("Posts status updated successfully")},onError:()=>{M.error("Failed to update some posts")}}),s=G({mutationFn:async y=>{await V.api.delete(`/posts/${y}`)},onSuccess:()=>{c.invalidateQueries({queryKey:["posts"]}),M.success("Post deleted successfully")},onError:()=>{M.error("Failed to delete post")}}),S=[{value:"trash",label:"Move to Trash",action:async y=>{await i.mutateAsync({ids:y,status:"trash"})},confirmMessage:"Are you sure you want to move {count} post(s) to trash?"},{value:"delete",label:"Delete Permanently",action:async y=>{await E.mutateAsync(y)},confirmMessage:"Are you sure you want to permanently delete {count} post(s)? This cannot be undone.",isDestructive:!0},{value:"publish",label:"Publish",action:async y=>{await i.mutateAsync({ids:y,status:"published"})}},{value:"draft",label:"Move to Draft",action:async y=>{await i.mutateAsync({ids:y,status:"draft"})}}],{selectedCount:A,isAllSelected:T,isProcessing:Z,toggleAll:P,toggleItem:se,executeBulkAction:C,isSelected:q}=pa({items:n,idField:"id",actions:S}),r=[{key:"title",label:"Title",sortable:!0,render:y=>e.jsxs("div",{children:[e.jsx(Ze,{to:`/posts/${y.id}/edit`,className:"font-medium text-blue-600 hover:text-blue-800",children:y.title||"(no title)"}),y.status==="draft"&&e.jsx("span",{className:"text-gray-500 text-sm ml-2",children:"‚Äî Draft"})]})},{key:"author",label:"Author",render:y=>y.author?.name||"Unknown"},{key:"categories",label:"Categories",render:y=>e.jsx("div",{className:"text-sm text-gray-600",children:y.categories?.map($=>$.name).join(", ")||"‚Äî"})},{key:"tags",label:"Tags",render:y=>e.jsx("div",{className:"text-sm text-gray-600",children:y.tags?.map($=>$.name).join(", ")||"‚Äî"})},{key:"comments",label:"Comments",render:y=>e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"comment-count",children:y.commentCount||0})})},{key:"date",label:"Date",sortable:!0,render:y=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:y.status==="published"?"Published":"Last Modified"}),e.jsx("div",{className:"text-gray-600",children:Rs(y.updatedAt||y.createdAt)})]})}],I=y=>{const $=[{label:"Edit",onClick:()=>a(`/posts/${y.id}/edit`)},{label:"Quick Edit",onClick:()=>{D.startEdit(y.id,L(y))},className:"quick-edit"},{label:"Trash",onClick:async()=>{confirm("Are you sure you want to move this post to trash?")&&await s.mutateAsync(y.id)},className:"text-red-600"},{label:"View",href:`/posts/${y.slug}`,target:"_blank"}];return e.jsx(ga,{actions:$,visible:!D.isEditing(y.id)})},U=()=>n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:r.length+1,className:"colspanchange text-center py-4",children:"No posts found"})}):n.map((y,$)=>{const b=String(y.id),me=q(b),Ne=D.isEditing(b);return e.jsxs(f.Fragment,{children:[e.jsxs("tr",{className:`${me?"selected":""} ${$%2===0?"alternate":""} ${Ne?"hidden":""}`,children:[e.jsxs("th",{scope:"row",className:"check-column",children:[e.jsxs("label",{className:"screen-reader-text",htmlFor:`cb-select-${b}`,children:["Select ",y.title||`Post ${b}`]}),e.jsx("input",{type:"checkbox",id:`cb-select-${b}`,checked:me,onChange:()=>se(b)})]}),r.map(p=>e.jsxs("td",{className:`column-${p.key}`,children:[p.render?p.render(y):y[p.key],p.key===r[0].key&&I(y)]},p.key))]}),Ne&&e.jsx(Ca,{post:y,formData:D.formData,onUpdate:D.updateField,onSave:D.saveEdit,onCancel:D.cancelEdit,isLoading:D.isLoading,categories:N})]},b)});return e.jsxs("div",{className:"wrap",children:[e.jsx(ka,{}),e.jsx(ya,{}),e.jsx("h1",{className:"wp-heading-inline",children:"Posts"}),e.jsx(Ze,{to:"/posts/new",className:"page-title-action",children:"Add New"}),e.jsx("hr",{className:"wp-header-end"}),e.jsx("div",{className:"wp-filter",children:e.jsxs("div",{className:"filter-items",children:[e.jsxs(_,{value:t,onValueChange:y=>l(y),children:[e.jsx(K,{className:"w-[180px]",children:e.jsx(Q,{placeholder:"All posts"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"All posts"}),e.jsx(d,{value:"published",children:"Published"}),e.jsx(d,{value:"draft",children:"Draft"}),e.jsx(d,{value:"scheduled",children:"Scheduled"}),e.jsx(d,{value:"trash",children:"Trash"})]})]}),e.jsxs("div",{className:"search-box",children:[e.jsx(k,{type:"search",placeholder:"Search posts...",value:g,onChange:y=>j(y.target.value),className:"w-[300px]"}),e.jsx(u,{variant:"secondary",children:"Search Posts"})]})]})}),e.jsx(ys,{actions:S,selectedCount:A,onActionExecute:C,isProcessing:Z,position:"top"}),h?e.jsx("div",{className:"text-center py-8",children:"Loading posts..."}):v?e.jsx("div",{className:"text-center py-8 text-red-600",children:"Error loading posts"}):e.jsxs("table",{className:"wp-list-table widefat fixed striped posts",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsxs("td",{className:"manage-column column-cb check-column",children:[e.jsx("label",{className:"screen-reader-text",htmlFor:"cb-select-all",children:"Select All"}),e.jsx("input",{type:"checkbox",id:"cb-select-all",checked:T,onChange:P})]}),r.map(y=>e.jsx("th",{scope:"col",className:`manage-column column-${y.key}${y.sortable?" sortable":""}`,children:y.sortable?e.jsxs("a",{href:"#",children:[e.jsx("span",{children:y.label}),e.jsx("span",{className:"sorting-indicator"})]}):y.label},y.key))]})}),e.jsx("tbody",{id:"the-list",children:U()}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsxs("td",{className:"manage-column column-cb check-column",children:[e.jsx("label",{className:"screen-reader-text",htmlFor:"cb-select-all-2",children:"Select All"}),e.jsx("input",{type:"checkbox",id:"cb-select-all-2",checked:T,onChange:P})]}),r.map(y=>e.jsx("th",{scope:"col",className:`manage-column column-${y.key}`,children:y.label},y.key))]})})]}),e.jsx(ys,{actions:S,selectedCount:A,onActionExecute:C,isProcessing:Z,position:"bottom"}),e.jsx("div",{className:"tablenav bottom",children:e.jsx("div",{className:"tablenav-pages",children:e.jsxs("span",{className:"displaying-num",children:[n.length," items"]})})})]})};class Fa{events={};on(c,g){return this.events[c]||(this.events[c]=[]),this.events[c].push(g),()=>{this.events[c]=this.events[c].filter(j=>j!==g)}}emit(c,...g){this.events[c]&&this.events[c].forEach(j=>{j(...g)})}off(c,g){this.events[c]&&(g?this.events[c]=this.events[c].filter(j=>j!==g):delete this.events[c])}}const bs=new Fa,ws={POST_CREATED:"post:created",POST_UPDATED:"post:updated"},Ye=()=>{const a=ye(),{id:c}=Oe(),g=he(),j=!!c,[t,l]=f.useState({title:"",content:"",excerpt:"",type:"post",status:"draft",visibility:"public",categoryIds:[],tagIds:[],meta:{seoTitle:"",seoDescription:"",seoKeywords:[]}}),[w,h]=f.useState([]),[v,n]=f.useState([]),[o,N]=f.useState(!1),[m,D]=f.useState(""),[L,E]=f.useState(""),[i,s]=f.useState(!1),[S,A]=f.useState(null),{data:T,isLoading:Z}=ne({queryKey:["post",c],queryFn:async()=>(await V.api.get(`/posts/${c}`)).data,enabled:j}),{data:P=[]}=ne({queryKey:["categories"],queryFn:async()=>(await V.api.get("/categories")).data}),{data:se=[]}=ne({queryKey:["tags"],queryFn:async()=>(await V.api.get("/tags")).data}),{isSaving:C,lastSaved:q,hasUnsavedChanges:r,savedInLocalStorage:I,recoverFromLocalStorage:U,clearLocalStorage:y}=ua(t,{postId:c,postType:"post",interval:3e4,onSaveSuccess:()=>{}});f.useEffect(()=>{(async()=>{const O=await U();O&&!c&&(A({data:O,timestamp:new Date}),s(!0))})()},[c,U]);const $=()=>{S&&(l(S.data),S.data.categoryIds&&h(S.data.categoryIds),S.data.tagIds&&n(S.data.tagIds),y(),s(!1),M.success("ÏûÑÏãú Ï†ÄÏû•Îêú ÎÇ¥Ïö©Ïù¥ Î≥µÍµ¨ÎêòÏóàÏäµÎãàÎã§"))},b=()=>{y(),s(!1)},me=G({mutationFn:async F=>(await V.api.post("/posts",F)).data,onSuccess:F=>{M.success("Í≤åÏãúÍ∏ÄÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§"),g.invalidateQueries({queryKey:["posts"]}),y(),bs.emit(ws.POST_CREATED,{postType:"post",id:F.id}),a(`/content/posts/${F.id}/edit`)},onError:()=>{M.error("Í≤åÏãúÍ∏Ä Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),Ne=G({mutationFn:async F=>(await V.api.put(`/posts/${c}`,F)).data,onSuccess:()=>{M.success("Í≤åÏãúÍ∏ÄÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),g.invalidateQueries({queryKey:["posts"]}),g.invalidateQueries({queryKey:["post",c]}),y(),bs.emit(ws.POST_UPDATED,{postType:"post",id:c})},onError:()=>{M.error("Í≤åÏãúÍ∏Ä ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}});f.useEffect(()=>{if(T&&(l({title:T.title,content:T.content,excerpt:T.excerpt||"",type:T.type,status:T.status,visibility:T.visibility,password:T.password,categoryIds:T.categoryIds||[],tagIds:T.tagIds||[],featuredImageId:T.featuredImageId,meta:T.meta||{seoTitle:"",seoDescription:"",seoKeywords:[]}}),h(T.categoryIds||[]),n(T.tagIds||[]),T.scheduledAt)){N(!0);const F=new Date(T.scheduledAt);D(fs(F,"yyyy-MM-dd")),E(fs(F,"HH:mm"))}},[T]);const p=(F="draft")=>{const O={...t,status:F,categoryIds:w,tagIds:v,scheduledAt:o&&m&&L?new Date(`${m}T${L}`):void 0};j?Ne.mutate({id:c,...O}):me.mutate(O)};return j&&Z?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>a("/content/posts"),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Í≤åÏãúÍ∏Ä Î™©Î°ù"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:j?"Í≤åÏãúÍ∏Ä ÏàòÏ†ï":"ÏÉà Í≤åÏãúÍ∏Ä ÏûëÏÑ±"}),e.jsx(Na,{isSaving:C,lastSaved:q,hasUnsavedChanges:r,savedInLocalStorage:I})]}),i&&S&&e.jsx(fa,{timestamp:S.timestamp,onRecover:$,onDiscard:b}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"wp-card",children:e.jsxs("div",{className:"wp-card-body",children:[e.jsx(x,{htmlFor:"title",children:"Ï†úÎ™©"}),e.jsx(k,{id:"title",placeholder:"Í≤åÏãúÍ∏Ä Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",value:t.title,onChange:F=>l({...t,title:F.target.value}),className:"mt-2"})]})}),e.jsx("div",{className:"wp-card",children:e.jsxs("div",{className:"wp-card-body",children:[e.jsx(x,{children:"ÎÇ¥Ïö©"}),e.jsx("div",{className:"mt-2",children:e.jsx(ja,{content:t.content,onContentChange:F=>l({...t,content:F})})})]})}),e.jsx("div",{className:"wp-card",children:e.jsx("div",{className:"wp-card-body",children:e.jsxs(ze,{defaultValue:"excerpt",children:[e.jsxs(Be,{className:"grid w-full grid-cols-3",children:[e.jsx(te,{value:"excerpt",children:"ÏöîÏïΩ"}),e.jsx(te,{value:"seo",children:"SEO"}),e.jsx(te,{value:"advanced",children:"Í≥†Í∏â"})]}),e.jsx(de,{value:"excerpt",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(x,{htmlFor:"excerpt",children:"ÏöîÏïΩ"}),e.jsx(re,{id:"excerpt",placeholder:"Í≤åÏãúÍ∏Ä ÏöîÏïΩÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (ÏÑ†ÌÉùÏÇ¨Ìï≠)",value:t.excerpt,onChange:F=>l({...t,excerpt:F.target.value}),className:"mt-2",rows:3}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ÏöîÏïΩÏùÄ Î™©Î°ùÏóêÏÑú Í≤åÏãúÍ∏Ä ÎØ∏Î¶¨Î≥¥Í∏∞Î°ú ÌëúÏãúÎê©ÎãàÎã§"})]})}),e.jsxs(de,{value:"seo",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"seoTitle",children:"SEO Ï†úÎ™©"}),e.jsx(k,{id:"seoTitle",placeholder:"Í≤ÄÏÉâ Í≤∞Í≥ºÏóê ÌëúÏãúÎê† Ï†úÎ™©",value:t.meta?.seoTitle,onChange:F=>l({...t,meta:{...t.meta,seoTitle:F.target.value}}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"seoDescription",children:"SEO ÏÑ§Î™Ö"}),e.jsx(re,{id:"seoDescription",placeholder:"Í≤ÄÏÉâ Í≤∞Í≥ºÏóê ÌëúÏãúÎê† ÏÑ§Î™Ö",value:t.meta?.seoDescription,onChange:F=>l({...t,meta:{...t.meta,seoDescription:F.target.value}}),className:"mt-2",rows:3})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"seoKeywords",children:"SEO ÌÇ§ÏõåÎìú"}),e.jsx(k,{id:"seoKeywords",placeholder:"ÌÇ§ÏõåÎìúÎ•º ÏâºÌëúÎ°ú Íµ¨Î∂ÑÌïòÏó¨ ÏûÖÎ†•",value:t.meta?.seoKeywords?.join(", "),onChange:F=>l({...t,meta:{...t.meta,seoKeywords:F.target.value.split(",").map(O=>O.trim()).filter(Boolean)}}),className:"mt-2"})]})]}),e.jsx(de,{value:"advanced",className:"space-y-4",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(x,{htmlFor:"slug",children:"Ïä¨Îü¨Í∑∏"}),e.jsx(k,{id:"slug",placeholder:"url-friendly-slug",value:t.slug||"",onChange:F=>l({...t,slug:F.target.value}),className:"mt-2"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"URLÏóê ÏÇ¨Ïö©Îê† Ï£ºÏÜåÏûÖÎãàÎã§. ÎπÑÏõåÎëêÎ©¥ Ï†úÎ™©ÏóêÏÑú ÏûêÎèô ÏÉùÏÑ±Îê©ÎãàÎã§"})]})})})]})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsx("h3",{className:"font-medium",children:"Í≤åÏãú"})}),e.jsxs("div",{className:"wp-card-body space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"ÏÉÅÌÉú:"}),e.jsxs(R,{variant:t.status==="published"?"default":"secondary",children:[t.status==="draft"&&"ÏûÑÏãúÏ†ÄÏû•",t.status==="published"&&"Í≤åÏãúÎê®",t.status==="scheduled"&&"ÏòàÏïΩÎê®"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Í≥µÍ∞ú ÏÑ§Ï†ï:"}),e.jsxs(_,{value:t.visibility,onValueChange:F=>l({...t,visibility:F}),children:[e.jsx(K,{className:"w-32",children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"public",children:"Í≥µÍ∞ú"}),e.jsx(d,{value:"private",children:"ÎπÑÍ≥µÍ∞ú"}),e.jsx(d,{value:"password",children:"ÎπÑÎ∞ÄÎ≤àÌò∏"})]})]})]}),t.visibility==="password"&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"password",children:"ÎπÑÎ∞ÄÎ≤àÌò∏"}),e.jsx(k,{id:"password",type:"password",value:t.password||"",onChange:F=>l({...t,password:F.target.value}),className:"mt-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{htmlFor:"schedule",className:"text-sm",children:"ÏòàÏïΩ Í≤åÏãú"}),e.jsx(ee,{id:"schedule",checked:o,onCheckedChange:N})]}),o&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{type:"date",value:m,onChange:F=>D(F.target.value)}),e.jsx(k,{type:"time",value:L,onChange:F=>E(F.target.value)})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsxs(u,{variant:"outline",className:"flex-1",onClick:()=>p("draft"),disabled:me.isPending||Ne.isPending,children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"ÏûÑÏãúÏ†ÄÏû•"]}),e.jsx(u,{className:"flex-1",onClick:()=>p(o?"scheduled":"published"),disabled:me.isPending||Ne.isPending,children:o?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4 mr-2"}),"ÏòàÏïΩ"]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Í≤åÏãú"]})})]})]})]}),e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsx("h3",{className:"font-medium",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"})}),e.jsxs("div",{className:"wp-card-body",children:[e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:P.map(F=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:w.includes(F.id),onChange:O=>{O.target.checked?h([...w,F.id]):h(w.filter(ie=>ie!==F.id))}}),e.jsx("span",{className:"text-sm",children:F.name})]},F.id))}),P.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"Ïπ¥ÌÖåÍ≥†Î¶¨Í∞Ä ÏóÜÏäµÎãàÎã§"})]})]}),e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsx("h3",{className:"font-medium",children:"ÌÉúÍ∑∏"})}),e.jsxs("div",{className:"wp-card-body",children:[e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:se.map(F=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:v.includes(F.id),onChange:O=>{O.target.checked?n([...v,F.id]):n(v.filter(ie=>ie!==F.id))}}),e.jsx("span",{className:"text-sm",children:F.name})]},F.id))}),se.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"ÌÉúÍ∑∏Í∞Ä ÏóÜÏäµÎãàÎã§"})]})]}),e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsx("h3",{className:"font-medium",children:"ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"})}),e.jsx("div",{className:"wp-card-body",children:t.featuredImage?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.featuredImage.url,alt:t.featuredImage.alt||"",className:"w-full h-32 object-cover rounded"}),e.jsx(u,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>l({...t,featuredImageId:void 0,featuredImage:void 0}),children:"Ï†úÍ±∞"})]}):e.jsxs(u,{variant:"outline",className:"w-full",children:[e.jsx(be,{className:"w-4 h-4 mr-2"}),"Ïù¥ÎØ∏ÏßÄ ÏÑ†ÌÉù"]})})]})]})]})]})},ms=f.forwardRef(({className:a,...c},g)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:g,className:ge("w-full caption-bottom text-sm",a),...c})}));ms.displayName="Table";const us=f.forwardRef(({className:a,...c},g)=>e.jsx("thead",{ref:g,className:ge("[&_tr]:border-b",a),...c}));us.displayName="TableHeader";const js=f.forwardRef(({className:a,...c},g)=>e.jsx("tbody",{ref:g,className:ge("[&_tr:last-child]:border-0",a),...c}));js.displayName="TableBody";const Pa=f.forwardRef(({className:a,...c},g)=>e.jsx("tfoot",{ref:g,className:ge("border-t bg-gray-50 font-medium [&>tr]:last:border-b-0",a),...c}));Pa.displayName="TableFooter";const Qe=f.forwardRef(({className:a,...c},g)=>e.jsx("tr",{ref:g,className:ge("border-b transition-colors hover:bg-gray-50 data-[state=selected]:bg-gray-100",a),...c}));Qe.displayName="TableRow";const oe=f.forwardRef(({className:a,...c},g)=>e.jsx("th",{ref:g,className:ge("h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0",a),...c}));oe.displayName="TableHead";const xe=f.forwardRef(({className:a,...c},g)=>e.jsx("td",{ref:g,className:ge("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));xe.displayName="TableCell";const Ia=f.forwardRef(({className:a,...c},g)=>e.jsx("caption",{ref:g,className:ge("mt-4 text-sm text-gray-500",a),...c}));Ia.displayName="TableCaption";const Da=()=>{const a=ye(),c=he(),[g,j]=f.useState(""),[t,l]=f.useState("all"),[w,h]=f.useState([]),{data:v,isLoading:n,error:o}=ne({queryKey:["pages",t,g],queryFn:async()=>{const s=new URLSearchParams;return t!=="all"&&s.set("status",t),g&&s.set("search",g),s.set("type","page"),(await V.api.get(`/posts?${s}`)).data}}),N=G({mutationFn:async s=>{await V.api.delete(`/posts/${s}`)},onSuccess:()=>{c.invalidateQueries({queryKey:["pages"]}),M.success("ÌéòÏù¥ÏßÄÍ∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("ÌéòÏù¥ÏßÄ ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),m=G({mutationFn:async s=>{await V.api.post(`/posts/${s}/duplicate`)},onSuccess:()=>{c.invalidateQueries({queryKey:["pages"]}),M.success("ÌéòÏù¥ÏßÄÍ∞Ä Î≥µÏ†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("ÌéòÏù¥ÏßÄ Î≥µÏ†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),D=G({mutationFn:async s=>{await V.api.post("/settings/homepage",{pageId:s})},onSuccess:()=>{c.invalidateQueries({queryKey:["pages"]}),M.success("ÌôàÌéòÏù¥ÏßÄÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("ÌôàÌéòÏù¥ÏßÄ ÏÑ§Ï†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),L=s=>{switch(s){case"published":return e.jsx(R,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Í≤åÏãúÎê®"});case"draft":return e.jsx(R,{variant:"secondary",children:"ÏûÑÏãúÏ†ÄÏû•"});case"scheduled":return e.jsx(R,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"ÏòàÏïΩÎê®"});case"trash":return e.jsx(R,{variant:"destructive",children:"Ìú¥ÏßÄÌÜµ"});default:return e.jsx(R,{children:s})}},E=s=>{if(w.length===0){M.error("ÏÑ†ÌÉùÎêú ÌéòÏù¥ÏßÄÍ∞Ä ÏóÜÏäµÎãàÎã§");return}},i=v?.posts||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ÌéòÏù¥ÏßÄ"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ÏÇ¨Ïù¥Ìä∏Ïùò Ï†ïÏ†Å ÌéòÏù¥ÏßÄÎ•º Í¥ÄÎ¶¨Ìï©ÎãàÎã§"})]}),e.jsxs(u,{onClick:()=>a("/content/pages/new"),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏÉà ÌéòÏù¥ÏßÄ"]})]}),e.jsx("div",{className:"wp-card",children:e.jsx("div",{className:"wp-card-body",children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx(k,{placeholder:"ÌéòÏù¥ÏßÄ Í≤ÄÏÉâ...",value:g,onChange:s=>j(s.target.value),className:"pl-10"})]}),e.jsxs(_,{value:t,onValueChange:s=>l(s),children:[e.jsx(K,{className:"w-[180px]",children:e.jsx(Q,{placeholder:"ÏÉÅÌÉú ÌïÑÌÑ∞"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Î™®Îì† ÏÉÅÌÉú"}),e.jsx(d,{value:"published",children:"Í≤åÏãúÎê®"}),e.jsx(d,{value:"draft",children:"ÏûÑÏãúÏ†ÄÏû•"}),e.jsx(d,{value:"scheduled",children:"ÏòàÏïΩÎê®"}),e.jsx(d,{value:"trash",children:"Ìú¥ÏßÄÌÜµ"})]})]}),w.length>0&&e.jsxs(_,{onValueChange:E,children:[e.jsx(K,{className:"w-[180px]",children:e.jsx(Q,{placeholder:"ÏùºÍ¥Ñ ÏûëÏóÖ"})}),e.jsxs(H,{children:[e.jsx(d,{value:"delete",children:"ÏÇ≠Ï†ú"}),e.jsx(d,{value:"publish",children:"Í≤åÏãú"}),e.jsx(d,{value:"draft",children:"ÏûÑÏãúÏ†ÄÏû•ÏúºÎ°ú Î≥ÄÍ≤Ω"})]})]})]})})}),e.jsx("div",{className:"wp-card",children:e.jsx("div",{className:"wp-card-body p-0",children:n?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):o?e.jsx("div",{className:"text-center py-12 text-red-600",children:"ÌéòÏù¥ÏßÄÎ•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§"}):i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"ÌéòÏù¥ÏßÄÍ∞Ä ÏóÜÏäµÎãàÎã§"}),e.jsx(u,{onClick:()=>a("/content/pages/new"),children:"Ï≤´ ÌéòÏù¥ÏßÄ ÎßåÎì§Í∏∞"})]}):e.jsxs(ms,{children:[e.jsx(us,{children:e.jsxs(Qe,{children:[e.jsx(oe,{className:"w-12",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:w.length===i.length,onChange:s=>{s.target.checked?h(i.map(S=>S.id)):h([])}})}),e.jsx(oe,{children:"Ï†úÎ™©"}),e.jsx(oe,{children:"ÏûëÏÑ±Ïûê"}),e.jsx(oe,{children:"ÌÖúÌîåÎ¶ø"}),e.jsx(oe,{children:"ÏÉÅÌÉú"}),e.jsx(oe,{children:"ÎÇ†Ïßú"}),e.jsx(oe,{className:"w-12"})]})}),e.jsx(js,{children:i.map(s=>e.jsxs(Qe,{children:[e.jsx(xe,{children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:w.includes(s.id),onChange:S=>{S.target.checked?h([...w,s.id]):h(w.filter(A=>A!==s.id))}})}),e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{children:[e.jsx(Ze,{to:`/content/pages/${s.id}/edit`,className:"font-medium text-gray-900 hover:text-gray-700",children:s.title||"(Ï†úÎ™© ÏóÜÏùå)"}),s.slug&&e.jsxs("p",{className:"text-sm text-gray-500",children:["/",s.slug]})]}),s.isHomepage&&e.jsxs(R,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ps,{className:"w-3 h-3"}),"Ìôà"]})]})}),e.jsx(xe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:s.author?.name}),e.jsx("div",{className:"text-gray-500",children:s.author?.email})]})}),e.jsx(xe,{children:s.template?e.jsx(R,{variant:"outline",children:s.template}):e.jsx("span",{className:"text-gray-500",children:"Í∏∞Î≥∏"})}),e.jsx(xe,{children:L(s.status)}),e.jsx(xe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:Rs(s.publishedAt||s.createdAt)}),e.jsx("div",{className:"text-gray-500",children:s.status==="published"?"Í≤åÏãúÎê®":"ÏàòÏ†ïÎê®"})]})}),e.jsx(xe,{children:e.jsxs(Pe,{children:[e.jsx(Ie,{children:e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(ke,{className:"w-4 h-4"})})}),e.jsxs(De,{align:"end",children:[e.jsxs(X,{onClick:()=>a(`/content/pages/${s.id}/edit`),children:[e.jsx(Ks,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),e.jsxs(X,{onClick:()=>window.open(`/${s.slug}`,"_blank"),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Î≥¥Í∏∞"]}),e.jsxs(X,{onClick:()=>m.mutate(s.id),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),!s.isHomepage&&e.jsxs(X,{onClick:()=>D.mutate(s.id),children:[e.jsx(ps,{className:"w-4 h-4 mr-2"}),"ÌôàÌéòÏù¥ÏßÄÎ°ú ÏÑ§Ï†ï"]}),e.jsx(Te,{}),e.jsxs(X,{className:"text-red-600",onClick:()=>{confirm("Ï†ïÎßê Ïù¥ ÌéòÏù¥ÏßÄÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&N.mutate(s.id)},disabled:s.isHomepage,children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})})]},s.id))})]})})})]})},Ta=()=>{const a=ye(),c=he(),{data:g=[],isLoading:j}=ne({queryKey:["custom-post-types"],queryFn:async()=>(await V.api.get("/v1/platform/custom-post-types")).data}),t=G({mutationFn:async h=>V.api.delete(`/v1/platform/custom-post-types/${h}`),onSuccess:()=>{c.invalidateQueries({queryKey:["custom-post-types"]}),M.success("ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†ÌòïÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),l=h=>{confirm(`Ï†ïÎßê "${h.name}"ÏùÑ(Î•º) ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?
Ïù¥ Ïú†ÌòïÏùò Î™®Îì† Í≤åÏãúÎ¨ºÎèÑ Ìï®Íªò ÏÇ≠Ï†úÎê©ÎãàÎã§.`)&&t.mutate(h.id)},w=h=>{const v=[];return h.title&&v.push("Ï†úÎ™©"),h.editor&&v.push("ÏóêÎîîÌÑ∞"),h.thumbnail&&v.push("ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"),h.customFields&&v.push("Ïª§Ïä§ÌÖÄ ÌïÑÎìú"),h.comments&&v.push("ÎåìÍ∏Ä"),v};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†Ìòï"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Îã§ÏñëÌïú ÏΩòÌÖêÏ∏† Ïú†ÌòïÏùÑ ÏÉùÏÑ±ÌïòÍ≥† Í¥ÄÎ¶¨Ìï©ÎãàÎã§"})]}),e.jsxs(u,{onClick:()=>a("/content/cpt/new"),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏÉà Í≤åÏãúÎ¨º Ïú†Ìòï"]})]}),j?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(z,{className:"border-gray-300",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-lg",children:"Í≤åÏãúÍ∏Ä"}),e.jsx("p",{className:"text-sm text-gray-500",children:"post"})]})]}),e.jsx(R,{variant:"secondary",children:"Í∏∞Î≥∏"})]})}),e.jsxs(B,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Î∏îÎ°úÍ∑∏ Í≤åÏãúÍ∏ÄÍ≥º Îâ¥Ïä§Î•º ÏúÑÌïú Í∏∞Î≥∏ Í≤åÏãúÎ¨º Ïú†Ìòï"}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:["Ï†úÎ™©","ÏóêÎîîÌÑ∞","Ïπ¥ÌÖåÍ≥†Î¶¨","ÌÉúÍ∑∏","ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"].map(h=>e.jsx(R,{variant:"outline",className:"text-xs",children:h},h))}),e.jsx("div",{className:"flex items-center justify-between pt-4 border-t",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>a("/content/posts"),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Í≤åÏãúÍ∏Ä Í¥ÄÎ¶¨"]})})]})]}),e.jsxs(z,{className:"border-gray-300",children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-lg",children:"ÌéòÏù¥ÏßÄ"}),e.jsx("p",{className:"text-sm text-gray-500",children:"page"})]})]}),e.jsx(R,{variant:"secondary",children:"Í∏∞Î≥∏"})]})}),e.jsxs(B,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Ï†ïÏ†Å ÌéòÏù¥ÏßÄÎ•º ÏúÑÌïú Í∏∞Î≥∏ Í≤åÏãúÎ¨º Ïú†Ìòï"}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:["Ï†úÎ™©","ÏóêÎîîÌÑ∞","ÌéòÏù¥ÏßÄ ÏÜçÏÑ±","ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"].map(h=>e.jsx(R,{variant:"outline",className:"text-xs",children:h},h))}),e.jsx("div",{className:"flex items-center justify-between pt-4 border-t",children:e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>a("/content/pages"),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"ÌéòÏù¥ÏßÄ Í¥ÄÎ¶¨"]})})]})]}),g.map(h=>e.jsxs(z,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:h.icon?e.jsx("span",{className:"text-2xl",children:h.icon}):e.jsx(ls,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-lg",children:h.pluralName}),e.jsx("p",{className:"text-sm text-gray-500",children:h.slug})]})]}),e.jsxs(Pe,{children:[e.jsx(Ie,{children:e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(ke,{className:"w-4 h-4"})})}),e.jsxs(De,{align:"end",children:[e.jsxs(X,{onClick:()=>a(`/content/cpt/${h.id}/edit`),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),e.jsxs(X,{onClick:()=>a(`/content/cpt/${h.id}/fields`),children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Í¥ÄÎ¶¨"]}),e.jsxs(X,{onClick:()=>a(`/content/${h.slug}`),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"ÏΩòÌÖêÏ∏† Î≥¥Í∏∞"]}),e.jsx(Te,{}),e.jsxs(X,{onClick:()=>l(h),className:"text-red-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})]})}),e.jsxs(B,{children:[h.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:h.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[h.isPublic?e.jsx(le,{className:"w-4 h-4 text-green-600"}):e.jsx(Ge,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:h.isPublic?"Í≥µÍ∞ú":"ÎπÑÍ≥µÍ∞ú"})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:w(h.supports).map(v=>e.jsx(R,{variant:"outline",className:"text-xs",children:v},v))}),h.fieldGroups.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[h.fieldGroups.reduce((v,n)=>v+n.fields.length,0),"Í∞ú Ïª§Ïä§ÌÖÄ ÌïÑÎìú"]})]}),h.taxonomies.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:h.taxonomies.map(v=>e.jsx(R,{variant:"secondary",className:"text-xs",children:v},v))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[e.jsx("span",{className:"text-xs text-gray-500",children:new Date(h.createdAt).toLocaleDateString()}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>a(`/content/${h.slug}`),children:"ÏΩòÌÖêÏ∏† Í¥ÄÎ¶¨"})]})]})]},h.id)),e.jsx(z,{className:"border-dashed border-2 hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>a("/content/cpt/new"),children:e.jsxs(B,{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-full mb-4",children:e.jsx(J,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"ÏÉà Í≤åÏãúÎ¨º Ïú†Ìòï Ï∂îÍ∞Ä"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Ï†úÌíà, Ìè¨Ìä∏Ìè¥Î¶¨Ïò§, Ïù¥Î≤§Ìä∏ Îì±",e.jsx("br",{}),"Îã§ÏñëÌïú ÏΩòÌÖêÏ∏† Ïú†ÌòïÏùÑ ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî"]})]})})]})]})},$a=[{value:"üìÑ",label:"Î¨∏ÏÑú"},{value:"üìù",label:"Í∏ÄÏì∞Í∏∞"},{value:"üìä",label:"Ï∞®Ìä∏"},{value:"üé®",label:"ÎîîÏûêÏù∏"},{value:"üõçÔ∏è",label:"ÏáºÌïë"},{value:"üì∏",label:"ÏÇ¨ÏßÑ"},{value:"üé¨",label:"ÎπÑÎîîÏò§"},{value:"üéµ",label:"ÏùåÏïÖ"},{value:"üìÖ",label:"Ï∫òÎ¶∞Îçî"},{value:"üë•",label:"ÏÇ¨Îûå"},{value:"üíº",label:"ÎπÑÏ¶àÎãàÏä§"},{value:"üè¢",label:"ÌöåÏÇ¨"},{value:"üéØ",label:"Î™©Ìëú"},{value:"üí°",label:"ÏïÑÏù¥ÎîîÏñ¥"},{value:"üîß",label:"ÎèÑÍµ¨"}],Cs=()=>{const a=ye(),{id:c}=Oe(),g=he(),j=!!c,[t,l]=f.useState({name:"",singularName:"",pluralName:"",slug:"",description:"",icon:"üìÑ",menuPosition:5,isPublic:!0,showInMenu:!0,showInAdminBar:!0,hasArchive:!0,supports:{title:!0,editor:!0,excerpt:!0,thumbnail:!0,customFields:!0,comments:!1,revisions:!0,author:!0,pageAttributes:!1},labels:{},taxonomies:[]}),[w,h]=f.useState([]),{data:v,isLoading:n}=ne({queryKey:["custom-post-type",c],queryFn:async()=>(await V.api.get(`/v1/platform/custom-post-types/${c}`)).data,enabled:j}),{data:o=[]}=ne({queryKey:["taxonomies"],queryFn:async()=>[{id:"category",name:"Ïπ¥ÌÖåÍ≥†Î¶¨",slug:"category"},{id:"tag",name:"ÌÉúÍ∑∏",slug:"tag"}]}),N=G({mutationFn:async i=>(await V.api.post("/v1/platform/custom-post-types",i)).data,onSuccess:()=>{M.success("ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†ÌòïÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§"),g.invalidateQueries({queryKey:["custom-post-types"]}),a("/cpt")},onError:()=>{M.error("ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),m=G({mutationFn:async i=>(await V.api.put(`/v1/platform/custom-post-types/${c}`,i)).data,onSuccess:()=>{M.success("ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†ÌòïÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),g.invalidateQueries({queryKey:["custom-post-types"]}),g.invalidateQueries({queryKey:["custom-post-type",c]})},onError:()=>{M.error("ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}});f.useEffect(()=>{v&&(l({name:v.name,singularName:v.singularName,pluralName:v.pluralName,slug:v.slug,description:v.description,icon:v.icon,menuPosition:v.menuPosition,isPublic:v.isPublic,showInMenu:v.showInMenu,showInAdminBar:v.showInAdminBar,hasArchive:v.hasArchive,supports:v.supports,labels:v.labels,taxonomies:v.taxonomies}),h(v.taxonomies||[]))},[v]);const D=i=>i.toLowerCase().replace(/[^a-z0-9Í∞Ä-Ìû£]+/g,"_").replace(/^_+|_+$/g,""),L=i=>{l(j?{...t,name:i}:{...t,name:i,singularName:i,pluralName:i,slug:D(i)})},E=()=>{const i={...t,taxonomies:w};j?m.mutate({id:c,...i}):N.mutate(i)};return j&&n?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>a("/content/cpt"),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"CPT Î™©Î°ù"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:j?"CPT ÏàòÏ†ï":"ÏÉà ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†Ìòï"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(z,{children:[e.jsxs(Y,{children:[e.jsx(W,{children:"Í∏∞Î≥∏ Ï†ïÎ≥¥"}),e.jsx(we,{children:"Í≤åÏãúÎ¨º Ïú†ÌòïÏùò Í∏∞Î≥∏ Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"icon",children:"ÏïÑÏù¥ÏΩò"}),e.jsxs(_,{value:t.icon,onValueChange:i=>l({...t,icon:i}),children:[e.jsx(K,{className:"mt-2",children:e.jsx(Q,{})}),e.jsx(H,{children:$a.map(i=>e.jsx(d,{value:i.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:i.value}),e.jsx("span",{children:i.label})]})},i.value))})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"menuPosition",children:"Î©îÎâ¥ ÏúÑÏπò"}),e.jsx(k,{id:"menuPosition",type:"number",value:t.menuPosition,onChange:i=>l({...t,menuPosition:parseInt(i.target.value)||5}),className:"mt-2"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ïà´ÏûêÍ∞Ä ÏûëÏùÑÏàòÎ°ù ÏÉÅÎã®Ïóê ÌëúÏãú"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Ïù¥Î¶Ñ"}),e.jsx(k,{id:"name",value:t.name,onChange:i=>L(i.target.value),placeholder:"Ïòà: Ï†úÌíà",className:"mt-2",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"singularName",children:"Îã®ÏàòÌòï Ïù¥Î¶Ñ"}),e.jsx(k,{id:"singularName",value:t.singularName,onChange:i=>l({...t,singularName:i.target.value}),placeholder:"Ïòà: Ï†úÌíà",className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"pluralName",children:"Î≥µÏàòÌòï Ïù¥Î¶Ñ"}),e.jsx(k,{id:"pluralName",value:t.pluralName,onChange:i=>l({...t,pluralName:i.target.value}),placeholder:"Ïòà: Ï†úÌíàÎì§",className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"slug",children:"Ïä¨Îü¨Í∑∏ (URL)"}),e.jsx(k,{id:"slug",value:t.slug,onChange:i=>l({...t,slug:i.target.value}),placeholder:"Ïòà: product",className:"mt-2",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URLÏóê ÏÇ¨Ïö©Îê† Í≥†Ïú† ÏãùÎ≥ÑÏûê"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),e.jsx(re,{id:"description",value:t.description,onChange:i=>l({...t,description:i.target.value}),placeholder:"Ïù¥ Í≤åÏãúÎ¨º Ïú†ÌòïÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:3,className:"mt-2"})]})]})]}),e.jsxs(z,{children:[e.jsxs(Y,{children:[e.jsx(W,{children:"Í∏∞Îä• ÏßÄÏõê"}),e.jsx(we,{children:"Ïù¥ Í≤åÏãúÎ¨º Ïú†ÌòïÏóêÏÑú ÏÇ¨Ïö©Ìï† Í∏∞Îä•ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.title,onCheckedChange:i=>l({...t,supports:{...t.supports,title:!!i}})}),e.jsx("span",{children:"Ï†úÎ™©"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.editor,onCheckedChange:i=>l({...t,supports:{...t.supports,editor:!!i}})}),e.jsx("span",{children:"ÏóêÎîîÌÑ∞"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.excerpt,onCheckedChange:i=>l({...t,supports:{...t.supports,excerpt:!!i}})}),e.jsx("span",{children:"ÏöîÏïΩ"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.thumbnail,onCheckedChange:i=>l({...t,supports:{...t.supports,thumbnail:!!i}})}),e.jsx("span",{children:"ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.customFields,onCheckedChange:i=>l({...t,supports:{...t.supports,customFields:!!i}})}),e.jsx("span",{children:"Ïª§Ïä§ÌÖÄ ÌïÑÎìú"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.comments,onCheckedChange:i=>l({...t,supports:{...t.supports,comments:!!i}})}),e.jsx("span",{children:"ÎåìÍ∏Ä"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.revisions,onCheckedChange:i=>l({...t,supports:{...t.supports,revisions:!!i}})}),e.jsx("span",{children:"Î¶¨ÎπÑÏ†Ñ"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.author,onCheckedChange:i=>l({...t,supports:{...t.supports,author:!!i}})}),e.jsx("span",{children:"ÏûëÏÑ±Ïûê"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:t.supports?.pageAttributes,onCheckedChange:i=>l({...t,supports:{...t.supports,pageAttributes:!!i}})}),e.jsx("span",{children:"ÌéòÏù¥ÏßÄ ÏÜçÏÑ±"})]})]})})]}),e.jsxs(z,{children:[e.jsxs(Y,{children:[e.jsx(W,{children:"Î∂ÑÎ•ò Ï≤¥Í≥Ñ"}),e.jsx(we,{children:"Ïù¥ Í≤åÏãúÎ¨º Ïú†ÌòïÏóêÏÑú ÏÇ¨Ïö©Ìï† Î∂ÑÎ•ò Ï≤¥Í≥ÑÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"space-y-2",children:o.map(i=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(ue,{checked:w.includes(i.id),onCheckedChange:s=>{h(s?[...w,i.id]:w.filter(S=>S!==i.id))}}),e.jsx("span",{children:i.name}),e.jsx(R,{variant:"outline",className:"text-xs",children:i.slug})]},i.id))}),e.jsxs(u,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>a("/content/taxonomies/new"),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏÉà Î∂ÑÎ•ò Ï≤¥Í≥Ñ Ï∂îÍ∞Ä"]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"Í≥µÍ∞ú ÏÑ§Ï†ï"})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(x,{htmlFor:"isPublic",children:"Í≥µÍ∞ú"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÌëúÏãú"})]}),e.jsx(ee,{id:"isPublic",checked:t.isPublic,onCheckedChange:i=>l({...t,isPublic:i})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(x,{htmlFor:"showInMenu",children:"Î©îÎâ¥Ïóê ÌëúÏãú"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Í¥ÄÎ¶¨Ïûê Î©îÎâ¥Ïóê ÌëúÏãú"})]}),e.jsx(ee,{id:"showInMenu",checked:t.showInMenu,onCheckedChange:i=>l({...t,showInMenu:i})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(x,{htmlFor:"showInAdminBar",children:"Í¥ÄÎ¶¨ ÎßâÎåÄÏóê ÌëúÏãú"}),e.jsx("p",{className:"text-xs text-gray-500",children:"ÏÉÅÎã® Í¥ÄÎ¶¨ ÎßâÎåÄÏóê ÌëúÏãú"})]}),e.jsx(ee,{id:"showInAdminBar",checked:t.showInAdminBar,onCheckedChange:i=>l({...t,showInAdminBar:i})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(x,{htmlFor:"hasArchive",children:"ÏïÑÏπ¥Ïù¥Î∏å ÌéòÏù¥ÏßÄ"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Î™©Î°ù ÌéòÏù¥ÏßÄ ÏÉùÏÑ±"})]}),e.jsx(ee,{id:"hasArchive",checked:t.hasArchive,onCheckedChange:i=>l({...t,hasArchive:i})})]})]})]}),e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"ÏûëÏóÖ"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs(u,{onClick:E,className:"w-full",disabled:!t.name||!t.slug||N.isPending||m.isPending,children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),j?"CPT ÏàòÏ†ï":"CPT ÏÉùÏÑ±"]}),j&&e.jsxs(u,{variant:"outline",className:"w-full",onClick:()=>a(`/content/cpt/${c}/fields`),children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Ïª§Ïä§ÌÖÄ ÌïÑÎìú Í¥ÄÎ¶¨"]})]})]}),e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"ÎØ∏Î¶¨Î≥¥Í∏∞"})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsx("span",{className:"font-medium",children:t.pluralName||"ÏÉà Í≤åÏãúÎ¨º Ïú†Ìòï"})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:["Ïä¨Îü¨Í∑∏: ",e.jsx("code",{className:"bg-gray-100 px-1",children:t.slug||"slug"})]}),e.jsxs("p",{children:["URL: ",e.jsxs("code",{className:"bg-gray-100 px-1",children:["/content/",t.slug||"slug"]})]})]})]})})]})]})]})]})},We=[{value:"text",label:"ÌÖçÏä§Ìä∏",icon:Ae},{value:"textarea",label:"ÌÖçÏä§Ìä∏ ÏòÅÏó≠",icon:ve},{value:"number",label:"Ïà´Ïûê",icon:cs},{value:"select",label:"ÏÑ†ÌÉù",icon:Ue},{value:"checkbox",label:"Ï≤¥ÌÅ¨Î∞ïÏä§",icon:es},{value:"radio",label:"ÎùºÎîîÏò§",icon:Ps},{value:"date",label:"ÎÇ†Ïßú",icon:Re},{value:"image",label:"Ïù¥ÎØ∏ÏßÄ",icon:be},{value:"file",label:"ÌååÏùº",icon:ve},{value:"wysiwyg",label:"ÏóêÎîîÌÑ∞",icon:ve},{value:"color",label:"ÏÉâÏÉÅ",icon:Is},{value:"url",label:"URL",icon:Ds},{value:"email",label:"Ïù¥Î©îÏùº",icon:_e},{value:"repeater",label:"Î∞òÎ≥µ ÌïÑÎìú",icon:je},{value:"relationship",label:"Í¥ÄÍ≥Ñ",icon:Ve}],La=()=>{const a=ye(),{cptId:c}=Oe(),g=he(),[j,t]=f.useState([]),[l,w]=f.useState(null),[h,v]=f.useState(null),[n,o]=f.useState(!1),[N,m]=f.useState(!1),[D,L]=f.useState([]),[E,i]=f.useState({name:"",key:"",description:"",position:"normal",order:0}),[s,S]=f.useState({name:"",key:"",type:"text",label:"",description:"",required:!1}),{data:A,isLoading:T}=ne({queryKey:["custom-post-type",c],queryFn:async()=>(await V.api.get(`/custom-post-types/${c}`)).data}),Z=G({mutationFn:async p=>(await V.api.put(`/custom-post-types/${c}/field-groups`,{fieldGroups:p})).data,onSuccess:()=>{M.success("Ïª§Ïä§ÌÖÄ ÌïÑÎìúÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§"),g.invalidateQueries({queryKey:["custom-post-type",c]})},onError:()=>{M.error("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}});f.useEffect(()=>{A?.fieldGroups&&(t(A.fieldGroups),L(A.fieldGroups.map(p=>p.id)))},[A]);const P=p=>p.toLowerCase().replace(/[^a-z0-9Í∞Ä-Ìû£]+/g,"_").replace(/^_+|_+$/g,""),se=p=>{L(F=>F.includes(p)?F.filter(O=>O!==p):[...F,p])},C=()=>{w(null),i({name:"",key:"",description:"",position:"normal",order:j.length}),o(!0)},q=p=>{w(p),i({name:p.name,key:p.key,description:p.description||"",position:p.position,order:p.order}),o(!0)},r=()=>{const p={id:l?.id||`group-${Date.now()}`,...E,fields:l?.fields||[],rules:l?.rules||{}};t(l?j.map(F=>F.id===l.id?p:F):[...j,p]),o(!1)},I=p=>{confirm("Ï†ïÎßê Ïù¥ ÌïÑÎìú Í∑∏Î£πÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&t(j.filter(F=>F.id!==p))},U=()=>{v(null),S({name:"",key:"",type:"text",label:"",description:"",required:!1}),m(!0)},y=(p,F)=>{v({...p,tempId:F}),S({name:p.name,key:p.key,type:p.type,label:p.label||"",description:p.description||"",required:p.required||!1,placeholder:p.placeholder,min:p.min,max:p.max,maxLength:p.maxLength,options:p.options}),m(!0)},$=()=>{const p=h?.tempId||j[0]?.id;if(!p)return;const F={id:h?.id||`field-${Date.now()}`,name:s.name,key:s.key,type:s.type,label:s.label,description:s.description,required:s.required,...s.placeholder&&{placeholder:s.placeholder},...s.min!==void 0&&{min:s.min},...s.max!==void 0&&{max:s.max},...s.maxLength!==void 0&&{maxLength:s.maxLength},...s.options&&{options:s.options}};t(j.map(O=>O.id===p?h?.id?{...O,fields:O.fields.map(ie=>ie.id===h.id?F:ie)}:{...O,fields:[...O.fields,F]}:O)),m(!1)},b=(p,F)=>{t(j.map(O=>O.id===F?{...O,fields:O.fields.filter(ie=>ie.id!==p)}:O))},me=()=>{Z.mutate(j)},Ne=p=>{const O=We.find(ie=>ie.value===p)?.icon||Ae;return e.jsx(O,{className:"w-4 h-4"})};return T?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>a("/content/cpt"),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"CPT Î™©Î°ù"]}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[A?.name," - Ïª§Ïä§ÌÖÄ ÌïÑÎìú"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:j.length===0?e.jsx(z,{children:e.jsxs(B,{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"ÌïÑÎìú Í∑∏Î£πÏù¥ ÏóÜÏäµÎãàÎã§"}),e.jsxs(u,{onClick:C,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Ï≤´ ÌïÑÎìú Í∑∏Î£π ÎßåÎì§Í∏∞"]})]})}):j.map(p=>e.jsxs(z,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>se(p.id),className:"flex items-center gap-2 text-left w-full",children:[D.includes(p.id)?e.jsx(ns,{className:"w-4 h-4"}):e.jsx(is,{className:"w-4 h-4"}),e.jsx(W,{className:"text-lg",children:p.name})]}),p.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-6",children:p.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",children:p.position}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>q(p),children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>I(p.id),children:e.jsx(ce,{className:"w-4 h-4 text-red-500"})})]})]})}),D.includes(p.id)&&e.jsx(B,{children:e.jsxs("div",{className:"space-y-2",children:[p.fields.map(F=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[e.jsx(rs,{className:"w-5 h-5 text-gray-400 cursor-move"}),e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[Ne(F.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:F.label}),e.jsxs("div",{className:"text-sm text-gray-500",children:[F.key," ¬∑ ",We.find(O=>O.value===F.type)?.label,F.required&&" ¬∑ ÌïÑÏàò"]})]})]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>y(F,p.id),children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>b(F.id,p.id),children:e.jsx(ce,{className:"w-4 h-4 text-red-500"})})]},F.id)),e.jsxs(u,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>U(),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Ï∂îÍ∞Ä"]})]})})]},p.id))}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"ÏûëÏóÖ"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs(u,{onClick:me,className:"w-full",disabled:Z.isPending,children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Ï†ÄÏû•"]}),e.jsxs(u,{variant:"outline",className:"w-full",onClick:C,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏÉà ÌïÑÎìú Í∑∏Î£π"]})]})]}),e.jsxs(z,{children:[e.jsxs(Y,{children:[e.jsx(W,{children:"ÌïÑÎìú Ïú†Ìòï"}),e.jsx(we,{children:"ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÌïÑÎìú Ïú†ÌòïÎì§"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-2",children:We.slice(0,8).map(p=>{const F=p.icon;return e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(F,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{children:p.label})]},p.value)})})})]})]})]}),e.jsx($e,{open:n,onOpenChange:o,children:e.jsxs(Le,{children:[e.jsxs(Me,{children:[e.jsx(Ee,{children:l?"ÌïÑÎìú Í∑∏Î£π ÏàòÏ†ï":"ÏÉà ÌïÑÎìú Í∑∏Î£π"}),e.jsx(as,{children:"Í¥ÄÎ†®Îêú ÌïÑÎìúÎì§ÏùÑ Í∑∏Î£πÏúºÎ°ú Î¨∂Ïñ¥ Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"groupName",children:"Í∑∏Î£π Ïù¥Î¶Ñ"}),e.jsx(k,{id:"groupName",value:E.name,onChange:p=>i({...E,name:p.target.value,key:P(p.target.value)}),placeholder:"Ïòà: Ï†úÌíà Ï†ïÎ≥¥"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"groupKey",children:"Í∑∏Î£π ÌÇ§"}),e.jsx(k,{id:"groupKey",value:E.key,onChange:p=>i({...E,key:p.target.value}),placeholder:"Ïòà: product_info"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"groupDescription",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),e.jsx(re,{id:"groupDescription",value:E.description,onChange:p=>i({...E,description:p.target.value}),placeholder:"Ïù¥ ÌïÑÎìú Í∑∏Î£πÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:2})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"groupPosition",children:"ÏúÑÏπò"}),e.jsxs(_,{value:E.position,onValueChange:p=>i({...E,position:p}),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"normal",children:"ÏùºÎ∞ò"}),e.jsx(d,{value:"side",children:"ÏÇ¨Ïù¥ÎìúÎ∞î"}),e.jsx(d,{value:"advanced",children:"Í≥†Í∏â"})]})]})]})]}),e.jsxs(ts,{children:[e.jsx(u,{variant:"outline",onClick:()=>o(!1),children:"Ï∑®ÏÜå"}),e.jsx(u,{onClick:r,children:"Ï†ÄÏû•"})]})]})}),e.jsx($e,{open:N,onOpenChange:m,children:e.jsxs(Le,{className:"max-w-2xl",children:[e.jsxs(Me,{children:[e.jsx(Ee,{children:h?"ÌïÑÎìú ÏàòÏ†ï":"ÏÉà ÌïÑÎìú"}),e.jsx(as,{children:"Ïª§Ïä§ÌÖÄ ÌïÑÎìúÎ•º ÏÉùÏÑ±ÌïòÍ±∞ÎÇò ÏàòÏ†ïÌï©ÎãàÎã§"})]}),e.jsxs("div",{className:"space-y-4 py-4 max-h-[500px] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldName",children:"ÌïÑÎìú Ïù¥Î¶Ñ"}),e.jsx(k,{id:"fieldName",value:s.name,onChange:p=>S({...s,name:p.target.value,key:P(p.target.value),label:p.target.value}),placeholder:"Ïòà: Í∞ÄÍ≤©"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldKey",children:"ÌïÑÎìú ÌÇ§"}),e.jsx(k,{id:"fieldKey",value:s.key,onChange:p=>S({...s,key:p.target.value}),placeholder:"Ïòà: price"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldType",children:"ÌïÑÎìú Ïú†Ìòï"}),e.jsxs(_,{value:s.type,onValueChange:p=>S({...s,type:p}),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsx(H,{children:We.map(p=>{const F=p.icon;return e.jsx(d,{value:p.value,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),p.label]})},p.value)})})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldLabel",children:"Î†àÏù¥Î∏î"}),e.jsx(k,{id:"fieldLabel",value:s.label,onChange:p=>S({...s,label:p.target.value}),placeholder:"Ìé∏Ïßë ÌôîÎ©¥Ïóê ÌëúÏãúÎê† Î†àÏù¥Î∏î"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldDescription",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),e.jsx(re,{id:"fieldDescription",value:s.description,onChange:p=>S({...s,description:p.target.value}),placeholder:"ÌïÑÎìú ÏÇ¨Ïö© Î∞©Î≤ïÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:2})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldPlaceholder",children:"ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî (ÏÑ†ÌÉù)"}),e.jsx(k,{id:"fieldPlaceholder",value:s.placeholder,onChange:p=>S({...s,placeholder:p.target.value}),placeholder:"ÏûÖÎ†• ÌïÑÎìúÏóê ÌëúÏãúÎê† ÌûåÌä∏ ÌÖçÏä§Ìä∏"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{id:"fieldRequired",checked:s.required,onCheckedChange:p=>S({...s,required:p})}),e.jsx(x,{htmlFor:"fieldRequired",children:"ÌïÑÏàò ÌïÑÎìú"})]}),s.type==="number"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldMin",children:"ÏµúÏÜåÍ∞í"}),e.jsx(k,{id:"fieldMin",type:"number",value:s.min,onChange:p=>S({...s,min:parseInt(p.target.value)})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldMax",children:"ÏµúÎåÄÍ∞í"}),e.jsx(k,{id:"fieldMax",type:"number",value:s.max,onChange:p=>S({...s,max:parseInt(p.target.value)})})]})]}),(s.type==="text"||s.type==="textarea")&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"fieldMaxLength",children:"ÏµúÎåÄ Í∏∏Ïù¥"}),e.jsx(k,{id:"fieldMaxLength",type:"number",value:s.maxLength,onChange:p=>S({...s,maxLength:parseInt(p.target.value)})})]}),(s.type==="select"||s.type==="checkbox"||s.type==="radio")&&e.jsxs("div",{children:[e.jsx(x,{children:"ÏòµÏÖò"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[(s.options||[]).map((p,F)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{placeholder:"Î†àÏù¥Î∏î",value:p.label,onChange:O=>{const ie=[...s.options||[]];ie[F]={...p,label:O.target.value},S({...s,options:ie})}}),e.jsx(k,{placeholder:"Í∞í",value:p.value,onChange:O=>{const ie=[...s.options||[]];ie[F]={...p,value:O.target.value},S({...s,options:ie})}}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>{const O=s.options?.filter((ie,_s)=>_s!==F);S({...s,options:O})},children:e.jsx(ce,{className:"w-4 h-4"})})]},F)),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{const p=[...s.options||[],{label:"",value:""}];S({...s,options:p})},children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏòµÏÖò Ï∂îÍ∞Ä"]})]})]})]}),e.jsxs(ts,{children:[e.jsx(u,{variant:"outline",onClick:()=>m(!1),children:"Ï∑®ÏÜå"}),e.jsx(u,{onClick:$,children:"Ï†ÄÏû•"})]})]})})]})},Ma=()=>{const a=ye(),{slug:c}=Oe(),g=he(),[j,t]=f.useState([]),[l,w]=f.useState(""),[h,v]=f.useState("all"),[n,o]=f.useState(1),N=20,{data:m}=ne({queryKey:["custom-post-types"],queryFn:async()=>(await V.api.get("/custom-post-types")).data}),D=m?.find(P=>P.slug===c),{data:L,isLoading:E}=ne({queryKey:["posts",c,{status:h,search:l,page:n,limit:N}],queryFn:async()=>{const P=new URLSearchParams({post_type:c||"",page:n.toString(),limit:N.toString()});return h!=="all"&&P.append("status",h),l&&P.append("search",l),(await V.api.get(`/posts?${P}`)).data},enabled:!!c}),i=G({mutationFn:async P=>V.api.delete(`/posts/${P}`),onSuccess:()=>{g.invalidateQueries({queryKey:["posts",c]}),M.success("ÏΩòÌÖêÏ∏†Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),s=P=>{confirm(`Ï†ïÎßê "${P.title}"ÏùÑ(Î•º) ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)&&i.mutate(P.id)},S=P=>{t(P?L?.posts?.map(se=>se.id)||[]:[])},A=P=>{t(se=>se.includes(P)?se.filter(C=>C!==P):[...se,P])},T=P=>{switch(P){case"published":return"success";case"draft":return"secondary";case"scheduled":return"warning";case"trash":return"destructive";default:return"default"}},Z=P=>{switch(P){case"published":return"Í≥µÍ∞úÎê®";case"draft":return"ÏûÑÏãúÏ†ÄÏû•";case"scheduled":return"ÏòàÏïΩÎê®";case"trash":return"Ìú¥ÏßÄÌÜµ";default:return P}};return c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:D?.pluralName||c}),D?.description&&e.jsx("p",{className:"text-gray-600 mt-1",children:D.description})]}),e.jsxs(u,{onClick:()=>a(`/content/${c}/new`),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏÉà ",D?.singularName||"Ìï≠Î™©"," Ï∂îÍ∞Ä"]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(k,{placeholder:"Ï†úÎ™©, ÎÇ¥Ïö©ÏúºÎ°ú Í≤ÄÏÉâ...",value:l,onChange:P=>w(P.target.value),className:"pl-10"})]}),e.jsxs(_,{value:h,onValueChange:P=>v(P),children:[e.jsxs(K,{className:"w-[180px]",children:[e.jsx(Ts,{className:"w-4 h-4 mr-2"}),e.jsx(Q,{placeholder:"ÏÉÅÌÉú ÌïÑÌÑ∞"})]}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Î™®Îì† ÏÉÅÌÉú"}),e.jsx(d,{value:"published",children:"Í≥µÍ∞úÎê®"}),e.jsx(d,{value:"draft",children:"ÏûÑÏãúÏ†ÄÏû•"}),e.jsx(d,{value:"scheduled",children:"ÏòàÏïΩÎê®"}),e.jsx(d,{value:"trash",children:"Ìú¥ÏßÄÌÜµ"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[j.length>0&&e.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[j.length,"Í∞ú ÏÑ†ÌÉùÎê®"]}),e.jsx(u,{variant:"outline",size:"sm",className:"ml-4",onClick:()=>{},children:"ÏùºÍ¥Ñ ÏûëÏóÖ"})]}),E?e.jsx("div",{className:"p-8 text-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):e.jsxs(ms,{children:[e.jsx(us,{children:e.jsxs(Qe,{children:[e.jsx(oe,{className:"w-12",children:e.jsx(ue,{checked:j.length===L?.posts?.length&&L?.posts?.length>0,onCheckedChange:S})}),e.jsx(oe,{children:"Ï†úÎ™©"}),e.jsx(oe,{children:"ÏûëÏÑ±Ïûê"}),e.jsx(oe,{children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(oe,{children:"ÏÉÅÌÉú"}),e.jsx(oe,{children:"ÎÇ†Ïßú"}),e.jsx(oe,{className:"text-right",children:"ÏûëÏóÖ"})]})}),e.jsx(js,{children:L?.posts?.map(P=>e.jsxs(Qe,{children:[e.jsx(xe,{children:e.jsx(ue,{checked:j.includes(P.id),onCheckedChange:()=>A(P.id)})}),e.jsx(xe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:P.title}),P.excerpt&&e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:P.excerpt})]})}),e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:P.author?.name})]})}),e.jsx(xe,{children:P.categories&&P.categories.length>0?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Hs,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:P.categories[0].name})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(xe,{children:e.jsx(R,{variant:T(P.status),children:Z(P.status)})}),e.jsx(xe,{children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(Re,{className:"w-4 h-4"}),new Date(P.updatedAt).toLocaleDateString()]})}),e.jsx(xe,{className:"text-right",children:e.jsxs(Pe,{children:[e.jsx(Ie,{children:e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(ke,{className:"h-4 w-4"})})}),e.jsxs(De,{align:"end",children:[e.jsxs(X,{onClick:()=>a(`/content/${c}/${P.id}/edit`),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),e.jsxs(X,{onClick:()=>window.open(`/${c}/${P.slug}`,"_blank"),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Î≥¥Í∏∞"]}),e.jsxs(X,{onClick:()=>{},children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),e.jsx(Te,{}),e.jsxs(X,{onClick:()=>s(P),className:"text-red-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})})]},P.id))})]}),L?.posts?.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsxs("p",{children:["ÏïÑÏßÅ ",D?.pluralName||"ÏΩòÌÖêÏ∏†","Í∞Ä ÏóÜÏäµÎãàÎã§."]}),e.jsxs(u,{variant:"outline",className:"mt-4",onClick:()=>a(`/content/${c}/new`),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Ï≤´ ",D?.singularName||"Ìï≠Î™©"," ÎßåÎì§Í∏∞"]})]}),L?.totalPages>1&&e.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["Ï¥ù ",L.total,"Í∞ú Ï§ë ",(n-1)*N+1,"-",Math.min(n*N,L.total),"Í∞ú ÌëúÏãú"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>o(n-1),disabled:n===1,children:"Ïù¥Ï†Ñ"}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>o(n+1),disabled:n===L.totalPages,children:"Îã§Ïùå"})]})]})]})]}):e.jsx("div",{children:"ÏΩòÌÖêÏ∏† Ïú†ÌòïÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§"})},Ea=()=>{const a=ye(),c=he(),{data:g=[],isLoading:j}=ne({queryKey:["acf-field-groups"],queryFn:async()=>(await V.api.get("/v1/acf/field-groups")).data}),t=G({mutationFn:async n=>V.api.delete(`/v1/acf/field-groups/${n}`),onSuccess:()=>{c.invalidateQueries({queryKey:["acf-field-groups"]}),M.success("ÌïÑÎìú Í∑∏Î£πÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),l=G({mutationFn:async n=>V.api.post(`/v1/acf/field-groups/${n}/duplicate`),onSuccess:()=>{c.invalidateQueries({queryKey:["acf-field-groups"]}),M.success("ÌïÑÎìú Í∑∏Î£πÏù¥ Î≥µÏ†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("Î≥µÏ†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),w=n=>{confirm(`Ï†ïÎßê "${n.name}" ÌïÑÎìú Í∑∏Î£πÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)&&t.mutate(n.id)},h=n=>{if(!n.location||n.location.length===0)return"ÏúÑÏπò ÏÑ§Ï†ï ÏóÜÏùå";const o=n.location[0]?.rules[0];return o?`${{post_type:"Í≤åÏãúÎ¨º Ïú†Ìòï",page_template:"ÌéòÏù¥ÏßÄ ÌÖúÌîåÎ¶ø",post_status:"Í≤åÏãúÎ¨º ÏÉÅÌÉú",post_category:"Ïπ¥ÌÖåÍ≥†Î¶¨",taxonomy:"Î∂ÑÎ•ò",user_role:"ÏÇ¨Ïö©Ïûê Ïó≠Ìï†"}[o.param]||o.param} ${o.operator} ${o.value}`:"ÏúÑÏπò ÏÑ§Ï†ï ÏóÜÏùå"},v=n=>n.fields.reduce((o,N)=>N.type==="repeater"||N.type==="group"||N.type==="flexible_content"?o+1+(N.subFields?.length||0):o+1,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Advanced Custom Fields"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Í≥†Í∏â Ïª§Ïä§ÌÖÄ ÌïÑÎìú Í∑∏Î£πÏùÑ ÏÉùÏÑ±ÌïòÍ≥† Í¥ÄÎ¶¨Ìï©ÎãàÎã§"})]}),e.jsxs(u,{onClick:()=>a("/content/acf/new"),children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏÉà ÌïÑÎìú Í∑∏Î£π"]})]}),j?e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[g.map(n=>e.jsxs(z,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(W,{className:"text-lg",children:n.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:h(n)})]}),e.jsxs(Pe,{children:[e.jsx(Ie,{children:e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(ke,{className:"w-4 h-4"})})}),e.jsxs(De,{align:"end",children:[e.jsxs(X,{onClick:()=>a(`/content/acf/${n.id}/edit`),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),e.jsxs(X,{onClick:()=>l.mutate(n.id),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),e.jsx(Te,{}),e.jsxs(X,{onClick:()=>w(n),className:"text-red-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})]})}),e.jsxs(B,{children:[n.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:n.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[v(n),"Í∞ú ÌïÑÎìú"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:n.active!==!1?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"ÌôúÏÑ±"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"ÎπÑÌôúÏÑ±"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[n.style==="seamless"?"Ïã¨Î¶¨Ïä§":"Í∏∞Î≥∏"," Ïä§ÌÉÄÏùº"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.jsx(R,{variant:"outline",className:"text-xs",children:n.position||"normal"}),n.labelPlacement&&e.jsxs(R,{variant:"outline",className:"text-xs",children:["Î†àÏù¥Î∏î ",n.labelPlacement==="top"?"ÏÉÅÎã®":"ÏôºÏ™Ω"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[e.jsx("span",{className:"text-xs text-gray-500",children:n.updatedAt?new Date(n.updatedAt).toLocaleDateString():""}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>a(`/content/acf/${n.id}/edit`),children:[e.jsx(Fs,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Í¥ÄÎ¶¨"]})]})]})]},n.id)),e.jsx(z,{className:"border-dashed border-2 hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>a("/content/acf/new"),children:e.jsxs(B,{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-full mb-4",children:e.jsx(J,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"ÏÉà ÌïÑÎìú Í∑∏Î£π Ï∂îÍ∞Ä"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Í≥†Í∏â Ïª§Ïä§ÌÖÄ ÌïÑÎìúÎ°ú",e.jsx("br",{}),"Îçî Í∞ïÎ†•Ìïú ÏΩòÌÖêÏ∏†Î•º ÎßåÎìúÏÑ∏Ïöî"]})]})})]})]})},Aa=[{value:"text",label:"ÌÖçÏä§Ìä∏",icon:Ae,category:"basic",description:"Îã®Ïùº Ìñâ ÌÖçÏä§Ìä∏ ÏûÖÎ†•"},{value:"textarea",label:"ÌÖçÏä§Ìä∏ ÏòÅÏó≠",icon:ve,category:"basic",description:"Ïó¨Îü¨ Ìñâ ÌÖçÏä§Ìä∏ ÏûÖÎ†•"},{value:"number",label:"Ïà´Ïûê",icon:cs,category:"basic",description:"Ïà´Ïûê ÏûÖÎ†•"},{value:"email",label:"Ïù¥Î©îÏùº",icon:_e,category:"basic",description:"Ïù¥Î©îÏùº Ï£ºÏÜå ÏûÖÎ†•"},{value:"url",label:"URL",icon:Ds,category:"basic",description:"ÏõπÏÇ¨Ïù¥Ìä∏ Ï£ºÏÜå ÏûÖÎ†•"},{value:"wysiwyg",label:"ÏóêÎîîÌÑ∞",icon:ve,category:"content",description:"WYSIWYG Î¶¨Ïπò ÌÖçÏä§Ìä∏ ÏóêÎîîÌÑ∞"},{value:"image",label:"Ïù¥ÎØ∏ÏßÄ",icon:be,category:"content",description:"Îã®Ïùº Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú"},{value:"gallery",label:"Í∞§Îü¨Î¶¨",icon:Os,category:"content",description:"Ïó¨Îü¨ Ïù¥ÎØ∏ÏßÄ Í∞§Îü¨Î¶¨"},{value:"file",label:"ÌååÏùº",icon:ve,category:"content",description:"ÌååÏùº ÏóÖÎ°úÎìú"},{value:"select",label:"ÏÑ†ÌÉù",icon:Ue,category:"choice",description:"ÎìúÎ°≠Îã§Ïö¥ ÏÑ†ÌÉù"},{value:"checkbox",label:"Ï≤¥ÌÅ¨Î∞ïÏä§",icon:es,category:"choice",description:"Îã§Ï§ë ÏÑ†ÌÉù Ï≤¥ÌÅ¨Î∞ïÏä§"},{value:"radio",label:"ÎùºÎîîÏò§",icon:Ps,category:"choice",description:"Îã®Ïùº ÏÑ†ÌÉù ÎùºÎîîÏò§ Î≤ÑÌäº"},{value:"button_group",label:"Î≤ÑÌäº Í∑∏Î£π",icon:Us,category:"choice",description:"Î≤ÑÌäº ÌòïÌÉúÏùò ÏÑ†ÌÉù"},{value:"true_false",label:"Ï∞∏/Í±∞Ïßì",icon:es,category:"choice",description:"ÌÜ†Í∏Ä Ïä§ÏúÑÏπò"},{value:"relationship",label:"Í¥ÄÍ≥Ñ",icon:Ys,category:"relational",description:"Í≤åÏãúÎ¨º Í∞Ñ Í¥ÄÍ≥Ñ ÏÑ§Ï†ï"},{value:"post_object",label:"Í≤åÏãúÎ¨º ÏÑ†ÌÉù",icon:Ve,category:"relational",description:"Í≤åÏãúÎ¨º ÏÑ†ÌÉùÍ∏∞"},{value:"taxonomy",label:"Î∂ÑÎ•ò",icon:Ve,category:"relational",description:"Ïπ¥ÌÖåÍ≥†Î¶¨/ÌÉúÍ∑∏ ÏÑ†ÌÉù"},{value:"user",label:"ÏÇ¨Ïö©Ïûê",icon:ss,category:"relational",description:"ÏÇ¨Ïö©Ïûê ÏÑ†ÌÉù"},{value:"repeater",label:"Î∞òÎ≥µ ÌïÑÎìú",icon:je,category:"layout",description:"Î∞òÎ≥µ Í∞ÄÎä•Ìïú ÌïÑÎìú Í∑∏Î£π"},{value:"flexible_content",label:"Ïú†Ïó∞Ìïú ÏΩòÌÖêÏ∏†",icon:$s,category:"layout",description:"Ïú†Ïó∞Ìïú Î†àÏù¥ÏïÑÏõÉ Î∏îÎ°ù"},{value:"group",label:"Í∑∏Î£π",icon:ls,category:"layout",description:"ÌïÑÎìú Í∑∏Î£πÌôî"},{value:"clone",label:"Î≥µÏ†ú",icon:je,category:"layout",description:"Îã§Î•∏ ÌïÑÎìú Î≥µÏ†ú"},{value:"date_picker",label:"ÎÇ†Ïßú ÏÑ†ÌÉù",icon:Re,category:"advanced",description:"ÎÇ†Ïßú ÏÑ†ÌÉùÍ∏∞"},{value:"date_time_picker",label:"ÎÇ†Ïßú/ÏãúÍ∞Ñ",icon:Re,category:"advanced",description:"ÎÇ†ÏßúÏôÄ ÏãúÍ∞Ñ ÏÑ†ÌÉù"},{value:"color_picker",label:"ÏÉâÏÉÅ",icon:Is,category:"advanced",description:"ÏÉâÏÉÅ ÏÑ†ÌÉùÍ∏∞"},{value:"google_map",label:"Íµ¨Í∏Ä ÏßÄÎèÑ",icon:Ls,category:"advanced",description:"ÏúÑÏπò ÏÑ†ÌÉù"}],qa=({onSelect:a,selectedType:c})=>{const g=[{key:"basic",label:"Í∏∞Î≥∏ ÌïÑÎìú"},{key:"content",label:"ÏΩòÌÖêÏ∏† ÌïÑÎìú"},{key:"choice",label:"ÏÑ†ÌÉù ÌïÑÎìú"},{key:"relational",label:"Í¥ÄÍ≥Ñ ÌïÑÎìú"},{key:"layout",label:"Î†àÏù¥ÏïÑÏõÉ ÌïÑÎìú"},{key:"advanced",label:"Í≥†Í∏â ÌïÑÎìú"}];return e.jsx("div",{className:"space-y-6",children:g.map(j=>{const t=Aa.filter(l=>l.category===j.key);return e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:j.label}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(l=>{const w=l.icon,h=c===l.value;return e.jsx(u,{variant:h?"default":"outline",size:"sm",className:"justify-start h-auto py-3 px-3",onClick:()=>a(l.value),children:e.jsxs("div",{className:"flex items-start gap-3 w-full",children:[e.jsx(w,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:l.label}),e.jsx("div",{className:"text-xs text-gray-500 font-normal",children:l.description})]})]})},l.value)})})]},j.key)})})},Vs=({field:a,onChange:c})=>{const g=t=>t.toLowerCase().replace(/[^a-z0-9Í∞Ä-Ìû£]+/g,"_").replace(/^_+|_+$/g,""),j=t=>{c({...a,name:t,key:g(t),label:t})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-name`,children:"ÌïÑÎìú Ïù¥Î¶Ñ"}),e.jsx(k,{id:`${a.id}-name`,value:a.name,onChange:t=>j(t.target.value),placeholder:"Ïòà: Í∞ÄÍ≤©"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-key`,children:"ÌïÑÎìú ÌÇ§"}),e.jsx(k,{id:`${a.id}-key`,value:a.key,onChange:t=>c({...a,key:t.target.value}),placeholder:"Ïòà: price"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-label`,children:"Î†àÏù¥Î∏î"}),e.jsx(k,{id:`${a.id}-label`,value:a.label,onChange:t=>c({...a,label:t.target.value}),placeholder:"Ìé∏Ïßë ÌôîÎ©¥Ïóê ÌëúÏãúÎê† Î†àÏù¥Î∏î"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-description`,children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),e.jsx(re,{id:`${a.id}-description`,value:a.description||"",onChange:t=>c({...a,description:t.target.value}),placeholder:"ÌïÑÎìú ÏÇ¨Ïö© Î∞©Î≤ïÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:2})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-placeholder`,children:"ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî (ÏÑ†ÌÉù)"}),e.jsx(k,{id:`${a.id}-placeholder`,value:a.placeholder||"",onChange:t=>c({...a,placeholder:t.target.value}),placeholder:"ÏûÖÎ†• ÌïÑÎìúÏóê ÌëúÏãúÎê† ÌûåÌä∏ ÌÖçÏä§Ìä∏"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{id:`${a.id}-required`,checked:a.required||!1,onCheckedChange:t=>c({...a,required:t})}),e.jsx(x,{htmlFor:`${a.id}-required`,children:"ÌïÑÏàò ÌïÑÎìú"})]}),a.type==="number"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-min`,children:"ÏµúÏÜåÍ∞í"}),e.jsx(k,{id:`${a.id}-min`,type:"number",value:a.min||"",onChange:t=>c({...a,min:t.target.value?parseInt(t.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-max`,children:"ÏµúÎåÄÍ∞í"}),e.jsx(k,{id:`${a.id}-max`,type:"number",value:a.max||"",onChange:t=>c({...a,max:t.target.value?parseInt(t.target.value):void 0})})]})]}),(a.type==="text"||a.type==="textarea")&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-maxLength`,children:"ÏµúÎåÄ Í∏∏Ïù¥"}),e.jsx(k,{id:`${a.id}-maxLength`,type:"number",value:a.maxLength||"",onChange:t=>c({...a,maxLength:t.target.value?parseInt(t.target.value):void 0})})]}),(a.type==="select"||a.type==="checkbox"||a.type==="radio")&&e.jsxs("div",{children:[e.jsx(x,{children:"ÏòµÏÖò"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[(a.options||[]).map((t,l)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{placeholder:"Î†àÏù¥Î∏î",value:t.label,onChange:w=>{const h=[...a.options||[]];h[l]={...t,label:w.target.value},c({...a,options:h})}}),e.jsx(k,{placeholder:"Í∞í",value:t.value,onChange:w=>{const h=[...a.options||[]];h[l]={...t,value:w.target.value},c({...a,options:h})}}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>{const w=a.options?.filter((h,v)=>v!==l);c({...a,options:w})},children:e.jsx(ce,{className:"w-4 h-4"})})]},l)),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>{const t=[...a.options||[],{label:"",value:""}];c({...a,options:t})},children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏòµÏÖò Ï∂îÍ∞Ä"]})]})]}),a.type==="image"&&e.jsxs("div",{children:[e.jsx(x,{children:"Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï"}),e.jsx("div",{className:"space-y-2 mt-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-minWidth`,children:"ÏµúÏÜå ÎÑàÎπÑ (px)"}),e.jsx(k,{id:`${a.id}-minWidth`,type:"number",value:a.minWidth||"",onChange:t=>c({...a,minWidth:t.target.value?parseInt(t.target.value):void 0})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-minHeight`,children:"ÏµúÏÜå ÎÜíÏù¥ (px)"}),e.jsx(k,{id:`${a.id}-minHeight`,type:"number",value:a.minHeight||"",onChange:t=>c({...a,minHeight:t.target.value?parseInt(t.target.value):void 0})})]})]})})]}),a.type==="wysiwyg"&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-rows`,children:"ÏóêÎîîÌÑ∞ Ìñâ Ïàò"}),e.jsx(k,{id:`${a.id}-rows`,type:"number",value:a.rows||10,onChange:t=>c({...a,rows:t.target.value?parseInt(t.target.value):10})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:`${a.id}-defaultValue`,children:"Í∏∞Î≥∏Í∞í (ÏÑ†ÌÉù)"}),a.type==="textarea"||a.type==="wysiwyg"?e.jsx(re,{id:`${a.id}-defaultValue`,value:a.defaultValue||"",onChange:t=>c({...a,defaultValue:t.target.value}),placeholder:"ÌïÑÎìúÏùò Í∏∞Î≥∏Í∞í",rows:3}):a.type==="checkbox"||a.type==="true_false"?e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(ee,{id:`${a.id}-defaultValue`,checked:a.defaultValue===!0,onCheckedChange:t=>c({...a,defaultValue:t})}),e.jsx(x,{htmlFor:`${a.id}-defaultValue`,children:"Í∏∞Î≥∏Ï†ÅÏúºÎ°ú Ï≤¥ÌÅ¨Îê®"})]}):e.jsx(k,{id:`${a.id}-defaultValue`,value:a.defaultValue||"",onChange:t=>c({...a,defaultValue:t.target.value}),placeholder:"ÌïÑÎìúÏùò Í∏∞Î≥∏Í∞í"})]})]})},za=({field:a,onChange:c})=>{const[g,j]=f.useState([]),t=()=>{const v={id:`field-${Date.now()}`,name:"",key:"",type:"text",label:"",required:!1};c({...a,subFields:[...a.subFields||[],v]})},l=(v,n)=>{const o=[...a.subFields||[]];o[v]=n,c({...a,subFields:o})},w=v=>{const n=a.subFields?.filter((o,N)=>N!==v)||[];c({...a,subFields:n})},h=v=>{j(n=>n.includes(v)?n.filter(o=>o!==v):[...n,v])};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"minRows",children:"ÏµúÏÜå Ìñâ Ïàò"}),e.jsx(k,{id:"minRows",type:"number",min:"0",value:a.minRows||"",onChange:v=>c({...a,minRows:v.target.value?parseInt(v.target.value):void 0}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"maxRows",children:"ÏµúÎåÄ Ìñâ Ïàò"}),e.jsx(k,{id:"maxRows",type:"number",min:"0",value:a.maxRows||"",onChange:v=>c({...a,maxRows:v.target.value?parseInt(v.target.value):void 0}),placeholder:"Î¨¥Ï†úÌïú"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"buttonLabel",children:"Ï∂îÍ∞Ä Î≤ÑÌäº ÌÖçÏä§Ìä∏"}),e.jsx(k,{id:"buttonLabel",value:a.buttonLabel||"",onChange:v=>c({...a,buttonLabel:v.target.value}),placeholder:"Ìñâ Ï∂îÍ∞Ä"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"ÌïòÏúÑ ÌïÑÎìú"}),e.jsxs(u,{variant:"outline",size:"sm",onClick:t,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Ï∂îÍ∞Ä"]})]}),a.subFields?.length===0?e.jsx(z,{className:"border-dashed",children:e.jsxs(B,{className:"text-center py-6",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"ÏïÑÏßÅ ÌïòÏúÑ ÌïÑÎìúÍ∞Ä ÏóÜÏäµÎãàÎã§"}),e.jsxs(u,{variant:"outline",size:"sm",onClick:t,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Ï≤´ ÌïÑÎìú Ï∂îÍ∞Ä"]})]})}):e.jsx("div",{className:"space-y-2",children:a.subFields?.map((v,n)=>e.jsxs(z,{children:[e.jsx(Y,{className:"py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>h(v.id),className:"flex items-center gap-2 text-left flex-1",children:[g.includes(v.id)?e.jsx(ns,{className:"w-4 h-4"}):e.jsx(is,{className:"w-4 h-4"}),e.jsx(rs,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:v.label||"(Ï†úÎ™© ÏóÜÏùå)"}),e.jsx(R,{variant:"outline",className:"text-xs",children:v.type}),v.required&&e.jsx(R,{variant:"destructive",className:"text-xs",children:"ÌïÑÏàò"})]}),v.key&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:v.key})]})]}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>w(n),children:e.jsx(ce,{className:"w-4 h-4 text-red-500"})})]})}),g.includes(v.id)&&e.jsx(B,{className:"pt-0",children:e.jsx(Vs,{field:v,onChange:o=>l(n,o)})})]},v.id))})]})]})},ks=()=>{const a=ye(),{id:c}=Oe(),g=he(),j=!!c,[t,l]=f.useState({name:"",key:"",description:"",position:"normal",style:"default",labelPlacement:"top",instructionPlacement:"label",active:!0,showInRest:!0,fields:[],location:[{rules:[{param:"post_type",operator:"==",value:"post"}],operator:"AND"}]}),[w,h]=f.useState([]),[v,n]=f.useState(!1),[o,N]=f.useState(null),[m,D]=f.useState("text"),{data:L,isLoading:E}=ne({queryKey:["acf-field-group",c],queryFn:async()=>(await V.api.get(`/acf/field-groups/${c}`)).data,enabled:j}),i=G({mutationFn:async r=>(await V.api.post("/acf/field-groups",r)).data,onSuccess:()=>{M.success("ÌïÑÎìú Í∑∏Î£πÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§"),g.invalidateQueries({queryKey:["acf-field-groups"]}),a("/content/acf")},onError:()=>{M.error("ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),s=G({mutationFn:async r=>(await V.api.put(`/acf/field-groups/${c}`,r)).data,onSuccess:()=>{M.success("ÌïÑÎìú Í∑∏Î£πÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),g.invalidateQueries({queryKey:["acf-field-groups"]}),g.invalidateQueries({queryKey:["acf-field-group",c]})},onError:()=>{M.error("ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}});f.useEffect(()=>{L&&(l(L),h(L.fields.map(r=>r.id)))},[L]);const S=r=>r.toLowerCase().replace(/[^a-z0-9Í∞Ä-Ìû£]+/g,"_").replace(/^_+|_+$/g,""),A=r=>{h(I=>I.includes(r)?I.filter(U=>U!==r):[...I,r])},T=()=>{N(null),D("text"),n(!0)},Z=r=>{N(r),D(r.type),n(!0)},P=r=>{const I={...r,id:o?.id||`field-${Date.now()}`};l(o?{...t,fields:t.fields?.map(U=>U.id===o.id?I:U)||[]}:{...t,fields:[...t.fields||[],I]}),n(!1)},se=r=>{confirm("Ï†ïÎßê Ïù¥ ÌïÑÎìúÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&l({...t,fields:t.fields?.filter(I=>I.id!==r)||[]})},C=()=>{const r={rules:[{param:"post_type",operator:"==",value:""}],operator:"AND"};l({...t,location:[...t.location||[],r]})},q=()=>{j?s.mutate(t):i.mutate(t)};return j&&E?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(u,{variant:"ghost",size:"sm",onClick:()=>a("/content/acf"),children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"ACF Î™©Î°ù"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:j?"ÌïÑÎìú Í∑∏Î£π ÏàòÏ†ï":"ÏÉà ÌïÑÎìú Í∑∏Î£π"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(z,{children:[e.jsxs(Y,{children:[e.jsx(W,{children:"Í∏∞Î≥∏ Ï†ïÎ≥¥"}),e.jsx(we,{children:"ÌïÑÎìú Í∑∏Î£πÏùò Í∏∞Î≥∏ Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"ÌïÑÎìú Í∑∏Î£π Ïù¥Î¶Ñ"}),e.jsx(k,{id:"name",value:t.name,onChange:r=>l({...t,name:r.target.value,key:S(r.target.value)}),placeholder:"Ïòà: Ï†úÌíà Ï†ïÎ≥¥",required:!0})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"key",children:"ÌïÑÎìú Í∑∏Î£π ÌÇ§"}),e.jsx(k,{id:"key",value:t.key,onChange:r=>l({...t,key:r.target.value}),placeholder:"Ïòà: product_info",required:!0})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),e.jsx(re,{id:"description",value:t.description,onChange:r=>l({...t,description:r.target.value}),placeholder:"Ïù¥ ÌïÑÎìú Í∑∏Î£πÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:3})]})]})]}),e.jsxs(z,{children:[e.jsxs(Y,{children:[e.jsx(W,{children:"ÌïÑÎìú"}),e.jsx(we,{children:"Ïù¥ Í∑∏Î£πÏóê Ìè¨Ìï®Îê† ÌïÑÎìúÎì§ÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})]}),e.jsx(B,{children:t.fields?.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"ÏïÑÏßÅ ÌïÑÎìúÍ∞Ä ÏóÜÏäµÎãàÎã§"}),e.jsxs(u,{onClick:T,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Ï≤´ ÌïÑÎìú Ï∂îÍ∞Ä"]})]}):e.jsxs("div",{className:"space-y-4",children:[t.fields?.map(r=>e.jsxs(z,{children:[e.jsx(Y,{className:"py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>A(r.id),className:"flex items-center gap-2 text-left flex-1",children:[w.includes(r.id)?e.jsx(ns,{className:"w-4 h-4"}):e.jsx(is,{className:"w-4 h-4"}),e.jsx(rs,{className:"w-5 h-5 text-gray-400 cursor-move"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:r.label}),e.jsx(R,{variant:"outline",className:"text-xs",children:r.type}),r.required&&e.jsx(R,{variant:"destructive",className:"text-xs",children:"ÌïÑÏàò"})]}),e.jsx("div",{className:"text-sm text-gray-500",children:r.key})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>Z(r),children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>se(r.id),children:e.jsx(ce,{className:"w-4 h-4 text-red-500"})})]})]})}),w.includes(r.id)&&e.jsx(B,{className:"pt-0",children:e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.description&&e.jsx("p",{children:r.description}),r.placeholder&&e.jsxs("p",{children:["ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî: ",r.placeholder]}),r.defaultValue&&e.jsxs("p",{children:["Í∏∞Î≥∏Í∞í: ",r.defaultValue]})]})})]},r.id)),e.jsxs(u,{variant:"outline",className:"w-full",onClick:T,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Ï∂îÍ∞Ä"]})]})})]}),e.jsxs(z,{children:[e.jsxs(Y,{children:[e.jsx(W,{children:"ÏúÑÏπò Í∑úÏπô"}),e.jsx(we,{children:"Ïù¥ ÌïÑÎìú Í∑∏Î£πÏù¥ ÌëúÏãúÎê† ÏúÑÏπòÎ•º ÏÑ§Ï†ïÌïòÏÑ∏Ïöî"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[t.location?.map((r,I)=>e.jsx("div",{className:"p-4 border rounded-lg",children:r.rules.map((U,y)=>e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsxs(_,{value:U.param,onValueChange:$=>{const b=[...t.location||[]];b[I].rules[y].param=$,l({...t,location:b})},children:[e.jsx(K,{className:"w-[180px]",children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"post_type",children:"Í≤åÏãúÎ¨º Ïú†Ìòï"}),e.jsx(d,{value:"page_template",children:"ÌéòÏù¥ÏßÄ ÌÖúÌîåÎ¶ø"}),e.jsx(d,{value:"post_status",children:"Í≤åÏãúÎ¨º ÏÉÅÌÉú"}),e.jsx(d,{value:"post_category",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(d,{value:"taxonomy",children:"Î∂ÑÎ•ò"}),e.jsx(d,{value:"user_role",children:"ÏÇ¨Ïö©Ïûê Ïó≠Ìï†"})]})]}),e.jsxs(_,{value:U.operator,onValueChange:$=>{const b=[...t.location||[]];b[I].rules[y].operator=$,l({...t,location:b})},children:[e.jsx(K,{className:"w-[100px]",children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"==",children:"Í∞ôÏùå"}),e.jsx(d,{value:"!=",children:"Í∞ôÏßÄ ÏïäÏùå"})]})]}),e.jsx(k,{value:U.value,onChange:$=>{const b=[...t.location||[]];b[I].rules[y].value=$.target.value,l({...t,location:b})},placeholder:"Í∞í",className:"flex-1"})]},y))},I)),e.jsxs(u,{variant:"outline",size:"sm",onClick:C,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Í∑úÏπô Ï∂îÍ∞Ä"]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"ÏÉÅÌÉú"})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{htmlFor:"active",children:"ÌôúÏÑ±Ìôî"}),e.jsx(ee,{id:"active",checked:t.active,onCheckedChange:r=>l({...t,active:r})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{htmlFor:"showInRest",children:"REST API ÌëúÏãú"}),e.jsx(ee,{id:"showInRest",checked:t.showInRest,onCheckedChange:r=>l({...t,showInRest:r})})]})]})]}),e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"ÌëúÏãú ÏÑ§Ï†ï"})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"position",children:"ÏúÑÏπò"}),e.jsxs(_,{value:t.position,onValueChange:r=>l({...t,position:r}),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"normal",children:"ÏùºÎ∞ò"}),e.jsx(d,{value:"side",children:"ÏÇ¨Ïù¥ÎìúÎ∞î"}),e.jsx(d,{value:"advanced",children:"Í≥†Í∏â"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"style",children:"Ïä§ÌÉÄÏùº"}),e.jsxs(_,{value:t.style,onValueChange:r=>l({...t,style:r}),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"default",children:"Í∏∞Î≥∏"}),e.jsx(d,{value:"seamless",children:"Ïã¨Î¶¨Ïä§"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"labelPlacement",children:"Î†àÏù¥Î∏î ÏúÑÏπò"}),e.jsxs(_,{value:t.labelPlacement,onValueChange:r=>l({...t,labelPlacement:r}),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"top",children:"ÏÉÅÎã®"}),e.jsx(d,{value:"left",children:"ÏôºÏ™Ω"})]})]})]})]})]}),e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"ÏûëÏóÖ"})}),e.jsx(B,{className:"space-y-3",children:e.jsxs(u,{onClick:q,className:"w-full",disabled:!t.name||!t.key||i.isPending||s.isPending,children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),j?"ÌïÑÎìú Í∑∏Î£π ÏàòÏ†ï":"ÌïÑÎìú Í∑∏Î£π ÏÉùÏÑ±"]})})]})]})]}),e.jsx($e,{open:v,onOpenChange:n,children:e.jsxs(Le,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(Me,{children:[e.jsx(Ee,{children:o?"ÌïÑÎìú ÏàòÏ†ï":"ÏÉà ÌïÑÎìú"}),e.jsx(as,{children:"ÌïÑÎìú Ïú†ÌòïÏùÑ ÏÑ†ÌÉùÌïòÍ≥† ÏÑ§Ï†ïÏùÑ Íµ¨ÏÑ±ÌïòÏÑ∏Ïöî"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 py-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:"ÌïÑÎìú Ïú†Ìòï"}),e.jsx(qa,{selectedType:m,onSelect:D})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:"ÌïÑÎìú ÏÑ§Ï†ï"}),m==="repeater"?e.jsx(za,{field:o||{id:"",name:"",key:"",type:"repeater",label:"",required:!1,subFields:[]},onChange:()=>{}}):e.jsx(Vs,{field:o||{id:"",name:"",key:"",type:m,label:"",required:!1},onChange:()=>{}})]})]}),e.jsxs(ts,{children:[e.jsx(u,{variant:"outline",onClick:()=>n(!1),children:"Ï∑®ÏÜå"}),e.jsx(u,{onClick:()=>{const r={id:o?.id||"",name:o?.name||"",key:o?.key||"",type:m,label:o?.label||"",required:!1};P(r)},children:"Ï†ÄÏû•"})]})]})})]})},Ba=[{type:"hero",name:"Hero Section",icon:e.jsx(be,{className:"w-5 h-5"}),category:"Basic",description:"ÎåÄÌòï Î∞∞ÎÑàÏôÄ CTA Î≤ÑÌäºÏù¥ ÏûàÎäî ÌûàÏñ¥Î°ú ÏÑπÏÖò"},{type:"heading",name:"Heading",icon:e.jsx(Ae,{className:"w-5 h-5"}),category:"Basic",description:"Ï†úÎ™© ÌÖçÏä§Ìä∏ (H1-H6)"},{type:"paragraph",name:"Paragraph",icon:e.jsx(Ae,{className:"w-5 h-5"}),category:"Basic",description:"ÏùºÎ∞ò ÌÖçÏä§Ìä∏ Îã®ÎùΩ"},{type:"button",name:"Button",icon:e.jsx(Ws,{className:"w-5 h-5"}),category:"Basic",description:"ÌÅ¥Î¶≠ Í∞ÄÎä•Ìïú Î≤ÑÌäº"},{type:"spacer",name:"Spacer",icon:e.jsx(gs,{className:"w-5 h-5"}),category:"Basic",description:"Í≥µÎ∞± ÏòÅÏó≠"},{type:"divider",name:"Divider",icon:e.jsx(gs,{className:"w-5 h-5"}),category:"Basic",description:"Íµ¨Î∂ÑÏÑ†"},{type:"image",name:"Image",icon:e.jsx(be,{className:"w-5 h-5"}),category:"Media",description:"Îã®Ïùº Ïù¥ÎØ∏ÏßÄ"},{type:"video",name:"Video",icon:e.jsx(Gs,{className:"w-5 h-5"}),category:"Media",description:"ÎπÑÎîîÏò§ ÌîåÎ†àÏù¥Ïñ¥"},{type:"gallery",name:"Gallery",icon:e.jsx(be,{className:"w-5 h-5"}),category:"Media",description:"Ïù¥ÎØ∏ÏßÄ Í∞§Îü¨Î¶¨"},{type:"carousel",name:"Carousel",icon:e.jsx(Js,{className:"w-5 h-5"}),category:"Media",description:"Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îçî"},{type:"columns",name:"Columns",icon:e.jsx(Xs,{className:"w-5 h-5"}),category:"Layout",description:"Îã§Îã® Î†àÏù¥ÏïÑÏõÉ"},{type:"card",name:"Card",icon:e.jsx(vs,{className:"w-5 h-5"}),category:"Layout",description:"Ïπ¥Îìú Ïª®ÌÖåÏù¥ÎÑà"},{type:"list",name:"List",icon:e.jsx(Ue,{className:"w-5 h-5"}),category:"Content",description:"ÏàúÏÑú ÏûàÎäî/ÏóÜÎäî Î™©Î°ù"},{type:"quote",name:"Quote",icon:e.jsx(Zs,{className:"w-5 h-5"}),category:"Content",description:"Ïù∏Ïö©Î¨∏"},{type:"code",name:"Code",icon:e.jsx(Ms,{className:"w-5 h-5"}),category:"Content",description:"ÏΩîÎìú Î∏îÎ°ù"},{type:"testimonial",name:"Testimonial",icon:e.jsx(ea,{className:"w-5 h-5"}),category:"Content",description:"Í≥†Í∞ù ÌõÑÍ∏∞"},{type:"faq",name:"FAQ",icon:e.jsx(sa,{className:"w-5 h-5"}),category:"Content",description:"ÏûêÏ£º Î¨ªÎäî ÏßàÎ¨∏"},{type:"contact-form",name:"Contact Form",icon:e.jsx(_e,{className:"w-5 h-5"}),category:"Interactive",description:"Ïó∞ÎùΩÏ≤ò Ìèº"},{type:"newsletter",name:"Newsletter",icon:e.jsx(_e,{className:"w-5 h-5"}),category:"Interactive",description:"Îâ¥Ïä§Î†àÌÑ∞ Íµ¨ÎèÖ Ìèº"},{type:"social-media",name:"Social Media",icon:e.jsx(Es,{className:"w-5 h-5"}),category:"Interactive",description:"ÏÜåÏÖú ÎØ∏ÎîîÏñ¥ ÎßÅÌÅ¨"},{type:"map",name:"Map",icon:e.jsx(Ls,{className:"w-5 h-5"}),category:"Interactive",description:"ÏßÄÎèÑ"},{type:"pricing-table",name:"Pricing Table",icon:e.jsx(vs,{className:"w-5 h-5"}),category:"Advanced",description:"Í∞ÄÍ≤©Ìëú"},{type:"countdown",name:"Countdown",icon:e.jsx(As,{className:"w-5 h-5"}),category:"Advanced",description:"Ïπ¥Ïö¥Ìä∏Îã§Ïö¥ ÌÉÄÏù¥Î®∏"},{type:"progress-bar",name:"Progress Bar",icon:e.jsx(aa,{className:"w-5 h-5"}),category:"Advanced",description:"ÏßÑÌñâÎ•† Î∞î"}],Ra=["Basic","Media","Layout","Content","Interactive","Advanced"],Va=({onAddBlock:a})=>{const[c,g]=f.useState("Basic"),j=Ba.filter(t=>t.category===c);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-2",children:Ra.map(t=>e.jsx("button",{onClick:()=>g(t),className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors ${c===t?"bg-blue-100 text-blue-900 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:t},t))}),e.jsx("div",{className:"space-y-2",children:j.map(t=>e.jsx("div",{className:"border rounded-lg p-3 hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-all group",onClick:()=>a(t.type),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-blue-100 transition-colors",children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900 group-hover:text-blue-900",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed",children:t.description})]})]})},t.type))}),e.jsxs("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-900 mb-2",children:"üí° ÏÇ¨Ïö© ÌåÅ"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Î∏îÎ°ùÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ Ï∫îÎ≤ÑÏä§Ïóê Ï∂îÍ∞Ä"}),e.jsx("li",{children:"‚Ä¢ ÎìúÎûòÍ∑∏ÌïòÏó¨ ÏàúÏÑú Î≥ÄÍ≤Ω"}),e.jsx("li",{children:"‚Ä¢ Ïò§Î•∏Ï™Ω Ìå®ÎÑêÏóêÏÑú ÏÉÅÏÑ∏ ÏÑ§Ï†ï"}),e.jsx("li",{children:"‚Ä¢ Î≥µÏÇ¨/Î∂ôÏó¨ÎÑ£Í∏∞Î°ú Îπ†Î•∏ Î≥µÏ†ú"})]})]})]})},He=f.forwardRef(({className:a,value:c,defaultValue:g=[0],onValueChange:j,min:t=0,max:l=100,step:w=1,disabled:h},v)=>{const[n,o]=f.useState(g),m=(c??n)[0]??0,D=f.useRef(null),L=f.useRef(!1),E=A=>{const T=Math.min(Math.max(A,t),l),P=[Math.round(T/w)*w];c===void 0&&o(P),j?.(P)},i=A=>{if(!D.current)return;const T=D.current.getBoundingClientRect();return(A-T.left)/T.width*(l-t)+t},s=A=>{if(h)return;L.current=!0;const T=i(A.clientX);T!==void 0&&E(T)};f.useEffect(()=>{const A=Z=>{if(!L.current||h)return;const P=i(Z.clientX);P!==void 0&&E(P)},T=()=>{L.current=!1};if(L.current)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",T),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",T)}},[h,E,l,t]);const S=(m-t)/(l-t)*100;return e.jsxs("div",{ref:v,className:ge("relative flex w-full touch-none select-none items-center",h&&"opacity-50 cursor-not-allowed",a),children:[e.jsx("div",{ref:D,className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary cursor-pointer",onMouseDown:s,children:e.jsx("div",{className:"absolute h-full bg-primary transition-none",style:{width:`${S}%`}})}),e.jsx("div",{className:ge("absolute h-5 w-5 rounded-full border-2 border-primary bg-background","ring-offset-background transition-colors","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",h&&"pointer-events-none",!h&&"cursor-grab active:cursor-grabbing"),style:{left:`${S}%`,transform:"translateX(-50%)"},onMouseDown:s,children:e.jsx("input",{type:"range",value:m,min:t,max:l,step:w,disabled:h,className:"sr-only",onChange:A=>E(Number(A.target.value))})})]})});He.displayName="Slider";const _a=({block:a,onChange:c})=>{const[g,j]=f.useState("desktop"),t=(n,o)=>{c({content:{...a.content,[n]:o}})},l=(n,o,N)=>{const m=a.settings;c({settings:{...a.settings,[n]:{...m[n]||{},[o]:N}}})},w=({label:n,value:o,onChange:N})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"text-sm",children:n}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:o||"#000000",onChange:m=>N(m.target.value),className:"w-8 h-8 rounded border cursor-pointer"}),e.jsx(k,{value:o||"",onChange:m=>N(m.target.value),placeholder:"#000000",className:"flex-1"})]})]}),h=({label:n,value:o={},onChange:N})=>e.jsxs(z,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(W,{className:"text-sm",children:n})}),e.jsx(B,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-xs",children:"Top"}),e.jsx(k,{value:o.top||"",onChange:m=>N({...o,top:m.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),e.jsxs("div",{children:[e.jsx(x,{className:"text-xs",children:"Right"}),e.jsx(k,{value:o.right||"",onChange:m=>N({...o,right:m.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),e.jsxs("div",{children:[e.jsx(x,{className:"text-xs",children:"Bottom"}),e.jsx(k,{value:o.bottom||"",onChange:m=>N({...o,bottom:m.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),e.jsxs("div",{children:[e.jsx(x,{className:"text-xs",children:"Left"}),e.jsx(k,{value:o.left||"",onChange:m=>N({...o,left:m.target.value}),placeholder:"0px",className:"text-xs h-8"})]})]})})]}),v=()=>{switch(a.type){case"hero":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Ï†úÎ™©"}),e.jsx(k,{value:a.content.title||"",onChange:n=>t("title",n.target.value),placeholder:"Hero Ï†úÎ™©"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Î∂ÄÏ†úÎ™©"}),e.jsx(k,{value:a.content.subtitle||"",onChange:n=>t("subtitle",n.target.value),placeholder:"Hero Î∂ÄÏ†úÎ™©"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ"}),e.jsx(k,{value:a.content.backgroundImage||"",onChange:n=>t("backgroundImage",n.target.value),placeholder:"Ïù¥ÎØ∏ÏßÄ URL"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Î≤ÑÌäº"}),(a.content.buttons||[]).map((n,o)=>e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(k,{value:String(n.text||""),onChange:N=>{const m=[...a.content.buttons||[]];m[o]={...n,text:N.target.value},t("buttons",m)},placeholder:"Î≤ÑÌäº ÌÖçÏä§Ìä∏"}),e.jsx(k,{value:String(n.url||""),onChange:N=>{const m=[...a.content.buttons||[]];m[o]={...n,url:N.target.value},t("buttons",m)},placeholder:"URL"}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>{const N=(a.content.buttons||[]).filter((m,D)=>D!==o);t("buttons",N)},children:e.jsx(ce,{className:"w-4 h-4"})})]},o)),e.jsxs(u,{size:"sm",variant:"outline",onClick:()=>{const n=[...a.content.buttons||[],{text:"Î≤ÑÌäº",url:"#",style:"primary"}];t("buttons",n)},className:"mt-2",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Î≤ÑÌäº Ï∂îÍ∞Ä"]})]})]});case"heading":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"ÌÖçÏä§Ìä∏"}),e.jsx(k,{value:a.content.text||"",onChange:n=>t("text",n.target.value),placeholder:"Ï†úÎ™© ÌÖçÏä§Ìä∏"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Î†àÎ≤®"}),e.jsxs(_,{value:a.content.level?.toString()||"2",onValueChange:n=>t("level",parseInt(n)),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"1",children:"H1"}),e.jsx(d,{value:"2",children:"H2"}),e.jsx(d,{value:"3",children:"H3"}),e.jsx(d,{value:"4",children:"H4"}),e.jsx(d,{value:"5",children:"H5"}),e.jsx(d,{value:"6",children:"H6"})]})]})]})]});case"paragraph":return e.jsxs("div",{children:[e.jsx(x,{children:"ÌÖçÏä§Ìä∏"}),e.jsx(re,{value:a.content.text||"",onChange:n=>t("text",n.target.value),placeholder:"Îã®ÎùΩ ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:4})]});case"image":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Ïù¥ÎØ∏ÏßÄ URL"}),e.jsx(k,{value:a.content.src||"",onChange:n=>t("src",n.target.value),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÎåÄÏ≤¥ ÌÖçÏä§Ìä∏"}),e.jsx(k,{value:a.content.alt||"",onChange:n=>t("alt",n.target.value),placeholder:"Ïù¥ÎØ∏ÏßÄ ÏÑ§Î™Ö"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Ï∫°ÏÖò"}),e.jsx(k,{value:a.content.caption||"",onChange:n=>t("caption",n.target.value),placeholder:"Ïù¥ÎØ∏ÏßÄ Ï∫°ÏÖò"})]})]});case"button":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"ÌÖçÏä§Ìä∏"}),e.jsx(k,{value:a.content.text||"",onChange:n=>t("text",n.target.value),placeholder:"Î≤ÑÌäº ÌÖçÏä§Ìä∏"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"URL"}),e.jsx(k,{value:a.content.url||"",onChange:n=>t("url",n.target.value),placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Ïä§ÌÉÄÏùº"}),e.jsxs(_,{value:a.content.style||"primary",onValueChange:n=>t("style",n),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"primary",children:"Primary"}),e.jsx(d,{value:"secondary",children:"Secondary"}),e.jsx(d,{value:"outline",children:"Outline"}),e.jsx(d,{value:"ghost",children:"Ghost"})]})]})]})]});case"columns":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Ïª¨Îüº Ïàò"}),e.jsxs(_,{value:(a.content.columns?.length||2).toString(),onValueChange:n=>{const o=parseInt(n),N=Array.from({length:o},(m,D)=>a.content.columns?.[D]||{content:""});t("columns",N)},children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"1",children:"1 Ïª¨Îüº"}),e.jsx(d,{value:"2",children:"2 Ïª¨Îüº"}),e.jsx(d,{value:"3",children:"3 Ïª¨Îüº"}),e.jsx(d,{value:"4",children:"4 Ïª¨Îüº"})]})]})]}),(a.content.columns||[]).map((n,o)=>e.jsxs("div",{children:[e.jsxs(x,{children:["Ïª¨Îüº ",o+1," ÎÇ¥Ïö©"]}),e.jsx(re,{value:String(n.content||""),onChange:N=>{const m=[...a.content.columns||[]];m[o]={...n,content:N.target.value},t("columns",m)},placeholder:`Ïª¨Îüº ${o+1} ÎÇ¥Ïö©`,rows:3})]},o))]});default:return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Fe,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{children:"Ïù¥ Î∏îÎ°ù ÌÉÄÏûÖÏóê ÎåÄÌïú Ìé∏ÏßëÍ∏∞Í∞Ä Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§."})]})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"pb-4 border-b",children:[e.jsx("h3",{className:"font-semibold text-lg capitalize",children:a.type}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Î∏îÎ°ù ID: ",a.id]})]}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[e.jsx(u,{size:"sm",variant:g==="desktop"?"default":"ghost",onClick:()=>j("desktop"),children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:g==="tablet"?"default":"ghost",onClick:()=>j("tablet"),children:e.jsx(os,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:g==="mobile"?"default":"ghost",onClick:()=>j("mobile"),children:e.jsx(xs,{className:"w-4 h-4"})})]}),e.jsxs(ze,{defaultValue:"content",className:"w-full",children:[e.jsxs(Be,{className:"grid w-full grid-cols-3",children:[e.jsx(te,{value:"content",children:"ÎÇ¥Ïö©"}),e.jsx(te,{value:"design",children:"ÎîîÏûêÏù∏"}),e.jsx(te,{value:"advanced",children:"Í≥†Í∏â"})]}),e.jsx(de,{value:"content",className:"space-y-4",children:v()}),e.jsxs(de,{value:"design",className:"space-y-4",children:[e.jsx(h,{label:"Ïó¨Î∞± (Margin)",value:a.settings.margin||{},onChange:n=>c({settings:{...a.settings,margin:n}})}),e.jsx(h,{label:"Ìå®Îî© (Padding)",value:a.settings.padding||{},onChange:n=>c({settings:{...a.settings,padding:n}})}),e.jsxs(z,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(W,{className:"text-sm",children:"Î∞∞Í≤Ω"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"ÌÉÄÏûÖ"}),e.jsxs(_,{value:a.settings.background?.type||"none",onValueChange:n=>l("background","type",n),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"none",children:"ÏóÜÏùå"}),e.jsx(d,{value:"color",children:"ÏÉâÏÉÅ"}),e.jsx(d,{value:"gradient",children:"Í∑∏ÎùºÎîîÏñ∏Ìä∏"}),e.jsx(d,{value:"image",children:"Ïù¥ÎØ∏ÏßÄ"})]})]})]}),a.settings.background?.type==="color"&&e.jsx(w,{label:"Î∞∞Í≤Ω ÏÉâÏÉÅ",value:a.settings.background?.color||"",onChange:n=>l("background","color",n)}),a.settings.background?.type==="image"&&e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"Ïù¥ÎØ∏ÏßÄ URL"}),e.jsx(k,{value:a.settings.background?.image?.url||"",onChange:n=>l("background","image",{...a.settings.background?.image,url:n.target.value}),placeholder:"https://example.com/bg.jpg"})]})]})]}),e.jsxs(z,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(W,{className:"text-sm",children:"ÌÖåÎëêÎ¶¨"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"ÎëêÍªò"}),e.jsx(k,{value:a.settings.border?.width||"",onChange:n=>l("border","width",n.target.value),placeholder:"1px"})]}),e.jsx(w,{label:"ÏÉâÏÉÅ",value:a.settings.border?.color||"",onChange:n=>l("border","color",n)}),e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"Îë•Í∑º Î™®ÏÑúÎ¶¨"}),e.jsx(k,{value:a.settings.border?.radius||"",onChange:n=>l("border","radius",n.target.value),placeholder:"4px"})]})]})]})]}),e.jsxs(de,{value:"advanced",className:"space-y-4",children:[e.jsxs(z,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(W,{className:"text-sm",children:"Ïï†ÎãàÎ©îÏù¥ÏÖò"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"ÌÉÄÏûÖ"}),e.jsxs(_,{value:a.settings.animation?.type||"none",onValueChange:n=>l("animation","type",n),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"none",children:"ÏóÜÏùå"}),e.jsx(d,{value:"fade",children:"ÌéòÏù¥Îìú"}),e.jsx(d,{value:"slide",children:"Ïä¨ÎùºÏù¥Îìú"}),e.jsx(d,{value:"zoom",children:"Ï§å"}),e.jsx(d,{value:"bounce",children:"Î∞îÏö¥Ïä§"})]})]})]}),a.settings.animation?.type!=="none"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"ÏßÄÏÜçÏãúÍ∞Ñ (ms)"}),e.jsx(He,{value:[a.settings.animation?.duration||300],onValueChange:([n])=>l("animation","duration",n),max:2e3,min:100,step:100}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.settings.animation?.duration||300,"ms"]})]}),e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"ÏßÄÏó∞ÏãúÍ∞Ñ (ms)"}),e.jsx(He,{value:[a.settings.animation?.delay||0],onValueChange:([n])=>l("animation","delay",n),max:2e3,min:0,step:100}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.settings.animation?.delay||0,"ms"]})]})]})]})]}),e.jsxs(z,{children:[e.jsx(Y,{className:"pb-3",children:e.jsx(W,{className:"text-sm",children:"ÌëúÏãú ÏÑ§Ï†ï"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm",children:"Îç∞Ïä§ÌÅ¨ÌÜ±ÏóêÏÑú ÌëúÏãú"}),e.jsx(ee,{checked:a.settings.visibility?.desktop!==!1,onCheckedChange:n=>l("visibility","desktop",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm",children:"ÌÉúÎ∏îÎ¶øÏóêÏÑú ÌëúÏãú"}),e.jsx(ee,{checked:a.settings.visibility?.tablet!==!1,onCheckedChange:n=>l("visibility","tablet",n)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm",children:"Î™®Î∞îÏùºÏóêÏÑú ÌëúÏãú"}),e.jsx(ee,{checked:a.settings.visibility?.mobile!==!1,onCheckedChange:n=>l("visibility","mobile",n)})]})]})]})]})]})]})},Ka=({block:a,isSelected:c,isPreview:g,onSelect:j,onAddBlock:t,onDelete:l,onDuplicate:w,onMove:h})=>{const v=()=>{const{settings:o}=a,N={};if(o.margin&&(N.marginTop=o.margin.top||"0",N.marginRight=o.margin.right||"0",N.marginBottom=o.margin.bottom||"0",N.marginLeft=o.margin.left||"0"),o.padding&&(N.paddingTop=o.padding.top||"0",N.paddingRight=o.padding.right||"0",N.paddingBottom=o.padding.bottom||"0",N.paddingLeft=o.padding.left||"0"),o.background)switch(o.background.type){case"color":N.backgroundColor=o.background.color;break;case"image":o.background.image?.url&&(N.backgroundImage=`url(${o.background.image.url})`,N.backgroundPosition=o.background.image.position||"center",N.backgroundRepeat=o.background.image.repeat||"no-repeat",N.backgroundSize=o.background.image.size||"cover");break;case"gradient":if(o.background.gradient){const{colors:m,direction:D="45deg"}=o.background.gradient;N.background=`linear-gradient(${D}, ${m?.join(", ")||""})`}break}return o.border&&(o.border.width&&(N.borderWidth=o.border.width),o.border.color&&(N.borderColor=o.border.color),o.border.style&&(N.borderStyle=o.border.style),o.border.radius&&(N.borderRadius=o.border.radius)),N},n=()=>{switch(a.type){case"hero":return e.jsxs("div",{className:"hero-section relative overflow-hidden",style:{minHeight:"400px"},children:[a.content.backgroundImage&&e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${a.content.backgroundImage})`}}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center p-8",children:[a.content.title&&e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-white",children:a.content.title}),a.content.subtitle&&e.jsx("p",{className:"text-xl md:text-2xl mb-8 text-white/90",children:a.content.subtitle}),a.content.buttons&&e.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:a.content.buttons.map((E,i)=>e.jsx("button",{className:`px-6 py-3 rounded-lg font-medium transition-colors ${E.style==="primary"?"bg-blue-600 text-white hover:bg-blue-700":"bg-white text-gray-900 hover:bg-gray-100"}`,children:String(E.text)},i))})]})]});case"heading":const o=a.content.level||2,N=`font-bold ${o===1?"text-4xl":o===2?"text-3xl":o===3?"text-2xl":o===4?"text-xl":o===5?"text-lg":"text-base"}`;return f.createElement(`h${o}`,{className:N},a.content.text||"Heading Text");case"paragraph":return e.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.content.text||"Enter your paragraph text here..."});case"image":return e.jsxs("div",{className:"text-center",children:[a.content.src?e.jsx("img",{src:a.content.src,alt:a.content.alt||"",className:"max-w-full h-auto rounded-lg"}):e.jsx("div",{className:"bg-gray-200 border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{children:"Ïù¥ÎØ∏ÏßÄÎ•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})]})}),a.content.caption&&e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:a.content.caption})]});case"video":return e.jsx("div",{className:"text-center",children:a.content.src?e.jsxs("video",{controls:!0,className:"max-w-full h-auto rounded-lg",poster:a.content.poster,children:[e.jsx("source",{src:a.content.src}),"Your browser does not support the video tag."]}):e.jsx("div",{className:"bg-gray-200 border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),e.jsx("p",{children:"ÎπÑÎîîÏò§Î•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})]})})});case"button":return e.jsx("div",{className:"text-center",children:e.jsx("button",{className:`px-6 py-3 rounded-lg font-medium transition-colors ${a.content.style==="primary"?"bg-blue-600 text-white hover:bg-blue-700":a.content.style==="secondary"?"bg-gray-600 text-white hover:bg-gray-700":a.content.style==="outline"?"border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white":"text-blue-600 hover:text-blue-700"}`,children:a.content.text||"Button Text"})});case"columns":const m=a.content.columns?.length||2;return e.jsx("div",{className:`grid grid-cols-1 md:grid-cols-${m} gap-6`,children:(a.content.columns||[]).map((E,i)=>e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg min-h-[100px]",children:E.content?e.jsx("div",{className:"prose prose-sm",children:String(E.content||"").split(`
`).map((s,S)=>e.jsx("p",{children:s},S))}):e.jsx("div",{className:"text-gray-500 text-center",children:e.jsxs("p",{children:["Column ",i+1," content"]})})})},i))});case"spacer":return e.jsx("div",{style:{height:a.content.height||"2rem"},className:"w-full bg-gray-100 border-2 border-dashed border-gray-300 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Spacer"})});case"card":return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 shadow-sm",children:[a.content.title&&e.jsx("h3",{className:"text-xl font-semibold mb-3",children:a.content.title}),a.content.content&&e.jsx("div",{className:"text-gray-700",children:a.content.content}),!a.content.title&&!a.content.content&&e.jsx("div",{className:"text-gray-500 text-center py-8",children:e.jsx("p",{children:"Ïπ¥Îìú ÎÇ¥Ïö©ÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})})]});case"list":const D=a.content.type==="ordered",L=D?"ol":"ul";return e.jsx(L,{className:D?"list-decimal list-inside space-y-2":"list-disc list-inside space-y-2",children:(a.content.items||["Î™©Î°ù Ìï≠Î™© 1","Î™©Î°ù Ìï≠Î™© 2"]).map((E,i)=>e.jsx("li",{className:"text-gray-700",children:E},i))});case"quote":return e.jsxs("blockquote",{className:"border-l-4 border-blue-500 pl-6 py-4 bg-gray-50 rounded-r-lg",children:[e.jsxs("p",{className:"text-lg text-gray-700 italic mb-2",children:['"',a.content.text||"Ïù∏Ïö©Î¨∏ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",'"']}),a.content.author&&e.jsxs("cite",{className:"text-sm text-gray-600",children:["‚Äî ",a.content.author]})]});case"divider":return e.jsx("hr",{className:`border-t ${a.content.style==="dashed"?"border-dashed":a.content.style==="dotted"?"border-dotted":"border-solid"} border-gray-300`});default:return e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[e.jsxs("p",{children:["Block type: ",a.type]}),e.jsx("p",{className:"text-sm mt-2",children:"Renderer not implemented yet"})]})}};return g?e.jsx("div",{style:v(),children:n()}):e.jsxs("div",{className:`group relative border-2 transition-all duration-200 ${c?"border-blue-500 shadow-lg":"border-transparent hover:border-gray-300"}`,onClick:j,children:[e.jsxs("div",{className:`absolute -top-10 left-0 right-0 flex items-center justify-between transition-opacity ${c?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-1 bg-white border rounded-lg shadow-sm p-1",children:[e.jsx("span",{className:"text-xs text-gray-600 px-2",children:a.type}),e.jsx(u,{size:"sm",variant:"ghost",onClick:o=>{o.stopPropagation(),h("up")},children:e.jsx(qs,{className:"w-3 h-3"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:o=>{o.stopPropagation(),h("down")},children:e.jsx(zs,{className:"w-3 h-3"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:o=>{o.stopPropagation(),w()},children:e.jsx(je,{className:"w-3 h-3"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:o=>{o.stopPropagation(),l()},className:"text-red-600 hover:text-red-700",children:e.jsx(ce,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-white border rounded-lg shadow-sm p-1",children:[a.settings.visibility?.desktop!==!1&&e.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"D"})}),a.settings.visibility?.tablet!==!1&&e.jsx("div",{className:"w-4 h-4 bg-green-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"T"})}),a.settings.visibility?.mobile!==!1&&e.jsx("div",{className:"w-4 h-4 bg-purple-100 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"M"})})]})]}),e.jsx("div",{style:v(),children:n()}),e.jsx("div",{className:`absolute -bottom-6 left-1/2 transform -translate-x-1/2 transition-opacity ${c?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:e.jsxs(u,{size:"sm",variant:"outline",className:"bg-white shadow-sm",onClick:o=>{o.stopPropagation(),t("paragraph")},children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Add Block"]})})]})},Qa=({template:a,onClose:c,onSave:g})=>{const j=he(),t=f.useRef(null),[l,w]=f.useState(()=>({template:a||{id:"",name:"",description:"",type:"page",category:"homepage",status:"draft",blocks:[],settings:{layout:{containerWidth:"1200px",contentWidth:"100%",sidebar:{enabled:!1,position:"right",width:"300px"},header:{enabled:!0,sticky:!1,transparent:!1},footer:{enabled:!0,sticky:!1}},typography:{fontFamily:{primary:"Inter",secondary:"Inter",monospace:"Monaco"},fontSize:{base:"16px",scale:1.25},lineHeight:{tight:1.25,normal:1.5,loose:1.75},fontWeight:{normal:400,medium:500,bold:700}},colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#f59e0b",background:"#ffffff",surface:"#f8fafc",text:{primary:"#1e293b",secondary:"#64748b",muted:"#94a3b8"},border:"#e2e8f0",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},spacing:{top:"0",right:"0",bottom:"0",left:"0"},seo:{}},preview:{thumbnail:"",screenshots:[]},metadata:{tags:[],author:"",version:"1.0.0",compatibility:[],usageCount:0,rating:0,downloads:0},createdBy:"",createdAt:new Date,updatedAt:new Date},selectedBlockId:null,previewMode:!1,devicePreview:"desktop",zoom:1,history:[],historyIndex:-1})),[h,v]=f.useState("blocks"),n=G({mutationFn:async C=>V.api.post("/templates",C),onSuccess:()=>{M.success("ÌÖúÌîåÎ¶øÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§"),j.invalidateQueries({queryKey:["templates"]}),g()},onError:()=>{M.error("ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),o=G({mutationFn:async C=>V.api.put(`/templates/${C.id}`,C.updates),onSuccess:()=>{M.success("ÌÖúÌîåÎ¶øÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§"),j.invalidateQueries({queryKey:["templates"]}),g()},onError:()=>{M.error("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),N=f.useCallback(C=>{const q={blocks:[...l.template.blocks],settings:{...l.template.settings},timestamp:new Date,action:C};w(r=>({...r,history:[...r.history.slice(0,r.historyIndex+1),q],historyIndex:r.historyIndex+1}))},[l.template.blocks,l.template.settings,l.historyIndex]),m=f.useCallback(C=>{w(q=>({...q,template:{...q.template,...C}}))},[]),D=f.useCallback((C,q)=>{const r={id:`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:C,content:Ha(C),settings:Oa(),order:l.template.blocks.length};let I=[...l.template.blocks];if(q){const U=I.findIndex(y=>y.id===q);I.splice(U+1,0,r)}else I.push(r);I=I.map((U,y)=>({...U,order:y})),m({blocks:I}),w(U=>({...U,selectedBlockId:r.id})),N(`Added ${C} block`)},[l.template.blocks,m,N]),L=f.useCallback((C,q)=>{const r=l.template.blocks.map(I=>I.id===C?{...I,...q}:I);m({blocks:r})},[l.template.blocks,m]),E=f.useCallback(C=>{const q=l.template.blocks.filter(r=>r.id!==C).map((r,I)=>({...r,order:I}));m({blocks:q}),w(r=>({...r,selectedBlockId:r.selectedBlockId===C?null:r.selectedBlockId})),N("Deleted block")},[l.template.blocks,m,N]),i=f.useCallback((C,q)=>{const r=[...l.template.blocks],I=r.findIndex($=>$.id===C);if(I===-1)return;const U=q==="up"?I-1:I+1;if(U<0||U>=r.length)return;[r[I],r[U]]=[r[U],r[I]];const y=r.map(($,b)=>({...$,order:b}));m({blocks:y}),N(`Moved block ${q}`)},[l.template.blocks,m,N]),s=f.useCallback(C=>{const q=l.template.blocks.find($=>$.id===C);if(!q)return;const r={...q,id:`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`},I=[...l.template.blocks],U=I.findIndex($=>$.id===C);I.splice(U+1,0,r);const y=I.map(($,b)=>({...$,order:b}));m({blocks:y}),w($=>({...$,selectedBlockId:r.id})),N("Duplicated block")},[l.template.blocks,m,N]),S=()=>{if(!l.template.name){M.error("ÌÖúÌîåÎ¶ø Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");return}a?.id?o.mutate({id:a.id,updates:{name:l.template.name,description:l.template.description,blocks:l.template.blocks,settings:l.template.settings,status:l.template.status}}):n.mutate({name:l.template.name,description:l.template.description,type:l.template.type,category:l.template.category,template:l.template})},A=f.useCallback(()=>{if(l.historyIndex>0){const C=l.history[l.historyIndex-1];m({blocks:C.blocks,settings:C.settings}),w(q=>({...q,historyIndex:q.historyIndex-1}))}},[l.history,l.historyIndex,m]),T=f.useCallback(()=>{if(l.historyIndex<l.history.length-1){const C=l.history[l.historyIndex+1];m({blocks:C.blocks,settings:C.settings}),w(q=>({...q,historyIndex:q.historyIndex+1}))}},[l.history,l.historyIndex,m]),Z=()=>w(C=>({...C,zoom:Math.min(C.zoom+.1,2)})),P=()=>w(C=>({...C,zoom:Math.max(C.zoom-.1,.5)})),se=()=>{switch(l.devicePreview){case"mobile":return"max-w-sm";case"tablet":return"max-w-2xl";default:return"max-w-full"}};return e.jsx($e,{open:!0,onOpenChange:c,children:e.jsx(Le,{className:"max-w-full w-full h-full m-0 rounded-none",children:e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-80 border-r bg-white flex flex-col",children:[e.jsx(Me,{className:"p-4 border-b",children:e.jsx(Ee,{children:"ÌÖúÌîåÎ¶ø ÎπåÎçî"})}),e.jsxs(ze,{value:h,onValueChange:v,className:"flex-1 flex flex-col",children:[e.jsxs(Be,{className:"grid w-full grid-cols-3 mx-4 mt-4",children:[e.jsx(te,{value:"blocks",children:"Î∏îÎ°ù"}),e.jsx(te,{value:"layers",children:"Î†àÏù¥Ïñ¥"}),e.jsx(te,{value:"settings",children:"ÏÑ§Ï†ï"})]}),e.jsx(de,{value:"blocks",className:"flex-1 overflow-y-auto p-4",children:e.jsx(Va,{onAddBlock:D})}),e.jsx(de,{value:"layers",className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"space-y-2",children:l.template.blocks.map((C,q)=>e.jsxs("div",{className:`group flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${l.selectedBlockId===C.id?"bg-blue-100 border border-blue-300":"hover:bg-gray-100"}`,onClick:()=>w(r=>({...r,selectedBlockId:C.id})),children:[e.jsx($s,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"flex-1 text-sm",children:C.type}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:r=>{r.stopPropagation(),i(C.id,"up")},disabled:q===0,children:e.jsx(qs,{className:"w-3 h-3"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:r=>{r.stopPropagation(),i(C.id,"down")},disabled:q===l.template.blocks.length-1,children:e.jsx(zs,{className:"w-3 h-3"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:r=>{r.stopPropagation(),s(C.id)},children:e.jsx(je,{className:"w-3 h-3"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:r=>{r.stopPropagation(),E(C.id)},children:e.jsx(ce,{className:"w-3 h-3"})})]})]},C.id))})}),e.jsx(de,{value:"settings",className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"template-name",children:"ÌÖúÌîåÎ¶ø Ïù¥Î¶Ñ"}),e.jsx(k,{id:"template-name",value:l.template.name,onChange:C=>m({name:C.target.value}),placeholder:"ÌÖúÌîåÎ¶ø Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"template-description",children:"ÏÑ§Î™Ö"}),e.jsx(re,{id:"template-description",value:l.template.description,onChange:C=>m({description:C.target.value}),placeholder:"ÌÖúÌîåÎ¶ø ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:3})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"template-type",children:"ÌÉÄÏûÖ"}),e.jsxs(_,{value:l.template.type,onValueChange:C=>m({type:C}),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"page",children:"ÌéòÏù¥ÏßÄ"}),e.jsx(d,{value:"post",children:"Ìè¨Ïä§Ìä∏"}),e.jsx(d,{value:"email",children:"Ïù¥Î©îÏùº"}),e.jsx(d,{value:"popup",children:"ÌåùÏóÖ"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"template-category",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsxs(_,{value:l.template.category,onValueChange:C=>m({category:C}),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"homepage",children:"ÌôàÌéòÏù¥ÏßÄ"}),e.jsx(d,{value:"landing-page",children:"ÎûúÎî© ÌéòÏù¥ÏßÄ"}),e.jsx(d,{value:"blog",children:"Î∏îÎ°úÍ∑∏"}),e.jsx(d,{value:"ecommerce",children:"Ïù¥Ïª§Î®∏Ïä§"}),e.jsx(d,{value:"portfolio",children:"Ìè¨Ìä∏Ìè¥Î¶¨Ïò§"})]})]})]})]})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"border-b bg-white p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[e.jsx(u,{size:"sm",variant:l.devicePreview==="desktop"?"default":"ghost",onClick:()=>w(C=>({...C,devicePreview:"desktop"})),children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:l.devicePreview==="tablet"?"default":"ghost",onClick:()=>w(C=>({...C,devicePreview:"tablet"})),children:e.jsx(os,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:l.devicePreview==="mobile"?"default":"ghost",onClick:()=>w(C=>({...C,devicePreview:"mobile"})),children:e.jsx(xs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:A,disabled:l.historyIndex<=0,children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:T,disabled:l.historyIndex>=l.history.length-1,children:e.jsx(la,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:P,children:e.jsx(na,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 min-w-[3rem] text-center",children:[Math.round(l.zoom*100),"%"]}),e.jsx(u,{size:"sm",variant:"ghost",onClick:Z,children:e.jsx(ia,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(u,{variant:"outline",onClick:()=>w(C=>({...C,previewMode:!C.previewMode})),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),l.previewMode?"Ìé∏Ïßë":"ÎØ∏Î¶¨Î≥¥Í∏∞"]}),e.jsxs(u,{onClick:S,children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Ï†ÄÏû•"]}),e.jsx(u,{variant:"ghost",onClick:c,children:e.jsx(hs,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex-1 bg-gray-100 overflow-auto",children:e.jsx("div",{ref:t,className:"min-h-full p-8 flex justify-center",style:{transform:`scale(${l.zoom})`},children:e.jsx("div",{className:`bg-white shadow-lg ${se()} min-h-96 transition-all duration-300`,children:l.template.blocks.length===0?e.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{children:"Î∏îÎ°ùÏùÑ Ï∂îÍ∞ÄÌï¥ÏÑú ÏãúÏûëÌïòÏÑ∏Ïöî"})]})}):l.template.blocks.map(C=>e.jsx(Ka,{block:C,isSelected:l.selectedBlockId===C.id,isPreview:l.previewMode,onSelect:()=>w(q=>({...q,selectedBlockId:C.id})),onAddBlock:q=>D(q,C.id),onUpdate:q=>L(C.id,q),onDelete:()=>E(C.id),onDuplicate:()=>s(C.id),onMove:q=>i(C.id,q)},C.id))})})})]}),l.selectedBlockId&&!l.previewMode&&e.jsxs("div",{className:"w-80 border-l bg-white overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold",children:"Î∏îÎ°ù Ìé∏Ïßë"})}),e.jsx("div",{className:"p-4",children:e.jsx(_a,{block:l.template.blocks.find(C=>C.id===l.selectedBlockId),onChange:C=>L(l.selectedBlockId,C)})})]})]})})})};function Ha(a){switch(a){case"hero":return{title:"Hero Title",subtitle:"Hero subtitle text",backgroundImage:"",buttons:[{text:"Get Started",url:"#",style:"primary"}]};case"heading":return{text:"Heading Text",level:2};case"paragraph":return{text:"Your paragraph text goes here..."};case"image":return{src:"",alt:"Image description",caption:""};case"button":return{text:"Button Text",url:"#",style:"primary"};case"columns":return{columns:[{content:""},{content:""}]};default:return{}}}function Oa(a){return{margin:{top:"0",right:"0",bottom:"1rem",left:"0"},padding:{top:"1rem",right:"1rem",bottom:"1rem",left:"1rem"},background:{type:"none"},border:{},animation:{type:"none",duration:300,delay:0,trigger:"page-load"},visibility:{desktop:!0,tablet:!0,mobile:!0}}}const Ua=({onClose:a,onImport:c})=>{const g=he(),[j,t]=f.useState({category:void 0,search:"",isPremium:void 0,rating:void 0}),[l,w]=f.useState(null),[h,v]=f.useState("all"),{data:n,isLoading:o}=ne({queryKey:["template-library",j],queryFn:async()=>{const s=new URLSearchParams;return j.search&&s.append("search",j.search),j.category&&s.append("category",j.category),j.isPremium!==void 0&&s.append("isPremium",j.isPremium.toString()),j.rating&&s.append("rating",j.rating.toString()),(await V.api.get(`/template-library?${s}`)).data}}),N=G({mutationFn:async s=>V.api.post(`/template-library/${s}/import`),onSuccess:()=>{M.success("ÌÖúÌîåÎ¶øÏù¥ Í∞ÄÏ†∏ÏôÄÏ°åÏäµÎãàÎã§"),g.invalidateQueries({queryKey:["templates"]}),c()},onError:()=>{M.error("Í∞ÄÏ†∏Ïò§Í∏∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),m=s=>{if(s.isPremium){M("ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÖúÌîåÎ¶øÏùÄ Íµ¨Îß§Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§");return}N.mutate(s.id)},D=()=>{if(!n?.items)return[];let s=n.items;switch(h){case"free":s=s.filter(S=>!S.isPremium);break;case"premium":s=s.filter(S=>S.isPremium);break;case"featured":s=s.filter(S=>S.featured);break;case"popular":s=s.sort((S,A)=>A.popularity-S.popularity);break}return s},L=s=>({"landing-page":"bg-blue-100 text-blue-800",homepage:"bg-green-100 text-green-800",about:"bg-purple-100 text-purple-800",contact:"bg-orange-100 text-orange-800",portfolio:"bg-pink-100 text-pink-800",blog:"bg-indigo-100 text-indigo-800",ecommerce:"bg-red-100 text-red-800",business:"bg-gray-100 text-gray-800",personal:"bg-yellow-100 text-yellow-800",creative:"bg-teal-100 text-teal-800",education:"bg-cyan-100 text-cyan-800",nonprofit:"bg-lime-100 text-lime-800"})[s]||"bg-gray-100 text-gray-800",E=s=>e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(S=>e.jsx(Ke,{className:`w-3 h-3 ${S<=s?"text-yellow-400 fill-current":"text-gray-300"}`},S)),e.jsx("span",{className:"text-xs text-gray-600 ml-1",children:s.toFixed(1)})]}),i=D();return e.jsx($e,{open:!0,onOpenChange:a,children:e.jsxs(Le,{className:"max-w-6xl w-full h-[80vh] flex flex-col",children:[e.jsx(Me,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ee,{children:"ÌÖúÌîåÎ¶ø ÎùºÏù¥Î∏åÎü¨Î¶¨"}),e.jsx(u,{variant:"ghost",onClick:a,children:e.jsx(hs,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"border-b pb-4 mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(k,{placeholder:"ÌÖúÌîåÎ¶ø Í≤ÄÏÉâ...",value:j.search||"",onChange:s=>t({...j,search:s.target.value}),className:"pl-10"})]}),e.jsxs(_,{value:j.category||"all",onValueChange:s=>t({...j,category:s==="all"?void 0:s}),children:[e.jsx(K,{className:"w-[180px]",children:e.jsx(Q,{placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Î™®Îì† Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(d,{value:"homepage",children:"ÌôàÌéòÏù¥ÏßÄ"}),e.jsx(d,{value:"landing-page",children:"ÎûúÎî© ÌéòÏù¥ÏßÄ"}),e.jsx(d,{value:"blog",children:"Î∏îÎ°úÍ∑∏"}),e.jsx(d,{value:"ecommerce",children:"Ïù¥Ïª§Î®∏Ïä§"}),e.jsx(d,{value:"portfolio",children:"Ìè¨Ìä∏Ìè¥Î¶¨Ïò§"}),e.jsx(d,{value:"business",children:"ÎπÑÏ¶àÎãàÏä§"})]})]}),e.jsxs(_,{value:j.isPremium===void 0?"all":j.isPremium?"premium":"free",onValueChange:s=>t({...j,isPremium:s==="all"?void 0:s==="premium"}),children:[e.jsx(K,{className:"w-[120px]",children:e.jsx(Q,{placeholder:"Í∞ÄÍ≤©"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Ï†ÑÏ≤¥"}),e.jsx(d,{value:"free",children:"Î¨¥Î£å"}),e.jsx(d,{value:"premium",children:"ÌîÑÎ¶¨ÎØ∏ÏóÑ"})]})]})]})}),e.jsxs(ze,{value:h,onValueChange:v,className:"flex-1 flex flex-col",children:[e.jsxs(Be,{className:"grid w-full grid-cols-5",children:[e.jsx(te,{value:"all",children:"Ï†ÑÏ≤¥"}),e.jsx(te,{value:"free",children:"Î¨¥Î£å"}),e.jsx(te,{value:"premium",children:"ÌîÑÎ¶¨ÎØ∏ÏóÑ"}),e.jsx(te,{value:"featured",children:"Ï∂îÏ≤ú"}),e.jsx(te,{value:"popular",children:"Ïù∏Í∏∞"})]}),e.jsx(de,{value:h,className:"flex-1 overflow-y-auto mt-4",children:o?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):i.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(Ts,{className:"w-12 h-12 mx-auto mb-4"}),e.jsx("p",{children:"Ï°∞Í±¥Ïóê ÎßûÎäî ÌÖúÌîåÎ¶øÏù¥ ÏóÜÏäµÎãàÎã§"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>e.jsxs(z,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 relative group",children:[s.preview?.thumbnail?e.jsx("img",{src:s.preview.thumbnail,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-2 flex items-center justify-center",children:"üìÑ"}),e.jsx("p",{className:"text-sm",children:"No Preview"})]})}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{size:"sm",variant:"secondary",onClick:()=>w(s),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"ÎØ∏Î¶¨Î≥¥Í∏∞"]}),e.jsxs(u,{size:"sm",onClick:()=>m(s),disabled:N.isPending,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Í∞ÄÏ†∏Ïò§Í∏∞"]})]})}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[s.isPremium&&e.jsxs(R,{className:"bg-yellow-500 text-white",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Premium"]}),s.featured&&e.jsxs(R,{className:"bg-red-500 text-white",children:[e.jsx(Ke,{className:"w-3 h-3 mr-1"}),"Featured"]})]}),s.isPremium&&s.price&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(R,{variant:"secondary",children:["$",s.price]})})]}),e.jsxs(B,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:s.name}),e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(ra,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description}),e.jsx("div",{className:"mb-3",children:e.jsx(R,{className:L(s.category),children:s.category})}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ss,{className:"w-3 h-3"}),s.metadata.downloads]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ca,{className:"w-3 h-3"}),s.popularity]})]}),E(s.metadata.rating)]}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[s.metadata.tags.slice(0,3).map(S=>e.jsx(R,{variant:"outline",className:"text-xs",children:S},S)),s.metadata.tags.length>3&&e.jsxs(R,{variant:"outline",className:"text-xs",children:["+",s.metadata.tags.length-3]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>w(s),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"ÎØ∏Î¶¨Î≥¥Í∏∞"]}),e.jsxs(u,{size:"sm",className:"flex-1",onClick:()=>m(s),disabled:N.isPending,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),s.isPremium?"Íµ¨Îß§":"Í∞ÄÏ†∏Ïò§Í∏∞"]})]})]})]},s.id))})})]})]}),l&&e.jsx($e,{open:!0,onOpenChange:()=>w(null),children:e.jsxs(Le,{className:"max-w-4xl",children:[e.jsx(Me,{children:e.jsx(Ee,{children:l.name})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:l.preview?.thumbnail?e.jsx("img",{src:l.preview.thumbnail,alt:l.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No preview available"})}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:l.description}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(R,{className:L(l.category),children:l.category}),l.isPremium&&e.jsxs(R,{className:"bg-yellow-500 text-white",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Premium $",l.price]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ss,{className:"w-4 h-4"}),l.metadata.downloads," downloads"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(As,{className:"w-4 h-4"}),"Updated ",l.metadata.author]}),E(l.metadata.rating)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>w(null),children:"Îã´Í∏∞"}),e.jsxs(u,{onClick:()=>{m(l),w(null)},disabled:N.isPending,children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),l.isPremium?"Íµ¨Îß§ÌïòÍ∏∞":"Í∞ÄÏ†∏Ïò§Í∏∞"]})]})]})]})]})})]})})},Ya=()=>{const a=he(),[c,g]=f.useState("grid"),[j,t]=f.useState(""),[l,w]=f.useState("all"),[h,v]=f.useState("all"),[n,o]=f.useState("all"),[N,m]=f.useState(!1),[D,L]=f.useState(!1),[E,i]=f.useState(null),[s,S]=f.useState(1),A=12,{data:T,isLoading:Z,refetch:P}=ne({queryKey:["templates",{search:j,category:l,type:h,status:n,page:s,limit:A}],queryFn:async()=>{const b=new URLSearchParams({page:s.toString(),limit:A.toString()});return j&&b.append("search",j),l!=="all"&&b.append("category",l),h!=="all"&&b.append("type",h),n!=="all"&&b.append("status",n),(await V.api.get(`/templates?${b}`)).data}}),se=G({mutationFn:async b=>V.api.delete(`/templates/${b}`),onSuccess:()=>{a.invalidateQueries({queryKey:["templates"]}),M.success("ÌÖúÌîåÎ¶øÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),C=G({mutationFn:async b=>V.api.post(`/templates/${b}/duplicate`),onSuccess:()=>{a.invalidateQueries({queryKey:["templates"]}),M.success("ÌÖúÌîåÎ¶øÏù¥ Î≥µÏ†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{M.error("Î≥µÏ†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),q=b=>({"landing-page":"bg-blue-100 text-blue-800",homepage:"bg-green-100 text-green-800",about:"bg-purple-100 text-purple-800",contact:"bg-orange-100 text-orange-800",portfolio:"bg-pink-100 text-pink-800",blog:"bg-indigo-100 text-indigo-800",ecommerce:"bg-red-100 text-red-800",business:"bg-gray-100 text-gray-800",personal:"bg-yellow-100 text-yellow-800",creative:"bg-teal-100 text-teal-800",education:"bg-cyan-100 text-cyan-800",nonprofit:"bg-lime-100 text-lime-800"})[b]||"bg-gray-100 text-gray-800",r=b=>{switch(b){case"page":return"üìÑ";case"post":return"üìù";case"category":return"üìÅ";case"archive":return"üìö";case"search":return"üîç";case"404":return"‚ùå";case"email":return"üìß";case"popup":return"üí¨";default:return"üìÑ"}},I=()=>{i(null),m(!0)},U=b=>{i(b),m(!0)},y=b=>{confirm(`Ï†ïÎßê "${b.name}" ÌÖúÌîåÎ¶øÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)&&se.mutate(b.id)},$=b=>{C.mutate(b.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ÌÖúÌîåÎ¶ø Í¥ÄÎ¶¨"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ÌéòÏù¥ÏßÄ Î∞è Ïª®ÌÖêÏ∏† ÌÖúÌîåÎ¶øÏùÑ Í¥ÄÎ¶¨Ìï©ÎãàÎã§"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(u,{variant:"outline",onClick:()=>L(!0),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"ÌÖúÌîåÎ¶ø ÎùºÏù¥Î∏åÎü¨Î¶¨"]}),e.jsxs(u,{onClick:I,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏÉà ÌÖúÌîåÎ¶ø"]})]})]}),e.jsx(z,{children:e.jsx(B,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(k,{placeholder:"ÌÖúÌîåÎ¶ø Í≤ÄÏÉâ...",value:j,onChange:b=>t(b.target.value),className:"pl-10"})]}),e.jsxs(_,{value:l,onValueChange:w,children:[e.jsx(K,{className:"w-[180px]",children:e.jsx(Q,{placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Î™®Îì† Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(d,{value:"homepage",children:"ÌôàÌéòÏù¥ÏßÄ"}),e.jsx(d,{value:"landing-page",children:"ÎûúÎî© ÌéòÏù¥ÏßÄ"}),e.jsx(d,{value:"blog",children:"Î∏îÎ°úÍ∑∏"}),e.jsx(d,{value:"ecommerce",children:"Ïù¥Ïª§Î®∏Ïä§"}),e.jsx(d,{value:"portfolio",children:"Ìè¨Ìä∏Ìè¥Î¶¨Ïò§"}),e.jsx(d,{value:"business",children:"ÎπÑÏ¶àÎãàÏä§"})]})]}),e.jsxs(_,{value:h,onValueChange:v,children:[e.jsx(K,{className:"w-[150px]",children:e.jsx(Q,{placeholder:"ÌÉÄÏûÖ"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Î™®Îì† ÌÉÄÏûÖ"}),e.jsx(d,{value:"page",children:"ÌéòÏù¥ÏßÄ"}),e.jsx(d,{value:"post",children:"Ìè¨Ïä§Ìä∏"}),e.jsx(d,{value:"email",children:"Ïù¥Î©îÏùº"}),e.jsx(d,{value:"popup",children:"ÌåùÏóÖ"})]})]}),e.jsxs(_,{value:n,onValueChange:o,children:[e.jsx(K,{className:"w-[150px]",children:e.jsx(Q,{placeholder:"ÏÉÅÌÉú"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Î™®Îì† ÏÉÅÌÉú"}),e.jsx(d,{value:"draft",children:"Ï¥àÏïà"}),e.jsx(d,{value:"published",children:"Í≤åÏãúÎê®"}),e.jsx(d,{value:"archived",children:"Î≥¥Í¥ÄÎê®"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[e.jsx(u,{variant:c==="grid"?"default":"ghost",size:"sm",onClick:()=>g("grid"),children:e.jsx(Bs,{className:"w-4 h-4"})}),e.jsx(u,{variant:c==="list"?"default":"ghost",size:"sm",onClick:()=>g("list"),children:e.jsx(Ue,{className:"w-4 h-4"})})]})]})})}),Z?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):T?.templates?.length===0?e.jsx(z,{children:e.jsxs(B,{className:"text-center py-12",children:[e.jsx(Je,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"ÌÖúÌîåÎ¶øÏù¥ ÏóÜÏäµÎãàÎã§"}),e.jsxs(u,{onClick:I,children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Ï≤´ ÌÖúÌîåÎ¶ø ÎßåÎì§Í∏∞"]})]})}):c==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:T?.templates?.map(b=>e.jsxs(z,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 relative",children:[b.preview?.thumbnail?e.jsx("img",{src:b.preview.thumbnail,alt:b.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(Je,{className:"w-12 h-12"})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx("span",{className:"text-2xl",children:r(b.type)})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(Pe,{children:[e.jsx(Ie,{children:e.jsx(u,{variant:"ghost",size:"sm",className:"bg-white/80 hover:bg-white",children:e.jsx(ke,{className:"w-4 h-4"})})}),e.jsxs(De,{align:"end",children:[e.jsxs(X,{onClick:()=>U(b),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),e.jsxs(X,{onClick:()=>$(b),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),e.jsx(Te,{}),e.jsxs(X,{onClick:()=>y(b),className:"text-red-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})})]}),e.jsxs(B,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",children:b.name}),b.metadata?.featured&&e.jsx(Ke,{className:"w-4 h-4 text-yellow-500 flex-shrink-0 ml-2"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:b.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(R,{className:q(b.category),children:b.category}),e.jsx(R,{variant:b.status==="published"?"default":b.status==="draft"?"secondary":"outline",children:b.status})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:["ÏÇ¨Ïö©: ",b.metadata?.usageCount||0,"Ìöå"]}),e.jsx("span",{children:new Date(b.updatedAt).toLocaleDateString()})]})]})]},b.id))}):e.jsx(z,{children:e.jsx(B,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÌÖúÌîåÎ¶ø"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÏÉÅÌÉú"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÏÇ¨Ïö©ÌöüÏàò"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÏàòÏ†ïÏùº"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÏûëÏóÖ"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:T?.templates?.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-lg",children:r(b.type)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:b.name}),e.jsx("div",{className:"text-sm text-gray-500",children:b.description})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(R,{className:q(b.category),children:b.category})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(R,{variant:b.status==="published"?"default":b.status==="draft"?"secondary":"outline",children:b.status})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:b.metadata?.usageCount||0}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(b.updatedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs(Pe,{children:[e.jsx(Ie,{children:e.jsx(u,{variant:"ghost",size:"sm",children:e.jsx(ke,{className:"w-4 h-4"})})}),e.jsxs(De,{align:"end",children:[e.jsxs(X,{onClick:()=>U(b),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),e.jsxs(X,{onClick:()=>$(b),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),e.jsx(Te,{}),e.jsxs(X,{onClick:()=>y(b),className:"text-red-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})})]},b.id))})]})})})}),T&&T.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:()=>S(s-1),disabled:s===1,children:"Ïù¥Ï†Ñ"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s," / ",T.totalPages]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>S(s+1),disabled:s===T.totalPages,children:"Îã§Ïùå"})]}),N&&e.jsx(Qa,{template:E,onClose:()=>{m(!1),i(null)},onSave:()=>{P(),m(!1),i(null)}}),D&&e.jsx(Ua,{onClose:()=>L(!1),onImport:()=>{P(),L(!1)}})]})},Ss=[{type:"text",name:"ÌÖçÏä§Ìä∏",description:"ÏùºÎ∞ò ÌÖçÏä§Ìä∏ ÏΩòÌÖêÏ∏†",icon:e.jsx(Ae,{className:"w-5 h-5"}),category:"content",defaultContent:{text:"",autoP:!0}},{type:"html",name:"HTML",description:"Ïª§Ïä§ÌÖÄ HTML ÏΩîÎìú",icon:e.jsx(Ms,{className:"w-5 h-5"}),category:"advanced",defaultContent:{html:""}},{type:"image",name:"Ïù¥ÎØ∏ÏßÄ",description:"Îã®Ïùº Ïù¥ÎØ∏ÏßÄ",icon:e.jsx(be,{className:"w-5 h-5"}),category:"media",defaultContent:{url:"",alt:"",size:"medium"}},{type:"menu",name:"Î©îÎâ¥",description:"ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î©îÎâ¥",icon:e.jsx(da,{className:"w-5 h-5"}),category:"navigation",defaultContent:{menuId:"",showHierarchy:!0,maxDepth:3}},{type:"recent-posts",name:"ÏµúÍ∑º Í≤åÏãúÍ∏Ä",description:"ÏµúÏã† Í≤åÏãúÍ∏Ä Î™©Î°ù",icon:e.jsx(ve,{className:"w-5 h-5"}),category:"content",defaultContent:{count:5,showDate:!0,showExcerpt:!1,excerptLength:100}},{type:"categories",name:"Ïπ¥ÌÖåÍ≥†Î¶¨",description:"Í≤åÏãúÍ∏Ä Ïπ¥ÌÖåÍ≥†Î¶¨ Î™©Î°ù",icon:e.jsx(cs,{className:"w-5 h-5"}),category:"navigation",defaultContent:{showPostCount:!0,showHierarchy:!0,hideEmpty:!0}},{type:"search",name:"Í≤ÄÏÉâ",description:"Í≤ÄÏÉâ Ìèº",icon:e.jsx(Ce,{className:"w-5 h-5"}),category:"forms",defaultContent:{placeholder:"Í≤ÄÏÉâ...",buttonText:"Í≤ÄÏÉâ",searchCategories:!1}},{type:"social-links",name:"ÏÜåÏÖú ÎßÅÌÅ¨",description:"ÏÜåÏÖú ÎØ∏ÎîîÏñ¥ ÎßÅÌÅ¨",icon:e.jsx(Es,{className:"w-5 h-5"}),category:"social",defaultContent:{links:[],style:"icons",size:"medium",openInNewTab:!0}},{type:"contact-info",name:"Ïó∞ÎùΩÏ≤ò Ï†ïÎ≥¥",description:"Ïó∞ÎùΩÏ≤ò Î∞è Ï£ºÏÜå Ï†ïÎ≥¥",icon:e.jsx(oa,{className:"w-5 h-5"}),category:"content",defaultContent:{address:"",phone:"",email:"",showMap:!1}},{type:"newsletter",name:"Îâ¥Ïä§Î†àÌÑ∞",description:"Ïù¥Î©îÏùº Íµ¨ÎèÖ Ìèº",icon:e.jsx(_e,{className:"w-5 h-5"}),category:"forms",defaultContent:{title:"Îâ¥Ïä§Î†àÌÑ∞ Íµ¨ÎèÖ",description:"ÏµúÏã† ÏÜåÏãùÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî",placeholder:"Ïù¥Î©îÏùº Ï£ºÏÜå",buttonText:"Íµ¨ÎèÖÌïòÍ∏∞",successMessage:"Íµ¨ÎèÖÌï¥Ï£ºÏÖîÏÑú Í∞êÏÇ¨Ìï©ÎãàÎã§!",provider:"custom"}}],Wa=({widget:a,onSave:c,onCancel:g})=>{const[j,t]=f.useState(a?.type||"text"),[l,w]=f.useState({title:a?.title||"",position:a?.position||"footer-1",content:a?.content||{},settings:a?.settings||Ga()}),h=!!a,v=Ss.find(s=>s.type===j);f.useEffect(()=>{!h&&v&&w(s=>({...s,content:v.defaultContent}))},[j,v,h]);const n=G({mutationFn:async s=>V.api.post("/widgets",s),onSuccess:()=>{M.success("ÏúÑÏ†ØÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§"),c()},onError:()=>{M.error("ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),o=G({mutationFn:async s=>V.api.put(`/widgets/${a.id}`,s),onSuccess:()=>{M.success("ÏúÑÏ†ØÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),c()},onError:()=>{M.error("ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),N=()=>{if(!l.title.trim()){M.error("ÏúÑÏ†Ø Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî");return}h?o.mutate({title:l.title,content:l.content,settings:l.settings,position:l.position}):n.mutate({type:j,title:l.title,content:l.content,position:l.position,settings:l.settings})},m=(s,S)=>{w(A=>({...A,content:{...A.content,[s]:S}}))},D=(s,S)=>{w(A=>({...A,settings:{...A.settings,[s]:S}}))},L=(s,S,A)=>{w(T=>({...T,settings:{...T.settings,[s]:{...T.settings[s]||{},[S]:A}}}))},E=()=>{switch(j){case"text":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"ÌÖçÏä§Ìä∏ ÎÇ¥Ïö©"}),e.jsx(re,{value:l.content.text||"",onChange:s=>m("text",s.target.value),placeholder:"ÌÖçÏä§Ìä∏ ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:6})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{checked:l.content.autoP||!1,onCheckedChange:s=>m("autoP",s)}),e.jsx(x,{children:"ÏûêÎèô Îã®ÎùΩ ÎÇòÎàÑÍ∏∞"})]})]});case"html":return e.jsxs("div",{children:[e.jsx(x,{children:"HTML ÏΩîÎìú"}),e.jsx(re,{value:l.content.html||"",onChange:s=>m("html",s.target.value),placeholder:"HTML ÏΩîÎìúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:8,className:"font-mono text-sm"})]});case"image":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Ïù¥ÎØ∏ÏßÄ URL"}),e.jsx(k,{value:l.content.url||"",onChange:s=>m("url",s.target.value),placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÎåÄÏ≤¥ ÌÖçÏä§Ìä∏"}),e.jsx(k,{value:l.content.alt||"",onChange:s=>m("alt",s.target.value),placeholder:"Ïù¥ÎØ∏ÏßÄ ÏÑ§Î™Ö"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÎßÅÌÅ¨ URL (ÏÑ†ÌÉùÏÇ¨Ìï≠)"}),e.jsx(k,{value:l.content.link||"",onChange:s=>m("link",s.target.value),placeholder:"https://example.com"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í∏∞"}),e.jsxs(_,{value:l.content.size||"medium",onValueChange:s=>m("size",s),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"thumbnail",children:"Ïç∏ÎÑ§Ïùº"}),e.jsx(d,{value:"medium",children:"Ï§ëÍ∞Ñ"}),e.jsx(d,{value:"large",children:"ÌÅ∞"}),e.jsx(d,{value:"full",children:"Ï†ÑÏ≤¥"})]})]})]})]});case"recent-posts":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"ÌëúÏãúÌï† Í≤åÏãúÍ∏Ä Ïàò"}),e.jsx(k,{type:"number",value:l.content.count||5,onChange:s=>m("count",parseInt(s.target.value)||5),min:"1",max:"20"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{checked:l.content.showDate||!1,onCheckedChange:s=>m("showDate",s)}),e.jsx(x,{children:"ÎÇ†Ïßú ÌëúÏãú"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{checked:l.content.showExcerpt||!1,onCheckedChange:s=>m("showExcerpt",s)}),e.jsx(x,{children:"ÏöîÏïΩ ÌëúÏãú"})]}),l.content.showExcerpt&&e.jsxs("div",{children:[e.jsx(x,{children:"ÏöîÏïΩ Í∏∏Ïù¥"}),e.jsx(k,{type:"number",value:l.content.excerptLength||100,onChange:s=>m("excerptLength",parseInt(s.target.value)||100),min:"50",max:"300"})]})]});case"search":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî"}),e.jsx(k,{value:l.content.placeholder||"",onChange:s=>m("placeholder",s.target.value),placeholder:"Í≤ÄÏÉâ..."})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Î≤ÑÌäº ÌÖçÏä§Ìä∏"}),e.jsx(k,{value:l.content.buttonText||"",onChange:s=>m("buttonText",s.target.value),placeholder:"Í≤ÄÏÉâ"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{checked:l.content.searchCategories||!1,onCheckedChange:s=>m("searchCategories",s)}),e.jsx(x,{children:"Ïπ¥ÌÖåÍ≥†Î¶¨ Í≤ÄÏÉâ Ìè¨Ìï®"})]})]});case"social-links":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"ÌëúÏãú Ïä§ÌÉÄÏùº"}),e.jsxs(_,{value:l.content.style||"icons",onValueChange:s=>m("style",s),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"icons",children:"ÏïÑÏù¥ÏΩòÎßå"}),e.jsx(d,{value:"buttons",children:"Î≤ÑÌäº"}),e.jsx(d,{value:"text",children:"ÌÖçÏä§Ìä∏"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÌÅ¨Í∏∞"}),e.jsxs(_,{value:l.content.size||"medium",onValueChange:s=>m("size",s),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"small",children:"ÏûëÏùå"}),e.jsx(d,{value:"medium",children:"Ï§ëÍ∞Ñ"}),e.jsx(d,{value:"large",children:"ÌÅº"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{checked:l.content.openInNewTab||!0,onCheckedChange:s=>m("openInNewTab",s)}),e.jsx(x,{children:"ÏÉà ÌÉ≠ÏóêÏÑú Ïó¥Í∏∞"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÏÜåÏÖú ÎßÅÌÅ¨"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[(l.content.links||[]).map((s,S)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{value:String(s.platform||""),onValueChange:A=>{const T=[...l.content.links||[]];T[S]={...s,platform:A},m("links",T)},children:[e.jsx(K,{className:"w-32",children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"facebook",children:"Facebook"}),e.jsx(d,{value:"twitter",children:"Twitter"}),e.jsx(d,{value:"instagram",children:"Instagram"}),e.jsx(d,{value:"youtube",children:"YouTube"}),e.jsx(d,{value:"linkedin",children:"LinkedIn"})]})]}),e.jsx(k,{value:String(s.url||""),onChange:A=>{const T=[...l.content.links||[]];T[S]={...s,url:A.target.value},m("links",T)},placeholder:"URL",className:"flex-1"}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{const A=(l.content.links||[]).filter((T,Z)=>Z!==S);m("links",A)},children:e.jsx(hs,{className:"w-4 h-4"})})]},S)),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>{const s=[...l.content.links||[],{platform:"facebook",url:""}];m("links",s)},children:"ÎßÅÌÅ¨ Ï∂îÍ∞Ä"})]})]})]});case"contact-info":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Ï£ºÏÜå"}),e.jsx(re,{value:l.content.address||"",onChange:s=>m("address",s.target.value),placeholder:"Ï£ºÏÜåÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:2})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Ï†ÑÌôîÎ≤àÌò∏"}),e.jsx(k,{value:l.content.phone||"",onChange:s=>m("phone",s.target.value),placeholder:"02-1234-5678"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Ïù¥Î©îÏùº"}),e.jsx(k,{value:l.content.email||"",onChange:s=>m("email",s.target.value),placeholder:"contact@example.com"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÏõπÏÇ¨Ïù¥Ìä∏"}),e.jsx(k,{value:l.content.website||"",onChange:s=>m("website",s.target.value),placeholder:"https://example.com"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{checked:l.content.showMap||!1,onCheckedChange:s=>m("showMap",s)}),e.jsx(x,{children:"ÏßÄÎèÑ ÌëúÏãú"})]})]});case"newsletter":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"Ï†úÎ™©"}),e.jsx(k,{value:l.content.title||"",onChange:s=>m("title",s.target.value),placeholder:"Îâ¥Ïä§Î†àÌÑ∞ Íµ¨ÎèÖ"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÏÑ§Î™Ö"}),e.jsx(re,{value:l.content.description||"",onChange:s=>m("description",s.target.value),placeholder:"ÏµúÏã† ÏÜåÏãùÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî",rows:2})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî"}),e.jsx(k,{value:l.content.placeholder||"",onChange:s=>m("placeholder",s.target.value),placeholder:"Ïù¥Î©îÏùº Ï£ºÏÜå"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Î≤ÑÌäº ÌÖçÏä§Ìä∏"}),e.jsx(k,{value:l.content.buttonText||"",onChange:s=>m("buttonText",s.target.value),placeholder:"Íµ¨ÎèÖÌïòÍ∏∞"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÏÑ±Í≥µ Î©îÏãúÏßÄ"}),e.jsx(k,{value:l.content.successMessage||"",onChange:s=>m("successMessage",s.target.value),placeholder:"Íµ¨ÎèÖÌï¥Ï£ºÏÖîÏÑú Í∞êÏÇ¨Ìï©ÎãàÎã§!"})]})]});default:return e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Fe,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("p",{children:"Ïù¥ ÏúÑÏ†Ø ÌÉÄÏûÖÏóê ÎåÄÌïú Ìé∏ÏßëÍ∏∞Í∞Ä Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§."})]})}},i=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{className:"text-sm",children:"ÌëúÏãú ÏÑ§Ï†ï"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm",children:"Îç∞Ïä§ÌÅ¨ÌÜ±ÏóêÏÑú ÌëúÏãú"}),e.jsx(ee,{checked:l.settings.visibility?.desktop!==!1,onCheckedChange:s=>L("visibility","desktop",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm",children:"ÌÉúÎ∏îÎ¶øÏóêÏÑú ÌëúÏãú"}),e.jsx(ee,{checked:l.settings.visibility?.tablet!==!1,onCheckedChange:s=>L("visibility","tablet",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(x,{className:"text-sm",children:"Î™®Î∞îÏùºÏóêÏÑú ÌëúÏãú"}),e.jsx(ee,{checked:l.settings.visibility?.mobile!==!1,onCheckedChange:s=>L("visibility","mobile",s)})]})]})]}),e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{className:"text-sm",children:"Ïï†ÎãàÎ©îÏù¥ÏÖò"})}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"ÌÉÄÏûÖ"}),e.jsxs(_,{value:l.settings.animation?.type||"none",onValueChange:s=>L("animation","type",s),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"none",children:"ÏóÜÏùå"}),e.jsx(d,{value:"fade",children:"ÌéòÏù¥Îìú"}),e.jsx(d,{value:"slide",children:"Ïä¨ÎùºÏù¥Îìú"}),e.jsx(d,{value:"bounce",children:"Î∞îÏö¥Ïä§"})]})]})]}),l.settings.animation?.type!=="none"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"ÏßÄÏÜçÏãúÍ∞Ñ (ms)"}),e.jsx(He,{value:[l.settings.animation?.duration||300],onValueChange:([s])=>L("animation","duration",s),max:2e3,min:100,step:100}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.settings.animation?.duration||300,"ms"]})]}),e.jsxs("div",{children:[e.jsx(x,{className:"text-sm",children:"ÏßÄÏó∞ÏãúÍ∞Ñ (ms)"}),e.jsx(He,{value:[l.settings.animation?.delay||0],onValueChange:([s])=>L("animation","delay",s),max:1e3,min:0,step:100}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[l.settings.animation?.delay||0,"ms"]})]})]})]})]}),e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{className:"text-sm",children:"Ïª§Ïä§ÌÖÄ CSS"})}),e.jsx(B,{children:e.jsx(re,{value:l.settings.customCSS||"",onChange:s=>D("customCSS",s.target.value),placeholder:".my-widget { color: red; }",rows:4,className:"font-mono text-sm"})})]})]});return e.jsx($e,{open:!0,onOpenChange:g,children:e.jsxs(Le,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(Me,{children:e.jsx(Ee,{children:h?"ÏúÑÏ†Ø Ìé∏Ïßë":"ÏÉà ÏúÑÏ†Ø Ï∂îÍ∞Ä"})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[e.jsxs("div",{className:"space-y-6",children:[!h&&e.jsxs("div",{children:[e.jsx(x,{children:"ÏúÑÏ†Ø ÌÉÄÏûÖ"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:Ss.map(s=>e.jsxs(u,{variant:j===s.type?"default":"outline",size:"sm",onClick:()=>t(s.type),className:"flex flex-col h-auto p-3",children:[s.icon,e.jsx("span",{className:"text-xs mt-1",children:s.name})]},s.type))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{children:"ÏúÑÏ†Ø Ï†úÎ™©"}),e.jsx(k,{value:l.title,onChange:s=>w(S=>({...S,title:s.target.value})),placeholder:"ÏúÑÏ†Ø Ï†úÎ™©"})]}),e.jsxs("div",{children:[e.jsx(x,{children:"ÏúÑÏπò"}),e.jsxs(_,{value:l.position,onValueChange:s=>w(S=>({...S,position:s})),children:[e.jsx(K,{children:e.jsx(Q,{})}),e.jsxs(H,{children:[e.jsx(d,{value:"footer-1",children:"Ìë∏ÌÑ∞ 1"}),e.jsx(d,{value:"footer-2",children:"Ìë∏ÌÑ∞ 2"}),e.jsx(d,{value:"footer-3",children:"Ìë∏ÌÑ∞ 3"}),e.jsx(d,{value:"footer-4",children:"Ìë∏ÌÑ∞ 4"}),e.jsx(d,{value:"sidebar-main",children:"Î©îÏù∏ ÏÇ¨Ïù¥ÎìúÎ∞î"}),e.jsx(d,{value:"sidebar-shop",children:"ÏáºÌïë ÏÇ¨Ïù¥ÎìúÎ∞î"}),e.jsx(d,{value:"header-top",children:"Ìó§Îçî ÏÉÅÎã®"}),e.jsx(d,{value:"header-bottom",children:"Ìó§Îçî ÌïòÎã®"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ee,{checked:l.settings.showTitle,onCheckedChange:s=>D("showTitle",s)}),e.jsx(x,{children:"Ï†úÎ™© ÌëúÏãú"})]})]})]}),e.jsx("div",{className:"lg:col-span-2 overflow-y-auto",children:e.jsxs(ze,{defaultValue:"content",className:"h-full",children:[e.jsxs(Be,{className:"grid w-full grid-cols-3",children:[e.jsx(te,{value:"content",children:"ÎÇ¥Ïö©"}),e.jsx(te,{value:"settings",children:"ÏÑ§Ï†ï"}),e.jsx(te,{value:"preview",children:"ÎØ∏Î¶¨Î≥¥Í∏∞"})]}),e.jsx(de,{value:"content",className:"space-y-4 mt-4",children:E()}),e.jsx(de,{value:"settings",className:"mt-4",children:i()}),e.jsx(de,{value:"preview",className:"mt-4",children:e.jsxs(z,{children:[e.jsx(Y,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"ÎØ∏Î¶¨Î≥¥Í∏∞"]})}),e.jsx(B,{children:e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("p",{children:"ÏúÑÏ†Ø ÎØ∏Î¶¨Î≥¥Í∏∞"}),e.jsx("p",{className:"text-sm mt-1",children:"Ïã§Ï†ú ÏÇ¨Ïù¥Ìä∏ÏóêÏÑúÏùò Î™®ÏäµÏùÑ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§"})]})})})]})})]})})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(u,{variant:"outline",onClick:g,children:"Ï∑®ÏÜå"}),e.jsxs(u,{onClick:N,disabled:n.isPending||o.isPending,children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),h?"ÏàòÏ†ï":"ÏÉùÏÑ±"]})]})]})})};function Ga(){return{showTitle:!0,visibility:{desktop:!0,tablet:!0,mobile:!0},animation:{type:"none",duration:300,delay:0},spacing:{margin:{top:"0",right:"0",bottom:"1rem",left:"0"},padding:{top:"1rem",right:"1rem",bottom:"1rem",left:"1rem"}},styling:{textAlign:"left"}}}const Ja=({onApplyTemplate:a})=>{const[c,g]=f.useState(""),[j,t]=f.useState("all"),[l,w]=f.useState("grid"),[h,v]=f.useState(!1),{data:n=[],isLoading:o}=ne({queryKey:["widget-templates",j,c,h],queryFn:async()=>{const i=new URLSearchParams;return j!=="all"&&i.append("category",j),c&&i.append("search",c),h&&i.append("premium","true"),(await V.api.get(`/widget-templates?${i}`)).data.templates}}),N=G({mutationFn:async i=>V.api.post(`/widget-templates/${i}/apply`,{targetArea:"footer-1",replaceExisting:!1}),onSuccess:()=>{M.success("ÏúÑÏ†Ø ÌÖúÌîåÎ¶øÏù¥ Ï†ÅÏö©ÎêòÏóàÏäµÎãàÎã§"),a()},onError:()=>{M.error("ÌÖúÌîåÎ¶ø Ï†ÅÏö©Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),m=i=>{if(i.isPremium){M("ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÖúÌîåÎ¶øÏùÄ Íµ¨Îß§Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§");return}N.mutate(i.id)},D=i=>({content:"ÏΩòÌÖêÏ∏†",navigation:"ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò",social:"ÏÜåÏÖú",forms:"Ìèº",media:"ÎØ∏ÎîîÏñ¥",advanced:"Í≥†Í∏â"})[i]||i,L=n.filter(i=>{const s=i.name.toLowerCase().includes(c.toLowerCase())||i.description.toLowerCase().includes(c.toLowerCase()),S=j==="all"||i.category===j,A=!h||i.isPremium;return s&&S&&A}),E=i=>e.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(s=>e.jsx(Ke,{className:`w-3 h-3 ${s<=i?"text-yellow-400 fill-current":"text-gray-300"}`},s)),e.jsx("span",{className:"text-xs text-gray-600 ml-1",children:i.toFixed(1)})]});return o?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"ÏúÑÏ†Ø ÌÖúÌîåÎ¶øÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"ÏúÑÏ†Ø ÎùºÏù¥Î∏åÎü¨Î¶¨"}),e.jsx("p",{className:"text-gray-600",children:"ÎØ∏Î¶¨ ÎßåÎì§Ïñ¥ÏßÑ ÏúÑÏ†Ø ÌÖúÌîåÎ¶øÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ Îπ†Î•¥Í≤å ÏÇ¨Ïù¥Ìä∏Î•º Íµ¨ÏÑ±ÌïòÏÑ∏Ïöî"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:l==="grid"?"default":"outline",size:"sm",onClick:()=>w("grid"),children:e.jsx(Bs,{className:"w-4 h-4"})}),e.jsx(u,{variant:l==="list"?"default":"outline",size:"sm",onClick:()=>w("list"),children:e.jsx(Ue,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(k,{placeholder:"ÌÖúÌîåÎ¶ø Í≤ÄÏÉâ...",value:c,onChange:i=>g(i.target.value),className:"pl-10"})]})}),e.jsxs(_,{value:j,onValueChange:i=>t(i),children:[e.jsx(K,{className:"w-48",children:e.jsx(Q,{placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Î™®Îì† Ïπ¥ÌÖåÍ≥†Î¶¨"}),e.jsx(d,{value:"content",children:"ÏΩòÌÖêÏ∏†"}),e.jsx(d,{value:"navigation",children:"ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"}),e.jsx(d,{value:"social",children:"ÏÜåÏÖú"}),e.jsx(d,{value:"forms",children:"Ìèº"}),e.jsx(d,{value:"media",children:"ÎØ∏ÎîîÏñ¥"}),e.jsx(d,{value:"advanced",children:"Í≥†Í∏â"})]})]}),e.jsxs(u,{variant:h?"default":"outline",onClick:()=>v(!h),className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4"}),"ÌîÑÎ¶¨ÎØ∏ÏóÑÎßå"]})]}),l==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(i=>e.jsxs(z,{className:"group hover:shadow-lg transition-shadow",children:[e.jsxs(Y,{className:"pb-2",children:[e.jsxs("div",{className:"aspect-video bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg mb-3 relative overflow-hidden",children:[i.preview?e.jsx("img",{src:i.preview,alt:i.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsx(le,{className:"w-8 h-8"})}),i.isPremium&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(R,{className:"bg-yellow-500 text-white",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Premium"]})})]}),e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(W,{className:"text-lg",children:i.name}),e.jsx(R,{variant:"outline",className:"mt-1",children:D(i.category)})]})})]}),e.jsxs(B,{className:"pt-0",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:i.description}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E(i.rating),e.jsx("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),i.downloads.toLocaleString()]})})]}),e.jsx(u,{className:"w-full",onClick:()=>m(i),disabled:N.isPending,children:i.isPremium?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Íµ¨Îß§ÌïòÍ∏∞"]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Ï†ÅÏö©ÌïòÍ∏∞"]})})]})]},i.id))}):e.jsx("div",{className:"space-y-4",children:L.map(i=>e.jsx(z,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-16 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg flex-shrink-0 overflow-hidden",children:i.preview?e.jsx("img",{src:i.preview,alt:i.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsx(le,{className:"w-6 h-6"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-start justify-between mb-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium",children:i.name}),i.isPremium&&e.jsxs(R,{className:"bg-yellow-500 text-white",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),"Premium"]}),e.jsx(R,{variant:"outline",children:D(i.category)})]})}),e.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-1",children:i.description}),e.jsxs("div",{className:"flex items-center gap-4",children:[E(i.rating),e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"}),i.downloads.toLocaleString(),"Ìöå Îã§Ïö¥Î°úÎìú"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"ÎØ∏Î¶¨Î≥¥Í∏∞"]}),e.jsx(u,{size:"sm",onClick:()=>m(i),disabled:N.isPending,children:i.isPremium?e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Íµ¨Îß§"]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Ï†ÅÏö©"]})})]})]})})},i.id))}),L.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ce,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ÌÖúÌîåÎ¶øÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Îã§Î•∏ Í≤ÄÏÉâÏñ¥ÎÇò ÌïÑÌÑ∞Î•º ÏãúÎèÑÌï¥Î≥¥ÏÑ∏Ïöî"}),e.jsx(u,{variant:"outline",onClick:()=>{g(""),t("all"),v(!1)},children:"ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî"})]}),e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Ï∂îÏ≤ú ÌÖúÌîåÎ¶ø"}),e.jsx("p",{className:"text-gray-600",children:"Ïù∏Í∏∞ ÏûàÎäî ÏúÑÏ†Ø ÌÖúÌîåÎ¶øÎì§ÏùÑ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî"})]}),e.jsxs(u,{variant:"outline",size:"sm",children:["Ï†ÑÏ≤¥ Î≥¥Í∏∞",e.jsx(xa,{className:"w-4 h-4 ml-2"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.slice(0,3).map(i=>e.jsxs(z,{className:"group hover:shadow-lg transition-shadow",children:[e.jsxs(Y,{className:"pb-2",children:[e.jsxs("div",{className:"aspect-video bg-gradient-to-br from-purple-50 to-pink-100 rounded-lg mb-3 relative overflow-hidden",children:[i.preview?e.jsx("img",{src:i.preview,alt:i.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsx(le,{className:"w-8 h-8"})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs(R,{className:"bg-purple-500 text-white",children:[e.jsx(Ke,{className:"w-3 h-3 mr-1"}),"Ï∂îÏ≤ú"]})})]}),e.jsx(W,{className:"text-base",children:i.name})]}),e.jsxs(B,{className:"pt-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[E(i.rating),e.jsxs("span",{className:"text-xs text-gray-500",children:[i.downloads.toLocaleString(),"Ìöå"]})]}),e.jsxs(u,{size:"sm",className:"w-full",onClick:()=>m(i),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"Ï†ÅÏö©ÌïòÍ∏∞"]})]})]},i.id))})]})]})},Xa=()=>{const[a,c]=f.useState("builder"),[g,j]=f.useState(""),[t,l]=f.useState("all"),[w,h]=f.useState("desktop"),[v,n]=f.useState(!1),[o,N]=f.useState(null),m=he(),{data:D,isLoading:L}=ne({queryKey:["widgets"],queryFn:async()=>(await V.api.get("/widgets")).data}),E=G({mutationFn:async r=>V.api.delete(`/widgets/${r}`),onSuccess:()=>{M.success("ÏúÑÏ†ØÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§"),m.invalidateQueries({queryKey:["widgets"]})},onError:()=>{M.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),i=G({mutationFn:async r=>V.api.patch(`/widgets/${r.id}`,{isActive:r.isActive}),onSuccess:()=>{m.invalidateQueries({queryKey:["widgets"]})}}),s=D?.widgets||[],S=D?.areas||[],A=s.filter(r=>{const I=r.title.toLowerCase().includes(g.toLowerCase())||r.type.toLowerCase().includes(g.toLowerCase()),U=t==="all"||r.position===t;return I&&U}),T=s.reduce((r,I)=>(r[I.position]||(r[I.position]=[]),r[I.position].push(I),r),{});Object.keys(T).forEach(r=>{T[r].sort((I,U)=>I.order-U.order)});const Z=r=>{N(r),n(!0)},P=r=>{confirm(`"${r.title}" ÏúÑÏ†ØÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)&&E.mutate(r.id)},se=r=>{i.mutate({id:r.id,isActive:!r.isActive})},C=r=>({"footer-1":"Ìë∏ÌÑ∞ 1","footer-2":"Ìë∏ÌÑ∞ 2","footer-3":"Ìë∏ÌÑ∞ 3","footer-4":"Ìë∏ÌÑ∞ 4","sidebar-main":"Î©îÏù∏ ÏÇ¨Ïù¥ÎìúÎ∞î","sidebar-shop":"ÏáºÌïë ÏÇ¨Ïù¥ÎìúÎ∞î","header-top":"Ìó§Îçî ÏÉÅÎã®","header-bottom":"Ìó§Îçî ÌïòÎã®"})[r]||r,q=r=>({text:"ÌÖçÏä§Ìä∏",html:"HTML",image:"Ïù¥ÎØ∏ÏßÄ",menu:"Î©îÎâ¥","recent-posts":"ÏµúÍ∑º Í≤åÏãúÍ∏Ä",categories:"Ïπ¥ÌÖåÍ≥†Î¶¨",tags:"ÌÉúÍ∑∏",archives:"ÏïÑÏπ¥Ïù¥Î∏å",search:"Í≤ÄÏÉâ","social-links":"ÏÜåÏÖú ÎßÅÌÅ¨","contact-info":"Ïó∞ÎùΩÏ≤ò Ï†ïÎ≥¥",newsletter:"Îâ¥Ïä§Î†àÌÑ∞","custom-code":"Ïª§Ïä§ÌÖÄ ÏΩîÎìú","rss-feed":"RSS ÌîºÎìú",calendar:"Ï∫òÎ¶∞Îçî"})[r]||r;return L?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"ÏúÑÏ†ØÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ÏúÑÏ†Ø Í¥ÄÎ¶¨"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ÏÇ¨Ïù¥Ìä∏Ïùò ÏúÑÏ†ØÏùÑ Í¥ÄÎ¶¨ÌïòÍ≥† Î†àÏù¥ÏïÑÏõÉÏùÑ Íµ¨ÏÑ±ÌïòÏÑ∏Ïöî"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center border rounded-lg p-1",children:[e.jsx(u,{size:"sm",variant:w==="desktop"?"default":"ghost",onClick:()=>h("desktop"),children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:w==="tablet"?"default":"ghost",onClick:()=>h("tablet"),children:e.jsx(os,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:w==="mobile"?"default":"ghost",onClick:()=>h("mobile"),children:e.jsx(xs,{className:"w-4 h-4"})})]}),e.jsxs(u,{onClick:()=>{N(null),n(!0)},children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏúÑÏ†Ø Ï∂îÍ∞Ä"]})]})]}),e.jsxs(ze,{value:a,onValueChange:r=>c(r),children:[e.jsxs(Be,{children:[e.jsx(te,{value:"builder",children:"ÏúÑÏ†Ø ÎπåÎçî"}),e.jsx(te,{value:"list",children:"Î™©Î°ù Î≥¥Í∏∞"}),e.jsx(te,{value:"library",children:"ÏúÑÏ†Ø ÎùºÏù¥Î∏åÎü¨Î¶¨"})]}),e.jsx(de,{value:"builder",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsxs(z,{children:[e.jsx(Y,{children:e.jsxs(W,{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-5 h-5"}),"ÏúÑÏ†Ø ÏòÅÏó≠"]})}),e.jsx(B,{children:e.jsx("div",{className:"space-y-6",children:S.map(r=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.description})]}),e.jsx(R,{variant:r.isActive?"default":"secondary",children:r.isActive?"ÌôúÏÑ±":"ÎπÑÌôúÏÑ±"})]}),e.jsx("div",{className:`grid gap-3 ${r.settings.columns>1?`grid-cols-${r.settings.columns}`:"grid-cols-1"}`,children:T[r.position]?.map(I=>e.jsxs("div",{className:`border rounded-lg p-3 transition-all ${I.isActive?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",className:"text-xs",children:q(I.type)}),!I.isActive&&e.jsx(R,{variant:"secondary",className:"text-xs",children:"ÎπÑÌôúÏÑ±"})]}),e.jsxs(Pe,{children:[e.jsx(Ie,{children:e.jsx(u,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",children:e.jsx(ke,{className:"w-3 h-3"})})}),e.jsxs(De,{align:"end",children:[e.jsxs(X,{onClick:()=>Z(I),children:[e.jsx(Se,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),e.jsx(X,{onClick:()=>se(I),children:I.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"ÎπÑÌôúÏÑ±Ìôî"]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"ÌôúÏÑ±Ìôî"]})}),e.jsxs(X,{children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),e.jsx(Te,{}),e.jsxs(X,{onClick:()=>P(I),className:"text-red-600",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})]}),e.jsx("h4",{className:"font-medium text-sm",children:I.title}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["ÏàúÏÑú: ",I.order]})]},I.id))||e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center text-gray-500",children:[e.jsx(J,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"ÏúÑÏ†ØÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})]})})]},r.id))})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"ÏúÑÏ†Ø ÌÜµÍ≥Ñ"})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Ï†ÑÏ≤¥ ÏúÑÏ†Ø"}),e.jsxs("span",{className:"font-medium",children:[s.length,"Í∞ú"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ÌôúÏÑ± ÏúÑÏ†Ø"}),e.jsxs("span",{className:"font-medium text-green-600",children:[s.filter(r=>r.isActive).length,"Í∞ú"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ÎπÑÌôúÏÑ± ÏúÑÏ†Ø"}),e.jsxs("span",{className:"font-medium text-red-600",children:[s.filter(r=>!r.isActive).length,"Í∞ú"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ÏúÑÏ†Ø ÏòÅÏó≠"}),e.jsxs("span",{className:"font-medium",children:[S.length,"Í∞ú"]})]})]})})]}),e.jsxs(z,{children:[e.jsx(Y,{children:e.jsx(W,{children:"Îπ†Î•∏ ÏûëÏóÖ"})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{N(null),n(!0)},children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏÉà ÏúÑÏ†Ø Ï∂îÍ∞Ä"]}),e.jsxs(u,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>c("library"),children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"ÏúÑÏ†Ø ÎùºÏù¥Î∏åÎü¨Î¶¨"]}),e.jsxs(u,{variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),"ÏòÅÏó≠ ÏÑ§Ï†ï"]})]})})]})]})]})}),e.jsxs(de,{value:"list",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(k,{placeholder:"ÏúÑÏ†Ø Í≤ÄÏÉâ...",value:g,onChange:r=>j(r.target.value),className:"max-w-md"})}),e.jsxs(_,{value:t,onValueChange:r=>l(r),children:[e.jsx(K,{className:"w-48",children:e.jsx(Q,{placeholder:"ÏúÑÏπò ÏÑ†ÌÉù"})}),e.jsxs(H,{children:[e.jsx(d,{value:"all",children:"Î™®Îì† ÏúÑÏπò"}),e.jsx(d,{value:"footer-1",children:"Ìë∏ÌÑ∞ 1"}),e.jsx(d,{value:"footer-2",children:"Ìë∏ÌÑ∞ 2"}),e.jsx(d,{value:"footer-3",children:"Ìë∏ÌÑ∞ 3"}),e.jsx(d,{value:"footer-4",children:"Ìë∏ÌÑ∞ 4"}),e.jsx(d,{value:"sidebar-main",children:"Î©îÏù∏ ÏÇ¨Ïù¥ÎìúÎ∞î"}),e.jsx(d,{value:"sidebar-shop",children:"ÏáºÌïë ÏÇ¨Ïù¥ÎìúÎ∞î"}),e.jsx(d,{value:"header-top",children:"Ìó§Îçî ÏÉÅÎã®"}),e.jsx(d,{value:"header-bottom",children:"Ìó§Îçî ÌïòÎã®"})]})]})]}),e.jsx("div",{className:"grid gap-4",children:A.map(r=>e.jsx(z,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"font-medium",children:r.title}),e.jsx(R,{variant:"outline",className:"text-xs",children:q(r.type)}),!r.isActive&&e.jsx(R,{variant:"secondary",className:"text-xs",children:"ÎπÑÌôúÏÑ±"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[C(r.position)," ‚Ä¢ ÏàúÏÑú: ",r.order]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{size:"sm",variant:"outline",onClick:()=>Z(r),children:e.jsx(Se,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>se(r),children:r.isActive?e.jsx(Ge,{className:"w-4 h-4"}):e.jsx(le,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:"outline",onClick:()=>P(r),className:"text-red-600 hover:text-red-700",children:e.jsx(ce,{className:"w-4 h-4"})})]})]})})},r.id))}),A.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ÏúÑÏ†ØÏù¥ ÏóÜÏäµÎãàÎã§"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"ÏÉàÎ°úÏö¥ ÏúÑÏ†ØÏùÑ Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî"}),e.jsxs(u,{onClick:()=>{N(null),n(!0)},children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"ÏúÑÏ†Ø Ï∂îÍ∞Ä"]})]})]}),e.jsx(de,{value:"library",children:e.jsx(Ja,{onApplyTemplate:()=>{m.invalidateQueries({queryKey:["widgets"]}),c("builder")}})})]}),v&&e.jsx(Wa,{widget:o,onSave:()=>{n(!1),N(null),m.invalidateQueries({queryKey:["widgets"]})},onCancel:()=>{n(!1),N(null)}})]})},ut=()=>e.jsxs(ha,{children:[e.jsx(ae,{path:"/",element:e.jsx(ma,{to:"posts",replace:!0})}),e.jsx(ae,{path:"posts",element:e.jsx(Sa,{})}),e.jsx(ae,{path:"posts/new",element:e.jsx(Ye,{})}),e.jsx(ae,{path:"posts/:id/edit",element:e.jsx(Ye,{})}),e.jsx(ae,{path:"pages",element:e.jsx(Da,{})}),e.jsx(ae,{path:"pages/new",element:e.jsx(Ns,{})}),e.jsx(ae,{path:"pages/:id/edit",element:e.jsx(Ns,{})}),e.jsx(ae,{path:"cpt",element:e.jsx(Ta,{})}),e.jsx(ae,{path:"cpt/new",element:e.jsx(Cs,{})}),e.jsx(ae,{path:"cpt/:id/edit",element:e.jsx(Cs,{})}),e.jsx(ae,{path:"cpt/:cptId/fields",element:e.jsx(La,{})}),e.jsx(ae,{path:"acf",element:e.jsx(Ea,{})}),e.jsx(ae,{path:"acf/new",element:e.jsx(ks,{})}),e.jsx(ae,{path:"acf/:id/edit",element:e.jsx(ks,{})}),e.jsx(ae,{path:"media",element:e.jsx(ba,{})}),e.jsx(ae,{path:"templates",element:e.jsx(Ya,{})}),e.jsx(ae,{path:"widgets",element:e.jsx(Xa,{})}),e.jsx(ae,{path:":slug",element:e.jsx(Ma,{})}),e.jsx(ae,{path:":slug/new",element:e.jsx(Ye,{})}),e.jsx(ae,{path:":slug/:id/edit",element:e.jsx(Ye,{})})]});export{ut as default};
