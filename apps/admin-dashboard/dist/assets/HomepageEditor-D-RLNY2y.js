import{a1 as D,r as m,j as e,a3 as E,cU as v,O as I,$ as M,x as A,z as L}from"./vendor-react-LfmQXg7x.js";import{C as O}from"./contentApi-BViKSTPx.js";import"./wp-blocks-CxaEvwYA.js";import"./wp-i18n-DqTnaU2e.js";import"./wp-core-B49sp2kV.js";import"./vendor-ui-BkLtITBR.js";import"./wp-misc-ifGAUd0I.js";import"./wp-data-DJ51zZuL.js";import"./vendor-monaco-cpVGocfO.js";import"./unified-client-BxtdLyLu.js";import"./vendor-utils-DQ8F5vJI.js";import"./main-D4pFNwWv.js";import"./vendor-query-D_Ku9Rpr.js";import"./page-gutenberg-Bgd5YFXg.js";import"./wp-components-CCcEz8J1.js";import"./vendor-socket-Ch6lN7-G.js";const j=a=>({type:"doc",content:a.map(l=>({type:"custom-block",attrs:{id:l.id,blockType:l.type,content:l.content,settings:l.settings}}))}),U=[{type:"hero",label:"Hero Section",icon:"🏔️"},{type:"heading",label:"Heading",icon:"📝"},{type:"paragraph",label:"Paragraph",icon:"📄"},{type:"image",label:"Image",icon:"🖼️"},{type:"button",label:"Button",icon:"🔘"},{type:"columns",label:"Columns",icon:"📊"},{type:"spacer",label:"Spacer",icon:"↕️"}],re=()=>{const a=D(),[l,c]=m.useState(null),[s,i]=m.useState([]),[u,p]=m.useState(null),[d,h]=m.useState(!0),[g,x]=m.useState(!1),[b,f]=m.useState(!1);m.useEffect(()=>{N()},[]);const N=async()=>{try{h(!0);const t={id:"homepage-1",name:"homepage",type:"page",layoutType:"custom",description:"Main homepage template",content:j([]),status:"active",isDefault:!0,active:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};c(t),i([])}catch{}finally{h(!1)}},w=t=>{const n={id:`block-${Date.now()}`,type:t,content:S(t),settings:C(t)};i([...s,n])},S=t=>{switch(t){case"hero":return{title:"Welcome to Our Platform",subtitle:"Build amazing experiences",backgroundImage:"",buttons:[{text:"Get Started",url:"/signup",style:"primary"},{text:"Learn More",url:"/about",style:"secondary"}]};case"heading":return{text:"New Heading",level:2};case"paragraph":return{text:"Enter your content here..."};case"image":return{src:"",alt:"Image description"};case"button":return{text:"Click Me",url:"#",style:"primary"};case"columns":return{columns:[{blocks:[]},{blocks:[]}]};case"spacer":return{height:"2rem"};default:return{}}},C=t=>{switch(t){case"hero":return{height:"500px",overlay:!0,overlayOpacity:.5};default:return{}}},k=(t,n)=>{i(s.map(r=>r.id===t?{...r,...n}:r))},T=t=>{i(s.filter(n=>n.id!==t)),p(null)},B=(t,n)=>{const r=s.findIndex(P=>P.id===t);if(r===-1)return;const o=[...s];n==="up"&&r>0?[o[r],o[r-1]]=[o[r-1],o[r]]:n==="down"&&r<s.length-1&&([o[r],o[r+1]]=[o[r+1],o[r]]),i(o)},y=async()=>{if(l)try{x(!0);const t=await O.updateTemplate(l.id,{...l,content:j(s),updatedAt:new Date().toISOString()});c(t.data),alert("Homepage template saved successfully!")}catch{alert("Failed to save template")}finally{x(!1)}},H=async()=>{if(l)try{x(!0),await y(),alert("Homepage published successfully! The changes are now live.")}catch{alert("Failed to publish template")}finally{x(!1)}};return d?e.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsxs("div",{className:"w-80 bg-white border-r overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("button",{onClick:()=>a("/admin/templates"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Back to Templates"]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Add Blocks"}),e.jsx("div",{className:"space-y-2",children:U.map(({type:t,label:n,icon:r})=>e.jsxs("button",{onClick:()=>w(t),className:"w-full flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("span",{className:"text-2xl mr-3",children:r}),e.jsx("span",{className:"text-left",children:e.jsx("div",{className:"font-medium",children:n})})]},t))})]}),u&&e.jsxs("div",{className:"p-4 border-t",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Block Settings"}),e.jsx(z,{block:s.find(t=>t.id===u),onUpdate:t=>k(u,t)})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"bg-white border-b px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"w-6 h-6 mr-3 text-blue-600"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Homepage Editor"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>f(!b),className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),b?"Edit":"Preview"]}),e.jsxs("button",{onClick:y,disabled:g,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Save"]}),e.jsxs("button",{onClick:H,disabled:g,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Publish"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:s.length===0?e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[e.jsx(A,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Start by adding blocks from the sidebar"})]}):e.jsx("div",{className:"space-y-4",children:s.map((t,n)=>e.jsx(R,{block:t,isSelected:u===t.id,onSelect:()=>p(t.id),onDelete:()=>T(t.id),onMove:r=>B(t.id,r),canMoveUp:n>0,canMoveDown:n<s.length-1},t.id))})})})]})]})},R=({block:a,isSelected:l,onSelect:c,onDelete:s,onMove:i,canMoveUp:u,canMoveDown:p})=>e.jsxs("div",{className:`relative group border rounded-lg p-4 cursor-pointer transition-all ${l?"border-blue-500 shadow-lg":"border-gray-200 hover:border-gray-300"}`,onClick:c,children:[e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:d=>{d.stopPropagation(),i("up")},disabled:!u,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-50",children:"↑"}),e.jsx("button",{onClick:d=>{d.stopPropagation(),i("down")},disabled:!p,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-50",children:"↓"}),e.jsx("button",{onClick:d=>{d.stopPropagation(),s()},className:"p-1 hover:bg-red-100 rounded text-red-600",children:e.jsx(L,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"text-sm text-gray-500 mb-2",children:a.type}),e.jsx($,{block:a})]}),$=({block:a})=>{switch(a.type){case"hero":return e.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[e.jsx("h3",{className:"font-bold",children:a.content.title}),e.jsx("p",{className:"text-gray-600",children:a.content.subtitle})]});case"heading":return e.jsx("h3",{className:"font-bold",children:a.content.text});case"paragraph":return e.jsx("p",{children:a.content.text});case"button":return e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",children:a.content.text});case"image":return e.jsx("div",{className:"bg-gray-100 p-8 text-center rounded",children:e.jsxs("span",{className:"text-gray-500",children:["Image: ",a.content.alt||"No description"]})});default:return e.jsxs("div",{className:"text-gray-500",children:["Block type: ",a.type]})}},z=({block:a,onUpdate:l})=>{const c=(s,i)=>{l({content:{...a.content,[s]:i}})};switch(a.type){case"hero":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),e.jsx("input",{type:"text",value:a.content.title||"",onChange:s=>c("title",s.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subtitle"}),e.jsx("input",{type:"text",value:a.content.subtitle||"",onChange:s=>c("subtitle",s.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]});case"heading":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),e.jsx("input",{type:"text",value:a.content.text||"",onChange:s=>c("text",s.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Level"}),e.jsx("select",{value:a.content.level||2,onChange:s=>c("level",parseInt(s.target.value)),className:"w-full px-3 py-2 border rounded-lg",children:[1,2,3,4,5,6].map(s=>e.jsxs("option",{value:s,children:["H",s]},s))})]})]});case"paragraph":return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),e.jsx("textarea",{value:a.content.text||"",onChange:s=>c("text",s.target.value),className:"w-full px-3 py-2 border rounded-lg",rows:4})]});case"button":return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),e.jsx("input",{type:"text",value:a.content.text||"",onChange:s=>c("text",s.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"URL"}),e.jsx("input",{type:"text",value:a.content.url||"",onChange:s=>c("url",s.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]});default:return e.jsx("div",{className:"text-gray-500",children:"No settings available"})}};export{re as default};
