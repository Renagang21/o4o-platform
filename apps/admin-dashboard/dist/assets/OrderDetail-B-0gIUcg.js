import{a2 as k,a1 as I,r as d,j as e,Y as R,a3 as M,cP as O,cI as D,bB as p,F,ct as j,cL as g,bP as P,cO as L,bL as u,bF as E,bE as $,bX as q}from"./vendor-react-BZRIq8oW.js";import{c as z,b as H,d as U}from"./useOrders-CT3Y49cS.js";import{H as t}from"./page-gutenberg-iVBL5IS_.js";import{f as T,k as B}from"./vendor-utils-DQ8F5vJI.js";import"./wp-block-editor-C14Ds6es.js";import"./wp-blocks-CnCGET8b.js";import"./wp-core-BctBwZpo.js";import"./wp-i18n-Niz9RVma.js";import"./wp-element-CB9_H0_F.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-query-GrNIwsDq.js";import"./ecommerceApi-C5OjghYT.js";import"./unified-client-DFLXeYlg.js";import"./main-CHoUfaJq.js";import"./vendor-socket-Ch6lN7-G.js";import"./wp-components-CLkQS2qf.js";const ie=()=>{const{id:b}=k(),c=I(),[N,i]=d.useState(!1),[l,n]=d.useState(""),[m,x]=d.useState(""),[r,o]=d.useState(""),{data:f,isLoading:y}=z(b||""),v=H(),w=U(),s=f?.data;if(y)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"주문을 찾을 수 없습니다"}),e.jsx("button",{onClick:()=>c("/orders"),className:"text-blue-600 hover:text-blue-800",children:"주문 목록으로 돌아가기"})]});const A={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-red-100 text-red-800"},S=a=>({pending:"대기중",processing:"처리중",shipped:"배송중",completed:"완료",cancelled:"취소됨",refunded:"환불됨"})[a]||a,h=async a=>{await v.mutateAsync({orderId:s.id,status:a,note:r||void 0}),o("")},C=async()=>{!l||parseFloat(l)<=0||(await w.mutateAsync({orderId:s.id,amount:parseFloat(l),reason:m||void 0}),i(!1),n(""),x(""))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c("/orders"),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["주문 #",s.orderNumber]}),e.jsx("p",{className:"text-gray-600 mt-1",children:T(new Date(s.createdAt),"yyyy년 MM월 dd일 HH:mm",{locale:B})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"인쇄"]}),e.jsxs("button",{className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"다운로드"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"}),"주문 상품"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left pb-3 text-sm font-medium text-gray-500",children:"상품"}),e.jsx("th",{className:"text-center pb-3 text-sm font-medium text-gray-500",children:"수량"}),e.jsx("th",{className:"text-right pb-3 text-sm font-medium text-gray-500",children:"단가"}),e.jsx("th",{className:"text-right pb-3 text-sm font-medium text-gray-500",children:"합계"})]})}),e.jsx("tbody",{children:s.items?.map(a=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded bg-gray-200 flex items-center justify-center",children:e.jsx(p,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:a.productName||"상품명 없음"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",a.productSku||"-"]})]})]})}),e.jsx("td",{className:"text-center py-4",children:a.quantity}),e.jsx("td",{className:"text-right py-4",children:t(a.price)}),e.jsx("td",{className:"text-right py-4 font-medium",children:t(a.price*a.quantity)})]},a.id))}),e.jsxs("tfoot",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right pt-4 pb-2",children:"소계:"}),e.jsx("td",{className:"text-right pt-4 pb-2 font-medium",children:t(s.subtotal)})]}),s.shipping>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right pb-2",children:"배송비:"}),e.jsx("td",{className:"text-right pb-2",children:t(s.shipping)})]}),s.discount>0&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"text-right pb-2",children:"할인:"}),e.jsxs("td",{className:"text-right pb-2 text-red-600",children:["-",t(s.discount)]})]}),e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{colSpan:3,className:"text-right pt-4 text-lg font-semibold",children:"총액:"}),e.jsx("td",{className:"text-right pt-4 text-lg font-semibold",children:t(s.total)})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5"}),"청구지 정보"]})}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.customerName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.billingAddress?.company})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),s.billingAddress?.address1]}),s.billingAddress?.address2&&e.jsx("p",{className:"ml-6",children:s.billingAddress.address2}),e.jsxs("p",{className:"ml-6",children:[s.billingAddress?.city," ",s.billingAddress?.state," ",s.billingAddress?.postalCode]})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),s.billingAddress?.phone]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),s.billingAddress?.email]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"배송지 정보"]})}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.customerName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.shippingAddress?.company})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"}),s.shippingAddress?.address1]}),s.shippingAddress?.address2&&e.jsx("p",{className:"ml-6",children:s.shippingAddress.address2}),e.jsxs("p",{className:"ml-6",children:[s.shippingAddress?.city," ",s.shippingAddress?.state," ",s.shippingAddress?.postalCode]})]}),e.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),s.shippingAddress?.phone]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5"}),"주문 활동"]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center text-gray-500 py-4",children:[e.jsx(u,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"주문 활동이 없습니다"})]})}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("textarea",{value:r,onChange:a=>o(a.target.value),placeholder:"주문 메모 추가...",className:"flex-1 px-3 py-2 border rounded-lg resize-none",rows:2}),e.jsx("button",{onClick:()=>{r.trim()&&h(s.status)},disabled:!r.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"추가"})]})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsx("h2",{className:"text-lg font-semibold",children:"주문 상태"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"현재 상태"}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${A[s.status]}`,children:S(s.status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"상태 변경"}),e.jsxs("select",{value:s.status,onChange:a=>h(a.target.value),className:"w-full border rounded-lg px-3 py-2",children:[e.jsx("option",{value:"pending",children:"대기중"}),e.jsx("option",{value:"processing",children:"처리중"}),e.jsx("option",{value:"shipped",children:"배송중"}),e.jsx("option",{value:"completed",children:"완료"}),e.jsx("option",{value:"cancelled",children:"취소"}),e.jsx("option",{value:"refunded",children:"환불"})]})]}),(s.status==="completed"||s.status==="cancelled")&&e.jsxs("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(E,{className:"w-4 h-4"}),"환불 처리"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),"결제 정보"]})}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"결제 방법"}),e.jsx("span",{className:"font-medium",children:s.paymentMethod})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"결제 상태"}),e.jsx("span",{className:`font-medium ${s.paymentStatus==="completed"?"text-green-600":"text-red-600"}`,children:s.paymentStatus==="completed"?"결제완료":"미결제"})]}),s.transactionId&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"거래 ID"}),e.jsx("span",{className:"font-mono text-sm",children:s.transactionId})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"고객 정보"]})}),e.jsx("div",{className:"p-6 space-y-3",children:s.customerId?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.customerName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.customerEmail})]}),e.jsx("div",{className:"pt-3 border-t",children:e.jsx("a",{href:`#/users/${s.customerId}`,onClick:a=>{a.preventDefault(),c(`/users/${s.customerId}`)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"고객 프로필 보기 →"})})]}):e.jsx("p",{className:"text-gray-500",children:"게스트 주문"})})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"환불 처리"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"환불 금액"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:"₩"}),e.jsx("input",{type:"number",value:l,onChange:a=>n(a.target.value),placeholder:s.total.toString(),max:s.total,className:"w-full pl-8 pr-3 py-2 border rounded-lg"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["최대 환불 가능 금액: ",t(s.total)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"환불 사유"}),e.jsx("textarea",{value:m,onChange:a=>x(a.target.value),placeholder:"환불 사유를 입력하세요...",className:"w-full px-3 py-2 border rounded-lg resize-none",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"취소"}),e.jsx("button",{onClick:C,disabled:!l||parseFloat(l)<=0,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"환불 처리"})]})]})})]})};export{ie as default};
