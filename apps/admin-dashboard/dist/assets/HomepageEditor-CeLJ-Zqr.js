import{u as e,r as t,j as s,A as a,dp as r,E as l,S as o,bK as i,bM as n}from"./vendor-react-BQ6HOJoh.js";import{C as c}from"./contentApi-92LLTNt5.js";import"./wp-block-editor-a11y-DrduSWFW.js";import"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-api-Buev8_QU.js";import"./wp-block-editor-utils-M5qXzE1L.js";import"./wp-block-editor-colors-D38h-Odz.js";import"./wp-blocks-core-6vwQKPfS.js";import"./wp-block-editor-clipboard-Dg0Y1gQ6.js";import"./wp-misc-DS9m4_P2.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-LYSOqK5P.js";import"./page-template-editor-C7FodHrK.js";import"./vendor-utils-D-spY-QM.js";import"./wp-core-Y-jV-nrZ.js";import"./wp-block-editor-keyboard-CeHTtvP5.js";import"./wp-data-BmtL8k4r.js";import"./wp-block-editor-store-B-g1aSix.js";import"./wp-block-editor-dnd-BYoS8-II.js";import"./wp-block-editor-library-BpQvynjE.js";import"./wp-block-editor-menus-BTQ2wZ-f.js";import"./wp-block-editor-typography-Bl_1REQP.js";import"./wp-block-editor-spacing-BD_2CpN7.js";import"./wp-block-editor-core-DL280tSA.js";import"./wp-block-editor-selection-CC4tJpUu.js";import"./wp-block-editor-formats-CLXkimOp.js";import"./wp-block-editor-inline-CpXpUhQU.js";import"./wp-block-editor-ui-B8YE_4QL.js";import"./wp-block-editor-transforms-jLcKa8Hv.js";import"./wp-block-editor-preview-iw2Xu1ib.js";import"./wp-block-editor-global-styles-CV5-K6QF.js";import"./wp-block-editor-borders-BH1devca.js";import"./wp-block-editor-patterns-BXdHo9lm.js";import"./wp-block-editor-navigation-BFSoKzg0.js";import"./wp-block-editor-media-Bg-JiQDT.js";import"./wp-api-BeoadipR.js";import"./wp-i18n-DGPtqsXY.js";import"./vendor-monaco-BxJH8uUv.js";import"./wp-block-editor-upload-BLw1R9wP.js";import"./wp-block-editor-templates-o1_wAMb9.js";import"./wp-components-CeQNCpMW.js";import"./unified-client-CYWwJk4G.js";import"./index-C-wyiE3c.js";import"./vendor-socket-CMcZe9fK.js";const d=e=>({type:"doc",content:e.map(e=>({type:"custom-block",attrs:{id:e.id,blockType:e.type,content:e.content,settings:e.settings}}))}),p=[{type:"hero",label:"Hero Section",icon:"ðŸ”ï¸"},{type:"heading",label:"Heading",icon:"ðŸ“"},{type:"paragraph",label:"Paragraph",icon:"ðŸ“„"},{type:"image",label:"Image",icon:"ðŸ–¼ï¸"},{type:"button",label:"Button",icon:"ðŸ”˜"},{type:"columns",label:"Columns",icon:"ðŸ“Š"},{type:"spacer",label:"Spacer",icon:"â†•ï¸"}],m=()=>{const n=e(),[m,u]=t.useState(null),[h,j]=t.useState([]),[g,y]=t.useState(null),[v,w]=t.useState(!0),[N,f]=t.useState(!1),[k,S]=t.useState(!1);t.useEffect(()=>{C()},[]);const C=async()=>{try{w(!0);const e={id:"homepage-1",name:"homepage",type:"page",layoutType:"custom",description:"Main homepage template",content:d([]),status:"active",isDefault:!0,active:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};u(e),j([])}catch(e){}finally{w(!1)}},D=e=>{switch(e){case"hero":return{title:"Welcome to Our Platform",subtitle:"Build amazing experiences",backgroundImage:"",buttons:[{text:"Get Started",url:"/signup",style:"primary"},{text:"Learn More",url:"/about",style:"secondary"}]};case"heading":return{text:"New Heading",level:2};case"paragraph":return{text:"Enter your content here..."};case"image":return{src:"",alt:"Image description"};case"button":return{text:"Click Me",url:"#",style:"primary"};case"columns":return{columns:[{blocks:[]},{blocks:[]}]};case"spacer":return{height:"2rem"};default:return{}}},M=e=>"hero"===e?{height:"500px",overlay:!0,overlayOpacity:.5}:{},I=async()=>{if(m)try{f(!0);const e=await c.updateTemplate(m.id,{...m,content:d(h),updatedAt:(new Date).toISOString()});u(e.data),alert("Homepage template saved successfully!")}catch(e){alert("Failed to save template")}finally{f(!1)}};return v?s.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):s.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s.jsxs("div",{className:"w-80 bg-white border-r overflow-y-auto",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("button",{onClick:()=>n("/admin/templates"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[s.jsx(a,{className:"w-4 h-4 mr-2"}),"Back to Templates"]})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Add Blocks"}),s.jsx("div",{className:"space-y-2",children:p.map(({type:e,label:t,icon:a})=>s.jsxs("button",{onClick:()=>(e=>{const t={id:`block-${Date.now()}`,type:e,content:D(e),settings:M(e)};j([...h,t])})(e),className:"w-full flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("span",{className:"text-2xl mr-3",children:a}),s.jsx("span",{className:"text-left",children:s.jsx("div",{className:"font-medium",children:t})})]},e))})]}),g&&s.jsxs("div",{className:"p-4 border-t",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Block Settings"}),s.jsx(b,{block:h.find(e=>e.id===g),onUpdate:e=>((e,t)=>{j(h.map(s=>s.id===e?{...s,...t}:s))})(g,e)})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"bg-white border-b px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(r,{className:"w-6 h-6 mr-3 text-blue-600"}),s.jsx("h1",{className:"text-2xl font-bold",children:"Homepage Editor"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>S(!k),className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[s.jsx(l,{className:"w-4 h-4 mr-2"}),k?"Edit":"Preview"]}),s.jsxs("button",{onClick:I,disabled:N,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsxs("button",{onClick:async()=>{if(m)try{f(!0),await I(),alert("Homepage published successfully! The changes are now live.")}catch(e){alert("Failed to publish template")}finally{f(!1)}},disabled:N,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"Publish"]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:0===h.length?s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[s.jsx(i,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Start by adding blocks from the sidebar"})]}):s.jsx("div",{className:"space-y-4",children:h.map((e,t)=>s.jsx(x,{block:e,isSelected:g===e.id,onSelect:()=>y(e.id),onDelete:()=>{return t=e.id,j(h.filter(e=>e.id!==t)),void y(null);var t},onMove:t=>((e,t)=>{const s=h.findIndex(t=>t.id===e);if(-1===s)return;const a=[...h];"up"===t&&s>0?[a[s],a[s-1]]=[a[s-1],a[s]]:"down"===t&&s<h.length-1&&([a[s],a[s+1]]=[a[s+1],a[s]]),j(a)})(e.id,t),canMoveUp:t>0,canMoveDown:t<h.length-1},e.id))})})})]})]})},x=({block:e,isSelected:t,onSelect:a,onDelete:r,onMove:l,canMoveUp:o,canMoveDown:i})=>s.jsxs("div",{className:"relative group border rounded-lg p-4 cursor-pointer transition-all "+(t?"border-blue-500 shadow-lg":"border-gray-200 hover:border-gray-300"),onClick:a,children:[s.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),l("up")},disabled:!o,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-50",children:"â†‘"}),s.jsx("button",{onClick:e=>{e.stopPropagation(),l("down")},disabled:!i,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-50",children:"â†“"}),s.jsx("button",{onClick:e=>{e.stopPropagation(),r()},className:"p-1 hover:bg-red-100 rounded text-red-600",children:s.jsx(n,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:e.type}),s.jsx(u,{block:e})]}),u=({block:e})=>{switch(e.type){case"hero":return s.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[s.jsx("h3",{className:"font-bold",children:e.content.title}),s.jsx("p",{className:"text-gray-600",children:e.content.subtitle})]});case"heading":return s.jsx("h3",{className:"font-bold",children:e.content.text});case"paragraph":return s.jsx("p",{children:e.content.text});case"button":return s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",children:e.content.text});case"image":return s.jsx("div",{className:"bg-gray-100 p-8 text-center rounded",children:s.jsxs("span",{className:"text-gray-500",children:["Image: ",e.content.alt||"No description"]})});default:return s.jsxs("div",{className:"text-gray-500",children:["Block type: ",e.type]})}},b=({block:e,onUpdate:t})=>{const a=(s,a)=>{t({content:{...e.content,[s]:a}})};switch(e.type){case"hero":return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),s.jsx("input",{type:"text",value:e.content.title||"",onChange:e=>a("title",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subtitle"}),s.jsx("input",{type:"text",value:e.content.subtitle||"",onChange:e=>a("subtitle",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]});case"heading":return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),s.jsx("input",{type:"text",value:e.content.text||"",onChange:e=>a("text",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Level"}),s.jsx("select",{value:e.content.level||2,onChange:e=>a("level",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg",children:[1,2,3,4,5,6].map(e=>s.jsxs("option",{value:e,children:["H",e]},e))})]})]});case"paragraph":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),s.jsx("textarea",{value:e.content.text||"",onChange:e=>a("text",e.target.value),className:"w-full px-3 py-2 border rounded-lg",rows:4})]});case"button":return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),s.jsx("input",{type:"text",value:e.content.text||"",onChange:e=>a("text",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"URL"}),s.jsx("input",{type:"text",value:e.content.url||"",onChange:e=>a("url",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]});default:return s.jsx("div",{className:"text-gray-500",children:"No settings available"})}};export{m as default};
