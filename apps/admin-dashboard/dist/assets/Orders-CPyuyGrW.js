import{u as e,r as s,j as t,cD as a,aE as r,cm as l,bD as i,bG as o,E as d,bn as n,cG as c,bh as p,cH as x,bx as m,bU as h}from"./vendor-react-DqgGMt48.js";import{u,a as j,b as g}from"./useOrders-CLU7c4rg.js";import{n as b}from"./page-template-editor-CdMtnD-k.js";import{v as y,D as w}from"./vendor-utils-CX-PD_Jc.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-query-D_c3FRkE.js";import"./ecommerceApi-DXQfMSYJ.js";import"./unified-client-BgI2SoC4.js";import"./index-BHVx3EzE.js";import"./wp-misc-nAANEFFa.js";import"./vendor-ui-CrFdsnXa.js";import"./wp-data-BAtVYyan.js";import"./wp-block-editor-misc-5qbjj7fi.js";import"./wp-core-BedthL0o.js";import"./wp-block-editor-api-BD-JvyIp.js";import"./wp-blocks-core-BDaUU0zy.js";import"./wp-block-editor-store-D0LqdVTA.js";import"./wp-block-editor-clipboard-BbjM0mE7.js";import"./wp-i18n-D2qT7FTy.js";import"./wp-block-editor-global-styles-CgbocFEz.js";import"./wp-block-editor-typography-C6olASDs.js";import"./wp-components-Jwbue4-Q.js";import"./wp-block-editor-spacing-Bjm66-GI.js";import"./wp-block-editor-menus-DNdBW6en.js";import"./wp-block-editor-core-BHvRx-9p.js";import"./wp-block-editor-utils-BS9xY-75.js";import"./wp-block-editor-colors-uaYdG60c.js";import"./wp-block-editor-a11y-B3KhLhxS.js";import"./wp-block-editor-preview-IPMCb4VS.js";import"./wp-block-editor-borders-DTrAcZMd.js";import"./wp-block-editor-formats-DG6_xyZ_.js";import"./wp-block-editor-selection-yPihMKSS.js";import"./wp-block-editor-inline-Bkp4Ls8p.js";import"./wp-block-editor-ui-D4dlfw0L.js";import"./wp-block-editor-transforms-CCvPjpfb.js";import"./wp-block-editor-patterns-vKXFRlW-.js";import"./wp-block-editor-navigation-BlWUaXzS.js";import"./wp-block-editor-dnd-BymtRIME.js";import"./wp-block-editor-media-CULIbUAn.js";import"./wp-api-CmKoN5bn.js";import"./wp-block-editor-keyboard-D3kftNm9.js";import"./wp-block-editor-templates-BgLwh8Gm.js";import"./vendor-socket-CMcZe9fK.js";const v=()=>{const v=e(),[N,f]=s.useState(1),[k,C]=s.useState({}),[_,S]=s.useState(""),[D,M]=s.useState([]),[$,A]=s.useState(!1),[E,I]=s.useState(""),{data:H,isLoading:q}=u(N,20,{...k,search:_}),G=j(),W=g(),z=H?.data||[],B=Math.ceil((H?.total||0)/20),F={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:t.jsx(h,{className:"w-4 h-4"})},processing:{bg:"bg-blue-100",text:"text-blue-800",icon:t.jsx(m,{className:"w-4 h-4"})},shipped:{bg:"bg-purple-100",text:"text-purple-800",icon:t.jsx(x,{className:"w-4 h-4"})},completed:{bg:"bg-green-100",text:"text-green-800",icon:t.jsx(p,{className:"w-4 h-4"})},cancelled:{bg:"bg-gray-100",text:"text-gray-800",icon:t.jsx(c,{className:"w-4 h-4"})},refunded:{bg:"bg-red-100",text:"text-red-800",icon:t.jsx(n,{className:"w-4 h-4"})}},J=e=>({pending:"대기중",processing:"처리중",shipped:"배송중",completed:"완료",cancelled:"취소됨",refunded:"환불됨"}[e]||e);return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"주문 관리"}),t.jsxs("p",{className:"text-gray-600 mt-1",children:["총 ",H?.total||0,"개의 주문이 있습니다"]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsxs("button",{onClick:()=>{G.mutate({action:"export",orderIds:D.length>0?D:[]})},className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[t.jsx(a,{className:"w-4 h-4 mr-2"}),"내보내기"]})})]}),t.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("form",{onSubmit:e=>{e.preventDefault(),f(1)},className:"flex-1 max-w-md",children:t.jsxs("div",{className:"relative",children:[t.jsx(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",value:_,onChange:e=>S(e.target.value),placeholder:"주문번호, 고객명, 이메일로 검색...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),t.jsxs("button",{onClick:()=>A(!$),className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50 ml-4",children:[t.jsx(l,{className:"w-4 h-4 mr-2"}),"필터"]})]}),t.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[t.jsxs("button",{onClick:()=>C({}),className:"px-4 py-2 rounded-lg whitespace-nowrap "+(k.status?"bg-gray-100 hover:bg-gray-200":"bg-blue-600 text-white"),children:["전체 (",H?.total||0,")"]}),["pending","processing","shipped","completed","cancelled","refunded"].map(e=>{const s=F[e];return t.jsxs("button",{onClick:()=>C({...k,status:e}),className:"px-4 py-2 rounded-lg whitespace-nowrap flex items-center gap-2 "+(k.status===e?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"),children:[s.icon,J(e)]},e)})]}),$&&t.jsxs("div",{className:"border-t pt-4 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"주문 상태"}),t.jsxs("select",{value:k.status||"",onChange:e=>C({...k,status:e.target.value}),className:"w-full border rounded-lg px-3 py-2",children:[t.jsx("option",{value:"",children:"전체 상태"}),t.jsx("option",{value:"pending",children:"대기중"}),t.jsx("option",{value:"processing",children:"처리중"}),t.jsx("option",{value:"shipped",children:"배송중"}),t.jsx("option",{value:"completed",children:"완료"}),t.jsx("option",{value:"cancelled",children:"취소됨"}),t.jsx("option",{value:"refunded",children:"환불됨"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"검색 기간"}),t.jsxs("select",{className:"w-full border rounded-lg px-3 py-2",children:[t.jsx("option",{value:"",children:"전체 기간"}),t.jsx("option",{value:"today",children:"오늘"}),t.jsx("option",{value:"week",children:"이번 주"}),t.jsx("option",{value:"month",children:"이번 달"})]})]})]})]}),D.length>0&&t.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[t.jsxs("p",{className:"text-blue-800",children:[D.length,"개의 주문이 선택되었습니다"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("select",{value:E,onChange:e=>I(e.target.value),className:"border rounded px-3 py-1",children:[t.jsx("option",{value:"",children:"일괄 작업 선택"}),t.jsx("option",{value:"status_processing",children:"처리중으로 변경"}),t.jsx("option",{value:"status_shipped",children:"배송중으로 변경"}),t.jsx("option",{value:"status_completed",children:"완료로 변경"}),t.jsx("option",{value:"export",children:"선택 항목 내보내기"}),t.jsx("option",{value:"delete",children:"삭제"})]}),t.jsx("button",{onClick:async()=>{if(!E||0===D.length)return;if("delete"===E&&!window.confirm(`정말로 ${D.length}개의 주문을 삭제하시겠습니까?`))return;const e=E.startsWith("status_")?"update_status":E;await G.mutateAsync({action:e,orderIds:D,data:E.startsWith("status_")?{status:E.replace("status_","")}:void 0}),M([]),I("")},disabled:!E,className:"px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:"적용"})]})]}),q?t.jsx("div",{className:"text-center py-12",children:t.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===z.length?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-12 text-center",children:[t.jsx(i,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"주문이 없습니다"}),t.jsx("p",{className:"text-gray-500",children:"아직 주문이 없습니다."})]}):t.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-6 py-3 text-left",children:t.jsx("input",{type:"checkbox",checked:D.length===z.length,onChange:e=>{e.target.checked?M(z.map(e=>e.id)):M([])},className:"rounded"})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"주문번호"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"일시"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"고객"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"결제"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"총액"}),t.jsx("th",{className:"relative px-6 py-3",children:t.jsx("span",{className:"sr-only",children:"작업"})})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(e=>{const s=F[e.status]||F.pending;return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("input",{type:"checkbox",checked:D.includes(e.id),onChange:s=>{s.target.checked?M([...D,e.id]):M(D.filter(s=>s!==e.id))},className:"rounded"})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("a",{href:`#/orders/${e.id}`,onClick:s=>{s.preventDefault(),v(`/orders/${e.id}`)},className:"text-blue-600 hover:text-blue-800 font-medium",children:["#",e.orderNumber]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y(new Date(e.createdAt),"yyyy-MM-dd HH:mm",{locale:w})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${s.bg} ${s.text}`,children:[s.icon,J(e.status)]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.customerName||"게스트"}),t.jsx("div",{className:"text-sm text-gray-500",children:e.customerEmail})]})}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(o,{className:"w-4 h-4 text-gray-400"}),t.jsx("span",{className:"text-sm text-gray-900",children:(a=e.paymentMethod||"",{card:"신용카드",bank_transfer:"계좌이체",virtual_account:"가상계좌",phone:"휴대폰결제",kakao_pay:"카카오페이",naver_pay:"네이버페이",toss:"토스"}[a]||a)})]}),"completed"===e.paymentStatus?t.jsx("span",{className:"text-xs text-green-600",children:"결제완료"}):t.jsx("span",{className:"text-xs text-red-600",children:"미결제"})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b(e.total)}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{onClick:()=>v(`/orders/${e.id}`),className:"text-gray-400 hover:text-gray-600",title:"주문 상세보기",children:t.jsx(d,{className:"w-4 h-4"})}),t.jsxs("select",{value:e.status,onChange:s=>(async(e,s)=>{await W.mutateAsync({orderId:e,status:s,note:`상태가 ${s}로 변경되었습니다.`})})(e.id,s.target.value),className:"text-sm border rounded px-2 py-1",onClick:e=>e.stopPropagation(),children:[t.jsx("option",{value:"pending",children:"대기중"}),t.jsx("option",{value:"processing",children:"처리중"}),t.jsx("option",{value:"shipped",children:"배송중"}),t.jsx("option",{value:"completed",children:"완료"}),t.jsx("option",{value:"cancelled",children:"취소"}),t.jsx("option",{value:"refunded",children:"환불"})]})]})})]},e.id);var a})})]})}),B>1&&t.jsx("div",{className:"flex justify-center",children:t.jsxs("nav",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>f(Math.max(1,N-1)),disabled:1===N,className:"px-3 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"이전"}),Array.from({length:Math.min(B,5)},(e,s)=>{const a=N>3?N-2+s:s+1;return a>B?null:t.jsx("button",{onClick:()=>f(a),className:"px-3 py-2 border rounded-lg "+(N===a?"bg-blue-600 text-white":"hover:bg-gray-50"),children:a},a)}),t.jsx("button",{onClick:()=>f(Math.min(B,N+1)),disabled:N===B,className:"px-3 py-2 border rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"다음"})]})})]})};export{v as default};
