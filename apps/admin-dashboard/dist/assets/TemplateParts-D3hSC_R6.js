import{d3 as I,r as i,j as e,d4 as K,d5 as y,d6 as N,d7 as v,d8 as w,d9 as b,da as A,a3 as O,P as f,t as h,db as V,dc as H,c0 as U,Y,N as G,B as J,D as W,V as m}from"./vendor-react-CFXBKh8N.js";import{c as n,M as D,B as r,a as X,b as Z,d,e as _,s as g,j as x}from"./page-gutenberg-CihbTQe_.js";import{u as ee,a as ae,b as u}from"./vendor-query-D0j4d4-i.js";import"./wp-block-editor-DhaEFHLK.js";import"./wp-i18n-DXAO7rTz.js";import"./wp-core-CKjiTxtQ.js";import"./wp-blocks-core-CqiW7X_r.js";import"./wp-misc-BCLjNiWG.js";import"./wp-data-DkVHr7c4.js";import"./wp-components-BOsGWWgw.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-utils-DQ8F5vJI.js";const se=I,te=K,C=i.forwardRef(({className:s,...t},l)=>e.jsx(A,{className:n("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:l}));C.displayName=A.displayName;const T=i.forwardRef(({className:s,...t},l)=>e.jsxs(te,{children:[e.jsx(C,{}),e.jsx(y,{ref:l,className:n("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));T.displayName=y.displayName;const P=({className:s,...t})=>e.jsx("div",{className:n("flex flex-col space-y-2 text-center sm:text-left",s),...t});P.displayName="AlertDialogHeader";const k=({className:s,...t})=>e.jsx("div",{className:n("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});k.displayName="AlertDialogFooter";const R=i.forwardRef(({className:s,...t},l)=>e.jsx(N,{ref:l,className:n("text-lg font-semibold",s),...t}));R.displayName=N.displayName;const z=i.forwardRef(({className:s,...t},l)=>e.jsx(v,{ref:l,className:n("text-sm text-muted-foreground",s),...t}));z.displayName=v.displayName;const q=i.forwardRef(({className:s,...t},l)=>e.jsx(b,{ref:l,className:n(D(),s),...t}));q.displayName=b.displayName;const S=i.forwardRef(({className:s,...t},l)=>e.jsx(w,{ref:l,className:n(D({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));S.displayName=w.displayName;const le={header:H,footer:V,sidebar:h,general:h},ie={header:"헤더",footer:"푸터",sidebar:"사이드바",general:"일반"};function ye(){const s=O(),t=ee(),[l,p]=i.useState(null),[c,F]=i.useState("all"),{data:j=[],isLoading:$}=ae({queryKey:["template-parts",c],queryFn:async()=>{const a=new URLSearchParams;return c!=="all"&&a.append("area",c),(await x.api.get(`/template-parts?${a}`)).data}}),B=u({mutationFn:async a=>{await x.api.delete(`/template-parts/${a}`)},onSuccess:()=>{m.success("템플릿 파트가 삭제되었습니다"),t.invalidateQueries({queryKey:["template-parts"]}),p(null)},onError:()=>{m.error("템플릿 파트 삭제에 실패했습니다")}}),E=u({mutationFn:async({id:a,isActive:o})=>{await x.api.put(`/template-parts/${a}`,{isActive:o})},onSuccess:()=>{m.success("상태가 변경되었습니다"),t.invalidateQueries({queryKey:["template-parts"]})}}),L=u({mutationFn:async a=>{await x.api.post(`/template-parts/${a}/duplicate`)},onSuccess:()=>{m.success("템플릿 파트가 복제되었습니다"),t.invalidateQueries({queryKey:["template-parts"]})}}),M=a=>{p(a)},Q=()=>{l&&B.mutate(l)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"템플릿 파트"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"사이트의 헤더, 푸터, 사이드바 등을 관리합니다"})]}),e.jsxs(r,{onClick:()=>s("/appearance/template-parts/new"),children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"새 템플릿 파트"]})]}),e.jsxs(X,{value:c,onValueChange:F,children:[e.jsxs(Z,{children:[e.jsx(d,{value:"all",children:"전체"}),e.jsx(d,{value:"header",children:"헤더"}),e.jsx(d,{value:"footer",children:"푸터"}),e.jsx(d,{value:"sidebar",children:"사이드바"}),e.jsx(d,{value:"general",children:"일반"})]}),e.jsx(_,{value:c,className:"mt-6",children:$?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(h,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"템플릿 파트가 없습니다"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"새 템플릿 파트를 만들어 사이트를 커스터마이즈하세요."}),e.jsx("div",{className:"mt-6",children:e.jsxs(r,{onClick:()=>s("/appearance/template-parts/new"),children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"새 템플릿 파트 만들기"]})})]}):e.jsx("div",{className:"grid gap-4",children:j.map(a=>{const o=le[a.area];return e.jsx("div",{className:"wp-card hover:shadow-md transition-shadow",children:e.jsx("div",{className:"wp-card-body",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{className:"w-8 h-8 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a.name}),a.isDefault&&e.jsx(g,{variant:"secondary",children:"기본"}),e.jsx(g,{variant:a.isActive?"default":"secondary",children:a.isActive?"활성":"비활성"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a.description||`${ie[a.area]} 영역`}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["우선순위: ",a.priority]}),a.conditions&&e.jsx("span",{children:"조건부 표시 설정됨"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>E.mutate({id:a.id,isActive:!a.isActive}),children:a.isActive?e.jsx(U,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"})}),e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>s(`/appearance/template-parts/${a.id}/edit`),children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>L.mutate(a.id),children:e.jsx(J,{className:"w-4 h-4"})}),!a.isDefault&&e.jsx(r,{size:"sm",variant:"ghost",onClick:()=>M(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(W,{className:"w-4 h-4"})})]})]})})},a.id)})})})]}),e.jsx(se,{open:!!l,onOpenChange:()=>p(null),children:e.jsxs(T,{children:[e.jsxs(P,{children:[e.jsx(R,{children:"템플릿 파트 삭제"}),e.jsx(z,{children:"이 템플릿 파트를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})]}),e.jsxs(k,{children:[e.jsx(S,{children:"취소"}),e.jsx(q,{onClick:Q,className:"bg-red-600 hover:bg-red-700",children:"삭제"})]})]})})]})}export{ye as default};
