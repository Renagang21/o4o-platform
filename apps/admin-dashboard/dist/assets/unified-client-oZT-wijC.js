import{a as t}from"./vendor-utils-EdRAegAf.js";import{c as e}from"./index-CDOT2nxa.js";import{V as s}from"./vendor-react-40ZmJ4HC.js";const i=new class{client;baseURL="http://localhost:4000";version="v1";constructor(){this.baseURL.endsWith("/v1")&&(this.baseURL=this.baseURL.slice(0,-3)),this.client=t.create({baseURL:this.baseURL,timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(t=>{let e=this.getAuthToken();return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t)),this.client.interceptors.response.use(t=>t,t=>this.handleError(t))}getAuthToken(){let t=e.getState().token;if(t||(t=localStorage.getItem("authToken")),!t){const e=localStorage.getItem("admin-auth-storage");if(e)try{const s=JSON.parse(e);s.state?.token&&(t=s.state.token)}catch{}}return t}handleError(t){const e=t.response?.status;switch(e){case 401:this.handleUnauthorized();break;case 403:s.error("접근 권한이 없습니다.");break;case 404:break;case 429:s.error("요청이 너무 많습니다. 잠시 후 다시 시도해주세요.");break;case 500:case 502:case 503:s.error("서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.");break;default:"ECONNABORTED"===t.code&&s.error("요청 시간이 초과되었습니다.")}return Promise.reject(t)}handleUnauthorized(){"/login"!==window.location.pathname&&(localStorage.removeItem("auth-storage"),localStorage.removeItem("authToken"),localStorage.removeItem("admin-auth-storage"),e.getState().logout(),window.location.href="/login",s.error("세션이 만료되었습니다. 다시 로그인해주세요."))}v1(t){return`/${this.version}${t}`}content={posts:{list:t=>this.client.get(this.v1("/content/posts"),{params:t}),get:t=>this.client.get(this.v1(`/content/posts/${t}`)),create:t=>this.client.post(this.v1("/content/posts"),t),update:(t,e)=>this.client.put(this.v1(`/content/posts/${t}`),e),delete:t=>this.client.delete(this.v1(`/content/posts/${t}`))},categories:{list:t=>this.client.get(this.v1("/content/categories"),{params:t}),get:t=>this.client.get(this.v1(`/content/categories/${t}`)),create:t=>this.client.post(this.v1("/content/categories"),t),update:(t,e)=>this.client.put(this.v1(`/content/categories/${t}`),e),delete:t=>this.client.delete(this.v1(`/content/categories/${t}`))},media:{list:t=>this.client.get(this.v1("/content/media"),{params:t}),get:t=>this.client.get(this.v1(`/content/media/${t}`)),upload:t=>this.client.post(this.v1("/content/media/upload"),t,{headers:{"Content-Type":"multipart/form-data"}}),update:(t,e)=>this.client.put(this.v1(`/content/media/${t}`),e),delete:t=>this.client.delete(this.v1(`/content/media/${t}`))},authors:{list:()=>this.client.get(this.v1("/content/authors"))}};platform={apps:{list:()=>this.client.get(this.v1("/platform/apps")),get:t=>this.client.get(this.v1(`/platform/apps/${t}`)),updateStatus:(t,e)=>this.client.put(this.v1(`/platform/apps/${t}/status`),{status:e})},settings:{get:()=>this.client.get(this.v1("/platform/settings")),update:t=>this.client.put(this.v1("/platform/settings"),t)},customPostTypes:{list:()=>this.client.get(this.v1("/platform/custom-post-types")),get:t=>this.client.get(this.v1(`/platform/custom-post-types/${t}`)),create:t=>this.client.post(this.v1("/platform/custom-post-types"),t),update:(t,e)=>this.client.put(this.v1(`/platform/custom-post-types/${t}`),e),delete:t=>this.client.delete(this.v1(`/platform/custom-post-types/${t}`))}};ecommerce={products:{list:t=>this.client.get(this.v1("/ecommerce/products"),{params:t}),get:t=>this.client.get(this.v1(`/ecommerce/products/${t}`)),create:t=>this.client.post(this.v1("/ecommerce/products"),t),update:(t,e)=>this.client.put(this.v1(`/ecommerce/products/${t}`),e),delete:t=>this.client.delete(this.v1(`/ecommerce/products/${t}`))},orders:{list:t=>this.client.get(this.v1("/ecommerce/orders"),{params:t}),get:t=>this.client.get(this.v1(`/ecommerce/orders/${t}`)),updateStatus:(t,e,s)=>this.client.put(this.v1(`/ecommerce/orders/${t}/status`),{status:e,note:s})},cart:{get:()=>this.client.get(this.v1("/ecommerce/cart")),update:t=>this.client.post(this.v1("/ecommerce/cart"),t),applyCoupon:t=>this.client.post(this.v1("/ecommerce/cart/coupon"),{code:t})}};forum={posts:{list:t=>this.client.get(this.v1("/forum/posts"),{params:t}),get:t=>this.client.get(this.v1(`/forum/posts/${t}`)),create:t=>this.client.post(this.v1("/forum/posts"),t),update:(t,e)=>this.client.put(this.v1(`/forum/posts/${t}`),e),delete:t=>this.client.delete(this.v1(`/forum/posts/${t}`))},categories:{list:()=>this.client.get(this.v1("/forum/categories")),get:t=>this.client.get(this.v1(`/forum/categories/${t}`)),create:t=>this.client.post(this.v1("/forum/categories"),t)},comments:{list:t=>this.client.get(this.v1(`/forum/posts/${t}/comments`)),create:t=>this.client.post(this.v1("/forum/comments"),t)}};auth={login:t=>this.client.post(this.v1("/auth/login"),t),logout:()=>this.client.post(this.v1("/auth/logout")),register:t=>this.client.post(this.v1("/auth/register"),t),me:()=>this.client.get(this.v1("/auth/me")),refresh:()=>this.client.post(this.v1("/auth/refresh"))};get raw(){return this.client}};export{i as u};
//# sourceMappingURL=unified-client-oZT-wijC.js.map
