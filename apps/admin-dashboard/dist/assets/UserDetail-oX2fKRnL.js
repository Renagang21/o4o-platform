import{b as s,u as e,r as a,V as r,j as t,A as i,bH as c,ce as l,bc as d,bq as o,bM as n,c8 as m,bU as p,bO as x}from"./vendor-react-DqgGMt48.js";import{B as j,d as h,e as v,f as g,g as u}from"./page-template-editor-CdMtnD-k.js";import{cF as b,cG as N,cH as y,cI as w,cQ as f,cR as k}from"./wp-misc-nAANEFFa.js";import{a as A}from"./base-DqweZ464.js";import{v as S,C as U}from"./vendor-utils-CX-PD_Jc.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-D_c3FRkE.js";import"./wp-blocks-core-BDaUU0zy.js";import"./wp-block-editor-misc-5qbjj7fi.js";import"./wp-core-BedthL0o.js";import"./wp-block-editor-api-BD-JvyIp.js";import"./wp-block-editor-store-D0LqdVTA.js";import"./wp-block-editor-clipboard-BbjM0mE7.js";import"./wp-i18n-D2qT7FTy.js";import"./wp-block-editor-global-styles-CgbocFEz.js";import"./wp-block-editor-typography-C6olASDs.js";import"./wp-components-Jwbue4-Q.js";import"./wp-block-editor-spacing-Bjm66-GI.js";import"./wp-block-editor-menus-DNdBW6en.js";import"./wp-block-editor-core-BHvRx-9p.js";import"./wp-block-editor-utils-BS9xY-75.js";import"./wp-block-editor-colors-uaYdG60c.js";import"./wp-block-editor-a11y-B3KhLhxS.js";import"./wp-block-editor-preview-IPMCb4VS.js";import"./wp-block-editor-borders-DTrAcZMd.js";import"./wp-block-editor-formats-DG6_xyZ_.js";import"./wp-block-editor-selection-yPihMKSS.js";import"./wp-block-editor-inline-Bkp4Ls8p.js";import"./wp-block-editor-ui-D4dlfw0L.js";import"./wp-block-editor-transforms-CCvPjpfb.js";import"./wp-block-editor-patterns-vKXFRlW-.js";import"./wp-block-editor-navigation-BlWUaXzS.js";import"./wp-block-editor-dnd-BymtRIME.js";import"./wp-block-editor-media-CULIbUAn.js";import"./wp-api-CmKoN5bn.js";import"./wp-block-editor-keyboard-D3kftNm9.js";import"./wp-block-editor-templates-BgLwh8Gm.js";import"./wp-data-BAtVYyan.js";import"./index-BHVx3EzE.js";import"./vendor-socket-CMcZe9fK.js";function C(){const{id:C}=s(),R=e(),[$,E]=a.useState(null),[F,_]=a.useState([]),[D,L]=a.useState(!0);a.useEffect(()=>{C&&B()},[C]);const B=async()=>{try{L(!0);const s=await A.get(`/v1/users/${C}`);s.data.success&&E(s.data.data);const e=await A.get(`/v1/users/${C}/approval-history`);e.data.success&&_(e.data.data)}catch(s){r.error("Failed to load user details"),R("/users")}finally{L(!1)}},H=s=>({super_admin:"bg-purple-500",admin:"bg-red-500",vendor:"bg-blue-500",seller:"bg-green-500",customer:"bg-gray-500",business:"bg-yellow-500",moderator:"bg-indigo-500",partner:"bg-pink-500"}[s]||"bg-gray-500"),M=s=>{switch(s){case"approved":return t.jsx(c,{className:"h-4 w-4 text-green-500"});case"rejected":return t.jsx(l,{className:"h-4 w-4 text-red-500"});default:return t.jsx(x,{className:"h-4 w-4 text-gray-500"})}};return D?t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),t.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):$?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(j,{variant:"ghost",onClick:()=>R("/users"),children:[t.jsx(i,{className:"mr-2 h-4 w-4"}),"Back to Users"]}),t.jsx("h1",{className:"text-2xl font-bold",children:$?.name||"Unknown User"})]}),t.jsxs("div",{className:"flex gap-2",children:["pending"===$?.status&&t.jsxs(t.Fragment,{children:[t.jsxs(j,{onClick:async()=>{try{await A.post(`/v1/users/${C}/approve`,{notes:"Approved via admin dashboard"}),r.success("User approved successfully"),B()}catch(s){r.error("Failed to approve user")}},children:[t.jsx(c,{className:"mr-2 h-4 w-4"}),"Approve"]}),t.jsxs(j,{variant:"destructive",onClick:async()=>{try{await A.post(`/v1/users/${C}/reject`,{notes:"Rejected via admin dashboard"}),r.success("User rejected successfully"),B()}catch(s){r.error("Failed to reject user")}},children:[t.jsx(l,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),t.jsxs(j,{variant:"outline",onClick:()=>R(`/users/${C}/edit`),children:[t.jsx(d,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]}),t.jsxs(h,{defaultValue:"overview",className:"w-full",children:[t.jsxs(v,{children:[t.jsx(g,{value:"overview",children:"Overview"}),t.jsx(g,{value:"history",children:"Approval History"}),t.jsx(g,{value:"activity",children:"Activity"})]}),t.jsxs(u,{value:"overview",className:"space-y-6",children:[t.jsxs(b,{children:[t.jsx(N,{children:t.jsx(y,{children:"User Information"})}),t.jsx(w,{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(o,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),t.jsx("p",{className:"font-medium",children:$?.email})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(n,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),t.jsx(f,{className:`${V=$?.status||"pending",{active:"bg-green-500",approved:"bg-green-500",pending:"bg-yellow-500",rejected:"bg-red-500"}[V]||"bg-gray-500"} text-white`,children:$?.status})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Joined"}),t.jsx("p",{className:"font-medium",children:$?S(new Date(Date.now()),"MMM d, yyyy"):""})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(p,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Last Login"}),t.jsx("p",{className:"font-medium",children:$?.lastLoginAt?U(new Date($?.lastLoginAt),{addSuffix:!0}):"Never"})]})]})]})})]}),t.jsxs(b,{children:[t.jsx(N,{children:t.jsx(y,{children:"Roles & Permissions"})}),t.jsx(w,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Assigned Roles"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:$?.role?[$.role]:[].map(s=>t.jsx(f,{className:`${H(s)} text-white`,children:s.replace("_"," ")},s))})]}),$?.permissions&&$?.permissions.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Special Permissions"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:$?.permissions.map(s=>t.jsx(f,{variant:"outline",children:s},s))})]})]})})]}),t.jsxs(b,{children:[t.jsx(N,{children:t.jsx(y,{children:"Account Status"})}),t.jsx(w,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Email Verified"}),t.jsx("p",{className:"text-2xl font-bold",children:$?.isEmailVerified?"✓":"✗"})]}),t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Account Active"}),t.jsx("p",{className:"text-2xl font-bold",children:$?.isActive?"✓":"✗"})]}),t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Login Attempts"}),t.jsx("p",{className:"text-2xl font-bold",children:$?.loginAttempts||0})]})]})})]})]}),t.jsx(u,{value:"history",className:"space-y-4",children:t.jsxs(b,{children:[t.jsxs(N,{children:[t.jsx(y,{children:"Approval History"}),t.jsx(k,{children:"Timeline of all approval actions for this user"})]}),t.jsx(w,{children:0===F.length?t.jsx("p",{className:"text-center text-gray-500 py-8",children:"No approval history found"}):t.jsx("div",{className:"space-y-4",children:F.map(s=>t.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[t.jsx("div",{className:"mt-1",children:M(s.action)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("p",{className:"font-medium",children:["approved"===s.action&&"Approved","rejected"===s.action&&"Rejected","status_changed"===s.action&&"Status Changed"]}),t.jsxs("span",{className:"text-sm text-gray-500",children:["by ",s.admin?.fullName||s.admin?.email||"System"]})]}),s.notes&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.notes}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:[s.previous_status," → ",s.new_status]}),t.jsx("span",{children:U(new Date(s.created_at),{addSuffix:!0})})]})]})]},s.id))})})]})}),t.jsx(u,{value:"activity",children:t.jsxs(b,{children:[t.jsxs(N,{children:[t.jsx(y,{children:"Recent Activity"}),t.jsx(k,{children:"User's recent actions and system events"})]}),t.jsx(w,{children:t.jsx("p",{className:"text-center text-gray-500 py-8",children:"Activity tracking coming soon"})})]})})]})]}):t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-500",children:"User not found"}),t.jsx(j,{onClick:()=>R("/users"),className:"mt-4",children:"Back to Users"})]})});var V}export{C as default};
