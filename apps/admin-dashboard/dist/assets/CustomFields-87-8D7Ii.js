import{r as i,j as e,x as b,S as N,B as w,J as v,y as k,V as r,z as C}from"./vendor-react-BZRIq8oW.js";import{u as S,a as q,b as u}from"./vendor-query-GrNIwsDq.js";import{a as d}from"./base-BbR7U6V7.js";import"./wp-block-editor-C14Ds6es.js";import"./wp-blocks-CnCGET8b.js";import"./wp-core-BctBwZpo.js";import"./wp-i18n-Niz9RVma.js";import"./wp-element-CB9_H0_F.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-utils-DQ8F5vJI.js";import"./main-CHoUfaJq.js";import"./page-gutenberg-iVBL5IS_.js";import"./wp-components-CLkQS2qf.js";import"./vendor-socket-Ch6lN7-G.js";const J=()=>{const[n,p]=i.useState(""),[h,l]=i.useState(!1),[t,o]=i.useState(null),x=S(),{data:y,isLoading:f}=q({queryKey:["custom-field-groups"],queryFn:async()=>(await d.get("/admin/custom-field-groups")).data}),g=u({mutationFn:async s=>(await d.post("/admin/custom-field-groups",s)).data,onSuccess:()=>{x.invalidateQueries({queryKey:["custom-field-groups"]}),r.success("필드 그룹이 생성되었습니다"),l(!1)},onError:()=>{r.error("필드 그룹 생성에 실패했습니다")}}),j=u({mutationFn:async s=>{await d.delete(`/admin/custom-field-groups/${s}`)},onSuccess:()=>{x.invalidateQueries({queryKey:["custom-field-groups"]}),r.success("필드 그룹이 삭제되었습니다")},onError:()=>{r.error("필드 그룹 삭제에 실패했습니다")}}),m=y?.filter(s=>s.name.toLowerCase().includes(n.toLowerCase())||s.key.toLowerCase().includes(n.toLowerCase()))||[];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"사용자 정의 필드"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"콘텐츠에 추가 필드를 정의하고 관리합니다"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"필드 그룹 추가"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:n,onChange:s=>p(s.target.value),placeholder:"필드 그룹 검색...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),f?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(w,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"필드 그룹이 없습니다"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"첫 번째 필드 그룹을 만들어보세요"}),e.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"필드 그룹 추가"})]}):e.jsx("div",{className:"bg-white rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"필드 그룹"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"키"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"필드 수"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"위치"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"액션"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-gray-500",children:s.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:s.key})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.fields?.length||0," 필드"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.locations.map((a,c)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:a},c))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.active?"활성":"비활성"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>o(s),className:"text-gray-400 hover:text-gray-600",title:"편집",children:e.jsx(v,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{r.success("복제 기능은 준비 중입니다")},className:"text-gray-400 hover:text-gray-600",title:"복제",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{confirm("이 필드 그룹을 삭제하시겠습니까?")&&j.mutate(s.id)},className:"text-gray-400 hover:text-red-600",title:"삭제",children:e.jsx(C,{className:"w-4 h-4"})})]})})]},s.id))})]})}),(h||t)&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:t?"필드 그룹 수정":"새 필드 그룹"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault();const a=new FormData(s.currentTarget),c={name:a.get("name"),key:a.get("key"),description:a.get("description"),locations:["post","page"],fields:[],active:!0};t?r.success("수정 기능은 준비 중입니다"):g.mutate(c)},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["그룹 이름 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",defaultValue:t?.name,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 제품 정보"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["그룹 키 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"key",defaultValue:t?.key,required:!0,pattern:"[a-z0-9_]+",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: product_info"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"소문자, 숫자, 언더스코어만 사용 가능"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),e.jsx("textarea",{name:"description",defaultValue:t?.description,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"이 필드 그룹에 대한 설명을 입력하세요"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"표시 위치"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"location_post",defaultChecked:!0,className:"mr-2"}),e.jsx("span",{children:"게시물"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"location_page",defaultChecked:!0,className:"mr-2"}),e.jsx("span",{children:"페이지"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"location_user",className:"mr-2"}),e.jsx("span",{children:"사용자"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"location_product",className:"mr-2"}),e.jsx("span",{children:"제품"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),o(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"취소"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:t?"수정":"생성"})]})]})]})})]})};export{J as default};
