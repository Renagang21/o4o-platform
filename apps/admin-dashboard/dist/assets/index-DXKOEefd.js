import{u as oe,cb as zs,r as w,j as e,l as je,a1 as B,N as ve,E as ye,ay as pe,q as Oe,F as re,ce as ys,aB as Vs,A as De,c as $e,w as Be,as as ts,$ as Ns,am as fs,I as ls,b as _e,aX as Qe,ad as me,aY as Gs,aP as Ks,ar as Us,bk as fe,K as Bs,Y as bs,bv as He,U as ws,n as Os,cH as Ke,cI as Qs,bm as Hs,ae as is,ao as Cs,ah as Se,aw as Ee,bc as Fs,bj as Ts,C as Le,cq as Ce,bE as Ws,cJ as rs,m as Ys,bn as Js,cK as ns,aA as We,ac as cs,aS as ds,M as Xs,a8 as os,cL as Zs,c6 as ea,c7 as ae}from"./vendor-react-P__8vGRG.js";import{u as be,a as J,b as ce}from"./vendor-query-CucHvDcH.js";import{m as Ie,x as ge,y as Te,C as k,d as _,B as Y,a as M,b as q,c as te,z as Ae,E as ke,F as Pe,G as sa,H as Fe,I as W,D as Ye,i as Je,j as Xe,k as Ze,l as es,r as ss,J as aa,K as ta,n as la,o as ia}from"./index-C0gS3Jf3.js";import{a as K,B as b,h as Me,i as qe,j as ie,k as ne,L as p,I as P,T as de,S as X,d as Z,e as ee,f as se,g as S,l as le,c as Ne}from"./page-template-editor-BTdVTS-a.js";import{C as as}from"./checkbox-CqkjQ2aW.js";import{f as hs,k as xs}from"./vendor-utils-dq2XMRwt.js";import{u as Ss,C as As,a as ks,b as Ue,s as Ps,K as _s,P as Es,D as Ds,c as $s,S as Ls,v as Is,d as Ms}from"./sortable.esm-Ck0j7PTJ.js";import"./vendor-socket-DgcwqWsT.js";import"./vendor-ui-BkLtITBR.js";const we="/acf",qs={async getAllGroups(){return(await K.api.get(`${we}/custom-field-groups`)).data},async getGroup(s){return(await K.api.get(`${we}/custom-field-groups/${s}`)).data},async createGroup(s){return(await K.api.post(`${we}/custom-field-groups`,s)).data},async updateGroup(s,h){return(await K.api.put(`${we}/custom-field-groups/${s}`,h)).data},async deleteGroup(s){return(await K.api.delete(`${we}/custom-field-groups/${s}`)).data},async exportGroups(s){return(await K.api.post(`${we}/custom-fields/export`,s||{})).data},async importGroups(s){return(await K.api.post(`${we}/custom-fields/import`,s)).data}},ms=[{slug:"ds_supplier",name:"공급자"},{slug:"ds_partner",name:"파트너"},{slug:"ds_product",name:"드롭쉬핑 상품"},{slug:"ds_commission_policy",name:"수수료 정책"}],us=()=>{const s=oe(),h=be(),{addNotice:F}=Ie(),[T]=zs(),l=T.get("view")||"types",[i,c]=w.useState("admin-dashboard"),[d,I]=w.useState(""),[E,n]=w.useState("all"),[v,$]=w.useState([]),{data:t=[],isLoading:a,error:D}=J({queryKey:["cpt-types"],queryFn:async()=>(await ge.getAllTypes()).data||[]}),{data:x=[],isLoading:u}=J({queryKey:["acf-field-groups"],queryFn:async()=>(await qs.getAllGroups()).data||[]});ce({mutationFn:async m=>await ge.deleteType(m),onSuccess:()=>{h.invalidateQueries({queryKey:["cpt-types"]}),F({type:"success",message:"Post Type deleted successfully"})},onError:()=>{F({type:"error",message:"Failed to delete Post Type"})}});const j=w.useMemo(()=>{const z=(Array.isArray(t)?t:[]).filter(L=>L?.slug),H=new Set(z.map(L=>L.slug)),o=[...z];return ms.forEach(L=>{H.has(L.slug)||o.push({id:L.slug,slug:L.slug,name:L.name,description:`Dropshipping ${L.name}`,public:L.slug==="ds_product",hasArchive:L.slug==="ds_product",showInMenu:!0,active:!1,supports:["title","editor","custom-fields","revisions"],taxonomies:L.slug==="ds_product"?["ds_product_category","ds_product_tag"]:[]})}),o},[t]),R=w.useMemo(()=>{let m=Array.isArray(j)?j:[];return d&&(m=m.filter(z=>z.name.toLowerCase().includes(d.toLowerCase())||z.slug.toLowerCase().includes(d.toLowerCase()))),E!=="all"&&(m=m.filter(z=>E==="public"?z.public:!z.public)),m},[j,d,E]),r=m=>Array.isArray(x)?x.filter(z=>!z.location||!Array.isArray(z.location)?!1:z.location.some(H=>Array.isArray(H)&&H.some(o=>o&&o.param==="post_type"&&o.value===m))).length:0,O=m=>{s(`/cpt-engine/types/${m}/edit`)},C=m=>{s(`/cpt-engine/field-groups/new?postType=${m}`)},A=m=>{s(`/cpt-engine/taxonomies/new?postType=${m}`)},y=m=>{s(`/cpt-engine/forms/new?postType=${m}`)},g=m=>{s(`/cpt-engine/archives/new?postType=${m}`)},f=m=>m.startsWith("ds_")?e.jsx("span",{className:"cpt-type-badge dropshipping",children:"DS"}):null,N=()=>{switch(l){case"archives":return e.jsx("div",{className:"toolset-card",children:e.jsxs("div",{className:"toolset-card-body",children:[e.jsx("h2",{children:"Archive Pages"}),e.jsx("p",{children:"Archive pages for Custom Post Types. These pages show lists of posts for each CPT."}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsxs("button",{className:"toolset-btn-small",onClick:()=>s("/cpt-engine/archives/new"),children:[e.jsx(B,{size:14}),"Create Archive"]})})]})});case"templates":return e.jsx("div",{className:"toolset-card",children:e.jsxs("div",{className:"toolset-card-body",children:[e.jsx("h2",{children:"Content Templates"}),e.jsx("p",{children:"React-based templates for rendering CPT content. Built with Gutenberg blocks and dynamic shortcodes."}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsxs("button",{className:"toolset-btn-small",onClick:()=>s("/cpt-engine/templates/new"),children:[e.jsx(B,{size:14}),"Create Template"]})})]})});case"fields":return e.jsx("div",{className:"toolset-card",children:e.jsxs("div",{className:"toolset-card-body",children:[e.jsx("h2",{children:"Field Groups"}),e.jsx("p",{children:"Manage field groups and custom fields for your post types."}),e.jsx("div",{style:{marginTop:"20px"},children:e.jsxs("button",{className:"toolset-btn-small",onClick:()=>s("/cpt-engine/field-groups"),children:[e.jsx(B,{size:14}),"View Field Groups"]})})]})});case"taxonomies":return e.jsx("div",{className:"toolset-card",children:e.jsxs("div",{className:"toolset-card-body",children:[e.jsx("h2",{children:"Taxonomies"}),e.jsx("p",{children:"Manage custom taxonomies for organizing your content."}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsxs("button",{className:"toolset-btn-primary",onClick:()=>s("/cpt-engine/taxonomies"),children:[e.jsx(je,{size:14}),"View Taxonomies"]}),e.jsxs("button",{className:"toolset-btn-small",onClick:()=>s("/cpt-engine/taxonomies/new"),style:{marginLeft:"10px"},children:[e.jsx(B,{size:14}),"Create Taxonomy"]})]})]})});default:return Q()}},Q=()=>e.jsxs("div",{className:"toolset-tables-container",children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h1",{style:{fontSize:"24px",color:"#23282d",marginBottom:"10px"},children:"CPT Engine - Toolset Style"}),e.jsx("p",{style:{color:"#666",fontSize:"14px"},children:"Manage your Custom Post Types, Fields, Taxonomies, and Forms"})]}),e.jsxs("div",{className:"toolset-tabs",children:[e.jsxs("button",{className:`toolset-tab ${i==="admin-dashboard"?"active":""}`,onClick:()=>c("admin-dashboard"),children:[e.jsx(ve,{size:16,style:{marginRight:"6px"}}),"Admin Dashboard"]}),e.jsxs("button",{className:`toolset-tab ${i==="frontend"?"active":""}`,onClick:()=>c("frontend"),children:[e.jsx(ye,{size:16,style:{marginRight:"6px"}}),"Front-end"]})]}),i==="admin-dashboard"&&e.jsxs("div",{className:"toolset-table-section",children:[e.jsx("div",{className:"toolset-table-header",children:"Admin Dashboard - Post Types Management"}),e.jsxs("div",{className:"toolset-filters-bar",children:[e.jsxs("div",{className:"toolset-search-box",children:[e.jsx(pe,{}),e.jsx("input",{type:"text",placeholder:"Search post types...",value:d,onChange:m=>I(m.target.value)})]}),e.jsxs("select",{className:"toolset-filter-select",value:E,onChange:m=>n(m.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"private",children:"Private"})]}),e.jsxs("button",{className:"toolset-btn-small",onClick:()=>s("/cpt-engine/types/new"),style:{marginLeft:"auto"},children:[e.jsx(B,{size:14}),"Add New Post Type"]})]}),a?e.jsx("div",{className:"toolset-loading",children:e.jsx("div",{className:"toolset-spinner"})}):!Array.isArray(R)||R.length===0?e.jsxs("div",{className:"toolset-empty-state",children:[e.jsx(Oe,{}),e.jsx("h3",{children:"No Post Types Found"}),e.jsx("p",{children:"Create your first custom post type to get started."}),e.jsxs("button",{className:"toolset-btn-small",onClick:()=>s("/cpt-engine/types/new"),children:[e.jsx(B,{size:14}),"Create Post Type"]})]}):e.jsxs("table",{className:"toolset-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"25%"},children:"Post Type"}),e.jsx("th",{style:{width:"20%"},children:"Custom Fields"}),e.jsx("th",{style:{width:"20%"},children:"Taxonomies"}),e.jsx("th",{style:{width:"15%"},children:"React Template"}),e.jsx("th",{style:{width:"20%"},children:"Forms"})]})}),e.jsx("tbody",{children:R.map(m=>{const z=r(m.slug);return m.slug.startsWith("ds_"),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[m.public?e.jsx("span",{className:"status-public",title:"Public"}):e.jsx("span",{className:"status-private",title:"Private"}),e.jsxs("span",{className:"cpt-name",onClick:()=>O(m.slug),children:[m.name,f(m.slug)]}),e.jsx("div",{className:"cpt-slug",children:m.slug})]})}),e.jsx("td",{children:e.jsxs("div",{className:"field-count",children:[z>0&&e.jsx("span",{className:"field-count-badge",children:z}),e.jsxs("button",{className:"toolset-btn-small",onClick:()=>C(m.slug),children:[e.jsx(B,{size:14}),"Add Fields"]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[m.taxonomies&&m.taxonomies.length>0?e.jsx("div",{className:"taxonomy-list",children:(Array.isArray(m.taxonomies)?m.taxonomies:[]).map(H=>e.jsx("span",{className:"taxonomy-tag",children:H},H))}):null,e.jsxs("button",{className:"toolset-btn-small",onClick:()=>A(m.slug),children:[e.jsx(je,{size:14}),"Add"]})]})}),e.jsx("td",{children:e.jsx("div",{className:"template-info",children:e.jsx("span",{title:"React component template",children:m.hasArchive?"Archive Template":"Single Template"})})}),e.jsx("td",{children:e.jsxs("button",{className:"toolset-btn-small",onClick:()=>y(m.slug),children:[e.jsx(re,{size:14}),"Create Form"]})})]},m.slug)})})]})]}),i==="frontend"&&e.jsxs("div",{className:"toolset-table-section",children:[e.jsx("div",{className:"toolset-table-header",children:"Front-end - Display Settings"}),e.jsxs("div",{className:"toolset-filters-bar",children:[e.jsxs("div",{className:"toolset-search-box",children:[e.jsx(pe,{}),e.jsx("input",{type:"text",placeholder:"Search post types...",value:d,onChange:m=>I(m.target.value)})]}),e.jsxs("select",{className:"toolset-filter-select",value:E,onChange:m=>n(m.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"private",children:"Private"})]})]}),a?e.jsx("div",{className:"toolset-loading",children:e.jsx("div",{className:"toolset-spinner"})}):!Array.isArray(R)||R.length===0?e.jsxs("div",{className:"toolset-empty-state",children:[e.jsx(Oe,{}),e.jsx("h3",{children:"No Post Types Found"}),e.jsx("p",{children:"Create your first custom post type to get started."})]}):e.jsxs("table",{className:"toolset-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"25%"},children:"Post Type"}),e.jsx("th",{style:{width:"20%"},children:"Custom Fields"}),e.jsx("th",{style:{width:"20%"},children:"Taxonomies"}),e.jsx("th",{style:{width:"20%"},children:"Archive"}),e.jsx("th",{style:{width:"15%"},children:"Forms"})]})}),e.jsx("tbody",{children:R.map(m=>{const z=r(m.slug);return m.slug.startsWith("ds_"),e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[m.public?e.jsx("span",{className:"status-public",title:"Public"}):e.jsx("span",{className:"status-private",title:"Private"}),e.jsxs("span",{className:"cpt-name",onClick:()=>O(m.slug),children:[m.name,f(m.slug)]}),e.jsx("div",{className:"cpt-slug",children:m.slug})]})}),e.jsx("td",{children:e.jsxs("div",{className:"field-count",children:[z>0&&e.jsx("span",{className:"field-count-badge",children:z}),e.jsxs("button",{className:"toolset-btn-small",onClick:()=>C(m.slug),children:[e.jsx(B,{size:14}),"Add Fields"]})]})}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[m.taxonomies&&m.taxonomies.length>0?e.jsx("div",{className:"taxonomy-list",children:(Array.isArray(m.taxonomies)?m.taxonomies:[]).map(H=>e.jsx("span",{className:"taxonomy-tag",children:H},H))}):null,e.jsxs("button",{className:"toolset-btn-small",onClick:()=>A(m.slug),children:[e.jsx(je,{size:14}),"Add"]})]})}),e.jsx("td",{children:m.hasArchive?e.jsxs("div",{children:[e.jsx("span",{className:"archive-enabled",title:"React-based archive template",children:"Archive Template"}),e.jsxs("button",{className:"toolset-btn-small",onClick:()=>g(m.slug),style:{marginLeft:"8px"},children:[e.jsx(ys,{size:14}),"Edit"]})]}):e.jsxs("div",{children:[e.jsx("span",{className:"archive-disabled",children:"Disabled"}),m.public&&e.jsxs("button",{className:"toolset-btn-small",onClick:()=>g(m.slug),style:{marginLeft:"8px"},children:[e.jsx(Vs,{size:14}),"Create"]})]})}),e.jsx("td",{children:e.jsxs("button",{className:"toolset-btn-small",onClick:()=>y(m.slug),children:[e.jsx(re,{size:14}),"Create"]})})]},m.slug)})})]})]}),e.jsxs("div",{style:{marginTop:"30px",padding:"20px",background:"white",border:"1px solid #ddd",borderRadius:"4px"},children:[e.jsx("h3",{style:{fontSize:"16px",marginBottom:"10px",color:"#23282d"},children:"Dropshipping CPTs Status"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:ms.map(m=>{const z=Array.isArray(j)&&j.some(o=>o.slug===m.slug),H=Array.isArray(j)&&j.find(o=>o.slug===m.slug)?.active;return e.jsxs("div",{style:{padding:"10px",background:"#f9f9f9",borderRadius:"4px"},children:[e.jsx("div",{style:{fontWeight:600,color:"#333",marginBottom:"4px"},children:m.name}),e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:m.slug}),e.jsx("div",{style:{fontSize:"12px",marginTop:"4px"},children:z?H?e.jsx("span",{style:{color:"#46b450"},children:"✓ Active"}):e.jsx("span",{style:{color:"#ffa500"},children:"⚠ Inactive"}):e.jsx("span",{style:{color:"#dc3545"},children:"✗ Not Found"})})]},m.slug)})})]})]});return e.jsxs("div",{className:"toolset-tables-container",children:[e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsxs("h1",{style:{fontSize:"24px",color:"#23282d",marginBottom:"10px"},children:["CPT Engine - ",l==="archives"?"Archives":l==="templates"?"Content Templates":l==="fields"?"Field Groups":l==="taxonomies"?"Taxonomies":"Post Types"]}),e.jsx("p",{style:{color:"#666"},children:l==="archives"?"Manage archive pages for your custom post types":l==="templates"?"Create templates for displaying CPT content":l==="fields"?"Create and manage field groups for custom fields":l==="taxonomies"?"Organize content with custom taxonomies":"Manage your custom post types with this professional interface"})]}),N()]})},na=({cptSlug:s,postId:h,onSave:F,onCancel:T})=>{const l=oe(),i=be(),{addNotice:c}=Ie(),[d,I]=w.useState({title:"",content:"",excerpt:"",status:"draft",slug:"",featuredImage:void 0,metadata:{},acfFields:{}}),[E,n]=w.useState("content"),{data:v}=J({queryKey:["cpt-type",s],queryFn:async()=>(await ge.getTypeBySlug(s)).data}),{data:$}=J({queryKey:["acf-groups",s],queryFn:async()=>(await qs.getByPostType(s)).data}),{data:t,isLoading:a}=J({queryKey:["cpt-post",s,h],queryFn:async()=>h?(await Te.getPost(s,h)).data:null,enabled:!!h});w.useEffect(()=>{t&&I({title:t.title,content:t.content||"",excerpt:t.excerpt||"",status:t.status,slug:t.slug,featuredImage:t.featuredImage,metadata:t.metadata||{},acfFields:t.acfFields||{}})},[t]);const D=ce({mutationFn:async C=>await Te.createPost(s,C),onSuccess:C=>{c({type:"success",message:`${v?.singularLabel||"콘텐츠"}가 생성되었습니다.`}),i.invalidateQueries({queryKey:["cpt-posts",s]}),F?.(C.data),l(`/cpt-engine/content/${s}/${C.data.id}/edit`)},onError:C=>{c({type:"error",message:`생성 실패: ${C.message}`})}}),x=ce({mutationFn:async C=>{if(!h)throw new Error("Post ID is required");return await Te.updatePost(s,h,C)},onSuccess:C=>{c({type:"success",message:`${v?.singularLabel||"콘텐츠"}가 업데이트되었습니다.`}),i.invalidateQueries({queryKey:["cpt-posts",s]}),i.invalidateQueries({queryKey:["cpt-post",s,h]}),F?.(C.data)},onError:C=>{c({type:"error",message:`업데이트 실패: ${C.message}`})}}),u=(C,A)=>{I(y=>({...y,[C]:A}))},j=(C,A)=>{I(y=>({...y,acfFields:{...y.acfFields,[C]:A}}))},R=async C=>{const A={...d,status:C||d.status||"draft"};h?await x.mutate(A):await D.mutate(A)},r=()=>{if(!d.title)return;const C=d.title.toLowerCase().replace(/[^a-z0-9가-힣ㄱ-ㅎㅏ-ㅣ\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();u("slug",C)},O=D.isPending||x.isPending||a;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>T?T():l(`/cpt-engine/content/${s}`),children:e.jsx(De,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[h?"편집":"새로 만들기",": ",v?.singularLabel||"콘텐츠"]}),e.jsx("p",{className:"text-muted-foreground",children:v?.description||`${v?.label} 콘텐츠를 관리합니다`})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",onClick:()=>R("draft"),disabled:O,children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"임시 저장"]}),e.jsxs(b,{onClick:()=>R("publish"),disabled:O,children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"발행"]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsx(k,{children:e.jsx(_,{className:"pt-6",children:e.jsxs(Me,{value:E,onValueChange:n,children:[e.jsxs(qe,{className:"grid w-full grid-cols-2",children:[e.jsx(ie,{value:"content",children:"콘텐츠"}),e.jsxs(ie,{value:"fields",children:["추가 필드",$&&$.length>0&&e.jsx(Y,{variant:"secondary",className:"ml-2",children:$.reduce((C,A)=>C+A.fields.length,0)})]})]}),e.jsxs(ne,{value:"content",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"title",children:"제목"}),e.jsx(P,{id:"title",value:d.title||"",onChange:C=>u("title",C.target.value),placeholder:`${v?.singularLabel||"콘텐츠"} 제목을 입력하세요`})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"slug",children:"슬러그"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{id:"slug",value:d.slug||"",onChange:C=>u("slug",C.target.value),placeholder:"url-friendly-slug"}),e.jsx(b,{type:"button",variant:"outline",onClick:r,disabled:!d.title,children:"자동 생성"})]})]}),v?.supports?.includes("editor")&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"content",children:"내용"}),e.jsx(de,{id:"content",value:d.content||"",onChange:C=>u("content",C.target.value),placeholder:"콘텐츠 내용을 입력하세요...",rows:10})]}),v?.supports?.includes("excerpt")&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"excerpt",children:"요약"}),e.jsx(de,{id:"excerpt",value:d.excerpt||"",onChange:C=>u("excerpt",C.target.value),placeholder:"간단한 요약을 입력하세요",rows:3})]})]}),e.jsx(ne,{value:"fields",className:"space-y-4",children:$&&$.length>0?$.map(C=>e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{className:"text-lg",children:C.title}),C.description&&e.jsx(te,{children:C.description})]}),e.jsx(_,{children:e.jsx("div",{className:"space-y-4",children:C.fields.map(A=>e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:A.name,children:A.label}),A.type==="text"?e.jsx(P,{id:A.name,value:d.acfFields?.[A.name]||"",onChange:y=>j(A.name,y.target.value),placeholder:A.placeholder}):A.type==="textarea"?e.jsx(de,{id:A.name,value:d.acfFields?.[A.name]||"",onChange:y=>j(A.name,y.target.value),placeholder:A.placeholder,rows:4}):A.type==="select"?e.jsxs(X,{value:d.acfFields?.[A.name]||"",onValueChange:y=>j(A.name,y),children:[e.jsx(Z,{id:A.name,children:e.jsx(ee,{placeholder:A.placeholder||"선택..."})}),e.jsx(se,{children:A.options?.choices?.map(y=>e.jsx(S,{value:y,children:y},y))})]}):e.jsx(P,{id:A.name,value:d.acfFields?.[A.name]||"",onChange:y=>j(A.name,y.target.value),placeholder:A.placeholder}),A.description&&e.jsx("p",{className:"text-xs text-muted-foreground",children:A.description})]},A.id))})})]},C.id)):e.jsx(k,{children:e.jsxs(_,{className:"flex flex-col items-center justify-center h-64 text-center",children:[e.jsx(Be,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"이 콘텐츠 타입에 대한 추가 필드가 없습니다."}),e.jsx(b,{variant:"link",onClick:()=>l(`/cpt-engine/fields?type=${s}`),className:"mt-2",children:"필드 추가하기"})]})})})]})})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(k,{children:[e.jsx(M,{children:e.jsx(q,{className:"text-base",children:"발행 설정"})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"status",children:"상태"}),e.jsxs(X,{value:d.status||"draft",onValueChange:C=>u("status",C),children:[e.jsx(Z,{id:"status",children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(S,{value:"draft",children:"임시 저장"}),e.jsx(S,{value:"publish",children:"발행됨"}),e.jsx(S,{value:"private",children:"비공개"}),e.jsx(S,{value:"trash",children:"휴지통"})]})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsxs("span",{children:["생성: ",new Date(t.createdAt).toLocaleDateString("ko-KR")]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsxs("span",{children:["작성자: ",t.author?.name||"알 수 없음"]})]})]}),e.jsxs(b,{variant:"outline",className:"w-full",onClick:()=>{const A=`${window.location.origin.replace("admin.","")}/${s}/${d.slug||"preview"}`;window.open(A,"_blank")},disabled:!d.slug,children:[e.jsx(fs,{className:"h-4 w-4 mr-2"}),"미리보기"]})]})]}),v?.supports?.includes("thumbnail")&&e.jsxs(k,{children:[e.jsx(M,{children:e.jsx(q,{className:"text-base",children:"대표 이미지"})}),e.jsx(_,{children:d.featuredImage?e.jsxs("div",{className:"space-y-2",children:[e.jsx("img",{src:d.featuredImage,alt:"Featured",className:"w-full rounded-md"}),e.jsx(b,{variant:"outline",size:"sm",className:"w-full",onClick:()=>u("featuredImage",void 0),children:"이미지 제거"})]}):e.jsxs("div",{className:"border-2 border-dashed rounded-md p-4 text-center",children:[e.jsx(ls,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"클릭하여 이미지 선택"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:C=>{const A=C.target.files?.[0];if(A){const y=new FileReader;y.onloadend=()=>{u("featuredImage",y.result)},y.readAsDataURL(A)}}})]})})]}),e.jsxs(k,{children:[e.jsx(M,{children:e.jsx(q,{className:"text-base",children:"메타데이터"})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"metaTitle",children:"메타 제목"}),e.jsx(P,{id:"metaTitle",value:d.metadata?.title||"",onChange:C=>u("metadata",{...d.metadata,title:C.target.value}),placeholder:"검색 결과에 표시될 제목"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"metaDescription",children:"메타 설명"}),e.jsx(de,{id:"metaDescription",value:d.metadata?.description||"",onChange:C=>u("metadata",{...d.metadata,description:C.target.value}),placeholder:"검색 결과에 표시될 설명",rows:3})]})]})]})]})]})]})},js=()=>{const{cptSlug:s,postId:h}=_e(),F=oe();return s?e.jsx(na,{cptSlug:s,postId:h,onSave:()=>F(`/cpt-engine/content/${s}`),onCancel:()=>F("/cpt-engine")}):(F("/cpt-engine"),null)},ra=({cptTypes:s,selectedType:h,onUpdate:F,onClose:T})=>{const l=be(),{addNotice:i}=Ie(),[c,d]=w.useState(h||null),[I,E]=w.useState(!h),[n,v]=w.useState({slug:h?.slug||"",label:h?.label||"",singularLabel:h?.singularLabel||"",description:h?.description||"",icon:h?.icon||"file-text",isActive:h?.isActive??!0,public:h?.public??!0,showInMenu:h?.showInMenu??!0,menuPosition:h?.menuPosition||25,hasArchive:h?.hasArchive??!0,supports:h?.supports||["title","editor","thumbnail"],rewrite:h?.rewrite||{slug:"",withFront:!0},capabilities:h?.capabilities||{},taxonomies:h?.taxonomies||[]}),$=[{id:"title",label:"제목",icon:re},{id:"editor",label:"편집기",icon:re},{id:"thumbnail",label:"대표 이미지",icon:ye},{id:"excerpt",label:"요약",icon:re},{id:"comments",label:"댓글",icon:re},{id:"revisions",label:"리비전",icon:ve},{id:"page-attributes",label:"페이지 속성",icon:Be}],t=ce({mutationFn:async r=>await ge.createType(r),onSuccess:()=>{i({type:"success",message:"새 콘텐츠 타입이 생성되었습니다."}),l.invalidateQueries({queryKey:["cpt-types"]}),F?.(),E(!1),v({})},onError:r=>{i({type:"error",message:`생성 실패: ${r.message}`})}}),a=ce({mutationFn:async({slug:r,data:O})=>await ge.updateType(r,O),onSuccess:()=>{i({type:"success",message:"콘텐츠 타입이 업데이트되었습니다."}),l.invalidateQueries({queryKey:["cpt-types"]}),F?.()},onError:r=>{i({type:"error",message:`업데이트 실패: ${r.message}`})}}),D=ce({mutationFn:async r=>await ge.deleteType(r),onSuccess:()=>{i({type:"success",message:"콘텐츠 타입이 삭제되었습니다."}),l.invalidateQueries({queryKey:["cpt-types"]}),d(null),F?.()},onError:r=>{i({type:"error",message:`삭제 실패: ${r.message}`})}}),x=(r,O)=>{v(C=>({...C,[r]:O}))},u=r=>{const O=n.supports||[],C=O.includes(r)?O.filter(A=>A!==r):[...O,r];x("supports",C)},j=async()=>{I?await t.mutate(n):c&&await a.mutate({slug:c.slug,data:n})},R=r=>{d(r),E(!1),v({slug:r.slug,label:r.label,singularLabel:r.singularLabel,description:r.description,icon:r.icon,isActive:r.isActive,public:r.public,showInMenu:r.showInMenu,menuPosition:r.menuPosition,hasArchive:r.hasArchive,supports:r.supports,rewrite:r.rewrite,capabilities:r.capabilities,taxonomies:r.taxonomies})};return e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1 space-y-4",children:e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"콘텐츠 타입 목록"}),e.jsx(te,{children:"등록된 모든 CPT를 관리합니다"})]}),e.jsxs(_,{className:"space-y-2",children:[e.jsxs(b,{className:"w-full justify-start",variant:I?"default":"outline",onClick:()=>{E(!0),d(null),v({slug:"",label:"",singularLabel:"",description:"",icon:"file-text",isActive:!0,public:!0,showInMenu:!0,menuPosition:25,hasArchive:!0,supports:["title","editor","thumbnail"],rewrite:{slug:"",withFront:!0},capabilities:{},taxonomies:[]})},children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"새 타입 추가"]}),e.jsx("div",{className:"space-y-1",children:s.map(r=>e.jsxs(b,{variant:c?.slug===r.slug?"secondary":"ghost",className:"w-full justify-start",onClick:()=>R(r),children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),r.label,!r.isActive&&e.jsx(Qe,{className:"h-3 w-3 ml-auto"})]},r.slug))})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:I?"새 콘텐츠 타입 생성":`${n.label} 편집`}),e.jsx(te,{children:"콘텐츠 타입의 기본 설정을 구성합니다"})]}),e.jsxs(_,{children:[e.jsxs(Me,{defaultValue:"basic",className:"w-full",children:[e.jsxs(qe,{className:"grid w-full grid-cols-3",children:[e.jsx(ie,{value:"basic",children:"기본 정보"}),e.jsx(ie,{value:"display",children:"표시 설정"}),e.jsx(ie,{value:"advanced",children:"고급 설정"})]}),e.jsx(ne,{value:"basic",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"slug",children:"슬러그 (Slug)"}),e.jsx(P,{id:"slug",value:n.slug||"",onChange:r=>x("slug",r.target.value),placeholder:"예: product, portfolio",disabled:!I}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"URL과 데이터베이스에서 사용되는 고유 식별자"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"label",children:"레이블 (복수형)"}),e.jsx(P,{id:"label",value:n.label||"",onChange:r=>x("label",r.target.value),placeholder:"예: 상품들"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"singularLabel",children:"레이블 (단수형)"}),e.jsx(P,{id:"singularLabel",value:n.singularLabel||"",onChange:r=>x("singularLabel",r.target.value),placeholder:"예: 상품"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"description",children:"설명"}),e.jsx(de,{id:"description",value:n.description||"",onChange:r=>x("description",r.target.value),placeholder:"이 콘텐츠 타입에 대한 설명을 입력하세요",rows:3})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:"isActive",checked:n.isActive||!1,onCheckedChange:r=>x("isActive",r)}),e.jsx(p,{htmlFor:"isActive",children:"활성화"})]})]})}),e.jsx(ne,{value:"display",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:"public",checked:n.public||!1,onCheckedChange:r=>x("public",r)}),e.jsx(p,{htmlFor:"public",children:"공개 (Public)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:"showInMenu",checked:n.showInMenu||!1,onCheckedChange:r=>x("showInMenu",r)}),e.jsx(p,{htmlFor:"showInMenu",children:"메뉴에 표시"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:"hasArchive",checked:n.hasArchive||!1,onCheckedChange:r=>x("hasArchive",r)}),e.jsxs(p,{htmlFor:"hasArchive",children:["아카이브 페이지 (인덱스)",e.jsx("span",{className:"text-xs text-muted-foreground block",children:"콘텐츠 목록을 보여주는 인덱스 페이지를 생성합니다"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"menuPosition",children:"메뉴 위치"}),e.jsx(P,{id:"menuPosition",type:"number",value:n.menuPosition||25,onChange:r=>x("menuPosition",parseInt(r.target.value))})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{children:"지원 기능"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:$.map(r=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:`support-${r.id}`,checked:n.supports?.includes(r.id)||!1,onCheckedChange:()=>u(r.id)}),e.jsx(p,{htmlFor:`support-${r.id}`,className:"text-sm",children:r.label})]},r.id))})]})]})}),e.jsx(ne,{value:"advanced",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"rewriteSlug",children:"Rewrite Slug"}),e.jsx(P,{id:"rewriteSlug",value:n.rewrite?.slug||"",onChange:r=>x("rewrite",{...n.rewrite,slug:r.target.value}),placeholder:"URL 재작성 슬러그"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(le,{id:"withFront",checked:n.rewrite?.withFront||!1,onCheckedChange:r=>x("rewrite",{...n.rewrite,withFront:r})}),e.jsx(p,{htmlFor:"withFront",children:"Front 접두사 사용"})]})]})})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx("div",{children:c&&!I&&e.jsxs(b,{variant:"destructive",onClick:()=>{window.confirm("이 콘텐츠 타입을 삭제하시겠습니까?")&&D.mutate(c.slug)},disabled:D.isPending,children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"삭제"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"outline",onClick:()=>{d(null),E(!1),T?.()},children:"취소"}),e.jsxs(b,{onClick:j,disabled:t.isPending||a.isPending,children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),I?"생성":"저장"]})]})]})]})]})})]})},Ge=()=>{const{slug:s}=_e(),h=oe(),{data:F=[],isLoading:T}=J({queryKey:["cpt-types"],queryFn:async()=>await ge.getTypes()||[]}),l=s?F.find(i=>i.slug===s):void 0;return T?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx(Gs,{className:"h-8 w-8 animate-spin"})}):e.jsx(ra,{cptTypes:F,selectedType:l,onUpdate:()=>h("/cpt-engine"),onClose:()=>h("/cpt-engine")})},Re=w.forwardRef(({className:s,...h},F)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:F,className:Ne("w-full caption-bottom text-sm",s),...h})}));Re.displayName="Table";const ze=w.forwardRef(({className:s,...h},F)=>e.jsx("thead",{ref:F,className:Ne("[&_tr]:border-b",s),...h}));ze.displayName="TableHeader";const Ve=w.forwardRef(({className:s,...h},F)=>e.jsx("tbody",{ref:F,className:Ne("[&_tr:last-child]:border-0",s),...h}));Ve.displayName="TableBody";const ca=w.forwardRef(({className:s,...h},F)=>e.jsx("tfoot",{ref:F,className:Ne("border-t bg-gray-50 font-medium [&>tr]:last:border-b-0",s),...h}));ca.displayName="TableFooter";const xe=w.forwardRef(({className:s,...h},F)=>e.jsx("tr",{ref:F,className:Ne("border-b transition-colors hover:bg-gray-50 data-[state=selected]:bg-gray-100",s),...h}));xe.displayName="TableRow";const U=w.forwardRef(({className:s,...h},F)=>e.jsx("th",{ref:F,className:Ne("h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0",s),...h}));U.displayName="TableHead";const G=w.forwardRef(({className:s,...h},F)=>e.jsx("td",{ref:F,className:Ne("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...h}));G.displayName="TableCell";const da=w.forwardRef(({className:s,...h},F)=>e.jsx("caption",{ref:F,className:Ne("mt-4 text-sm text-gray-500",s),...h}));da.displayName="TableCaption";const oa=({selectedType:s,onTypeSelect:h,cptTypes:F})=>{const T=oe(),l=be(),{addNotice:i}=Ie(),[c,d]=w.useState([]),[I,E]=w.useState(""),[n,v]=w.useState("all"),[$,t]=w.useState(1),[a]=w.useState(20),D=F.find(N=>N.slug===s),x=w.useMemo(()=>({page:$,limit:a,search:I,status:n==="all"?void 0:n,orderBy:"updatedAt",order:"desc"}),[$,a,I,n]),{data:u,isLoading:j,refetch:R}=J({queryKey:["cpt-posts",s,x],queryFn:async()=>s?(await Te.getPostsByType(s,x)).data:null,enabled:!!s}),r=u||[],O=ce({mutationFn:async({action:N,ids:Q})=>{if(!s)throw new Error("No CPT type selected");return await Te.bulkAction(s,N,Q)},onSuccess:(N,Q)=>{const m={trash:"휴지통으로 이동했습니다",restore:"복원했습니다",delete:"영구 삭제했습니다",publish:"발행했습니다",draft:"임시 저장으로 변경했습니다"};i({type:"success",message:`${Q.ids.length}개 항목을 ${m[Q.action]||"처리했습니다"}.`}),l.invalidateQueries({queryKey:["cpt-posts",s]}),d([])},onError:N=>{i({type:"error",message:`작업 실패: ${N.message}`})}}),C=ce({mutationFn:async N=>{if(!s)throw new Error("No CPT type selected");return await Te.deletePost(s,N)},onSuccess:()=>{i({type:"success",message:"콘텐츠가 삭제되었습니다."}),l.invalidateQueries({queryKey:["cpt-posts",s]})},onError:N=>{i({type:"error",message:`삭제 실패: ${N.message}`})}}),A=N=>{d(N?r.map(Q=>Q.id):[])},y=(N,Q)=>{d(Q?[...c,N]:c.filter(m=>m!==N))},g=N=>{if(c.length===0){i({type:"warning",message:"선택된 항목이 없습니다."});return}N==="delete"&&!window.confirm("선택한 항목을 영구 삭제하시겠습니까?")||O.mutate({action:N,ids:c})},f=N=>({publish:{label:"발행됨",variant:"default"},draft:{label:"임시저장",variant:"secondary"},private:{label:"비공개",variant:"outline"},trash:{label:"휴지통",variant:"destructive"}})[N]||{label:N,variant:"secondary"};return s?e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{children:e.jsx(M,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(q,{children:[D?.label||s," 콘텐츠"]}),e.jsx(te,{children:D?.description||`${s} 타입의 모든 콘텐츠를 관리합니다`})]}),e.jsxs(b,{onClick:()=>T(`/cpt-engine/content/${s}/new`),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"새 ",D?.singularLabel||"콘텐츠"]})]})})}),e.jsx(k,{children:e.jsxs(_,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(P,{placeholder:"검색...",value:I,onChange:N=>E(N.target.value),className:"pl-9"})]})}),e.jsxs(X,{value:n,onValueChange:N=>v(N),children:[e.jsx(Z,{className:"w-40",children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(S,{value:"all",children:"모든 상태"}),e.jsx(S,{value:"publish",children:"발행됨"}),e.jsx(S,{value:"draft",children:"임시저장"}),e.jsx(S,{value:"private",children:"비공개"}),e.jsx(S,{value:"trash",children:"휴지통"})]})]}),e.jsxs(X,{value:s,onValueChange:h,children:[e.jsx(Z,{className:"w-48",children:e.jsx(ee,{})}),e.jsx(se,{children:F.map(N=>e.jsx(S,{value:N.slug,children:N.label},N.slug))})]})]}),c.length>0&&e.jsxs("div",{className:"flex items-center gap-4 mt-4 p-3 bg-accent rounded-md",children:[e.jsxs("span",{className:"text-sm font-medium",children:[c.length,"개 선택됨"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{size:"sm",variant:"outline",onClick:()=>g("publish"),children:"발행"}),e.jsx(b,{size:"sm",variant:"outline",onClick:()=>g("draft"),children:"임시저장"}),e.jsx(b,{size:"sm",variant:"outline",onClick:()=>g("trash"),children:"휴지통"}),e.jsx(b,{size:"sm",variant:"destructive",onClick:()=>g("delete"),children:"영구 삭제"})]})]})]})}),e.jsx(k,{children:e.jsx(_,{className:"p-0",children:e.jsxs(Re,{children:[e.jsx(ze,{children:e.jsxs(xe,{children:[e.jsx(U,{className:"w-12",children:e.jsx(as,{checked:r.length>0&&c.length===r.length,onCheckedChange:A})}),e.jsx(U,{children:"제목"}),e.jsx(U,{children:"상태"}),e.jsx(U,{children:"작성자"}),e.jsx(U,{children:"날짜"}),e.jsx(U,{className:"w-12"})]})}),e.jsx(Ve,{children:j?e.jsx(xe,{children:e.jsx(G,{colSpan:6,className:"text-center py-8",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})}):r.length===0?e.jsx(xe,{children:e.jsx(G,{colSpan:6,className:"text-center py-8",children:e.jsx("div",{className:"text-muted-foreground",children:I||n!=="all"?"검색 결과가 없습니다":"아직 콘텐츠가 없습니다"})})}):r.map(N=>{const Q=f(N.status);return e.jsxs(xe,{children:[e.jsx(G,{children:e.jsx(as,{checked:c.includes(N.id),onCheckedChange:m=>y(N.id,m)})}),e.jsx(G,{children:e.jsxs("div",{children:[e.jsx("button",{className:"font-medium hover:underline text-left",onClick:()=>T(`/cpt-engine/content/${s}/${N.id}/edit`),children:N.title||"(제목 없음)"}),N.slug&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["/",N.slug]})]})}),e.jsx(G,{children:e.jsx(Y,{variant:Q.variant,children:Q.label})}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:N.author?.name||"알 수 없음"})]})}),e.jsxs(G,{children:[e.jsx("div",{className:"text-sm",children:hs(new Date(N.updatedAt),"PPP",{locale:xs})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:hs(new Date(N.updatedAt),"p",{locale:xs})})]}),e.jsx(G,{children:e.jsxs(Ae,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(Ks,{className:"h-4 w-4"})})}),e.jsxs(Pe,{align:"end",children:[e.jsx(sa,{children:"작업"}),e.jsx(Fe,{}),e.jsxs(W,{onClick:()=>T(`/cpt-engine/content/${s}/${N.id}/edit`),children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),"편집"]}),e.jsxs(W,{onClick:()=>{const m=window.location.origin.replace("admin.","");window.open(`${m}/${s}/${N.slug}`,"_blank")},children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"보기"]}),e.jsxs(W,{onClick:()=>{i({type:"info",message:"복제 기능은 준비 중입니다."})},children:[e.jsx(fe,{className:"h-4 w-4 mr-2"}),"복제"]}),e.jsx(Fe,{}),e.jsxs(W,{className:"text-destructive",onClick:()=>{window.confirm("이 콘텐츠를 삭제하시겠습니까?")&&C.mutate(N.id)},children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"삭제"]})]})]})})]},N.id)})})]})})}),r.length>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.length,"개 항목"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"outline",size:"icon",onClick:()=>t(N=>Math.max(1,N-1)),disabled:$===1,children:e.jsx(Bs,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center px-3",children:e.jsxs("span",{className:"text-sm",children:["페이지 ",$]})}),e.jsx(b,{variant:"outline",size:"icon",onClick:()=>t(N=>N+1),disabled:r.length<a,children:e.jsx(bs,{className:"h-4 w-4"})})]})]})]}):e.jsx(k,{children:e.jsxs(_,{className:"flex flex-col items-center justify-center h-96 text-center",children:[e.jsx(re,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"콘텐츠 타입 선택"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"관리할 콘텐츠 타입을 선택하세요"}),e.jsxs(X,{value:"",onValueChange:h,children:[e.jsx(Z,{className:"w-64",children:e.jsx(ee,{placeholder:"콘텐츠 타입 선택..."})}),e.jsx(se,{children:F.map(N=>e.jsx(S,{value:N.slug,children:N.label},N.slug))})]})]})})},ha=()=>{const s=oe(),[h,F]=w.useState(""),[T,l]=w.useState("all"),{data:i=[],isLoading:c,refetch:d}=J({queryKey:["forms"],queryFn:async()=>(await K.api.get("/api/cpt/forms")).data?.data||[]}),I={contact:{icon:He,label:"Contact Form",color:"blue"},post:{icon:re,label:"Post Form",color:"green"},user:{icon:Os,label:"User Form",color:"purple"},search:{icon:pe,label:"Search Form",color:"orange"},cpt:{icon:ve,label:"CPT Form",color:"indigo"}},E=i.filter(v=>{const $=v.name.toLowerCase().includes(h.toLowerCase()),t=T==="all"||v.type===T;return $&&t}),n={total:i.length,active:i.filter(v=>v.status==="active").length,submissions:i.reduce((v,$)=>v+$.submissions,0),contact:i.filter(v=>v.type==="contact").length,post:i.filter(v=>v.type==="post").length,user:i.filter(v=>v.type==="user").length,search:i.filter(v=>v.type==="search").length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Forms"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create and manage frontend forms"})]}),e.jsxs(b,{onClick:()=>s("/cpt-engine/forms/new"),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Create Form"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Forms"})}),e.jsxs(_,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.total}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n.active," active"]})]})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Contact Forms"})}),e.jsxs(_,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.contact}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email notifications"})]})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Post Forms"})}),e.jsxs(_,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.post}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Frontend submissions"})]})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Submissions"})}),e.jsxs(_,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.submissions}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All time"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(k,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>s("/cpt-engine/forms/new?type=contact"),children:[e.jsxs(M,{children:[e.jsx(He,{className:"w-8 h-8 text-blue-500 mb-2"}),e.jsx(q,{children:"Contact Forms"}),e.jsx(te,{children:"Create contact forms with email notifications"})]}),e.jsx(_,{children:e.jsx(b,{variant:"outline",className:"w-full",children:"Create Contact Form"})})]}),e.jsxs(k,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>s("/cpt-engine/forms/new?type=post"),children:[e.jsxs(M,{children:[e.jsx(ve,{className:"w-8 h-8 text-green-500 mb-2"}),e.jsx(q,{children:"Post Forms"}),e.jsx(te,{children:"Frontend forms for creating and editing posts"})]}),e.jsx(_,{children:e.jsx(b,{variant:"outline",className:"w-full",children:"Create Post Form"})})]}),e.jsxs(k,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>s("/cpt-engine/forms/new?type=user"),children:[e.jsxs(M,{children:[e.jsx(ws,{className:"w-8 h-8 text-purple-500 mb-2"}),e.jsx(q,{children:"User Forms"}),e.jsx(te,{children:"Registration and profile editing forms"})]}),e.jsx(_,{children:e.jsx(b,{variant:"outline",className:"w-full",children:"Create User Form"})})]}),e.jsxs(k,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>s("/cpt-engine/forms/new?type=search"),children:[e.jsxs(M,{children:[e.jsx(pe,{className:"w-8 h-8 text-orange-500 mb-2"}),e.jsx(q,{children:"Search Forms"}),e.jsx(te,{children:"Advanced search with custom filters"})]}),e.jsx(_,{children:e.jsx(b,{variant:"outline",className:"w-full",children:"Create Search Form"})})]})]}),e.jsxs(k,{children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(q,{children:"All Forms"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(P,{placeholder:"Search forms...",value:h,onChange:v=>F(v.target.value),className:"pl-10 w-64"})]}),e.jsxs(X,{value:T,onValueChange:l,children:[e.jsx(Z,{className:"w-40",children:e.jsx(ee,{placeholder:"All Types"})}),e.jsxs(se,{children:[e.jsx(S,{value:"all",children:"All Types"}),e.jsx(S,{value:"contact",children:"Contact"}),e.jsx(S,{value:"post",children:"Post"}),e.jsx(S,{value:"user",children:"User"}),e.jsx(S,{value:"search",children:"Search"})]})]})]})]})}),e.jsx(_,{children:c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):E.length>0?e.jsxs(Re,{children:[e.jsx(ze,{children:e.jsxs(xe,{children:[e.jsx(U,{children:"Name"}),e.jsx(U,{children:"Type"}),e.jsx(U,{children:"Status"}),e.jsx(U,{children:"Fields"}),e.jsx(U,{children:"Submissions"}),e.jsx(U,{children:"Modified"}),e.jsx(U,{className:"text-right",children:"Actions"})]})}),e.jsx(Ve,{children:E.map(v=>{const $=I[v.type].icon;return e.jsxs(xe,{children:[e.jsx(G,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{children:v.name}),v.cptSlug&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["CPT: ",v.cptSlug]})]})}),e.jsx(G,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:I[v.type].label})]})}),e.jsx(G,{children:e.jsx(Y,{variant:v.status==="active"?"default":"secondary",children:v.status})}),e.jsx(G,{children:v.fields}),e.jsx(G,{children:v.submissions}),e.jsx(G,{children:v.modified}),e.jsx(G,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-1",children:[e.jsx(b,{size:"sm",variant:"ghost",onClick:()=>s(`/cpt-engine/forms/${v.id}/submissions`),title:"View Submissions",children:e.jsx(ye,{className:"w-4 h-4"})}),e.jsx(b,{size:"sm",variant:"ghost",onClick:()=>s(`/cpt-engine/forms/${v.id}/edit`),title:"Edit Form",children:e.jsx(ys,{className:"w-4 h-4"})}),e.jsx(b,{size:"sm",variant:"ghost",title:"Duplicate Form",children:e.jsx(fe,{className:"w-4 h-4"})}),e.jsx(b,{size:"sm",variant:"ghost",className:"text-red-600",title:"Delete Form",children:e.jsx(me,{className:"w-4 h-4"})})]})})]},v.id)})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Forms Created Yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first form"}),e.jsxs(b,{onClick:()=>s("/cpt-engine/forms/new"),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Create Your First Form"]})]})})]})]})},xa={text:Ee,number:Se,email:He,url:Cs,date:ts,textarea:re,select:is,checkbox:Hs,radio:Qs,true_false:Ke,file:ls,relationship:ve};function ma({field:s,isExpanded:h,onToggleExpand:F,onEdit:T,onDelete:l}){const{attributes:i,listeners:c,setNodeRef:d,transform:I,transition:E,isDragging:n}=Ss({id:s.id}),v={transform:As.Transform.toString(I),transition:E},$=xa[s.type]||Ee;return e.jsxs("div",{ref:d,style:v,className:Ne("border rounded-lg bg-white",n&&"opacity-50"),children:[e.jsxs("div",{className:"flex items-center gap-2 p-3",children:[e.jsx("div",{...i,...c,className:"cursor-move text-gray-400 hover:text-gray-600",children:e.jsx(Fs,{className:"w-5 h-5"})}),e.jsx($,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.label}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",s.name,")"]}),s.required&&e.jsx(Y,{variant:"secondary",className:"text-xs",children:"Required"}),e.jsx(Y,{variant:"outline",className:"text-xs",children:s.type})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{variant:"ghost",size:"sm",onClick:F,children:h?e.jsx(Ts,{className:"w-4 h-4"}):e.jsx(Le,{className:"w-4 h-4"})}),e.jsx(b,{variant:"ghost",size:"sm",onClick:T,children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx(b,{variant:"ghost",size:"sm",onClick:l,className:"text-red-600 hover:text-red-700",children:e.jsx(me,{className:"w-4 h-4"})})]})]}),h&&e.jsx("div",{className:"px-12 pb-3 border-t",children:e.jsxs("div",{className:"pt-3 space-y-2 text-sm",children:[s.placeholder&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Placeholder:"})," ",e.jsx("span",{className:"text-gray-700",children:s.placeholder})]}),s.description&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Description:"})," ",e.jsx("span",{className:"text-gray-700",children:s.description})]}),s.type==="select"&&s.options?.choices&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Options:"})," ",e.jsx("span",{className:"text-gray-700",children:Array.isArray(s.options.choices)?s.options.choices.join(", "):Object.entries(s.options.choices).map(([t,a])=>`${a} (${t})`).join(", ")})]}),s.type==="relationship"&&s.options?.postType&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Related CPT:"})," ",e.jsx("span",{className:"text-gray-700",children:s.options.postType})]}),s.validation&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-600",children:"Validation:"})," ",e.jsx("span",{className:"text-gray-700",children:JSON.stringify(s.validation)})]})]})})]})}const ua=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"email",label:"Email"},{value:"url",label:"URL"},{value:"select",label:"Select"},{value:"checkbox",label:"Checkbox"},{value:"radio",label:"Radio Button"},{value:"date",label:"Date Picker"},{value:"image",label:"Image"},{value:"file",label:"File"},{value:"wysiwyg",label:"WYSIWYG Editor"},{value:"relationship",label:"Relationship"},{value:"post_object",label:"Post Object"},{value:"user",label:"User"},{value:"true_false",label:"True/False"},{value:"repeater",label:"Repeater"}];function Rs({field:s,cptTypes:h=[],onSave:F,onCancel:T,onClose:l}){const i=s||{id:`field_${Date.now()}`,name:"",label:"",type:"text",required:!1,order:0},[c,d]=w.useState(i),[I,E]=w.useState([]),[n,v]=w.useState("");w.useEffect(()=>{s&&(s.type==="select"||s.type==="radio"||s.type==="checkbox")&&E(s.options?.choices||[])},[s]);const $=()=>{!c.name&&c.label&&(c.name=c.label.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")),(c.type==="select"||c.type==="radio"||c.type==="checkbox")&&(c.options={...c.options,choices:I}),F(c)},t=()=>{n.trim()&&(E([...I,n.trim()]),v(""))},a=j=>{E(I.filter((R,r)=>r!==j))},D=["select","radio","checkbox"].includes(c.type),x=["relationship","post_object"].includes(c.type),u=()=>{l&&l(),T&&T()};return e.jsx(Ye,{open:!0,onOpenChange:u,children:e.jsxs(Je,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Xe,{children:[e.jsx(Ze,{children:!s||s.id.startsWith("field_")&&!s.name?"Add New Field":"Edit Field"}),e.jsx(es,{children:"Configure the field settings and options"})]}),e.jsxs(Me,{defaultValue:"general",className:"w-full",children:[e.jsxs(qe,{className:"grid w-full grid-cols-3",children:[e.jsx(ie,{value:"general",children:"General"}),e.jsx(ie,{value:"options",children:"Options"}),e.jsx(ie,{value:"validation",children:"Validation"})]}),e.jsxs(ne,{value:"general",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"label",children:"Field Label *"}),e.jsx(P,{id:"label",value:c.label,onChange:j=>d({...c,label:j.target.value}),placeholder:"e.g., Product Title"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"name",children:"Field Name"}),e.jsx(P,{id:"name",value:c.name,onChange:j=>d({...c,name:j.target.value}),placeholder:"e.g., product_title (auto-generated from label)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to auto-generate from label"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"type",children:"Field Type"}),e.jsxs(X,{value:c.type,onValueChange:j=>d({...c,type:j}),children:[e.jsx(Z,{id:"type",children:e.jsx(ee,{})}),e.jsx(se,{children:ua.map(j=>e.jsx(S,{value:j.value,children:j.label},j.value))})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",children:"Instructions"}),e.jsx(de,{id:"description",value:c.description||"",onChange:j=>d({...c,description:j.target.value}),placeholder:"Instructions for content editors...",rows:3})]})]}),e.jsxs(ne,{value:"options",className:"space-y-4",children:[D&&e.jsxs("div",{children:[e.jsx(p,{children:"Choices"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[I.map((j,R)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{value:j,readOnly:!0}),e.jsx(b,{type:"button",variant:"ghost",size:"icon",onClick:()=>a(R),children:e.jsx(me,{className:"w-4 h-4"})})]},R)),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{value:n,onChange:j=>v(j.target.value),placeholder:"Add new option...",onKeyPress:j=>j.key==="Enter"&&t()}),e.jsx(b,{type:"button",variant:"outline",size:"icon",onClick:t,children:e.jsx(B,{className:"w-4 h-4"})})]})]})]}),x&&e.jsxs("div",{children:[e.jsx(p,{htmlFor:"related-cpt",children:"Related Post Type"}),e.jsxs(X,{value:c.options?.postType||"",onValueChange:j=>d({...c,options:{...c.options,postType:j}}),children:[e.jsx(Z,{id:"related-cpt",children:e.jsx(ee,{placeholder:"Select post type..."})}),e.jsx(se,{children:h.map(j=>e.jsx(S,{value:j.slug,children:j.name},j.slug))})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"placeholder",children:"Placeholder Text"}),e.jsx(P,{id:"placeholder",value:c.placeholder||"",onChange:j=>d({...c,placeholder:j.target.value}),placeholder:"Enter placeholder text..."})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"default",children:"Default Value"}),e.jsx(P,{id:"default",value:c.defaultValue||"",onChange:j=>d({...c,defaultValue:j.target.value}),placeholder:"Enter default value..."})]})]}),e.jsxs(ne,{value:"validation",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{htmlFor:"required",children:"Required Field"}),e.jsx(le,{id:"required",checked:c.required||!1,onCheckedChange:j=>d({...c,required:j})})]}),c.type==="text"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"min-length",children:"Minimum Length"}),e.jsx(P,{id:"min-length",type:"number",value:c.options?.minLength||"",onChange:j=>d({...c,options:{...c.options,minLength:j.target.value}}),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"max-length",children:"Maximum Length"}),e.jsx(P,{id:"max-length",type:"number",value:c.options?.maxLength||"",onChange:j=>d({...c,options:{...c.options,maxLength:j.target.value}}),placeholder:"No limit"})]})]}),c.type==="number"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"min",children:"Minimum Value"}),e.jsx(P,{id:"min",type:"number",value:c.options?.min||"",onChange:j=>d({...c,options:{...c.options,min:j.target.value}})})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"max",children:"Maximum Value"}),e.jsx(P,{id:"max",type:"number",value:c.options?.max||"",onChange:j=>d({...c,options:{...c.options,max:j.target.value}})})]})]}),(c.type==="image"||c.type==="file")&&e.jsxs("div",{children:[e.jsx(p,{htmlFor:"allowed-types",children:"Allowed File Types"}),e.jsx(P,{id:"allowed-types",value:c.options?.allowedTypes||"",onChange:j=>d({...c,options:{...c.options,allowedTypes:j.target.value}}),placeholder:"e.g., jpg,png,gif"})]})]})]}),e.jsxs(ss,{children:[e.jsx(b,{variant:"outline",onClick:T,children:"Cancel"}),e.jsx(b,{onClick:$,disabled:!c.label,children:"Save Field"})]})]})})}function ps(){const{id:s}=_e(),h=oe(),F=be(),T=s&&s!=="new",[l,i]=w.useState({name:"",description:"",type:"cpt",cptSlug:"",status:"active",fields:[],settings:{submitAction:"create_post",successMessage:"Form submitted successfully!",errorMessage:"There was an error submitting the form."}}),[c,d]=w.useState(!1),[I,E]=w.useState(null),[n,v]=w.useState(new Set),$=ks(Ue(Es),Ue(_s,{coordinateGetter:Ps})),{data:t=[]}=J({queryKey:["cpt-types"],queryFn:async()=>(await K.api.get("/api/public/cpt/types")).data?.data||[]}),{data:a=[]}=J({queryKey:["field-groups",l.cptSlug],queryFn:async()=>l.cptSlug?(await K.api.get(`/api/cpt/field-groups?postType=${l.cptSlug}`)).data?.data||[]:[],enabled:!!l.cptSlug}),{data:D}=J({queryKey:["form",s],queryFn:async()=>T?(await K.api.get(`/api/cpt/forms/${s}`)).data?.data:null,enabled:T});w.useEffect(()=>{D&&i(D)},[D]);const x=ce({mutationFn:async g=>T?K.api.put(`/api/cpt/forms/${s}`,g):K.api.post("/api/cpt/forms",g),onSuccess:()=>{F.invalidateQueries({queryKey:["forms"]}),h("/cpt-engine/forms")}}),u=()=>{if(!l.name){alert("Please provide a form name");return}x.mutate(l)},j=g=>{const{active:f,over:N}=g;f.id!==N?.id&&i(Q=>{const m=Q.fields.findIndex(H=>H.id===f.id),z=Q.fields.findIndex(H=>H.id===N?.id);return{...Q,fields:Ms(Q.fields,m,z).map((H,o)=>({...H,order:o}))}})},R=()=>{E(null),d(!0)},r=g=>{E(g),d(!0)},O=g=>{i(f=>I?{...f,fields:f.fields.map(N=>N.id===g.id?g:N)}:{...f,fields:[...f.fields,{...g,order:f.fields.length}]}),d(!1)},C=g=>{i(f=>({...f,fields:f.fields.filter(N=>N.id!==g)}))},A=g=>{const f=new Set(n);f.has(g)?f.delete(g):f.add(g),v(f)},y=()=>{if(!l.cptSlug||a.length===0){alert("Please select a CPT first");return}const g=[];a.forEach(f=>{f.fields&&Array.isArray(f.fields)&&f.fields.forEach(N=>{g.push({id:`field_${Date.now()}_${N.id}`,name:N.name,label:N.label,type:N.type,required:N.required||!1,placeholder:N.placeholder,description:N.description,options:N.options,validation:N.validation,order:g.length})})}),i(f=>({...f,fields:[...f.fields,...g]}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>h("/cpt-engine/forms"),children:e.jsx(De,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:T?"Edit Form":"Create Form"}),e.jsx("p",{className:"text-gray-600 mt-1",children:T?"Modify form configuration and fields":"Design a new form for data collection"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",onClick:()=>window.open(`/preview/form/${s}`,"_blank"),children:[e.jsx(ye,{className:"w-4 h-4 mr-2"}),"Preview"]}),e.jsxs(b,{onClick:u,disabled:x.isPending,children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),x.isPending?"Saving...":"Save Form"]})]})]}),e.jsxs(Me,{defaultValue:"general",className:"space-y-4",children:[e.jsxs(qe,{className:"grid w-full grid-cols-3",children:[e.jsxs(ie,{value:"general",children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"General"]}),e.jsxs(ie,{value:"fields",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Fields (",l.fields.length,")"]}),e.jsxs(ie,{value:"settings",children:[e.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Actions"]})]}),e.jsx(ne,{value:"general",className:"space-y-6",children:e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Form Information"}),e.jsx(te,{children:"Basic settings for your form"})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"name",children:"Form Name *"}),e.jsx(P,{id:"name",value:l.name,onChange:g=>i(f=>({...f,name:g.target.value})),placeholder:"e.g., Contact Form, Registration Form"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"description",children:"Description"}),e.jsx(de,{id:"description",value:l.description,onChange:g=>i(f=>({...f,description:g.target.value})),placeholder:"Describe what this form is for",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"type",children:"Form Type"}),e.jsxs(X,{value:l.type,onValueChange:g=>i(f=>({...f,type:g})),children:[e.jsx(Z,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(S,{value:"cpt",children:"CPT Form"}),e.jsx(S,{value:"contact",children:"Contact Form"}),e.jsx(S,{value:"user",children:"User Form"}),e.jsx(S,{value:"post",children:"Post Form"}),e.jsx(S,{value:"search",children:"Search Form"})]})]})]}),l.type==="cpt"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"cptSlug",children:"Target CPT"}),e.jsxs(X,{value:l.cptSlug,onValueChange:g=>i(f=>({...f,cptSlug:g})),children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select a CPT"})}),e.jsx(se,{children:t.filter(g=>g.active).map(g=>e.jsxs(S,{value:g.slug,children:[g.name," (",g.slug,")"]},g.slug))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{children:"Status"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable or disable this form"})]}),e.jsx(le,{checked:l.status==="active",onCheckedChange:g=>i(f=>({...f,status:g?"active":"inactive"}))})]})]})]})}),e.jsx(ne,{value:"fields",className:"space-y-6",children:e.jsxs(k,{children:[e.jsx(M,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Form Fields"}),e.jsx(te,{children:"Drag fields to reorder them"})]}),e.jsxs("div",{className:"flex gap-2",children:[l.cptSlug&&e.jsxs(b,{variant:"outline",onClick:y,children:[e.jsx(rs,{className:"w-4 h-4 mr-2"}),"Import from Field Groups"]}),e.jsxs(b,{onClick:R,children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Field"]})]})]})}),e.jsx(_,{children:l.fields.length===0?e.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[e.jsx(ve,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No fields added yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Add fields to start building your form"}),e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs(b,{onClick:R,children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Field"]}),l.cptSlug&&e.jsxs(b,{variant:"outline",onClick:y,children:[e.jsx(rs,{className:"w-4 h-4 mr-2"}),"Import Fields"]})]})]}):e.jsx(Ds,{sensors:$,collisionDetection:$s,onDragEnd:j,children:e.jsx(Ls,{items:l.fields.map(g=>g.id),strategy:Is,children:e.jsx("div",{className:"space-y-2",children:l.fields.map(g=>e.jsx(ma,{field:g,isExpanded:n.has(g.id),onToggleExpand:()=>A(g.id),onEdit:()=>r(g),onDelete:()=>C(g.id)},g.id))})})})})]})}),e.jsxs(ne,{value:"settings",className:"space-y-6",children:[e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Submit Actions"}),e.jsx(te,{children:"What happens when the form is submitted"})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"submitAction",children:"Submit Action"}),e.jsxs(X,{value:l.settings.submitAction,onValueChange:g=>i(f=>({...f,settings:{...f.settings,submitAction:g}})),children:[e.jsx(Z,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(S,{value:"create_post",children:"Create Post"}),e.jsx(S,{value:"create_user",children:"Create User"}),e.jsx(S,{value:"send_email",children:"Send Email"}),e.jsx(S,{value:"both",children:"Create Post + Assign User Role"})]})]})]}),(l.settings.submitAction==="create_user"||l.settings.submitAction==="both")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"userRole",children:"User Role"}),e.jsxs(X,{value:l.settings.userRole,onValueChange:g=>i(f=>({...f,settings:{...f.settings,userRole:g}})),children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select a role"})}),e.jsxs(se,{children:[e.jsx(S,{value:"subscriber",children:"Subscriber"}),e.jsx(S,{value:"contributor",children:"Contributor"}),e.jsx(S,{value:"author",children:"Author"}),e.jsx(S,{value:"editor",children:"Editor"}),e.jsx(S,{value:"supplier",children:"Supplier"}),e.jsx(S,{value:"partner",children:"Partner"}),e.jsx(S,{value:"seller",children:"Seller"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"redirectUrl",children:"Redirect URL (after submit)"}),e.jsx(P,{id:"redirectUrl",value:l.settings.redirectUrl,onChange:g=>i(f=>({...f,settings:{...f.settings,redirectUrl:g.target.value}})),placeholder:"/thank-you"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"successMessage",children:"Success Message"}),e.jsx(de,{id:"successMessage",value:l.settings.successMessage,onChange:g=>i(f=>({...f,settings:{...f.settings,successMessage:g.target.value}})),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"errorMessage",children:"Error Message"}),e.jsx(de,{id:"errorMessage",value:l.settings.errorMessage,onChange:g=>i(f=>({...f,settings:{...f.settings,errorMessage:g.target.value}})),rows:2})]})]})]}),e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Notifications"}),e.jsx(te,{children:"Email notifications when form is submitted"})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(p,{children:"Enable Notifications"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Send email when form is submitted"})]}),e.jsx(le,{checked:l.settings.notification?.enabled,onCheckedChange:g=>i(f=>({...f,settings:{...f.settings,notification:{...f.settings.notification,enabled:g}}}))})]}),l.settings.notification?.enabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"notificationEmail",children:"Notification Email"}),e.jsx(P,{id:"notificationEmail",type:"email",value:l.settings.notification?.email,onChange:g=>i(f=>({...f,settings:{...f.settings,notification:{...f.settings.notification,email:g.target.value}}})),placeholder:"admin@example.com"})]})]})]})]})]}),c&&e.jsx(Rs,{field:I,onSave:O,onClose:()=>d(!1)})]})}function ja(){const s=oe(),[h,F]=w.useState(""),[T,l]=w.useState("all"),[i,c]=w.useState("all"),{data:d=[],isLoading:I,refetch:E}=J({queryKey:["field-groups"],queryFn:async()=>(await aa.getAll()).data||[]}),{data:n=[]}=J({queryKey:["cpt-types"],queryFn:async()=>(await ge.getAllTypes()).data||[]}),v=w.useMemo(()=>d.filter(u=>{const j=u.title.toLowerCase().includes(h.toLowerCase())||u.description?.toLowerCase().includes(h.toLowerCase()),R=T==="all"||u.postTypes.includes(T),r=i==="all"||i==="active"&&u.isActive||i==="inactive"&&!u.isActive;return j&&R&&r}),[d,h,T,i]),$=async u=>{if(window.confirm("Are you sure you want to delete this field group?"))try{await authClient.api.delete(`/api/cpt/field-groups/${u}`),E()}catch(j){console.error("Failed to delete field group:",j)}},t=async u=>{try{await authClient.api.post("/api/cpt/field-groups",{...u,title:`${u.title} (Copy)`,id:void 0}),E()}catch(j){console.error("Failed to duplicate field group:",j)}},a=async(u,j)=>{try{await authClient.api.patch(`/api/cpt/field-groups/${u}`,{isActive:!j}),E()}catch(R){console.error("Failed to toggle status:",R)}},D=u=>({normal:"Normal",side:"Side",advanced:"Advanced"})[u]||u,x=u=>({default:"Default",seamless:"Seamless"})[u]||u;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Field Groups"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage custom field groups for your post types"})]}),e.jsxs(b,{onClick:()=>s("/cpt-engine/field-groups/new"),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Field Group"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Groups"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Active Groups"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.filter(u=>u.isActive).length})})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Fields"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.reduce((u,j)=>u+(j.fields?.length||0),0)})})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"CPTs Covered"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:new Set(d.flatMap(u=>u.postTypes)).size})})]})]}),e.jsx(k,{children:e.jsx(_,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(P,{placeholder:"Search field groups...",value:h,onChange:u=>F(u.target.value),className:"pl-10"})]})}),e.jsxs(X,{value:T,onValueChange:l,children:[e.jsx(Z,{className:"w-[200px]",children:e.jsx(ee,{placeholder:"Filter by CPT"})}),e.jsxs(se,{children:[e.jsx(S,{value:"all",children:"All Post Types"}),n.map(u=>e.jsx(S,{value:u.slug,children:u.name},u.slug))]})]}),e.jsxs(X,{value:i,onValueChange:c,children:[e.jsx(Z,{className:"w-[150px]",children:e.jsx(ee,{placeholder:"Status"})}),e.jsxs(se,{children:[e.jsx(S,{value:"all",children:"All Status"}),e.jsx(S,{value:"active",children:"Active"}),e.jsx(S,{value:"inactive",children:"Inactive"})]})]})]})})}),e.jsx(k,{children:e.jsx(_,{className:"pt-6",children:I?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ys,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No field groups found"}),e.jsxs(b,{variant:"outline",className:"mt-4",onClick:()=>s("/cpt-engine/field-groups/new"),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Create First Field Group"]})]}):e.jsxs(Re,{children:[e.jsx(ze,{children:e.jsxs(xe,{children:[e.jsx(U,{children:"Field Group"}),e.jsx(U,{children:"Post Types"}),e.jsx(U,{className:"text-center",children:"Fields"}),e.jsx(U,{children:"Position"}),e.jsx(U,{children:"Status"}),e.jsx(U,{className:"text-right",children:"Actions"})]})}),e.jsx(Ve,{children:v.map(u=>e.jsxs(xe,{children:[e.jsx(G,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:u.title}),u.description&&e.jsx("p",{className:"text-sm text-gray-500",children:u.description})]})}),e.jsx(G,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:u.postTypes.map(j=>{const R=n.find(r=>r.slug===j);return e.jsx(Y,{variant:"secondary",children:R?.name||j},j)})})}),e.jsx(G,{className:"text-center",children:e.jsxs(Y,{variant:"outline",children:[u.fields?.length||0," fields"]})}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(Y,{variant:"outline",children:D(u.position)}),e.jsx(Y,{variant:"outline",children:x(u.style)})]})}),e.jsx(G,{children:e.jsx(Y,{variant:u.isActive?"default":"secondary",children:u.isActive?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-3 h-3 mr-1"})," Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"})," Inactive"]})})}),e.jsx(G,{className:"text-right",children:e.jsxs(Ae,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(b,{variant:"ghost",size:"sm",children:["Actions",e.jsx(Le,{className:"w-4 h-4 ml-1"})]})}),e.jsxs(Pe,{align:"end",children:[e.jsxs(W,{onClick:()=>s(`/cpt-engine/field-groups/${u.id}/edit`),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(W,{onClick:()=>t(u),children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),e.jsx(W,{onClick:()=>a(u.id,u.isActive),children:u.isActive?e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"})," Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"w-4 h-4 mr-2"})," Activate"]})}),e.jsx(Fe,{}),e.jsxs(W,{onClick:()=>$(u.id),className:"text-red-600",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},u.id))})]})})})]})}const pa={text:Ee,textarea:re,number:Se,email:Ee,url:Cs,select:is,checkbox:Ke,radio:Ke,date:ts,image:ls,file:re,wysiwyg:re,relationship:ve,post_object:Oe,user:ws,true_false:Ke,repeater:fe};function ga({field:s,onEdit:h,onDelete:F,onDuplicate:T}){const[l,i]=w.useState(!1),{attributes:c,listeners:d,setNodeRef:I,transform:E,transition:n,isDragging:v}=Ss({id:s.id}),$={transform:As.Transform.toString(E),transition:n,opacity:v?.5:1},t=pa[s.type]||Ee,a=D=>({text:"Text",textarea:"Text Area",number:"Number",email:"Email",url:"URL",select:"Select",checkbox:"Checkbox",radio:"Radio",date:"Date",image:"Image",file:"File",wysiwyg:"WYSIWYG",relationship:"Relationship",post_object:"Post Object",user:"User",true_false:"True/False",repeater:"Repeater"})[D]||D;return e.jsx("div",{ref:I,style:$,className:"border rounded-lg bg-white",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{...c,...d,className:"cursor-move text-gray-400 hover:text-gray-600 mt-1",children:e.jsx(Fs,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx(t,{className:"w-5 h-5 text-gray-500"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium",children:s.label}),e.jsx(Y,{variant:"secondary",className:"text-xs",children:s.name||"auto-generated"}),s.required&&e.jsx(Y,{variant:"destructive",className:"text-xs",children:"Required"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-gray-500",children:[e.jsx("span",{children:a(s.type)}),s.placeholder&&e.jsxs("span",{className:"text-xs",children:["• Placeholder: ",s.placeholder]})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>i(!l),children:l?e.jsx(Ts,{className:"w-4 h-4"}):e.jsx(Le,{className:"w-4 h-4"})}),e.jsxs(Ae,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"icon",children:e.jsx(Ce,{className:"w-4 h-4"})})}),e.jsxs(Pe,{align:"end",children:[e.jsxs(W,{onClick:()=>h(s),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Edit Field"]}),e.jsxs(W,{onClick:()=>T(s),children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),e.jsx(Fe,{}),e.jsxs(W,{onClick:()=>F(s.id),className:"text-red-600",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})]})})]}),l&&e.jsx("div",{className:"mt-4 pt-4 border-t ml-14",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Field Name:"}),e.jsx("span",{className:"ml-2 font-mono",children:s.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Type:"}),e.jsx("span",{className:"ml-2",children:a(s.type)})]}),s.defaultValue&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Default Value:"}),e.jsx("span",{className:"ml-2",children:s.defaultValue})]}),s.options?.postType&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Related Post Type:"}),e.jsx("span",{className:"ml-2",children:s.options.postType})]}),s.options?.choices&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"Choices:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.options.choices.map((D,x)=>e.jsx(Y,{variant:"outline",children:D},x))})]})]})})]})})}function gs(){const{id:s}=_e(),h=oe(),F=be(),{addNotice:T}=Ie(),[l,i]=w.useState("fields"),[c,d]=w.useState(null),[I,E]=w.useState(!1),[n,v]=w.useState({title:"",description:"",postTypes:[],fields:[],position:"normal",style:"default",isActive:!0}),$=ks(Ue(Es),Ue(_s,{coordinateGetter:Ps})),{data:t=[]}=J({queryKey:["cpt-types"],queryFn:async()=>(await K.api.get("/api/public/cpt/types")).data?.data||[]}),{data:a}=J({queryKey:["field-group",s],queryFn:async()=>!s||s==="new"?null:(await K.api.get(`/api/cpt/field-groups/${s}`)).data?.data,enabled:!!s&&s!=="new"});w.useEffect(()=>{a&&v(a)},[a]);const D=ce({mutationFn:async y=>s&&s!=="new"?await K.api.put(`/api/cpt/field-groups/${s}`,y):await K.api.post("/api/cpt/field-groups",y),onSuccess:()=>{T({type:"success",message:s&&s!=="new"?"Field group updated successfully":"Field group created successfully"}),F.invalidateQueries({queryKey:["field-groups"]}),h("/cpt-engine/field-groups")},onError:y=>{T({type:"error",message:`Failed to save field group: ${y.message}`})}}),x=()=>{if(!n.title){T({type:"error",message:"Field group title is required"});return}if(n.postTypes.length===0){T({type:"error",message:"Please select at least one post type"});return}D.mutate(n)},u=()=>{const y={id:`field_${Date.now()}`,name:"",label:"",type:"text",order:n.fields.length};d(y),E(!0)},j=y=>{d(y),E(!0)},R=y=>{const g=n.fields.findIndex(f=>f.id===y.id);if(g>=0){const f=[...n.fields];f[g]=y,v({...n,fields:f})}else v({...n,fields:[...n.fields,y]});E(!1),d(null)},r=y=>{v({...n,fields:n.fields.filter(g=>g.id!==y)})},O=y=>{const g={...y,id:`field_${Date.now()}`,name:`${y.name}_copy`,label:`${y.label} (Copy)`,order:n.fields.length};v({...n,fields:[...n.fields,g]})},C=y=>{const{active:g,over:f}=y;if(g.id!==f.id){const N=n.fields.findIndex(z=>z.id===g.id),Q=n.fields.findIndex(z=>z.id===f.id),m=Ms(n.fields,N,Q).map((z,H)=>({...z,order:H}));v({...n,fields:m})}},A=y=>{n.postTypes.includes(y)?v({...n,postTypes:n.postTypes.filter(g=>g!==y)}):v({...n,postTypes:[...n.postTypes,y]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>h("/cpt-engine/field-groups"),children:e.jsx(De,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s&&s!=="new"?"Edit Field Group":"New Field Group"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create custom fields for your post types"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"outline",onClick:()=>h("/cpt-engine/field-groups"),children:"Cancel"}),e.jsxs(b,{onClick:x,disabled:D.isPending,children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),D.isPending?"Saving...":"Save Field Group"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(k,{children:[e.jsx(M,{children:e.jsx(q,{children:"Basic Information"})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"title",children:"Field Group Title *"}),e.jsx(P,{id:"title",value:n.title,onChange:y=>v({...n,title:y.target.value}),placeholder:"e.g., Product Details"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"description",children:"Description"}),e.jsx(de,{id:"description",value:n.description||"",onChange:y=>v({...n,description:y.target.value}),placeholder:"Describe what this field group is for...",rows:3})]})]})]}),e.jsxs(k,{children:[e.jsx(M,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(q,{children:"Fields"}),e.jsxs(b,{size:"sm",onClick:u,children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Field"]})]})}),e.jsx(_,{children:n.fields.length===0?e.jsxs("div",{className:"text-center py-8 border-2 border-dashed rounded-lg",children:[e.jsx(re,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No fields added yet"}),e.jsxs(b,{variant:"outline",onClick:u,children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Your First Field"]})]}):e.jsx(Ds,{sensors:$,collisionDetection:$s,onDragEnd:C,children:e.jsx(Ls,{items:n.fields.map(y=>y.id),strategy:Is,children:e.jsx("div",{className:"space-y-2",children:n.fields.map(y=>e.jsx(ga,{field:y,onEdit:j,onDelete:r,onDuplicate:O},y.id))})})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Post Types *"}),e.jsx(te,{children:"Select which post types this field group applies to"})]}),e.jsx(_,{children:e.jsx("div",{className:"space-y-2",children:t.map(y=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{htmlFor:`cpt-${y.slug}`,className:"font-normal cursor-pointer",children:y.name}),e.jsx(le,{id:`cpt-${y.slug}`,checked:n.postTypes.includes(y.slug),onCheckedChange:()=>A(y.slug)})]},y.slug))})})]}),e.jsxs(k,{children:[e.jsx(M,{children:e.jsx(q,{children:"Display Settings"})}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"position",children:"Position"}),e.jsxs(X,{value:n.position,onValueChange:y=>v({...n,position:y}),children:[e.jsx(Z,{id:"position",children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(S,{value:"normal",children:"Normal (after content)"}),e.jsx(S,{value:"side",children:"Side"}),e.jsx(S,{value:"advanced",children:"Advanced (after normal)"})]})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"style",children:"Style"}),e.jsxs(X,{value:n.style,onValueChange:y=>v({...n,style:y}),children:[e.jsx(Z,{id:"style",children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(S,{value:"default",children:"Default (with metabox)"}),e.jsx(S,{value:"seamless",children:"Seamless (no metabox)"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{htmlFor:"active",children:"Active"}),e.jsx(le,{id:"active",checked:n.isActive,onCheckedChange:y=>v({...n,isActive:y})})]})]})]})]})]}),I&&c&&e.jsx(Rs,{field:c,cptTypes:t,onSave:R,onCancel:()=>{E(!1),d(null)}})]})}function va(){const s=oe(),[h,F]=w.useState(""),[T,l]=w.useState("all"),[i,c]=w.useState("all"),{data:d=[],isLoading:I,refetch:E}=J({queryKey:["taxonomies"],queryFn:async()=>(await ta.getAll()).data||[]}),{data:n=[]}=J({queryKey:["cpt-types"],queryFn:async()=>(await ge.getAllTypes()).data||[]}),v=w.useMemo(()=>d.filter(x=>{const u=x.name.toLowerCase().includes(h.toLowerCase())||x.slug.toLowerCase().includes(h.toLowerCase())||x.description?.toLowerCase().includes(h.toLowerCase()),j=T==="all"||x.postTypes.includes(T),R=i==="all"||i==="hierarchical"&&x.hierarchical||i==="tag"&&!x.hierarchical;return u&&j&&R}),[d,h,T,i]),$=async x=>{if(window.confirm("Are you sure you want to delete this taxonomy? This will also delete all associated terms."))try{await authClient.api.delete(`/api/cpt/taxonomies/${x}`),E()}catch(u){console.error("Failed to delete taxonomy:",u)}},t=async x=>{try{await authClient.api.post("/api/cpt/taxonomies",{...x,name:`${x.name} (Copy)`,slug:`${x.slug}_copy`,id:void 0}),E()}catch(u){console.error("Failed to duplicate taxonomy:",u)}},a=x=>x?e.jsx(ns,{className:"w-4 h-4"}):e.jsx(Se,{className:"w-4 h-4"}),D=x=>x?e.jsxs(Y,{variant:"default",children:[e.jsx(We,{className:"w-3 h-3 mr-1"}),"Hierarchical"]}):e.jsxs(Y,{variant:"secondary",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),"Tags"]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Taxonomies"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage taxonomies for organizing your content"})]}),e.jsxs(b,{onClick:()=>s("/cpt-engine/taxonomies/new"),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Taxonomy"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Taxonomies"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.length})})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Hierarchical"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.filter(x=>x.hierarchical).length})})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Tag-based"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.filter(x=>!x.hierarchical).length})})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Terms"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:d.reduce((x,u)=>x+(u.termsCount||0),0)})})]})]}),e.jsx(k,{children:e.jsx(_,{className:"pt-6",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(P,{placeholder:"Search taxonomies...",value:h,onChange:x=>F(x.target.value),className:"pl-10"})]})}),e.jsxs(X,{value:T,onValueChange:l,children:[e.jsx(Z,{className:"w-[200px]",children:e.jsx(ee,{placeholder:"Filter by CPT"})}),e.jsxs(se,{children:[e.jsx(S,{value:"all",children:"All Post Types"}),n.map(x=>e.jsx(S,{value:x.slug,children:x.name},x.slug))]})]}),e.jsxs(X,{value:i,onValueChange:c,children:[e.jsx(Z,{className:"w-[150px]",children:e.jsx(ee,{placeholder:"Type"})}),e.jsxs(se,{children:[e.jsx(S,{value:"all",children:"All Types"}),e.jsx(S,{value:"hierarchical",children:"Hierarchical"}),e.jsx(S,{value:"tag",children:"Tags"})]})]})]})})}),e.jsx(k,{children:e.jsx(_,{className:"pt-6",children:I?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No taxonomies found"}),e.jsxs(b,{variant:"outline",className:"mt-4",onClick:()=>s("/cpt-engine/taxonomies/new"),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Create First Taxonomy"]})]}):e.jsxs(Re,{children:[e.jsx(ze,{children:e.jsxs(xe,{children:[e.jsx(U,{children:"Taxonomy"}),e.jsx(U,{children:"Type"}),e.jsx(U,{children:"Post Types"}),e.jsx(U,{className:"text-center",children:"Terms"}),e.jsx(U,{children:"Visibility"}),e.jsx(U,{className:"text-right",children:"Actions"})]})}),e.jsx(Ve,{children:v.map(x=>e.jsxs(xe,{children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[a(x.hierarchical),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.name}),e.jsx("p",{className:"text-sm text-gray-500",children:x.slug}),x.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:x.description})]})]})}),e.jsx(G,{children:D(x.hierarchical)}),e.jsx(G,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:x.postTypes.map(u=>{const j=n.find(R=>R.slug===u);return e.jsx(Y,{variant:"outline",children:j?.name||u},u)})})}),e.jsx(G,{className:"text-center",children:e.jsxs(b,{variant:"ghost",size:"sm",onClick:()=>s(`/cpt-engine/taxonomies/${x.id}/terms`),className:"gap-1",children:[e.jsx(Y,{variant:"outline",children:x.termsCount||0}),e.jsx(Js,{className:"w-3 h-3"})]})}),e.jsx(G,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[x.showInRest&&e.jsx(Y,{variant:"outline",className:"text-xs",children:"REST API"}),x.showInMenu&&e.jsx(Y,{variant:"outline",className:"text-xs",children:"Admin Menu"})]})}),e.jsx(G,{className:"text-right",children:e.jsxs(Ae,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(b,{variant:"ghost",size:"sm",children:["Actions",e.jsx(Le,{className:"w-4 h-4 ml-1"})]})}),e.jsxs(Pe,{align:"end",children:[e.jsxs(W,{onClick:()=>s(`/cpt-engine/taxonomies/${x.id}/edit`),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(W,{onClick:()=>s(`/cpt-engine/taxonomies/${x.id}/terms`),children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Manage Terms"]}),e.jsxs(W,{onClick:()=>t(x),children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),e.jsx(Fe,{}),e.jsxs(W,{onClick:()=>$(x.id),className:"text-red-600",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},x.id))})]})})})]})}function vs(){const{id:s}=_e(),h=oe(),F=be(),T=s&&s!=="new",[l,i]=w.useState({name:"",slug:"",description:"",hierarchical:!0,postTypes:[],labels:{singular_name:"",plural_name:"",menu_name:"",all_items:"",edit_item:"",view_item:"",add_new_item:"",search_items:"",parent_item:"",parent_item_colon:""},public:!0,showInRest:!0,showInMenu:!0,showInQuickEdit:!0,showAdminColumn:!0,defaultTerm:"",capabilities:{manage_terms:"manage_categories",edit_terms:"edit_categories",delete_terms:"delete_categories",assign_terms:"assign_categories"}}),[c,d]=w.useState(!0),{data:I=[]}=J({queryKey:["cpt-types"],queryFn:async()=>(await K.api.get("/api/public/cpt/types")).data?.data||[]}),{data:E}=J({queryKey:["taxonomy",s],queryFn:async()=>T?(await K.api.get(`/api/cpt/taxonomies/${s}`)).data?.data:null,enabled:T});w.useEffect(()=>{E&&(i(E),d(!1))},[E]),w.useEffect(()=>{if(c&&l.name&&!T){const t=l.name.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,"");i(a=>({...a,slug:t}))}},[l.name,c,T]),w.useEffect(()=>{if(l.name&&!l.labels?.plural_name){const t=l.name,a=t,D=t.endsWith("y")?t.slice(0,-1)+"ies":t+"s";i(x=>({...x,labels:{...x.labels,singular_name:a,plural_name:D,menu_name:D,all_items:`All ${D}`,edit_item:`Edit ${a}`,view_item:`View ${a}`,add_new_item:`Add New ${a}`,search_items:`Search ${D}`,parent_item:x.hierarchical?`Parent ${a}`:"",parent_item_colon:x.hierarchical?`Parent ${a}:`:""}}))}},[l.name,l.hierarchical]);const n=ce({mutationFn:async t=>T?K.api.put(`/api/cpt/taxonomies/${s}`,t):K.api.post("/api/cpt/taxonomies",t),onSuccess:()=>{F.invalidateQueries({queryKey:["taxonomies"]}),h("/cpt-engine/taxonomies")}}),v=()=>{if(!l.name||!l.slug){alert("Please fill in required fields");return}n.mutate(l)},$=t=>{i(a=>({...a,postTypes:a.postTypes.includes(t)?a.postTypes.filter(D=>D!==t):[...a.postTypes,t]}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>h("/cpt-engine/taxonomies"),children:e.jsx(De,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:T?"Edit Taxonomy":"Create Taxonomy"}),e.jsx("p",{className:"text-gray-600 mt-1",children:T?"Modify taxonomy configuration":"Define a new taxonomy for organizing content"})]})]}),e.jsxs(b,{onClick:v,disabled:n.isPending,children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),n.isPending?"Saving...":"Save Taxonomy"]})]}),e.jsxs(Me,{defaultValue:"general",className:"space-y-4",children:[e.jsxs(qe,{className:"grid w-full grid-cols-4",children:[e.jsxs(ie,{value:"general",children:[e.jsx(cs,{className:"w-4 h-4 mr-2"}),"General"]}),e.jsxs(ie,{value:"labels",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Labels"]}),e.jsxs(ie,{value:"settings",children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs(ie,{value:"advanced",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Advanced"]})]}),e.jsx(ne,{value:"general",className:"space-y-6",children:e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Basic Information"}),e.jsx(te,{children:"Set the fundamental properties of your taxonomy"})]}),e.jsxs(_,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(p,{children:"Taxonomy Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${l.hierarchical?"border-primary bg-primary/5":"border-gray-200"}`,onClick:()=>i(t=>({...t,hierarchical:!0})),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ns,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Hierarchical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Like categories (parent/child relationships)"})]})]})}),e.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${l.hierarchical?"border-gray-200":"border-primary bg-primary/5"}`,onClick:()=>i(t=>({...t,hierarchical:!1})),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Non-hierarchical"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Like tags (flat structure)"})]})]})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"name",children:"Name *"}),e.jsx(P,{id:"name",value:l.name,onChange:t=>i(a=>({...a,name:t.target.value})),placeholder:"e.g., Product Categories"}),e.jsx("p",{className:"text-sm text-gray-500",children:"The name of the taxonomy shown in the UI"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{htmlFor:"slug",children:"Slug *"}),!T&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{checked:c,onCheckedChange:d}),e.jsx("span",{className:"text-sm text-gray-500",children:"Auto-generate"})]})]}),e.jsx(P,{id:"slug",value:l.slug,onChange:t=>i(a=>({...a,slug:t.target.value})),disabled:c&&!T,placeholder:"e.g., product_cat"}),e.jsx("p",{className:"text-sm text-gray-500",children:"The slug is used in URLs and API calls"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"description",children:"Description"}),e.jsx(de,{id:"description",value:l.description,onChange:t=>i(a=>({...a,description:t.target.value})),placeholder:"Describe what this taxonomy is used for",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"Assign to Post Types"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Select which post types can use this taxonomy"}),e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-2",children:I.filter(t=>t.active).map(t=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg hover:bg-gray-50",children:[e.jsx(as,{id:t.slug,checked:l.postTypes.includes(t.slug),onCheckedChange:()=>$(t.slug)}),e.jsxs("label",{htmlFor:t.slug,className:"flex-1 cursor-pointer font-medium",children:[t.name,e.jsx("span",{className:"text-sm text-gray-500 block",children:t.slug})]})]},t.slug))})]})]})]})}),e.jsx(ne,{value:"labels",className:"space-y-6",children:e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Taxonomy Labels"}),e.jsx(te,{children:"Customize the text labels used throughout the admin interface"})]}),e.jsx(_,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"singular_name",children:"Singular Name"}),e.jsx(P,{id:"singular_name",value:l.labels?.singular_name,onChange:t=>i(a=>({...a,labels:{...a.labels,singular_name:t.target.value}})),placeholder:"e.g., Category"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"plural_name",children:"Plural Name"}),e.jsx(P,{id:"plural_name",value:l.labels?.plural_name,onChange:t=>i(a=>({...a,labels:{...a.labels,plural_name:t.target.value}})),placeholder:"e.g., Categories"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"menu_name",children:"Menu Name"}),e.jsx(P,{id:"menu_name",value:l.labels?.menu_name,onChange:t=>i(a=>({...a,labels:{...a.labels,menu_name:t.target.value}})),placeholder:"e.g., Categories"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"all_items",children:"All Items"}),e.jsx(P,{id:"all_items",value:l.labels?.all_items,onChange:t=>i(a=>({...a,labels:{...a.labels,all_items:t.target.value}})),placeholder:"e.g., All Categories"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit_item",children:"Edit Item"}),e.jsx(P,{id:"edit_item",value:l.labels?.edit_item,onChange:t=>i(a=>({...a,labels:{...a.labels,edit_item:t.target.value}})),placeholder:"e.g., Edit Category"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"view_item",children:"View Item"}),e.jsx(P,{id:"view_item",value:l.labels?.view_item,onChange:t=>i(a=>({...a,labels:{...a.labels,view_item:t.target.value}})),placeholder:"e.g., View Category"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"add_new_item",children:"Add New Item"}),e.jsx(P,{id:"add_new_item",value:l.labels?.add_new_item,onChange:t=>i(a=>({...a,labels:{...a.labels,add_new_item:t.target.value}})),placeholder:"e.g., Add New Category"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"search_items",children:"Search Items"}),e.jsx(P,{id:"search_items",value:l.labels?.search_items,onChange:t=>i(a=>({...a,labels:{...a.labels,search_items:t.target.value}})),placeholder:"e.g., Search Categories"})]}),l.hierarchical&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"parent_item",children:"Parent Item"}),e.jsx(P,{id:"parent_item",value:l.labels?.parent_item,onChange:t=>i(a=>({...a,labels:{...a.labels,parent_item:t.target.value}})),placeholder:"e.g., Parent Category"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"parent_item_colon",children:"Parent Item Colon"}),e.jsx(P,{id:"parent_item_colon",value:l.labels?.parent_item_colon,onChange:t=>i(a=>({...a,labels:{...a.labels,parent_item_colon:t.target.value}})),placeholder:"e.g., Parent Category:"})]})]})]})})]})}),e.jsxs(ne,{value:"settings",className:"space-y-6",children:[e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Visibility Settings"}),e.jsx(te,{children:"Control where and how this taxonomy appears"})]}),e.jsxs(_,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4 text-gray-500"}),e.jsx(p,{children:"Public"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Make this taxonomy publicly accessible"})]}),e.jsx(le,{checked:l.public,onCheckedChange:t=>i(a=>({...a,public:t}))})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ds,{className:"w-4 h-4 text-gray-500"}),e.jsx(p,{children:"Show in REST API"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enable REST API endpoints for this taxonomy"})]}),e.jsx(le,{checked:l.showInRest,onCheckedChange:t=>i(a=>({...a,showInRest:t}))})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xs,{className:"w-4 h-4 text-gray-500"}),e.jsx(p,{children:"Show in Admin Menu"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Display in the admin sidebar menu"})]}),e.jsx(le,{checked:l.showInMenu,onCheckedChange:t=>i(a=>({...a,showInMenu:t}))})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ye,{className:"w-4 h-4 text-gray-500"}),e.jsx(p,{children:"Show in Quick Edit"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Allow editing in the quick edit interface"})]}),e.jsx(le,{checked:l.showInQuickEdit,onCheckedChange:t=>i(a=>({...a,showInQuickEdit:t}))})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(List,{className:"w-4 h-4 text-gray-500"}),e.jsx(p,{children:"Show Admin Column"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Display as a column in post lists"})]}),e.jsx(le,{checked:l.showAdminColumn,onCheckedChange:t=>i(a=>({...a,showAdminColumn:t}))})]})]})]}),e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Default Settings"}),e.jsx(te,{children:"Configure default behavior for this taxonomy"})]}),e.jsx(_,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"defaultTerm",children:"Default Term"}),e.jsx(P,{id:"defaultTerm",value:l.defaultTerm,onChange:t=>i(a=>({...a,defaultTerm:t.target.value})),placeholder:"e.g., Uncategorized"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Term assigned to posts when no term is selected"})]})})]})]}),e.jsxs(ne,{value:"advanced",className:"space-y-6",children:[e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(q,{children:"Capabilities"}),e.jsx(te,{children:"Define user capabilities required for managing this taxonomy"})]}),e.jsx(_,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"manage_terms",children:"Manage Terms"}),e.jsx(P,{id:"manage_terms",value:l.capabilities?.manage_terms,onChange:t=>i(a=>({...a,capabilities:{...a.capabilities,manage_terms:t.target.value}})),placeholder:"manage_categories"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit_terms",children:"Edit Terms"}),e.jsx(P,{id:"edit_terms",value:l.capabilities?.edit_terms,onChange:t=>i(a=>({...a,capabilities:{...a.capabilities,edit_terms:t.target.value}})),placeholder:"edit_categories"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"delete_terms",children:"Delete Terms"}),e.jsx(P,{id:"delete_terms",value:l.capabilities?.delete_terms,onChange:t=>i(a=>({...a,capabilities:{...a.capabilities,delete_terms:t.target.value}})),placeholder:"delete_categories"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"assign_terms",children:"Assign Terms"}),e.jsx(P,{id:"assign_terms",value:l.capabilities?.assign_terms,onChange:t=>i(a=>({...a,capabilities:{...a.capabilities,assign_terms:t.target.value}})),placeholder:"assign_categories"})]})]})})]}),e.jsxs(la,{children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx(ia,{children:"Advanced settings affect how the taxonomy integrates with the system. Default values work for most use cases."})]})]})]})]})}function ya(){const{taxonomyId:s}=_e(),h=oe();be();const[F,T]=w.useState(""),[l,i]=w.useState(null),[c,d]=w.useState(!1),[I,E]=w.useState(!1),[n,v]=w.useState(new Set),[$,t]=w.useState({name:"",slug:"",description:"",parentId:void 0}),{data:a}=J({queryKey:["taxonomy",s],queryFn:async()=>(await K.api.get(`/api/cpt/taxonomies/${s}`)).data?.data}),{data:D=[],isLoading:x,refetch:u}=J({queryKey:["terms",s],queryFn:async()=>(await K.api.get(`/api/cpt/taxonomies/${s}/terms`)).data?.data||[]}),j=w.useMemo(()=>{if(!a?.hierarchical)return D;const o=new Map,L=[];return D.forEach(V=>{o.set(V.id,{...V,children:[]})}),D.forEach(V=>{const ue=o.get(V.id);if(ue)if(V.parentId){const he=o.get(V.parentId);he&&(he.children=he.children||[],he.children.push(ue))}else L.push(ue)}),L},[D,a]),R=w.useMemo(()=>{if(!F)return j;const o=L=>L.filter(V=>{if(V.name.toLowerCase().includes(F.toLowerCase())||V.slug.toLowerCase().includes(F.toLowerCase())||V.description?.toLowerCase().includes(F.toLowerCase()))return!0;if(V.children&&V.children.length>0){const he=o(V.children);if(he.length>0)return V.children=he,!0}return!1});return o(j)},[j,F]),r=ce({mutationFn:async o=>K.api.post(`/api/cpt/taxonomies/${s}/terms`,o),onSuccess:()=>{u(),d(!1),A()}}),O=ce({mutationFn:async({id:o,data:L})=>K.api.put(`/api/cpt/taxonomies/${s}/terms/${o}`,L),onSuccess:()=>{u(),E(!1),A()}}),C=ce({mutationFn:async o=>K.api.delete(`/api/cpt/taxonomies/${s}/terms/${o}`),onSuccess:()=>{u()}}),A=()=>{t({name:"",slug:"",description:"",parentId:void 0}),i(null)},y=()=>{r.mutate($)},g=()=>{l&&O.mutate({id:l.id,data:$})},f=o=>{window.confirm(`Are you sure you want to delete "${o.name}"? ${o.children?.length?"This will also delete all child terms.":""}`)&&C.mutate(o.id)},N=o=>{i(o),t({name:o.name,slug:o.slug,description:o.description||"",parentId:o.parentId,meta:o.meta}),E(!0)},Q=o=>{const L=new Set(n);L.has(o)?L.delete(o):L.add(o),v(L)},m=o=>o.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),z=(o,L=0)=>o.map(V=>{const ue=V.children&&V.children.length>0,he=n.has(V.id);return e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between p-3 hover:bg-gray-50 border-b ${L>0?"border-l-2 border-gray-200":""}`,style:{paddingLeft:`${L*24+12}px`},children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a?.hierarchical&&ue&&e.jsx("button",{onClick:()=>Q(V.id),className:"p-1 hover:bg-gray-200 rounded",children:he?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(bs,{className:"w-4 h-4"})}),!ue&&a?.hierarchical&&e.jsx("div",{className:"w-6"}),a?.hierarchical?ue?he?e.jsx(Zs,{className:"w-4 h-4 text-gray-500"}):e.jsx(We,{className:"w-4 h-4 text-gray-500"}):e.jsx(Se,{className:"w-4 h-4 text-gray-400"}):e.jsx(je,{className:"w-4 h-4 text-gray-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:V.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",V.slug,")"]}),V.postCount!==void 0&&V.postCount>0&&e.jsxs(Y,{variant:"outline",className:"text-xs",children:[V.postCount," posts"]})]}),V.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:V.description})]})]}),e.jsxs(Ae,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"sm",children:e.jsx(os,{className:"w-4 h-4"})})}),e.jsxs(Pe,{align:"end",children:[e.jsxs(W,{onClick:()=>N(V),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Edit"]}),a?.hierarchical&&e.jsxs(W,{onClick:()=>{t({name:"",slug:"",description:"",parentId:V.id}),d(!0)},children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add Child"]}),e.jsxs(W,{children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),e.jsx(Fe,{}),e.jsxs(W,{onClick:()=>f(V),className:"text-red-600",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),ue&&he&&e.jsx("div",{children:z(V.children,L+1)})]},V.id)}),H=()=>a?.hierarchical?z(R):e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(o=>e.jsxs("div",{className:"group relative inline-flex items-center gap-1 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors",children:[e.jsx(je,{className:"w-3 h-3"}),e.jsx("span",{className:"font-medium",children:o.name}),o.postCount!==void 0&&o.postCount>0&&e.jsx(Y,{variant:"secondary",className:"text-xs ml-1",children:o.postCount}),e.jsxs(Ae,{children:[e.jsx(ke,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0 opacity-0 group-hover:opacity-100",children:e.jsx(os,{className:"w-3 h-3"})})}),e.jsxs(Pe,{align:"end",children:[e.jsxs(W,{onClick:()=>N(o),children:[e.jsx(Ce,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(W,{children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),e.jsx(Fe,{}),e.jsxs(W,{onClick:()=>f(o),className:"text-red-600",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]},o.id))})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(b,{variant:"ghost",size:"icon",onClick:()=>h("/cpt-engine/taxonomies"),children:e.jsx(De,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[a?.hierarchical?e.jsx(ns,{className:"w-6 h-6"}):e.jsx(Se,{className:"w-6 h-6"}),a?.name," Terms"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage ",a?.hierarchical?"hierarchical categories":"tags"," for ",a?.name]})]})]}),e.jsxs(b,{onClick:()=>d(!0),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Add ",a?.labels?.singular_name||"Term"]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Terms"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:D.length})})]}),a?.hierarchical&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Root Terms"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:D.filter(o=>!o.parentId).length})})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Child Terms"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:D.filter(o=>o.parentId).length})})]})]}),e.jsxs(k,{children:[e.jsx(M,{className:"pb-3",children:e.jsx(q,{className:"text-sm font-medium",children:"Total Posts"})}),e.jsx(_,{children:e.jsx("div",{className:"text-2xl font-bold",children:D.reduce((o,L)=>o+(L.postCount||0),0)})})]})]}),e.jsx(k,{children:e.jsx(_,{className:"pt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(P,{placeholder:`Search ${a?.labels?.plural_name||"terms"}...`,value:F,onChange:o=>T(o.target.value),className:"pl-10"})]})})}),e.jsx(k,{children:e.jsx(_,{className:"p-0",children:x?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):D.length===0?e.jsxs("div",{className:"text-center py-8",children:[a?.hierarchical?e.jsx(We,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}):e.jsx(je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-600",children:["No ",a?.labels?.plural_name||"terms"," found"]}),e.jsxs(b,{variant:"outline",className:"mt-4",onClick:()=>d(!0),children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Create First ",a?.labels?.singular_name||"Term"]})]}):H()})}),e.jsx(Ye,{open:c,onOpenChange:d,children:e.jsxs(Je,{children:[e.jsxs(Xe,{children:[e.jsxs(Ze,{children:["Create New ",a?.labels?.singular_name||"Term"]}),e.jsxs(es,{children:["Add a new ",a?.hierarchical?"category":"tag"," to ",a?.name]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"name",children:"Name"}),e.jsx(P,{id:"name",value:$.name,onChange:o=>{t(L=>({...L,name:o.target.value,slug:m(o.target.value)}))},placeholder:`Enter ${a?.labels?.singular_name?.toLowerCase()||"term"} name`})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"slug",children:"Slug"}),e.jsx(P,{id:"slug",value:$.slug,onChange:o=>t(L=>({...L,slug:o.target.value})),placeholder:"term-slug"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"description",children:"Description"}),e.jsx(de,{id:"description",value:$.description,onChange:o=>t(L=>({...L,description:o.target.value})),placeholder:"Optional description",rows:3})]}),a?.hierarchical&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"parent",children:["Parent ",a?.labels?.singular_name||"Term"]}),e.jsxs(X,{value:$.parentId||"none",onValueChange:o=>t(L=>({...L,parentId:o==="none"?void 0:o})),children:[e.jsx(Z,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(S,{value:"none",children:"No Parent"}),D.filter(o=>o.id!==l?.id).map(o=>e.jsx(S,{value:o.id,children:o.name},o.id))]})]})]})]}),e.jsxs(ss,{children:[e.jsx(b,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(b,{onClick:y,disabled:r.isPending,children:r.isPending?"Creating...":"Create"})]})]})}),e.jsx(Ye,{open:I,onOpenChange:E,children:e.jsxs(Je,{children:[e.jsxs(Xe,{children:[e.jsxs(Ze,{children:["Edit ",a?.labels?.singular_name||"Term"]}),e.jsxs(es,{children:["Update ",l?.name]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-name",children:"Name"}),e.jsx(P,{id:"edit-name",value:$.name,onChange:o=>t(L=>({...L,name:o.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-slug",children:"Slug"}),e.jsx(P,{id:"edit-slug",value:$.slug,onChange:o=>t(L=>({...L,slug:o.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"edit-description",children:"Description"}),e.jsx(de,{id:"edit-description",value:$.description,onChange:o=>t(L=>({...L,description:o.target.value})),rows:3})]}),a?.hierarchical&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(p,{htmlFor:"edit-parent",children:["Parent ",a?.labels?.singular_name||"Term"]}),e.jsxs(X,{value:$.parentId||"none",onValueChange:o=>t(L=>({...L,parentId:o==="none"?void 0:o})),children:[e.jsx(Z,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(S,{value:"none",children:"No Parent"}),D.filter(o=>o.id!==l?.id).map(o=>e.jsx(S,{value:o.id,children:o.name},o.id))]})]})]})]}),e.jsxs(ss,{children:[e.jsx(b,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),e.jsx(b,{onClick:g,disabled:O.isPending,children:O.isPending?"Updating...":"Update"})]})]})})]})}const ka=()=>e.jsxs(ea,{children:[e.jsx(ae,{index:!0,element:e.jsx(us,{})}),e.jsx(ae,{path:"content/:cptSlug",element:e.jsx(oa,{})}),e.jsx(ae,{path:"content/:cptSlug/new",element:e.jsx(js,{})}),e.jsx(ae,{path:"content/:cptSlug/:postId/edit",element:e.jsx(js,{})}),e.jsx(ae,{path:"types/new",element:e.jsx(Ge,{})}),e.jsx(ae,{path:"types/:slug/edit",element:e.jsx(Ge,{})}),e.jsx(ae,{path:"field-groups",element:e.jsx(ja,{})}),e.jsx(ae,{path:"field-groups/new",element:e.jsx(gs,{})}),e.jsx(ae,{path:"field-groups/:id/edit",element:e.jsx(gs,{})}),e.jsx(ae,{path:"taxonomies",element:e.jsx(va,{})}),e.jsx(ae,{path:"taxonomies/new",element:e.jsx(vs,{})}),e.jsx(ae,{path:"taxonomies/:id/edit",element:e.jsx(vs,{})}),e.jsx(ae,{path:"taxonomies/:taxonomyId/terms",element:e.jsx(ya,{})}),e.jsx(ae,{path:"archives/new",element:e.jsx(Ge,{})}),e.jsx(ae,{path:"archives/:slug/edit",element:e.jsx(Ge,{})}),e.jsx(ae,{path:"forms",element:e.jsx(ha,{})}),e.jsx(ae,{path:"forms/new",element:e.jsx(ps,{})}),e.jsx(ae,{path:"forms/:id/edit",element:e.jsx(ps,{})}),e.jsx(ae,{path:"*",element:e.jsx(us,{})})]});export{ka as default};
//# sourceMappingURL=index-DXKOEefd.js.map
