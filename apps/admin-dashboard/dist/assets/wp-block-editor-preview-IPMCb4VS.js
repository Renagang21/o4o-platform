import{a as e}from"./wp-i18n-D2qT7FTy.js";import{u as t,$ as s,a0 as i}from"./wp-block-editor-misc-5qbjj7fi.js";import{c as o}from"./vendor-ui-CrFdsnXa.js";import{d as r}from"./wp-misc-nAANEFFa.js";import{E as n}from"./wp-block-editor-api-BD-JvyIp.js";import{h as l,B as a}from"./wp-block-editor-core-BHvRx-9p.js";import{s as c}from"./wp-block-editor-store-D0LqdVTA.js";import{j as d,r as p}from"./vendor-react-DqgGMt48.js";import{s as m,u as h,g as u,f as b,h as v}from"./wp-core-BedthL0o.js";import{Disabled as w,Popover as g}from"./wp-components-Jwbue4-Q.js";let f;const _=2e3,j=[];function x({viewportWidth:e,containerWidth:o,minHeight:r,additionalStyles:n=j}){e||(e=o);const[a,{height:u}]=m(),{styles:b}=t(e=>({styles:e(c).getSettings().styles}),[]),v=p.useMemo(()=>b?[...b,{css:"body{height:auto;overflow:hidden;border:none;padding:0;}",__unstableType:"presets"},...n]:b,[b,n]);f=f||p.memo(l);const g=o/e,x=u?o/(u*g):0;return d.jsx(w,{className:"block-editor-block-preview__content",style:{transform:`scale(${g})`,aspectRatio:x,maxHeight:u>_?_*g:void 0,minHeight:r},children:d.jsxs(s,{contentRef:h(e=>{const{ownerDocument:{documentElement:t}}=e;t.classList.add("block-editor-block-preview__content-iframe"),t.style.position="absolute",t.style.width="100%",e.style.boxSizing="border-box",e.style.position="absolute",e.style.width="100%"},[]),"aria-hidden":!0,tabIndex:-1,style:{position:"absolute",width:e,height:u,pointerEvents:"none",maxHeight:_,minHeight:0!==g&&g<1&&r?r/g:r},children:[d.jsx(i,{styles:v}),a,d.jsx(f,{renderAppender:!1})]})})}function k(e){const[t,{width:s}]=m();return d.jsxs(d.Fragment,{children:[d.jsx("div",{style:{position:"relative",width:"100%",height:0},children:t}),d.jsx("div",{className:"block-editor-block-preview__container",children:!!s&&d.jsx(x,{...e,containerWidth:s})})]})}const y=[];const M=p.memo(function({blocks:e,viewportWidth:s=1200,minHeight:i,additionalStyles:o=y,__experimentalMinHeight:l,__experimentalPadding:a}){l&&(i=l,r("The __experimentalMinHeight prop",{since:"6.2",version:"6.4",alternative:"minHeight"})),a&&(o=[...o,{css:`body { padding: ${a}px; }`}],r("The __experimentalPadding prop of BlockPreview",{since:"6.2",version:"6.4",alternative:"additionalStyles"}));const m=t(e=>e(c).getSettings(),[]),h=p.useMemo(()=>({...m,focusMode:!1,__unstableIsPreviewMode:!0}),[m]),u=p.useMemo(()=>Array.isArray(e)?e:[e],[e]);return e&&0!==e.length?d.jsx(n,{value:u,settings:h,children:d.jsx(k,{viewportWidth:s,minHeight:i,additionalStyles:o})}):null});function H({blocks:e,props:s={},layout:r}){const l=t(e=>e(c).getSettings(),[]),m=p.useMemo(()=>({...l,styles:void 0,focusMode:!1,__unstableIsPreviewMode:!0}),[l]),h=u(),v=b([s.ref,h]),w=p.useMemo(()=>Array.isArray(e)?e:[e],[e]),g=d.jsxs(n,{value:w,settings:m,children:[d.jsx(i,{}),d.jsx(a,{renderAppender:!1,layout:r})]});return{...s,ref:v,className:o(s.className,"block-editor-block-preview__live-content","components-disabled"),children:e?.length?g:null}}function N({blocks:t}){return v("medium","<")?null:d.jsx("div",{className:"block-editor-block-switcher__popover-preview-container",children:d.jsx(g,{className:"block-editor-block-switcher__popover-preview",placement:"right-start",focusOnMount:!1,offset:16,children:d.jsxs("div",{className:"block-editor-block-switcher__preview",children:[d.jsx("div",{className:"block-editor-block-switcher__preview-title",children:e("Preview")}),d.jsx(M,{viewportWidth:500,blocks:t})]})})})}function P(){return r("wp.blockEditor.PreviewOptions",{version:"6.5"}),null}export{M as B,N as P,P as a,H as u};
