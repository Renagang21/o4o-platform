import{r as e,j as s,a3 as a,V as l,bP as t,a4 as i,a5 as n,a1 as r,c5 as c,Y as d,I as o,P as x,S as h,bV as m,E as u,N as j,B as p,D as g,F as v,bx as y,cc as N,cd as b,c3 as f,ce as w,J as k,d as C,c as S,cf as F,T as I,cg as P,L as $,ch as z,ci as L,m as A,n as q,bL as E,cj as D,bT as M,ck as T,cl as V,G as R,cm as K,w as B,W as _,cn as Q,co as H,M as U,q as Y,cp as O,C as W,bA as G,Q as J,o as X,cq as Z,cr as ee,bG as se,bR as ae,cs as le,bJ as te,ct as ie,cu as ne,cv as re,cw as ce,cx as de,cy as oe,cz as xe,cA as he,X as me,cB as ue,cC as je,z as pe,H as ge,cD as ve,e as ye,t as Ne,bu as be,cE as fe,cF as we,bZ as ke,b_ as Ce,bY as Se}from"./vendor-react-B2e3hjul.js";import{I as Fe,S as Ie,f as Pe,g as $e,h as ze,i as Le,T as Ae,B as qe,j as Ee,u as De,v as Me,L as Te,G as Ve,a as Re,b as Ke,d as Be,e as _e,s as Qe,c as He,D as Ue,n as Ye,o as Oe,r as We,q as Ge,C as Je,k as Xe,l as Ze,m as es,t as ss,w as as,x as ls,y as ts,z as is,E as ns,F as rs}from"./page-gutenberg-C_zDdNV3.js";import{u as cs,a as ds,b as os}from"./vendor-query-gT6dZ-b7.js";import{u as xs,B as hs,R as ms}from"./RowActions-Zk3NvCqe.js";import{u as us,S as js}from"./ScreenMeta-DgUZg-rB.js";import{A as ps,R as gs,P as vs}from"./PageForm-C7L33pFM.js";import{S as ys}from"./page-template-editor-Cnh1CINv.js";import{f as Ns}from"./vendor-utils-B-KQWpLj.js";import{C as bs}from"./checkbox-CamNsulW.js";import{M as fs}from"./MediaLibrary-C-fafZXJ.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./wp-all-B6DO5GFQ.js";import"./index-D29lZukw.js";import"./vendor-socket-CMcZe9fK.js";const ws=({post:a,formData:l,onUpdate:t,onSave:i,onCancel:n,isLoading:r,categories:c=[]})=>{const d=e.useRef(null);e.useEffect(()=>{d.current?.focus(),d.current?.select()},[]);return s.jsx("tr",{className:"inline-edit-row inline-edit-row-post quick-edit-row quick-edit-row-post inline-edit-post",onKeyDown:e=>{"Escape"===e.key?n():"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&i()},children:s.jsxs("td",{colSpan:7,className:"colspanchange",children:[s.jsxs("fieldset",{className:"inline-edit-col-left",children:[s.jsx("legend",{className:"inline-edit-legend",children:"Quick Edit"}),s.jsxs("div",{className:"inline-edit-col",children:[s.jsxs("label",{children:[s.jsx("span",{className:"title",children:"Title"}),s.jsx("span",{className:"input-text-wrap",children:s.jsx(Fe,{ref:d,type:"text",name:"post_title",className:"ptitle",value:l.title||"",onChange:e=>t("title",e.target.value)})})]}),s.jsxs("label",{children:[s.jsx("span",{className:"title",children:"Slug"}),s.jsx("span",{className:"input-text-wrap",children:s.jsx(Fe,{type:"text",name:"post_name",value:l.slug||"",onChange:e=>t("slug",e.target.value)})})]}),s.jsxs("fieldset",{className:"inline-edit-date",children:[s.jsx("legend",{children:s.jsx("span",{className:"title",children:"Date"})}),s.jsxs("div",{className:"timestamp-wrap",children:[s.jsxs("label",{children:[s.jsx("span",{className:"screen-reader-text",children:"Month"}),s.jsxs(Ie,{value:l.publishMonth||"01",onValueChange:e=>t("publishMonth",e),children:[s.jsx(Pe,{className:"inline-edit-month",children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"01",children:"Jan"}),s.jsx(Le,{value:"02",children:"Feb"}),s.jsx(Le,{value:"03",children:"Mar"}),s.jsx(Le,{value:"04",children:"Apr"}),s.jsx(Le,{value:"05",children:"May"}),s.jsx(Le,{value:"06",children:"Jun"}),s.jsx(Le,{value:"07",children:"Jul"}),s.jsx(Le,{value:"08",children:"Aug"}),s.jsx(Le,{value:"09",children:"Sep"}),s.jsx(Le,{value:"10",children:"Oct"}),s.jsx(Le,{value:"11",children:"Nov"}),s.jsx(Le,{value:"12",children:"Dec"})]})]})]}),s.jsxs("label",{children:[s.jsx("span",{className:"screen-reader-text",children:"Day"}),s.jsx(Fe,{type:"text",name:"jj",value:l.publishDay||"",size:2,maxLength:2,onChange:e=>t("publishDay",e.target.value),className:"inline-edit-day"})]}),",",s.jsxs("label",{children:[s.jsx("span",{className:"screen-reader-text",children:"Year"}),s.jsx(Fe,{type:"text",name:"aa",value:l.publishYear||"",size:4,maxLength:4,onChange:e=>t("publishYear",e.target.value),className:"inline-edit-year"})]})]})]}),s.jsx("br",{className:"clear"}),s.jsxs("label",{className:"inline-edit-author",children:[s.jsx("span",{className:"title",children:"Author"}),s.jsxs(Ie,{value:l.authorId||"",onValueChange:e=>t("authorId",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsx(ze,{children:s.jsx(Le,{value:a.author?.id||"",children:a.author?.name||"Unknown"})})]})]}),s.jsxs("label",{className:"inline-edit-password",children:[s.jsx("span",{className:"title",children:"Password"}),s.jsx("span",{className:"input-text-wrap",children:s.jsx(Fe,{type:"text",name:"post_password",value:l.password||"",onChange:e=>t("password",e.target.value)})}),s.jsx("em",{className:"alignleft",children:"‚ÄìOR‚Äì"})]}),s.jsxs("label",{className:"inline-edit-private alignleft",children:[s.jsx("input",{type:"checkbox",name:"keep_private",checked:l.isPrivate||!1,onChange:e=>t("isPrivate",e.target.checked)}),s.jsx("span",{className:"checkbox-title",children:"Private"})]})]})]}),s.jsx("fieldset",{className:"inline-edit-col-center inline-edit-categories",children:s.jsxs("div",{className:"inline-edit-col",children:[s.jsx("span",{className:"title inline-edit-categories-label",children:"Categories"}),s.jsx("ul",{className:"cat-checklist category-checklist",children:c.map(e=>s.jsx("li",{className:"popular-category",children:s.jsxs("label",{className:"selectit",children:[s.jsx("input",{type:"checkbox",name:"post_category[]",value:e.id,checked:l.categoryIds?.includes(e.id)||!1,onChange:s=>{const a=l.categoryIds||[];s.target.checked?t("categoryIds",[...a,e.id]):t("categoryIds",a.filter(s=>s!==e.id))}})," ",e.name]})},e.id))})]})}),s.jsxs("fieldset",{className:"inline-edit-col-right",children:[s.jsxs("label",{className:"inline-edit-tags",children:[s.jsx("span",{className:"title",children:"Tags"}),s.jsx(Ae,{name:"tax_input[post_tag]",className:"tax_input_post_tag",value:l.tags||"",onChange:e=>t("tags",e.target.value),placeholder:"Separate tags with commas"})]}),s.jsxs("div",{className:"inline-edit-group wp-clearfix",children:[s.jsxs("label",{className:"alignleft",children:[s.jsx("span",{className:"title",children:"Comments"}),s.jsxs(Ie,{value:l.commentStatus||"open",onValueChange:e=>t("commentStatus",e),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"open",children:"Allow"}),s.jsx(Le,{value:"closed",children:"Do not allow"})]})]})]}),s.jsxs("label",{className:"alignleft",children:[s.jsx("span",{className:"title",children:"Pings"}),s.jsxs(Ie,{value:l.pingStatus||"open",onValueChange:e=>t("pingStatus",e),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"open",children:"Allow"}),s.jsx(Le,{value:"closed",children:"Do not allow"})]})]})]})]}),s.jsxs("div",{className:"inline-edit-group wp-clearfix",children:[s.jsxs("label",{className:"inline-edit-status alignleft",children:[s.jsx("span",{className:"title",children:"Status"}),s.jsxs(Ie,{value:l.status||"draft",onValueChange:e=>t("status",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"published",children:"Published"}),s.jsx(Le,{value:"draft",children:"Draft"}),s.jsx(Le,{value:"pending",children:"Pending Review"}),s.jsx(Le,{value:"private",children:"Private"})]})]})]}),s.jsxs("label",{className:"alignleft",children:[s.jsx("input",{type:"checkbox",name:"sticky",checked:l.isSticky||!1,onChange:e=>t("isSticky",e.target.checked)}),s.jsx("span",{className:"checkbox-title",children:"Make this post sticky"})]})]})]}),s.jsxs("div",{className:"submit inline-edit-save",children:[s.jsx(qe,{className:"button button-primary save",onClick:i,disabled:r,children:r?"Updating...":"Update"}),s.jsx(qe,{className:"button cancel",variant:"ghost",onClick:n,disabled:r,children:"Cancel"}),s.jsx("span",{className:"spinner"}),s.jsx("br",{className:"clear"}),s.jsx("div",{className:"notice notice-error notice-alt inline hidden",children:s.jsx("p",{className:"error"})})]})]})})},ks=()=>(us([{id:"overview",title:"Overview",content:"\n        <p>This screen provides access to all of your posts. You can customize the display of this screen to suit your workflow.</p>\n        <p>By default, this screen will show all of your posts in a simple list. You can customize the display of this screen in a number of ways:</p>\n        <ul>\n          <li>You can hide/display columns based on your needs and decide how many posts to list per screen using the Screen Options tab.</li>\n          <li>You can filter the list of posts by post status using the text links above the posts list to only show posts with that status.</li>\n          <li>You can view posts in a simple title list or with an excerpt using the Screen Options tab.</li>\n          <li>You can refine the list to show only posts in a specific category or from a specific month by using the dropdown menus above the posts list.</li>\n        </ul>\n      "},{id:"actions",title:"Available Actions",content:"\n        <p>Hovering over a row in the posts list will display action links that allow you to manage your post. You can perform the following actions:</p>\n        <ul>\n          <li><strong>Edit</strong> takes you to the editing screen for that post. You can also reach that screen by clicking on the post title.</li>\n          <li><strong>Quick Edit</strong> provides inline access to the metadata of your post, allowing you to update post details without leaving this screen.</li>\n          <li><strong>Trash</strong> removes your post from this list and places it in the Trash, from which you can permanently delete it.</li>\n          <li><strong>View</strong> will show you what your draft post will look like if you publish it.</li>\n        </ul>\n      "},{id:"bulk-actions",title:"Bulk Actions",content:"\n        <p>You can also edit or move multiple posts to the Trash at once. Select the posts you want to act on using the checkboxes, then select the action you want to take from the Bulk actions menu and click Apply.</p>\n        <p>When using Bulk Edit, you can change the metadata (categories, author, etc.) for all selected posts at once. To remove a post from the grouping, just click the x next to its name in the Bulk Edit area that appears.</p>\n      "},{id:"quick-edit",title:"Quick Edit",content:'\n        <p>Quick Edit is a powerful feature that allows you to make changes to post metadata without leaving the posts list screen. To use Quick Edit:</p>\n        <ol>\n          <li>Hover over any post in the list</li>\n          <li>Click the "Quick Edit" link that appears</li>\n          <li>The post row will transform into an edit form</li>\n          <li>Make your changes</li>\n          <li>Click "Update" to save or "Cancel" to discard changes</li>\n        </ol>\n        <p><strong>Available fields in Quick Edit:</strong></p>\n        <ul>\n          <li>Title and Slug</li>\n          <li>Date and Author</li>\n          <li>Categories and Tags</li>\n          <li>Comments and Pings settings</li>\n          <li>Status and Visibility</li>\n          <li>Password protection</li>\n        </ul>\n      '}],{title:"For more information:",content:'\n      <p><a href="https://wordpress.org/support/article/posts-screen/" target="_blank">Documentation on Managing Posts</a></p>\n      <p><a href="https://wordpress.org/support/article/quick-edit/" target="_blank">Quick Edit Documentation</a></p>\n      <p><a href="https://wordpress.org/support/" target="_blank">Support Forums</a></p>\n    '}),null),Cs=()=>{const i=a(),n=cs(),[r,c]=e.useState(""),[d,o]=e.useState("all"),{data:x,isLoading:h,error:m}=ds({queryKey:["posts",d,r],queryFn:async()=>{const e=new URLSearchParams;"all"!==d&&e.set("status",d),r&&e.set("search",r),e.set("type","post");return(await Ee.api.get(`/posts?${e}`)).data}}),u=x?.posts||[],{data:j}=ds({queryKey:["categories"],queryFn:async()=>(await Ee.api.get("/categories")).data}),p=j||[],g=os({mutationFn:async({id:e,data:s})=>{const a={title:s.title,slug:s.slug,status:s.status,authorId:s.authorId,categoryIds:s.categoryIds,commentStatus:s.commentStatus,pingStatus:s.pingStatus};s.publishYear&&s.publishMonth&&s.publishDay&&(a.publishedAt=new Date(parseInt(s.publishYear),parseInt(s.publishMonth)-1,parseInt(s.publishDay)).toISOString()),s.tags&&(a.tags=s.tags.split(",").map(e=>e.trim()).filter(Boolean)),s.password&&(a.password=s.password),s.isPrivate&&(a.status="private"),a.isSticky=s.isSticky,await Ee.api.patch(`/posts/${e}`,a)},onSuccess:()=>{n.invalidateQueries({queryKey:["posts"]}),l.success("Post updated successfully")},onError:()=>{l.error("Failed to update post")}}),v=function({onSave:s,onCancel:a}){const[l,t]=e.useState(null),[i,n]=e.useState(!1),[r,c]=e.useState({}),d=e.useCallback((e,s)=>{t(e),c(s)},[]),o=e.useCallback(()=>{t(null),c({}),a?.()},[a]),x=e.useCallback(async()=>{if(l){n(!0);try{await s(l,r),t(null),c({})}finally{n(!1)}}},[l,r,s]),h=e.useCallback((e,s)=>{c(a=>({...a,[e]:s}))},[]),m=e.useCallback(e=>l===e,[l]);return{editingId:l,isEditing:m,isLoading:i,formData:r,startEdit:d,cancelEdit:o,saveEdit:x,updateField:h}}({onSave:async(e,s)=>{await g.mutateAsync({id:e,data:s})}}),y=os({mutationFn:async e=>{await Promise.all(e.map(e=>Ee.api.delete(`/posts/${e}`)))},onSuccess:()=>{n.invalidateQueries({queryKey:["posts"]}),l.success("Selected posts deleted successfully")},onError:()=>{l.error("Failed to delete some posts")}}),N=os({mutationFn:async({ids:e,status:s})=>{await Promise.all(e.map(e=>Ee.api.patch(`/posts/${e}`,{status:s})))},onSuccess:()=>{n.invalidateQueries({queryKey:["posts"]}),l.success("Posts status updated successfully")},onError:()=>{l.error("Failed to update some posts")}}),b=os({mutationFn:async e=>{await Ee.api.delete(`/posts/${e}`)},onSuccess:()=>{n.invalidateQueries({queryKey:["posts"]}),l.success("Post deleted successfully")},onError:()=>{l.error("Failed to delete post")}}),f=[{value:"trash",label:"Move to Trash",action:async e=>{await N.mutateAsync({ids:e,status:"trash"})},confirmMessage:"Are you sure you want to move {count} post(s) to trash?"},{value:"delete",label:"Delete Permanently",action:async e=>{await y.mutateAsync(e)},confirmMessage:"Are you sure you want to permanently delete {count} post(s)? This cannot be undone.",isDestructive:!0},{value:"publish",label:"Publish",action:async e=>{await N.mutateAsync({ids:e,status:"published"})}},{value:"draft",label:"Move to Draft",action:async e=>{await N.mutateAsync({ids:e,status:"draft"})}}],{selectedCount:w,isAllSelected:k,isProcessing:C,toggleAll:S,toggleItem:F,executeBulkAction:I,isSelected:P}=xs({items:u,idField:"id",actions:f}),$=[{key:"title",label:"Title",sortable:!0,render:e=>s.jsxs("div",{children:[s.jsx(t,{to:`/posts/${e.id}/edit`,className:"font-medium text-blue-600 hover:text-blue-800",children:e.title||"(no title)"}),"draft"===e.status&&s.jsx("span",{className:"text-gray-500 text-sm ml-2",children:"‚Äî Draft"})]})},{key:"author",label:"Author",render:e=>e.author?.name||"Unknown"},{key:"categories",label:"Categories",render:e=>s.jsx("div",{className:"text-sm text-gray-600",children:e.categories?.map(e=>e.name).join(", ")||"‚Äî"})},{key:"tags",label:"Tags",render:e=>s.jsx("div",{className:"text-sm text-gray-600",children:e.tags?.map(e=>e.name).join(", ")||"‚Äî"})},{key:"comments",label:"Comments",render:e=>s.jsx("div",{className:"text-center",children:s.jsx("span",{className:"comment-count",children:e.commentCount||0})})},{key:"date",label:"Date",sortable:!0,render:e=>s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:"published"===e.status?"Published":"Last Modified"}),s.jsx("div",{className:"text-gray-600",children:De(e.updatedAt||e.createdAt)})]})}],z=e=>{const a=[{label:"Edit",onClick:()=>i(`/posts/${e.id}/edit`)},{label:"Quick Edit",onClick:()=>{v.startEdit(e.id,(e=>{const s=new Date(e.publishedAt||e.createdAt);return{title:e.title,slug:e.slug,status:e.status,authorId:e.author?.id,categoryIds:e.categories?.map(e=>e.id)||[],tags:e.tags?.map(e=>e.name).join(", ")||"",publishYear:s.getFullYear().toString(),publishMonth:(s.getMonth()+1).toString().padStart(2,"0"),publishDay:s.getDate().toString().padStart(2,"0"),commentStatus:e.commentStatus||"open",pingStatus:e.pingStatus||"open",password:e.password||"",isPrivate:"private"===e.status,isSticky:e.isSticky||!1}})(e))},className:"quick-edit"},{label:"Trash",onClick:async()=>{confirm("Are you sure you want to move this post to trash?")&&await b.mutateAsync(e.id)},className:"text-red-600"},{label:"View",href:`/posts/${e.slug}`,target:"_blank"}];return s.jsx(ms,{actions:a,visible:!v.isEditing(e.id)})};return s.jsxs("div",{className:"wrap",children:[s.jsx(ks,{}),s.jsx(js,{}),s.jsx("h1",{className:"wp-heading-inline",children:"Posts"}),s.jsx(t,{to:"/posts/new",className:"page-title-action",children:"Add New"}),s.jsx("hr",{className:"wp-header-end"}),s.jsx("div",{className:"wp-filter",children:s.jsxs("div",{className:"filter-items",children:[s.jsxs(Ie,{value:d,onValueChange:e=>o(e),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"All posts"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"All posts"}),s.jsx(Le,{value:"published",children:"Published"}),s.jsx(Le,{value:"draft",children:"Draft"}),s.jsx(Le,{value:"scheduled",children:"Scheduled"}),s.jsx(Le,{value:"trash",children:"Trash"})]})]}),s.jsxs("div",{className:"search-box",children:[s.jsx(Fe,{type:"search",placeholder:"Search posts...",value:r,onChange:e=>c(e.target.value),className:"w-[300px]"}),s.jsx(qe,{variant:"secondary",children:"Search Posts"})]})]})}),s.jsx(hs,{actions:f,selectedCount:w,onActionExecute:I,isProcessing:C,position:"top"}),h?s.jsx("div",{className:"text-center py-8",children:"Loading posts..."}):m?s.jsx("div",{className:"text-center py-8 text-red-600",children:"Error loading posts"}):s.jsxs("table",{className:"wp-list-table widefat fixed striped posts",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"manage-column column-cb check-column",children:[s.jsx("label",{className:"screen-reader-text",htmlFor:"cb-select-all",children:"Select All"}),s.jsx("input",{type:"checkbox",id:"cb-select-all",checked:k,onChange:S})]}),$.map(e=>s.jsx("th",{scope:"col",className:`manage-column column-${e.key}${e.sortable?" sortable":""}`,children:e.sortable?s.jsxs("a",{href:"#",children:[s.jsx("span",{children:e.label}),s.jsx("span",{className:"sorting-indicator"})]}):e.label},e.key))]})}),s.jsx("tbody",{id:"the-list",children:0===u.length?s.jsx("tr",{children:s.jsx("td",{colSpan:$.length+1,className:"colspanchange text-center py-4",children:"No posts found"})}):u.map((a,l)=>{const t=String(a.id),i=P(t),n=v.isEditing(t);return s.jsxs(e.Fragment,{children:[s.jsxs("tr",{className:`${i?"selected":""} ${l%2==0?"alternate":""} ${n?"hidden":""}`,children:[s.jsxs("th",{scope:"row",className:"check-column",children:[s.jsxs("label",{className:"screen-reader-text",htmlFor:`cb-select-${t}`,children:["Select ",a.title||`Post ${t}`]}),s.jsx("input",{type:"checkbox",id:`cb-select-${t}`,checked:i,onChange:()=>F(t)})]}),$.map(e=>s.jsxs("td",{className:`column-${e.key}`,children:[e.render?e.render(a):a[e.key],e.key===$[0].key&&z(a)]},e.key))]}),n&&s.jsx(ws,{post:a,formData:v.formData,onUpdate:v.updateField,onSave:v.saveEdit,onCancel:v.cancelEdit,isLoading:v.isLoading,categories:p})]},t)})}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsxs("td",{className:"manage-column column-cb check-column",children:[s.jsx("label",{className:"screen-reader-text",htmlFor:"cb-select-all-2",children:"Select All"}),s.jsx("input",{type:"checkbox",id:"cb-select-all-2",checked:k,onChange:S})]}),$.map(e=>s.jsx("th",{scope:"col",className:`manage-column column-${e.key}`,children:e.label},e.key))]})})]}),s.jsx(hs,{actions:f,selectedCount:w,onActionExecute:I,isProcessing:C,position:"bottom"}),s.jsx("div",{className:"tablenav bottom",children:s.jsx("div",{className:"tablenav-pages",children:s.jsxs("span",{className:"displaying-num",children:[u.length," items"]})})})]})};const Ss=new class{events={};on(e,s){return this.events[e]||(this.events[e]=[]),this.events[e].push(s),()=>{this.events[e]=this.events[e].filter(e=>e!==s)}}emit(e,...s){this.events[e]&&this.events[e].forEach(e=>{e(...s)})}off(e,s){this.events[e]&&(s?this.events[e]=this.events[e].filter(e=>e!==s):delete this.events[e])}},Fs="post:created",Is="post:updated",Ps=()=>{const t=a(),{id:x}=i(),h=cs(),m=!!x,[u,j]=e.useState({title:"",content:"",excerpt:"",type:"post",status:"draft",visibility:"public",categoryIds:[],tagIds:[],meta:{seoTitle:"",seoDescription:"",seoKeywords:[]}}),[p,g]=e.useState([]),[v,y]=e.useState([]),[N,b]=e.useState(!1),[f,w]=e.useState(""),[k,C]=e.useState(""),[S,F]=e.useState(!1),[I,P]=e.useState(null),{data:$,isLoading:z}=ds({queryKey:["post",x],queryFn:async()=>(await Ee.api.get(`/posts/${x}`)).data,enabled:m}),{data:L=[]}=ds({queryKey:["categories"],queryFn:async()=>(await Ee.api.get("/categories")).data}),{data:A=[]}=ds({queryKey:["tags"],queryFn:async()=>(await Ee.api.get("/tags")).data}),{isSaving:q,lastSaved:E,hasUnsavedChanges:D,savedInLocalStorage:M,recoverFromLocalStorage:T,clearLocalStorage:V}=Me(u,{postId:x,postType:"post",interval:3e4,onSaveSuccess:()=>{}});e.useEffect(()=>{(async()=>{const e=await T();e&&!x&&(P({data:e,timestamp:new Date}),F(!0))})()},[x,T]);const R=os({mutationFn:async e=>(await Ee.api.post("/posts",e)).data,onSuccess:e=>{l.success("Í≤åÏãúÍ∏ÄÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§"),h.invalidateQueries({queryKey:["posts"]}),V(),Ss.emit(Fs,{postType:"post",id:e.id}),t(`/content/posts/${e.id}/edit`)},onError:()=>{l.error("Í≤åÏãúÍ∏Ä Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),K=os({mutationFn:async e=>(await Ee.api.put(`/posts/${x}`,e)).data,onSuccess:()=>{l.success("Í≤åÏãúÍ∏ÄÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),h.invalidateQueries({queryKey:["posts"]}),h.invalidateQueries({queryKey:["post",x]}),V(),Ss.emit(Is,{postType:"post",id:x})},onError:()=>{l.error("Í≤åÏãúÍ∏Ä ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}});e.useEffect(()=>{if($&&(j({title:$.title,content:$.content,excerpt:$.excerpt||"",type:$.type,status:$.status,visibility:$.visibility,password:$.password,categoryIds:$.categoryIds||[],tagIds:$.tagIds||[],featuredImageId:$.featuredImageId,meta:$.meta||{seoTitle:"",seoDescription:"",seoKeywords:[]}}),g($.categoryIds||[]),y($.tagIds||[]),$.scheduledAt)){b(!0);const e=new Date($.scheduledAt);w(Ns(e,"yyyy-MM-dd")),C(Ns(e,"HH:mm"))}},[$]);const B=(e="draft")=>{const s={...u,status:e,categoryIds:p,tagIds:v,scheduledAt:N&&f&&k?new Date(`${f}T${k}`):void 0};m?K.mutate({id:x,...s}):R.mutate(s)};return m&&z?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>t("/content/posts"),children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"Í≤åÏãúÍ∏Ä Î™©Î°ù"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"Í≤åÏãúÍ∏Ä ÏàòÏ†ï":"ÏÉà Í≤åÏãúÍ∏Ä ÏûëÏÑ±"}),s.jsx(ps,{isSaving:q,lastSaved:E,hasUnsavedChanges:D,savedInLocalStorage:M})]}),S&&I&&s.jsx(gs,{timestamp:I.timestamp,onRecover:()=>{I&&(j(I.data),I.data.categoryIds&&g(I.data.categoryIds),I.data.tagIds&&y(I.data.tagIds),V(),F(!1),l.success("ÏûÑÏãú Ï†ÄÏû•Îêú ÎÇ¥Ïö©Ïù¥ Î≥µÍµ¨ÎêòÏóàÏäµÎãàÎã§"))},onDiscard:()=>{V(),F(!1)}}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx("div",{className:"wp-card",children:s.jsxs("div",{className:"wp-card-body",children:[s.jsx(Te,{htmlFor:"title",children:"Ï†úÎ™©"}),s.jsx(Fe,{id:"title",placeholder:"Í≤åÏãúÍ∏Ä Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",value:u.title,onChange:e=>j({...u,title:e.target.value}),className:"mt-2"})]})}),s.jsx("div",{className:"wp-card",children:s.jsxs("div",{className:"wp-card-body",children:[s.jsx(Te,{children:"ÎÇ¥Ïö©"}),s.jsx("div",{className:"mt-2",children:s.jsx(Ve,{content:u.content,onContentChange:e=>j({...u,content:e})})})]})}),s.jsx("div",{className:"wp-card",children:s.jsx("div",{className:"wp-card-body",children:s.jsxs(Re,{defaultValue:"excerpt",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-3",children:[s.jsx(Be,{value:"excerpt",children:"ÏöîÏïΩ"}),s.jsx(Be,{value:"seo",children:"SEO"}),s.jsx(Be,{value:"advanced",children:"Í≥†Í∏â"})]}),s.jsx(_e,{value:"excerpt",className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"excerpt",children:"ÏöîÏïΩ"}),s.jsx(Ae,{id:"excerpt",placeholder:"Í≤åÏãúÍ∏Ä ÏöîÏïΩÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (ÏÑ†ÌÉùÏÇ¨Ìï≠)",value:u.excerpt,onChange:e=>j({...u,excerpt:e.target.value}),className:"mt-2",rows:3}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ÏöîÏïΩÏùÄ Î™©Î°ùÏóêÏÑú Í≤åÏãúÍ∏Ä ÎØ∏Î¶¨Î≥¥Í∏∞Î°ú ÌëúÏãúÎê©ÎãàÎã§"})]})}),s.jsxs(_e,{value:"seo",className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"seoTitle",children:"SEO Ï†úÎ™©"}),s.jsx(Fe,{id:"seoTitle",placeholder:"Í≤ÄÏÉâ Í≤∞Í≥ºÏóê ÌëúÏãúÎê† Ï†úÎ™©",value:u.meta?.seoTitle,onChange:e=>j({...u,meta:{...u.meta,seoTitle:e.target.value}}),className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"seoDescription",children:"SEO ÏÑ§Î™Ö"}),s.jsx(Ae,{id:"seoDescription",placeholder:"Í≤ÄÏÉâ Í≤∞Í≥ºÏóê ÌëúÏãúÎê† ÏÑ§Î™Ö",value:u.meta?.seoDescription,onChange:e=>j({...u,meta:{...u.meta,seoDescription:e.target.value}}),className:"mt-2",rows:3})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"seoKeywords",children:"SEO ÌÇ§ÏõåÎìú"}),s.jsx(Fe,{id:"seoKeywords",placeholder:"ÌÇ§ÏõåÎìúÎ•º ÏâºÌëúÎ°ú Íµ¨Î∂ÑÌïòÏó¨ ÏûÖÎ†•",value:u.meta?.seoKeywords?.join(", "),onChange:e=>j({...u,meta:{...u.meta,seoKeywords:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}}),className:"mt-2"})]})]}),s.jsx(_e,{value:"advanced",className:"space-y-4",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"slug",children:"Ïä¨Îü¨Í∑∏"}),s.jsx(Fe,{id:"slug",placeholder:"url-friendly-slug",value:u.slug||"",onChange:e=>j({...u,slug:e.target.value}),className:"mt-2"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"URLÏóê ÏÇ¨Ïö©Îê† Ï£ºÏÜåÏûÖÎãàÎã§. ÎπÑÏõåÎëêÎ©¥ Ï†úÎ™©ÏóêÏÑú ÏûêÎèô ÏÉùÏÑ±Îê©ÎãàÎã§"})]})})})]})})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"Í≤åÏãú"})}),s.jsxs("div",{className:"wp-card-body space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"ÏÉÅÌÉú:"}),s.jsxs(Qe,{variant:"published"===u.status?"default":"secondary",children:["draft"===u.status&&"ÏûÑÏãúÏ†ÄÏû•","published"===u.status&&"Í≤åÏãúÎê®","scheduled"===u.status&&"ÏòàÏïΩÎê®"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Í≥µÍ∞ú ÏÑ§Ï†ï:"}),s.jsxs(Ie,{value:u.visibility,onValueChange:e=>j({...u,visibility:e}),children:[s.jsx(Pe,{className:"w-32",children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"public",children:"Í≥µÍ∞ú"}),s.jsx(Le,{value:"private",children:"ÎπÑÍ≥µÍ∞ú"}),s.jsx(Le,{value:"password",children:"ÎπÑÎ∞ÄÎ≤àÌò∏"})]})]})]}),"password"===u.visibility&&s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"password",children:"ÎπÑÎ∞ÄÎ≤àÌò∏"}),s.jsx(Fe,{id:"password",type:"password",value:u.password||"",onChange:e=>j({...u,password:e.target.value}),className:"mt-2"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{htmlFor:"schedule",className:"text-sm",children:"ÏòàÏïΩ Í≤åÏãú"}),s.jsx(ys,{id:"schedule",checked:N,onCheckedChange:b})]}),N&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Fe,{type:"date",value:f,onChange:e=>w(e.target.value)}),s.jsx(Fe,{type:"time",value:k,onChange:e=>C(e.target.value)})]}),s.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[s.jsxs(qe,{variant:"outline",className:"flex-1",onClick:()=>B("draft"),disabled:R.isPending||K.isPending,children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"ÏûÑÏãúÏ†ÄÏû•"]}),s.jsx(qe,{className:"flex-1",onClick:()=>B(N?"scheduled":"published"),disabled:R.isPending||K.isPending,children:N?s.jsxs(s.Fragment,{children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),"ÏòàÏïΩ"]}):s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"Í≤åÏãú"]})})]})]})]}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"})}),s.jsxs("div",{className:"wp-card-body",children:[s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:L.map(e=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:p.includes(e.id),onChange:s=>{s.target.checked?g([...p,e.id]):g(p.filter(s=>s!==e.id))}}),s.jsx("span",{className:"text-sm",children:e.name})]},e.id))}),0===L.length&&s.jsx("p",{className:"text-sm text-gray-500",children:"Ïπ¥ÌÖåÍ≥†Î¶¨Í∞Ä ÏóÜÏäµÎãàÎã§"})]})]}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"ÌÉúÍ∑∏"})}),s.jsxs("div",{className:"wp-card-body",children:[s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:A.map(e=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:v.includes(e.id),onChange:s=>{s.target.checked?y([...v,e.id]):y(v.filter(s=>s!==e.id))}}),s.jsx("span",{className:"text-sm",children:e.name})]},e.id))}),0===A.length&&s.jsx("p",{className:"text-sm text-gray-500",children:"ÌÉúÍ∑∏Í∞Ä ÏóÜÏäµÎãàÎã§"})]})]}),s.jsxs("div",{className:"wp-card",children:[s.jsx("div",{className:"wp-card-header",children:s.jsx("h3",{className:"font-medium",children:"ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"})}),s.jsx("div",{className:"wp-card-body",children:u.featuredImage?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:u.featuredImage.url,alt:u.featuredImage.alt||"",className:"w-full h-32 object-cover rounded"}),s.jsx(qe,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>j({...u,featuredImageId:void 0,featuredImage:void 0}),children:"Ï†úÍ±∞"})]}):s.jsxs(qe,{variant:"outline",className:"w-full",children:[s.jsx(o,{className:"w-4 h-4 mr-2"}),"Ïù¥ÎØ∏ÏßÄ ÏÑ†ÌÉù"]})})]})]})]})]})},$s=e.forwardRef(({className:e,...a},l)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:l,className:He("w-full caption-bottom text-sm",e),...a})}));$s.displayName="Table";const zs=e.forwardRef(({className:e,...a},l)=>s.jsx("thead",{ref:l,className:He("[&_tr]:border-b",e),...a}));zs.displayName="TableHeader";const Ls=e.forwardRef(({className:e,...a},l)=>s.jsx("tbody",{ref:l,className:He("[&_tr:last-child]:border-0",e),...a}));Ls.displayName="TableBody";e.forwardRef(({className:e,...a},l)=>s.jsx("tfoot",{ref:l,className:He("border-t bg-gray-50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";const As=e.forwardRef(({className:e,...a},l)=>s.jsx("tr",{ref:l,className:He("border-b transition-colors hover:bg-gray-50 data-[state=selected]:bg-gray-100",e),...a}));As.displayName="TableRow";const qs=e.forwardRef(({className:e,...a},l)=>s.jsx("th",{ref:l,className:He("h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0",e),...a}));qs.displayName="TableHead";const Es=e.forwardRef(({className:e,...a},l)=>s.jsx("td",{ref:l,className:He("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));Es.displayName="TableCell";e.forwardRef(({className:e,...a},l)=>s.jsx("caption",{ref:l,className:He("mt-4 text-sm text-gray-500",e),...a})).displayName="TableCaption";const Ds=()=>{const i=a(),n=cs(),[r,c]=e.useState(""),[o,v]=e.useState("all"),[y,N]=e.useState([]),{data:b,isLoading:f,error:w}=ds({queryKey:["pages",o,r],queryFn:async()=>{const e=new URLSearchParams;"all"!==o&&e.set("status",o),r&&e.set("search",r),e.set("type","page");return(await Ee.api.get(`/posts?${e}`)).data}}),k=os({mutationFn:async e=>{await Ee.api.delete(`/posts/${e}`)},onSuccess:()=>{n.invalidateQueries({queryKey:["pages"]}),l.success("ÌéòÏù¥ÏßÄÍ∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("ÌéòÏù¥ÏßÄ ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),C=os({mutationFn:async e=>{await Ee.api.post(`/posts/${e}/duplicate`)},onSuccess:()=>{n.invalidateQueries({queryKey:["pages"]}),l.success("ÌéòÏù¥ÏßÄÍ∞Ä Î≥µÏ†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("ÌéòÏù¥ÏßÄ Î≥µÏ†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),S=os({mutationFn:async e=>{await Ee.api.post("/settings/homepage",{pageId:e})},onSuccess:()=>{n.invalidateQueries({queryKey:["pages"]}),l.success("ÌôàÌéòÏù¥ÏßÄÎ°ú ÏÑ§Ï†ïÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("ÌôàÌéòÏù¥ÏßÄ ÏÑ§Ï†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),F=e=>{switch(e){case"published":return s.jsx(Qe,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Í≤åÏãúÎê®"});case"draft":return s.jsx(Qe,{variant:"secondary",children:"ÏûÑÏãúÏ†ÄÏû•"});case"scheduled":return s.jsx(Qe,{className:"bg-blue-100 text-blue-800 hover:bg-blue-100",children:"ÏòàÏïΩÎê®"});case"trash":return s.jsx(Qe,{variant:"destructive",children:"Ìú¥ÏßÄÌÜµ"});default:return s.jsx(Qe,{children:e})}},I=b?.posts||[];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ÌéòÏù¥ÏßÄ"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"ÏÇ¨Ïù¥Ìä∏Ïùò Ï†ïÏ†Å ÌéòÏù¥ÏßÄÎ•º Í¥ÄÎ¶¨Ìï©ÎãàÎã§"})]}),s.jsxs(qe,{onClick:()=>i("/content/pages/new"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏÉà ÌéòÏù¥ÏßÄ"]})]}),s.jsx("div",{className:"wp-card",children:s.jsx("div",{className:"wp-card-body",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx(Fe,{placeholder:"ÌéòÏù¥ÏßÄ Í≤ÄÏÉâ...",value:r,onChange:e=>c(e.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:o,onValueChange:e=>v(e),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"ÏÉÅÌÉú ÌïÑÌÑ∞"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Î™®Îì† ÏÉÅÌÉú"}),s.jsx(Le,{value:"published",children:"Í≤åÏãúÎê®"}),s.jsx(Le,{value:"draft",children:"ÏûÑÏãúÏ†ÄÏû•"}),s.jsx(Le,{value:"scheduled",children:"ÏòàÏïΩÎê®"}),s.jsx(Le,{value:"trash",children:"Ìú¥ÏßÄÌÜµ"})]})]}),y.length>0&&s.jsxs(Ie,{onValueChange:e=>{0!==y.length||l.error("ÏÑ†ÌÉùÎêú ÌéòÏù¥ÏßÄÍ∞Ä ÏóÜÏäµÎãàÎã§")},children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"ÏùºÍ¥Ñ ÏûëÏóÖ"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"delete",children:"ÏÇ≠Ï†ú"}),s.jsx(Le,{value:"publish",children:"Í≤åÏãú"}),s.jsx(Le,{value:"draft",children:"ÏûÑÏãúÏ†ÄÏû•ÏúºÎ°ú Î≥ÄÍ≤Ω"})]})]})]})})}),s.jsx("div",{className:"wp-card",children:s.jsx("div",{className:"wp-card-body p-0",children:f?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):w?s.jsx("div",{className:"text-center py-12 text-red-600",children:"ÌéòÏù¥ÏßÄÎ•º Î∂àÎü¨Ïò§ÎäîÎç∞ Ïã§Ìå®ÌñàÏäµÎãàÎã§"}):0===I.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"ÌéòÏù¥ÏßÄÍ∞Ä ÏóÜÏäµÎãàÎã§"}),s.jsx(qe,{onClick:()=>i("/content/pages/new"),children:"Ï≤´ ÌéòÏù¥ÏßÄ ÎßåÎì§Í∏∞"})]}):s.jsxs($s,{children:[s.jsx(zs,{children:s.jsxs(As,{children:[s.jsx(qs,{className:"w-12",children:s.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:y.length===I.length,onChange:e=>{e.target.checked?N(I.map(e=>e.id)):N([])}})}),s.jsx(qs,{children:"Ï†úÎ™©"}),s.jsx(qs,{children:"ÏûëÏÑ±Ïûê"}),s.jsx(qs,{children:"ÌÖúÌîåÎ¶ø"}),s.jsx(qs,{children:"ÏÉÅÌÉú"}),s.jsx(qs,{children:"ÎÇ†Ïßú"}),s.jsx(qs,{className:"w-12"})]})}),s.jsx(Ls,{children:I.map(e=>s.jsxs(As,{children:[s.jsx(Es,{children:s.jsx("input",{type:"checkbox",className:"rounded border-gray-300",checked:y.includes(e.id),onChange:s=>{s.target.checked?N([...y,e.id]):N(y.filter(s=>s!==e.id))}})}),s.jsx(Es,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{children:[s.jsx(t,{to:`/content/pages/${e.id}/edit`,className:"font-medium text-gray-900 hover:text-gray-700",children:e.title||"(Ï†úÎ™© ÏóÜÏùå)"}),e.slug&&s.jsxs("p",{className:"text-sm text-gray-500",children:["/",e.slug]})]}),e.isHomepage&&s.jsxs(Qe,{variant:"outline",className:"flex items-center gap-1",children:[s.jsx(m,{className:"w-3 h-3"}),"Ìôà"]})]})}),s.jsx(Es,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium",children:e.author?.name}),s.jsx("div",{className:"text-gray-500",children:e.author?.email})]})}),s.jsx(Es,{children:e.template?s.jsx(Qe,{variant:"outline",children:e.template}):s.jsx("span",{className:"text-gray-500",children:"Í∏∞Î≥∏"})}),s.jsx(Es,{children:F(e.status)}),s.jsx(Es,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:De(e.publishedAt||e.createdAt)}),s.jsx("div",{className:"text-gray-500",children:"published"===e.status?"Í≤åÏãúÎê®":"ÏàòÏ†ïÎê®"})]})}),s.jsx(Es,{children:s.jsxs(Ue,{children:[s.jsx(Ye,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(Oe,{align:"end",children:[s.jsxs(We,{onClick:()=>i(`/content/pages/${e.id}/edit`),children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),s.jsxs(We,{onClick:()=>window.open(`/${e.slug}`,"_blank"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"Î≥¥Í∏∞"]}),s.jsxs(We,{onClick:()=>C.mutate(e.id),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),!e.isHomepage&&s.jsxs(We,{onClick:()=>S.mutate(e.id),children:[s.jsx(m,{className:"w-4 h-4 mr-2"}),"ÌôàÌéòÏù¥ÏßÄÎ°ú ÏÑ§Ï†ï"]}),s.jsx(Ge,{}),s.jsxs(We,{className:"text-red-600",onClick:()=>{confirm("Ï†ïÎßê Ïù¥ ÌéòÏù¥ÏßÄÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&k.mutate(e.id)},disabled:e.isHomepage,children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})})]},e.id))})]})})})]})},Ms=()=>{const e=a(),t=cs(),{data:i=[],isLoading:n}=ds({queryKey:["custom-post-types"],queryFn:async()=>(await Ee.api.get("/v1/platform/custom-post-types")).data}),r=os({mutationFn:async e=>Ee.api.delete(`/v1/platform/custom-post-types/${e}`),onSuccess:()=>{t.invalidateQueries({queryKey:["custom-post-types"]}),l.success("ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†ÌòïÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),c=e=>{const s=[];return e.title&&s.push("Ï†úÎ™©"),e.editor&&s.push("ÏóêÎîîÌÑ∞"),e.thumbnail&&s.push("ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"),e.customFields&&s.push("Ïª§Ïä§ÌÖÄ ÌïÑÎìú"),e.comments&&s.push("ÎåìÍ∏Ä"),s};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†Ìòï"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Îã§ÏñëÌïú ÏΩòÌÖêÏ∏† Ïú†ÌòïÏùÑ ÏÉùÏÑ±ÌïòÍ≥† Í¥ÄÎ¶¨Ìï©ÎãàÎã§"})]}),s.jsxs(qe,{onClick:()=>e("/content/cpt/new"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏÉà Í≤åÏãúÎ¨º Ïú†Ìòï"]})]}),n?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[s.jsxs(Je,{className:"border-gray-300",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(v,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx(Ze,{className:"text-lg",children:"Í≤åÏãúÍ∏Ä"}),s.jsx("p",{className:"text-sm text-gray-500",children:"post"})]})]}),s.jsx(Qe,{variant:"secondary",children:"Í∏∞Î≥∏"})]})}),s.jsxs(es,{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Î∏îÎ°úÍ∑∏ Í≤åÏãúÍ∏ÄÍ≥º Îâ¥Ïä§Î•º ÏúÑÌïú Í∏∞Î≥∏ Í≤åÏãúÎ¨º Ïú†Ìòï"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:["Ï†úÎ™©","ÏóêÎîîÌÑ∞","Ïπ¥ÌÖåÍ≥†Î¶¨","ÌÉúÍ∑∏","ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"].map(e=>s.jsx(Qe,{variant:"outline",className:"text-xs",children:e},e))}),s.jsx("div",{className:"flex items-center justify-between pt-4 border-t",children:s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>e("/content/posts"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"Í≤åÏãúÍ∏Ä Í¥ÄÎ¶¨"]})})]})]}),s.jsxs(Je,{className:"border-gray-300",children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(v,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx(Ze,{className:"text-lg",children:"ÌéòÏù¥ÏßÄ"}),s.jsx("p",{className:"text-sm text-gray-500",children:"page"})]})]}),s.jsx(Qe,{variant:"secondary",children:"Í∏∞Î≥∏"})]})}),s.jsxs(es,{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Ï†ïÏ†Å ÌéòÏù¥ÏßÄÎ•º ÏúÑÌïú Í∏∞Î≥∏ Í≤åÏãúÎ¨º Ïú†Ìòï"}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:["Ï†úÎ™©","ÏóêÎîîÌÑ∞","ÌéòÏù¥ÏßÄ ÏÜçÏÑ±","ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"].map(e=>s.jsx(Qe,{variant:"outline",className:"text-xs",children:e},e))}),s.jsx("div",{className:"flex items-center justify-between pt-4 border-t",children:s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>e("/content/pages"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"ÌéòÏù¥ÏßÄ Í¥ÄÎ¶¨"]})})]})]}),i.map(a=>s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.icon?s.jsx("span",{className:"text-2xl",children:a.icon}):s.jsx(y,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx(Ze,{className:"text-lg",children:a.pluralName}),s.jsx("p",{className:"text-sm text-gray-500",children:a.slug})]})]}),s.jsxs(Ue,{children:[s.jsx(Ye,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(Oe,{align:"end",children:[s.jsxs(We,{onClick:()=>e(`/content/cpt/${a.id}/edit`),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),s.jsxs(We,{onClick:()=>e(`/content/cpt/${a.id}/fields`),children:[s.jsx(b,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Í¥ÄÎ¶¨"]}),s.jsxs(We,{onClick:()=>e(`/content/${a.slug}`),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"ÏΩòÌÖêÏ∏† Î≥¥Í∏∞"]}),s.jsx(Ge,{}),s.jsxs(We,{onClick:()=>(e=>{confirm(`Ï†ïÎßê "${e.name}"ÏùÑ(Î•º) ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÏù¥ Ïú†ÌòïÏùò Î™®Îì† Í≤åÏãúÎ¨ºÎèÑ Ìï®Íªò ÏÇ≠Ï†úÎê©ÎãàÎã§.`)&&r.mutate(e.id)})(a),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})]})}),s.jsxs(es,{children:[a.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:a.description}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[a.isPublic?s.jsx(d,{className:"w-4 h-4 text-green-600"}):s.jsx(f,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm",children:a.isPublic?"Í≥µÍ∞ú":"ÎπÑÍ≥µÍ∞ú"})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:c(a.supports).map(e=>s.jsx(Qe,{variant:"outline",className:"text-xs",children:e},e))}),a.fieldGroups.length>0&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[a.fieldGroups.reduce((e,s)=>e+s.fields.length,0),"Í∞ú Ïª§Ïä§ÌÖÄ ÌïÑÎìú"]})]}),a.taxonomies.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:a.taxonomies.map(e=>s.jsx(Qe,{variant:"secondary",className:"text-xs",children:e},e))})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[s.jsx("span",{className:"text-xs text-gray-500",children:new Date(a.createdAt).toLocaleDateString()}),s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>e(`/content/${a.slug}`),children:"ÏΩòÌÖêÏ∏† Í¥ÄÎ¶¨"})]})]})]},a.id)),s.jsx(Je,{className:"border-dashed border-2 hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>e("/content/cpt/new"),children:s.jsxs(es,{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[s.jsx("div",{className:"p-3 bg-gray-100 rounded-full mb-4",children:s.jsx(x,{className:"w-8 h-8 text-gray-600"})}),s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"ÏÉà Í≤åÏãúÎ¨º Ïú†Ìòï Ï∂îÍ∞Ä"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Ï†úÌíà, Ìè¨Ìä∏Ìè¥Î¶¨Ïò§, Ïù¥Î≤§Ìä∏ Îì±",s.jsx("br",{}),"Îã§ÏñëÌïú ÏΩòÌÖêÏ∏† Ïú†ÌòïÏùÑ ÎßåÎì§Ïñ¥Î≥¥ÏÑ∏Ïöî"]})]})})]})]})},Ts=[{value:"üìÑ",label:"Î¨∏ÏÑú"},{value:"üìù",label:"Í∏ÄÏì∞Í∏∞"},{value:"üìä",label:"Ï∞®Ìä∏"},{value:"üé®",label:"ÎîîÏûêÏù∏"},{value:"üõçÔ∏è",label:"ÏáºÌïë"},{value:"üì∏",label:"ÏÇ¨ÏßÑ"},{value:"üé¨",label:"ÎπÑÎîîÏò§"},{value:"üéµ",label:"ÏùåÏïÖ"},{value:"üìÖ",label:"Ï∫òÎ¶∞Îçî"},{value:"üë•",label:"ÏÇ¨Îûå"},{value:"üíº",label:"ÎπÑÏ¶àÎãàÏä§"},{value:"üè¢",label:"ÌöåÏÇ¨"},{value:"üéØ",label:"Î™©Ìëú"},{value:"üí°",label:"ÏïÑÏù¥ÎîîÏñ¥"},{value:"üîß",label:"ÎèÑÍµ¨"}],Vs=()=>{const t=a(),{id:c}=i(),d=cs(),o=!!c,[h,m]=e.useState({name:"",singularName:"",pluralName:"",slug:"",description:"",icon:"üìÑ",menuPosition:5,isPublic:!0,showInMenu:!0,showInAdminBar:!0,hasArchive:!0,supports:{title:!0,editor:!0,excerpt:!0,thumbnail:!0,customFields:!0,comments:!1,revisions:!0,author:!0,pageAttributes:!1},labels:{},taxonomies:[]}),[u,j]=e.useState([]),{data:p,isLoading:g}=ds({queryKey:["custom-post-type",c],queryFn:async()=>(await Ee.api.get(`/v1/platform/custom-post-types/${c}`)).data,enabled:o}),{data:v=[]}=ds({queryKey:["taxonomies"],queryFn:async()=>[{id:"category",name:"Ïπ¥ÌÖåÍ≥†Î¶¨",slug:"category"},{id:"tag",name:"ÌÉúÍ∑∏",slug:"tag"}]}),y=os({mutationFn:async e=>(await Ee.api.post("/v1/platform/custom-post-types",e)).data,onSuccess:()=>{l.success("ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†ÌòïÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§"),d.invalidateQueries({queryKey:["custom-post-types"]}),t("/cpt")},onError:()=>{l.error("ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),N=os({mutationFn:async e=>(await Ee.api.put(`/v1/platform/custom-post-types/${c}`,e)).data,onSuccess:()=>{l.success("ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†ÌòïÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),d.invalidateQueries({queryKey:["custom-post-types"]}),d.invalidateQueries({queryKey:["custom-post-type",c]})},onError:()=>{l.error("ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}});e.useEffect(()=>{p&&(m({name:p.name,singularName:p.singularName,pluralName:p.pluralName,slug:p.slug,description:p.description,icon:p.icon,menuPosition:p.menuPosition,isPublic:p.isPublic,showInMenu:p.showInMenu,showInAdminBar:p.showInAdminBar,hasArchive:p.hasArchive,supports:p.supports,labels:p.labels,taxonomies:p.taxonomies}),j(p.taxonomies||[]))},[p]);const b=e=>e.toLowerCase().replace(/[^a-z0-9Í∞Ä-Ìû£]+/g,"_").replace(/^_+|_+$/g,"");return o&&g?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>t("/content/cpt"),children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"CPT Î™©Î°ù"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o?"CPT ÏàòÏ†ï":"ÏÉà ÏÇ¨Ïö©Ïûê Ï†ïÏùò Í≤åÏãúÎ¨º Ïú†Ìòï"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(Je,{children:[s.jsxs(Xe,{children:[s.jsx(Ze,{children:"Í∏∞Î≥∏ Ï†ïÎ≥¥"}),s.jsx(ss,{children:"Í≤åÏãúÎ¨º Ïú†ÌòïÏùò Í∏∞Î≥∏ Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"})]}),s.jsxs(es,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"icon",children:"ÏïÑÏù¥ÏΩò"}),s.jsxs(Ie,{value:h.icon,onValueChange:e=>m({...h,icon:e}),children:[s.jsx(Pe,{className:"mt-2",children:s.jsx($e,{})}),s.jsx(ze,{children:Ts.map(e=>s.jsx(Le,{value:e.value,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:e.value}),s.jsx("span",{children:e.label})]})},e.value))})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"menuPosition",children:"Î©îÎâ¥ ÏúÑÏπò"}),s.jsx(Fe,{id:"menuPosition",type:"number",value:h.menuPosition,onChange:e=>m({...h,menuPosition:parseInt(e.target.value)||5}),className:"mt-2"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ïà´ÏûêÍ∞Ä ÏûëÏùÑÏàòÎ°ù ÏÉÅÎã®Ïóê ÌëúÏãú"})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"name",children:"Ïù¥Î¶Ñ"}),s.jsx(Fe,{id:"name",value:h.name,onChange:e=>{return s=e.target.value,void m(o?{...h,name:s}:{...h,name:s,singularName:s,pluralName:s,slug:b(s)});var s},placeholder:"Ïòà: Ï†úÌíà",className:"mt-2",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"singularName",children:"Îã®ÏàòÌòï Ïù¥Î¶Ñ"}),s.jsx(Fe,{id:"singularName",value:h.singularName,onChange:e=>m({...h,singularName:e.target.value}),placeholder:"Ïòà: Ï†úÌíà",className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"pluralName",children:"Î≥µÏàòÌòï Ïù¥Î¶Ñ"}),s.jsx(Fe,{id:"pluralName",value:h.pluralName,onChange:e=>m({...h,pluralName:e.target.value}),placeholder:"Ïòà: Ï†úÌíàÎì§",className:"mt-2"})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"slug",children:"Ïä¨Îü¨Í∑∏ (URL)"}),s.jsx(Fe,{id:"slug",value:h.slug,onChange:e=>m({...h,slug:e.target.value}),placeholder:"Ïòà: product",className:"mt-2",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URLÏóê ÏÇ¨Ïö©Îê† Í≥†Ïú† ÏãùÎ≥ÑÏûê"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"description",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),s.jsx(Ae,{id:"description",value:h.description,onChange:e=>m({...h,description:e.target.value}),placeholder:"Ïù¥ Í≤åÏãúÎ¨º Ïú†ÌòïÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:3,className:"mt-2"})]})]})]}),s.jsxs(Je,{children:[s.jsxs(Xe,{children:[s.jsx(Ze,{children:"Í∏∞Îä• ÏßÄÏõê"}),s.jsx(ss,{children:"Ïù¥ Í≤åÏãúÎ¨º Ïú†ÌòïÏóêÏÑú ÏÇ¨Ïö©Ìï† Í∏∞Îä•ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"})]}),s.jsx(es,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.title,onCheckedChange:e=>m({...h,supports:{...h.supports,title:!!e}})}),s.jsx("span",{children:"Ï†úÎ™©"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.editor,onCheckedChange:e=>m({...h,supports:{...h.supports,editor:!!e}})}),s.jsx("span",{children:"ÏóêÎîîÌÑ∞"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.excerpt,onCheckedChange:e=>m({...h,supports:{...h.supports,excerpt:!!e}})}),s.jsx("span",{children:"ÏöîÏïΩ"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.thumbnail,onCheckedChange:e=>m({...h,supports:{...h.supports,thumbnail:!!e}})}),s.jsx("span",{children:"ÎåÄÌëú Ïù¥ÎØ∏ÏßÄ"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.customFields,onCheckedChange:e=>m({...h,supports:{...h.supports,customFields:!!e}})}),s.jsx("span",{children:"Ïª§Ïä§ÌÖÄ ÌïÑÎìú"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.comments,onCheckedChange:e=>m({...h,supports:{...h.supports,comments:!!e}})}),s.jsx("span",{children:"ÎåìÍ∏Ä"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.revisions,onCheckedChange:e=>m({...h,supports:{...h.supports,revisions:!!e}})}),s.jsx("span",{children:"Î¶¨ÎπÑÏ†Ñ"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.author,onCheckedChange:e=>m({...h,supports:{...h.supports,author:!!e}})}),s.jsx("span",{children:"ÏûëÏÑ±Ïûê"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:h.supports?.pageAttributes,onCheckedChange:e=>m({...h,supports:{...h.supports,pageAttributes:!!e}})}),s.jsx("span",{children:"ÌéòÏù¥ÏßÄ ÏÜçÏÑ±"})]})]})})]}),s.jsxs(Je,{children:[s.jsxs(Xe,{children:[s.jsx(Ze,{children:"Î∂ÑÎ•ò Ï≤¥Í≥Ñ"}),s.jsx(ss,{children:"Ïù¥ Í≤åÏãúÎ¨º Ïú†ÌòïÏóêÏÑú ÏÇ¨Ïö©Ìï† Î∂ÑÎ•ò Ï≤¥Í≥ÑÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî"})]}),s.jsxs(es,{children:[s.jsx("div",{className:"space-y-2",children:v.map(e=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx(bs,{checked:u.includes(e.id),onCheckedChange:s=>{j(s?[...u,e.id]:u.filter(s=>s!==e.id))}}),s.jsx("span",{children:e.name}),s.jsx(Qe,{variant:"outline",className:"text-xs",children:e.slug})]},e.id))}),s.jsxs(qe,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>t("/content/taxonomies/new"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏÉà Î∂ÑÎ•ò Ï≤¥Í≥Ñ Ï∂îÍ∞Ä"]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"Í≥µÍ∞ú ÏÑ§Ï†ï"})}),s.jsxs(es,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Te,{htmlFor:"isPublic",children:"Í≥µÍ∞ú"}),s.jsx("p",{className:"text-xs text-gray-500",children:"ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÌëúÏãú"})]}),s.jsx(ys,{id:"isPublic",checked:h.isPublic,onCheckedChange:e=>m({...h,isPublic:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Te,{htmlFor:"showInMenu",children:"Î©îÎâ¥Ïóê ÌëúÏãú"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Í¥ÄÎ¶¨Ïûê Î©îÎâ¥Ïóê ÌëúÏãú"})]}),s.jsx(ys,{id:"showInMenu",checked:h.showInMenu,onCheckedChange:e=>m({...h,showInMenu:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Te,{htmlFor:"showInAdminBar",children:"Í¥ÄÎ¶¨ ÎßâÎåÄÏóê ÌëúÏãú"}),s.jsx("p",{className:"text-xs text-gray-500",children:"ÏÉÅÎã® Í¥ÄÎ¶¨ ÎßâÎåÄÏóê ÌëúÏãú"})]}),s.jsx(ys,{id:"showInAdminBar",checked:h.showInAdminBar,onCheckedChange:e=>m({...h,showInAdminBar:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Te,{htmlFor:"hasArchive",children:"ÏïÑÏπ¥Ïù¥Î∏å ÌéòÏù¥ÏßÄ"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Î™©Î°ù ÌéòÏù¥ÏßÄ ÏÉùÏÑ±"})]}),s.jsx(ys,{id:"hasArchive",checked:h.hasArchive,onCheckedChange:e=>m({...h,hasArchive:e})})]})]})]}),s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"ÏûëÏóÖ"})}),s.jsxs(es,{className:"space-y-3",children:[s.jsxs(qe,{onClick:()=>{const e={...h,taxonomies:u};o?N.mutate({id:c,...e}):y.mutate(e)},className:"w-full",disabled:!h.name||!h.slug||y.isPending||N.isPending,children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),o?"CPT ÏàòÏ†ï":"CPT ÏÉùÏÑ±"]}),o&&s.jsxs(qe,{variant:"outline",className:"w-full",onClick:()=>t(`/content/cpt/${c}/fields`),children:[s.jsx(k,{className:"w-4 h-4 mr-2"}),"Ïª§Ïä§ÌÖÄ ÌïÑÎìú Í¥ÄÎ¶¨"]})]})]}),s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"ÎØ∏Î¶¨Î≥¥Í∏∞"})}),s.jsx(es,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:h.icon}),s.jsx("span",{className:"font-medium",children:h.pluralName||"ÏÉà Í≤åÏãúÎ¨º Ïú†Ìòï"})]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:["Ïä¨Îü¨Í∑∏: ",s.jsx("code",{className:"bg-gray-100 px-1",children:h.slug||"slug"})]}),s.jsxs("p",{children:["URL: ",s.jsxs("code",{className:"bg-gray-100 px-1",children:["/content/",h.slug||"slug"]})]})]})]})})]})]})]})]})},Rs=[{value:"text",label:"ÌÖçÏä§Ìä∏",icon:I},{value:"textarea",label:"ÌÖçÏä§Ìä∏ ÏòÅÏó≠",icon:v},{value:"number",label:"Ïà´Ïûê",icon:P},{value:"select",label:"ÏÑ†ÌÉù",icon:$},{value:"checkbox",label:"Ï≤¥ÌÅ¨Î∞ïÏä§",icon:z},{value:"radio",label:"ÎùºÎîîÏò§",icon:L},{value:"date",label:"ÎÇ†Ïßú",icon:c},{value:"image",label:"Ïù¥ÎØ∏ÏßÄ",icon:o},{value:"file",label:"ÌååÏùº",icon:v},{value:"wysiwyg",label:"ÏóêÎîîÌÑ∞",icon:v},{value:"color",label:"ÏÉâÏÉÅ",icon:A},{value:"url",label:"URL",icon:q},{value:"email",label:"Ïù¥Î©îÏùº",icon:E},{value:"repeater",label:"Î∞òÎ≥µ ÌïÑÎìú",icon:p},{value:"relationship",label:"Í¥ÄÍ≥Ñ",icon:b}],Ks=()=>{const t=a(),{cptId:c}=i(),d=cs(),[o,h]=e.useState([]),[m,u]=e.useState(null),[j,p]=e.useState(null),[v,y]=e.useState(!1),[N,b]=e.useState(!1),[f,w]=e.useState([]),[P,$]=e.useState({name:"",key:"",description:"",position:"normal",order:0}),[z,L]=e.useState({name:"",key:"",type:"text",label:"",description:"",required:!1}),{data:A,isLoading:q}=ds({queryKey:["custom-post-type",c],queryFn:async()=>(await Ee.api.get(`/custom-post-types/${c}`)).data}),E=os({mutationFn:async e=>(await Ee.api.put(`/custom-post-types/${c}/field-groups`,{fieldGroups:e})).data,onSuccess:()=>{l.success("Ïª§Ïä§ÌÖÄ ÌïÑÎìúÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§"),d.invalidateQueries({queryKey:["custom-post-type",c]})},onError:()=>{l.error("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}});e.useEffect(()=>{A?.fieldGroups&&(h(A.fieldGroups),w(A.fieldGroups.map(e=>e.id)))},[A]);const D=e=>e.toLowerCase().replace(/[^a-z0-9Í∞Ä-Ìû£]+/g,"_").replace(/^_+|_+$/g,""),M=()=>{u(null),$({name:"",key:"",description:"",position:"normal",order:o.length}),y(!0)},T=e=>{const a=Rs.find(s=>s.value===e),l=a?.icon||I;return s.jsx(l,{className:"w-4 h-4"})};return q?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>t("/content/cpt"),children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"CPT Î™©Î°ù"]}),s.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[A?.name," - Ïª§Ïä§ÌÖÄ ÌïÑÎìú"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2 space-y-4",children:0===o.length?s.jsx(Je,{children:s.jsxs(es,{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"ÌïÑÎìú Í∑∏Î£πÏù¥ ÏóÜÏäµÎãàÎã§"}),s.jsxs(qe,{onClick:M,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Ï≤´ ÌïÑÎìú Í∑∏Î£π ÎßåÎì§Í∏∞"]})]})}):o.map(e=>s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("button",{onClick:()=>{return s=e.id,void w(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"flex items-center gap-2 text-left w-full",children:[f.includes(e.id)?s.jsx(C,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"}),s.jsx(Ze,{className:"text-lg",children:e.name})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-500 mt-1 ml-6",children:e.description})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qe,{variant:"outline",children:e.position}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>(e=>{u(e),$({name:e.name,key:e.key,description:e.description||"",position:e.position,order:e.order}),y(!0)})(e),children:s.jsx(k,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,void(confirm("Ï†ïÎßê Ïù¥ ÌïÑÎìú Í∑∏Î£πÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&h(o.filter(e=>e.id!==s)));var s},children:s.jsx(g,{className:"w-4 h-4 text-red-500"})})]})]})}),f.includes(e.id)&&s.jsx(es,{children:s.jsxs("div",{className:"space-y-2",children:[e.fields.map(a=>s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsx(F,{className:"w-5 h-5 text-gray-400 cursor-move"}),s.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[T(a.type),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:a.label}),s.jsxs("div",{className:"text-sm text-gray-500",children:[a.key," ¬∑ ",Rs.find(e=>e.value===a.type)?.label,a.required&&" ¬∑ ÌïÑÏàò"]})]})]}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>((e,s)=>{p({...e,tempId:s}),L({name:e.name,key:e.key,type:e.type,label:e.label||"",description:e.description||"",required:e.required||!1,placeholder:e.placeholder,min:e.min,max:e.max,maxLength:e.maxLength,options:e.options}),b(!0)})(a,e.id),children:s.jsx(k,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{return s=a.id,l=e.id,void h(o.map(e=>e.id===l?{...e,fields:e.fields.filter(e=>e.id!==s)}:e));var s,l},children:s.jsx(g,{className:"w-4 h-4 text-red-500"})})]},a.id)),s.jsxs(qe,{variant:"outline",size:"sm",className:"w-full mt-2",onClick:()=>(p(null),L({name:"",key:"",type:"text",label:"",description:"",required:!1}),void b(!0)),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Ï∂îÍ∞Ä"]})]})})]},e.id))}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"ÏûëÏóÖ"})}),s.jsxs(es,{className:"space-y-3",children:[s.jsxs(qe,{onClick:()=>{E.mutate(o)},className:"w-full",disabled:E.isPending,children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"Î≥ÄÍ≤ΩÏÇ¨Ìï≠ Ï†ÄÏû•"]}),s.jsxs(qe,{variant:"outline",className:"w-full",onClick:M,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏÉà ÌïÑÎìú Í∑∏Î£π"]})]})]}),s.jsxs(Je,{children:[s.jsxs(Xe,{children:[s.jsx(Ze,{children:"ÌïÑÎìú Ïú†Ìòï"}),s.jsx(ss,{children:"ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÌïÑÎìú Ïú†ÌòïÎì§"})]}),s.jsx(es,{children:s.jsx("div",{className:"space-y-2",children:Rs.slice(0,8).map(e=>{const a=e.icon;return s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(a,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:e.label})]},e.value)})})})]})]})]}),s.jsx(as,{open:v,onOpenChange:y,children:s.jsxs(ls,{children:[s.jsxs(ts,{children:[s.jsx(is,{children:m?"ÌïÑÎìú Í∑∏Î£π ÏàòÏ†ï":"ÏÉà ÌïÑÎìú Í∑∏Î£π"}),s.jsx(ns,{children:"Í¥ÄÎ†®Îêú ÌïÑÎìúÎì§ÏùÑ Í∑∏Î£πÏúºÎ°ú Î¨∂Ïñ¥ Í¥ÄÎ¶¨ÌïòÏÑ∏Ïöî"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"groupName",children:"Í∑∏Î£π Ïù¥Î¶Ñ"}),s.jsx(Fe,{id:"groupName",value:P.name,onChange:e=>$({...P,name:e.target.value,key:D(e.target.value)}),placeholder:"Ïòà: Ï†úÌíà Ï†ïÎ≥¥"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"groupKey",children:"Í∑∏Î£π ÌÇ§"}),s.jsx(Fe,{id:"groupKey",value:P.key,onChange:e=>$({...P,key:e.target.value}),placeholder:"Ïòà: product_info"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"groupDescription",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),s.jsx(Ae,{id:"groupDescription",value:P.description,onChange:e=>$({...P,description:e.target.value}),placeholder:"Ïù¥ ÌïÑÎìú Í∑∏Î£πÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:2})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"groupPosition",children:"ÏúÑÏπò"}),s.jsxs(Ie,{value:P.position,onValueChange:e=>$({...P,position:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"normal",children:"ÏùºÎ∞ò"}),s.jsx(Le,{value:"side",children:"ÏÇ¨Ïù¥ÎìúÎ∞î"}),s.jsx(Le,{value:"advanced",children:"Í≥†Í∏â"})]})]})]})]}),s.jsxs(rs,{children:[s.jsx(qe,{variant:"outline",onClick:()=>y(!1),children:"Ï∑®ÏÜå"}),s.jsx(qe,{onClick:()=>{const e={id:m?.id||`group-${Date.now()}`,...P,fields:m?.fields||[],rules:m?.rules||{}};h(m?o.map(s=>s.id===m.id?e:s):[...o,e]),y(!1)},children:"Ï†ÄÏû•"})]})]})}),s.jsx(as,{open:N,onOpenChange:b,children:s.jsxs(ls,{className:"max-w-2xl",children:[s.jsxs(ts,{children:[s.jsx(is,{children:j?"ÌïÑÎìú ÏàòÏ†ï":"ÏÉà ÌïÑÎìú"}),s.jsx(ns,{children:"Ïª§Ïä§ÌÖÄ ÌïÑÎìúÎ•º ÏÉùÏÑ±ÌïòÍ±∞ÎÇò ÏàòÏ†ïÌï©ÎãàÎã§"})]}),s.jsxs("div",{className:"space-y-4 py-4 max-h-[500px] overflow-y-auto",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldName",children:"ÌïÑÎìú Ïù¥Î¶Ñ"}),s.jsx(Fe,{id:"fieldName",value:z.name,onChange:e=>L({...z,name:e.target.value,key:D(e.target.value),label:e.target.value}),placeholder:"Ïòà: Í∞ÄÍ≤©"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldKey",children:"ÌïÑÎìú ÌÇ§"}),s.jsx(Fe,{id:"fieldKey",value:z.key,onChange:e=>L({...z,key:e.target.value}),placeholder:"Ïòà: price"})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldType",children:"ÌïÑÎìú Ïú†Ìòï"}),s.jsxs(Ie,{value:z.type,onValueChange:e=>L({...z,type:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsx(ze,{children:Rs.map(e=>{const a=e.icon;return s.jsx(Le,{value:e.value,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(a,{className:"w-4 h-4"}),e.label]})},e.value)})})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldLabel",children:"Î†àÏù¥Î∏î"}),s.jsx(Fe,{id:"fieldLabel",value:z.label,onChange:e=>L({...z,label:e.target.value}),placeholder:"Ìé∏Ïßë ÌôîÎ©¥Ïóê ÌëúÏãúÎê† Î†àÏù¥Î∏î"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldDescription",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),s.jsx(Ae,{id:"fieldDescription",value:z.description,onChange:e=>L({...z,description:e.target.value}),placeholder:"ÌïÑÎìú ÏÇ¨Ïö© Î∞©Î≤ïÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:2})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldPlaceholder",children:"ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî (ÏÑ†ÌÉù)"}),s.jsx(Fe,{id:"fieldPlaceholder",value:z.placeholder,onChange:e=>L({...z,placeholder:e.target.value}),placeholder:"ÏûÖÎ†• ÌïÑÎìúÏóê ÌëúÏãúÎê† ÌûåÌä∏ ÌÖçÏä§Ìä∏"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{id:"fieldRequired",checked:z.required,onCheckedChange:e=>L({...z,required:e})}),s.jsx(Te,{htmlFor:"fieldRequired",children:"ÌïÑÏàò ÌïÑÎìú"})]}),"number"===z.type&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldMin",children:"ÏµúÏÜåÍ∞í"}),s.jsx(Fe,{id:"fieldMin",type:"number",value:z.min,onChange:e=>L({...z,min:parseInt(e.target.value)})})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldMax",children:"ÏµúÎåÄÍ∞í"}),s.jsx(Fe,{id:"fieldMax",type:"number",value:z.max,onChange:e=>L({...z,max:parseInt(e.target.value)})})]})]}),("text"===z.type||"textarea"===z.type)&&s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"fieldMaxLength",children:"ÏµúÎåÄ Í∏∏Ïù¥"}),s.jsx(Fe,{id:"fieldMaxLength",type:"number",value:z.maxLength,onChange:e=>L({...z,maxLength:parseInt(e.target.value)})})]}),("select"===z.type||"checkbox"===z.type||"radio"===z.type)&&s.jsxs("div",{children:[s.jsx(Te,{children:"ÏòµÏÖò"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[(z.options||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Fe,{placeholder:"Î†àÏù¥Î∏î",value:e.label,onChange:s=>{const l=[...z.options||[]];l[a]={...e,label:s.target.value},L({...z,options:l})}}),s.jsx(Fe,{placeholder:"Í∞í",value:e.value,onChange:s=>{const l=[...z.options||[]];l[a]={...e,value:s.target.value},L({...z,options:l})}}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{const e=z.options?.filter((e,s)=>s!==a);L({...z,options:e})},children:s.jsx(g,{className:"w-4 h-4"})})]},a)),s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>{const e=[...z.options||[],{label:"",value:""}];L({...z,options:e})},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏòµÏÖò Ï∂îÍ∞Ä"]})]})]})]}),s.jsxs(rs,{children:[s.jsx(qe,{variant:"outline",onClick:()=>b(!1),children:"Ï∑®ÏÜå"}),s.jsx(qe,{onClick:()=>{const e=j?.tempId||o[0]?.id;if(!e)return;const s={id:j?.id||`field-${Date.now()}`,name:z.name,key:z.key,type:z.type,label:z.label,description:z.description,required:z.required,...z.placeholder&&{placeholder:z.placeholder},...void 0!==z.min&&{min:z.min},...void 0!==z.max&&{max:z.max},...void 0!==z.maxLength&&{maxLength:z.maxLength},...z.options&&{options:z.options}};h(o.map(a=>a.id===e?j?.id?{...a,fields:a.fields.map(e=>e.id===j.id?s:e)}:{...a,fields:[...a.fields,s]}:a)),b(!1)},children:"Ï†ÄÏû•"})]})]})})]})},Bs=()=>{const t=a(),{slug:n}=i(),r=cs(),[o,m]=e.useState([]),[j,v]=e.useState(""),[y,b]=e.useState("all"),[f,w]=e.useState(1),{data:k}=ds({queryKey:["custom-post-types"],queryFn:async()=>(await Ee.api.get("/custom-post-types")).data}),C=k?.find(e=>e.slug===n),{data:S,isLoading:F}=ds({queryKey:["posts",n,{status:y,search:j,page:f,limit:20}],queryFn:async()=>{const e=new URLSearchParams({post_type:n||"",page:f.toString(),limit:20..toString()});"all"!==y&&e.append("status",y),j&&e.append("search",j);return(await Ee.api.get(`/posts?${e}`)).data},enabled:!!n}),I=os({mutationFn:async e=>Ee.api.delete(`/posts/${e}`),onSuccess:()=>{r.invalidateQueries({queryKey:["posts",n]}),l.success("ÏΩòÌÖêÏ∏†Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),P=e=>{switch(e){case"published":return"success";case"draft":return"secondary";case"scheduled":return"warning";case"trash":return"destructive";default:return"default"}},$=e=>{switch(e){case"published":return"Í≥µÍ∞úÎê®";case"draft":return"ÏûÑÏãúÏ†ÄÏû•";case"scheduled":return"ÏòàÏïΩÎê®";case"trash":return"Ìú¥ÏßÄÌÜµ";default:return e}};return n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:C?.pluralName||n}),C?.description&&s.jsx("p",{className:"text-gray-600 mt-1",children:C.description})]}),s.jsxs(qe,{onClick:()=>t(`/content/${n}/new`),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏÉà ",C?.singularName||"Ìï≠Î™©"," Ï∂îÍ∞Ä"]})]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(Fe,{placeholder:"Ï†úÎ™©, ÎÇ¥Ïö©ÏúºÎ°ú Í≤ÄÏÉâ...",value:j,onChange:e=>v(e.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:y,onValueChange:e=>b(e),children:[s.jsxs(Pe,{className:"w-[180px]",children:[s.jsx(D,{className:"w-4 h-4 mr-2"}),s.jsx($e,{placeholder:"ÏÉÅÌÉú ÌïÑÌÑ∞"})]}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Î™®Îì† ÏÉÅÌÉú"}),s.jsx(Le,{value:"published",children:"Í≥µÍ∞úÎê®"}),s.jsx(Le,{value:"draft",children:"ÏûÑÏãúÏ†ÄÏû•"}),s.jsx(Le,{value:"scheduled",children:"ÏòàÏïΩÎê®"}),s.jsx(Le,{value:"trash",children:"Ìú¥ÏßÄÌÜµ"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[o.length>0&&s.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[o.length,"Í∞ú ÏÑ†ÌÉùÎê®"]}),s.jsx(qe,{variant:"outline",size:"sm",className:"ml-4",onClick:()=>{},children:"ÏùºÍ¥Ñ ÏûëÏóÖ"})]}),F?s.jsx("div",{className:"p-8 text-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):s.jsxs($s,{children:[s.jsx(zs,{children:s.jsxs(As,{children:[s.jsx(qs,{className:"w-12",children:s.jsx(bs,{checked:o.length===S?.posts?.length&&S?.posts?.length>0,onCheckedChange:e=>{m(e&&S?.posts?.map(e=>e.id)||[])}})}),s.jsx(qs,{children:"Ï†úÎ™©"}),s.jsx(qs,{children:"ÏûëÏÑ±Ïûê"}),s.jsx(qs,{children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),s.jsx(qs,{children:"ÏÉÅÌÉú"}),s.jsx(qs,{children:"ÎÇ†Ïßú"}),s.jsx(qs,{className:"text-right",children:"ÏûëÏóÖ"})]})}),s.jsx(Ls,{children:S?.posts?.map(e=>s.jsxs(As,{children:[s.jsx(Es,{children:s.jsx(bs,{checked:o.includes(e.id),onCheckedChange:()=>{return s=e.id,void m(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s}})}),s.jsx(Es,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.title}),e.excerpt&&s.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:e.excerpt})]})}),s.jsx(Es,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm",children:e.author?.name})]})}),s.jsx(Es,{children:e.categories&&e.categories.length>0?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(T,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm",children:e.categories[0].name})]}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx(Es,{children:s.jsx(Qe,{variant:P(e.status),children:$(e.status)})}),s.jsx(Es,{children:s.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[s.jsx(c,{className:"w-4 h-4"}),new Date(e.updatedAt).toLocaleDateString()]})}),s.jsx(Es,{className:"text-right",children:s.jsxs(Ue,{children:[s.jsx(Ye,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"h-4 w-4"})})}),s.jsxs(Oe,{align:"end",children:[s.jsxs(We,{onClick:()=>t(`/content/${n}/${e.id}/edit`),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),s.jsxs(We,{onClick:()=>window.open(`/${n}/${e.slug}`,"_blank"),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"Î≥¥Í∏∞"]}),s.jsxs(We,{onClick:()=>{},children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),s.jsx(Ge,{}),s.jsxs(We,{onClick:()=>(e=>{confirm(`Ï†ïÎßê "${e.title}"ÏùÑ(Î•º) ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)&&I.mutate(e.id)})(e),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})})]},e.id))})]}),0===S?.posts?.length&&s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsxs("p",{children:["ÏïÑÏßÅ ",C?.pluralName||"ÏΩòÌÖêÏ∏†","Í∞Ä ÏóÜÏäµÎãàÎã§."]}),s.jsxs(qe,{variant:"outline",className:"mt-4",onClick:()=>t(`/content/${n}/new`),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Ï≤´ ",C?.singularName||"Ìï≠Î™©"," ÎßåÎì§Í∏∞"]})]}),S?.totalPages>1&&s.jsxs("div",{className:"p-4 border-t flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-700",children:["Ï¥ù ",S.total,"Í∞ú Ï§ë ",20*(f-1)+1,"-",Math.min(20*f,S.total),"Í∞ú ÌëúÏãú"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>w(f-1),disabled:1===f,children:"Ïù¥Ï†Ñ"}),s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>w(f+1),disabled:f===S.totalPages,children:"Îã§Ïùå"})]})]})]})]}):s.jsx("div",{children:"ÏΩòÌÖêÏ∏† Ïú†ÌòïÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§"})},_s=()=>{const e=a(),t=cs(),{data:i=[],isLoading:n}=ds({queryKey:["acf-field-groups"],queryFn:async()=>(await Ee.api.get("/v1/acf/field-groups")).data}),r=os({mutationFn:async e=>Ee.api.delete(`/v1/acf/field-groups/${e}`),onSuccess:()=>{t.invalidateQueries({queryKey:["acf-field-groups"]}),l.success("ÌïÑÎìú Í∑∏Î£πÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),c=os({mutationFn:async e=>Ee.api.post(`/v1/acf/field-groups/${e}/duplicate`),onSuccess:()=>{t.invalidateQueries({queryKey:["acf-field-groups"]}),l.success("ÌïÑÎìú Í∑∏Î£πÏù¥ Î≥µÏ†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("Î≥µÏ†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),o=e=>{if(!e.location||0===e.location.length)return"ÏúÑÏπò ÏÑ§Ï†ï ÏóÜÏùå";const s=e.location[0]?.rules[0];if(!s)return"ÏúÑÏπò ÏÑ§Ï†ï ÏóÜÏùå";return`${{post_type:"Í≤åÏãúÎ¨º Ïú†Ìòï",page_template:"ÌéòÏù¥ÏßÄ ÌÖúÌîåÎ¶ø",post_status:"Í≤åÏãúÎ¨º ÏÉÅÌÉú",post_category:"Ïπ¥ÌÖåÍ≥†Î¶¨",taxonomy:"Î∂ÑÎ•ò",user_role:"ÏÇ¨Ïö©Ïûê Ïó≠Ìï†"}[s.param]||s.param} ${s.operator} ${s.value}`},h=e=>e.fields.reduce((e,s)=>"repeater"===s.type||"group"===s.type||"flexible_content"===s.type?e+1+(s.subFields?.length||0):e+1,0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Advanced Custom Fields"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Í≥†Í∏â Ïª§Ïä§ÌÖÄ ÌïÑÎìú Í∑∏Î£πÏùÑ ÏÉùÏÑ±ÌïòÍ≥† Í¥ÄÎ¶¨Ìï©ÎãàÎã§"})]}),s.jsxs(qe,{onClick:()=>e("/content/acf/new"),children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏÉà ÌïÑÎìú Í∑∏Î£π"]})]}),n?s.jsx("div",{className:"text-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"})}):s.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[i.map(a=>s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx(Ze,{className:"text-lg",children:a.name}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:o(a)})]}),s.jsxs(Ue,{children:[s.jsx(Ye,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(Oe,{align:"end",children:[s.jsxs(We,{onClick:()=>e(`/content/acf/${a.id}/edit`),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),s.jsxs(We,{onClick:()=>c.mutate(a.id),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),s.jsx(Ge,{}),s.jsxs(We,{onClick:()=>(e=>{confirm(`Ï†ïÎßê "${e.name}" ÌïÑÎìú Í∑∏Î£πÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)&&r.mutate(e.id)})(a),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})]})}),s.jsxs(es,{children:[a.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:a.description}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(b,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[h(a),"Í∞ú ÌïÑÎìú"]})]}),s.jsx("div",{className:"flex items-center gap-2",children:!1!==a.active?s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{className:"text-sm text-green-600",children:"ÌôúÏÑ±"})]}):s.jsxs(s.Fragment,{children:[s.jsx(f,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"text-sm text-gray-400",children:"ÎπÑÌôúÏÑ±"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(y,{className:"w-4 h-4 text-gray-500"}),s.jsxs("span",{className:"text-sm text-gray-600",children:["seamless"===a.style?"Ïã¨Î¶¨Ïä§":"Í∏∞Î≥∏"," Ïä§ÌÉÄÏùº"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(Qe,{variant:"outline",className:"text-xs",children:a.position||"normal"}),a.labelPlacement&&s.jsxs(Qe,{variant:"outline",className:"text-xs",children:["Î†àÏù¥Î∏î ","top"===a.labelPlacement?"ÏÉÅÎã®":"ÏôºÏ™Ω"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 mt-4 border-t",children:[s.jsx("span",{className:"text-xs text-gray-500",children:a.updatedAt?new Date(a.updatedAt).toLocaleDateString():""}),s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>e(`/content/acf/${a.id}/edit`),children:[s.jsx(w,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Í¥ÄÎ¶¨"]})]})]})]},a.id)),s.jsx(Je,{className:"border-dashed border-2 hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>e("/content/acf/new"),children:s.jsxs(es,{className:"flex flex-col items-center justify-center h-full min-h-[300px] text-center",children:[s.jsx("div",{className:"p-3 bg-gray-100 rounded-full mb-4",children:s.jsx(x,{className:"w-8 h-8 text-gray-600"})}),s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"ÏÉà ÌïÑÎìú Í∑∏Î£π Ï∂îÍ∞Ä"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Í≥†Í∏â Ïª§Ïä§ÌÖÄ ÌïÑÎìúÎ°ú",s.jsx("br",{}),"Îçî Í∞ïÎ†•Ìïú ÏΩòÌÖêÏ∏†Î•º ÎßåÎìúÏÑ∏Ïöî"]})]})})]})]})},Qs=[{value:"text",label:"ÌÖçÏä§Ìä∏",icon:I,category:"basic",description:"Îã®Ïùº Ìñâ ÌÖçÏä§Ìä∏ ÏûÖÎ†•"},{value:"textarea",label:"ÌÖçÏä§Ìä∏ ÏòÅÏó≠",icon:v,category:"basic",description:"Ïó¨Îü¨ Ìñâ ÌÖçÏä§Ìä∏ ÏûÖÎ†•"},{value:"number",label:"Ïà´Ïûê",icon:P,category:"basic",description:"Ïà´Ïûê ÏûÖÎ†•"},{value:"email",label:"Ïù¥Î©îÏùº",icon:E,category:"basic",description:"Ïù¥Î©îÏùº Ï£ºÏÜå ÏûÖÎ†•"},{value:"url",label:"URL",icon:q,category:"basic",description:"ÏõπÏÇ¨Ïù¥Ìä∏ Ï£ºÏÜå ÏûÖÎ†•"},{value:"wysiwyg",label:"ÏóêÎîîÌÑ∞",icon:v,category:"content",description:"WYSIWYG Î¶¨Ïπò ÌÖçÏä§Ìä∏ ÏóêÎîîÌÑ∞"},{value:"image",label:"Ïù¥ÎØ∏ÏßÄ",icon:o,category:"content",description:"Îã®Ïùº Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú"},{value:"gallery",label:"Í∞§Îü¨Î¶¨",icon:V,category:"content",description:"Ïó¨Îü¨ Ïù¥ÎØ∏ÏßÄ Í∞§Îü¨Î¶¨"},{value:"file",label:"ÌååÏùº",icon:v,category:"content",description:"ÌååÏùº ÏóÖÎ°úÎìú"},{value:"select",label:"ÏÑ†ÌÉù",icon:$,category:"choice",description:"ÎìúÎ°≠Îã§Ïö¥ ÏÑ†ÌÉù"},{value:"checkbox",label:"Ï≤¥ÌÅ¨Î∞ïÏä§",icon:z,category:"choice",description:"Îã§Ï§ë ÏÑ†ÌÉù Ï≤¥ÌÅ¨Î∞ïÏä§"},{value:"radio",label:"ÎùºÎîîÏò§",icon:L,category:"choice",description:"Îã®Ïùº ÏÑ†ÌÉù ÎùºÎîîÏò§ Î≤ÑÌäº"},{value:"button_group",label:"Î≤ÑÌäº Í∑∏Î£π",icon:R,category:"choice",description:"Î≤ÑÌäº ÌòïÌÉúÏùò ÏÑ†ÌÉù"},{value:"true_false",label:"Ï∞∏/Í±∞Ïßì",icon:z,category:"choice",description:"ÌÜ†Í∏Ä Ïä§ÏúÑÏπò"},{value:"relationship",label:"Í¥ÄÍ≥Ñ",icon:K,category:"relational",description:"Í≤åÏãúÎ¨º Í∞Ñ Í¥ÄÍ≥Ñ ÏÑ§Ï†ï"},{value:"post_object",label:"Í≤åÏãúÎ¨º ÏÑ†ÌÉù",icon:b,category:"relational",description:"Í≤åÏãúÎ¨º ÏÑ†ÌÉùÍ∏∞"},{value:"taxonomy",label:"Î∂ÑÎ•ò",icon:b,category:"relational",description:"Ïπ¥ÌÖåÍ≥†Î¶¨/ÌÉúÍ∑∏ ÏÑ†ÌÉù"},{value:"user",label:"ÏÇ¨Ïö©Ïûê",icon:B,category:"relational",description:"ÏÇ¨Ïö©Ïûê ÏÑ†ÌÉù"},{value:"repeater",label:"Î∞òÎ≥µ ÌïÑÎìú",icon:p,category:"layout",description:"Î∞òÎ≥µ Í∞ÄÎä•Ìïú ÌïÑÎìú Í∑∏Î£π"},{value:"flexible_content",label:"Ïú†Ïó∞Ìïú ÏΩòÌÖêÏ∏†",icon:_,category:"layout",description:"Ïú†Ïó∞Ìïú Î†àÏù¥ÏïÑÏõÉ Î∏îÎ°ù"},{value:"group",label:"Í∑∏Î£π",icon:y,category:"layout",description:"ÌïÑÎìú Í∑∏Î£πÌôî"},{value:"clone",label:"Î≥µÏ†ú",icon:p,category:"layout",description:"Îã§Î•∏ ÌïÑÎìú Î≥µÏ†ú"},{value:"date_picker",label:"ÎÇ†Ïßú ÏÑ†ÌÉù",icon:c,category:"advanced",description:"ÎÇ†Ïßú ÏÑ†ÌÉùÍ∏∞"},{value:"date_time_picker",label:"ÎÇ†Ïßú/ÏãúÍ∞Ñ",icon:c,category:"advanced",description:"ÎÇ†ÏßúÏôÄ ÏãúÍ∞Ñ ÏÑ†ÌÉù"},{value:"color_picker",label:"ÏÉâÏÉÅ",icon:A,category:"advanced",description:"ÏÉâÏÉÅ ÏÑ†ÌÉùÍ∏∞"},{value:"google_map",label:"Íµ¨Í∏Ä ÏßÄÎèÑ",icon:Q,category:"advanced",description:"ÏúÑÏπò ÏÑ†ÌÉù"}],Hs=({onSelect:e,selectedType:a})=>s.jsx("div",{className:"space-y-6",children:[{key:"basic",label:"Í∏∞Î≥∏ ÌïÑÎìú"},{key:"content",label:"ÏΩòÌÖêÏ∏† ÌïÑÎìú"},{key:"choice",label:"ÏÑ†ÌÉù ÌïÑÎìú"},{key:"relational",label:"Í¥ÄÍ≥Ñ ÌïÑÎìú"},{key:"layout",label:"Î†àÏù¥ÏïÑÏõÉ ÌïÑÎìú"},{key:"advanced",label:"Í≥†Í∏â ÌïÑÎìú"}].map(l=>{const t=Qs.filter(e=>e.category===l.key);return s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:l.label}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.map(l=>{const t=l.icon,i=a===l.value;return s.jsx(qe,{variant:i?"default":"outline",size:"sm",className:"justify-start h-auto py-3 px-3",onClick:()=>e(l.value),children:s.jsxs("div",{className:"flex items-start gap-3 w-full",children:[s.jsx(t,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:l.label}),s.jsx("div",{className:"text-xs text-gray-500 font-normal",children:l.description})]})]})},l.value)})})]},l.key)})}),Us=({field:e,onChange:a})=>{const l=e=>e.toLowerCase().replace(/[^a-z0-9Í∞Ä-Ìû£]+/g,"_").replace(/^_+|_+$/g,"");return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-name`,children:"ÌïÑÎìú Ïù¥Î¶Ñ"}),s.jsx(Fe,{id:`${e.id}-name`,value:e.name,onChange:s=>{return t=s.target.value,void a({...e,name:t,key:l(t),label:t});var t},placeholder:"Ïòà: Í∞ÄÍ≤©"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-key`,children:"ÌïÑÎìú ÌÇ§"}),s.jsx(Fe,{id:`${e.id}-key`,value:e.key,onChange:s=>a({...e,key:s.target.value}),placeholder:"Ïòà: price"})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-label`,children:"Î†àÏù¥Î∏î"}),s.jsx(Fe,{id:`${e.id}-label`,value:e.label,onChange:s=>a({...e,label:s.target.value}),placeholder:"Ìé∏Ïßë ÌôîÎ©¥Ïóê ÌëúÏãúÎê† Î†àÏù¥Î∏î"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-description`,children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),s.jsx(Ae,{id:`${e.id}-description`,value:e.description||"",onChange:s=>a({...e,description:s.target.value}),placeholder:"ÌïÑÎìú ÏÇ¨Ïö© Î∞©Î≤ïÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:2})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-placeholder`,children:"ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî (ÏÑ†ÌÉù)"}),s.jsx(Fe,{id:`${e.id}-placeholder`,value:e.placeholder||"",onChange:s=>a({...e,placeholder:s.target.value}),placeholder:"ÏûÖÎ†• ÌïÑÎìúÏóê ÌëúÏãúÎê† ÌûåÌä∏ ÌÖçÏä§Ìä∏"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{id:`${e.id}-required`,checked:e.required||!1,onCheckedChange:s=>a({...e,required:s})}),s.jsx(Te,{htmlFor:`${e.id}-required`,children:"ÌïÑÏàò ÌïÑÎìú"})]}),"number"===e.type&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-min`,children:"ÏµúÏÜåÍ∞í"}),s.jsx(Fe,{id:`${e.id}-min`,type:"number",value:e.min||"",onChange:s=>a({...e,min:s.target.value?parseInt(s.target.value):void 0})})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-max`,children:"ÏµúÎåÄÍ∞í"}),s.jsx(Fe,{id:`${e.id}-max`,type:"number",value:e.max||"",onChange:s=>a({...e,max:s.target.value?parseInt(s.target.value):void 0})})]})]}),("text"===e.type||"textarea"===e.type)&&s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-maxLength`,children:"ÏµúÎåÄ Í∏∏Ïù¥"}),s.jsx(Fe,{id:`${e.id}-maxLength`,type:"number",value:e.maxLength||"",onChange:s=>a({...e,maxLength:s.target.value?parseInt(s.target.value):void 0})})]}),("select"===e.type||"checkbox"===e.type||"radio"===e.type)&&s.jsxs("div",{children:[s.jsx(Te,{children:"ÏòµÏÖò"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[(e.options||[]).map((l,t)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Fe,{placeholder:"Î†àÏù¥Î∏î",value:l.label,onChange:s=>{const i=[...e.options||[]];i[t]={...l,label:s.target.value},a({...e,options:i})}}),s.jsx(Fe,{placeholder:"Í∞í",value:l.value,onChange:s=>{const i=[...e.options||[]];i[t]={...l,value:s.target.value},a({...e,options:i})}}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{const s=e.options?.filter((e,s)=>s!==t);a({...e,options:s})},children:s.jsx(g,{className:"w-4 h-4"})})]},t)),s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>{const s=[...e.options||[],{label:"",value:""}];a({...e,options:s})},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏòµÏÖò Ï∂îÍ∞Ä"]})]})]}),"image"===e.type&&s.jsxs("div",{children:[s.jsx(Te,{children:"Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï"}),s.jsx("div",{className:"space-y-2 mt-2",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-minWidth`,children:"ÏµúÏÜå ÎÑàÎπÑ (px)"}),s.jsx(Fe,{id:`${e.id}-minWidth`,type:"number",value:e.minWidth||"",onChange:s=>a({...e,minWidth:s.target.value?parseInt(s.target.value):void 0})})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-minHeight`,children:"ÏµúÏÜå ÎÜíÏù¥ (px)"}),s.jsx(Fe,{id:`${e.id}-minHeight`,type:"number",value:e.minHeight||"",onChange:s=>a({...e,minHeight:s.target.value?parseInt(s.target.value):void 0})})]})]})})]}),"wysiwyg"===e.type&&s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-rows`,children:"ÏóêÎîîÌÑ∞ Ìñâ Ïàò"}),s.jsx(Fe,{id:`${e.id}-rows`,type:"number",value:e.rows||10,onChange:s=>a({...e,rows:s.target.value?parseInt(s.target.value):10})})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:`${e.id}-defaultValue`,children:"Í∏∞Î≥∏Í∞í (ÏÑ†ÌÉù)"}),"textarea"===e.type||"wysiwyg"===e.type?s.jsx(Ae,{id:`${e.id}-defaultValue`,value:e.defaultValue||"",onChange:s=>a({...e,defaultValue:s.target.value}),placeholder:"ÌïÑÎìúÏùò Í∏∞Î≥∏Í∞í",rows:3}):"checkbox"===e.type||"true_false"===e.type?s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[s.jsx(ys,{id:`${e.id}-defaultValue`,checked:!0===e.defaultValue,onCheckedChange:s=>a({...e,defaultValue:s})}),s.jsx(Te,{htmlFor:`${e.id}-defaultValue`,children:"Í∏∞Î≥∏Ï†ÅÏúºÎ°ú Ï≤¥ÌÅ¨Îê®"})]}):s.jsx(Fe,{id:`${e.id}-defaultValue`,value:e.defaultValue||"",onChange:s=>a({...e,defaultValue:s.target.value}),placeholder:"ÌïÑÎìúÏùò Í∏∞Î≥∏Í∞í"})]})]})},Ys=({field:a,onChange:l})=>{const[t,i]=e.useState([]),n=()=>{const e={id:`field-${Date.now()}`,name:"",key:"",type:"text",label:"",required:!1};l({...a,subFields:[...a.subFields||[],e]})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"minRows",children:"ÏµúÏÜå Ìñâ Ïàò"}),s.jsx(Fe,{id:"minRows",type:"number",min:"0",value:a.minRows||"",onChange:e=>l({...a,minRows:e.target.value?parseInt(e.target.value):void 0}),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"maxRows",children:"ÏµúÎåÄ Ìñâ Ïàò"}),s.jsx(Fe,{id:"maxRows",type:"number",min:"0",value:a.maxRows||"",onChange:e=>l({...a,maxRows:e.target.value?parseInt(e.target.value):void 0}),placeholder:"Î¨¥Ï†úÌïú"})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"buttonLabel",children:"Ï∂îÍ∞Ä Î≤ÑÌäº ÌÖçÏä§Ìä∏"}),s.jsx(Fe,{id:"buttonLabel",value:a.buttonLabel||"",onChange:e=>l({...a,buttonLabel:e.target.value}),placeholder:"Ìñâ Ï∂îÍ∞Ä"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"text-sm font-medium",children:"ÌïòÏúÑ ÌïÑÎìú"}),s.jsxs(qe,{variant:"outline",size:"sm",onClick:n,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Ï∂îÍ∞Ä"]})]}),0===a.subFields?.length?s.jsx(Je,{className:"border-dashed",children:s.jsxs(es,{className:"text-center py-6",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"ÏïÑÏßÅ ÌïòÏúÑ ÌïÑÎìúÍ∞Ä ÏóÜÏäµÎãàÎã§"}),s.jsxs(qe,{variant:"outline",size:"sm",onClick:n,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Ï≤´ ÌïÑÎìú Ï∂îÍ∞Ä"]})]})}):s.jsx("div",{className:"space-y-2",children:a.subFields?.map((e,n)=>s.jsxs(Je,{children:[s.jsx(Xe,{className:"py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>{return s=e.id,void i(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"flex items-center gap-2 text-left flex-1",children:[t.includes(e.id)?s.jsx(C,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"}),s.jsx(F,{className:"w-4 h-4 text-gray-400"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:e.label||"(Ï†úÎ™© ÏóÜÏùå)"}),s.jsx(Qe,{variant:"outline",className:"text-xs",children:e.type}),e.required&&s.jsx(Qe,{variant:"destructive",className:"text-xs",children:"ÌïÑÏàò"})]}),e.key&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:e.key})]})]}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>(e=>{const s=a.subFields?.filter((s,a)=>a!==e)||[];l({...a,subFields:s})})(n),children:s.jsx(g,{className:"w-4 h-4 text-red-500"})})]})}),t.includes(e.id)&&s.jsx(es,{className:"pt-0",children:s.jsx(Us,{field:e,onChange:e=>((e,s)=>{const t=[...a.subFields||[]];t[e]=s,l({...a,subFields:t})})(n,e)})})]},e.id))})]})]})},Os=()=>{const t=a(),{id:c}=i(),d=cs(),o=!!c,[h,m]=e.useState({name:"",key:"",description:"",position:"normal",style:"default",labelPlacement:"top",instructionPlacement:"label",active:!0,showInRest:!0,fields:[],location:[{rules:[{param:"post_type",operator:"==",value:"post"}],operator:"AND"}]}),[u,j]=e.useState([]),[p,v]=e.useState(!1),[y,N]=e.useState(null),[b,f]=e.useState("text"),{data:w,isLoading:I}=ds({queryKey:["acf-field-group",c],queryFn:async()=>(await Ee.api.get(`/acf/field-groups/${c}`)).data,enabled:o}),P=os({mutationFn:async e=>(await Ee.api.post("/acf/field-groups",e)).data,onSuccess:()=>{l.success("ÌïÑÎìú Í∑∏Î£πÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§"),d.invalidateQueries({queryKey:["acf-field-groups"]}),t("/content/acf")},onError:()=>{l.error("ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),$=os({mutationFn:async e=>(await Ee.api.put(`/acf/field-groups/${c}`,e)).data,onSuccess:()=>{l.success("ÌïÑÎìú Í∑∏Î£πÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),d.invalidateQueries({queryKey:["acf-field-groups"]}),d.invalidateQueries({queryKey:["acf-field-group",c]})},onError:()=>{l.error("ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}});e.useEffect(()=>{w&&(m(w),j(w.fields.map(e=>e.id)))},[w]);const z=()=>{N(null),f("text"),v(!0)};return o&&I?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsxs(qe,{variant:"ghost",size:"sm",onClick:()=>t("/content/acf"),children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),"ACF Î™©Î°ù"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o?"ÌïÑÎìú Í∑∏Î£π ÏàòÏ†ï":"ÏÉà ÌïÑÎìú Í∑∏Î£π"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(Je,{children:[s.jsxs(Xe,{children:[s.jsx(Ze,{children:"Í∏∞Î≥∏ Ï†ïÎ≥¥"}),s.jsx(ss,{children:"ÌïÑÎìú Í∑∏Î£πÏùò Í∏∞Î≥∏ Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî"})]}),s.jsxs(es,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"name",children:"ÌïÑÎìú Í∑∏Î£π Ïù¥Î¶Ñ"}),s.jsx(Fe,{id:"name",value:h.name,onChange:e=>{return m({...h,name:e.target.value,key:(s=e.target.value,s.toLowerCase().replace(/[^a-z0-9Í∞Ä-Ìû£]+/g,"_").replace(/^_+|_+$/g,""))});var s},placeholder:"Ïòà: Ï†úÌíà Ï†ïÎ≥¥",required:!0})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"key",children:"ÌïÑÎìú Í∑∏Î£π ÌÇ§"}),s.jsx(Fe,{id:"key",value:h.key,onChange:e=>m({...h,key:e.target.value}),placeholder:"Ïòà: product_info",required:!0})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"description",children:"ÏÑ§Î™Ö (ÏÑ†ÌÉù)"}),s.jsx(Ae,{id:"description",value:h.description,onChange:e=>m({...h,description:e.target.value}),placeholder:"Ïù¥ ÌïÑÎìú Í∑∏Î£πÏóê ÎåÄÌïú ÏÑ§Î™Ö",rows:3})]})]})]}),s.jsxs(Je,{children:[s.jsxs(Xe,{children:[s.jsx(Ze,{children:"ÌïÑÎìú"}),s.jsx(ss,{children:"Ïù¥ Í∑∏Î£πÏóê Ìè¨Ìï®Îê† ÌïÑÎìúÎì§ÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})]}),s.jsx(es,{children:0===h.fields?.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"ÏïÑÏßÅ ÌïÑÎìúÍ∞Ä ÏóÜÏäµÎãàÎã§"}),s.jsxs(qe,{onClick:z,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Ï≤´ ÌïÑÎìú Ï∂îÍ∞Ä"]})]}):s.jsxs("div",{className:"space-y-4",children:[h.fields?.map(e=>s.jsxs(Je,{children:[s.jsx(Xe,{className:"py-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>{return s=e.id,void j(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"flex items-center gap-2 text-left flex-1",children:[u.includes(e.id)?s.jsx(C,{className:"w-4 h-4"}):s.jsx(S,{className:"w-4 h-4"}),s.jsx(F,{className:"w-5 h-5 text-gray-400 cursor-move"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:e.label}),s.jsx(Qe,{variant:"outline",className:"text-xs",children:e.type}),e.required&&s.jsx(Qe,{variant:"destructive",className:"text-xs",children:"ÌïÑÏàò"})]}),s.jsx("div",{className:"text-sm text-gray-500",children:e.key})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>(e=>{N(e),f(e.type),v(!0)})(e),children:s.jsx(k,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"ghost",size:"sm",onClick:()=>{return s=e.id,void(confirm("Ï†ïÎßê Ïù¥ ÌïÑÎìúÎ•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")&&m({...h,fields:h.fields?.filter(e=>e.id!==s)||[]}));var s},children:s.jsx(g,{className:"w-4 h-4 text-red-500"})})]})]})}),u.includes(e.id)&&s.jsx(es,{className:"pt-0",children:s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.description&&s.jsx("p",{children:e.description}),e.placeholder&&s.jsxs("p",{children:["ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî: ",e.placeholder]}),e.defaultValue&&s.jsxs("p",{children:["Í∏∞Î≥∏Í∞í: ",e.defaultValue]})]})})]},e.id)),s.jsxs(qe,{variant:"outline",className:"w-full",onClick:z,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÌïÑÎìú Ï∂îÍ∞Ä"]})]})})]}),s.jsxs(Je,{children:[s.jsxs(Xe,{children:[s.jsx(Ze,{children:"ÏúÑÏπò Í∑úÏπô"}),s.jsx(ss,{children:"Ïù¥ ÌïÑÎìú Í∑∏Î£πÏù¥ ÌëúÏãúÎê† ÏúÑÏπòÎ•º ÏÑ§Ï†ïÌïòÏÑ∏Ïöî"})]}),s.jsx(es,{children:s.jsxs("div",{className:"space-y-4",children:[h.location?.map((e,a)=>s.jsx("div",{className:"p-4 border rounded-lg",children:e.rules.map((e,l)=>s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsxs(Ie,{value:e.param,onValueChange:e=>{const s=[...h.location||[]];s[a].rules[l].param=e,m({...h,location:s})},children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"post_type",children:"Í≤åÏãúÎ¨º Ïú†Ìòï"}),s.jsx(Le,{value:"page_template",children:"ÌéòÏù¥ÏßÄ ÌÖúÌîåÎ¶ø"}),s.jsx(Le,{value:"post_status",children:"Í≤åÏãúÎ¨º ÏÉÅÌÉú"}),s.jsx(Le,{value:"post_category",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),s.jsx(Le,{value:"taxonomy",children:"Î∂ÑÎ•ò"}),s.jsx(Le,{value:"user_role",children:"ÏÇ¨Ïö©Ïûê Ïó≠Ìï†"})]})]}),s.jsxs(Ie,{value:e.operator,onValueChange:e=>{const s=[...h.location||[]];s[a].rules[l].operator=e,m({...h,location:s})},children:[s.jsx(Pe,{className:"w-[100px]",children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"==",children:"Í∞ôÏùå"}),s.jsx(Le,{value:"!=",children:"Í∞ôÏßÄ ÏïäÏùå"})]})]}),s.jsx(Fe,{value:e.value,onChange:e=>{const s=[...h.location||[]];s[a].rules[l].value=e.target.value,m({...h,location:s})},placeholder:"Í∞í",className:"flex-1"})]},l))},a)),s.jsxs(qe,{variant:"outline",size:"sm",onClick:()=>{m({...h,location:[...h.location||[],{rules:[{param:"post_type",operator:"==",value:""}],operator:"AND"}]})},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Í∑úÏπô Ï∂îÍ∞Ä"]})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"ÏÉÅÌÉú"})}),s.jsxs(es,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{htmlFor:"active",children:"ÌôúÏÑ±Ìôî"}),s.jsx(ys,{id:"active",checked:h.active,onCheckedChange:e=>m({...h,active:e})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{htmlFor:"showInRest",children:"REST API ÌëúÏãú"}),s.jsx(ys,{id:"showInRest",checked:h.showInRest,onCheckedChange:e=>m({...h,showInRest:e})})]})]})]}),s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"ÌëúÏãú ÏÑ§Ï†ï"})}),s.jsxs(es,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"position",children:"ÏúÑÏπò"}),s.jsxs(Ie,{value:h.position,onValueChange:e=>m({...h,position:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"normal",children:"ÏùºÎ∞ò"}),s.jsx(Le,{value:"side",children:"ÏÇ¨Ïù¥ÎìúÎ∞î"}),s.jsx(Le,{value:"advanced",children:"Í≥†Í∏â"})]})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"style",children:"Ïä§ÌÉÄÏùº"}),s.jsxs(Ie,{value:h.style,onValueChange:e=>m({...h,style:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"default",children:"Í∏∞Î≥∏"}),s.jsx(Le,{value:"seamless",children:"Ïã¨Î¶¨Ïä§"})]})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"labelPlacement",children:"Î†àÏù¥Î∏î ÏúÑÏπò"}),s.jsxs(Ie,{value:h.labelPlacement,onValueChange:e=>m({...h,labelPlacement:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"top",children:"ÏÉÅÎã®"}),s.jsx(Le,{value:"left",children:"ÏôºÏ™Ω"})]})]})]})]})]}),s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"ÏûëÏóÖ"})}),s.jsx(es,{className:"space-y-3",children:s.jsxs(qe,{onClick:()=>{o?$.mutate(h):P.mutate(h)},className:"w-full",disabled:!h.name||!h.key||P.isPending||$.isPending,children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),o?"ÌïÑÎìú Í∑∏Î£π ÏàòÏ†ï":"ÌïÑÎìú Í∑∏Î£π ÏÉùÏÑ±"]})})]})]})]}),s.jsx(as,{open:p,onOpenChange:v,children:s.jsxs(ls,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[s.jsxs(ts,{children:[s.jsx(is,{children:y?"ÌïÑÎìú ÏàòÏ†ï":"ÏÉà ÌïÑÎìú"}),s.jsx(ns,{children:"ÌïÑÎìú Ïú†ÌòïÏùÑ ÏÑ†ÌÉùÌïòÍ≥† ÏÑ§Ï†ïÏùÑ Íµ¨ÏÑ±ÌïòÏÑ∏Ïöî"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 py-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-3",children:"ÌïÑÎìú Ïú†Ìòï"}),s.jsx(Hs,{selectedType:b,onSelect:f})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium mb-3",children:"ÌïÑÎìú ÏÑ§Ï†ï"}),"repeater"===b?s.jsx(Ys,{field:y||{id:"",name:"",key:"",type:"repeater",label:"",required:!1,subFields:[]},onChange:()=>{}}):s.jsx(Us,{field:y||{id:"",name:"",key:"",type:b,label:"",required:!1},onChange:()=>{}})]})]}),s.jsxs(rs,{children:[s.jsx(qe,{variant:"outline",onClick:()=>v(!1),children:"Ï∑®ÏÜå"}),s.jsx(qe,{onClick:()=>{(e=>{const s={...e,id:y?.id||`field-${Date.now()}`};m(y?{...h,fields:h.fields?.map(e=>e.id===y.id?s:e)||[]}:{...h,fields:[...h.fields||[],s]}),v(!1)})({id:y?.id||"",name:y?.name||"",key:y?.key||"",type:b,label:y?.label||"",required:!1})},children:"Ï†ÄÏû•"})]})]})})]})},Ws=[{type:"hero",name:"Hero Section",icon:s.jsx(o,{className:"w-5 h-5"}),category:"Basic",description:"ÎåÄÌòï Î∞∞ÎÑàÏôÄ CTA Î≤ÑÌäºÏù¥ ÏûàÎäî ÌûàÏñ¥Î°ú ÏÑπÏÖò"},{type:"heading",name:"Heading",icon:s.jsx(I,{className:"w-5 h-5"}),category:"Basic",description:"Ï†úÎ™© ÌÖçÏä§Ìä∏ (H1-H6)"},{type:"paragraph",name:"Paragraph",icon:s.jsx(I,{className:"w-5 h-5"}),category:"Basic",description:"ÏùºÎ∞ò ÌÖçÏä§Ìä∏ Îã®ÎùΩ"},{type:"button",name:"Button",icon:s.jsx(H,{className:"w-5 h-5"}),category:"Basic",description:"ÌÅ¥Î¶≠ Í∞ÄÎä•Ìïú Î≤ÑÌäº"},{type:"spacer",name:"Spacer",icon:s.jsx(U,{className:"w-5 h-5"}),category:"Basic",description:"Í≥µÎ∞± ÏòÅÏó≠"},{type:"divider",name:"Divider",icon:s.jsx(U,{className:"w-5 h-5"}),category:"Basic",description:"Íµ¨Î∂ÑÏÑ†"},{type:"image",name:"Image",icon:s.jsx(o,{className:"w-5 h-5"}),category:"Media",description:"Îã®Ïùº Ïù¥ÎØ∏ÏßÄ"},{type:"video",name:"Video",icon:s.jsx(Y,{className:"w-5 h-5"}),category:"Media",description:"ÎπÑÎîîÏò§ ÌîåÎ†àÏù¥Ïñ¥"},{type:"gallery",name:"Gallery",icon:s.jsx(o,{className:"w-5 h-5"}),category:"Media",description:"Ïù¥ÎØ∏ÏßÄ Í∞§Îü¨Î¶¨"},{type:"carousel",name:"Carousel",icon:s.jsx(O,{className:"w-5 h-5"}),category:"Media",description:"Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îçî"},{type:"columns",name:"Columns",icon:s.jsx(W,{className:"w-5 h-5"}),category:"Layout",description:"Îã§Îã® Î†àÏù¥ÏïÑÏõÉ"},{type:"card",name:"Card",icon:s.jsx(G,{className:"w-5 h-5"}),category:"Layout",description:"Ïπ¥Îìú Ïª®ÌÖåÏù¥ÎÑà"},{type:"list",name:"List",icon:s.jsx($,{className:"w-5 h-5"}),category:"Content",description:"ÏàúÏÑú ÏûàÎäî/ÏóÜÎäî Î™©Î°ù"},{type:"quote",name:"Quote",icon:s.jsx(J,{className:"w-5 h-5"}),category:"Content",description:"Ïù∏Ïö©Î¨∏"},{type:"code",name:"Code",icon:s.jsx(X,{className:"w-5 h-5"}),category:"Content",description:"ÏΩîÎìú Î∏îÎ°ù"},{type:"testimonial",name:"Testimonial",icon:s.jsx(Z,{className:"w-5 h-5"}),category:"Content",description:"Í≥†Í∞ù ÌõÑÍ∏∞"},{type:"faq",name:"FAQ",icon:s.jsx(ee,{className:"w-5 h-5"}),category:"Content",description:"ÏûêÏ£º Î¨ªÎäî ÏßàÎ¨∏"},{type:"contact-form",name:"Contact Form",icon:s.jsx(E,{className:"w-5 h-5"}),category:"Interactive",description:"Ïó∞ÎùΩÏ≤ò Ìèº"},{type:"newsletter",name:"Newsletter",icon:s.jsx(E,{className:"w-5 h-5"}),category:"Interactive",description:"Îâ¥Ïä§Î†àÌÑ∞ Íµ¨ÎèÖ Ìèº"},{type:"social-media",name:"Social Media",icon:s.jsx(se,{className:"w-5 h-5"}),category:"Interactive",description:"ÏÜåÏÖú ÎØ∏ÎîîÏñ¥ ÎßÅÌÅ¨"},{type:"map",name:"Map",icon:s.jsx(Q,{className:"w-5 h-5"}),category:"Interactive",description:"ÏßÄÎèÑ"},{type:"pricing-table",name:"Pricing Table",icon:s.jsx(G,{className:"w-5 h-5"}),category:"Advanced",description:"Í∞ÄÍ≤©Ìëú"},{type:"countdown",name:"Countdown",icon:s.jsx(ae,{className:"w-5 h-5"}),category:"Advanced",description:"Ïπ¥Ïö¥Ìä∏Îã§Ïö¥ ÌÉÄÏù¥Î®∏"},{type:"progress-bar",name:"Progress Bar",icon:s.jsx(le,{className:"w-5 h-5"}),category:"Advanced",description:"ÏßÑÌñâÎ•† Î∞î"}],Gs=["Basic","Media","Layout","Content","Interactive","Advanced"],Js=({onAddBlock:a})=>{const[l,t]=e.useState("Basic"),i=Ws.filter(e=>e.category===l);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"space-y-2",children:Gs.map(e=>s.jsx("button",{onClick:()=>t(e),className:"w-full text-left px-3 py-2 rounded-md text-sm transition-colors "+(l===e?"bg-blue-100 text-blue-900 font-medium":"text-gray-600 hover:bg-gray-100"),children:e},e))}),s.jsx("div",{className:"space-y-2",children:i.map(e=>s.jsx("div",{className:"border rounded-lg p-3 hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-all group",onClick:()=>a(e.type),children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center group-hover:bg-blue-100 transition-colors",children:e.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-sm text-gray-900 group-hover:text-blue-900",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed",children:e.description})]})]})},e.type))}),s.jsxs("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-sm text-gray-900 mb-2",children:"üí° ÏÇ¨Ïö© ÌåÅ"}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[s.jsx("li",{children:"‚Ä¢ Î∏îÎ°ùÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ Ï∫îÎ≤ÑÏä§Ïóê Ï∂îÍ∞Ä"}),s.jsx("li",{children:"‚Ä¢ ÎìúÎûòÍ∑∏ÌïòÏó¨ ÏàúÏÑú Î≥ÄÍ≤Ω"}),s.jsx("li",{children:"‚Ä¢ Ïò§Î•∏Ï™Ω Ìå®ÎÑêÏóêÏÑú ÏÉÅÏÑ∏ ÏÑ§Ï†ï"}),s.jsx("li",{children:"‚Ä¢ Î≥µÏÇ¨/Î∂ôÏó¨ÎÑ£Í∏∞Î°ú Îπ†Î•∏ Î≥µÏ†ú"})]})]})]})},Xs=e.forwardRef(({className:a,value:l,defaultValue:t=[0],onValueChange:i,min:n=0,max:r=100,step:c=1,disabled:d},o)=>{const[x,h]=e.useState(t),m=(l??x)[0]??0,u=e.useRef(null),j=e.useRef(!1),p=e=>{const s=Math.min(Math.max(e,n),r),a=[Math.round(s/c)*c];void 0===l&&h(a),i?.(a)},g=e=>{if(!u.current)return;const s=u.current.getBoundingClientRect();return(e-s.left)/s.width*(r-n)+n},v=e=>{if(d)return;j.current=!0;const s=g(e.clientX);void 0!==s&&p(s)};e.useEffect(()=>{const e=e=>{if(!j.current||d)return;const s=g(e.clientX);void 0!==s&&p(s)},s=()=>{j.current=!1};if(j.current)return document.addEventListener("mousemove",e),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",s)}},[d,p,r,n]);const y=(m-n)/(r-n)*100;return s.jsxs("div",{ref:o,className:He("relative flex w-full touch-none select-none items-center",d&&"opacity-50 cursor-not-allowed",a),children:[s.jsx("div",{ref:u,className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary cursor-pointer",onMouseDown:v,children:s.jsx("div",{className:"absolute h-full bg-primary transition-none",style:{width:`${y}%`}})}),s.jsx("div",{className:He("absolute h-5 w-5 rounded-full border-2 border-primary bg-background","ring-offset-background transition-colors","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",d&&"pointer-events-none",!d&&"cursor-grab active:cursor-grabbing"),style:{left:`${y}%`,transform:"translateX(-50%)"},onMouseDown:v,children:s.jsx("input",{type:"range",value:m,min:n,max:r,step:c,disabled:d,className:"sr-only",onChange:e=>p(Number(e.target.value))})})]})});Xs.displayName="Slider";const Zs=({block:a,onChange:l})=>{const[t,i]=e.useState("desktop"),n=(e,s)=>{l({content:{...a.content,[e]:s}})},r=(e,s,t)=>{const i=a.settings;l({settings:{...a.settings,[e]:{...i[e]||{},[s]:t}}})},c=({label:e,value:a,onChange:l})=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(Te,{className:"text-sm",children:e}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"color",value:a||"#000000",onChange:e=>l(e.target.value),className:"w-8 h-8 rounded border cursor-pointer"}),s.jsx(Fe,{value:a||"",onChange:e=>l(e.target.value),placeholder:"#000000",className:"flex-1"})]})]}),d=({label:e,value:a={},onChange:l})=>s.jsxs(Je,{children:[s.jsx(Xe,{className:"pb-3",children:s.jsx(Ze,{className:"text-sm",children:e})}),s.jsx(es,{className:"space-y-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-xs",children:"Top"}),s.jsx(Fe,{value:a.top||"",onChange:e=>l({...a,top:e.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),s.jsxs("div",{children:[s.jsx(Te,{className:"text-xs",children:"Right"}),s.jsx(Fe,{value:a.right||"",onChange:e=>l({...a,right:e.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),s.jsxs("div",{children:[s.jsx(Te,{className:"text-xs",children:"Bottom"}),s.jsx(Fe,{value:a.bottom||"",onChange:e=>l({...a,bottom:e.target.value}),placeholder:"0px",className:"text-xs h-8"})]}),s.jsxs("div",{children:[s.jsx(Te,{className:"text-xs",children:"Left"}),s.jsx(Fe,{value:a.left||"",onChange:e=>l({...a,left:e.target.value}),placeholder:"0px",className:"text-xs h-8"})]})]})})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"pb-4 border-b",children:[s.jsx("h3",{className:"font-semibold text-lg capitalize",children:a.type}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Î∏îÎ°ù ID: ",a.id]})]}),s.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[s.jsx(qe,{size:"sm",variant:"desktop"===t?"default":"ghost",onClick:()=>i("desktop"),children:s.jsx(te,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"tablet"===t?"default":"ghost",onClick:()=>i("tablet"),children:s.jsx(ie,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"mobile"===t?"default":"ghost",onClick:()=>i("mobile"),children:s.jsx(ne,{className:"w-4 h-4"})})]}),s.jsxs(Re,{defaultValue:"content",className:"w-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-3",children:[s.jsx(Be,{value:"content",children:"ÎÇ¥Ïö©"}),s.jsx(Be,{value:"design",children:"ÎîîÏûêÏù∏"}),s.jsx(Be,{value:"advanced",children:"Í≥†Í∏â"})]}),s.jsx(_e,{value:"content",className:"space-y-4",children:(()=>{switch(a.type){case"hero":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Ï†úÎ™©"}),s.jsx(Fe,{value:a.content.title||"",onChange:e=>n("title",e.target.value),placeholder:"Hero Ï†úÎ™©"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Î∂ÄÏ†úÎ™©"}),s.jsx(Fe,{value:a.content.subtitle||"",onChange:e=>n("subtitle",e.target.value),placeholder:"Hero Î∂ÄÏ†úÎ™©"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ"}),s.jsx(Fe,{value:a.content.backgroundImage||"",onChange:e=>n("backgroundImage",e.target.value),placeholder:"Ïù¥ÎØ∏ÏßÄ URL"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Î≤ÑÌäº"}),(a.content.buttons||[]).map((e,l)=>s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx(Fe,{value:String(e.text||""),onChange:s=>{const t=[...a.content.buttons||[]];t[l]={...e,text:s.target.value},n("buttons",t)},placeholder:"Î≤ÑÌäº ÌÖçÏä§Ìä∏"}),s.jsx(Fe,{value:String(e.url||""),onChange:s=>{const t=[...a.content.buttons||[]];t[l]={...e,url:s.target.value},n("buttons",t)},placeholder:"URL"}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:()=>{const e=(a.content.buttons||[]).filter((e,s)=>s!==l);n("buttons",e)},children:s.jsx(g,{className:"w-4 h-4"})})]},l)),s.jsxs(qe,{size:"sm",variant:"outline",onClick:()=>{const e=[...a.content.buttons||[],{text:"Î≤ÑÌäº",url:"#",style:"primary"}];n("buttons",e)},className:"mt-2",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Î≤ÑÌäº Ï∂îÍ∞Ä"]})]})]});case"heading":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"ÌÖçÏä§Ìä∏"}),s.jsx(Fe,{value:a.content.text||"",onChange:e=>n("text",e.target.value),placeholder:"Ï†úÎ™© ÌÖçÏä§Ìä∏"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Î†àÎ≤®"}),s.jsxs(Ie,{value:a.content.level?.toString()||"2",onValueChange:e=>n("level",parseInt(e)),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"1",children:"H1"}),s.jsx(Le,{value:"2",children:"H2"}),s.jsx(Le,{value:"3",children:"H3"}),s.jsx(Le,{value:"4",children:"H4"}),s.jsx(Le,{value:"5",children:"H5"}),s.jsx(Le,{value:"6",children:"H6"})]})]})]})]});case"paragraph":return s.jsxs("div",{children:[s.jsx(Te,{children:"ÌÖçÏä§Ìä∏"}),s.jsx(Ae,{value:a.content.text||"",onChange:e=>n("text",e.target.value),placeholder:"Îã®ÎùΩ ÌÖçÏä§Ìä∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:4})]});case"image":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Ïù¥ÎØ∏ÏßÄ URL"}),s.jsx(Fe,{value:a.content.src||"",onChange:e=>n("src",e.target.value),placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÎåÄÏ≤¥ ÌÖçÏä§Ìä∏"}),s.jsx(Fe,{value:a.content.alt||"",onChange:e=>n("alt",e.target.value),placeholder:"Ïù¥ÎØ∏ÏßÄ ÏÑ§Î™Ö"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Ï∫°ÏÖò"}),s.jsx(Fe,{value:a.content.caption||"",onChange:e=>n("caption",e.target.value),placeholder:"Ïù¥ÎØ∏ÏßÄ Ï∫°ÏÖò"})]})]});case"button":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"ÌÖçÏä§Ìä∏"}),s.jsx(Fe,{value:a.content.text||"",onChange:e=>n("text",e.target.value),placeholder:"Î≤ÑÌäº ÌÖçÏä§Ìä∏"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"URL"}),s.jsx(Fe,{value:a.content.url||"",onChange:e=>n("url",e.target.value),placeholder:"https://example.com"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Ïä§ÌÉÄÏùº"}),s.jsxs(Ie,{value:a.content.style||"primary",onValueChange:e=>n("style",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"primary",children:"Primary"}),s.jsx(Le,{value:"secondary",children:"Secondary"}),s.jsx(Le,{value:"outline",children:"Outline"}),s.jsx(Le,{value:"ghost",children:"Ghost"})]})]})]})]});case"columns":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Ïª¨Îüº Ïàò"}),s.jsxs(Ie,{value:(a.content.columns?.length||2).toString(),onValueChange:e=>{const s=parseInt(e),l=Array.from({length:s},(e,s)=>a.content.columns?.[s]||{content:""});n("columns",l)},children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"1",children:"1 Ïª¨Îüº"}),s.jsx(Le,{value:"2",children:"2 Ïª¨Îüº"}),s.jsx(Le,{value:"3",children:"3 Ïª¨Îüº"}),s.jsx(Le,{value:"4",children:"4 Ïª¨Îüº"})]})]})]}),(a.content.columns||[]).map((e,l)=>s.jsxs("div",{children:[s.jsxs(Te,{children:["Ïª¨Îüº ",l+1," ÎÇ¥Ïö©"]}),s.jsx(Ae,{value:String(e.content||""),onChange:s=>{const t=[...a.content.columns||[]];t[l]={...e,content:s.target.value},n("columns",t)},placeholder:`Ïª¨Îüº ${l+1} ÎÇ¥Ïö©`,rows:3})]},l))]});default:return s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(k,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{children:"Ïù¥ Î∏îÎ°ù ÌÉÄÏûÖÏóê ÎåÄÌïú Ìé∏ÏßëÍ∏∞Í∞Ä Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§."})]})}})()}),s.jsxs(_e,{value:"design",className:"space-y-4",children:[s.jsx(d,{label:"Ïó¨Î∞± (Margin)",value:a.settings.margin||{},onChange:e=>l({settings:{...a.settings,margin:e}})}),s.jsx(d,{label:"Ìå®Îî© (Padding)",value:a.settings.padding||{},onChange:e=>l({settings:{...a.settings,padding:e}})}),s.jsxs(Je,{children:[s.jsx(Xe,{className:"pb-3",children:s.jsx(Ze,{className:"text-sm",children:"Î∞∞Í≤Ω"})}),s.jsxs(es,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"ÌÉÄÏûÖ"}),s.jsxs(Ie,{value:a.settings.background?.type||"none",onValueChange:e=>r("background","type",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"none",children:"ÏóÜÏùå"}),s.jsx(Le,{value:"color",children:"ÏÉâÏÉÅ"}),s.jsx(Le,{value:"gradient",children:"Í∑∏ÎùºÎîîÏñ∏Ìä∏"}),s.jsx(Le,{value:"image",children:"Ïù¥ÎØ∏ÏßÄ"})]})]})]}),"color"===a.settings.background?.type&&s.jsx(c,{label:"Î∞∞Í≤Ω ÏÉâÏÉÅ",value:a.settings.background?.color||"",onChange:e=>r("background","color",e)}),"image"===a.settings.background?.type&&s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"Ïù¥ÎØ∏ÏßÄ URL"}),s.jsx(Fe,{value:a.settings.background?.image?.url||"",onChange:e=>r("background","image",{...a.settings.background?.image,url:e.target.value}),placeholder:"https://example.com/bg.jpg"})]})]})]}),s.jsxs(Je,{children:[s.jsx(Xe,{className:"pb-3",children:s.jsx(Ze,{className:"text-sm",children:"ÌÖåÎëêÎ¶¨"})}),s.jsxs(es,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"ÎëêÍªò"}),s.jsx(Fe,{value:a.settings.border?.width||"",onChange:e=>r("border","width",e.target.value),placeholder:"1px"})]}),s.jsx(c,{label:"ÏÉâÏÉÅ",value:a.settings.border?.color||"",onChange:e=>r("border","color",e)}),s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"Îë•Í∑º Î™®ÏÑúÎ¶¨"}),s.jsx(Fe,{value:a.settings.border?.radius||"",onChange:e=>r("border","radius",e.target.value),placeholder:"4px"})]})]})]})]}),s.jsxs(_e,{value:"advanced",className:"space-y-4",children:[s.jsxs(Je,{children:[s.jsx(Xe,{className:"pb-3",children:s.jsx(Ze,{className:"text-sm",children:"Ïï†ÎãàÎ©îÏù¥ÏÖò"})}),s.jsxs(es,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"ÌÉÄÏûÖ"}),s.jsxs(Ie,{value:a.settings.animation?.type||"none",onValueChange:e=>r("animation","type",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"none",children:"ÏóÜÏùå"}),s.jsx(Le,{value:"fade",children:"ÌéòÏù¥Îìú"}),s.jsx(Le,{value:"slide",children:"Ïä¨ÎùºÏù¥Îìú"}),s.jsx(Le,{value:"zoom",children:"Ï§å"}),s.jsx(Le,{value:"bounce",children:"Î∞îÏö¥Ïä§"})]})]})]}),"none"!==a.settings.animation?.type&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"ÏßÄÏÜçÏãúÍ∞Ñ (ms)"}),s.jsx(Xs,{value:[a.settings.animation?.duration||300],onValueChange:([e])=>r("animation","duration",e),max:2e3,min:100,step:100}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.settings.animation?.duration||300,"ms"]})]}),s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"ÏßÄÏó∞ÏãúÍ∞Ñ (ms)"}),s.jsx(Xs,{value:[a.settings.animation?.delay||0],onValueChange:([e])=>r("animation","delay",e),max:2e3,min:0,step:100}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[a.settings.animation?.delay||0,"ms"]})]})]})]})]}),s.jsxs(Je,{children:[s.jsx(Xe,{className:"pb-3",children:s.jsx(Ze,{className:"text-sm",children:"ÌëúÏãú ÏÑ§Ï†ï"})}),s.jsxs(es,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{className:"text-sm",children:"Îç∞Ïä§ÌÅ¨ÌÜ±ÏóêÏÑú ÌëúÏãú"}),s.jsx(ys,{checked:!1!==a.settings.visibility?.desktop,onCheckedChange:e=>r("visibility","desktop",e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{className:"text-sm",children:"ÌÉúÎ∏îÎ¶øÏóêÏÑú ÌëúÏãú"}),s.jsx(ys,{checked:!1!==a.settings.visibility?.tablet,onCheckedChange:e=>r("visibility","tablet",e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{className:"text-sm",children:"Î™®Î∞îÏùºÏóêÏÑú ÌëúÏãú"}),s.jsx(ys,{checked:!1!==a.settings.visibility?.mobile,onCheckedChange:e=>r("visibility","mobile",e)})]})]})]})]})]})]})},ea=({block:a,isSelected:l,isPreview:t,onSelect:i,onAddBlock:n,onDelete:r,onDuplicate:c,onMove:d})=>{const o=()=>{const{settings:e}=a,s={};if(e.margin&&(s.marginTop=e.margin.top||"0",s.marginRight=e.margin.right||"0",s.marginBottom=e.margin.bottom||"0",s.marginLeft=e.margin.left||"0"),e.padding&&(s.paddingTop=e.padding.top||"0",s.paddingRight=e.padding.right||"0",s.paddingBottom=e.padding.bottom||"0",s.paddingLeft=e.padding.left||"0"),e.background)switch(e.background.type){case"color":s.backgroundColor=e.background.color;break;case"image":e.background.image?.url&&(s.backgroundImage=`url(${e.background.image.url})`,s.backgroundPosition=e.background.image.position||"center",s.backgroundRepeat=e.background.image.repeat||"no-repeat",s.backgroundSize=e.background.image.size||"cover");break;case"gradient":if(e.background.gradient){const{colors:a,direction:l="45deg"}=e.background.gradient;s.background=`linear-gradient(${l}, ${a?.join(", ")||""})`}}return e.border&&(e.border.width&&(s.borderWidth=e.border.width),e.border.color&&(s.borderColor=e.border.color),e.border.style&&(s.borderStyle=e.border.style),e.border.radius&&(s.borderRadius=e.border.radius)),s},h=()=>{switch(a.type){case"hero":return s.jsxs("div",{className:"hero-section relative overflow-hidden",style:{minHeight:"400px"},children:[a.content.backgroundImage&&s.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${a.content.backgroundImage})`}}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center h-full text-center p-8",children:[a.content.title&&s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4 text-white",children:a.content.title}),a.content.subtitle&&s.jsx("p",{className:"text-xl md:text-2xl mb-8 text-white/90",children:a.content.subtitle}),a.content.buttons&&s.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:a.content.buttons.map((e,a)=>s.jsx("button",{className:"px-6 py-3 rounded-lg font-medium transition-colors "+("primary"===e.style?"bg-blue-600 text-white hover:bg-blue-700":"bg-white text-gray-900 hover:bg-gray-100"),children:String(e.text)},a))})]})]});case"heading":const l=a.content.level||2,t="font-bold "+(1===l?"text-4xl":2===l?"text-3xl":3===l?"text-2xl":4===l?"text-xl":5===l?"text-lg":"text-base");return e.createElement(`h${l}`,{className:t},a.content.text||"Heading Text");case"paragraph":return s.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.content.text||"Enter your paragraph text here..."});case"image":return s.jsxs("div",{className:"text-center",children:[a.content.src?s.jsx("img",{src:a.content.src,alt:a.content.alt||"",className:"max-w-full h-auto rounded-lg"}):s.jsx("div",{className:"bg-gray-200 border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:s.jsxs("div",{className:"text-gray-500",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{children:"Ïù¥ÎØ∏ÏßÄÎ•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})]})}),a.content.caption&&s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:a.content.caption})]});case"video":return s.jsx("div",{className:"text-center",children:a.content.src?s.jsxs("video",{controls:!0,className:"max-w-full h-auto rounded-lg",poster:a.content.poster,children:[s.jsx("source",{src:a.content.src}),"Your browser does not support the video tag."]}):s.jsx("div",{className:"bg-gray-200 border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:s.jsxs("div",{className:"text-gray-500",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),s.jsx("p",{children:"ÎπÑÎîîÏò§Î•º Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})]})})});case"button":return s.jsx("div",{className:"text-center",children:s.jsx("button",{className:"px-6 py-3 rounded-lg font-medium transition-colors "+("primary"===a.content.style?"bg-blue-600 text-white hover:bg-blue-700":"secondary"===a.content.style?"bg-gray-600 text-white hover:bg-gray-700":"outline"===a.content.style?"border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white":"text-blue-600 hover:text-blue-700"),children:a.content.text||"Button Text"})});case"columns":const i=a.content.columns?.length||2;return s.jsx("div",{className:`grid grid-cols-1 md:grid-cols-${i} gap-6`,children:(a.content.columns||[]).map((e,a)=>s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg min-h-[100px]",children:e.content?s.jsx("div",{className:"prose prose-sm",children:String(e.content||"").split("\n").map((e,a)=>s.jsx("p",{children:e},a))}):s.jsx("div",{className:"text-gray-500 text-center",children:s.jsxs("p",{children:["Column ",a+1," content"]})})})},a))});case"spacer":return s.jsx("div",{style:{height:a.content.height||"2rem"},className:"w-full bg-gray-100 border-2 border-dashed border-gray-300 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-gray-500 text-sm",children:"Spacer"})});case"card":return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 shadow-sm",children:[a.content.title&&s.jsx("h3",{className:"text-xl font-semibold mb-3",children:a.content.title}),a.content.content&&s.jsx("div",{className:"text-gray-700",children:a.content.content}),!a.content.title&&!a.content.content&&s.jsx("div",{className:"text-gray-500 text-center py-8",children:s.jsx("p",{children:"Ïπ¥Îìú ÎÇ¥Ïö©ÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})})]});case"list":const n="ordered"===a.content.type,r=n?"ol":"ul";return s.jsx(r,{className:n?"list-decimal list-inside space-y-2":"list-disc list-inside space-y-2",children:(a.content.items||["Î™©Î°ù Ìï≠Î™© 1","Î™©Î°ù Ìï≠Î™© 2"]).map((e,a)=>s.jsx("li",{className:"text-gray-700",children:e},a))});case"quote":return s.jsxs("blockquote",{className:"border-l-4 border-blue-500 pl-6 py-4 bg-gray-50 rounded-r-lg",children:[s.jsxs("p",{className:"text-lg text-gray-700 italic mb-2",children:['"',a.content.text||"Ïù∏Ïö©Î¨∏ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",'"']}),a.content.author&&s.jsxs("cite",{className:"text-sm text-gray-600",children:["‚Äî ",a.content.author]})]});case"divider":return s.jsx("hr",{className:`border-t ${"dashed"===a.content.style?"border-dashed":"dotted"===a.content.style?"border-dotted":"border-solid"} border-gray-300`});default:return s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center text-gray-500",children:[s.jsxs("p",{children:["Block type: ",a.type]}),s.jsx("p",{className:"text-sm mt-2",children:"Renderer not implemented yet"})]})}};return t?s.jsx("div",{style:o(),children:h()}):s.jsxs("div",{className:"group relative border-2 transition-all duration-200 "+(l?"border-blue-500 shadow-lg":"border-transparent hover:border-gray-300"),onClick:i,children:[s.jsxs("div",{className:"absolute -top-10 left-0 right-0 flex items-center justify-between transition-opacity "+(l?"opacity-100":"opacity-0 group-hover:opacity-100"),children:[s.jsxs("div",{className:"flex items-center gap-1 bg-white border rounded-lg shadow-sm p-1",children:[s.jsx("span",{className:"text-xs text-gray-600 px-2",children:a.type}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),d("up")},children:s.jsx(re,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),d("down")},children:s.jsx(ce,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),c()},children:s.jsx(p,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:e=>{e.stopPropagation(),r()},className:"text-red-600 hover:text-red-700",children:s.jsx(g,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-white border rounded-lg shadow-sm p-1",children:[!1!==a.settings.visibility?.desktop&&s.jsx("div",{className:"w-4 h-4 bg-blue-100 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-xs",children:"D"})}),!1!==a.settings.visibility?.tablet&&s.jsx("div",{className:"w-4 h-4 bg-green-100 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-xs",children:"T"})}),!1!==a.settings.visibility?.mobile&&s.jsx("div",{className:"w-4 h-4 bg-purple-100 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-xs",children:"M"})})]})]}),s.jsx("div",{style:o(),children:h()}),s.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 transition-opacity "+(l?"opacity-100":"opacity-0 group-hover:opacity-100"),children:s.jsxs(qe,{size:"sm",variant:"outline",className:"bg-white shadow-sm",onClick:e=>{e.stopPropagation(),n("paragraph")},children:[s.jsx(x,{className:"w-3 h-3 mr-1"}),"Add Block"]})})]})},sa=({template:a,onClose:t,onSave:i})=>{const n=cs(),c=e.useRef(null),[o,h]=e.useState(()=>({template:a||{id:"",name:"",description:"",type:"page",category:"homepage",status:"draft",blocks:[],settings:{layout:{containerWidth:"1200px",contentWidth:"100%",sidebar:{enabled:!1,position:"right",width:"300px"},header:{enabled:!0,sticky:!1,transparent:!1},footer:{enabled:!0,sticky:!1}},typography:{fontFamily:{primary:"Inter",secondary:"Inter",monospace:"Monaco"},fontSize:{base:"16px",scale:1.25},lineHeight:{tight:1.25,normal:1.5,loose:1.75},fontWeight:{normal:400,medium:500,bold:700}},colors:{primary:"#3b82f6",secondary:"#64748b",accent:"#f59e0b",background:"#ffffff",surface:"#f8fafc",text:{primary:"#1e293b",secondary:"#64748b",muted:"#94a3b8"},border:"#e2e8f0",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},spacing:{top:"0",right:"0",bottom:"0",left:"0"},seo:{}},preview:{thumbnail:"",screenshots:[]},metadata:{tags:[],author:"",version:"1.0.0",compatibility:[],usageCount:0,rating:0,downloads:0},createdBy:"",createdAt:new Date,updatedAt:new Date},selectedBlockId:null,previewMode:!1,devicePreview:"desktop",zoom:1,history:[],historyIndex:-1})),[m,u]=e.useState("blocks"),j=os({mutationFn:async e=>Ee.api.post("/templates",e),onSuccess:()=>{l.success("ÌÖúÌîåÎ¶øÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§"),n.invalidateQueries({queryKey:["templates"]}),i()},onError:()=>{l.error("ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),v=os({mutationFn:async e=>Ee.api.put(`/templates/${e.id}`,e.updates),onSuccess:()=>{l.success("ÌÖúÌîåÎ¶øÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§"),n.invalidateQueries({queryKey:["templates"]}),i()},onError:()=>{l.error("Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),y=e.useCallback(e=>{const s={blocks:[...o.template.blocks],settings:{...o.template.settings},timestamp:new Date,action:e};h(e=>({...e,history:[...e.history.slice(0,e.historyIndex+1),s],historyIndex:e.historyIndex+1}))},[o.template.blocks,o.template.settings,o.historyIndex]),N=e.useCallback(e=>{h(s=>({...s,template:{...s.template,...e}}))},[]),b=e.useCallback((e,s)=>{const a={id:`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:e,content:aa(e),settings:{margin:{top:"0",right:"0",bottom:"1rem",left:"0"},padding:{top:"1rem",right:"1rem",bottom:"1rem",left:"1rem"},background:{type:"none"},border:{},animation:{type:"none",duration:300,delay:0,trigger:"page-load"},visibility:{desktop:!0,tablet:!0,mobile:!0}},order:o.template.blocks.length};let l=[...o.template.blocks];if(s){const e=l.findIndex(e=>e.id===s);l.splice(e+1,0,a)}else l.push(a);l=l.map((e,s)=>({...e,order:s})),N({blocks:l}),h(e=>({...e,selectedBlockId:a.id})),y(`Added ${e} block`)},[o.template.blocks,N,y]),f=e.useCallback((e,s)=>{const a=o.template.blocks.map(a=>a.id===e?{...a,...s}:a);N({blocks:a})},[o.template.blocks,N]),w=e.useCallback(e=>{const s=o.template.blocks.filter(s=>s.id!==e).map((e,s)=>({...e,order:s}));N({blocks:s}),h(s=>({...s,selectedBlockId:s.selectedBlockId===e?null:s.selectedBlockId})),y("Deleted block")},[o.template.blocks,N,y]),k=e.useCallback((e,s)=>{const a=[...o.template.blocks],l=a.findIndex(s=>s.id===e);if(-1===l)return;const t="up"===s?l-1:l+1;if(t<0||t>=a.length)return;[a[l],a[t]]=[a[t],a[l]];const i=a.map((e,s)=>({...e,order:s}));N({blocks:i}),y(`Moved block ${s}`)},[o.template.blocks,N,y]),C=e.useCallback(e=>{const s=o.template.blocks.find(s=>s.id===e);if(!s)return;const a={...s,id:`block-${Date.now()}-${Math.random().toString(36).substr(2,9)}`},l=[...o.template.blocks],t=l.findIndex(s=>s.id===e);l.splice(t+1,0,a);const i=l.map((e,s)=>({...e,order:s}));N({blocks:i}),h(e=>({...e,selectedBlockId:a.id})),y("Duplicated block")},[o.template.blocks,N,y]),S=e.useCallback(()=>{if(o.historyIndex>0){const e=o.history[o.historyIndex-1];N({blocks:e.blocks,settings:e.settings}),h(e=>({...e,historyIndex:e.historyIndex-1}))}},[o.history,o.historyIndex,N]),F=e.useCallback(()=>{if(o.historyIndex<o.history.length-1){const e=o.history[o.historyIndex+1];N({blocks:e.blocks,settings:e.settings}),h(e=>({...e,historyIndex:e.historyIndex+1}))}},[o.history,o.historyIndex,N]);return s.jsx(as,{open:!0,onOpenChange:t,children:s.jsx(ls,{className:"max-w-full w-full h-full m-0 rounded-none",children:s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"w-80 border-r bg-white flex flex-col",children:[s.jsx(ts,{className:"p-4 border-b",children:s.jsx(is,{children:"ÌÖúÌîåÎ¶ø ÎπåÎçî"})}),s.jsxs(Re,{value:m,onValueChange:u,className:"flex-1 flex flex-col",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-3 mx-4 mt-4",children:[s.jsx(Be,{value:"blocks",children:"Î∏îÎ°ù"}),s.jsx(Be,{value:"layers",children:"Î†àÏù¥Ïñ¥"}),s.jsx(Be,{value:"settings",children:"ÏÑ§Ï†ï"})]}),s.jsx(_e,{value:"blocks",className:"flex-1 overflow-y-auto p-4",children:s.jsx(Js,{onAddBlock:b})}),s.jsx(_e,{value:"layers",className:"flex-1 overflow-y-auto p-4",children:s.jsx("div",{className:"space-y-2",children:o.template.blocks.map((e,a)=>s.jsxs("div",{className:"group flex items-center gap-2 p-2 rounded cursor-pointer transition-colors "+(o.selectedBlockId===e.id?"bg-blue-100 border border-blue-300":"hover:bg-gray-100"),onClick:()=>h(s=>({...s,selectedBlockId:e.id})),children:[s.jsx(_,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"flex-1 text-sm",children:e.type}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100",children:[s.jsx(qe,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),k(e.id,"up")},disabled:0===a,children:s.jsx(re,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),k(e.id,"down")},disabled:a===o.template.blocks.length-1,children:s.jsx(ce,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),C(e.id)},children:s.jsx(p,{className:"w-3 h-3"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:s=>{s.stopPropagation(),w(e.id)},children:s.jsx(g,{className:"w-3 h-3"})})]})]},e.id))})}),s.jsx(_e,{value:"settings",className:"flex-1 overflow-y-auto p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"template-name",children:"ÌÖúÌîåÎ¶ø Ïù¥Î¶Ñ"}),s.jsx(Fe,{id:"template-name",value:o.template.name,onChange:e=>N({name:e.target.value}),placeholder:"ÌÖúÌîåÎ¶ø Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî"})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"template-description",children:"ÏÑ§Î™Ö"}),s.jsx(Ae,{id:"template-description",value:o.template.description,onChange:e=>N({description:e.target.value}),placeholder:"ÌÖúÌîåÎ¶ø ÏÑ§Î™ÖÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:3})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"template-type",children:"ÌÉÄÏûÖ"}),s.jsxs(Ie,{value:o.template.type,onValueChange:e=>N({type:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"page",children:"ÌéòÏù¥ÏßÄ"}),s.jsx(Le,{value:"post",children:"Ìè¨Ïä§Ìä∏"}),s.jsx(Le,{value:"email",children:"Ïù¥Î©îÏùº"}),s.jsx(Le,{value:"popup",children:"ÌåùÏóÖ"})]})]})]}),s.jsxs("div",{children:[s.jsx(Te,{htmlFor:"template-category",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),s.jsxs(Ie,{value:o.template.category,onValueChange:e=>N({category:e}),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"homepage",children:"ÌôàÌéòÏù¥ÏßÄ"}),s.jsx(Le,{value:"landing-page",children:"ÎûúÎî© ÌéòÏù¥ÏßÄ"}),s.jsx(Le,{value:"blog",children:"Î∏îÎ°úÍ∑∏"}),s.jsx(Le,{value:"ecommerce",children:"Ïù¥Ïª§Î®∏Ïä§"}),s.jsx(Le,{value:"portfolio",children:"Ìè¨Ìä∏Ìè¥Î¶¨Ïò§"})]})]})]})]})})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"border-b bg-white p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[s.jsx(qe,{size:"sm",variant:"desktop"===o.devicePreview?"default":"ghost",onClick:()=>h(e=>({...e,devicePreview:"desktop"})),children:s.jsx(te,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"tablet"===o.devicePreview?"default":"ghost",onClick:()=>h(e=>({...e,devicePreview:"tablet"})),children:s.jsx(ie,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"mobile"===o.devicePreview?"default":"ghost",onClick:()=>h(e=>({...e,devicePreview:"mobile"})),children:s.jsx(ne,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qe,{size:"sm",variant:"ghost",onClick:S,disabled:o.historyIndex<=0,children:s.jsx(de,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:F,disabled:o.historyIndex>=o.history.length-1,children:s.jsx(oe,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(qe,{size:"sm",variant:"ghost",onClick:()=>h(e=>({...e,zoom:Math.max(e.zoom-.1,.5)})),children:s.jsx(xe,{className:"w-4 h-4"})}),s.jsxs("span",{className:"text-sm text-gray-600 min-w-[3rem] text-center",children:[Math.round(100*o.zoom),"%"]}),s.jsx(qe,{size:"sm",variant:"ghost",onClick:()=>h(e=>({...e,zoom:Math.min(e.zoom+.1,2)})),children:s.jsx(he,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(qe,{variant:"outline",onClick:()=>h(e=>({...e,previewMode:!e.previewMode})),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),o.previewMode?"Ìé∏Ïßë":"ÎØ∏Î¶¨Î≥¥Í∏∞"]}),s.jsxs(qe,{onClick:()=>{o.template.name?a?.id?v.mutate({id:a.id,updates:{name:o.template.name,description:o.template.description,blocks:o.template.blocks,settings:o.template.settings,status:o.template.status}}):j.mutate({name:o.template.name,description:o.template.description,type:o.template.type,category:o.template.category,template:o.template}):l.error("ÌÖúÌîåÎ¶ø Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî")},children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"Ï†ÄÏû•"]}),s.jsx(qe,{variant:"ghost",onClick:t,children:s.jsx(me,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"flex-1 bg-gray-100 overflow-auto",children:s.jsx("div",{ref:c,className:"min-h-full p-8 flex justify-center",style:{transform:`scale(${o.zoom})`},children:s.jsx("div",{className:`bg-white shadow-lg ${(()=>{switch(o.devicePreview){case"mobile":return"max-w-sm";case"tablet":return"max-w-2xl";default:return"max-w-full"}})()} min-h-96 transition-all duration-300`,children:0===o.template.blocks.length?s.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(x,{className:"w-12 h-12 mx-auto mb-4"}),s.jsx("p",{children:"Î∏îÎ°ùÏùÑ Ï∂îÍ∞ÄÌï¥ÏÑú ÏãúÏûëÌïòÏÑ∏Ïöî"})]})}):o.template.blocks.map(e=>s.jsx(ea,{block:e,isSelected:o.selectedBlockId===e.id,isPreview:o.previewMode,onSelect:()=>h(s=>({...s,selectedBlockId:e.id})),onAddBlock:s=>b(s,e.id),onUpdate:s=>f(e.id,s),onDelete:()=>w(e.id),onDuplicate:()=>C(e.id),onMove:s=>k(e.id,s)},e.id))})})})]}),o.selectedBlockId&&!o.previewMode&&s.jsxs("div",{className:"w-80 border-l bg-white overflow-y-auto",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsx("h3",{className:"font-semibold",children:"Î∏îÎ°ù Ìé∏Ïßë"})}),s.jsx("div",{className:"p-4",children:s.jsx(Zs,{block:o.template.blocks.find(e=>e.id===o.selectedBlockId),onChange:e=>f(o.selectedBlockId,e)})})]})]})})})};function aa(e){switch(e){case"hero":return{title:"Hero Title",subtitle:"Hero subtitle text",backgroundImage:"",buttons:[{text:"Get Started",url:"#",style:"primary"}]};case"heading":return{text:"Heading Text",level:2};case"paragraph":return{text:"Your paragraph text goes here..."};case"image":return{src:"",alt:"Image description",caption:""};case"button":return{text:"Button Text",url:"#",style:"primary"};case"columns":return{columns:[{content:""},{content:""}]};default:return{}}}const la=({onClose:a,onImport:t})=>{const i=cs(),[n,r]=e.useState({category:void 0,search:"",isPremium:void 0,rating:void 0}),[c,o]=e.useState(null),[x,m]=e.useState("all"),{data:u,isLoading:j}=ds({queryKey:["template-library",n],queryFn:async()=>{const e=new URLSearchParams;n.search&&e.append("search",n.search),n.category&&e.append("category",n.category),void 0!==n.isPremium&&e.append("isPremium",n.isPremium.toString()),n.rating&&e.append("rating",n.rating.toString());return(await Ee.api.get(`/template-library?${e}`)).data}}),p=os({mutationFn:async e=>Ee.api.post(`/template-library/${e}/import`),onSuccess:()=>{l.success("ÌÖúÌîåÎ¶øÏù¥ Í∞ÄÏ†∏ÏôÄÏ°åÏäµÎãàÎã§"),i.invalidateQueries({queryKey:["templates"]}),t()},onError:()=>{l.error("Í∞ÄÏ†∏Ïò§Í∏∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),g=e=>{e.isPremium?l("ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÖúÌîåÎ¶øÏùÄ Íµ¨Îß§Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§"):p.mutate(e.id)},v=e=>({"landing-page":"bg-blue-100 text-blue-800",homepage:"bg-green-100 text-green-800",about:"bg-purple-100 text-purple-800",contact:"bg-orange-100 text-orange-800",portfolio:"bg-pink-100 text-pink-800",blog:"bg-indigo-100 text-indigo-800",ecommerce:"bg-red-100 text-red-800",business:"bg-gray-100 text-gray-800",personal:"bg-yellow-100 text-yellow-800",creative:"bg-teal-100 text-teal-800",education:"bg-cyan-100 text-cyan-800",nonprofit:"bg-lime-100 text-lime-800"}[e]||"bg-gray-100 text-gray-800"),y=e=>s.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>s.jsx(pe,{className:"w-3 h-3 "+(a<=e?"text-yellow-400 fill-current":"text-gray-300")},a)),s.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e.toFixed(1)})]}),N=(()=>{if(!u?.items)return[];let e=u.items;switch(x){case"free":e=e.filter(e=>!e.isPremium);break;case"premium":e=e.filter(e=>e.isPremium);break;case"featured":e=e.filter(e=>e.featured);break;case"popular":e=e.sort((e,s)=>s.popularity-e.popularity)}return e})();return s.jsx(as,{open:!0,onOpenChange:a,children:s.jsxs(ls,{className:"max-w-6xl w-full h-[80vh] flex flex-col",children:[s.jsx(ts,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(is,{children:"ÌÖúÌîåÎ¶ø ÎùºÏù¥Î∏åÎü¨Î¶¨"}),s.jsx(qe,{variant:"ghost",onClick:a,children:s.jsx(me,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"border-b pb-4 mb-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(Fe,{placeholder:"ÌÖúÌîåÎ¶ø Í≤ÄÏÉâ...",value:n.search||"",onChange:e=>r({...n,search:e.target.value}),className:"pl-10"})]}),s.jsxs(Ie,{value:n.category||"all",onValueChange:e=>r({...n,category:"all"===e?void 0:e}),children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Î™®Îì† Ïπ¥ÌÖåÍ≥†Î¶¨"}),s.jsx(Le,{value:"homepage",children:"ÌôàÌéòÏù¥ÏßÄ"}),s.jsx(Le,{value:"landing-page",children:"ÎûúÎî© ÌéòÏù¥ÏßÄ"}),s.jsx(Le,{value:"blog",children:"Î∏îÎ°úÍ∑∏"}),s.jsx(Le,{value:"ecommerce",children:"Ïù¥Ïª§Î®∏Ïä§"}),s.jsx(Le,{value:"portfolio",children:"Ìè¨Ìä∏Ìè¥Î¶¨Ïò§"}),s.jsx(Le,{value:"business",children:"ÎπÑÏ¶àÎãàÏä§"})]})]}),s.jsxs(Ie,{value:void 0===n.isPremium?"all":n.isPremium?"premium":"free",onValueChange:e=>r({...n,isPremium:"all"===e?void 0:"premium"===e}),children:[s.jsx(Pe,{className:"w-[120px]",children:s.jsx($e,{placeholder:"Í∞ÄÍ≤©"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Ï†ÑÏ≤¥"}),s.jsx(Le,{value:"free",children:"Î¨¥Î£å"}),s.jsx(Le,{value:"premium",children:"ÌîÑÎ¶¨ÎØ∏ÏóÑ"})]})]})]})}),s.jsxs(Re,{value:x,onValueChange:m,className:"flex-1 flex flex-col",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-5",children:[s.jsx(Be,{value:"all",children:"Ï†ÑÏ≤¥"}),s.jsx(Be,{value:"free",children:"Î¨¥Î£å"}),s.jsx(Be,{value:"premium",children:"ÌîÑÎ¶¨ÎØ∏ÏóÑ"}),s.jsx(Be,{value:"featured",children:"Ï∂îÏ≤ú"}),s.jsx(Be,{value:"popular",children:"Ïù∏Í∏∞"})]}),s.jsx(_e,{value:x,className:"flex-1 overflow-y-auto mt-4",children:j?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===N.length?s.jsx("div",{className:"text-center py-12",children:s.jsxs("div",{className:"text-gray-500",children:[s.jsx(D,{className:"w-12 h-12 mx-auto mb-4"}),s.jsx("p",{children:"Ï°∞Í±¥Ïóê ÎßûÎäî ÌÖúÌîåÎ¶øÏù¥ ÏóÜÏäµÎãàÎã§"})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>s.jsxs(Je,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"aspect-video bg-gray-100 relative group",children:[e.preview?.thumbnail?s.jsx("img",{src:e.preview.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg mx-auto mb-2 flex items-center justify-center",children:"üìÑ"}),s.jsx("p",{className:"text-sm",children:"No Preview"})]})}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(qe,{size:"sm",variant:"secondary",onClick:()=>o(e),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"ÎØ∏Î¶¨Î≥¥Í∏∞"]}),s.jsxs(qe,{size:"sm",onClick:()=>g(e),disabled:p.isPending,children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"Í∞ÄÏ†∏Ïò§Í∏∞"]})]})}),s.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[e.isPremium&&s.jsxs(Qe,{className:"bg-yellow-500 text-white",children:[s.jsx(je,{className:"w-3 h-3 mr-1"}),"Premium"]}),e.featured&&s.jsxs(Qe,{className:"bg-red-500 text-white",children:[s.jsx(pe,{className:"w-3 h-3 mr-1"}),"Featured"]})]}),e.isPremium&&e.price&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs(Qe,{variant:"secondary",children:["$",e.price]})})]}),s.jsxs(es,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg truncate",children:e.name}),s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(ge,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),s.jsx("div",{className:"mb-3",children:s.jsx(Qe,{className:v(e.category),children:e.category})}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{className:"w-3 h-3"}),e.metadata.downloads]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ve,{className:"w-3 h-3"}),e.popularity]})]}),y(e.metadata.rating)]}),s.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.metadata.tags.slice(0,3).map(e=>s.jsx(Qe,{variant:"outline",className:"text-xs",children:e},e)),e.metadata.tags.length>3&&s.jsxs(Qe,{variant:"outline",className:"text-xs",children:["+",e.metadata.tags.length-3]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(qe,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>o(e),children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"ÎØ∏Î¶¨Î≥¥Í∏∞"]}),s.jsxs(qe,{size:"sm",className:"flex-1",onClick:()=>g(e),disabled:p.isPending,children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),e.isPremium?"Íµ¨Îß§":"Í∞ÄÏ†∏Ïò§Í∏∞"]})]})]})]},e.id))})})]})]}),c&&s.jsx(as,{open:!0,onOpenChange:()=>o(null),children:s.jsxs(ls,{className:"max-w-4xl",children:[s.jsx(ts,{children:s.jsx(is,{children:c.name})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:c.preview?.thumbnail?s.jsx("img",{src:c.preview.thumbnail,alt:c.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No preview available"})}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:c.description}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx(Qe,{className:v(c.category),children:c.category}),c.isPremium&&s.jsxs(Qe,{className:"bg-yellow-500 text-white",children:[s.jsx(je,{className:"w-3 h-3 mr-1"}),"Premium $",c.price]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{className:"w-4 h-4"}),c.metadata.downloads," downloads"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ae,{className:"w-4 h-4"}),"Updated ",c.metadata.author]}),y(c.metadata.rating)]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(qe,{variant:"outline",onClick:()=>o(null),children:"Îã´Í∏∞"}),s.jsxs(qe,{onClick:()=>{g(c),o(null)},disabled:p.isPending,children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),c.isPremium?"Íµ¨Îß§ÌïòÍ∏∞":"Í∞ÄÏ†∏Ïò§Í∏∞"]})]})]})]})]})})]})})},ta=()=>{const a=cs(),[t,i]=e.useState("grid"),[n,r]=e.useState(""),[c,d]=e.useState("all"),[o,m]=e.useState("all"),[j,v]=e.useState("all"),[y,b]=e.useState(!1),[f,w]=e.useState(!1),[k,C]=e.useState(null),[S,F]=e.useState(1),{data:I,isLoading:P,refetch:z}=ds({queryKey:["templates",{search:n,category:c,type:o,status:j,page:S,limit:12}],queryFn:async()=>{const e=new URLSearchParams({page:S.toString(),limit:12..toString()});n&&e.append("search",n),"all"!==c&&e.append("category",c),"all"!==o&&e.append("type",o),"all"!==j&&e.append("status",j);return(await Ee.api.get(`/templates?${e}`)).data}}),L=os({mutationFn:async e=>Ee.api.delete(`/templates/${e}`),onSuccess:()=>{a.invalidateQueries({queryKey:["templates"]}),l.success("ÌÖúÌîåÎ¶øÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),A=os({mutationFn:async e=>Ee.api.post(`/templates/${e}/duplicate`),onSuccess:()=>{a.invalidateQueries({queryKey:["templates"]}),l.success("ÌÖúÌîåÎ¶øÏù¥ Î≥µÏ†úÎêòÏóàÏäµÎãàÎã§")},onError:()=>{l.error("Î≥µÏ†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),q=e=>({"landing-page":"bg-blue-100 text-blue-800",homepage:"bg-green-100 text-green-800",about:"bg-purple-100 text-purple-800",contact:"bg-orange-100 text-orange-800",portfolio:"bg-pink-100 text-pink-800",blog:"bg-indigo-100 text-indigo-800",ecommerce:"bg-red-100 text-red-800",business:"bg-gray-100 text-gray-800",personal:"bg-yellow-100 text-yellow-800",creative:"bg-teal-100 text-teal-800",education:"bg-cyan-100 text-cyan-800",nonprofit:"bg-lime-100 text-lime-800"}[e]||"bg-gray-100 text-gray-800"),E=e=>{switch(e){case"page":default:return"üìÑ";case"post":return"üìù";case"category":return"üìÅ";case"archive":return"üìö";case"search":return"üîç";case"404":return"‚ùå";case"email":return"üìß";case"popup":return"üí¨"}},D=()=>{C(null),b(!0)},M=e=>{C(e),b(!0)},T=e=>{confirm(`Ï†ïÎßê "${e.name}" ÌÖúÌîåÎ¶øÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)&&L.mutate(e.id)},V=e=>{A.mutate(e.id)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ÌÖúÌîåÎ¶ø Í¥ÄÎ¶¨"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"ÌéòÏù¥ÏßÄ Î∞è Ïª®ÌÖêÏ∏† ÌÖúÌîåÎ¶øÏùÑ Í¥ÄÎ¶¨Ìï©ÎãàÎã§"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(qe,{variant:"outline",onClick:()=>w(!0),children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"ÌÖúÌîåÎ¶ø ÎùºÏù¥Î∏åÎü¨Î¶¨"]}),s.jsxs(qe,{onClick:D,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏÉà ÌÖúÌîåÎ¶ø"]})]})]}),s.jsx(Je,{children:s.jsx(es,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(Fe,{placeholder:"ÌÖúÌîåÎ¶ø Í≤ÄÏÉâ...",value:n,onChange:e=>r(e.target.value),className:"pl-10"})]}),s.jsxs(Ie,{value:c,onValueChange:d,children:[s.jsx(Pe,{className:"w-[180px]",children:s.jsx($e,{placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Î™®Îì† Ïπ¥ÌÖåÍ≥†Î¶¨"}),s.jsx(Le,{value:"homepage",children:"ÌôàÌéòÏù¥ÏßÄ"}),s.jsx(Le,{value:"landing-page",children:"ÎûúÎî© ÌéòÏù¥ÏßÄ"}),s.jsx(Le,{value:"blog",children:"Î∏îÎ°úÍ∑∏"}),s.jsx(Le,{value:"ecommerce",children:"Ïù¥Ïª§Î®∏Ïä§"}),s.jsx(Le,{value:"portfolio",children:"Ìè¨Ìä∏Ìè¥Î¶¨Ïò§"}),s.jsx(Le,{value:"business",children:"ÎπÑÏ¶àÎãàÏä§"})]})]}),s.jsxs(Ie,{value:o,onValueChange:m,children:[s.jsx(Pe,{className:"w-[150px]",children:s.jsx($e,{placeholder:"ÌÉÄÏûÖ"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Î™®Îì† ÌÉÄÏûÖ"}),s.jsx(Le,{value:"page",children:"ÌéòÏù¥ÏßÄ"}),s.jsx(Le,{value:"post",children:"Ìè¨Ïä§Ìä∏"}),s.jsx(Le,{value:"email",children:"Ïù¥Î©îÏùº"}),s.jsx(Le,{value:"popup",children:"ÌåùÏóÖ"})]})]}),s.jsxs(Ie,{value:j,onValueChange:v,children:[s.jsx(Pe,{className:"w-[150px]",children:s.jsx($e,{placeholder:"ÏÉÅÌÉú"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Î™®Îì† ÏÉÅÌÉú"}),s.jsx(Le,{value:"draft",children:"Ï¥àÏïà"}),s.jsx(Le,{value:"published",children:"Í≤åÏãúÎê®"}),s.jsx(Le,{value:"archived",children:"Î≥¥Í¥ÄÎê®"})]})]}),s.jsxs("div",{className:"flex items-center gap-1 border rounded-lg p-1",children:[s.jsx(qe,{variant:"grid"===t?"default":"ghost",size:"sm",onClick:()=>i("grid"),children:s.jsx(ye,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"list"===t?"default":"ghost",size:"sm",onClick:()=>i("list"),children:s.jsx($,{className:"w-4 h-4"})})]})]})})}),P?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):0===I?.templates?.length?s.jsx(Je,{children:s.jsxs(es,{className:"text-center py-12",children:[s.jsx(Ne,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"ÌÖúÌîåÎ¶øÏù¥ ÏóÜÏäµÎãàÎã§"}),s.jsxs(qe,{onClick:D,children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Ï≤´ ÌÖúÌîåÎ¶ø ÎßåÎì§Í∏∞"]})]})}):"grid"===t?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:I?.templates?.map(e=>s.jsxs(Je,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"aspect-video bg-gray-100 relative",children:[e.preview?.thumbnail?s.jsx("img",{src:e.preview.thumbnail,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:s.jsx(Ne,{className:"w-12 h-12"})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"text-2xl",children:E(e.type)})}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs(Ue,{children:[s.jsx(Ye,{children:s.jsx(qe,{variant:"ghost",size:"sm",className:"bg-white/80 hover:bg-white",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(Oe,{align:"end",children:[s.jsxs(We,{onClick:()=>M(e),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),s.jsxs(We,{onClick:()=>V(e),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),s.jsx(Ge,{}),s.jsxs(We,{onClick:()=>T(e),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})})]}),s.jsxs(es,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-lg truncate",children:e.name}),e.metadata?.featured&&s.jsx(pe,{className:"w-4 h-4 text-yellow-500 flex-shrink-0 ml-2"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(Qe,{className:q(e.category),children:e.category}),s.jsx(Qe,{variant:"published"===e.status?"default":"draft"===e.status?"secondary":"outline",children:e.status})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[s.jsxs("span",{children:["ÏÇ¨Ïö©: ",e.metadata?.usageCount||0,"Ìöå"]}),s.jsx("span",{children:new Date(e.updatedAt).toLocaleDateString()})]})]})]},e.id))}):s.jsx(Je,{children:s.jsx(es,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÌÖúÌîåÎ¶ø"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ïπ¥ÌÖåÍ≥†Î¶¨"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÏÉÅÌÉú"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÏÇ¨Ïö©ÌöüÏàò"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÏàòÏ†ïÏùº"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ÏûëÏóÖ"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200",children:I?.templates?.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-lg",children:E(e.type)})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:e.name}),s.jsx("div",{className:"text-sm text-gray-500",children:e.description})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Qe,{className:q(e.category),children:e.category})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(Qe,{variant:"published"===e.status?"default":"draft"===e.status?"secondary":"outline",children:e.status})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.metadata?.usageCount||0}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(e.updatedAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(Ue,{children:[s.jsx(Ye,{children:s.jsx(qe,{variant:"ghost",size:"sm",children:s.jsx(u,{className:"w-4 h-4"})})}),s.jsxs(Oe,{align:"end",children:[s.jsxs(We,{onClick:()=>M(e),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),s.jsxs(We,{onClick:()=>V(e),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),s.jsx(Ge,{}),s.jsxs(We,{onClick:()=>T(e),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})})]},e.id))})]})})})}),I&&I.totalPages>1&&s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>F(S-1),disabled:1===S,children:"Ïù¥Ï†Ñ"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[S," / ",I.totalPages]}),s.jsx(qe,{variant:"outline",size:"sm",onClick:()=>F(S+1),disabled:S===I.totalPages,children:"Îã§Ïùå"})]}),y&&s.jsx(sa,{template:k,onClose:()=>{b(!1),C(null)},onSave:()=>{z(),b(!1),C(null)}}),f&&s.jsx(la,{onClose:()=>w(!1),onImport:()=>{z(),w(!1)}})]})},ia=[{type:"text",name:"ÌÖçÏä§Ìä∏",description:"ÏùºÎ∞ò ÌÖçÏä§Ìä∏ ÏΩòÌÖêÏ∏†",icon:s.jsx(I,{className:"w-5 h-5"}),category:"content",defaultContent:{text:"",autoP:!0}},{type:"html",name:"HTML",description:"Ïª§Ïä§ÌÖÄ HTML ÏΩîÎìú",icon:s.jsx(X,{className:"w-5 h-5"}),category:"advanced",defaultContent:{html:""}},{type:"image",name:"Ïù¥ÎØ∏ÏßÄ",description:"Îã®Ïùº Ïù¥ÎØ∏ÏßÄ",icon:s.jsx(o,{className:"w-5 h-5"}),category:"media",defaultContent:{url:"",alt:"",size:"medium"}},{type:"menu",name:"Î©îÎâ¥",description:"ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò Î©îÎâ¥",icon:s.jsx(be,{className:"w-5 h-5"}),category:"navigation",defaultContent:{menuId:"",showHierarchy:!0,maxDepth:3}},{type:"recent-posts",name:"ÏµúÍ∑º Í≤åÏãúÍ∏Ä",description:"ÏµúÏã† Í≤åÏãúÍ∏Ä Î™©Î°ù",icon:s.jsx(v,{className:"w-5 h-5"}),category:"content",defaultContent:{count:5,showDate:!0,showExcerpt:!1,excerptLength:100}},{type:"categories",name:"Ïπ¥ÌÖåÍ≥†Î¶¨",description:"Í≤åÏãúÍ∏Ä Ïπ¥ÌÖåÍ≥†Î¶¨ Î™©Î°ù",icon:s.jsx(P,{className:"w-5 h-5"}),category:"navigation",defaultContent:{showPostCount:!0,showHierarchy:!0,hideEmpty:!0}},{type:"search",name:"Í≤ÄÏÉâ",description:"Í≤ÄÏÉâ Ìèº",icon:s.jsx(h,{className:"w-5 h-5"}),category:"forms",defaultContent:{placeholder:"Í≤ÄÏÉâ...",buttonText:"Í≤ÄÏÉâ",searchCategories:!1}},{type:"social-links",name:"ÏÜåÏÖú ÎßÅÌÅ¨",description:"ÏÜåÏÖú ÎØ∏ÎîîÏñ¥ ÎßÅÌÅ¨",icon:s.jsx(se,{className:"w-5 h-5"}),category:"social",defaultContent:{links:[],style:"icons",size:"medium",openInNewTab:!0}},{type:"contact-info",name:"Ïó∞ÎùΩÏ≤ò Ï†ïÎ≥¥",description:"Ïó∞ÎùΩÏ≤ò Î∞è Ï£ºÏÜå Ï†ïÎ≥¥",icon:s.jsx(fe,{className:"w-5 h-5"}),category:"content",defaultContent:{address:"",phone:"",email:"",showMap:!1}},{type:"newsletter",name:"Îâ¥Ïä§Î†àÌÑ∞",description:"Ïù¥Î©îÏùº Íµ¨ÎèÖ Ìèº",icon:s.jsx(E,{className:"w-5 h-5"}),category:"forms",defaultContent:{title:"Îâ¥Ïä§Î†àÌÑ∞ Íµ¨ÎèÖ",description:"ÏµúÏã† ÏÜåÏãùÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî",placeholder:"Ïù¥Î©îÏùº Ï£ºÏÜå",buttonText:"Íµ¨ÎèÖÌïòÍ∏∞",successMessage:"Íµ¨ÎèÖÌï¥Ï£ºÏÖîÏÑú Í∞êÏÇ¨Ìï©ÎãàÎã§!",provider:"custom"}}],na=({widget:a,onSave:t,onCancel:i})=>{const[n,c]=e.useState(a?.type||"text"),[o,x]=e.useState({title:a?.title||"",position:a?.position||"footer-1",content:a?.content||{},settings:a?.settings||{showTitle:!0,visibility:{desktop:!0,tablet:!0,mobile:!0},animation:{type:"none",duration:300,delay:0},spacing:{margin:{top:"0",right:"0",bottom:"1rem",left:"0"},padding:{top:"1rem",right:"1rem",bottom:"1rem",left:"1rem"}},styling:{textAlign:"left"}}}),h=Boolean(a),m=ia.find(e=>e.type===n);e.useEffect(()=>{!h&&m&&x(e=>({...e,content:m.defaultContent}))},[n,m,h]);const u=os({mutationFn:async e=>Ee.api.post("/widgets",e),onSuccess:()=>{l.success("ÏúÑÏ†ØÏù¥ ÏÉùÏÑ±ÎêòÏóàÏäµÎãàÎã§"),t()},onError:()=>{l.error("ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),j=os({mutationFn:async e=>Ee.api.put(`/widgets/${a.id}`,e),onSuccess:()=>{l.success("ÏúÑÏ†ØÏù¥ ÏàòÏ†ïÎêòÏóàÏäµÎãàÎã§"),t()},onError:()=>{l.error("ÏàòÏ†ïÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),p=(e,s)=>{x(a=>({...a,content:{...a.content,[e]:s}}))},g=(e,s)=>{x(a=>({...a,settings:{...a.settings,[e]:s}}))},v=(e,s,a)=>{x(l=>({...l,settings:{...l.settings,[e]:{...l.settings[e]||{},[s]:a}}}))};return s.jsx(as,{open:!0,onOpenChange:i,children:s.jsxs(ls,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsx(ts,{children:s.jsx(is,{children:h?"ÏúÑÏ†Ø Ìé∏Ïßë":"ÏÉà ÏúÑÏ†Ø Ï∂îÍ∞Ä"})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[s.jsxs("div",{className:"space-y-6",children:[!h&&s.jsxs("div",{children:[s.jsx(Te,{children:"ÏúÑÏ†Ø ÌÉÄÏûÖ"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:ia.map(e=>s.jsxs(qe,{variant:n===e.type?"default":"outline",size:"sm",onClick:()=>c(e.type),className:"flex flex-col h-auto p-3",children:[e.icon,s.jsx("span",{className:"text-xs mt-1",children:e.name})]},e.type))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"ÏúÑÏ†Ø Ï†úÎ™©"}),s.jsx(Fe,{value:o.title,onChange:e=>x(s=>({...s,title:e.target.value})),placeholder:"ÏúÑÏ†Ø Ï†úÎ™©"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÏúÑÏπò"}),s.jsxs(Ie,{value:o.position,onValueChange:e=>x(s=>({...s,position:e})),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"footer-1",children:"Ìë∏ÌÑ∞ 1"}),s.jsx(Le,{value:"footer-2",children:"Ìë∏ÌÑ∞ 2"}),s.jsx(Le,{value:"footer-3",children:"Ìë∏ÌÑ∞ 3"}),s.jsx(Le,{value:"footer-4",children:"Ìë∏ÌÑ∞ 4"}),s.jsx(Le,{value:"sidebar-main",children:"Î©îÏù∏ ÏÇ¨Ïù¥ÎìúÎ∞î"}),s.jsx(Le,{value:"sidebar-shop",children:"ÏáºÌïë ÏÇ¨Ïù¥ÎìúÎ∞î"}),s.jsx(Le,{value:"header-top",children:"Ìó§Îçî ÏÉÅÎã®"}),s.jsx(Le,{value:"header-bottom",children:"Ìó§Îçî ÌïòÎã®"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{checked:o.settings.showTitle,onCheckedChange:e=>g("showTitle",e)}),s.jsx(Te,{children:"Ï†úÎ™© ÌëúÏãú"})]})]})]}),s.jsx("div",{className:"lg:col-span-2 overflow-y-auto",children:s.jsxs(Re,{defaultValue:"content",className:"h-full",children:[s.jsxs(Ke,{className:"grid w-full grid-cols-3",children:[s.jsx(Be,{value:"content",children:"ÎÇ¥Ïö©"}),s.jsx(Be,{value:"settings",children:"ÏÑ§Ï†ï"}),s.jsx(Be,{value:"preview",children:"ÎØ∏Î¶¨Î≥¥Í∏∞"})]}),s.jsx(_e,{value:"content",className:"space-y-4 mt-4",children:(()=>{switch(n){case"text":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"ÌÖçÏä§Ìä∏ ÎÇ¥Ïö©"}),s.jsx(Ae,{value:o.content.text||"",onChange:e=>p("text",e.target.value),placeholder:"ÌÖçÏä§Ìä∏ ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:6})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{checked:o.content.autoP||!1,onCheckedChange:e=>p("autoP",e)}),s.jsx(Te,{children:"ÏûêÎèô Îã®ÎùΩ ÎÇòÎàÑÍ∏∞"})]})]});case"html":return s.jsxs("div",{children:[s.jsx(Te,{children:"HTML ÏΩîÎìú"}),s.jsx(Ae,{value:o.content.html||"",onChange:e=>p("html",e.target.value),placeholder:"HTML ÏΩîÎìúÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:8,className:"font-mono text-sm"})]});case"image":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Ïù¥ÎØ∏ÏßÄ URL"}),s.jsx(Fe,{value:o.content.url||"",onChange:e=>p("url",e.target.value),placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÎåÄÏ≤¥ ÌÖçÏä§Ìä∏"}),s.jsx(Fe,{value:o.content.alt||"",onChange:e=>p("alt",e.target.value),placeholder:"Ïù¥ÎØ∏ÏßÄ ÏÑ§Î™Ö"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÎßÅÌÅ¨ URL (ÏÑ†ÌÉùÏÇ¨Ìï≠)"}),s.jsx(Fe,{value:o.content.link||"",onChange:e=>p("link",e.target.value),placeholder:"https://example.com"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Ïù¥ÎØ∏ÏßÄ ÌÅ¨Í∏∞"}),s.jsxs(Ie,{value:o.content.size||"medium",onValueChange:e=>p("size",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"thumbnail",children:"Ïç∏ÎÑ§Ïùº"}),s.jsx(Le,{value:"medium",children:"Ï§ëÍ∞Ñ"}),s.jsx(Le,{value:"large",children:"ÌÅ∞"}),s.jsx(Le,{value:"full",children:"Ï†ÑÏ≤¥"})]})]})]})]});case"recent-posts":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"ÌëúÏãúÌï† Í≤åÏãúÍ∏Ä Ïàò"}),s.jsx(Fe,{type:"number",value:o.content.count||5,onChange:e=>p("count",parseInt(e.target.value)||5),min:"1",max:"20"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{checked:o.content.showDate||!1,onCheckedChange:e=>p("showDate",e)}),s.jsx(Te,{children:"ÎÇ†Ïßú ÌëúÏãú"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{checked:o.content.showExcerpt||!1,onCheckedChange:e=>p("showExcerpt",e)}),s.jsx(Te,{children:"ÏöîÏïΩ ÌëúÏãú"})]}),o.content.showExcerpt&&s.jsxs("div",{children:[s.jsx(Te,{children:"ÏöîÏïΩ Í∏∏Ïù¥"}),s.jsx(Fe,{type:"number",value:o.content.excerptLength||100,onChange:e=>p("excerptLength",parseInt(e.target.value)||100),min:"50",max:"300"})]})]});case"search":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî"}),s.jsx(Fe,{value:o.content.placeholder||"",onChange:e=>p("placeholder",e.target.value),placeholder:"Í≤ÄÏÉâ..."})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Î≤ÑÌäº ÌÖçÏä§Ìä∏"}),s.jsx(Fe,{value:o.content.buttonText||"",onChange:e=>p("buttonText",e.target.value),placeholder:"Í≤ÄÏÉâ"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{checked:o.content.searchCategories||!1,onCheckedChange:e=>p("searchCategories",e)}),s.jsx(Te,{children:"Ïπ¥ÌÖåÍ≥†Î¶¨ Í≤ÄÏÉâ Ìè¨Ìï®"})]})]});case"social-links":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"ÌëúÏãú Ïä§ÌÉÄÏùº"}),s.jsxs(Ie,{value:o.content.style||"icons",onValueChange:e=>p("style",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"icons",children:"ÏïÑÏù¥ÏΩòÎßå"}),s.jsx(Le,{value:"buttons",children:"Î≤ÑÌäº"}),s.jsx(Le,{value:"text",children:"ÌÖçÏä§Ìä∏"})]})]})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÌÅ¨Í∏∞"}),s.jsxs(Ie,{value:o.content.size||"medium",onValueChange:e=>p("size",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"small",children:"ÏûëÏùå"}),s.jsx(Le,{value:"medium",children:"Ï§ëÍ∞Ñ"}),s.jsx(Le,{value:"large",children:"ÌÅº"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{checked:o.content.openInNewTab||!0,onCheckedChange:e=>p("openInNewTab",e)}),s.jsx(Te,{children:"ÏÉà ÌÉ≠ÏóêÏÑú Ïó¥Í∏∞"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÏÜåÏÖú ÎßÅÌÅ¨"}),s.jsxs("div",{className:"space-y-2 mt-2",children:[(o.content.links||[]).map((e,a)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Ie,{value:String(e.platform||""),onValueChange:s=>{const l=[...o.content.links||[]];l[a]={...e,platform:s},p("links",l)},children:[s.jsx(Pe,{className:"w-32",children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"facebook",children:"Facebook"}),s.jsx(Le,{value:"twitter",children:"Twitter"}),s.jsx(Le,{value:"instagram",children:"Instagram"}),s.jsx(Le,{value:"youtube",children:"YouTube"}),s.jsx(Le,{value:"linkedin",children:"LinkedIn"})]})]}),s.jsx(Fe,{value:String(e.url||""),onChange:s=>{const l=[...o.content.links||[]];l[a]={...e,url:s.target.value},p("links",l)},placeholder:"URL",className:"flex-1"}),s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>{const e=(o.content.links||[]).filter((e,s)=>s!==a);p("links",e)},children:s.jsx(me,{className:"w-4 h-4"})})]},a)),s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>{const e=[...o.content.links||[],{platform:"facebook",url:""}];p("links",e)},children:"ÎßÅÌÅ¨ Ï∂îÍ∞Ä"})]})]})]});case"contact-info":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Ï£ºÏÜå"}),s.jsx(Ae,{value:o.content.address||"",onChange:e=>p("address",e.target.value),placeholder:"Ï£ºÏÜåÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî",rows:2})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Ï†ÑÌôîÎ≤àÌò∏"}),s.jsx(Fe,{value:o.content.phone||"",onChange:e=>p("phone",e.target.value),placeholder:"02-1234-5678"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Ïù¥Î©îÏùº"}),s.jsx(Fe,{value:o.content.email||"",onChange:e=>p("email",e.target.value),placeholder:"contact@example.com"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÏõπÏÇ¨Ïù¥Ìä∏"}),s.jsx(Fe,{value:o.content.website||"",onChange:e=>p("website",e.target.value),placeholder:"https://example.com"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ys,{checked:o.content.showMap||!1,onCheckedChange:e=>p("showMap",e)}),s.jsx(Te,{children:"ÏßÄÎèÑ ÌëúÏãú"})]})]});case"newsletter":return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Te,{children:"Ï†úÎ™©"}),s.jsx(Fe,{value:o.content.title||"",onChange:e=>p("title",e.target.value),placeholder:"Îâ¥Ïä§Î†àÌÑ∞ Íµ¨ÎèÖ"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÏÑ§Î™Ö"}),s.jsx(Ae,{value:o.content.description||"",onChange:e=>p("description",e.target.value),placeholder:"ÏµúÏã† ÏÜåÏãùÏùÑ Î∞õÏïÑÎ≥¥ÏÑ∏Ïöî",rows:2})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî"}),s.jsx(Fe,{value:o.content.placeholder||"",onChange:e=>p("placeholder",e.target.value),placeholder:"Ïù¥Î©îÏùº Ï£ºÏÜå"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"Î≤ÑÌäº ÌÖçÏä§Ìä∏"}),s.jsx(Fe,{value:o.content.buttonText||"",onChange:e=>p("buttonText",e.target.value),placeholder:"Íµ¨ÎèÖÌïòÍ∏∞"})]}),s.jsxs("div",{children:[s.jsx(Te,{children:"ÏÑ±Í≥µ Î©îÏãúÏßÄ"}),s.jsx(Fe,{value:o.content.successMessage||"",onChange:e=>p("successMessage",e.target.value),placeholder:"Íµ¨ÎèÖÌï¥Ï£ºÏÖîÏÑú Í∞êÏÇ¨Ìï©ÎãàÎã§!"})]})]});default:return s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(k,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("p",{children:"Ïù¥ ÏúÑÏ†Ø ÌÉÄÏûÖÏóê ÎåÄÌïú Ìé∏ÏßëÍ∏∞Í∞Ä Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§."})]})}})()}),s.jsx(_e,{value:"settings",className:"mt-4",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{className:"text-sm",children:"ÌëúÏãú ÏÑ§Ï†ï"})}),s.jsxs(es,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{className:"text-sm",children:"Îç∞Ïä§ÌÅ¨ÌÜ±ÏóêÏÑú ÌëúÏãú"}),s.jsx(ys,{checked:!1!==o.settings.visibility?.desktop,onCheckedChange:e=>v("visibility","desktop",e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{className:"text-sm",children:"ÌÉúÎ∏îÎ¶øÏóêÏÑú ÌëúÏãú"}),s.jsx(ys,{checked:!1!==o.settings.visibility?.tablet,onCheckedChange:e=>v("visibility","tablet",e)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Te,{className:"text-sm",children:"Î™®Î∞îÏùºÏóêÏÑú ÌëúÏãú"}),s.jsx(ys,{checked:!1!==o.settings.visibility?.mobile,onCheckedChange:e=>v("visibility","mobile",e)})]})]})]}),s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{className:"text-sm",children:"Ïï†ÎãàÎ©îÏù¥ÏÖò"})}),s.jsxs(es,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"ÌÉÄÏûÖ"}),s.jsxs(Ie,{value:o.settings.animation?.type||"none",onValueChange:e=>v("animation","type",e),children:[s.jsx(Pe,{children:s.jsx($e,{})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"none",children:"ÏóÜÏùå"}),s.jsx(Le,{value:"fade",children:"ÌéòÏù¥Îìú"}),s.jsx(Le,{value:"slide",children:"Ïä¨ÎùºÏù¥Îìú"}),s.jsx(Le,{value:"bounce",children:"Î∞îÏö¥Ïä§"})]})]})]}),"none"!==o.settings.animation?.type&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"ÏßÄÏÜçÏãúÍ∞Ñ (ms)"}),s.jsx(Xs,{value:[o.settings.animation?.duration||300],onValueChange:([e])=>v("animation","duration",e),max:2e3,min:100,step:100}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[o.settings.animation?.duration||300,"ms"]})]}),s.jsxs("div",{children:[s.jsx(Te,{className:"text-sm",children:"ÏßÄÏó∞ÏãúÍ∞Ñ (ms)"}),s.jsx(Xs,{value:[o.settings.animation?.delay||0],onValueChange:([e])=>v("animation","delay",e),max:1e3,min:0,step:100}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[o.settings.animation?.delay||0,"ms"]})]})]})]})]}),s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{className:"text-sm",children:"Ïª§Ïä§ÌÖÄ CSS"})}),s.jsx(es,{children:s.jsx(Ae,{value:o.settings.customCSS||"",onChange:e=>g("customCSS",e.target.value),placeholder:".my-widget { color: red; }",rows:4,className:"font-mono text-sm"})})]})]})}),s.jsx(_e,{value:"preview",className:"mt-4",children:s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsxs(Ze,{className:"flex items-center gap-2",children:[s.jsx(d,{className:"w-4 h-4"}),"ÎØ∏Î¶¨Î≥¥Í∏∞"]})}),s.jsx(es,{children:s.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("p",{children:"ÏúÑÏ†Ø ÎØ∏Î¶¨Î≥¥Í∏∞"}),s.jsx("p",{className:"text-sm mt-1",children:"Ïã§Ï†ú ÏÇ¨Ïù¥Ìä∏ÏóêÏÑúÏùò Î™®ÏäµÏùÑ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§"})]})})})]})})]})})]})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[s.jsx(qe,{variant:"outline",onClick:i,children:"Ï∑®ÏÜå"}),s.jsxs(qe,{onClick:()=>{o.title.trim()?h?j.mutate({title:o.title,content:o.content,settings:o.settings,position:o.position}):u.mutate({type:n,title:o.title,content:o.content,position:o.position,settings:o.settings}):l.error("ÏúÑÏ†Ø Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî")},disabled:u.isPending||j.isPending,children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),h?"ÏàòÏ†ï":"ÏÉùÏÑ±"]})]})]})})};const ra=({onApplyTemplate:a})=>{const[t,i]=e.useState(""),[n,r]=e.useState("all"),[c,o]=e.useState("grid"),[x,m]=e.useState(!1),{data:u=[],isLoading:j}=ds({queryKey:["widget-templates",n,t,x],queryFn:async()=>{const e=new URLSearchParams;"all"!==n&&e.append("category",n),t&&e.append("search",t),x&&e.append("premium","true");return(await Ee.api.get(`/widget-templates?${e}`)).data.templates}}),p=os({mutationFn:async e=>Ee.api.post(`/widget-templates/${e}/apply`,{targetArea:"footer-1",replaceExisting:!1}),onSuccess:()=>{l.success("ÏúÑÏ†Ø ÌÖúÌîåÎ¶øÏù¥ Ï†ÅÏö©ÎêòÏóàÏäµÎãàÎã§"),a()},onError:()=>{l.error("ÌÖúÌîåÎ¶ø Ï†ÅÏö©Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),g=e=>{e.isPremium?l("ÌîÑÎ¶¨ÎØ∏ÏóÑ ÌÖúÌîåÎ¶øÏùÄ Íµ¨Îß§Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§"):p.mutate(e.id)},v=e=>({content:"ÏΩòÌÖêÏ∏†",navigation:"ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò",social:"ÏÜåÏÖú",forms:"Ìèº",media:"ÎØ∏ÎîîÏñ¥",advanced:"Í≥†Í∏â"}[e]||e),y=u.filter(e=>{const s=e.name.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()),a="all"===n||e.category===n,l=!x||e.isPremium;return s&&a&&l}),N=e=>s.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(a=>s.jsx(pe,{className:"w-3 h-3 "+(a<=e?"text-yellow-400 fill-current":"text-gray-300")},a)),s.jsx("span",{className:"text-xs text-gray-600 ml-1",children:e.toFixed(1)})]});return j?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"ÏúÑÏ†Ø ÌÖúÌîåÎ¶øÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold",children:"ÏúÑÏ†Ø ÎùºÏù¥Î∏åÎü¨Î¶¨"}),s.jsx("p",{className:"text-gray-600",children:"ÎØ∏Î¶¨ ÎßåÎì§Ïñ¥ÏßÑ ÏúÑÏ†Ø ÌÖúÌîåÎ¶øÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ Îπ†Î•¥Í≤å ÏÇ¨Ïù¥Ìä∏Î•º Íµ¨ÏÑ±ÌïòÏÑ∏Ïöî"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{variant:"grid"===c?"default":"outline",size:"sm",onClick:()=>o("grid"),children:s.jsx(ye,{className:"w-4 h-4"})}),s.jsx(qe,{variant:"list"===c?"default":"outline",size:"sm",onClick:()=>o("list"),children:s.jsx($,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx(Fe,{placeholder:"ÌÖúÌîåÎ¶ø Í≤ÄÏÉâ...",value:t,onChange:e=>i(e.target.value),className:"pl-10"})]})}),s.jsxs(Ie,{value:n,onValueChange:e=>r(e),children:[s.jsx(Pe,{className:"w-48",children:s.jsx($e,{placeholder:"Ïπ¥ÌÖåÍ≥†Î¶¨ ÏÑ†ÌÉù"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Î™®Îì† Ïπ¥ÌÖåÍ≥†Î¶¨"}),s.jsx(Le,{value:"content",children:"ÏΩòÌÖêÏ∏†"}),s.jsx(Le,{value:"navigation",children:"ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò"}),s.jsx(Le,{value:"social",children:"ÏÜåÏÖú"}),s.jsx(Le,{value:"forms",children:"Ìèº"}),s.jsx(Le,{value:"media",children:"ÎØ∏ÎîîÏñ¥"}),s.jsx(Le,{value:"advanced",children:"Í≥†Í∏â"})]})]}),s.jsxs(qe,{variant:x?"default":"outline",onClick:()=>m(!x),className:"flex items-center gap-2",children:[s.jsx(je,{className:"w-4 h-4"}),"ÌîÑÎ¶¨ÎØ∏ÏóÑÎßå"]})]}),"grid"===c?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(e=>s.jsxs(Je,{className:"group hover:shadow-lg transition-shadow",children:[s.jsxs(Xe,{className:"pb-2",children:[s.jsxs("div",{className:"aspect-video bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg mb-3 relative overflow-hidden",children:[e.preview?s.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:s.jsx(d,{className:"w-8 h-8"})}),e.isPremium&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs(Qe,{className:"bg-yellow-500 text-white",children:[s.jsx(je,{className:"w-3 h-3 mr-1"}),"Premium"]})})]}),s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsx(Ze,{className:"text-lg",children:e.name}),s.jsx(Qe,{variant:"outline",className:"mt-1",children:v(e.category)})]})})]}),s.jsxs(es,{className:"pt-0",children:[s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[N(e.rating),s.jsx("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ue,{className:"w-3 h-3"}),e.downloads.toLocaleString()]})})]}),s.jsx(qe,{className:"w-full",onClick:()=>g(e),disabled:p.isPending,children:e.isPremium?s.jsxs(s.Fragment,{children:[s.jsx(je,{className:"w-4 h-4 mr-2"}),"Íµ¨Îß§ÌïòÍ∏∞"]}):s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"Ï†ÅÏö©ÌïòÍ∏∞"]})})]})]},e.id))}):s.jsx("div",{className:"space-y-4",children:y.map(e=>s.jsx(Je,{children:s.jsx(es,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-16 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-lg flex-shrink-0 overflow-hidden",children:e.preview?s.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:s.jsx(d,{className:"w-6 h-6"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-start justify-between mb-1",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-medium",children:e.name}),e.isPremium&&s.jsxs(Qe,{className:"bg-yellow-500 text-white",children:[s.jsx(je,{className:"w-3 h-3 mr-1"}),"Premium"]}),s.jsx(Qe,{variant:"outline",children:v(e.category)})]})}),s.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-1",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4",children:[N(e.rating),s.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[s.jsx(ue,{className:"w-3 h-3"}),e.downloads.toLocaleString(),"Ìöå Îã§Ïö¥Î°úÎìú"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(qe,{variant:"outline",size:"sm",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"ÎØ∏Î¶¨Î≥¥Í∏∞"]}),s.jsx(qe,{size:"sm",onClick:()=>g(e),disabled:p.isPending,children:e.isPremium?s.jsxs(s.Fragment,{children:[s.jsx(je,{className:"w-4 h-4 mr-2"}),"Íµ¨Îß§"]}):s.jsxs(s.Fragment,{children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"Ï†ÅÏö©"]})})]})]})})},e.id))}),0===y.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ÌÖúÌîåÎ¶øÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Îã§Î•∏ Í≤ÄÏÉâÏñ¥ÎÇò ÌïÑÌÑ∞Î•º ÏãúÎèÑÌï¥Î≥¥ÏÑ∏Ïöî"}),s.jsx(qe,{variant:"outline",onClick:()=>{i(""),r("all"),m(!1)},children:"ÌïÑÌÑ∞ Ï¥àÍ∏∞Ìôî"})]}),s.jsxs("div",{className:"mt-12",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Ï∂îÏ≤ú ÌÖúÌîåÎ¶ø"}),s.jsx("p",{className:"text-gray-600",children:"Ïù∏Í∏∞ ÏûàÎäî ÏúÑÏ†Ø ÌÖúÌîåÎ¶øÎì§ÏùÑ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî"})]}),s.jsxs(qe,{variant:"outline",size:"sm",children:["Ï†ÑÏ≤¥ Î≥¥Í∏∞",s.jsx(we,{className:"w-4 h-4 ml-2"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.slice(0,3).map(e=>s.jsxs(Je,{className:"group hover:shadow-lg transition-shadow",children:[s.jsxs(Xe,{className:"pb-2",children:[s.jsxs("div",{className:"aspect-video bg-gradient-to-br from-purple-50 to-pink-100 rounded-lg mb-3 relative overflow-hidden",children:[e.preview?s.jsx("img",{src:e.preview,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:s.jsx(d,{className:"w-8 h-8"})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsxs(Qe,{className:"bg-purple-500 text-white",children:[s.jsx(pe,{className:"w-3 h-3 mr-1"}),"Ï∂îÏ≤ú"]})})]}),s.jsx(Ze,{className:"text-base",children:e.name})]}),s.jsxs(es,{className:"pt-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[N(e.rating),s.jsxs("span",{className:"text-xs text-gray-500",children:[e.downloads.toLocaleString(),"Ìöå"]})]}),s.jsxs(qe,{size:"sm",className:"w-full",onClick:()=>g(e),children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"Ï†ÅÏö©ÌïòÍ∏∞"]})]})]},e.id))})]})]})},ca=()=>{const[a,t]=e.useState("builder"),[i,n]=e.useState(""),[r,c]=e.useState("all"),[o,h]=e.useState("desktop"),[m,j]=e.useState(!1),[v,y]=e.useState(null),b=cs(),{data:w,isLoading:C}=ds({queryKey:["widgets"],queryFn:async()=>(await Ee.api.get("/widgets")).data}),S=os({mutationFn:async e=>Ee.api.delete(`/widgets/${e}`),onSuccess:()=>{l.success("ÏúÑÏ†ØÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§"),b.invalidateQueries({queryKey:["widgets"]})},onError:()=>{l.error("ÏÇ≠Ï†úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§")}}),F=os({mutationFn:async e=>Ee.api.patch(`/widgets/${e.id}`,{isActive:e.isActive}),onSuccess:()=>{b.invalidateQueries({queryKey:["widgets"]})}}),I=w?.widgets||[],P=w?.areas||[],$=I.filter(e=>{const s=e.title.toLowerCase().includes(i.toLowerCase())||e.type.toLowerCase().includes(i.toLowerCase()),a="all"===r||e.position===r;return s&&a}),z=I.reduce((e,s)=>(e[s.position]||(e[s.position]=[]),e[s.position].push(s),e),{});Object.keys(z).forEach(e=>{z[e].sort((e,s)=>e.order-s.order)});const L=e=>{y(e),j(!0)},A=e=>{confirm(`"${e.title}" ÏúÑÏ†ØÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)&&S.mutate(e.id)},q=e=>{F.mutate({id:e.id,isActive:!e.isActive})},E=e=>({text:"ÌÖçÏä§Ìä∏",html:"HTML",image:"Ïù¥ÎØ∏ÏßÄ",menu:"Î©îÎâ¥","recent-posts":"ÏµúÍ∑º Í≤åÏãúÍ∏Ä",categories:"Ïπ¥ÌÖåÍ≥†Î¶¨",tags:"ÌÉúÍ∑∏",archives:"ÏïÑÏπ¥Ïù¥Î∏å",search:"Í≤ÄÏÉâ","social-links":"ÏÜåÏÖú ÎßÅÌÅ¨","contact-info":"Ïó∞ÎùΩÏ≤ò Ï†ïÎ≥¥",newsletter:"Îâ¥Ïä§Î†àÌÑ∞","custom-code":"Ïª§Ïä§ÌÖÄ ÏΩîÎìú","rss-feed":"RSS ÌîºÎìú",calendar:"Ï∫òÎ¶∞Îçî"}[e]||e);return C?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"ÏúÑÏ†ØÏùÑ Î∂àÎü¨Ïò§Îäî Ï§ë..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ÏúÑÏ†Ø Í¥ÄÎ¶¨"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"ÏÇ¨Ïù¥Ìä∏Ïùò ÏúÑÏ†ØÏùÑ Í¥ÄÎ¶¨ÌïòÍ≥† Î†àÏù¥ÏïÑÏõÉÏùÑ Íµ¨ÏÑ±ÌïòÏÑ∏Ïöî"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center border rounded-lg p-1",children:[s.jsx(qe,{size:"sm",variant:"desktop"===o?"default":"ghost",onClick:()=>h("desktop"),children:s.jsx(te,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"tablet"===o?"default":"ghost",onClick:()=>h("tablet"),children:s.jsx(ie,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"mobile"===o?"default":"ghost",onClick:()=>h("mobile"),children:s.jsx(ne,{className:"w-4 h-4"})})]}),s.jsxs(qe,{onClick:()=>{y(null),j(!0)},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏúÑÏ†Ø Ï∂îÍ∞Ä"]})]})]}),s.jsxs(Re,{value:a,onValueChange:e=>t(e),children:[s.jsxs(Ke,{children:[s.jsx(Be,{value:"builder",children:"ÏúÑÏ†Ø ÎπåÎçî"}),s.jsx(Be,{value:"list",children:"Î™©Î°ù Î≥¥Í∏∞"}),s.jsx(Be,{value:"library",children:"ÏúÑÏ†Ø ÎùºÏù¥Î∏åÎü¨Î¶¨"})]}),s.jsx(_e,{value:"builder",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[s.jsx("div",{className:"xl:col-span-2",children:s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsxs(Ze,{className:"flex items-center gap-2",children:[s.jsx(Ne,{className:"w-5 h-5"}),"ÏúÑÏ†Ø ÏòÅÏó≠"]})}),s.jsx(es,{children:s.jsx("div",{className:"space-y-6",children:P.map(e=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:e.name}),s.jsx("p",{className:"text-sm text-gray-600",children:e.description})]}),s.jsx(Qe,{variant:e.isActive?"default":"secondary",children:e.isActive?"ÌôúÏÑ±":"ÎπÑÌôúÏÑ±"})]}),s.jsx("div",{className:"grid gap-3 "+(e.settings.columns>1?`grid-cols-${e.settings.columns}`:"grid-cols-1"),children:z[e.position]?.map(e=>s.jsxs("div",{className:"border rounded-lg p-3 transition-all "+(e.isActive?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qe,{variant:"outline",className:"text-xs",children:E(e.type)}),!e.isActive&&s.jsx(Qe,{variant:"secondary",className:"text-xs",children:"ÎπÑÌôúÏÑ±"})]}),s.jsxs(Ue,{children:[s.jsx(Ye,{children:s.jsx(qe,{size:"sm",variant:"ghost",className:"h-6 w-6 p-0",children:s.jsx(u,{className:"w-3 h-3"})})}),s.jsxs(Oe,{align:"end",children:[s.jsxs(We,{onClick:()=>L(e),children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Ìé∏Ïßë"]}),s.jsx(We,{onClick:()=>q(e),children:e.isActive?s.jsxs(s.Fragment,{children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),"ÎπÑÌôúÏÑ±Ìôî"]}):s.jsxs(s.Fragment,{children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"ÌôúÏÑ±Ìôî"]})}),s.jsxs(We,{children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Î≥µÏ†ú"]}),s.jsx(Ge,{}),s.jsxs(We,{onClick:()=>A(e),className:"text-red-600",children:[s.jsx(g,{className:"w-4 h-4 mr-2"}),"ÏÇ≠Ï†ú"]})]})]})]}),s.jsx("h4",{className:"font-medium text-sm",children:e.title}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["ÏàúÏÑú: ",e.order]})]},e.id))||s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center text-gray-500",children:[s.jsx(x,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"ÏúÑÏ†ØÏùÑ Ï∂îÍ∞ÄÌïòÏÑ∏Ïöî"})]})})]},e.id))})})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"ÏúÑÏ†Ø ÌÜµÍ≥Ñ"})}),s.jsx(es,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Ï†ÑÏ≤¥ ÏúÑÏ†Ø"}),s.jsxs("span",{className:"font-medium",children:[I.length,"Í∞ú"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"ÌôúÏÑ± ÏúÑÏ†Ø"}),s.jsxs("span",{className:"font-medium text-green-600",children:[I.filter(e=>e.isActive).length,"Í∞ú"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"ÎπÑÌôúÏÑ± ÏúÑÏ†Ø"}),s.jsxs("span",{className:"font-medium text-red-600",children:[I.filter(e=>!e.isActive).length,"Í∞ú"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"ÏúÑÏ†Ø ÏòÅÏó≠"}),s.jsxs("span",{className:"font-medium",children:[P.length,"Í∞ú"]})]})]})})]}),s.jsxs(Je,{children:[s.jsx(Xe,{children:s.jsx(Ze,{children:"Îπ†Î•∏ ÏûëÏóÖ"})}),s.jsx(es,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs(qe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>{y(null),j(!0)},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏÉà ÏúÑÏ†Ø Ï∂îÍ∞Ä"]}),s.jsxs(qe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>t("library"),children:[s.jsx(ue,{className:"w-4 h-4 mr-2"}),"ÏúÑÏ†Ø ÎùºÏù¥Î∏åÎü¨Î¶¨"]}),s.jsxs(qe,{variant:"outline",size:"sm",className:"w-full justify-start",children:[s.jsx(k,{className:"w-4 h-4 mr-2"}),"ÏòÅÏó≠ ÏÑ§Ï†ï"]})]})})]})]})]})}),s.jsxs(_e,{value:"list",className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(Fe,{placeholder:"ÏúÑÏ†Ø Í≤ÄÏÉâ...",value:i,onChange:e=>n(e.target.value),className:"max-w-md"})}),s.jsxs(Ie,{value:r,onValueChange:e=>c(e),children:[s.jsx(Pe,{className:"w-48",children:s.jsx($e,{placeholder:"ÏúÑÏπò ÏÑ†ÌÉù"})}),s.jsxs(ze,{children:[s.jsx(Le,{value:"all",children:"Î™®Îì† ÏúÑÏπò"}),s.jsx(Le,{value:"footer-1",children:"Ìë∏ÌÑ∞ 1"}),s.jsx(Le,{value:"footer-2",children:"Ìë∏ÌÑ∞ 2"}),s.jsx(Le,{value:"footer-3",children:"Ìë∏ÌÑ∞ 3"}),s.jsx(Le,{value:"footer-4",children:"Ìë∏ÌÑ∞ 4"}),s.jsx(Le,{value:"sidebar-main",children:"Î©îÏù∏ ÏÇ¨Ïù¥ÎìúÎ∞î"}),s.jsx(Le,{value:"sidebar-shop",children:"ÏáºÌïë ÏÇ¨Ïù¥ÎìúÎ∞î"}),s.jsx(Le,{value:"header-top",children:"Ìó§Îçî ÏÉÅÎã®"}),s.jsx(Le,{value:"header-bottom",children:"Ìó§Îçî ÌïòÎã®"})]})]})]}),s.jsx("div",{className:"grid gap-4",children:$.map(e=>{return s.jsx(Je,{children:s.jsx(es,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-medium",children:e.title}),s.jsx(Qe,{variant:"outline",className:"text-xs",children:E(e.type)}),!e.isActive&&s.jsx(Qe,{variant:"secondary",className:"text-xs",children:"ÎπÑÌôúÏÑ±"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[(a=e.position,{"footer-1":"Ìë∏ÌÑ∞ 1","footer-2":"Ìë∏ÌÑ∞ 2","footer-3":"Ìë∏ÌÑ∞ 3","footer-4":"Ìë∏ÌÑ∞ 4","sidebar-main":"Î©îÏù∏ ÏÇ¨Ïù¥ÎìúÎ∞î","sidebar-shop":"ÏáºÌïë ÏÇ¨Ïù¥ÎìúÎ∞î","header-top":"Ìó§Îçî ÏÉÅÎã®","header-bottom":"Ìó§Îçî ÌïòÎã®"}[a]||a)," ‚Ä¢ ÏàúÏÑú: ",e.order]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>L(e),children:s.jsx(N,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>q(e),children:e.isActive?s.jsx(f,{className:"w-4 h-4"}):s.jsx(d,{className:"w-4 h-4"})}),s.jsx(qe,{size:"sm",variant:"outline",onClick:()=>A(e),className:"text-red-600 hover:text-red-700",children:s.jsx(g,{className:"w-4 h-4"})})]})]})})},e.id);var a})}),0===$.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ne,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"ÏúÑÏ†ØÏù¥ ÏóÜÏäµÎãàÎã§"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"ÏÉàÎ°úÏö¥ ÏúÑÏ†ØÏùÑ Ï∂îÍ∞ÄÌï¥Î≥¥ÏÑ∏Ïöî"}),s.jsxs(qe,{onClick:()=>{y(null),j(!0)},children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"ÏúÑÏ†Ø Ï∂îÍ∞Ä"]})]})]}),s.jsx(_e,{value:"library",children:s.jsx(ra,{onApplyTemplate:()=>{b.invalidateQueries({queryKey:["widgets"]}),t("builder")}})})]}),m&&s.jsx(na,{widget:v,onSave:()=>{j(!1),y(null),b.invalidateQueries({queryKey:["widgets"]})},onCancel:()=>{j(!1),y(null)}})]})},da=()=>s.jsxs(ke,{children:[s.jsx(Ce,{path:"/",element:s.jsx(Se,{to:"posts",replace:!0})}),s.jsx(Ce,{path:"posts",element:s.jsx(Cs,{})}),s.jsx(Ce,{path:"posts/new",element:s.jsx(Ps,{})}),s.jsx(Ce,{path:"posts/:id/edit",element:s.jsx(Ps,{})}),s.jsx(Ce,{path:"pages",element:s.jsx(Ds,{})}),s.jsx(Ce,{path:"pages/new",element:s.jsx(vs,{})}),s.jsx(Ce,{path:"pages/:id/edit",element:s.jsx(vs,{})}),s.jsx(Ce,{path:"cpt",element:s.jsx(Ms,{})}),s.jsx(Ce,{path:"cpt/new",element:s.jsx(Vs,{})}),s.jsx(Ce,{path:"cpt/:id/edit",element:s.jsx(Vs,{})}),s.jsx(Ce,{path:"cpt/:cptId/fields",element:s.jsx(Ks,{})}),s.jsx(Ce,{path:"acf",element:s.jsx(_s,{})}),s.jsx(Ce,{path:"acf/new",element:s.jsx(Os,{})}),s.jsx(Ce,{path:"acf/:id/edit",element:s.jsx(Os,{})}),s.jsx(Ce,{path:"media",element:s.jsx(fs,{})}),s.jsx(Ce,{path:"templates",element:s.jsx(ta,{})}),s.jsx(Ce,{path:"widgets",element:s.jsx(ca,{})}),s.jsx(Ce,{path:":slug",element:s.jsx(Bs,{})}),s.jsx(Ce,{path:":slug/new",element:s.jsx(Ps,{})}),s.jsx(Ce,{path:":slug/:id/edit",element:s.jsx(Ps,{})})]});export{da as default};
