import{r as d,j as e,bs as y,dq as $,ce as F,bD as C,dn as L,J as M,y as B,bA as D,bw as E,w as U,bE as V,F as R,dr as q,V as f}from"./vendor-react-CFXBKh8N.js";import{C as m,m as x,B as h,k as z,l as H,s as p,t as J}from"./page-gutenberg-CihbTQe_.js";import{S as G}from"./page-template-editor-qYhqNsmP.js";import{a as j}from"./api-Djf0oLEC.js";import"./wp-block-editor-DhaEFHLK.js";import"./wp-i18n-DXAO7rTz.js";import"./wp-core-CKjiTxtQ.js";import"./wp-blocks-core-CqiW7X_r.js";import"./wp-misc-BCLjNiWG.js";import"./wp-data-DkVHr7c4.js";import"./wp-components-BOsGWWgw.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-query-D0j4d4-i.js";import"./vendor-utils-DQ8F5vJI.js";const w={getStates:async()=>(await j.get("/v1/apps/states")).data.data,getState:async i=>(await j.get(`/v1/apps/states/${i}`)).data.data,updateState:async(i,l)=>(await j.put(`/v1/apps/states/${i}`,{isActive:l})).data.data,batchUpdateStates:async i=>(await j.post("/v1/apps/states/batch",{updates:i})).data.data},I=[{id:"ecommerce",name:"전자상거래",description:"온라인 쇼핑몰 기능 - 상품 관리, 주문 처리, 결제 시스템",icon:e.jsx(B,{className:"w-6 h-6"}),status:"active",version:"2.0.0",author:"O4O Platform",category:"Sales",isCore:!0,features:["상품 관리","재고 관리","주문 처리","Toss Payments 결제"],settings:"/ecommerce/settings"},{id:"affiliate",name:"제휴 마케팅",description:"파트너 추천 프로그램 및 수수료 관리 시스템",icon:e.jsx(D,{className:"w-6 h-6"}),status:"inactive",version:"1.5.0",author:"O4O Platform",category:"Marketing",isCore:!1,features:["추천 링크 생성","수수료 추적","파트너 대시보드","실적 분석"],settings:"/affiliate/settings"},{id:"crowdfunding",name:"크라우드펀딩",description:"프로젝트 펀딩 및 후원 관리 플랫폼",icon:e.jsx(E,{className:"w-6 h-6"}),status:"active",version:"1.2.0",author:"O4O Platform",category:"Finance",isCore:!1,features:["프로젝트 관리","후원자 관리","리워드 시스템","펀딩 통계"],dependencies:["ecommerce"],settings:"/crowdfunding/settings"},{id:"forum",name:"포럼/커뮤니티",description:"사용자 커뮤니티 및 토론 게시판",icon:e.jsx(U,{className:"w-6 h-6"}),status:"active",version:"1.8.0",author:"O4O Platform",category:"Community",isCore:!1,features:["게시판 관리","사용자 등급","포인트 시스템","실시간 알림"],settings:"/forum/settings"},{id:"signage",name:"디지털 사이니지",description:"디지털 디스플레이 콘텐츠 관리 시스템",icon:e.jsx(V,{className:"w-6 h-6"}),status:"inactive",version:"1.0.0",author:"O4O Platform",category:"Media",isCore:!1,features:["콘텐츠 스케줄링","다중 디스플레이","실시간 업데이트","템플릿 관리"],settings:"/signage/settings"},{id:"cpt-acf",name:"CPT & ACF",description:"사용자 정의 게시물 타입 및 필드 관리",icon:e.jsx(R,{className:"w-6 h-6"}),status:"active",version:"1.3.0",author:"O4O Platform",category:"Content",isCore:!0,features:["커스텀 포스트 타입","커스텀 필드","메타 박스","분류 체계"],settings:"/content/custom-fields"},{id:"vendor",name:"벤더 관리",description:"다중 판매자 마켓플레이스 시스템",icon:e.jsx(q,{className:"w-6 h-6"}),status:"inactive",version:"1.1.0",author:"O4O Platform",category:"Sales",isCore:!1,features:["판매자 대시보드","수수료 정산","상품 승인","판매 통계"],dependencies:["ecommerce"],settings:"/vendors/settings"},{id:"security",name:"보안 관리",description:"시스템 보안 및 사용자 접근 제어",icon:e.jsx(C,{className:"w-6 h-6"}),status:"active",version:"2.1.0",author:"O4O Platform",category:"System",isCore:!0,features:["2단계 인증","IP 차단","활동 로그","권한 관리"],settings:"/settings/security"}],le=()=>{const[i,l]=d.useState(I),[n,u]=d.useState("all"),[v,b]=d.useState(""),[S,g]=d.useState(!1);d.useEffect(()=>{O()},[]);const O=async()=>{try{const t=await w.getStates();l(a=>a.map(s=>({...s,status:t[s.id]?"active":"inactive"})))}catch(t){console.error("Failed to load app states:",t)}},A=async t=>{try{g(!0);const a=i.find(r=>r.id===t);if(!a)return;const s=a.status==="active"?"inactive":"active",o=s==="active";if(o){const c=(a.dependencies||[]).filter(k=>i.find(T=>T.id===k)?.status!=="active");if(c.length>0){f.error(`먼저 다음 앱을 활성화해주세요: ${c.join(", ")}`),g(!1);return}}if(!o){const r=i.filter(c=>c.dependencies?.includes(t)&&c.status==="active");if(r.length>0){f.error(`다음 앱이 이 앱에 의존합니다: ${r.map(c=>c.name).join(", ")}`),g(!1);return}}await w.updateState(t,o),l(i.map(r=>r.id===t?{...r,status:s}:r)),f.success(`${a.name} 앱이 ${s==="active"?"활성화":"비활성화"}되었습니다.`)}catch(a){const s=a.response?.data?.message||"앱 상태 변경에 실패했습니다.";f.error(s)}finally{g(!1)}},N=i.filter(t=>{const a=n==="all"||n==="active"&&t.status==="active"||n==="inactive"&&t.status==="inactive"||n==="core"&&t.isCore,s=t.name.toLowerCase().includes(v.toLowerCase())||t.description.toLowerCase().includes(v.toLowerCase());return a&&s}),P=N.reduce((t,a)=>(t[a.category]||(t[a.category]=[]),t[a.category].push(a),t),{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"앱 관리"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"O4O 플랫폼의 기능을 확장하는 앱들을 관리하세요"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"전체 앱"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(y,{className:"w-8 h-8 text-gray-400"})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"활성화된 앱"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.filter(t=>t.status==="active").length})]}),e.jsx($,{className:"w-8 h-8 text-green-400"})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"비활성화된 앱"}),e.jsx("p",{className:"text-2xl font-bold text-gray-500",children:i.filter(t=>t.status==="inactive").length})]}),e.jsx(F,{className:"w-8 h-8 text-gray-400"})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"코어 앱"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.filter(t=>t.isCore).length})]}),e.jsx(C,{className:"w-8 h-8 text-blue-400"})]})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:n==="all"?"default":"outline",onClick:()=>u("all"),children:"전체"}),e.jsx(h,{variant:n==="active"?"default":"outline",onClick:()=>u("active"),children:"활성화"}),e.jsx(h,{variant:n==="inactive"?"default":"outline",onClick:()=>u("inactive"),children:"비활성화"}),e.jsx(h,{variant:n==="core"?"default":"outline",onClick:()=>u("core"),children:"코어 앱"})]}),e.jsx("input",{type:"text",placeholder:"앱 검색...",value:v,onChange:t=>b(t.target.value),className:"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Object.entries(P).map(([t,a])=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:t}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(s=>e.jsxs(m,{className:`${s.status==="inactive"?"opacity-60":""}`,children:[e.jsx(z,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.status==="active"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:s.icon}),e.jsxs("div",{children:[e.jsxs(H,{className:"text-lg flex items-center gap-2",children:[s.name,s.isCore&&e.jsx(p,{variant:"secondary",className:"text-xs",children:"Core"})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["v",s.version]})]})]}),e.jsx(G,{checked:s.status==="active",onCheckedChange:()=>A(s.id),disabled:s.isCore&&s.status==="active"||S})]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsx(J,{children:s.description}),s.features&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"주요 기능:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.features.slice(0,3).map((o,r)=>e.jsx(p,{variant:"outline",className:"text-xs",children:o},r)),s.features.length>3&&e.jsxs(p,{variant:"outline",className:"text-xs",children:["+",s.features.length-3]})]})]}),s.dependencies&&e.jsxs("div",{className:"text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(L,{className:"w-3 h-3"}),"의존성: ",s.dependencies.join(", ")]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["by ",s.author]}),s.status==="active"&&s.settings&&e.jsxs(h,{size:"sm",variant:"ghost",onClick:()=>window.location.href=s.settings||"#",children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),"설정"]})]})]})]},s.id))})]},t)),N.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(y,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"해당하는 앱이 없습니다"})]})]})};export{le as default};
