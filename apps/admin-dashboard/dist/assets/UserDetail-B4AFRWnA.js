import{b as s,u as e,r as a,V as r,j as t,A as i,bH as c,ce as l,bc as d,bq as n,bM as x,c8 as m,bU as o,bO as j}from"./vendor-react-BoWgD0Bu.js";import{B as p,d as h,e as v,f as g,g as u}from"./page-template-editor-CWJwXWLM.js";import{cy as N,cz as y,cA as f,cB as b,cJ as w,cK as A}from"./wp-misc-fiKRzvVp.js";import{a as k}from"./base-BYZzJ4Oh.js";import{C as S,D as U}from"./vendor-utils-C9jLuAcl.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-CbBSyLUF.js";import"./wp-foundation-BzBJX52f.js";import"./wp-block-editor-main-y2nlPlta.js";import"./wp-i18n-BPC8WmOV.js";import"./wp-block-editor-store-PPID3vJI.js";import"./wp-block-editor-utils-C52tDze8.js";import"./wp-components-CKWj6dcl.js";import"./index-Bu1ofPbL.js";import"./vendor-socket-CMcZe9fK.js";function C(){const{id:C}=s(),$=e(),[R,_]=a.useState(null),[D,E]=a.useState([]),[L,B]=a.useState(!0);a.useEffect(()=>{C&&F()},[C]);const F=async()=>{try{B(!0);const s=await k.get(`/v1/users/${C}`);s.data.success&&_(s.data.data);const e=await k.get(`/v1/users/${C}/approval-history`);e.data.success&&E(e.data.data)}catch(s){r.error("Failed to load user details"),$("/users")}finally{B(!1)}},M=s=>({super_admin:"bg-purple-500",admin:"bg-red-500",vendor:"bg-blue-500",seller:"bg-green-500",customer:"bg-gray-500",business:"bg-yellow-500",moderator:"bg-indigo-500",partner:"bg-pink-500"}[s]||"bg-gray-500"),V=s=>{switch(s){case"approved":return t.jsx(c,{className:"h-4 w-4 text-green-500"});case"rejected":return t.jsx(l,{className:"h-4 w-4 text-red-500"});default:return t.jsx(j,{className:"h-4 w-4 text-gray-500"})}};return L?t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),t.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):R?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(p,{variant:"ghost",onClick:()=>$("/users"),children:[t.jsx(i,{className:"mr-2 h-4 w-4"}),"Back to Users"]}),t.jsx("h1",{className:"text-2xl font-bold",children:R?.name||"Unknown User"})]}),t.jsxs("div",{className:"flex gap-2",children:["pending"===R?.status&&t.jsxs(t.Fragment,{children:[t.jsxs(p,{onClick:async()=>{try{await k.post(`/v1/users/${C}/approve`,{notes:"Approved via admin dashboard"}),r.success("User approved successfully"),F()}catch(s){r.error("Failed to approve user")}},children:[t.jsx(c,{className:"mr-2 h-4 w-4"}),"Approve"]}),t.jsxs(p,{variant:"destructive",onClick:async()=>{try{await k.post(`/v1/users/${C}/reject`,{notes:"Rejected via admin dashboard"}),r.success("User rejected successfully"),F()}catch(s){r.error("Failed to reject user")}},children:[t.jsx(l,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),t.jsxs(p,{variant:"outline",onClick:()=>$(`/users/${C}/edit`),children:[t.jsx(d,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]}),t.jsxs(h,{defaultValue:"overview",className:"w-full",children:[t.jsxs(v,{children:[t.jsx(g,{value:"overview",children:"Overview"}),t.jsx(g,{value:"history",children:"Approval History"}),t.jsx(g,{value:"activity",children:"Activity"})]}),t.jsxs(u,{value:"overview",className:"space-y-6",children:[t.jsxs(N,{children:[t.jsx(y,{children:t.jsx(f,{children:"User Information"})}),t.jsx(b,{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(n,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),t.jsx("p",{className:"font-medium",children:R?.email})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(x,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),t.jsx(w,{className:`${H=R?.status||"pending",{active:"bg-green-500",approved:"bg-green-500",pending:"bg-yellow-500",rejected:"bg-red-500"}[H]||"bg-gray-500"} text-white`,children:R?.status})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Joined"}),t.jsx("p",{className:"font-medium",children:R?S(new Date(Date.now()),"MMM d, yyyy"):""})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(o,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Last Login"}),t.jsx("p",{className:"font-medium",children:R?.lastLoginAt?U(new Date(R?.lastLoginAt),{addSuffix:!0}):"Never"})]})]})]})})]}),t.jsxs(N,{children:[t.jsx(y,{children:t.jsx(f,{children:"Roles & Permissions"})}),t.jsx(b,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Assigned Roles"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:R?.role?[R.role]:[].map(s=>t.jsx(w,{className:`${M(s)} text-white`,children:s.replace("_"," ")},s))})]}),R?.permissions&&R?.permissions.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Special Permissions"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:R?.permissions.map(s=>t.jsx(w,{variant:"outline",children:s},s))})]})]})})]}),t.jsxs(N,{children:[t.jsx(y,{children:t.jsx(f,{children:"Account Status"})}),t.jsx(b,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Email Verified"}),t.jsx("p",{className:"text-2xl font-bold",children:R?.isEmailVerified?"✓":"✗"})]}),t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Account Active"}),t.jsx("p",{className:"text-2xl font-bold",children:R?.isActive?"✓":"✗"})]}),t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Login Attempts"}),t.jsx("p",{className:"text-2xl font-bold",children:R?.loginAttempts||0})]})]})})]})]}),t.jsx(u,{value:"history",className:"space-y-4",children:t.jsxs(N,{children:[t.jsxs(y,{children:[t.jsx(f,{children:"Approval History"}),t.jsx(A,{children:"Timeline of all approval actions for this user"})]}),t.jsx(b,{children:0===D.length?t.jsx("p",{className:"text-center text-gray-500 py-8",children:"No approval history found"}):t.jsx("div",{className:"space-y-4",children:D.map(s=>t.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[t.jsx("div",{className:"mt-1",children:V(s.action)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("p",{className:"font-medium",children:["approved"===s.action&&"Approved","rejected"===s.action&&"Rejected","status_changed"===s.action&&"Status Changed"]}),t.jsxs("span",{className:"text-sm text-gray-500",children:["by ",s.admin?.fullName||s.admin?.email||"System"]})]}),s.notes&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.notes}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:[s.previous_status," → ",s.new_status]}),t.jsx("span",{children:U(new Date(s.created_at),{addSuffix:!0})})]})]})]},s.id))})})]})}),t.jsx(u,{value:"activity",children:t.jsxs(N,{children:[t.jsxs(y,{children:[t.jsx(f,{children:"Recent Activity"}),t.jsx(A,{children:"User's recent actions and system events"})]}),t.jsx(b,{children:t.jsx("p",{className:"text-center text-gray-500 py-8",children:"Activity tracking coming soon"})})]})})]})]}):t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-500",children:"User not found"}),t.jsx(p,{onClick:()=>$("/users"),className:"mt-4",children:"Back to Users"})]})});var H}export{C as default};
