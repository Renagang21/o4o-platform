import{u as e,bv as t,bw as s,bx as i,g as o,_ as r}from"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-a11y-DrduSWFW.js";import{c as n}from"./vendor-ui-CrFdsnXa.js";import{a3 as l}from"./wp-block-editor-api-Buev8_QU.js";import{h as a,B as c}from"./wp-block-editor-core-DL280tSA.js";import{s as d}from"./wp-block-editor-store-B-g1aSix.js";import{j as p,r as m}from"./vendor-react-BQ6HOJoh.js";import{ao as h,F as b,Y as u,x as v,a2 as w}from"./wp-block-editor-utils-M5qXzE1L.js";import{f as g}from"./wp-block-editor-menus-BTQ2wZ-f.js";let x;const _=2e3,k=[];function f({viewportWidth:o,containerWidth:r,minHeight:n,additionalStyles:l=k}){o||(o=r);const[c,{height:u}]=h(),{styles:v}=e(e=>({styles:e(d).getSettings().styles}),[]),w=m.useMemo(()=>v?[...v,{css:"body{height:auto;overflow:hidden;border:none;padding:0;}",__unstableType:"presets"},...l]:v,[v,l]);x=x||m.memo(a);const g=r/o,f=u?r/(u*g):0;return p.jsx(t,{className:"block-editor-block-preview__content",style:{transform:`scale(${g})`,aspectRatio:f,maxHeight:u>_?_*g:void 0,minHeight:n},children:p.jsxs(s,{contentRef:b(e=>{const{ownerDocument:{documentElement:t}}=e;t.classList.add("block-editor-block-preview__content-iframe"),t.style.position="absolute",t.style.width="100%",e.style.boxSizing="border-box",e.style.position="absolute",e.style.width="100%"},[]),"aria-hidden":!0,tabIndex:-1,style:{position:"absolute",width:o,height:u,pointerEvents:"none",maxHeight:_,minHeight:0!==g&&g<1&&n?n/g:n},children:[p.jsx(i,{styles:w}),c,p.jsx(x,{renderAppender:!1})]})})}function j(e){const[t,{width:s}]=h();return p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{position:"relative",width:"100%",height:0},children:t}),p.jsx("div",{className:"block-editor-block-preview__container",children:!!s&&p.jsx(f,{...e,containerWidth:s})})]})}const y=[];const M=m.memo(function({blocks:t,viewportWidth:s=1200,minHeight:i,additionalStyles:r=y,__experimentalMinHeight:n,__experimentalPadding:a}){n&&(i=n,o("The __experimentalMinHeight prop",{since:"6.2",version:"6.4",alternative:"minHeight"})),a&&(r=[...r,{css:`body { padding: ${a}px; }`}],o("The __experimentalPadding prop of BlockPreview",{since:"6.2",version:"6.4",alternative:"additionalStyles"}));const c=e(e=>e(d).getSettings(),[]),h=m.useMemo(()=>({...c,focusMode:!1,__unstableIsPreviewMode:!0}),[c]),b=m.useMemo(()=>Array.isArray(t)?t:[t],[t]);return t&&0!==t.length?p.jsx(l,{value:b,settings:h,children:p.jsx(j,{viewportWidth:s,minHeight:i,additionalStyles:r})}):null});function H({blocks:t,props:s={},layout:o}){const r=e(e=>e(d).getSettings(),[]),a=m.useMemo(()=>({...r,styles:void 0,focusMode:!1,__unstableIsPreviewMode:!0}),[r]),h=u(),b=v([s.ref,h]),w=m.useMemo(()=>Array.isArray(t)?t:[t],[t]),g=p.jsxs(l,{value:w,settings:a,children:[p.jsx(i,{}),p.jsx(c,{renderAppender:!1,layout:o})]});return{...s,ref:b,className:n(s.className,"block-editor-block-preview__live-content","components-disabled"),children:t?.length?g:null}}function N({blocks:e}){return w("medium","<")?null:p.jsx("div",{className:"block-editor-block-switcher__popover-preview-container",children:p.jsx(g,{className:"block-editor-block-switcher__popover-preview",placement:"right-start",focusOnMount:!1,offset:16,children:p.jsxs("div",{className:"block-editor-block-switcher__preview",children:[p.jsx("div",{className:"block-editor-block-switcher__preview-title",children:r("Preview")}),p.jsx(M,{viewportWidth:500,blocks:e})]})})})}function P(){return o("wp.blockEditor.PreviewOptions",{version:"6.5"}),null}export{M as B,N as P,P as a,H as u};
