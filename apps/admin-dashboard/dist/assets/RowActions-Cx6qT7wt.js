import{r as e,j as o,bQ as s}from"./vendor-react-40ZmJ4HC.js";import{a}from"./index-CDOT2nxa.js";import{B as n}from"./page-gutenberg-CxDN_6a_.js";import{c as i}from"./vendor-ui-CrFdsnXa.js";function t({items:o,idField:s="id",actions:n}){const[i,t]=e.useState(new Set),[l,m]=e.useState(!1),{success:r,error:c}=a(),d=e.useMemo(()=>0!==o.length&&o.every(e=>i.has(String(e[s]))),[o,i,s]),u=e.useMemo(()=>0!==o.length&&(o.some(e=>i.has(String(e[s])))&&!d),[o,i,s,d]),p=e.useCallback(()=>{if(d)t(new Set);else{const e=new Set(o.map(e=>String(e[s])));t(e)}},[o,s,d]),b=e.useCallback(e=>{t(o=>{const s=new Set(o);return s.has(e)?s.delete(e):s.add(e),s})},[]),h=e.useCallback(()=>{t(new Set)},[]),N=e.useCallback(async e=>{const o=n.find(o=>o.value===e);if(o)if(0!==i.size){if(o.confirmMessage){if(!window.confirm(o.confirmMessage.replace("{count}",String(i.size))))return}m(!0);try{await o.action(Array.from(i)),r(`${o.label} applied to ${i.size} item(s)`),h()}catch(s){c(`Failed to apply ${o.label}: ${s instanceof Error?s.message:"Unknown error"}`)}finally{m(!1)}}else c("No items selected");else c("Invalid action selected")},[n,i,r,c,h]);return{selectedIds:i,selectedCount:i.size,isAllSelected:d,isSomeSelected:u,isProcessing:l,toggleAll:p,toggleItem:b,clearSelection:h,executeBulkAction:N,isSelected:e=>i.has(e)}}const l=({actions:s,selectedCount:a,onActionExecute:i,isProcessing:t=!1,position:l="top"})=>{const[m,r]=e.useState("");return o.jsxDEV("div",{className:`tablenav ${l}`,children:o.jsxDEV("div",{className:"alignleft actions bulkactions",children:[o.jsxDEV("label",{htmlFor:`bulk-action-selector-${l}`,className:"screen-reader-text",children:"Select bulk action"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/BulkActionBar.tsx",lineNumber:34,columnNumber:9},void 0),o.jsxDEV("select",{id:`bulk-action-selector-${l}`,name:"action",value:m,onChange:e=>r(e.target.value),disabled:t,children:[o.jsxDEV("option",{value:"",children:"Bulk actions"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/BulkActionBar.tsx",lineNumber:44,columnNumber:11},void 0),s.map(e=>o.jsxDEV("option",{value:e.value,children:e.label},e.value,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/BulkActionBar.tsx",lineNumber:46,columnNumber:13},void 0))]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/BulkActionBar.tsx",lineNumber:37,columnNumber:9},void 0),o.jsxDEV(n,{className:"button action",onClick:()=>{m&&(i(m),r(""))},disabled:!m||0===a||t,children:t?"Processing...":"Apply"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/BulkActionBar.tsx",lineNumber:51,columnNumber:9},void 0),a>0&&o.jsxDEV("span",{className:"selected-count",children:[a," item",1!==a?"s":""," selected"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/BulkActionBar.tsx",lineNumber:59,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/BulkActionBar.tsx",lineNumber:33,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/BulkActionBar.tsx",lineNumber:32,columnNumber:5},void 0)},m=({actions:a,visible:n=!1})=>{const[t,l]=e.useState(n),m=e.useRef(null);return e.useEffect(()=>{l(n)},[n]),o.jsxDEV("div",{ref:m,className:i("row-actions",!t&&"hidden"),children:a.map((e,n)=>{const t=n===a.length-1;return e.href?o.jsxDEV("span",{children:[o.jsxDEV(s,{to:e.href,className:i("row-action-link",e.isDelete&&"text-red-600 hover:text-red-800",e.isDisabled&&"opacity-50 cursor-not-allowed",e.className),onClick:e.isDisabled?e=>e.preventDefault():void 0,children:e.label},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/RowActions.tsx",lineNumber:45,columnNumber:15},void 0),!t&&o.jsxDEV("span",{className:"text-gray-400 mx-1",children:"|"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/RowActions.tsx",lineNumber:57,columnNumber:27},void 0)]},n,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/RowActions.tsx",lineNumber:44,columnNumber:13},void 0):o.jsxDEV("span",{children:[o.jsxDEV("button",{onClick:e.onClick,disabled:e.isDisabled,className:i("row-action-button",e.isDelete&&"text-red-600 hover:text-red-800",e.isDisabled&&"opacity-50 cursor-not-allowed",e.className),children:e.label},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/RowActions.tsx",lineNumber:63,columnNumber:15},void 0),!t&&o.jsxDEV("span",{className:"text-gray-400 mx-1",children:"|"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/RowActions.tsx",lineNumber:75,columnNumber:27},void 0)]},n,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/RowActions.tsx",lineNumber:62,columnNumber:13},void 0)})},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/components/common/RowActions.tsx",lineNumber:32,columnNumber:5},void 0)};export{l as B,m as R,t as u};
//# sourceMappingURL=RowActions-Cx6qT7wt.js.map
