{"version":3,"mappings":"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","names":["ReactNamespace","ReactExports","React","key","ReactDOMExports","checkVersion","data","storedVersion","names","name","initVersionCheck","visibilityTimeout","AuthContext","createContext","useAuth","context","useContext","AuthProvider","children","ssoClient","onAuthError","getInitialState","stored","parsed","e","user","setUser","useState","isLoading","setIsLoading","storedUser","storedToken","error","setError","authClient","AuthClient","useEffect","sessionData","login","credentials","response","authStorage","err","errorMessage","logout","clearError","getSessionStatus","now","expiresAt","remainingTime","value","_jsx","SessionManager","warningBeforeExpiry","onSessionExpiring","warningShownRef","useRef","interval","_Fragment","AccessDeniedComponent","showContactAdmin","_jsxs","AdminProtectedRoute","requiredRoles","requiredPermissions","isAuthenticated","navigate","useNavigate","location","useLocation","hasStoredAuth","token","adminStorage","timeoutId","delay","userRole","style","ErrorBoundary","Component","errorInfo","jsxs","jsx","AlertTriangle","RefreshCw","ThemeContext","useTheme","ThemeProvider","defaultTheme","storageKey","theme","setThemeState","resolvedTheme","setResolvedTheme","root","resolved","mediaQuery","handleChange","newResolved","setTheme","newTheme","toggleTheme","prev","createJSONStorage","getStorage","options","storage","_a","parse","str2","str","newValue","toThenable","fn","input","result","onFulfilled","_onRejected","_onFulfilled","onRejected","persistImpl","config","baseOptions","set","get","api","state","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","args","setItem","savedSetState","replace","configResult","stateFromStorage","hydrate","_b","cb","_a2","postRehydrationCallback","deserializedStorageValue","migration","migrationResult","migrated","migratedState","newOptions","persist","ssoConfig","apiEndpoints","SSOService","onSessionChange","cookies","cookie","app","returnPath","targetUrl","ssoService","useAuthStore","create","userData","currentUser","loading","storedAuth","storedState","DefaultShortcodeRegistry","definition","validate","globalRegistry","ShortcodeCache","maxSize","defaultTTL","type","attributes","contextKey","attrKey","a","b","entry","ttl","firstKey","pattern","regex","keysToDelete","shortcodeCache","CACHE_CONFIG","ErrorMessage","fallback","showDetails","className","Placeholder","lines","_","i","ShortcodeErrorBoundary","props","DefaultTemplate","posts","post","GridTemplate","ListTemplate","CardTemplate","templates","CPTListShortcode","setPosts","setLoading","attrs","finalAttrs","fetchPosts","cacheKey","cached","params","mappedPosts","Template","formatters","format","date","rtf","diff","length","CPTFieldShortcode","setValue","ctx","postId","postType","field","currentPost","fieldValue","formattedValue","wrapperTag","createElement","formatACFValue","size","imageUrl","img","index","separator","v","term","row","val","ACFFieldShortcode","fieldData","setFieldData","fieldName","actualPostId","formattedContent","formatMetaValue","numValue","userId","MetaFieldShortcode","metaKey","single","metaValue","registerDynamicShortcodes","AIConfigMigration","apiKeysStr","configs","updated","wordpressMenuItems","LayoutDashboard","FileText","Tag","Image","FileTextIcon","Palette","MenuIcon","Layout","Users","UserPlus","UserCheck","BarChart3","Fragment","ShoppingCart","Package","Store","FileCheck","DollarSign","Settings","CreditCard","MessageSquare","FolderTree","Shield","Wrench","Activity","ChevronLeft","API_BASE","cptApi","active","slug","fieldGroupApi","id","taxonomyApi","taxonomyId","termId","cptPostApi","queryString","url","action","postIds","useDynamicCPTMenu","cptTypesResponse","useQuery","cptTypes","generateCPTMenuItems","menuItems","menuCPTs","cpt","IconComponent","getIconForCPT","iconName","FileCode","Database","injectCPTMenuItems","baseMenuItems","cptMenuItems","cptEngineIndex","item","postsIndex","collapseIndex","BUSINESS_TYPES","menuPermissions","hasMenuAccess","menuId","userPermissions","menuPermission","mp","permission","filterMenuByRole","filteredChildren","useAdminMenu","cptLoading","allMenuItems","getUserPermissions","role","AdminSidebar","isOpen","onClose","expandedItems","setExpandedItems","isCollapsed","setIsCollapsed","menuLoading","toggleExpanded","itemId","isActive","path","isParentActive","child","handleMenuItemClick","renderMenuItem","hasChildren","isExpanded","parentActive","clsx","ChevronDown","Link","X","DropdownMenuContext","DropdownMenuRadioGroupContext","DropdownMenu","controlledOpen","defaultOpen","onOpenChange","uncontrolledOpen","setUncontrolledOpen","open","handleOpenChange","newOpen","DropdownMenuTrigger","forwardRef","onClick","asChild","ref","DropdownMenuContent","sideOffset","contentRef","handleClickOutside","cn","DropdownMenuItem","inset","disabled","DropdownMenuCheckboxItem","checked","onCheckedChange","Check","DropdownMenuRadioItem","isChecked","Circle","DropdownMenuLabel","DropdownMenuSeparator","DropdownMenuSubTrigger","ChevronRight","DropdownMenuSubContent","AdminHeader","onMenuClick","sessionStatus","setSessionStatus","handleLogout","toast","getSessionStatusColor","remainingMinutes","getSessionStatusText","Menu","Clock","Bell","User","SettingsIcon","LogOut","AdminBar","onLogout","Eye","Plus","AdminNotice","message","dismissible","persistent","onDismiss","isVisible","setIsVisible","handleDismiss","dismissedNotices","noticeClasses","getRandomValues","rnds8","rng","byteToHex","unsafeStringify","arr","offset","randomUUID","native","v4","buf","rnds","useAdminNoticesStore","notice","uuidv4","newNotice","n","useAdminNotices","store","success","warning","info","AdminNotices","notices","dismissNotice","wordpressRoutes","getReactPath","wpPath","route","r","parseWordPressUrl","query","wpAdminPatterns","transformWordPressRoute","taxonomy","WordPressRouter","currentPath","reactPath","useAdminFullscreen","reason","AdminLayout","sidebarOpen","setSidebarOpen","isMobile","setIsMobile","checkMobile","mobile","fullscreenState","isFullscreenMode","useMemo","pathname","search","cls","EditorLayout","InitialRedirect","isAdmin","Navigate","badgeVariants","cva","Badge","variant","EditorHeader","onSave","onPublish","onBack","canUndo","canRedo","onUndo","onRedo","isFullscreen","onToggleFullscreen","isDirty","isPublished","onPreview","onOpenDesignLibrary","onOpenAIGenerator","onToggleInspector","isInspectorOpen","title","subtitle","actions","isSaving","setIsSaving","handleSave","Button","Undo","Redo","Library","Sparkles","Settings2","Save","MoreVertical","Minimize2","Maximize2","Keyboard","Info","Trash2","getApiBaseUrl","API_BASE_URL","API_V1_URL","apiClient","axios","apiV1Client","pendingRequests","createRequestKey","method","cleanData","cancelPendingRequest","controller","postApi","requestKey","abortController","requestData","updateData","endpoint","mediaApi","file","onProgress","formData","progressEvent","progress","ScrollArea","orientation","BlockManager","categoryName","category","module","__vitePreload","blockName","blockDefinition","highPriorityCategories","cat","mediumCategories","lowCategories","sum","blockManagerInstance","getBlockManager","BLOCK_ICONS","Type","Heading1","List","Quote","Code","Code2","MoreHorizontal","Grid3x3","Music","Video","File","PanelLeft","FileImage","Columns","Square","Box","Layers","MoveDown","Minus","ChevronsDown","Brackets","Archive","Calendar","Folder","Wifi","Search","Share2","Home","ChevronsRight","Hash","AlertCircle","LogIn","Edit","CornerUpLeft","Globe","Twitter","Youtube","Facebook","Instagram","Table","getBlockIcon","suffix","getBlockIconColor","renderBlockIcon","Icon","colorClass","sizeClass","GutenbergBlockInserter","onSelect","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","blocks","setBlocks","categories","setCategories","mostUsedBlocks","setMostUsedBlocks","loadData","wpCategories","wpBlocks","block","unsubscribe","filteredBlocks","k","groupedBlocks","groups","mostUsed","catBlocks","uncategorized","c","handleBlockSelect","getCategoryTitle","Input","categorySlug","categoryBlocks","DialogContext","Dialog","DialogTrigger","DialogPortal","DialogClose","DialogOverlay","DialogContent","handleEscape","DialogHeader","DialogFooter","DialogTitle","DialogDescription","templateCategories","TrendingUp","Briefcase","PenTool","DesignLibraryModal","onApplyTemplate","selectedTemplate","setSelectedTemplate","previewMode","setPreviewMode","searchQuery","setSearchQuery","showOnlyNew","setShowOnlyNew","showOnlyPremium","setShowOnlyPremium","currentCategory","filteredTemplates","t","tag","handleApplyTemplate","template","blocksWithNewIds","handlePreview","Star","alertVariants","Alert","AlertTitle","AlertDescription","Progress","max","percentage","ShortcodeIntegratorService","forceRefresh","userRequest","includeCategories","maxShortcodes","includeExamples","includeUsageHints","filteredShortcodes","sc","shortcodeList","lowercaseQuery","prompt","categoryStats","shortcodeIntegrator","GEMINI_MODELS","OPENAI_MODELS","CLAUDE_MODELS","PAGE_TEMPLATES","AIPageGenerator","provider","signal","useShortcodes","shortcodeCategories","pageTemplate","updateProgress","enhancedPrompt","content","modelName","apiVersion","systemInstruction","userPrompt","jsonMatch","resolve","lowerPrompt","AIApiKeyService","keys","model","AISettings","apiKeys","setApiKeys","defaultModels","setDefaultModels","showKeys","setShowKeys","testingProvider","setTestingProvider","testResults","setTestResults","providers","savedKeys","savedModels","savedModel","handleTestKey","providerId","testUrl","headers","body","Label","EyeOff","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","AIPageGeneratorModal","onGenerate","setPrompt","setTemplate","setProvider","apiKey","setApiKey","selectedModel","setSelectedModel","isGenerating","setIsGenerating","useSavedKey","setUseSavedKey","setProgress","progressMessage","setProgressMessage","abortControllerRef","generatorRef","savedKey","getModelsForProvider","providerName","handleGenerate","selectedProvider","p","finalApiKey","generator","handleCancel","handleClose","examplePrompts","Loader2","Textarea","PopoverContext","Popover","PopoverTrigger","Comp","Slot","PopoverContent","align","side","triggerRef","trigger","positionClasses","alignClasses","RichText","tagName","onChange","onSplit","onReplace","onRemove","onKeyDown","onFocusOut","placeholder","allowedFormats","multiline","editorRef","isEmpty","setIsEmpty","isUpdatingRef","normalizedCurrent","normalizedValue","wasActive","cursorPosition","selection","textNode","range","maxOffset","applyFormat","command","handleKeyDown","handleInput","cleanValue","handleFocus","handleBlur","handlePaste","text","commonProps","BlockControls","group","position","setPosition","toolbarRef","selectedBlock","setSelectedBlock","findSelectedBlock","element","updatePosition","rect","scrollTop","handleSelectionChange","handleScroll","createPortal","ToolbarGroup","ToolbarButton","icon","label","AlignmentToolbar","alignments","alignment","Slider","controlledValue","defaultValue","onValueChange","min","step","uncontrolledValue","setUncontrolledValue","sliderValue","trackRef","isDragging","handleValueChange","clampedValue","newValues","calculateValue","clientX","handleMouseDown","handleMouseMove","handleMouseUp","DROP_CAP_COLORS","FONT_WEIGHTS","DropCapController","isEnabled","color","fontSize","fontWeight","onToggle","onLinesChange","onColorChange","onFontSizeChange","onFontWeightChange","onReset","RotateCcw","weight","colorOption","TEXT_TRANSFORMS","TypographyPanel","lineHeight","letterSpacing","wordSpacing","textTransform","fontStyle","onLineHeightChange","onLetterSpacingChange","onWordSpacingChange","onTextTransformChange","onFontStyleChange","transform","HIGHLIGHT_COLORS","HighlightSelector","selectedColor","opacity","onOpacityChange","onClear","onApply","getRgbaColor","hexColor","alpha","colorData","g","Highlighter","IMAGE_SIZES","IMAGE_ALIGNMENTS","AlignLeft","AlignCenter","AlignRight","InlineImageInserter","onInsert","setIsOpen","setImageUrl","altText","setAltText","setSize","setAlign","textWrap","setTextWrap","uploadError","setUploadError","fileInputRef","handleFileUpload","event","reader","handleUrlChange","filename","handleInsert","sizeData","s","imageData","handleReset","Tabs","TabsList","TabsTrigger","LinkIcon","Upload","TabsContent","sizeOption","ParagraphBlock","_id","onDelete","_onDuplicate","_onMoveUp","_onMoveDown","onAddBlock","isSelected","localContent","setLocalContent","isHovered","setIsHovered","isFocused","setIsFocused","showLinkPopover","setShowLinkPopover","linkUrl","setLinkUrl","selectedText","setSelectedText","showDropCapSettings","setShowDropCapSettings","showTypographySettings","setShowTypographySettings","blockRef","dropCap","dropCapLines","dropCapColor","dropCapFontSize","dropCapFontWeight","textColor","backgroundColor","highlightColor","highlightOpacity","padding","margin","borderRadius","handleContentChange","useCallback","newContent","updateAttribute","handleTextSelection","applyHighlight","rgba","hex","insertInlineImage","resetDropCap","resetTypography","insertLink","applyLink","handleSplit","isOriginal","handleMerge","handleRemove","blockClasses","contentClasses","dropCapStyles","contentStyles","Bold","Italic","Underline","Strikethrough","Link2","Subscript","Superscript","RemoveFormatting","newAlign","enabled","height","spacing","EnhancedBlockWrapper","onDuplicate","onMoveUp","onMoveDown","onCopy","onPaste","canMoveUp","canMoveDown","onDragStart","_onDragOver","_onDrop","onDragEnd","customToolbarContent","onAlignChange","currentAlign","onToggleBold","onToggleItalic","onChangeType","currentType","isBold","isItalic","showToolbar","setShowToolbar","focusableElement","target","GripVertical","Heading2","ChevronDownIcon","Heading3","Heading4","Heading5","Heading6","AlignJustify","ChevronUp","Copy","EnhancedHeadingBlock","onDragOver","onDrop","level","handleAlignChange","handleLevelChange","newLevel","handleToggleBold","handleToggleItalic","handleChangeType","newType","currentContent","sizeClasses","HeadingTag","ListBlock","items","numbering","startNumber","localItems","setLocalItems","editingItemId","setEditingItemId","focusedItemId","setFocusedItemId","draggingItemId","setDraggingItemId","dragOverItemId","setDragOverItemId","itemRefs","updateItems","newItems","addItem","afterId","newItem","referenceItem","removeItem","updateItemContent","toggleCheckbox","indentItem","outdentItem","moveItemUp","moveItemDown","handleDragStart","handleDragOver","handleDragLeave","handleDrop","targetItemId","sourceItemId","sourceIndex","targetIndex","movedItem","handleDragEnd","handleItemKeyDown","prevItem","nextItem","getListStyleClass","baseClass","styleClass","alignClass","getListTypeIcon","ListOrdered","CheckSquare","el","LANGUAGES","CodeBlock","language","initialCode","localCode","setLocalCode","copied","setCopied","textareaRef","textarea","handleCodeChange","newCode","handleLanguageChange","newLanguage","handleCopy","start","end","spaces","indent","getSyntaxClasses","baseClasses","lang","l","QUOTE_STYLES","QuoteStyleSwitcher","currentStyle","onStyleChange","nextIndex","ArrowRight","CITATION_POSITIONS","CITATION_STYLES","CITATION_PREFIXES","CitationEditor","citation","citationUrl","author","source","prefix","onCitationChange","onCitationUrlChange","onAuthorChange","onSourceChange","onPositionChange","onPrefixChange","formatCitation","parts","fullCitation","MapPin","pos","styleOption","prefixOption","QUOTE_ICONS","ICON_COLORS","ICON_POSITIONS","QuoteIconSelector","iconStyle","iconSize","iconColor","iconPosition","showIcon","onIconStyleChange","onIconSizeChange","onIconColorChange","onIconPositionChange","onToggleIcon","getIconCharacter","EnhancedQuoteBlock","initialQuote","initialCitation","citationPosition","citationStyle","citationPrefix","parseContent","contentStr","contentData","localQuote","setLocalQuote","localCitation","setLocalCitation","showStyleSettings","setShowStyleSettings","showCitationSettings","setShowCitationSettings","showIconSettings","setShowIconSettings","quoteRef","citationRef","updateAttributes","updates","handleQuoteChange","newQuote","handleCitationChange","newCitation","handleQuoteKeyDown","handleCitationKeyDown","getBlockClasses","newStyle","newAuthor","newSource","show","EnhancedImageBlock","alt","caption","linkTo","width","dynamicSource","useDynamicSource","isUploading","setIsUploading","uploadProgress","setUploadProgress","isDragOver","setIsDragOver","localCaption","setLocalCaption","localAlt","setLocalAlt","localLinkUrl","setLocalLinkUrl","dropZoneRef","handleFileSelect","handleDragEnter","handleDragOverImage","handleDropImage","imageFile","handleCaptionChange","newCaption","handleAltChange","newAlt","handleLinkChange","newLink","handleReplaceImage","handleDeleteImage","getImageSizeClass","getAlignmentClass","renderImage","imageElement","Replace","ExternalLink","customSidebarContent","ImageIcon","GRADIENT_PRESETS","GradientEditor","currentGradient","onGradientChange","onToggleGradient","showPresets","setShowPresets","showCustomEditor","setShowCustomEditor","defaultGradient","gradient","generateGradientCSS","grad","stopsString","stop","shape","updateGradient","newGradient","addColorStop","newStop","removeColorStop","newStops","updateColorStop","RotateCw","preset","SHADOW_PRESETS","ShadowEditor","currentShadow","onShadowChange","defaultShadow","shadow","generateShadowCSS","shadowSettings","horizontal","vertical","blur","spread","shadowColor","updateShadow","newShadow","toggleShadow","Sun","Moon","ICON_LIBRARY","Heart","Mail","Phone","Download","Play","Pause","ArrowLeft","Lock","Unlock","Camera","Share","Zap","Award","Target","Bookmark","Flag","Gift","Smile","ThumbsUp","MessageCircle","Send","Mic","MicOff","Volume2","VolumeX","ICON_CATEGORIES","IconInserter","currentIcon","buttonText","onIconChange","showIconPicker","setShowIconPicker","filteredIcons","iconItem","matchesCategory","matchesSearch","getIconComponent","updateIcon","newIcon","toggleIcon","selectIcon","IconComp","ButtonBlock","localText","setLocalText","localUrl","setLocalUrl","showGradientSettings","setShowGradientSettings","showShadowSettings","setShowShadowSettings","borderWidth","linkTarget","paddingX","paddingY","gradientEnabled","gradientType","gradientAngle","gradientStops","gradientShape","gradientPosition","shadowEnabled","shadowHorizontal","shadowVertical","shadowBlur","shadowSpread","shadowOpacity","shadowInset","iconEnabled","iconGap","handleTextChange","newText","plainText","shadowColorRgba","getButtonStyles","styles","newUrl","BlockWrapper","ArrowUp","ArrowDown","ColumnsBlock","columns","verticalAlignment","isStackedOnMobile","gap","minHeight","localColumns","setLocalColumns","selectedColumnId","setSelectedColumnId","updateColumns","newColumns","addColumn","newColumn","totalColumns","newWidth","updatedColumns","col","removeColumn","columnId","getAlignmentStyle","column","ImageBlockSettings","lazy","ButtonBlockSettings","GalleryBlockSettings","CoverBlockSettings","BlockSettingsRenderer","onBlockSettingsChange","blockType","renderCommonSettings","renderBlockSpecificSettings","Suspense","settings","CollapsibleContext","Collapsible","CollapsibleTrigger","CollapsibleContent","Panel","GutenbergSidebar","activeTab","postSettings","blockSettings","onPostSettingsChange","onTabChange","tagInput","setTagInput","showCategorySearch","setShowCategorySearch","categorySearch","setCategorySearch","availableCategories","handleAddTag","handleRemoveTag","tagToRemove","handleCategoryToggle","categoryId","Switch","formattedSlug","GutenbergBlockEditor","propDocumentTitle","initialBlocks","onTitleChange","propPostSettings","selectedBlockId","setSelectedBlockId","documentTitle","setDocumentTitle","isBlockInserterOpen","setIsBlockInserterOpen","setIsFullscreen","history","setHistory","historyIndex","setHistoryIndex","setIsDirty","setPostSettings","isCodeView","setIsCodeView","draggedBlockId","setDraggedBlockId","dragOverBlockId","setDragOverBlockId","copiedBlock","setCopiedBlock","setToast","isDesignLibraryOpen","setIsDesignLibraryOpen","isAIGeneratorOpen","setIsAIGeneratorOpen","setActiveTab","initializeWordPress","newSlug","showToast","updateBlocks","newBlocks","skipOnChange","newHistory","handleUndo","newIndex","handleRedo","handleBlockUpdate","blockId","handleBlockDelete","handleBlockCopy","blockData","handleBlockPaste","afterBlockId","newBlock","handleInsertBlock","insertIndex","handleAddBlock","handlePublish","handleToggleFullscreen","handleToggleCodeView","targetBlockId","draggedIndex","draggedBlock","previewContent","handleNavigation","currentIndex","handleBlockTypeChange","templateBlocks","renderBlock","blockIndex","enhancedProps","tab","CheckCircle","XCircle","DesignLibraryModalImproved","generatedBlocks","convertedBlocks","AdminBreadcrumb","breadcrumbItems","pathSegments","breadcrumbs","labelMap","specialPages","mainPage","subPage","lastSegment","segment","getFileTypeFromMime","mimeType","getFileIcon","fileType","FileJson","FileSpreadsheet","FileType","getFileColorClass","MediaListWordPress","media","setMedia","selectedMedia","setSelectedMedia","setCurrentUser","fetchMedia","mediaData","transformed","thumbnailUrl","handleEdit","newTitle","m","handleDelete","itemToDelete","handleBulkDelete","itemsToDelete","selectedIds","deletePromises","results","failedDeletions","failedIds","f","failedItems","filteredMedia","filtered","counts","newSelected","formatDate","formatFileSize","Card","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","BookOpen","patterns","ContentTemplates","onSelectTemplate","onSelectPattern","mode","favorites","setFavorites","copiedId","setCopiedId","patternCategories","Megaphone","filteredPatterns","toggleFavorite","fId","copyTemplateId","isFavorite","TooltipProvider","TooltipPrimitive.Provider","Tooltip","TooltipPrimitive.Root","TooltipTrigger","TooltipPrimitive.Trigger","TooltipContent","React.forwardRef","TooltipPrimitive.Content","StandaloneEditor","initialPostId","currentPostId","setCurrentPostId","queryClient","useQueryClient","isNewPost","postTitle","setPostTitle","showMediaLibrary","setShowMediaLibrary","showTemplates","setShowTemplates","saveRequestRef","lastSaveHashRef","lastSaved","setLastSaved","isWordPressReady","setIsWordPressReady","showListView","setShowListView","isPostDataLoaded","setIsPostDataLoaded","showAIGenerator","setShowAIGenerator","containerRef","blocksRef","postSettingsRef","normalizePostResponse","loadPostData","loadingToast","parsedBlocks","mapStatus","toIsoLocal","newSettings","handleBeforeUnload","generateSaveHash","hash","char","publish","currentBlocks","currentSettings","trimmedTitle","trimmedSlug","contentType","baseData","saveHash","requestId","savedData","status","errorCode","errorDetails","postIdToPreview","savedId","handleBack","handleSelectTemplate","handleSelectPattern","Undo2","Redo2","hasRealContent","EditorRouteWrapper","useParams","componentKey","Login","ForgotPassword","ResetPassword","AdminHome","WordPressDashboard","DashboardSimple","UsersPage","UserForm","UserDetail","RoleManagement","UserStatistics","Analytics","MailManagement","PagesRouter","Media","CustomFields","Posts","Categories","Tags","PostPreview","Menus","TemplateParts","TemplatePartEditor","IntegratedMonitoring","PerformanceDashboard","ForumRouter","SignageRouter","CrowdfundingRouter","ToolsPage","UIShowcase","CPTEngine","DropshippingRouter","Customize","PageLoader","App","checkSSOSession","handleAuthError","handleSessionExpiring","remainingSeconds","minutes","Routes","Route","QueryClient","failureCount","createRoot","StrictMode","QueryClientProvider","BrowserRouter","Toaster"],"ignoreList":[9,34,35,36,37],"sources":["../../src/react-shim.ts","../../src/utils/versionCheck.ts","../../../../packages/auth-context/dist/AuthContext.js","../../../../packages/auth-context/dist/AuthProvider.js","../../../../packages/auth-context/dist/SessionManager.js","../../../../packages/auth-context/dist/AdminProtectedRoute.js","../../../../packages/auth-context/dist/CookieAuthProvider.js","../../src/components/ErrorBoundary.tsx","../../src/contexts/ThemeContext.tsx","../../../../node_modules/zustand/esm/middleware.mjs","../../src/config/apps.config.ts","../../src/api/sso.ts","../../src/stores/authStore.ts","../../../../packages/shortcodes/dist/registry.js","../../../../packages/shortcodes/dist/provider.js","../../../../packages/shortcodes/dist/dynamic/cache.js","../../../../packages/shortcodes/dist/dynamic/components.js","../../../../packages/shortcodes/dist/dynamic/cpt-list.js","../../../../packages/shortcodes/dist/dynamic/cpt-field.js","../../../../packages/shortcodes/dist/dynamic/acf-field.js","../../../../packages/shortcodes/dist/dynamic/meta-field.js","../../src/utils/register-dynamic-shortcodes.ts","../../src/utils/aiMigration.ts","../../src/config/wordpressMenuFinal.tsx","../../src/features/cpt-acf/services/cpt.api.ts","../../src/hooks/useDynamicCPTMenu.tsx","../../src/types/user.ts","../../src/config/rolePermissions.ts","../../src/hooks/useAdminMenu.ts","../../src/components/layout/AdminSidebar.tsx","../../src/components/ui/dropdown-menu.tsx","../../src/components/layout/AdminHeader.tsx","../../src/components/layout/AdminBar.tsx","../../src/components/notices/AdminNotice.tsx","../../../../node_modules/uuid/dist/esm-browser/rng.js","../../../../node_modules/uuid/dist/esm-browser/stringify.js","../../../../node_modules/uuid/dist/esm-browser/native.js","../../../../node_modules/uuid/dist/esm-browser/v4.js","../../src/hooks/useAdminNotices.ts","../../src/components/notices/AdminNotices.tsx","../../src/config/wordpressRoutes.ts","../../src/components/routing/WordPressRouter.tsx","../../src/hooks/useAdminFullscreen.ts","../../src/components/layout/AdminLayout.tsx","../../src/layouts/EditorLayout.tsx","../../src/components/InitialRedirect.tsx","../../src/components/ui/badge.tsx","../../src/components/editor/EditorHeader.tsx","../../src/services/api/postApi.ts","../../src/components/ui/scroll-area.tsx","../../src/utils/block-manager.ts","../../src/utils/block-icons.tsx","../../src/components/editor/GutenbergBlockInserter.tsx","../../src/components/ui/dialog.tsx","../../src/components/editor/DesignLibraryModalImproved.tsx","../../src/components/ui/alert.tsx","../../src/components/ui/progress.tsx","../../src/services/ai/shortcodeIntegrator.ts","../../src/services/ai/pageGenerator.ts","../../src/pages/settings/AISettings.tsx","../../src/components/ai/AIPageGeneratorModal.tsx","../../src/components/ui/popover.tsx","../../src/components/editor/gutenberg/RichText.tsx","../../src/components/editor/gutenberg/BlockControls.tsx","../../src/components/ui/slider.tsx","../../src/components/editor/blocks/paragraph/DropCapController.tsx","../../src/components/editor/blocks/paragraph/TypographyPanel.tsx","../../src/components/editor/blocks/paragraph/HighlightSelector.tsx","../../src/components/editor/blocks/paragraph/InlineImageInserter.tsx","../../src/components/editor/blocks/ParagraphBlock.tsx","../../src/components/editor/blocks/EnhancedBlockWrapper.tsx","../../src/components/editor/blocks/EnhancedHeadingBlock.tsx","../../src/components/editor/blocks/ListBlock.tsx","../../src/components/editor/blocks/CodeBlock.tsx","../../src/components/editor/blocks/quote/QuoteStyleSwitcher.tsx","../../src/components/editor/blocks/quote/CitationEditor.tsx","../../src/components/editor/blocks/quote/QuoteIconSelector.tsx","../../src/components/editor/blocks/EnhancedQuoteBlock.tsx","../../src/components/editor/blocks/EnhancedImageBlock.tsx","../../src/components/editor/blocks/button/GradientEditor.tsx","../../src/components/editor/blocks/button/ShadowEditor.tsx","../../src/components/editor/blocks/button/IconInserter.tsx","../../src/components/editor/blocks/ButtonBlock.tsx","../../src/components/editor/blocks/BlockWrapper.tsx","../../src/components/editor/blocks/ColumnsBlock.tsx","../../src/components/editor/BlockSettingsRenderer.tsx","../../src/components/ui/collapsible.tsx","../../src/components/editor/GutenbergSidebar.tsx","../../src/components/editor/GutenbergBlockEditor.tsx","../../src/components/common/AdminBreadcrumb.tsx","../../src/utils/fileIcons.tsx","../../src/pages/media/MediaListWordPress.tsx","../../src/components/ui/card.tsx","../../src/components/editor/ContentTemplates.tsx","../../src/components/ui/tooltip.tsx","../../src/pages/editor/StandaloneEditor.tsx","../../src/pages/editor/EditorRouteWrapper.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * React 19 Compatibility Shim\n * \n * Some libraries (like Radix UI and WordPress packages) expect React to be \n * available as a namespace object with properties like React.Children.\n * React 19 changes how these are exported, causing compatibility issues.\n * \n * This shim ensures backward compatibility.\n */\n\nimport React from 'react';\nimport * as ReactExports from 'react';\nimport * as ReactDOMExports from 'react-dom';\n\n// Create a proper React namespace object with all exports\nconst ReactNamespace = { ...ReactExports } as any;\n\n// Ensure default export is included if it exists\nif (React && typeof React === 'object') {\n  Object.assign(ReactNamespace, React);\n}\n\n// Ensure all named exports are available\nObject.keys(ReactExports).forEach(key => {\n  if (!(key in ReactNamespace)) {\n    ReactNamespace[key] = (ReactExports as any)[key];\n  }\n});\n\n// Make React available globally for libraries that expect it\nif (typeof window !== 'undefined') {\n  (window as any).React = ReactNamespace;\n  (window as any).ReactDOM = ReactDOMExports;\n  \n  // Also set on globalThis for better compatibility\n  (globalThis as any).React = ReactNamespace;\n  (globalThis as any).ReactDOM = ReactDOMExports;\n}\n\n// Export for use in the app\nexport { ReactNamespace as React, ReactDOMExports as ReactDOM };\n\n// Log for debugging\n// if (typeof window !== 'undefined' && import.meta.env.DEV) {\n//     hasChildren: 'Children' in ReactNamespace,\n//     hasCreateElement: 'createElement' in ReactNamespace,\n//     hasFragment: 'Fragment' in ReactNamespace,\n//     hasStrictMode: 'StrictMode' in ReactNamespace,\n//     totalKeys: Object.keys(ReactNamespace).length,\n//   });\n// }","// Version checking utility for cache invalidation\nexport const checkVersion = async () => {\n  try {\n    const response = await fetch('/version.json?t=' + Date.now());\n    const data = await response.json();\n    const storedVersion = localStorage.getItem('app-version');\n    \n    if (storedVersion && storedVersion !== data.version) {\n      // New version detected, clearing cache...\n      \n      // Clear all caches\n      if ('caches' in window) {\n        const names = await caches.keys();\n        await Promise.all(names.map(name => caches.delete(name)));\n      }\n      \n      // Clear storage\n      localStorage.clear();\n      sessionStorage.clear();\n      \n      // Store new version\n      localStorage.setItem('app-version', data.version);\n      \n      // Force reload\n      window.location.reload();\n    } else if (!storedVersion) {\n      localStorage.setItem('app-version', data.version);\n    }\n  } catch (error) {\n    // Version check failed - silently ignore\n  }\n};\n\n// Check version on app load\nexport const initVersionCheck = () => {\n  checkVersion();\n  \n  // Check periodically (every 30 minutes instead of 5)\n  setInterval(checkVersion, 30 * 60 * 1000);\n  \n  // Check on visibility change but with debouncing\n  let visibilityTimeout: NodeJS.Timeout;\n  document.addEventListener('visibilitychange', () => {\n    if (!document.hidden) {\n      clearTimeout(visibilityTimeout);\n      visibilityTimeout = setTimeout(() => {\n        checkVersion();\n      }, 5000); // Wait 5 seconds before checking\n    }\n  });\n};","import { createContext, useContext } from 'react';\nconst AuthContext = createContext(undefined);\nexport const useAuth = () => {\n    const context = useContext(AuthContext);\n    if (context === undefined) {\n        throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n};\nexport { AuthContext };\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { AuthContext } from './AuthContext';\nimport { AuthClient } from '@o4o/auth-client';\nexport const AuthProvider = ({ children, ssoClient, onAuthError }) => {\n    // 로컬 스토리지에서 초기 상태 읽기\n    const getInitialState = () => {\n        if (typeof window === 'undefined')\n            return null;\n        const stored = localStorage.getItem('admin-auth-storage');\n        if (stored) {\n            try {\n                const parsed = JSON.parse(stored);\n                if (parsed.state && parsed.state.user) {\n                    return parsed.state.user;\n                }\n            }\n            catch (e) {\n                console.error('Failed to parse auth storage:', e);\n            }\n        }\n        return null;\n    };\n    const [user, setUser] = useState(getInitialState());\n    // 저장된 사용자 정보가 있으면 로딩을 false로, 없으면 true로 설정\n    const [isLoading, setIsLoading] = useState(() => {\n        const storedUser = getInitialState();\n        const storedToken = localStorage.getItem('accessToken') || localStorage.getItem('token');\n        // 저장된 인증 정보가 있으면 즉시 사용 가능하도록 false 반환\n        return !(storedUser && storedToken);\n    });\n    const [error, setError] = useState(null);\n    const authClient = ssoClient || new AuthClient(typeof window !== 'undefined' ?\n        'https://api.neture.co.kr' :\n        'https://api.neture.co.kr');\n    // 초기 인증 상태 확인\n    useEffect(() => {\n        const checkInitialAuth = async () => {\n            try {\n                const storedUser = getInitialState();\n                const storedToken = localStorage.getItem('accessToken') || localStorage.getItem('token');\n                if (storedUser && storedToken) {\n                    // 저장된 사용자 정보가 있으면 즉시 사용\n                    // 이미 useState 초기값으로 설정되어 있으므로 setUser 호출 불필요\n                    // SSO 세션 확인은 백그라운드에서 수행 (옵션)\n                    if (ssoClient && typeof window !== 'undefined') {\n                        // SSO 체크는 비동기로 수행하되, 실패해도 로컬 세션 유지\n                        authClient.checkSession().then(sessionData => {\n                            if (!sessionData.isAuthenticated) {\n                                console.warn('SSO session invalid, but keeping local session');\n                                // SSO 세션이 없어도 로컬 세션은 유지 (토큰이 유효한 경우)\n                            }\n                        }).catch(error => {\n                            console.warn('SSO session check failed, keeping local session:', error);\n                            // SSO 체크 실패 시에도 기존 세션 유지\n                        });\n                    }\n                    // 이미 로딩이 false로 설정되어 있으므로 추가 작업 불필요\n                    if (isLoading) {\n                        setIsLoading(false);\n                    }\n                }\n                else {\n                    // 저장된 인증 정보가 없으면 null 설정\n                    setUser(null);\n                    setIsLoading(false);\n                }\n            }\n            catch (error) {\n                console.error('Initial auth check failed:', error);\n                setUser(null);\n                setIsLoading(false);\n            }\n        };\n        // 로딩 중일 때만 초기 인증 체크 수행\n        if (isLoading) {\n            checkInitialAuth();\n        }\n    }, [authClient, ssoClient, isLoading]);\n    const login = async (credentials) => {\n        try {\n            setIsLoading(true);\n            setError(null);\n            const response = await authClient.login(credentials);\n            setUser(response.user);\n            // 토큰을 localStorage에 저장\n            if (response.token) {\n                // 여러 키로 저장 (다양한 API 클라이언트 호환성)\n                localStorage.setItem('accessToken', response.token);\n                localStorage.setItem('authToken', response.token); // postApi 호환성\n                localStorage.setItem('token', response.token); // 하위 호환성\n                if (response.refreshToken) {\n                    localStorage.setItem('refreshToken', response.refreshToken);\n                }\n                // admin-auth-storage 구조도 업데이트 (apiClient 호환성을 위해)\n                const authStorage = {\n                    state: {\n                        user: response.user,\n                        token: response.token,\n                        accessToken: response.token,\n                        refreshToken: response.refreshToken,\n                        isAuthenticated: true\n                    }\n                };\n                localStorage.setItem('admin-auth-storage', JSON.stringify(authStorage));\n            }\n        }\n        catch (err) {\n            const errorMessage = err instanceof Error ? err.message : 'Login failed';\n            setError(errorMessage);\n            onAuthError?.(errorMessage);\n            throw err;\n        }\n        finally {\n            setIsLoading(false);\n        }\n    };\n    const logout = () => {\n        authClient.logout();\n        setUser(null);\n        setError(null);\n        // 모든 인증 관련 데이터 제거\n        localStorage.removeItem('accessToken');\n        localStorage.removeItem('refreshToken');\n        localStorage.removeItem('token');\n        localStorage.removeItem('authToken');\n        localStorage.removeItem('admin-auth-storage');\n        localStorage.removeItem('user');\n    };\n    const clearError = () => {\n        setError(null);\n    };\n    const getSessionStatus = () => {\n        if (!user)\n            return null;\n        const now = new Date();\n        const expiresAt = new Date(now.getTime() + 60 * 60 * 1000); // 1 hour from now\n        const remainingTime = expiresAt.getTime() - now.getTime();\n        return {\n            isValid: remainingTime > 0,\n            expiresAt,\n            remainingTime\n        };\n    };\n    const value = {\n        user,\n        isAuthenticated: !!user,\n        isLoading,\n        error,\n        isAdmin: user?.role === 'admin',\n        login,\n        logout,\n        clearError,\n        getSessionStatus\n    };\n    return (_jsx(AuthContext.Provider, { value: value, children: children }));\n};\n","import { Fragment as _Fragment, jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useRef } from 'react';\nexport const SessionManager = ({ children, warningBeforeExpiry = 5 * 60 * 1000, // 기본값: 5분\nonSessionExpiring }) => {\n    const warningShownRef = useRef(false);\n    useEffect(() => {\n        // 세션 만료 타이머 설정\n        const checkSession = () => {\n            // 실제 구현에서는 토큰 만료 시간을 체크\n            // 현재는 기본 로직만 구현\n            if (onSessionExpiring && !warningShownRef.current) {\n                // warningShownRef.current = true;\n                // onSessionExpiring();\n            }\n        };\n        // 주기적으로 세션 상태 체크 (1분마다)\n        const interval = setInterval(checkSession, 60 * 1000);\n        return () => {\n            clearInterval(interval);\n        };\n    }, [warningBeforeExpiry, onSessionExpiring]);\n    return _jsx(_Fragment, { children: children });\n};\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport { useNavigate, useLocation } from 'react-router-dom';\nconst AccessDeniedComponent = ({ showContactAdmin = false }) => (_jsxs(\"div\", { style: {\n        padding: '2rem',\n        textAlign: 'center',\n        background: '#f8f9fa',\n        border: '1px solid #dee2e6',\n        borderRadius: '0.375rem',\n        margin: '1rem'\n    }, children: [_jsx(\"h2\", { style: { color: '#dc3545', marginBottom: '1rem' }, children: \"\\uC811\\uADFC \\uAD8C\\uD55C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\" }), _jsx(\"p\", { style: { color: '#6c757d', marginBottom: '1rem' }, children: \"\\uC774 \\uD398\\uC774\\uC9C0\\uC5D0 \\uC811\\uADFC\\uD558\\uAE30 \\uC704\\uD55C \\uAD8C\\uD55C\\uC774 \\uBD80\\uC871\\uD569\\uB2C8\\uB2E4.\" }), showContactAdmin && (_jsx(\"p\", { style: { color: '#6c757d' }, children: \"\\uAD00\\uB9AC\\uC790\\uC5D0\\uAC8C \\uBB38\\uC758\\uD558\\uC2DC\\uAE30 \\uBC14\\uB78D\\uB2C8\\uB2E4.\" }))] }));\nexport const AdminProtectedRoute = ({ children, requiredRoles = [], requiredPermissions = [], showContactAdmin = false }) => {\n    const { user, isAuthenticated, isLoading } = useAuth();\n    const navigate = useNavigate();\n    const location = useLocation();\n    useEffect(() => {\n        // 로딩이 완전히 완료되고 인증되지 않은 경우에만 리다이렉트\n        // localStorage에 저장된 토큰이 있는지 먼저 확인\n        const hasStoredAuth = () => {\n            const token = localStorage.getItem('accessToken') ||\n                localStorage.getItem('token') ||\n                localStorage.getItem('authToken');\n            const adminStorage = localStorage.getItem('admin-auth-storage');\n            return !!(token || adminStorage);\n        };\n        let timeoutId;\n        if (!isLoading && !isAuthenticated) {\n            // 저장된 인증 정보가 있으면 더 기다림\n            const delay = hasStoredAuth() ? 500 : 100;\n            timeoutId = window.setTimeout(() => {\n                // 다시 한 번 인증 상태와 저장된 토큰 확인\n                if (!isAuthenticated && !hasStoredAuth()) {\n                    navigate('/login', {\n                        replace: true,\n                        state: { from: location.pathname }\n                    });\n                }\n            }, delay);\n        }\n        return () => {\n            if (timeoutId)\n                clearTimeout(timeoutId);\n        };\n    }, [isAuthenticated, isLoading, navigate, location]);\n    // 로딩 중인 경우 - 더 나은 UX를 위한 로딩 화면\n    if (isLoading) {\n        return (_jsx(\"div\", { style: {\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                height: '100vh',\n                backgroundColor: '#f8fafc'\n            }, children: _jsxs(\"div\", { style: { textAlign: 'center' }, children: [_jsx(\"div\", { style: {\n                            width: '48px',\n                            height: '48px',\n                            border: '4px solid #e2e8f0',\n                            borderTop: '4px solid #3b82f6',\n                            borderRadius: '50%',\n                            animation: 'spin 1s linear infinite',\n                            margin: '0 auto 16px'\n                        } }), _jsx(\"p\", { style: { color: '#64748b', fontSize: '14px' }, children: \"\\uC778\\uC99D \\uC0C1\\uD0DC \\uD655\\uC778 \\uC911...\" })] }) }));\n    }\n    // 토큰 복원 중이거나 인증되지 않은 경우 잠시 대기\n    if (!isAuthenticated || !user) {\n        // 인증 상태가 불분명한 경우 짧은 로딩 표시\n        return (_jsx(\"div\", { style: {\n                display: 'flex',\n                justifyContent: 'center',\n                alignItems: 'center',\n                height: '200px'\n            }, children: _jsx(\"div\", { style: {\n                    width: '24px',\n                    height: '24px',\n                    border: '2px solid #e2e8f0',\n                    borderTop: '2px solid #6366f1',\n                    borderRadius: '50%',\n                    animation: 'spin 1s linear infinite'\n                } }) }));\n    }\n    // 역할 기반 접근 제어\n    if (requiredRoles.length > 0) {\n        const userRole = user.role;\n        const hasRequiredRole = requiredRoles.includes(userRole);\n        if (!hasRequiredRole) {\n            return _jsx(AccessDeniedComponent, { showContactAdmin: showContactAdmin });\n        }\n    }\n    // 권한 기반 접근 제어는 현재 User 타입에 없으므로 기본적으로 통과\n    if (requiredPermissions.length > 0) {\n        // 향후 확장을 위한 구조 유지\n        // 현재는 admin 역할이면 모든 권한을 가진 것으로 간주\n        const isAdmin = user.role === 'admin';\n        if (!isAdmin) {\n            return _jsx(AccessDeniedComponent, { showContactAdmin: showContactAdmin });\n        }\n    }\n    // 모든 조건을 만족하면 자식 컴포넌트 렌더링\n    return _jsx(_Fragment, { children: children });\n};\n// CSS 애니메이션을 위한 스타일 태그 추가\nif (typeof document !== 'undefined' && !document.getElementById('auth-spinner-styles')) {\n    const style = document.createElement('style');\n    style.id = 'auth-spinner-styles';\n    style.textContent = `\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n  `;\n    document.head.appendChild(style);\n}\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createContext, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { cookieAuthClient } from '@o4o/auth-client';\nimport { WebSocketSessionClient } from './services/WebSocketSessionClient';\nconst CookieAuthContext = createContext(undefined);\nexport const CookieAuthProvider = ({ children, onAuthChange, enableSessionSync = true, sessionCheckInterval = 30000 }) => {\n    const [user, setUser] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const wsClientRef = useRef(null);\n    // Check authentication status\n    const checkAuth = useCallback(async () => {\n        try {\n            setLoading(true);\n            setError(null);\n            const currentUser = await cookieAuthClient.getCurrentUser();\n            setUser(currentUser);\n            onAuthChange?.(currentUser);\n            // Initialize WebSocket if user is authenticated and token exists\n            if (currentUser && enableSessionSync) {\n                const token = cookieAuthClient.getAccessToken();\n                if (token) {\n                    initializeSessionSync(token);\n                }\n            }\n        }\n        catch (err) {\n            setUser(null);\n            onAuthChange?.(null);\n        }\n        finally {\n            setLoading(false);\n        }\n    }, [onAuthChange]);\n    // Initialize WebSocket session sync\n    const initializeSessionSync = useCallback((token) => {\n        if (!enableSessionSync || !token)\n            return;\n        // Create WebSocket client if not exists\n        if (!wsClientRef.current) {\n            wsClientRef.current = new WebSocketSessionClient(cookieAuthClient.getApiUrl(), sessionCheckInterval);\n        }\n        // Connect with callbacks\n        wsClientRef.current.connect(token, {\n            onSessionEvent: (event) => {\n                // console.log('[Auth] Session event:', event);\n                // Handle different session events\n                switch (event.event) {\n                    case 'logout_all':\n                    case 'removed':\n                        // Force re-authentication check\n                        checkAuth();\n                        break;\n                    case 'created':\n                    case 'refreshed':\n                        // New session created or refreshed, might want to notify user\n                        break;\n                }\n            },\n            onForceLogout: (reason) => {\n                // console.log('[Auth] Force logout:', reason);\n                // Clear local auth state\n                setUser(null);\n                setError(reason);\n                onAuthChange?.(null);\n                // Disconnect WebSocket\n                wsClientRef.current?.disconnect();\n            }\n        });\n    }, [enableSessionSync, sessionCheckInterval, checkAuth, onAuthChange]);\n    // Cleanup WebSocket on unmount\n    useEffect(() => {\n        return () => {\n            wsClientRef.current?.disconnect();\n        };\n    }, []);\n    // Initial auth check\n    useEffect(() => {\n        checkAuth();\n    }, [checkAuth]);\n    // Login\n    const login = useCallback(async (credentials) => {\n        try {\n            setError(null);\n            setLoading(true);\n            const response = await cookieAuthClient.loginWithSync(credentials);\n            if (response.success && response.user) {\n                setUser(response.user);\n                onAuthChange?.(response.user);\n                // Initialize WebSocket session sync with new token\n                if (response.token) {\n                    initializeSessionSync(response.token);\n                }\n            }\n        }\n        catch (err) {\n            const errorMessage = err.response?.data?.error || 'Login failed';\n            setError(errorMessage);\n            throw new Error(errorMessage);\n        }\n        finally {\n            setLoading(false);\n        }\n    }, [onAuthChange]);\n    // Register\n    const register = useCallback(async (data) => {\n        try {\n            setError(null);\n            setLoading(true);\n            const response = await cookieAuthClient.register(data);\n            if (!response.success) {\n                throw new Error(response.message || 'Registration failed');\n            }\n            // Note: User may need approval, so we don't automatically log them in\n        }\n        catch (err) {\n            const errorMessage = err.response?.data?.error || 'Registration failed';\n            setError(errorMessage);\n            throw new Error(errorMessage);\n        }\n        finally {\n            setLoading(false);\n        }\n    }, []);\n    // Logout\n    const logout = useCallback(async () => {\n        try {\n            setLoading(true);\n            await cookieAuthClient.logoutWithSync();\n            setUser(null);\n            onAuthChange?.(null);\n            // Disconnect WebSocket\n            wsClientRef.current?.disconnect();\n        }\n        catch (err) {\n            console.error('Logout error:', err);\n        }\n        finally {\n            setLoading(false);\n        }\n    }, [onAuthChange]);\n    // Logout from all devices\n    const logoutAll = useCallback(async () => {\n        try {\n            setLoading(true);\n            await cookieAuthClient.logoutAll();\n            setUser(null);\n            onAuthChange?.(null);\n            // Disconnect WebSocket\n            wsClientRef.current?.disconnect();\n        }\n        catch (err) {\n            console.error('Logout all error:', err);\n        }\n        finally {\n            setLoading(false);\n        }\n    }, [onAuthChange]);\n    // Check if user has specific role(s)\n    const hasRole = useCallback((role) => {\n        if (!user)\n            return false;\n        const roles = Array.isArray(role) ? role : [role];\n        return roles.includes(user.role);\n    }, [user]);\n    // Check if user has specific permission\n    const hasPermission = useCallback((permission) => {\n        if (!user)\n            return false;\n        if (user.role === 'admin')\n            return true; // Admin has all permissions\n        return user.permissions?.includes(permission) || false;\n    }, [user]);\n    const value = {\n        user,\n        loading,\n        error,\n        login,\n        register,\n        logout,\n        logoutAll,\n        checkAuth,\n        isAuthenticated: !!user,\n        hasRole,\n        hasPermission,\n    };\n    return (_jsx(CookieAuthContext.Provider, { value: value, children: children }));\n};\nexport const useCookieAuth = () => {\n    const context = useContext(CookieAuthContext);\n    if (context === undefined) {\n        throw new Error('useCookieAuth must be used within a CookieAuthProvider');\n    }\n    return context;\n};\n// Higher-order component for role-based access\nexport const withRole = (Component, allowedRoles) => {\n    return (props) => {\n        const { hasRole, loading } = useCookieAuth();\n        if (loading) {\n            return _jsx(\"div\", { children: \"Loading...\" });\n        }\n        if (!hasRole(allowedRoles)) {\n            return _jsx(\"div\", { children: \"Access denied. You don't have the required role.\" });\n        }\n        return _jsx(Component, { ...props });\n    };\n};\n// Hook for role-based rendering\nexport const useRoleAccess = (allowedRoles) => {\n    const { hasRole } = useCookieAuth();\n    return hasRole(allowedRoles);\n};\n","import { ErrorInfo, Component, ReactNode } from 'react';\nimport { AlertTriangle, RefreshCw } from 'lucide-react';\n\ninterface Props {\n  children?: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n  errorInfo?: ErrorInfo;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false\n  };\n\n  public static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    // 에러 로깅\n    // Error logging - use proper error handler\n    \n    // 개발 환경에서 상세 정보 표시\n    if (import.meta.env.DEV) {\n    // Error logging - use proper error handler\n    }\n\n    this.setState({\n      error,\n      errorInfo\n    });\n  }\n\n  private handleReset = () => {\n    this.setState({ hasError: false, error: undefined, errorInfo: undefined });\n    window.location.reload();\n  };\n\n  public render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n          <div className=\"max-w-md w-full space-y-8\">\n            <div className=\"text-center\">\n              <AlertTriangle className=\"mx-auto h-12 w-12 text-red-500\" />\n              <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">\n                문제가 발생했습니다\n              </h2>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                예기치 않은 오류가 발생했습니다. 잠시 후 다시 시도해주세요.\n              </p>\n              \n              {import.meta.env.DEV && this.state.error && (\n                <div className=\"mt-4 text-left bg-red-50 p-4 rounded-md\">\n                  <p className=\"text-sm font-mono text-red-800\">\n                    {this.state.error.toString() as any}\n                  </p>\n                  {this.state.errorInfo && (\n                    <details className=\"mt-2\">\n                      <summary className=\"cursor-pointer text-sm text-red-600 hover:text-red-800\">\n                        상세 정보 보기\n                      </summary>\n                      <pre className=\"mt-2 text-xs text-red-700 overflow-auto max-h-64\">\n                        {this.state.errorInfo.componentStack}\n                      </pre>\n                    </details>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div className=\"mt-8 space-y-3\">\n              <button\n                onClick={this.handleReset}\n                className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                <RefreshCw className=\"mr-2 h-4 w-4\" />\n                페이지 새로고침\n              </button>\n              \n              <button\n                onClick={() => window.history.back()}\n                className=\"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                이전 페이지로 돌아가기\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;","import { useState, useEffect, useContext, createContext, FC, ReactNode } from 'react';\n\ntype Theme = 'light' | 'dark' | 'system';\ntype ResolvedTheme = 'light' | 'dark';\n\ninterface ThemeContextType {\n  theme: Theme;\n  resolvedTheme: ResolvedTheme;\n  setTheme: (theme: Theme) => void;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport const useTheme = () => {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n};\n\ninterface ThemeProviderProps {\n  children: ReactNode;\n  defaultTheme?: Theme;\n  storageKey?: string;\n}\n\nexport const ThemeProvider: FC<ThemeProviderProps> = ({\n  children,\n  defaultTheme = 'system',\n  storageKey = 'o4o-admin-theme',\n}) => {\n  const [theme, setThemeState] = useState(() => {\n    // Check localStorage first\n    const stored = localStorage.getItem(storageKey) as Theme | null;\n    if (stored && ['light', 'dark', 'system'].includes(stored)) {\n      return stored;\n    }\n    return defaultTheme;\n  });\n\n  const [resolvedTheme, setResolvedTheme] = useState(() => {\n    if (theme === 'system') {\n      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    }\n    return theme as ResolvedTheme;\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    \n    // Function to get the resolved theme\n    const getResolvedTheme = (): ResolvedTheme => {\n      if (theme === 'system') {\n        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n      }\n      return theme as ResolvedTheme;\n    };\n\n    // Update resolved theme\n    const resolved = getResolvedTheme();\n    setResolvedTheme(resolved);\n    \n    // Remove existing theme\n    root.removeAttribute('data-theme');\n    root.classList.remove('dark');\n    \n    // Apply new theme\n    if (resolved === 'dark') {\n      root.setAttribute('data-theme', 'dark');\n      root.classList.add('dark');\n    }\n    \n    // Store preference\n    localStorage.setItem(storageKey, theme);\n\n    // Listen for system theme changes\n    if (theme === 'system') {\n      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n      const handleChange = (e: any) => {\n        const newResolved = e.matches ? 'dark' : 'light';\n        setResolvedTheme(newResolved);\n        \n        root.removeAttribute('data-theme');\n        root.classList.remove('dark');\n        \n        if (newResolved === 'dark') {\n          root.setAttribute('data-theme', 'dark');\n          root.classList.add('dark');\n        }\n      };\n\n      mediaQuery.addEventListener('change', handleChange);\n      return () => mediaQuery.removeEventListener('change', handleChange);\n    }\n  }, [theme, storageKey]);\n\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n  };\n\n  const toggleTheme = () => {\n    setThemeState((prev) => {\n      if (prev === 'light') return 'dark';\n      if (prev === 'dark') return 'light';\n      // If system, toggle to the opposite of current resolved theme\n      return resolvedTheme === 'light' ? 'dark' : 'light';\n    });\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, resolvedTheme, setTheme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n};","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = ((state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  });\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = ((selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  });\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    return setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      return setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","// Configuration for external apps integration\nexport const appsConfig = {\n  forum: {\n    name: 'Forum',\n    url: import.meta.env.VITE_FORUM_URL || 'https://forum.neture.co.kr',\n    apiEndpoint: '/api/v1/forum',\n    icon: 'MessageSquare',\n    color: 'primary',\n  },\n  signage: {\n    name: 'Digital Signage',\n    url: import.meta.env.VITE_SIGNAGE_URL || 'https://signage.neture.co.kr',\n    apiEndpoint: '/api/v1/signage',\n    icon: 'Monitor',\n    color: 'secondary',\n  },\n  crowdfunding: {\n    name: 'Crowdfunding',\n    url: import.meta.env.VITE_FUNDING_URL || 'https://funding.neture.co.kr',\n    apiEndpoint: '/api/v1/crowdfunding',\n    icon: 'DollarSign',\n    color: 'success',\n  },\n} as const;\n\n// SSO Configuration\nexport const ssoConfig = {\n  enabled: import.meta.env.VITE_SSO_ENABLED === 'true',\n  domain: import.meta.env.VITE_SSO_DOMAIN || '.neture.co.kr',\n  cookieName: 'o4o_auth_token',\n  sessionCheckInterval: 300000, // Check session every 5 minutes (reduced to prevent rate limiting)\n};\n\n// API endpoints configuration\nexport const apiEndpoints = {\n  // Authentication\n  auth: {\n    login: '/auth/login',\n    logout: '/auth/logout',\n    refresh: '/auth/refresh',\n    me: '/auth/me',\n    ssoCheck: '/auth/sso/check',\n  },\n  \n  // Users\n  users: {\n    list: '/users',\n    detail: (id: string) => `/users/${id}`,\n    create: '/users',\n    update: (id: string) => `/users/${id}`,\n    delete: (id: string) => `/users/${id}`,\n    roles: '/users/roles',\n  },\n  \n  // E-commerce\n  products: {\n    list: '/products',\n    detail: (id: string) => `/products/${id}`,\n    create: '/products',\n    update: (id: string) => `/products/${id}`,\n    delete: (id: string) => `/products/${id}`,\n    categories: '/products/categories',\n  },\n  \n  orders: {\n    list: '/orders',\n    detail: (id: string) => `/orders/${id}`,\n    create: '/orders',\n    update: (id: string) => `/orders/${id}`,\n    cancel: (id: string) => `/orders/${id}/cancel`,\n    stats: '/orders/stats',\n  },\n  \n  // Forum integration\n  forum: {\n    stats: '/forum/stats',\n    posts: '/forum/posts',\n    categories: '/forum/categories',\n    users: '/forum/users',\n    moderation: '/forum/moderation',\n  },\n  \n  // Signage integration\n  signage: {\n    stats: '/signage/stats',\n    displays: '/signage/displays',\n    content: '/signage/content',\n    schedules: '/signage/schedules',\n    playlists: '/signage/playlists',\n  },\n  \n  // Crowdfunding integration\n  crowdfunding: {\n    stats: '/crowdfunding/stats',\n    campaigns: '/crowdfunding/campaigns',\n    contributions: '/crowdfunding/contributions',\n    users: '/crowdfunding/users',\n    payouts: '/crowdfunding/payouts',\n  },\n  \n  // Dashboard\n  dashboard: {\n    overview: '/dashboard/overview',\n    analytics: '/dashboard/analytics',\n    activities: '/dashboard/activities',\n    notifications: '/dashboard/notifications',\n  },\n  \n  // Settings\n  settings: {\n    general: '/settings/general',\n    appearance: '/settings/appearance',\n    email: '/settings/email',\n    integrations: '/settings/integrations',\n  },\n};\n\n// Helper function to construct full API URL\nexport function getApiUrl(endpoint: string): string {\n  const baseUrl = import.meta.env.VITE_API_BASE_URL || 'https://api.neture.co.kr/api';\n  return `${baseUrl}${endpoint}`;\n}\n\n// Helper function to construct app URL\nexport function getAppUrl(app: keyof typeof appsConfig, path?: string): string {\n  const appConfig = appsConfig[app];\n  return path ? `${appConfig.url}${path}` : appConfig.url;\n}","// import { api } from './base';\nimport { ssoConfig } from '@/config/apps.config';\n\nexport interface SSOCheckResponse {\n  isAuthenticated: boolean;\n  user?: {\n    id: string;\n    email: string;\n    name: string;\n    roles: string[];\n  };\n  expiresAt?: string;\n}\n\nclass SSOService {\n  private checkInterval: NodeJS.Timeout | null = null;\n\n  /**\n   * Initialize SSO session checking\n   */\n  startSessionCheck(onSessionChange?: (authenticated: boolean) => void) {\n    if (!ssoConfig.enabled) return;\n\n    // Initial check\n    this.checkSession().then((response) => {\n      if (onSessionChange) {\n        onSessionChange(response.isAuthenticated);\n      }\n    });\n\n    // Set up periodic checks\n    this.checkInterval = setInterval(async () => {\n      try {\n        const response = await this.checkSession();\n        if (onSessionChange) {\n          onSessionChange(response.isAuthenticated);\n        }\n      } catch (error: any) {\n    // Error logging - use proper error handler\n      }\n    }, ssoConfig.sessionCheckInterval);\n  }\n\n  /**\n   * Stop SSO session checking\n   */\n  stopSessionCheck() {\n    if (this.checkInterval) {\n      clearInterval(this.checkInterval);\n      this.checkInterval = null;\n    }\n  }\n\n  /**\n   * Check SSO session status\n   */\n  async checkSession(): Promise<SSOCheckResponse> {\n    // SSO is disabled, always return unauthenticated\n    // This prevents unnecessary API calls to non-existent endpoints\n    if (!ssoConfig.enabled) {\n      return { isAuthenticated: false };\n    }\n    \n    // For now, return false as SSO endpoint doesn't exist\n    // TODO: Implement SSO endpoint in backend when needed\n    return { isAuthenticated: false };\n    \n    // Original code - uncomment when SSO endpoint is implemented\n    // try {\n    //   const response = await api.get<SSOCheckResponse>(apiEndpoints.auth.ssoCheck);\n    //   return response.data;\n    // } catch (error: any) {\n    //   if (error?.response?.status === 401) {\n    //     throw error;\n    //   }\n    //   return { isAuthenticated: false };\n    // }\n  }\n\n  /**\n   * Set cross-domain auth cookie\n   */\n  setCrossDomainCookie(token: string) {\n    if (!ssoConfig.enabled) return;\n\n    // Set cookie with domain scope\n    document.cookie = `${ssoConfig.cookieName}=${token}; domain=${ssoConfig.domain}; path=/; secure; samesite=lax; max-age=86400`;\n  }\n\n  /**\n   * Clear cross-domain auth cookie\n   */\n  clearCrossDomainCookie() {\n    if (!ssoConfig.enabled) return;\n\n    // Clear cookie\n    document.cookie = `${ssoConfig.cookieName}=; domain=${ssoConfig.domain}; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT`;\n  }\n\n  /**\n   * Get auth token from cookie\n   */\n  getTokenFromCookie(): string | null {\n    const cookies = document.cookie.split(';');\n    for (const cookie of cookies) {\n      const [name, value] = cookie.trim().split('=');\n      if (name === ssoConfig.cookieName) {\n        return value;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Redirect to app with SSO token\n   */\n  redirectToApp(app: string, returnPath?: string) {\n    const token = this.getTokenFromCookie();\n    if (!token) {\n    // Removed // console.warn\n      return;\n    }\n\n    const targetUrl = new URL(app);\n    targetUrl.searchParams.set('sso_token', token);\n    if (returnPath) {\n      targetUrl.searchParams.set('return_path', returnPath);\n    }\n\n    window.open(targetUrl.toString() as any, '_blank');\n  }\n}\n\nexport const ssoService = new SSOService();","import { create } from 'zustand'\nimport { persist } from 'zustand/middleware'\nimport { ssoService } from '@/api/sso'\n\nexport interface User {\n  id: string\n  email: string\n  name: string\n  role: string\n  roles?: string[]\n  avatar?: string\n  createdAt?: string\n}\n\ninterface AuthState {\n  user: User | null\n  token: string | null\n  isAuthenticated: boolean\n  isLoading: boolean\n  \n  // Actions\n  login: (user: User, token: string) => void\n  logout: () => void\n  updateUser: (user: Partial<User>) => void\n  setLoading: (loading: boolean) => void\n  checkSSOSession: () => Promise<void>\n}\n\nexport const useAuthStore = create<AuthState>()(\n  persist(\n    (set, get) => ({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n      isLoading: true, // 초기 로딩 상태를 true로 설정\n\n      login: (user: User, token: string) => {\n        set({\n          user,\n          token,\n          isAuthenticated: true,\n          isLoading: false\n        })\n        \n        // localStorage에도 토큰 저장 (호환성을 위해)\n        localStorage.setItem('authToken', token)\n        localStorage.setItem('accessToken', token)\n        \n        // Set SSO cookie for cross-domain authentication\n        ssoService.setCrossDomainCookie(token)\n      },\n\n      logout: () => {\n        set({\n          user: null,\n          token: null,\n          isAuthenticated: false,\n          isLoading: false\n        })\n        \n        // localStorage 정리\n        localStorage.removeItem('admin-auth-storage')\n        localStorage.removeItem('authToken')\n        localStorage.removeItem('accessToken')\n        \n        // Clear SSO cookie\n        ssoService.clearCrossDomainCookie()\n      },\n\n      updateUser: (userData: Partial<User>) => {\n        const currentUser = get().user\n        if (currentUser) {\n          set({\n            user: { ...currentUser, ...userData }\n          })\n        }\n      },\n\n      setLoading: (loading: boolean) => {\n        set({ isLoading: loading })\n      },\n      \n      checkSSOSession: async () => {\n        try {\n          // 페이지 새로고침 시 저장된 토큰으로 먼저 인증 상태 복원 시도\n          const storedAuth = localStorage.getItem('admin-auth-storage')\n          if (storedAuth) {\n            try {\n              const parsedAuth = JSON.parse(storedAuth)\n              const storedState = parsedAuth.state\n              if (storedState?.token && storedState?.user && storedState?.isAuthenticated) {\n                // 저장된 상태로 복원하고 SSO 체크는 스킵\n                set({\n                  user: storedState.user,\n                  token: storedState.token,\n                  isAuthenticated: true,\n                  isLoading: false\n                })\n                \n                // localStorage에도 토큰 설정\n                localStorage.setItem('authToken', storedState.token)\n                localStorage.setItem('accessToken', storedState.token)\n                \n                // 이미 인증된 상태이므로 SSO 체크 스킵\n                return\n              }\n            } catch (parseError) {\n              // Parse 오류 시 로컬 스토리지 정리\n              localStorage.removeItem('admin-auth-storage')\n            }\n          }\n          \n          set({ isLoading: true })\n          const response = await ssoService.checkSession()\n          \n          if (response.isAuthenticated && response.user) {\n            // Get token from cookie or use stored token\n            const token = ssoService.getTokenFromCookie() || get().token || 'sso-token'\n            \n            set({\n              user: {\n                id: response.user.id,\n                email: response.user.email,\n                name: response.user.name,\n                role: response.user.roles?.[0] || 'user',\n                roles: response.user.roles\n              },\n              token,\n              isAuthenticated: true,\n              isLoading: false\n            })\n            \n            // localStorage 동기화\n            localStorage.setItem('authToken', token)\n            localStorage.setItem('accessToken', token)\n          } else {\n            set({\n              user: null,\n              token: null,\n              isAuthenticated: false,\n              isLoading: false\n            })\n            \n            // localStorage 정리\n            localStorage.removeItem('auth-storage')\n            localStorage.removeItem('authToken')\n            localStorage.removeItem('accessToken')\n          }\n        } catch (error: any) {\n          // Error logging - use proper error handler\n          // 401 에러 시 자동 로그아웃\n          if (error?.response?.status === 401) {\n            set({\n              user: null,\n              token: null,\n              isAuthenticated: false,\n              isLoading: false\n            })\n            // localStorage 정리\n            localStorage.removeItem('auth-storage')\n            localStorage.removeItem('authToken')\n            localStorage.removeItem('accessToken')\n          } else {\n            set({ isLoading: false })\n          }\n        }\n      }\n    }),\n    {\n      name: 'admin-auth-storage',\n      partialize: (state) => ({\n        user: state.user,\n        token: state.token,\n        isAuthenticated: state.isAuthenticated\n      }),\n      // 저장/복원 시 추가 처리\n      onRehydrateStorage: () => (state) => {\n        if (state) {\n          // 복원 후 로딩 상태 해제\n          state.isLoading = false\n          \n          // 복원된 토큰을 localStorage에도 설정\n          if (state.token && state.isAuthenticated) {\n            localStorage.setItem('authToken', state.token)\n            localStorage.setItem('accessToken', state.token)\n          }\n        }\n      }\n    }\n  )\n)","/**\n * 숏코드 레지스트리 구현\n * 숏코드 정의를 저장하고 관리합니다.\n */\nexport class DefaultShortcodeRegistry {\n    constructor() {\n        this.shortcodes = new Map();\n    }\n    /**\n     * 숏코드 등록\n     */\n    register(definition) {\n        const { name, validate } = definition;\n        // 이름 유효성 검사\n        if (!name || typeof name !== 'string') {\n            throw new Error('Shortcode name must be a non-empty string');\n        }\n        // 이름 형식 검사 (영문자, 숫자, 언더스코어, 하이픈만 허용)\n        if (!/^[a-zA-Z0-9_-]+$/.test(name)) {\n            throw new Error(`Invalid shortcode name: ${name}. Only alphanumeric characters, underscores, and hyphens are allowed.`);\n        }\n        // 중복 검사\n        if (this.shortcodes.has(name)) {\n            console.warn(`Shortcode \"${name}\" is already registered. It will be overwritten.`);\n        }\n        // 기본 속성 유효성 검사\n        if (definition.defaultAttributes && validate) {\n            if (!validate(definition.defaultAttributes)) {\n                throw new Error(`Default attributes for shortcode \"${name}\" are invalid`);\n            }\n        }\n        this.shortcodes.set(name, definition);\n    }\n    /**\n     * 숏코드 제거\n     */\n    unregister(name) {\n        this.shortcodes.delete(name);\n    }\n    /**\n     * 숏코드 조회\n     */\n    get(name) {\n        return this.shortcodes.get(name);\n    }\n    /**\n     * 숏코드 존재 여부 확인\n     */\n    has(name) {\n        return this.shortcodes.has(name);\n    }\n    /**\n     * 모든 숏코드 반환\n     */\n    getAll() {\n        return new Map(this.shortcodes);\n    }\n    /**\n     * 레지스트리 초기화\n     */\n    clear() {\n        this.shortcodes.clear();\n    }\n}\n// 전역 레지스트리 인스턴스\nexport const globalRegistry = new DefaultShortcodeRegistry();\n// 헬퍼 함수들\nexport const registerShortcode = (definition) => {\n    globalRegistry.register(definition);\n};\nexport const unregisterShortcode = (name) => {\n    globalRegistry.unregister(name);\n};\nexport const getShortcode = (name) => {\n    return globalRegistry.get(name);\n};\nexport const hasShortcode = (name) => {\n    return globalRegistry.has(name);\n};\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createContext, useContext } from 'react';\nimport { defaultParser } from './parser';\nimport { globalRegistry } from './registry';\nimport { useShortcodes } from './renderer';\nconst ShortcodeContext = createContext(null);\n/**\n * Shortcode Provider Component\n */\nexport const ShortcodeProvider = ({ children, parser = defaultParser, registry = globalRegistry }) => {\n    const { render } = useShortcodes(parser, registry);\n    const value = {\n        parser,\n        registry,\n        render\n    };\n    return (_jsx(ShortcodeContext.Provider, { value: value, children: children }));\n};\n/**\n * useShortcodeContext Hook\n */\nexport const useShortcodeContext = () => {\n    const context = useContext(ShortcodeContext);\n    if (!context) {\n        throw new Error('useShortcodeContext must be used within a ShortcodeProvider');\n    }\n    return context;\n};\nexport const ShortcodeContent = ({ content, context, className }) => {\n    const { render } = useShortcodeContext();\n    return (_jsx(\"div\", { className: className, children: render(content, context) }));\n};\n","/**\n * Cache Manager for Dynamic Shortcodes\n * Implements LRU (Least Recently Used) cache with TTL (Time To Live)\n */\nclass ShortcodeCache {\n    constructor(maxSize = 100, defaultTTL = 5 * 60 * 1000) {\n        this.cache = new Map();\n        this.maxSize = maxSize;\n        this.defaultTTL = defaultTTL;\n    }\n    /**\n     * Generate a unique cache key from shortcode attributes\n     */\n    generateKey(type, attributes, context) {\n        const contextKey = context?.postId || context?.currentPost?.id || 'global';\n        const attrKey = Object.entries(attributes)\n            .sort(([a], [b]) => a.localeCompare(b))\n            .map(([key, value]) => `${key}:${value}`)\n            .join('|');\n        return `${type}:${contextKey}:${attrKey}`;\n    }\n    /**\n     * Get cached data if valid\n     */\n    get(key) {\n        const entry = this.cache.get(key);\n        if (!entry) {\n            return null;\n        }\n        // Check if expired\n        if (Date.now() > entry.timestamp + entry.ttl) {\n            this.cache.delete(key);\n            return null;\n        }\n        // Move to end (LRU)\n        this.cache.delete(key);\n        this.cache.set(key, entry);\n        return entry.data;\n    }\n    /**\n     * Set cache data\n     */\n    set(key, data, ttl) {\n        // Ensure cache doesn't exceed max size\n        if (this.cache.size >= this.maxSize && !this.cache.has(key)) {\n            // Remove oldest entry (first in map)\n            const firstKey = this.cache.keys().next().value;\n            this.cache.delete(firstKey);\n        }\n        this.cache.set(key, {\n            data,\n            timestamp: Date.now(),\n            ttl: ttl || this.defaultTTL,\n        });\n    }\n    /**\n     * Clear specific cache entries by pattern\n     */\n    clearByPattern(pattern) {\n        const regex = new RegExp(pattern);\n        const keysToDelete = [];\n        for (const key of this.cache.keys()) {\n            if (regex.test(key)) {\n                keysToDelete.push(key);\n            }\n        }\n        keysToDelete.forEach(key => this.cache.delete(key));\n    }\n    /**\n     * Clear all cache\n     */\n    clear() {\n        this.cache.clear();\n    }\n    /**\n     * Get cache statistics\n     */\n    getStats() {\n        return {\n            size: this.cache.size,\n            maxSize: this.maxSize,\n            hitRate: 0, // Would need to track hits/misses for accurate rate\n        };\n    }\n}\n// Singleton instance\nexport const shortcodeCache = new ShortcodeCache();\n/**\n * React hook for using cache with shortcodes\n */\nexport function useShortcodeCache(cacheKey, fetcher, ttl) {\n    const [data, setData] = React.useState(null);\n    const [loading, setLoading] = React.useState(true);\n    const [error, setError] = React.useState(null);\n    const fetchData = React.useCallback(async (forceRefresh = false) => {\n        try {\n            setLoading(true);\n            setError(null);\n            // Check cache first\n            if (!forceRefresh) {\n                const cached = shortcodeCache.get(cacheKey);\n                if (cached !== null) {\n                    setData(cached);\n                    setLoading(false);\n                    return;\n                }\n            }\n            // Fetch fresh data\n            const freshData = await fetcher();\n            // Update cache\n            shortcodeCache.set(cacheKey, freshData, ttl);\n            setData(freshData);\n        }\n        catch (err) {\n            setError(err instanceof Error ? err : new Error('Unknown error'));\n            setData(null);\n        }\n        finally {\n            setLoading(false);\n        }\n    }, [cacheKey, fetcher, ttl]);\n    React.useEffect(() => {\n        fetchData();\n    }, [fetchData]);\n    const refetch = React.useCallback(() => fetchData(true), [fetchData]);\n    return { data, loading, error, refetch };\n}\n/**\n * Cache configuration per shortcode type\n */\nexport const CACHE_CONFIG = {\n    cpt_list: {\n        ttl: 5 * 60 * 1000, // 5 minutes\n        maxSize: 50,\n    },\n    cpt_field: {\n        ttl: 10 * 60 * 1000, // 10 minutes\n        maxSize: 200,\n    },\n    acf_field: {\n        ttl: 10 * 60 * 1000, // 10 minutes\n        maxSize: 200,\n    },\n    meta_field: {\n        ttl: 10 * 60 * 1000, // 10 minutes\n        maxSize: 200,\n    },\n};\n/**\n * Invalidate cache for specific post or post type\n */\nexport function invalidatePostCache(postId, postType) {\n    if (postId) {\n        // Clear all cache entries for specific post\n        shortcodeCache.clearByPattern(`.*:${postId}:.*`);\n    }\n    if (postType) {\n        // Clear all cache entries for post type\n        shortcodeCache.clearByPattern(`cpt_list:.*type:${postType}.*`);\n    }\n}\n/**\n * Preload cache for common queries\n */\nexport async function preloadCommonQueries() {\n    const commonQueries = [\n        { type: 'ds_product', count: 6, template: 'grid' },\n        { type: 'ds_supplier', count: 10, template: 'list' },\n        { type: 'ds_product', count: 4, template: 'card' },\n    ];\n    // Preload in background\n    commonQueries.forEach(async (query) => {\n        const key = shortcodeCache.generateKey('cpt_list', query);\n        if (!shortcodeCache.get(key)) {\n            try {\n                const response = await fetch(`/api/cpt/${query.type}/posts?limit=${query.count}`, {\n                    headers: {\n                        'Authorization': `Bearer ${localStorage.getItem('token')}`,\n                        'Content-Type': 'application/json',\n                    },\n                });\n                if (response.ok) {\n                    const data = await response.json();\n                    shortcodeCache.set(key, data, CACHE_CONFIG.cpt_list.ttl);\n                }\n            }\n            catch (error) {\n                console.error('Preload failed for', query, error);\n            }\n        }\n    });\n}\n// Missing React import\nimport * as React from 'react';\nexport default shortcodeCache;\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\n/**\n * Shared UI Components for Dynamic Shortcodes\n */\nimport React from 'react';\nexport const LoadingSpinner = ({ size = 'small', className = '', text = '' }) => {\n    const sizeClasses = {\n        small: 'w-4 h-4',\n        medium: 'w-6 h-6',\n        large: 'w-8 h-8'\n    };\n    return (_jsxs(\"div\", { className: `shortcode-loading inline-flex items-center gap-2 ${className}`, children: [_jsxs(\"svg\", { className: `animate-spin ${sizeClasses[size]}`, xmlns: \"http://www.w3.org/2000/svg\", fill: \"none\", viewBox: \"0 0 24 24\", children: [_jsx(\"circle\", { className: \"opacity-25\", cx: \"12\", cy: \"12\", r: \"10\", stroke: \"currentColor\", strokeWidth: \"4\" }), _jsx(\"path\", { className: \"opacity-75\", fill: \"currentColor\", d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" })] }), text && _jsx(\"span\", { className: \"text-sm text-gray-600\", children: text })] }));\n};\nexport const ErrorMessage = ({ error, fallback, showDetails = false, className = '' }) => {\n    const errorMessage = error instanceof Error ? error.message : error;\n    if (fallback) {\n        return _jsx(_Fragment, { children: fallback });\n    }\n    return (_jsxs(\"div\", { className: `shortcode-error inline-flex items-center gap-2 text-red-600 ${className}`, children: [_jsx(\"svg\", { className: \"w-4 h-4\", fill: \"none\", stroke: \"currentColor\", viewBox: \"0 0 24 24\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsx(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" }) }), showDetails ? (_jsx(\"span\", { className: \"text-sm\", children: errorMessage })) : (_jsx(\"span\", { className: \"text-sm\", children: \"Failed to load content\" }))] }));\n};\nexport const Placeholder = ({ type, lines = 3, className = '' }) => {\n    switch (type) {\n        case 'text':\n            return (_jsx(\"div\", { className: `shortcode-placeholder animate-pulse ${className}`, children: Array.from({ length: lines }).map((_, i) => (_jsx(\"div\", { className: \"h-4 bg-gray-200 rounded mb-2\", style: { width: i === lines - 1 ? '60%' : '100%' } }, i))) }));\n        case 'image':\n            return (_jsx(\"div\", { className: `shortcode-placeholder animate-pulse ${className}`, children: _jsx(\"div\", { className: \"w-full h-48 bg-gray-200 rounded\" }) }));\n        case 'list':\n            return (_jsx(\"div\", { className: `shortcode-placeholder animate-pulse ${className}`, children: Array.from({ length: 3 }).map((_, i) => (_jsxs(\"div\", { className: \"flex gap-4 mb-4\", children: [_jsx(\"div\", { className: \"w-16 h-16 bg-gray-200 rounded\" }), _jsxs(\"div\", { className: \"flex-1\", children: [_jsx(\"div\", { className: \"h-4 bg-gray-200 rounded mb-2\" }), _jsx(\"div\", { className: \"h-3 bg-gray-200 rounded w-3/4\" })] })] }, i))) }));\n        case 'card':\n            return (_jsx(\"div\", { className: `shortcode-placeholder animate-pulse ${className}`, children: _jsxs(\"div\", { className: \"border rounded-lg p-4\", children: [_jsx(\"div\", { className: \"h-32 bg-gray-200 rounded mb-3\" }), _jsx(\"div\", { className: \"h-5 bg-gray-200 rounded mb-2\" }), _jsx(\"div\", { className: \"h-4 bg-gray-200 rounded w-3/4\" })] }) }));\n        default:\n            return null;\n    }\n};\nexport class ShortcodeErrorBoundary extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { hasError: false };\n    }\n    static getDerivedStateFromError(error) {\n        return { hasError: true, error };\n    }\n    componentDidCatch(error, errorInfo) {\n        console.error('Shortcode Error:', error, errorInfo);\n    }\n    render() {\n        if (this.state.hasError) {\n            return (this.props.fallback || (_jsx(ErrorMessage, { error: this.state.error || 'Unknown error', showDetails: false })));\n        }\n        return this.props.children;\n    }\n}\n/**\n * Hook for managing loading states with timeout\n */\nexport function useLoadingState(initialLoading = true, timeout = 10000) {\n    const [loading, setLoading] = React.useState(initialLoading);\n    const [timedOut, setTimedOut] = React.useState(false);\n    const timeoutRef = React.useRef();\n    React.useEffect(() => {\n        if (loading) {\n            timeoutRef.current = setTimeout(() => {\n                setTimedOut(true);\n                setLoading(false);\n            }, timeout);\n        }\n        else {\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n            }\n            setTimedOut(false);\n        }\n        return () => {\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n            }\n        };\n    }, [loading, timeout]);\n    return { loading, timedOut, setLoading };\n}\n/**\n * Format relative time\n */\nexport function formatRelativeTime(date) {\n    const now = new Date();\n    const then = new Date(date);\n    const diff = now.getTime() - then.getTime();\n    const seconds = Math.floor(diff / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n    const days = Math.floor(hours / 24);\n    if (days > 7) {\n        return then.toLocaleDateString('ko-KR');\n    }\n    else if (days > 0) {\n        return `${days}일 전`;\n    }\n    else if (hours > 0) {\n        return `${hours}시간 전`;\n    }\n    else if (minutes > 0) {\n        return `${minutes}분 전`;\n    }\n    else {\n        return '방금 전';\n    }\n}\n/**\n * Truncate text with ellipsis\n */\nexport function truncateText(text, maxLength) {\n    if (text.length <= maxLength)\n        return text;\n    return text.slice(0, maxLength).trim() + '...';\n}\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * CPT List Shortcode Component\n * [cpt_list type=\"ds_product\" count=\"10\" template=\"grid\"]\n */\nimport { useEffect, useState } from 'react';\nimport { shortcodeCache, CACHE_CONFIG } from './cache';\nimport { ErrorMessage, Placeholder } from './components';\n// Default templates for different layouts\nconst DefaultTemplate = ({ posts, attributes }) => (_jsx(\"div\", { className: \"cpt-list cpt-list--default\", children: posts.map((post) => (_jsxs(\"article\", { className: \"cpt-item\", children: [_jsx(\"h3\", { children: _jsx(\"a\", { href: `/cpt-engine/content/${attributes.type}/${post.id}`, children: post.title }) }), attributes.show_excerpt && post.excerpt && (_jsx(\"div\", { className: \"cpt-item__excerpt\", children: post.excerpt })), attributes.show_meta && (_jsxs(\"div\", { className: \"cpt-item__meta\", children: [_jsx(\"span\", { className: \"date\", children: new Date(post.date).toLocaleDateString() }), post.author && _jsxs(\"span\", { className: \"author\", children: [\"by \", post.author.name] })] }))] }, post.id))) }));\nconst GridTemplate = ({ posts, attributes }) => (_jsx(\"div\", { className: `cpt-list cpt-list--grid`, style: {\n        display: 'grid',\n        gridTemplateColumns: `repeat(${attributes.columns || 3}, 1fr)`,\n        gap: '1.5rem'\n    }, children: posts.map((post) => (_jsxs(\"div\", { className: \"cpt-grid-item\", children: [attributes.show_thumbnail && post.featuredImage && (_jsx(\"div\", { className: \"cpt-grid-item__thumbnail\", children: _jsx(\"img\", { src: post.featuredImage, alt: post.title, loading: \"lazy\" }) })), _jsxs(\"div\", { className: \"cpt-grid-item__content\", children: [_jsx(\"h3\", { children: _jsx(\"a\", { href: `/cpt-engine/content/${attributes.type}/${post.id}`, children: post.title }) }), attributes.show_excerpt && post.excerpt && (_jsx(\"p\", { className: \"excerpt\", children: post.excerpt }))] })] }, post.id))) }));\nconst ListTemplate = ({ posts, attributes }) => (_jsx(\"div\", { className: \"cpt-list cpt-list--list\", children: posts.map((post) => (_jsx(\"div\", { className: \"cpt-list-item\", children: _jsxs(\"div\", { className: \"cpt-list-item__row\", children: [attributes.show_thumbnail && post.featuredImage && (_jsx(\"div\", { className: \"cpt-list-item__thumbnail\", children: _jsx(\"img\", { src: post.featuredImage, alt: post.title, loading: \"lazy\" }) })), _jsxs(\"div\", { className: \"cpt-list-item__content\", children: [_jsx(\"h3\", { children: _jsx(\"a\", { href: `/cpt-engine/content/${attributes.type}/${post.id}`, children: post.title }) }), attributes.show_excerpt && post.excerpt && (_jsx(\"p\", { children: post.excerpt })), attributes.show_meta && (_jsxs(\"div\", { className: \"meta\", children: [_jsx(\"span\", { children: new Date(post.date).toLocaleDateString() }), post.author && _jsxs(\"span\", { children: [\" \\u2022 \", post.author.name] })] }))] })] }) }, post.id))) }));\nconst CardTemplate = ({ posts, attributes }) => (_jsx(\"div\", { className: \"cpt-list cpt-list--cards\", style: {\n        display: 'grid',\n        gridTemplateColumns: `repeat(${attributes.columns || 2}, 1fr)`,\n        gap: '2rem'\n    }, children: posts.map((post) => (_jsxs(\"div\", { className: \"cpt-card\", children: [attributes.show_thumbnail && post.featuredImage && (_jsx(\"div\", { className: \"cpt-card__image\", children: _jsx(\"img\", { src: post.featuredImage, alt: post.title, loading: \"lazy\" }) })), _jsxs(\"div\", { className: \"cpt-card__body\", children: [_jsx(\"h3\", { className: \"cpt-card__title\", children: _jsx(\"a\", { href: `/cpt-engine/content/${attributes.type}/${post.id}`, children: post.title }) }), attributes.show_excerpt && post.excerpt && (_jsx(\"p\", { className: \"cpt-card__excerpt\", children: post.excerpt })), attributes.show_meta && (_jsxs(\"div\", { className: \"cpt-card__meta\", children: [_jsx(\"span\", { className: \"date\", children: new Date(post.date).toLocaleDateString() }), post.author && (_jsxs(\"span\", { className: \"author\", children: [\" \\u2022 \", post.author.name] }))] })), _jsx(\"a\", { href: `/cpt-engine/content/${attributes.type}/${post.id}`, className: \"cpt-card__link\", children: \"\\uC790\\uC138\\uD788 \\uBCF4\\uAE30 \\u2192\" })] })] }, post.id))) }));\n// Template map\nconst templates = {\n    default: DefaultTemplate,\n    grid: GridTemplate,\n    list: ListTemplate,\n    card: CardTemplate,\n};\nexport const CPTListShortcode = ({ attributes, context }) => {\n    const [posts, setPosts] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const attrs = attributes;\n    // Set defaults\n    const finalAttrs = {\n        ...attrs,\n        type: attrs.type || 'post',\n        count: attrs.count || 10,\n        orderby: attrs.orderby || 'date',\n        order: attrs.order || 'DESC',\n        status: attrs.status || 'publish',\n        template: attrs.template || 'default',\n        columns: attrs.columns || 3,\n        show_thumbnail: attrs.show_thumbnail !== false,\n        show_excerpt: attrs.show_excerpt !== false,\n        show_meta: attrs.show_meta !== false,\n        cache: attrs.cache !== false\n    };\n    useEffect(() => {\n        const fetchPosts = async () => {\n            try {\n                setLoading(true);\n                // Generate cache key\n                const cacheKey = shortcodeCache.generateKey('cpt_list', finalAttrs, context);\n                // Check cache first if caching is enabled\n                if (finalAttrs.cache) {\n                    const cached = shortcodeCache.get(cacheKey);\n                    if (cached) {\n                        setPosts(cached);\n                        setError(null);\n                        setLoading(false);\n                        return;\n                    }\n                }\n                // Build query params\n                const params = new URLSearchParams({\n                    limit: finalAttrs.count.toString(),\n                    orderby: finalAttrs.orderby,\n                    order: finalAttrs.order,\n                    status: finalAttrs.status,\n                });\n                if (finalAttrs.meta_key) {\n                    params.append('meta_key', finalAttrs.meta_key);\n                }\n                if (finalAttrs.meta_value) {\n                    params.append('meta_value', finalAttrs.meta_value);\n                }\n                // Fetch from API\n                const response = await fetch(`/api/cpt/${finalAttrs.type}/posts?${params}`, {\n                    headers: {\n                        'Authorization': `Bearer ${localStorage.getItem('token')}`,\n                        'Content-Type': 'application/json',\n                    },\n                });\n                if (!response.ok) {\n                    throw new Error(`Failed to fetch ${finalAttrs.type} posts`);\n                }\n                const data = await response.json();\n                // Map API response to CPTPost format\n                const mappedPosts = (data.data || data || []).map((post) => ({\n                    id: post.id,\n                    title: post.title || 'Untitled',\n                    slug: post.slug,\n                    content: post.content,\n                    excerpt: post.excerpt,\n                    featuredImage: post.featuredImage || post.thumbnail,\n                    author: post.author,\n                    date: post.createdAt || post.date,\n                    modified: post.updatedAt || post.modified,\n                    status: post.status,\n                    meta: post.meta || {},\n                    acf: post.customFields || post.acf || {},\n                    taxonomies: post.taxonomies,\n                }));\n                // Cache the results if caching is enabled\n                if (finalAttrs.cache) {\n                    shortcodeCache.set(cacheKey, mappedPosts, CACHE_CONFIG.cpt_list.ttl);\n                }\n                setPosts(mappedPosts);\n                setError(null);\n            }\n            catch (err) {\n                console.error('Error fetching CPT posts:', err);\n                setError(err instanceof Error ? err.message : 'Failed to load posts');\n                setPosts([]);\n            }\n            finally {\n                setLoading(false);\n            }\n        };\n        if (finalAttrs.type) {\n            fetchPosts();\n        }\n    }, [finalAttrs.type, finalAttrs.count, finalAttrs.orderby, finalAttrs.order, finalAttrs.cache, context]);\n    if (loading) {\n        return (_jsx(\"div\", { className: \"cpt-list-loading\", children: finalAttrs.template === 'grid' ? (_jsx(\"div\", { style: {\n                    display: 'grid',\n                    gridTemplateColumns: `repeat(${finalAttrs.columns || 3}, 1fr)`,\n                    gap: '1.5rem'\n                }, children: Array.from({ length: Math.min(finalAttrs.count || 3, 6) }).map((_, i) => (_jsx(Placeholder, { type: \"card\" }, i))) })) : (_jsx(Placeholder, { type: \"list\", lines: Math.min(finalAttrs.count || 3, 5) })) }));\n    }\n    if (error) {\n        return (_jsxs(\"div\", { className: \"cpt-list-error\", children: [_jsx(ErrorMessage, { error: error, showDetails: true, className: \"mb-2\" }), _jsxs(\"p\", { className: \"cpt-list-error__shortcode text-xs text-gray-500\", children: [\"[cpt_list type=\\\"\", finalAttrs.type, \"\\\" count=\\\"\", finalAttrs.count, \"\\\"]\"] })] }));\n    }\n    if (posts.length === 0) {\n        return (_jsx(\"div\", { className: \"cpt-list-empty\", children: _jsxs(\"p\", { children: [\"No \", finalAttrs.type, \" posts found.\"] }) }));\n    }\n    // Select template\n    const Template = templates[finalAttrs.template] || templates.default;\n    return _jsx(Template, { posts: posts, attributes: finalAttrs });\n};\n// Register shortcode\nexport const cptListShortcodeDefinition = {\n    name: 'cpt_list',\n    component: CPTListShortcode,\n    defaultAttributes: {\n        type: 'post',\n        count: 10,\n        template: 'default',\n        show_thumbnail: true,\n        show_excerpt: true,\n        show_meta: true,\n    },\n    description: 'Display a list of CPT posts',\n    example: '[cpt_list type=\"ds_product\" count=\"6\" template=\"grid\" columns=\"3\"]',\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * CPT Field Shortcode Component\n * [cpt_field field=\"title\"] or [cpt_field post_type=\"ds_product\" post_id=\"123\" field=\"price\"]\n */\nimport React, { useEffect, useState, createElement } from 'react';\n// Field formatters\nconst formatters = {\n    date: (value, format) => {\n        const date = new Date(value);\n        if (format === 'relative') {\n            const rtf = new Intl.RelativeTimeFormat('ko', { numeric: 'auto' });\n            const diff = (date.getTime() - Date.now()) / 1000;\n            if (Math.abs(diff) < 60)\n                return rtf.format(Math.round(diff), 'second');\n            if (Math.abs(diff) < 3600)\n                return rtf.format(Math.round(diff / 60), 'minute');\n            if (Math.abs(diff) < 86400)\n                return rtf.format(Math.round(diff / 3600), 'hour');\n            return rtf.format(Math.round(diff / 86400), 'day');\n        }\n        return date.toLocaleDateString('ko-KR', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric'\n        });\n    },\n    currency: (value) => {\n        return new Intl.NumberFormat('ko-KR', {\n            style: 'currency',\n            currency: 'KRW'\n        }).format(value);\n    },\n    number: (value, format) => {\n        if (format === 'comma') {\n            return new Intl.NumberFormat('ko-KR').format(value);\n        }\n        return String(value);\n    },\n    excerpt: (value, format) => {\n        const length = format ? parseInt(format) : 100;\n        if (value.length <= length)\n            return value;\n        return value.substring(0, length) + '...';\n    },\n    default: (value) => String(value || '')\n};\nexport const CPTFieldShortcode = ({ attributes, context }) => {\n    const [value, setValue] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const attrs = attributes;\n    const ctx = context;\n    // Determine post ID and type\n    const postId = attrs.post_id || ctx?.postId || 'current';\n    const postType = attrs.post_type || ctx?.postType || 'post';\n    const field = attrs.field;\n    useEffect(() => {\n        const fetchFieldValue = async () => {\n            try {\n                setLoading(true);\n                // If it's the current post context and we have the data\n                if (postId === 'current' && context?.currentPost) {\n                    const currentPost = context.currentPost;\n                    // Get field value from current post\n                    let fieldValue;\n                    switch (field) {\n                        case 'title':\n                            fieldValue = currentPost.title;\n                            break;\n                        case 'content':\n                            fieldValue = currentPost.content;\n                            break;\n                        case 'excerpt':\n                            fieldValue = currentPost.excerpt;\n                            break;\n                        case 'date':\n                            fieldValue = currentPost.date || currentPost.createdAt;\n                            break;\n                        case 'modified':\n                            fieldValue = currentPost.modified || currentPost.updatedAt;\n                            break;\n                        case 'author':\n                            fieldValue = currentPost.author?.name || 'Unknown';\n                            break;\n                        case 'author_email':\n                            fieldValue = currentPost.author?.email || '';\n                            break;\n                        case 'status':\n                            fieldValue = currentPost.status;\n                            break;\n                        case 'slug':\n                            fieldValue = currentPost.slug;\n                            break;\n                        case 'featured_image':\n                        case 'thumbnail':\n                            fieldValue = currentPost.featuredImage || currentPost.thumbnail;\n                            break;\n                        default:\n                            // Check in meta or custom fields\n                            fieldValue = currentPost.meta?.[field] ||\n                                currentPost.customFields?.[field] ||\n                                currentPost[field];\n                    }\n                    setValue(fieldValue);\n                }\n                else {\n                    // Fetch from API for specific post\n                    const response = await fetch(`/api/cpt/${postType}/posts/${postId}`, {\n                        headers: {\n                            'Authorization': `Bearer ${localStorage.getItem('token')}`,\n                            'Content-Type': 'application/json',\n                        },\n                    });\n                    if (!response.ok) {\n                        throw new Error(`Failed to fetch post ${postId}`);\n                    }\n                    const data = await response.json();\n                    const post = data.data || data;\n                    // Extract field value\n                    let fieldValue;\n                    switch (field) {\n                        case 'title':\n                            fieldValue = post.title;\n                            break;\n                        case 'content':\n                            fieldValue = post.content;\n                            break;\n                        case 'excerpt':\n                            fieldValue = post.excerpt;\n                            break;\n                        case 'date':\n                            fieldValue = post.createdAt || post.date;\n                            break;\n                        case 'modified':\n                            fieldValue = post.updatedAt || post.modified;\n                            break;\n                        case 'author':\n                            fieldValue = post.author?.name || 'Unknown';\n                            break;\n                        case 'author_email':\n                            fieldValue = post.author?.email || '';\n                            break;\n                        case 'status':\n                            fieldValue = post.status;\n                            break;\n                        case 'slug':\n                            fieldValue = post.slug;\n                            break;\n                        case 'featured_image':\n                        case 'thumbnail':\n                            fieldValue = post.featuredImage || post.thumbnail;\n                            break;\n                        default:\n                            // Check in meta or custom fields\n                            fieldValue = post.meta?.[field] ||\n                                post.customFields?.[field] ||\n                                post[field];\n                    }\n                    setValue(fieldValue);\n                }\n                setError(null);\n            }\n            catch (err) {\n                console.error('Error fetching CPT field:', err);\n                setError(err instanceof Error ? err.message : 'Failed to load field');\n                setValue(null);\n            }\n            finally {\n                setLoading(false);\n            }\n        };\n        if (field) {\n            fetchFieldValue();\n        }\n        else {\n            setError('Field name is required');\n            setLoading(false);\n        }\n    }, [postId, postType, field, context]);\n    if (loading) {\n        return _jsx(\"span\", { className: \"cpt-field-loading\", children: \"...\" });\n    }\n    if (error) {\n        if (attrs.default) {\n            return _jsx(\"span\", { className: \"cpt-field-default\", children: attrs.default });\n        }\n        return (_jsxs(\"span\", { className: \"cpt-field-error\", title: error, children: [\"[\", field, \"]\"] }));\n    }\n    if (value === null || value === undefined) {\n        if (attrs.default) {\n            return _jsx(\"span\", { className: \"cpt-field-default\", children: attrs.default });\n        }\n        return null;\n    }\n    // Format the value\n    let formattedValue = value;\n    // Apply formatter based on field type or format attribute\n    if (attrs.format) {\n        const formatter = formatters[attrs.format] || formatters.default;\n        formattedValue = formatter(value, attrs.format);\n    }\n    else {\n        // Auto-detect format based on field name\n        if (field === 'date' || field === 'modified' || field.includes('_date')) {\n            formattedValue = formatters.date(value);\n        }\n        else if (field === 'price' || field.includes('_price') || field.includes('_cost')) {\n            formattedValue = formatters.currency(value);\n        }\n        else if (field === 'excerpt') {\n            formattedValue = formatters.excerpt(value);\n        }\n        else if (field === 'featured_image' || field === 'thumbnail') {\n            // Return image element\n            formattedValue = (_jsx(\"img\", { src: value, alt: \"\", className: `cpt-field-image ${attrs.class || ''}`, loading: \"lazy\" }));\n        }\n        else {\n            formattedValue = formatters.default(value);\n        }\n    }\n    // Wrap in specified HTML element\n    if (attrs.wrapper) {\n        const wrapperTag = attrs.wrapper;\n        return createElement(wrapperTag, {\n            className: `cpt-field cpt-field--${field} ${attrs.class || ''}`\n        }, formattedValue);\n    }\n    // Return formatted value\n    if (React.isValidElement(formattedValue)) {\n        return formattedValue;\n    }\n    return (_jsx(\"span\", { className: `cpt-field cpt-field--${field} ${attrs.class || ''}`, children: formattedValue }));\n};\n// Register shortcode\nexport const cptFieldShortcodeDefinition = {\n    name: 'cpt_field',\n    component: CPTFieldShortcode,\n    defaultAttributes: {\n        field: 'title',\n    },\n    description: 'Display a CPT post field value',\n    examples: [\n        '[cpt_field field=\"title\"]',\n        '[cpt_field field=\"price\" format=\"currency\"]',\n        '[cpt_field post_type=\"ds_product\" post_id=\"123\" field=\"stock_status\" default=\"재고 없음\"]',\n    ],\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * ACF Field Shortcode Component\n * [acf_field name=\"custom_price\" format=\"currency\"]\n */\nimport React, { useEffect, useState, createElement } from 'react';\n// ACF field type formatters\nconst formatACFValue = (value, type, format, attributes) => {\n    // Handle null/undefined\n    if (value === null || value === undefined) {\n        return attributes?.default || '';\n    }\n    // Format based on field type\n    switch (type) {\n        case 'image':\n            if (typeof value === 'object' && value.url) {\n                const size = attributes?.size || 'full';\n                const imageUrl = value.sizes?.[size]?.url || value.url;\n                return (_jsx(\"img\", { src: imageUrl, alt: value.alt || '', title: value.title || '', className: `acf-field-image ${attributes?.class || ''}`, loading: \"lazy\" }));\n            }\n            return _jsx(\"img\", { src: value, alt: \"\", className: `acf-field-image ${attributes?.class || ''}`, loading: \"lazy\" });\n        case 'gallery':\n            if (Array.isArray(value)) {\n                return (_jsx(\"div\", { className: `acf-field-gallery ${attributes?.class || ''}`, children: value.map((img, index) => (_jsx(\"img\", { src: img.url || img, alt: img.alt || '', className: \"acf-gallery-image\", loading: \"lazy\" }, index))) }));\n            }\n            return null;\n        case 'date_picker':\n        case 'date_time_picker':\n            const date = new Date(value);\n            return date.toLocaleDateString('ko-KR', {\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric',\n                ...(type === 'date_time_picker' && {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                })\n            });\n        case 'time_picker':\n            return value; // Already formatted from ACF\n        case 'true_false':\n            return value ? '예' : '아니오';\n        case 'select':\n        case 'radio':\n            if (typeof value === 'object' && value.label) {\n                return value.label;\n            }\n            return value;\n        case 'checkbox':\n            if (Array.isArray(value)) {\n                const separator = attributes?.separator || ', ';\n                return value.map(v => v.label || v).join(separator);\n            }\n            return value;\n        case 'relationship':\n        case 'post_object':\n            if (Array.isArray(value)) {\n                return (_jsx(\"ul\", { className: `acf-field-posts ${attributes?.class || ''}`, children: value.map((post) => (_jsx(\"li\", { children: _jsx(\"a\", { href: post.permalink || `/cpt-engine/content/post/${post.ID || post.id}`, children: post.post_title || post.title }) }, post.ID || post.id))) }));\n            }\n            if (typeof value === 'object' && value.post_title) {\n                return (_jsx(\"a\", { href: value.permalink || `/cpt-engine/content/post/${value.ID}`, children: value.post_title }));\n            }\n            return value;\n        case 'user':\n            if (typeof value === 'object') {\n                return value.display_name || value.name || value.user_nicename;\n            }\n            return value;\n        case 'taxonomy':\n            if (Array.isArray(value)) {\n                const separator = attributes?.separator || ', ';\n                return value.map(term => term.name || term).join(separator);\n            }\n            if (typeof value === 'object' && value.name) {\n                return value.name;\n            }\n            return value;\n        case 'repeater':\n            if (Array.isArray(value)) {\n                return (_jsx(\"div\", { className: `acf-field-repeater ${attributes?.class || ''}`, children: value.map((row, index) => (_jsx(\"div\", { className: \"acf-repeater-row\", children: Object.entries(row).map(([key, val]) => (_jsxs(\"div\", { className: \"acf-repeater-field\", children: [_jsxs(\"span\", { className: \"field-label\", children: [key, \": \"] }), _jsx(\"span\", { className: \"field-value\", children: String(val) })] }, key))) }, index))) }));\n            }\n            return null;\n        case 'url':\n            return (_jsx(\"a\", { href: value, target: \"_blank\", rel: \"noopener noreferrer\", className: attributes?.class || '', children: value }));\n        case 'email':\n            return (_jsx(\"a\", { href: `mailto:${value}`, className: attributes?.class || '', children: value }));\n        case 'number':\n            if (format === 'currency' || attributes?.name?.includes('price') || attributes?.name?.includes('cost')) {\n                return new Intl.NumberFormat('ko-KR', {\n                    style: 'currency',\n                    currency: 'KRW'\n                }).format(value);\n            }\n            if (format === 'comma') {\n                return new Intl.NumberFormat('ko-KR').format(value);\n            }\n            return value;\n        case 'wysiwyg':\n        case 'textarea':\n            if (format === 'html' || type === 'wysiwyg') {\n                return _jsx(\"div\", { dangerouslySetInnerHTML: { __html: value }, className: attributes?.class || '' });\n            }\n            return value;\n        default:\n            return String(value);\n    }\n};\nexport const ACFFieldShortcode = ({ attributes, context }) => {\n    const [fieldData, setFieldData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const attrs = attributes;\n    const ctx = context;\n    const fieldName = attrs.name;\n    const postId = attrs.post_id || ctx?.postId || 'current';\n    useEffect(() => {\n        const fetchACFField = async () => {\n            try {\n                setLoading(true);\n                if (!fieldName) {\n                    throw new Error('Field name is required');\n                }\n                // If current post context has ACF data\n                if (postId === 'current' && context?.currentPost?.acf) {\n                    const acfData = context.currentPost.acf;\n                    const value = acfData[fieldName];\n                    if (value !== undefined) {\n                        setFieldData({\n                            value,\n                            type: attrs.type || 'text',\n                            formatted: String(value),\n                        });\n                    }\n                    else {\n                        throw new Error(`ACF field \"${fieldName}\" not found`);\n                    }\n                }\n                else {\n                    // Fetch from API\n                    const actualPostId = postId === 'current' ? ctx?.postId : postId;\n                    if (!actualPostId) {\n                        throw new Error('Unable to determine post ID');\n                    }\n                    const response = await fetch(`/api/acf/fields/${fieldName}/value?post_id=${actualPostId}`, {\n                        headers: {\n                            'Authorization': `Bearer ${localStorage.getItem('token')}`,\n                            'Content-Type': 'application/json',\n                        },\n                    });\n                    if (!response.ok) {\n                        throw new Error(`Failed to fetch ACF field \"${fieldName}\"`);\n                    }\n                    const data = await response.json();\n                    setFieldData({\n                        value: data.value,\n                        type: data.type || attrs.type || 'text',\n                        formatted: data.formatted || String(data.value),\n                    });\n                }\n                setError(null);\n            }\n            catch (err) {\n                console.error('Error fetching ACF field:', err);\n                setError(err instanceof Error ? err.message : 'Failed to load ACF field');\n                setFieldData(null);\n            }\n            finally {\n                setLoading(false);\n            }\n        };\n        fetchACFField();\n    }, [fieldName, postId, context, attrs.type]);\n    if (loading) {\n        return _jsx(\"span\", { className: \"acf-field-loading\", children: \"...\" });\n    }\n    if (error) {\n        if (attrs.default) {\n            return _jsx(\"span\", { className: \"acf-field-default\", children: attrs.default });\n        }\n        return (_jsxs(\"span\", { className: \"acf-field-error\", title: error, children: [\"[acf:\", fieldName, \"]\"] }));\n    }\n    if (!fieldData || fieldData.value === null || fieldData.value === undefined) {\n        if (attrs.default) {\n            return _jsx(\"span\", { className: \"acf-field-default\", children: attrs.default });\n        }\n        return null;\n    }\n    // Format the value\n    const formattedContent = formatACFValue(fieldData.value, fieldData.type, attrs.format, attrs);\n    // Wrap in specified HTML element\n    if (attrs.wrapper) {\n        const wrapperTag = attrs.wrapper;\n        return createElement(wrapperTag, {\n            className: `acf-field acf-field--${fieldName} acf-type--${fieldData.type} ${attrs.class || ''}`\n        }, formattedContent);\n    }\n    // Return formatted value\n    if (React.isValidElement(formattedContent)) {\n        return formattedContent;\n    }\n    return (_jsx(\"span\", { className: `acf-field acf-field--${fieldName} acf-type--${fieldData.type} ${attrs.class || ''}`, children: formattedContent }));\n};\n// Register shortcode\nexport const acfFieldShortcodeDefinition = {\n    name: 'acf_field',\n    component: ACFFieldShortcode,\n    defaultAttributes: {\n        format: 'formatted',\n    },\n    description: 'Display an ACF field value',\n    examples: [\n        '[acf_field name=\"custom_price\" format=\"currency\"]',\n        '[acf_field name=\"product_gallery\" type=\"gallery\"]',\n        '[acf_field name=\"featured_video\" default=\"No video available\"]',\n        '[acf_field name=\"supplier_info\" post_id=\"123\"]',\n    ],\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\n/**\n * Meta Field Shortcode Component\n * [meta_field key=\"_stock_status\" default=\"재고 확인 중\"]\n */\nimport { useEffect, useState, createElement } from 'react';\n// Common meta field formatters\nconst formatMetaValue = (value, key, format) => {\n    // Handle arrays\n    if (Array.isArray(value)) {\n        return value.join(', ');\n    }\n    // Handle objects\n    if (typeof value === 'object' && value !== null) {\n        // If it's a nested object, try to extract data\n        if (value.data) {\n            return formatMetaValue(value.data, key, format);\n        }\n        return JSON.stringify(value);\n    }\n    // Format based on key patterns or explicit format\n    if (format === 'boolean' || key.includes('_is_') || key.includes('_has_')) {\n        return value ? '예' : '아니오';\n    }\n    if (format === 'currency' || key.includes('_price') || key.includes('_cost') || key.includes('_amount')) {\n        const numValue = parseFloat(value);\n        if (!isNaN(numValue)) {\n            return new Intl.NumberFormat('ko-KR', {\n                style: 'currency',\n                currency: 'KRW'\n            }).format(numValue);\n        }\n    }\n    if (format === 'date' || key.includes('_date') || key.includes('_time')) {\n        const date = new Date(value);\n        if (!isNaN(date.getTime())) {\n            return date.toLocaleDateString('ko-KR');\n        }\n    }\n    if (format === 'number' || key.includes('_count') || key.includes('_qty') || key.includes('_quantity')) {\n        const numValue = parseFloat(value);\n        if (!isNaN(numValue)) {\n            return new Intl.NumberFormat('ko-KR').format(numValue);\n        }\n    }\n    // Special WordPress meta keys\n    switch (key) {\n        case '_thumbnail_id':\n            return `Image ID: ${value}`;\n        case '_wp_page_template':\n            return value === 'default' ? 'Default Template' : value;\n        case '_edit_lock':\n            const [, userId] = String(value).split(':');\n            return `Locked by user ${userId}`;\n        case '_stock_status':\n            return value === 'instock' ? '재고 있음' : value === 'outofstock' ? '품절' : value;\n        case '_visibility':\n            return value === 'visible' ? '공개' : value === 'hidden' ? '비공개' : value;\n        case '_featured':\n            return value === 'yes' ? '추천' : '';\n        case '_downloadable':\n        case '_virtual':\n            return value === 'yes' ? '예' : '아니오';\n    }\n    return String(value);\n};\nexport const MetaFieldShortcode = ({ attributes, context }) => {\n    const [value, setValue] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n    const attrs = attributes;\n    const ctx = context;\n    const metaKey = attrs.key;\n    const postId = attrs.post_id || ctx?.postId || 'current';\n    const single = attrs.single !== false; // Default to true\n    useEffect(() => {\n        const fetchMetaField = async () => {\n            try {\n                setLoading(true);\n                if (!metaKey) {\n                    throw new Error('Meta key is required');\n                }\n                // If current post context has meta data\n                if (postId === 'current' && context?.currentPost?.meta) {\n                    const metaData = context.currentPost.meta;\n                    const metaValue = metaData[metaKey];\n                    if (metaValue !== undefined) {\n                        setValue(single && Array.isArray(metaValue) ? metaValue[0] : metaValue);\n                    }\n                    else {\n                        // Meta key not found\n                        setValue(null);\n                    }\n                }\n                else {\n                    // Fetch from API\n                    const actualPostId = postId === 'current' ? ctx?.postId : postId;\n                    if (!actualPostId) {\n                        throw new Error('Unable to determine post ID');\n                    }\n                    const response = await fetch(`/api/posts/${actualPostId}/meta/${metaKey}`, {\n                        headers: {\n                            'Authorization': `Bearer ${localStorage.getItem('token')}`,\n                            'Content-Type': 'application/json',\n                        },\n                    });\n                    if (response.status === 404) {\n                        // Meta key doesn't exist\n                        setValue(null);\n                    }\n                    else if (!response.ok) {\n                        throw new Error(`Failed to fetch meta field \"${metaKey}\"`);\n                    }\n                    else {\n                        const data = await response.json();\n                        setValue(single && Array.isArray(data.value) ? data.value[0] : data.value);\n                    }\n                }\n                setError(null);\n            }\n            catch (err) {\n                console.error('Error fetching meta field:', err);\n                setError(err instanceof Error ? err.message : 'Failed to load meta field');\n                setValue(null);\n            }\n            finally {\n                setLoading(false);\n            }\n        };\n        fetchMetaField();\n    }, [metaKey, postId, single, context]);\n    if (loading) {\n        return _jsx(\"span\", { className: \"meta-field-loading\", children: \"...\" });\n    }\n    if (error) {\n        if (attrs.default) {\n            return _jsx(\"span\", { className: \"meta-field-default\", children: attrs.default });\n        }\n        return (_jsxs(\"span\", { className: \"meta-field-error\", title: error, children: [\"[meta:\", metaKey, \"]\"] }));\n    }\n    if (value === null || value === undefined || value === '') {\n        if (attrs.default) {\n            return _jsx(\"span\", { className: \"meta-field-default\", children: attrs.default });\n        }\n        return null;\n    }\n    // Format the value\n    const formattedValue = formatMetaValue(value, metaKey, attrs.format);\n    // Special handling for certain meta keys that should render as elements\n    if (metaKey === '_thumbnail_id' && value) {\n        // Try to fetch and display the actual image\n        return (_jsx(\"img\", { src: `/api/media/${value}`, alt: \"\", className: `meta-field-thumbnail ${attrs.class || ''}`, loading: \"lazy\" }));\n    }\n    // Wrap in specified HTML element\n    if (attrs.wrapper) {\n        const wrapperTag = attrs.wrapper;\n        return createElement(wrapperTag, {\n            className: `meta-field meta-field--${metaKey.replace(/^_/, '')} ${attrs.class || ''}`\n        }, formattedValue);\n    }\n    return (_jsx(\"span\", { className: `meta-field meta-field--${metaKey.replace(/^_/, '')} ${attrs.class || ''}`, children: formattedValue }));\n};\n// Register shortcode\nexport const metaFieldShortcodeDefinition = {\n    name: 'meta_field',\n    component: MetaFieldShortcode,\n    defaultAttributes: {\n        single: true,\n    },\n    description: 'Display a WordPress meta field value',\n    examples: [\n        '[meta_field key=\"_stock_status\" default=\"재고 확인 중\"]',\n        '[meta_field key=\"_price\" format=\"currency\"]',\n        '[meta_field key=\"_thumbnail_id\"]',\n        '[meta_field key=\"custom_meta_key\" post_id=\"123\"]',\n    ],\n};\n","/**\n * Register Dynamic Shortcodes in Admin Dashboard\n */\nimport { globalRegistry } from '@o4o/shortcodes';\nimport { \n  CPTListShortcode,\n  CPTFieldShortcode,\n  ACFFieldShortcode,\n  MetaFieldShortcode\n} from '@o4o/shortcodes/dynamic';\n\nexport function registerDynamicShortcodes() {\n  // Register CPT List Shortcode\n  globalRegistry.register({\n    name: 'cpt_list',\n    component: CPTListShortcode,\n    defaultAttributes: {\n      type: 'post',\n      count: 10,\n      template: 'default',\n    },\n  });\n\n  // Register CPT Field Shortcode\n  globalRegistry.register({\n    name: 'cpt_field',\n    component: CPTFieldShortcode,\n    defaultAttributes: {\n      field: 'title',\n    },\n  });\n\n  // Register ACF Field Shortcode\n  globalRegistry.register({\n    name: 'acf_field',\n    component: ACFFieldShortcode,\n    defaultAttributes: {\n      format: 'formatted',\n    },\n  });\n\n  // Register Meta Field Shortcode\n  globalRegistry.register({\n    name: 'meta_field',\n    component: MetaFieldShortcode,\n    defaultAttributes: {\n      single: true,\n    },\n  });\n\n  // Dynamic shortcodes registered successfully\n}\n\n// Call registration on import\nregisterDynamicShortcodes();","/**\n * AI 설정 마이그레이션 유틸리티\n * 구버전 설정을 새 버전으로 자동 업데이트\n */\n\nexport class AIConfigMigration {\n  private static MIGRATED_KEY = 'ai_config_migrated_v2';\n  \n  /**\n   * 구버전 gemini-pro 설정을 새 모델로 마이그레이션\n   */\n  static migrateOldConfigs(): void {\n    // 이미 마이그레이션 되었는지 확인\n    if (localStorage.getItem(this.MIGRATED_KEY)) {\n      return;\n    }\n    \n    try {\n      // AI 모델 설정 확인 및 업데이트\n      const defaultModel = localStorage.getItem('ai_default_model_gemini');\n      if (defaultModel === 'gemini-pro') {\n        localStorage.setItem('ai_default_model_gemini', 'gemini-2.5-flash');\n        // Migration: Updated gemini-pro to gemini-2.5-flash\n      }\n      \n      // 저장된 API 키 확인\n      const apiKeysStr = localStorage.getItem('ai_api_keys');\n      if (apiKeysStr) {\n        try {\n          const apiKeys = JSON.parse(apiKeysStr);\n          // API 키가 있으면 기본 모델 설정\n          if (apiKeys.gemini && !localStorage.getItem('ai_default_model_gemini')) {\n            localStorage.setItem('ai_default_model_gemini', 'gemini-2.5-flash');\n          }\n        } catch (e) {\n          // Migration: Failed to parse API keys\n        }\n      }\n      \n      // 모든 로컬 스토리지 항목 검사\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key) {\n          const value = localStorage.getItem(key);\n          if (value && value.includes('gemini-pro')) {\n            // gemini-pro를 gemini-2.5-flash로 치환\n            const newValue = value.replace(/gemini-pro/g, 'gemini-2.5-flash');\n            localStorage.setItem(key, newValue);\n            // Migration: Updated model from gemini-pro to gemini-2.5-flash\n          }\n        }\n      }\n      \n      // 마이그레이션 완료 표시\n      localStorage.setItem(this.MIGRATED_KEY, new Date().toISOString());\n      // Migration completed successfully\n      \n    } catch (error) {\n      // Migration failed - silently continue\n    }\n  }\n  \n  /**\n   * 디버깅용: 모든 AI 관련 로컬 스토리지 항목 가져오기\n   */\n  static debugAIConfigs(): Record<string, string> {\n    const configs: Record<string, string> = {};\n    \n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key && (key.includes('ai') || key.includes('gemini') || key.includes('model'))) {\n        const value = localStorage.getItem(key);\n        if (value) {\n          configs[key] = value;\n        }\n      }\n    }\n    \n    return configs;\n  }\n  \n  /**\n   * 강제 리셋: 모든 gemini-pro 참조 제거\n   */\n  static forceResetGeminiPro(): void {\n    let updated = 0;\n    \n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n      if (key) {\n        const value = localStorage.getItem(key);\n        if (value && value.includes('gemini-pro')) {\n          if (key.includes('model')) {\n            // 모델 설정은 새 모델로 교체\n            const newValue = value.replace(/gemini-pro/g, 'gemini-2.5-flash');\n            localStorage.setItem(key, newValue);\n            updated++;\n            // Reset: Updated model to use gemini-2.5-flash\n          } else {\n            // 다른 항목은 삭제\n            localStorage.removeItem(key);\n            updated++;\n            // Reset: Removed item containing gemini-pro\n          }\n        }\n      }\n    }\n    \n    if (updated > 0) {\n      // Reset: Updated/Removed items containing gemini-pro\n      // 마이그레이션 플래그 재설정\n      localStorage.setItem(this.MIGRATED_KEY, new Date().toISOString());\n    } else {\n      // Reset: No gemini-pro references found\n    }\n  }\n}\n\n// 페이지 로드 시 자동 실행\nif (typeof window !== 'undefined') {\n  // 자동 마이그레이션 실행\n  AIConfigMigration.migrateOldConfigs();\n  \n  // 개발자 도구 콘솔에서 사용 가능하도록 전역 노출\n  (window as any).AIConfigMigration = AIConfigMigration;\n}","import { ReactElement } from 'react';\nimport { \n  LayoutDashboard, \n  FileText, \n  Image, \n  FileTextIcon,\n  ShoppingCart,\n  Users,\n  Wrench,\n  Settings,\n  MessageSquare,\n  Tag,\n  Menu as MenuIcon,\n  Palette,\n  UserCheck,\n  Share2,\n  Monitor,\n  DollarSign,\n  FileCode,\n  RefreshCw,\n  Package,\n  ClipboardList,\n  UserPlus,\n  TrendingUp,\n  Link,\n  BarChart3,\n  Store,\n  CreditCard,\n  FileCheck,\n  Layout,\n  FolderTree,\n  Activity,\n  Shield,\n  Puzzle,\n  Plus,\n  Code,\n  ChevronLeft\n} from 'lucide-react';\n\nexport interface MenuItem {\n  id: string;\n  label: string;\n  icon: ReactElement;\n  path?: string;\n  separator?: boolean;\n  children?: MenuItem[];\n}\n\nexport const wordpressMenuItems: MenuItem[] = [\n  {\n    id: 'dashboard',\n    label: '대시보드',\n    icon: <LayoutDashboard className=\"w-5 h-5\" />,\n    path: '/admin'\n  },\n  // 1. 글\n  {\n    id: 'posts',\n    label: '글',\n    icon: <FileText className=\"w-5 h-5\" />,\n    children: [\n      { id: 'posts-all', label: '모든 글', icon: <FileText className=\"w-4 h-4\" />, path: '/posts' },\n      { id: 'posts-new', label: '새 글 추가', icon: <FileText className=\"w-4 h-4\" />, path: '/editor/posts/new' },\n      { id: 'posts-categories', label: '카테고리', icon: <Tag className=\"w-4 h-4\" />, path: '/posts/categories' },\n      { id: 'posts-tags', label: '태그', icon: <Tag className=\"w-4 h-4\" />, path: '/posts/tags' }\n    ]\n  },\n  // 2. 미디어\n  {\n    id: 'media',\n    label: '미디어',\n    icon: <Image className=\"w-5 h-5\" />,\n    children: [\n      { id: 'media-library', label: '라이브러리', icon: <Image className=\"w-4 h-4\" />, path: '/media' },\n      { id: 'media-new', label: '새로 추가', icon: <Image className=\"w-4 h-4\" />, path: '/media/new' }\n    ]\n  },\n  // 3. 페이지\n  {\n    id: 'pages',\n    label: '페이지',\n    icon: <FileTextIcon className=\"w-5 h-5\" />,\n    children: [\n      { id: 'pages-all', label: '모든 페이지', icon: <FileTextIcon className=\"w-4 h-4\" />, path: '/pages' },\n      { id: 'pages-new', label: '새 페이지 추가', icon: <FileTextIcon className=\"w-4 h-4\" />, path: '/editor/pages/new' }\n    ]\n  },\n  // 4. 외모\n  {\n    id: 'appearance',\n    label: '외모',\n    icon: <Palette className=\"w-5 h-5\" />,\n    children: [\n      { id: 'customize', label: '사용자 정의하기', icon: <Palette className=\"w-4 h-4\" />, path: '/customize' },\n      { id: 'menus', label: '메뉴', icon: <MenuIcon className=\"w-4 h-4\" />, path: '/appearance/menus' },\n      { id: 'template-parts', label: '템플릿 파트', icon: <Layout className=\"w-4 h-4\" />, path: '/appearance/template-parts' }\n    ]\n  },\n  // 5. 사용자\n  {\n    id: 'users',\n    label: '사용자',\n    icon: <Users className=\"w-5 h-5\" />,\n    children: [\n      { id: 'users-all', label: '모든 사용자', icon: <Users className=\"w-4 h-4\" />, path: '/users' },\n      { id: 'users-new', label: '새로 추가', icon: <UserPlus className=\"w-4 h-4\" />, path: '/users/new' },\n      { id: 'users-profile', label: '프로필', icon: <Users className=\"w-4 h-4\" />, path: '/users/profile' },\n      { id: 'users-roles', label: '역할 관리', icon: <UserCheck className=\"w-4 h-4\" />, path: '/users/roles' },\n      { id: 'users-statistics', label: '사용자 통계', icon: <BarChart3 className=\"w-4 h-4\" />, path: '/users/statistics' }\n    ]\n  },\n  // 구분선 1\n  {\n    id: 'separator-1',\n    label: '',\n    icon: <></>,\n    separator: true\n  },\n  // 6. 드롭쉬핑\n  {\n    id: 'dropshipping',\n    label: '드롭쉬핑',\n    icon: <ShoppingCart className=\"w-5 h-5\" />,\n    children: [\n      { id: 'ds-products', label: '상품 관리', icon: <Package className=\"w-4 h-4\" />, path: '/dropshipping/products' },\n      { id: 'ds-suppliers', label: '공급자', icon: <Store className=\"w-4 h-4\" />, path: '/dropshipping/suppliers' },\n      { id: 'ds-sellers', label: '판매자', icon: <UserCheck className=\"w-4 h-4\" />, path: '/dropshipping/sellers' },\n      { id: 'ds-partners', label: '파트너', icon: <Users className=\"w-4 h-4\" />, path: '/dropshipping/partners' },\n      { id: 'ds-approvals', label: '승인 관리', icon: <FileCheck className=\"w-4 h-4\" />, path: '/dropshipping/approvals' },\n      { id: 'ds-commissions', label: '수수료 정책', icon: <DollarSign className=\"w-4 h-4\" />, path: '/dropshipping/commissions' },\n      { id: 'ds-setup', label: '시스템 설정', icon: <Settings className=\"w-4 h-4\" />, path: '/dropshipping/setup' }\n    ]\n  },\n  // 7. 크라우드펀딩\n  {\n    id: 'crowdfunding',\n    label: '크라우드펀딩',\n    icon: <DollarSign className=\"w-5 h-5\" />,\n    children: [\n      { id: 'crowdfunding-projects', label: '프로젝트 관리', icon: <FileText className=\"w-4 h-4\" />, path: '/crowdfunding/projects' },\n      { id: 'crowdfunding-backers', label: '후원자 관리', icon: <Users className=\"w-4 h-4\" />, path: '/crowdfunding/backers' },\n      { id: 'crowdfunding-rewards', label: '리워드 관리', icon: <Package className=\"w-4 h-4\" />, path: '/crowdfunding/rewards' },\n      { id: 'crowdfunding-payments', label: '결제 관리', icon: <CreditCard className=\"w-4 h-4\" />, path: '/crowdfunding/payments' },\n      { id: 'crowdfunding-reports', label: '보고서', icon: <BarChart3 className=\"w-4 h-4\" />, path: '/crowdfunding/reports' },\n      { id: 'crowdfunding-settings', label: '설정', icon: <Settings className=\"w-4 h-4\" />, path: '/crowdfunding/settings' }\n    ]\n  },\n  // 8. 이커머스\n  {\n    id: 'ecommerce',\n    label: '이커머스',\n    icon: <Store className=\"w-5 h-5\" />,\n    children: [\n      { id: 'ecommerce-products', label: '상품 관리', icon: <Package className=\"w-4 h-4\" />, path: '/ecommerce/products' },\n      { id: 'ecommerce-orders', label: '주문 관리', icon: <ShoppingCart className=\"w-4 h-4\" />, path: '/ecommerce/orders' },\n      { id: 'ecommerce-customers', label: '고객 관리', icon: <Users className=\"w-4 h-4\" />, path: '/ecommerce/customers' },\n      { id: 'ecommerce-coupons', label: '쿠폰 관리', icon: <Tag className=\"w-4 h-4\" />, path: '/ecommerce/coupons' },\n      { id: 'ecommerce-reports', label: '매출 보고서', icon: <BarChart3 className=\"w-4 h-4\" />, path: '/ecommerce/reports' },\n      { id: 'ecommerce-settings', label: '설정', icon: <Settings className=\"w-4 h-4\" />, path: '/ecommerce/settings' }\n    ]\n  },\n  // 9. 포럼\n  {\n    id: 'forum',\n    label: '포럼',\n    icon: <MessageSquare className=\"w-5 h-5\" />,\n    children: [\n      { id: 'forum-boards', label: '게시판 관리', icon: <MessageSquare className=\"w-4 h-4\" />, path: '/forum/boards' },\n      { id: 'forum-categories', label: '카테고리', icon: <FolderTree className=\"w-4 h-4\" />, path: '/forum/categories' },\n      { id: 'forum-posts', label: '게시글 관리', icon: <FileText className=\"w-4 h-4\" />, path: '/forum/posts' },\n      { id: 'forum-comments', label: '댓글 관리', icon: <MessageSquare className=\"w-4 h-4\" />, path: '/forum/comments' },\n      { id: 'forum-reports', label: '신고 관리', icon: <Shield className=\"w-4 h-4\" />, path: '/forum/reports' },\n      { id: 'forum-settings', label: '설정', icon: <Settings className=\"w-4 h-4\" />, path: '/forum/settings' }\n    ]\n  },\n  // 구분선 2\n  {\n    id: 'separator-2',\n    label: '',\n    icon: <></>,\n    separator: true\n  },\n  // 10. 도구\n  {\n    id: 'tools',\n    label: '도구',\n    icon: <Wrench className=\"w-5 h-5\" />,\n    children: [\n      { id: 'tools-available', label: '사용 가능한 도구', icon: <Wrench className=\"w-4 h-4\" />, path: '/tools' },\n      { id: 'tools-import', label: '가져오기', icon: <FileText className=\"w-4 h-4\" />, path: '/tools/import' },\n      { id: 'tools-export', label: '내보내기', icon: <FileText className=\"w-4 h-4\" />, path: '/tools/export' },\n      { id: 'cpt-engine', label: 'CPT 엔진', icon: <Package className=\"w-4 h-4\" />, path: '/cpt-engine' }\n    ]\n  },\n  // 11. 설정\n  {\n    id: 'settings',\n    label: '설정',\n    icon: <Settings className=\"w-5 h-5\" />,\n    path: '/settings'\n  },\n  // 12. 시스템 모니터링\n  {\n    id: 'monitoring',\n    label: '시스템 모니터링',\n    icon: <Activity className=\"w-5 h-5\" />,\n    children: [\n      { id: 'monitoring-dashboard', label: '통합 모니터링', icon: <Activity className=\"w-4 h-4\" />, path: '/monitoring' },\n      { id: 'performance', label: '성능 대시보드', icon: <BarChart3 className=\"w-4 h-4\" />, path: '/monitoring/performance' },\n      { id: 'security-logs', label: '보안 로그', icon: <Shield className=\"w-4 h-4\" />, path: '/monitoring/security' }\n    ]\n  },\n  // 메뉴 접기\n  {\n    id: 'collapse',\n    label: '메뉴 접기',\n    icon: <ChevronLeft className=\"w-5 h-5\" />,\n    path: '#collapse'\n  }\n];","/**\n * CPT API Service\n * Handles all API calls related to Custom Post Types\n */\n\nimport { authClient } from '@o4o/auth-client';\nimport {\n  CustomPostType,\n  CustomPost,\n  CPTApiResponse,\n  CreateCPTDto,\n  UpdateCPTDto,\n  CreatePostDto,\n  UpdatePostDto,\n  CPTListOptions,\n  PostStatus\n} from '../types/cpt.types';\n\nconst API_BASE = '/cpt';\n\n/**\n * CPT Type Management\n */\nexport const cptApi = {\n  // Get all CPT types\n  async getAllTypes(active?: boolean): Promise<CPTApiResponse<CustomPostType[]>> {\n    // CPT 대시보드에서는 모든 CPT를 보여줘야 하므로\n    // active 파라미터를 전달하지 않으면 백엔드에서 모든 CPT 반환\n    const params = active === true ? '?active=true' : '';\n    // Fix: Remove /public prefix to match backend routing\n    const response = await authClient.api.get(`${API_BASE}/types${params}`);\n    return response.data;\n  },\n\n  // Get single CPT type by slug\n  async getTypeBySlug(slug: string): Promise<CPTApiResponse<CustomPostType>> {\n    const response = await authClient.api.get(`${API_BASE}/types/${slug}`);\n    return response.data;\n  },\n\n  // Create new CPT type\n  async createType(data: CreateCPTDto): Promise<CPTApiResponse<CustomPostType>> {\n    const response = await authClient.api.post(`${API_BASE}/types`, data);\n    return response.data;\n  },\n\n  // Update CPT type\n  async updateType(slug: string, data: UpdateCPTDto): Promise<CPTApiResponse<CustomPostType>> {\n    const response = await authClient.api.put(`${API_BASE}/types/${slug}`, data);\n    return response.data;\n  },\n\n  // Delete CPT type\n  async deleteType(slug: string): Promise<CPTApiResponse<void>> {\n    const response = await authClient.api.delete(`${API_BASE}/types/${slug}`);\n    return response.data;\n  },\n\n  // Initialize default CPT types\n  async initializeDefaults(): Promise<CPTApiResponse<CustomPostType[]>> {\n    const response = await authClient.api.post(`${API_BASE}/initialize`);\n    return response.data;\n  }\n};\n\n/**\n * Field Groups Management  \n */\nexport const fieldGroupApi = {\n  // Get all field groups\n  async getAll(postType?: string): Promise<CPTApiResponse<any[]>> {\n    const params = postType ? `?postType=${postType}` : '';\n    const response = await authClient.api.get(`${API_BASE}/field-groups${params}`);\n    return response.data;\n  },\n\n  // Get single field group\n  async getById(id: string): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.get(`${API_BASE}/field-groups/${id}`);\n    return response.data;\n  },\n\n  // Create field group\n  async create(data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.post(`${API_BASE}/field-groups`, data);\n    return response.data;\n  },\n\n  // Update field group\n  async update(id: string, data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.put(`${API_BASE}/field-groups/${id}`, data);\n    return response.data;\n  },\n\n  // Delete field group\n  async delete(id: string): Promise<CPTApiResponse<void>> {\n    const response = await authClient.api.delete(`${API_BASE}/field-groups/${id}`);\n    return response.data;\n  }\n};\n\n/**\n * Taxonomies Management\n */\nexport const taxonomyApi = {\n  // Get all taxonomies\n  async getAll(): Promise<CPTApiResponse<any[]>> {\n    const response = await authClient.api.get(`${API_BASE}/taxonomies`);\n    return response.data;\n  },\n\n  // Get single taxonomy\n  async getById(id: string): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.get(`${API_BASE}/taxonomies/${id}`);\n    return response.data;\n  },\n\n  // Create taxonomy\n  async create(data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.post(`${API_BASE}/taxonomies`, data);\n    return response.data;\n  },\n\n  // Update taxonomy\n  async update(id: string, data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.put(`${API_BASE}/taxonomies/${id}`, data);\n    return response.data;\n  },\n\n  // Delete taxonomy\n  async delete(id: string): Promise<CPTApiResponse<void>> {\n    const response = await authClient.api.delete(`${API_BASE}/taxonomies/${id}`);\n    return response.data;\n  },\n\n  // Get terms for taxonomy\n  async getTerms(taxonomyId: string): Promise<CPTApiResponse<any[]>> {\n    const response = await authClient.api.get(`${API_BASE}/taxonomies/${taxonomyId}/terms`);\n    return response.data;\n  },\n\n  // Create term\n  async createTerm(taxonomyId: string, data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.post(`${API_BASE}/taxonomies/${taxonomyId}/terms`, data);\n    return response.data;\n  },\n\n  // Update term\n  async updateTerm(taxonomyId: string, termId: string, data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.put(`${API_BASE}/taxonomies/${taxonomyId}/terms/${termId}`, data);\n    return response.data;\n  },\n\n  // Delete term\n  async deleteTerm(taxonomyId: string, termId: string): Promise<CPTApiResponse<void>> {\n    const response = await authClient.api.delete(`${API_BASE}/taxonomies/${taxonomyId}/terms/${termId}`);\n    return response.data;\n  }\n};\n\n/**\n * Forms Management\n */\nexport const formApi = {\n  // Get all forms\n  async getAll(): Promise<CPTApiResponse<any[]>> {\n    const response = await authClient.api.get(`${API_BASE}/forms`);\n    return response.data;\n  },\n\n  // Get single form\n  async getById(id: string): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.get(`${API_BASE}/forms/${id}`);\n    return response.data;\n  },\n\n  // Create form\n  async create(data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.post(`${API_BASE}/forms`, data);\n    return response.data;\n  },\n\n  // Update form\n  async update(id: string, data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.put(`${API_BASE}/forms/${id}`, data);\n    return response.data;\n  },\n\n  // Delete form\n  async delete(id: string): Promise<CPTApiResponse<void>> {\n    const response = await authClient.api.delete(`${API_BASE}/forms/${id}`);\n    return response.data;\n  },\n\n  // Submit form\n  async submit(id: string, data: any): Promise<CPTApiResponse<any>> {\n    const response = await authClient.api.post(`${API_BASE}/forms/${id}/submit`, data);\n    return response.data;\n  },\n\n  // Get form submissions\n  async getSubmissions(id: string): Promise<CPTApiResponse<any[]>> {\n    const response = await authClient.api.get(`${API_BASE}/forms/${id}/submissions`);\n    return response.data;\n  }\n};\n\n/**\n * CPT Post Management\n */\nexport const cptPostApi = {\n  // Get posts by CPT type\n  async getPostsByType(\n    slug: string,\n    options: CPTListOptions = {}\n  ): Promise<CPTApiResponse<CustomPost[]>> {\n    const params = new URLSearchParams();\n\n    if (options.page) params.append('page', options.page.toString());\n    if (options.limit) params.append('limit', options.limit.toString());\n    if (options.status) params.append('status', options.status);\n    if (options.search) params.append('search', options.search);\n    if (options.orderBy) params.append('orderBy', options.orderBy);\n    if (options.order) params.append('order', options.order);\n\n    const queryString = params.toString();\n    const url = `${API_BASE}/${slug}/posts${queryString ? `?${queryString}` : ''}`;\n\n    const response = await authClient.api.get(url);\n    return response.data;\n  },\n\n  // Get single post\n  async getPost(slug: string, postId: string): Promise<CPTApiResponse<CustomPost>> {\n    const response = await authClient.api.get(`${API_BASE}/${slug}/posts/${postId}`);\n    return response.data;\n  },\n\n  // Create new post\n  async createPost(slug: string, data: CreatePostDto): Promise<CPTApiResponse<CustomPost>> {\n    const response = await authClient.api.post(`${API_BASE}/${slug}/posts`, data);\n    return response.data;\n  },\n\n  // Update post\n  async updatePost(\n    slug: string,\n    postId: string,\n    data: UpdatePostDto\n  ): Promise<CPTApiResponse<CustomPost>> {\n    const response = await authClient.api.put(`${API_BASE}/${slug}/posts/${postId}`, data);\n    return response.data;\n  },\n\n  // Delete post\n  async deletePost(slug: string, postId: string): Promise<CPTApiResponse<void>> {\n    const response = await authClient.api.delete(`${API_BASE}/${slug}/posts/${postId}`);\n    return response.data;\n  },\n\n  // Bulk actions\n  async bulkAction(\n    slug: string,\n    action: 'trash' | 'restore' | 'delete' | 'publish' | 'draft',\n    postIds: string[]\n  ): Promise<CPTApiResponse<void>> {\n    const response = await authClient.api.post(`${API_BASE}/${slug}/posts/bulk`, {\n      action,\n      ids: postIds\n    });\n    return response.data;\n  }\n};\n\n// Export combined API\nexport default {\n  types: cptApi,\n  posts: cptPostApi\n};","/**\n * Dynamic CPT Menu Hook\n * Fetches active CPTs and generates menu items\n */\n\nimport { useQuery } from '@tanstack/react-query';\nimport { cptApi } from '@/features/cpt-acf/services/cpt.api';\nimport { MenuItem } from '@/config/wordpressMenuFinal';\nimport { FileText, Package, FileCode, Database, Layout } from 'lucide-react';\n\n/**\n * CPT를 메뉴 아이템으로 변환\n */\nexport const useDynamicCPTMenu = () => {\n  // 활성화된 CPT 목록 가져오기\n  const { data: cptTypesResponse, isLoading } = useQuery({\n    queryKey: ['cpt-menu-items'],\n    queryFn: async () => {\n      const response = await cptApi.getAllTypes(true); // Only active CPTs\n      return response.data;\n    },\n    staleTime: 5 * 60 * 1000, // 5분간 캐시\n    gcTime: 10 * 60 * 1000,\n    refetchOnMount: false,\n    refetchOnWindowFocus: false\n  });\n\n  const cptTypes = cptTypesResponse || [];\n\n  // CPT를 메뉴 아이템으로 변환\n  const generateCPTMenuItems = (): MenuItem[] => {\n    const menuItems: MenuItem[] = [];\n\n    // showInMenu가 true인 CPT만 필터링\n    const menuCPTs = (cptTypes || [])\n      .filter(cpt => cpt?.showInMenu && cpt?.isActive)\n      .sort((a, b) => (a.menuPosition || 50) - (b.menuPosition || 50));\n\n    if (menuCPTs.length > 0) {\n      // CPT 섹션 구분선 추가\n      menuItems.push({\n        id: 'separator-cpt',\n        label: '',\n        icon: <></>,\n        separator: true\n      });\n\n      // 각 CPT를 메뉴 아이템으로 추가\n      menuCPTs.forEach(cpt => {\n        const IconComponent = getIconForCPT(cpt.icon);\n        \n        menuItems.push({\n          id: `cpt-${cpt.slug}`,\n          label: cpt.label || cpt.singularLabel || cpt.slug,\n          icon: <IconComponent className=\"w-5 h-5\" />,\n          children: [\n            {\n              id: `cpt-${cpt.slug}-all`,\n              label: `모든 ${cpt.label}`,\n              icon: <FileText className=\"w-4 h-4\" />,\n              path: `/cpt-engine/content/${cpt.slug}`\n            },\n            {\n              id: `cpt-${cpt.slug}-new`,\n              label: `새 ${cpt.singularLabel} 추가`,\n              icon: <FileText className=\"w-4 h-4\" />,\n              path: `/cpt-engine/content/${cpt.slug}/new`\n            }\n          ]\n        });\n      });\n    }\n\n    return menuItems;\n  };\n\n  // 아이콘 매핑 함수\n  const getIconForCPT = (iconName?: string) => {\n    const iconMap: Record<string, any> = {\n      'file-text': FileText,\n      'package': Package,\n      'file-code': FileCode,\n      'database': Database,\n      'layout': Layout\n    };\n\n    return iconMap[iconName || 'file-text'] || FileText;\n  };\n\n  return {\n    cptMenuItems: generateCPTMenuItems(),\n    isLoading,\n    cptTypes\n  };\n};\n\n/**\n * 메뉴에 CPT 아이템을 삽입하는 유틸리티\n */\nexport const injectCPTMenuItems = (\n  baseMenuItems: MenuItem[],\n  cptMenuItems: MenuItem[]\n): MenuItem[] => {\n  if (cptMenuItems.length === 0) return baseMenuItems;\n\n  const result = [...baseMenuItems];\n  \n  // CPT Engine 메뉴 다음 위치에 CPT 메뉴들을 삽입\n  const cptEngineIndex = result.findIndex(item => item.id === 'cpt-engine');\n  \n  if (cptEngineIndex !== -1) {\n    // CPT Engine 바로 다음에 삽입\n    result.splice(cptEngineIndex + 1, 0, ...cptMenuItems);\n  } else {\n    // CPT Engine이 없으면 컨텐츠 관련 메뉴 다음에 삽입\n    const postsIndex = result.findIndex(item => item.id === 'posts');\n    if (postsIndex !== -1) {\n      result.splice(postsIndex + 1, 0, ...cptMenuItems);\n    } else {\n      // 적절한 위치를 찾지 못하면 마지막에 추가\n      const collapseIndex = result.findIndex(item => item.id === 'collapse');\n      if (collapseIndex !== -1) {\n        result.splice(collapseIndex, 0, ...cptMenuItems);\n      } else {\n        result.push(...cptMenuItems);\n      }\n    }\n  }\n\n  return result;\n};","import { User as BaseUser } from '@o4o/types';\n\nexport interface BusinessInfo {\n  businessName?: string;\n  businessType?: string;\n  businessPhone?: string;\n  businessAddress?: string;\n  businessRegistration?: string;\n  businessNumber?: string;\n  representativeName?: string;\n  contactPhone?: string;\n}\n\nexport interface User extends Omit<BaseUser, 'role' | 'status'> {\n  // Unified fields\n  fullName?: string;\n  firstName?: string;\n  lastName?: string;\n  lastLoginAt?: string | Date;\n  lastLogin?: Date;\n  last_login?: Date;\n  phone?: string;\n  businessInfo?: BusinessInfo;\n  createdAt: string | Date;\n  created_at?: Date;\n  updatedAt?: string | Date;\n  updated_at?: Date;\n  isEmailVerified?: boolean;\n  isActive?: boolean;\n  avatar?: string;\n  role: UserRole;\n  roles?: UserRole[];\n  status: UserStatus;\n}\n\nexport type UserRole = 'admin' | 'moderator' | 'user' | 'guest' | 'vendor' | 'customer' | 'affiliate' | 'partner' | 'business' | 'seller' | 'supplier' | 'manager' | 'retailer';\n\nexport type UserStatus = 'active' | 'inactive' | 'pending' | 'suspended' | 'deleted' | 'approved' | 'rejected';\n\nexport const ROLE_LABELS: Record<UserRole, string> = {\n  admin: '관리자',\n  moderator: '운영자',\n  user: '일반 사용자',\n  guest: '게스트',\n  business: '사업자', \n  affiliate: '제휴사',\n  partner: '파트너',\n  customer: '고객',\n  seller: '판매자',\n  supplier: '공급업체',\n  vendor: '벤더',\n  manager: '매니저',\n  retailer: '소매업체'\n};\n\nexport const roleDisplayNames: Record<UserRole, string> = ROLE_LABELS;\n\n// Additional exports for UserApi\nexport interface UserFilters {\n  role?: UserRole | 'all';\n  status?: UserStatus | 'all';\n  search?: string;\n  dateFrom?: string;\n  dateTo?: string;\n  businessType?: string;\n}\n\nexport interface UserBulkAction {\n  action: 'activate' | 'deactivate' | 'delete' | 'change_role' | 'approve' | 'reject';\n  userIds: string[];\n  newRole?: UserRole;\n  reason?: string;\n}\n\nexport interface UserFormData {\n  email: string;\n  name: string;\n  role: UserRole;\n  status: UserStatus;\n  password?: string;\n  phone?: string;\n  businessInfo?: {\n    businessName?: string;\n    businessType?: string;\n    businessPhone?: string;\n    businessAddress?: string;\n    businessRegistration?: string;\n    businessNumber?: string;\n    representativeName?: string;\n    contactPhone?: string;\n  };\n  sendWelcomeEmail?: boolean;\n}\n\nexport interface UserStats {\n  total: number;\n  active: number;\n  inactive: number;\n  pending: number;\n  approved: number;\n  rejected: number;\n  suspended: number;\n  byRole: Record<UserRole, number>;\n}\n\nexport interface UserActivityLog {\n  id: string;\n  userId: string;\n  action: string;\n  details: string;\n  timestamp: Date;\n  ipAddress?: string;\n}\n\nexport const STATUS_LABELS = {\n  pending: '승인 대기',\n  active: '활성',\n  inactive: '비활성',\n  approved: '승인됨',\n  rejected: '거부됨',\n  suspended: '정지됨'\n} as const;\n\nexport const BUSINESS_TYPES = {\n  retail: '소매업',\n  wholesale: '도매업',\n  manufacturing: '제조업',\n  service: '서비스업',\n  technology: '기술업',\n  consulting: '컨설팅',\n  other: '기타'\n} as const;\n\nexport const BUSINESS_TYPE_OPTIONS = Object.entries(BUSINESS_TYPES).map(([key, value]) => ({\n  value: key,\n  label: value\n}));\n","// import { roleDisplayNames } from \"@/types/user\"; // Unused - available from bottom export\n// Role-based menu permissions configuration\n// Defines which roles have access to which menu items and features\n\nexport type UserRole = 'admin' | 'business' | 'affiliate' | 'customer' | 'seller' | 'supplier' | 'partner' | 'manager' | 'retailer';\n\nexport interface MenuPermission {\n  menuId: string;\n  roles: UserRole[];\n  permissions?: string[];\n}\n\n// Complete menu permission mapping\nexport const menuPermissions: MenuPermission[] = [\n  // Home - All roles can access\n  {\n    menuId: 'home',\n    roles: ['admin', 'business', 'affiliate', 'customer', 'seller', 'supplier', 'manager', 'retailer'],\n  },\n  // Dashboard - All roles can access\n  {\n    menuId: 'dashboard',\n    roles: ['admin', 'business', 'affiliate', 'customer', 'seller', 'supplier', 'manager', 'retailer'],\n  },\n  {\n    menuId: 'dashboard-home',\n    roles: ['admin', 'business', 'affiliate', 'customer', 'seller', 'supplier', 'manager', 'retailer'],\n  },\n  {\n    menuId: 'dashboard-updates',\n    roles: ['admin', 'manager'],\n    permissions: ['updates:read']\n  },\n\n  // Content Management - Admin, Manager, Business\n  {\n    menuId: 'posts',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['content:read']\n  },\n  {\n    menuId: 'posts-all',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['content:read']\n  },\n  {\n    menuId: 'posts-new',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['content:write']\n  },\n  {\n    menuId: 'posts-categories',\n    roles: ['admin', 'manager'],\n    permissions: ['categories:read']\n  },\n  {\n    menuId: 'posts-tags',\n    roles: ['admin', 'manager'],\n    permissions: ['categories:read']\n  },\n\n  // Media - Admin, Manager, Business, Seller\n  {\n    menuId: 'media',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier'],\n    permissions: ['media:read']\n  },\n  {\n    menuId: 'media-library',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier'],\n    permissions: ['media:read']\n  },\n  {\n    menuId: 'media-new',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier'],\n    permissions: ['media:write']\n  },\n\n  // Pages - Admin, Manager\n  {\n    menuId: 'pages',\n    roles: ['admin', 'manager'],\n    permissions: ['pages:read']\n  },\n  {\n    menuId: 'pages-all',\n    roles: ['admin', 'manager'],\n    permissions: ['pages:read']\n  },\n  {\n    menuId: 'pages-new',\n    roles: ['admin', 'manager'],\n    permissions: ['pages:write']\n  },\n\n  // E-commerce - Admin, Manager, Business, Seller, Supplier\n  {\n    menuId: 'ecommerce',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier', 'retailer'],\n    permissions: ['ecommerce:read']\n  },\n  {\n    menuId: 'products',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier', 'retailer'],\n    permissions: ['products:read']\n  },\n  {\n    menuId: 'orders',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier', 'retailer'],\n    permissions: ['orders:read']\n  },\n  {\n    menuId: 'coupons',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['coupons:read']\n  },\n  {\n    menuId: 'reports',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier'],\n    permissions: ['analytics:read']\n  },\n  {\n    menuId: 'ecommerce-tools',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['products:read']\n  },\n  {\n    menuId: 'ecommerce-settings',\n    roles: ['admin', 'manager'],\n    permissions: ['settings:write']\n  },\n\n  // Vendor Management - Admin, Manager\n  {\n    menuId: 'vendors',\n    roles: ['admin', 'manager'],\n    permissions: ['vendors:read']\n  },\n  {\n    menuId: 'vendors-all',\n    roles: ['admin', 'manager'],\n    permissions: ['vendors:read']\n  },\n  {\n    menuId: 'vendors-pending',\n    roles: ['admin', 'manager'],\n    permissions: ['vendors:write']\n  },\n  {\n    menuId: 'vendors-commission',\n    roles: ['admin', 'manager'],\n    permissions: ['vendors:write']\n  },\n  {\n    menuId: 'vendors-reports',\n    roles: ['admin', 'manager'],\n    permissions: ['vendors:read']\n  },\n\n  // Affiliate Marketing - Admin, Manager, Affiliate\n  {\n    menuId: 'affiliate',\n    roles: ['admin', 'manager', 'affiliate'],\n    permissions: ['affiliate:read']\n  },\n  {\n    menuId: 'affiliates-manage',\n    roles: ['admin', 'manager'],\n    permissions: ['affiliate:write']\n  },\n  {\n    menuId: 'affiliate-links',\n    roles: ['admin', 'manager', 'affiliate'],\n    permissions: ['affiliate:read']\n  },\n  {\n    menuId: 'affiliate-commission',\n    roles: ['admin', 'manager', 'affiliate'],\n    permissions: ['affiliate:read']\n  },\n  {\n    menuId: 'affiliate-analytics',\n    roles: ['admin', 'manager', 'affiliate'],\n    permissions: ['affiliate:read']\n  },\n\n  // Forum - All roles except customer\n  {\n    menuId: 'forum',\n    roles: ['admin', 'manager', 'business', 'affiliate', 'seller', 'supplier', 'retailer'],\n    permissions: ['forum:read']\n  },\n  {\n    menuId: 'forum-boards',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['forum:read']\n  },\n  {\n    menuId: 'forum-categories',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['forum:read']\n  },\n  {\n    menuId: 'forum-posts',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['forum:read']\n  },\n  {\n    menuId: 'forum-comments',\n    roles: ['admin', 'manager'],\n    permissions: ['forum:read']\n  },\n  {\n    menuId: 'forum-reports',\n    roles: ['admin', 'manager'],\n    permissions: ['forum:read']\n  },\n  {\n    menuId: 'forum-settings',\n    roles: ['admin'],\n    permissions: ['forum:write']\n  },\n\n  // Digital Signage - Admin, Manager, Business\n  {\n    menuId: 'signage',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['signage:read']\n  },\n  {\n    menuId: 'signage-screens',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['signage:read']\n  },\n  {\n    menuId: 'signage-content',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['signage:read']\n  },\n  {\n    menuId: 'signage-playlists',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['signage:read']\n  },\n  {\n    menuId: 'signage-schedule',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['signage:write']\n  },\n  {\n    menuId: 'signage-devices',\n    roles: ['admin', 'manager'],\n    permissions: ['signage:write']\n  },\n  {\n    menuId: 'signage-analytics',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['signage:read']\n  },\n\n  // Crowdfunding - Admin, Manager, Business\n  {\n    menuId: 'crowdfunding',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['crowdfunding:read']\n  },\n  {\n    menuId: 'crowdfunding-projects',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['crowdfunding:read']\n  },\n  {\n    menuId: 'crowdfunding-backers',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['crowdfunding:read']\n  },\n  {\n    menuId: 'crowdfunding-rewards',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['crowdfunding:read']\n  },\n  {\n    menuId: 'crowdfunding-payments',\n    roles: ['admin', 'manager'],\n    permissions: ['crowdfunding:write']\n  },\n  {\n    menuId: 'crowdfunding-reports',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['crowdfunding:read']\n  },\n  {\n    menuId: 'crowdfunding-settings',\n    roles: ['admin'],\n    permissions: ['crowdfunding:write']\n  },\n\n  // Mail Management - Admin, Manager\n  {\n    menuId: 'mail',\n    roles: ['admin', 'manager'],\n    permissions: ['mail:read']\n  },\n  {\n    menuId: 'mail-templates',\n    roles: ['admin', 'manager'],\n    permissions: ['mail:write']\n  },\n  {\n    menuId: 'mail-smtp',\n    roles: ['admin'],\n    permissions: ['settings:write']\n  },\n  {\n    menuId: 'mail-logs',\n    roles: ['admin', 'manager'],\n    permissions: ['mail:read']\n  },\n\n  // Dropshipping - Admin, Manager, Business, Seller, Supplier, Partner\n  {\n    menuId: 'dropshipping',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier', 'partner'],\n    permissions: ['ecommerce:read']\n  },\n  {\n    menuId: 'ds-products',\n    roles: ['admin', 'manager', 'business', 'seller', 'supplier'],\n    permissions: ['products:read']\n  },\n  {\n    menuId: 'ds-sellers',\n    roles: ['admin', 'manager', 'seller'],\n    permissions: ['users:read']\n  },\n  {\n    menuId: 'ds-partners',\n    roles: ['admin', 'manager', 'partner'],\n    permissions: ['vendors:read']\n  },\n  {\n    menuId: 'ds-suppliers',\n    roles: ['admin', 'manager', 'supplier'],\n    permissions: ['vendors:read']\n  },\n  {\n    menuId: 'ds-approvals',\n    roles: ['admin', 'manager'],\n    permissions: ['vendors:write']\n  },\n  {\n    menuId: 'ds-commissions',\n    roles: ['admin', 'manager'],\n    permissions: ['vendors:write']\n  },\n  {\n    menuId: 'ds-setup',\n    roles: ['admin'],\n    permissions: ['settings:write']\n  },\n\n  // CPT Engine - Admin only\n  {\n    menuId: 'cpt-engine',\n    roles: ['admin'],\n    permissions: ['content:write']\n  },\n  \n  // CPT & ACF - Admin only\n  {\n    menuId: 'cpt-acf',\n    roles: ['admin'],\n    permissions: ['content:write']\n  },\n  {\n    menuId: 'cpt-types',\n    roles: ['admin'],\n    permissions: ['content:write']\n  },\n  {\n    menuId: 'acf-fields',\n    roles: ['admin'],\n    permissions: ['custom_fields:write']\n  },\n  {\n    menuId: 'acf-groups',\n    roles: ['admin'],\n    permissions: ['custom_fields:write']\n  },\n  {\n    menuId: 'forms',\n    roles: ['admin', 'manager'],\n    permissions: ['forms:write']\n  },\n\n  // Appearance/Theme - Admin, Manager\n  {\n    menuId: 'appearance',\n    roles: ['admin', 'manager'],\n    permissions: ['templates:read']\n  },\n  {\n    menuId: 'theme',\n    roles: ['admin', 'manager'],\n    permissions: ['templates:read']\n  },\n  {\n    menuId: 'themes',\n    roles: ['admin', 'manager'],\n    permissions: ['templates:read']\n  },\n  {\n    menuId: 'customize',\n    roles: ['admin', 'manager'],\n    permissions: ['templates:write']\n  },\n  {\n    menuId: 'appearance-menus',\n    roles: ['admin', 'manager'],\n    permissions: ['menus:write']\n  },\n  {\n    menuId: 'appearance-widgets',\n    roles: ['admin', 'manager'],\n    permissions: ['templates:write']\n  },\n  {\n    menuId: 'appearance-template-parts',\n    roles: ['admin', 'manager'],\n    permissions: ['templates:write']\n  },\n  {\n    menuId: 'menus',\n    roles: ['admin', 'manager'],\n    permissions: ['menus:write']\n  },\n  {\n    menuId: 'widgets',\n    roles: ['admin', 'manager'],\n    permissions: ['templates:write']\n  },\n  {\n    menuId: 'template-parts',\n    roles: ['admin', 'manager'],\n    permissions: ['templates:write']\n  },\n\n  // Users - Admin, Manager (limited)\n  {\n    menuId: 'users',\n    roles: ['admin', 'manager'],\n    permissions: ['users:read']\n  },\n  {\n    menuId: 'users-all',\n    roles: ['admin', 'manager'],\n    permissions: ['users:read']\n  },\n  {\n    menuId: 'users-new',\n    roles: ['admin'],\n    permissions: ['users:create']\n  },\n  {\n    menuId: 'users-profile',\n    roles: ['admin', 'manager', 'business', 'affiliate', 'seller', 'supplier', 'retailer'],\n    permissions: ['users:read']\n  },\n  {\n    menuId: 'users-roles',\n    roles: ['admin'],\n    permissions: ['users:update']\n  },\n\n  // Tools - Admin, Manager\n  {\n    menuId: 'tools',\n    roles: ['admin', 'manager'],\n    permissions: ['tools:read']\n  },\n\n  // System Monitoring - Admin, Manager\n  {\n    menuId: 'monitoring',\n    roles: ['admin', 'manager'],\n    permissions: ['monitoring:read']\n  },\n  {\n    menuId: 'monitoring-dashboard',\n    roles: ['admin', 'manager'],\n    permissions: ['monitoring:read']\n  },\n  {\n    menuId: 'performance',\n    roles: ['admin', 'manager'],\n    permissions: ['monitoring:read']\n  },\n  {\n    menuId: 'security-logs',\n    roles: ['admin'],\n    permissions: ['monitoring:read']\n  },\n\n  // Shortcode Management - Admin, Manager, Business\n  {\n    menuId: 'shortcodes',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['shortcodes:read']\n  },\n  {\n    menuId: 'shortcodes-all',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['shortcodes:read']\n  },\n  {\n    menuId: 'shortcodes-by-app',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['shortcodes:read']\n  },\n  {\n    menuId: 'shortcodes-by-category',\n    roles: ['admin', 'manager', 'business'],\n    permissions: ['shortcodes:read']\n  },\n  {\n    menuId: 'shortcodes-stats',\n    roles: ['admin', 'manager'],\n    permissions: ['shortcodes:read']\n  },\n  {\n    menuId: 'shortcodes-settings',\n    roles: ['admin'],\n    permissions: ['shortcodes:write']\n  },\n\n  // Settings - Admin only\n  {\n    menuId: 'settings',\n    roles: ['admin'],\n    permissions: ['settings:read']\n  },\n\n  // Collapse menu - All roles\n  {\n    menuId: 'collapse',\n    roles: ['admin', 'business', 'affiliate', 'customer', 'seller', 'supplier', 'manager', 'retailer'],\n  }\n];\n\n// Helper function to check if a role has access to a menu item\nexport function hasMenuAccess(menuId: string, userRole: UserRole, userPermissions?: string[]): boolean {\n  const menuPermission = menuPermissions.find((mp: any) => mp.menuId === menuId);\n  \n  if (!menuPermission) {\n    // CPT Engine 관련 메뉴 확인\n    return false; // Menu item not found\n  }\n\n  // Check if user has the required role\n  if (!menuPermission.roles.includes(userRole)) {\n    return false;\n  }\n\n  // If menu requires specific permissions, check if user has them\n  if (menuPermission.permissions && menuPermission.permissions.length > 0) {\n    if (!userPermissions || userPermissions.length === 0) {\n      return false;\n    }\n    \n    // User must have at least one of the required permissions\n    return menuPermission.permissions.some((permission: any) => \n      userPermissions.includes(permission)\n    );\n  }\n\n  return true;\n}\n\n// Helper function to filter menu items based on user role and permissions\nexport function filterMenuByRole(menuItems: any[], userRole: UserRole, userPermissions?: string[]): any[] {\n  return menuItems\n    .filter((item: any) => {\n      // Always include separators\n      if (item.separator) return true;\n      return hasMenuAccess(item.id, userRole, userPermissions);\n    })\n    .map((item: any) => {\n      if (item.children) {\n        const filteredChildren = filterMenuByRole(item.children, userRole, userPermissions);\n        \n        // Only include parent if it has accessible children\n        if (filteredChildren.length > 0) {\n          return { ...item, children: filteredChildren };\n        }\n        return null;\n      }\n      return item;\n    })\n    .filter(Boolean);\n}\n\n// Note: roleDisplayNames is imported from @/types/user\n\n// Role capabilities summary\nexport const roleCapabilities: Record<UserRole, string[]> = {\n  admin: [\n    '전체 시스템 관리',\n    '사용자 관리',\n    '설정 변경',\n    '모든 기능 접근'\n  ],\n  manager: [\n    '콘텐츠 관리',\n    '주문 관리',\n    '제휴사 관리',\n    '보고서 확인',\n    'Shortcode 관리'\n  ],\n  business: [\n    '상품 관리',\n    '주문 확인',\n    '콘텐츠 작성',\n    '디지털 사이니지',\n    'Shortcode 관리'\n  ],\n  seller: [\n    '상품 등록',\n    '주문 관리',\n    '매출 확인',\n    '미디어 업로드'\n  ],\n  supplier: [\n    '상품 공급',\n    '재고 관리',\n    '주문 처리',\n    '보고서 확인'\n  ],\n  affiliate: [\n    '제휴 링크 관리',\n    '수수료 확인',\n    '성과 분석',\n    '프로필 관리'\n  ],\n  retailer: [\n    '상품 판매',\n    '주문 관리',\n    '재고 확인',\n    '매출 분석'\n  ],\n  customer: [\n    '대시보드 확인',\n    '프로필 관리'\n  ]\n};\nexport { roleDisplayNames } from '@/types/user';\n","import { wordpressMenuItems } from '@/config/wordpressMenuFinal';\nimport { useDynamicCPTMenu, injectCPTMenuItems } from './useDynamicCPTMenu';\nimport { useAuth } from '@o4o/auth-context';\nimport { filterMenuByRole, UserRole } from '@/config/rolePermissions';\n\n/**\n * Simplified admin menu hook that shows all menus for admin users\n * and applies filtering only for non-admin users\n */\nexport const useAdminMenu = () => {\n  const { user } = useAuth();\n  const { cptMenuItems, isLoading: cptLoading } = useDynamicCPTMenu();\n  \n  // Inject CPT menus into static menu\n  const allMenuItems = injectCPTMenuItems([...wordpressMenuItems], cptMenuItems);\n  \n  // Get user role\n  const userRole = (user?.role || 'customer') as UserRole;\n  \n  // For admin users, show everything without filtering\n  if (userRole === 'admin') {\n    return {\n      menuItems: allMenuItems,\n      isLoading: cptLoading\n    };\n  }\n  \n  // For non-admin users, apply role-based filtering\n  const userPermissions = getUserPermissions(userRole);\n  const filteredMenuItems = filterMenuByRole(allMenuItems, userRole, userPermissions);\n  \n  return {\n    menuItems: filteredMenuItems,\n    isLoading: cptLoading\n  };\n};\n\n/**\n * Get permissions for non-admin roles\n */\nfunction getUserPermissions(role: UserRole): string[] {\n  const rolePermissionMap: Record<UserRole, string[]> = {\n    admin: [], // Admin doesn't need permission checks\n    manager: [\n      'updates:read', 'content:read', 'content:write', 'categories:read',\n      'media:read', 'media:write', 'pages:read', 'pages:write',\n      'ecommerce:read', 'products:read', 'orders:read',\n      'coupons:read', 'analytics:read', 'vendors:read', 'vendors:write',\n      'affiliate:read', 'affiliate:write', 'forum:read',\n      'signage:read', 'crowdfunding:read', 'mail:read', 'mail:write',\n      'templates:read', 'templates:write', 'menus:write',\n      'users:read', 'tools:read', 'shortcodes:read', 'monitoring:read'\n    ],\n    business: [\n      'content:read', 'content:write', 'media:read', 'media:write',\n      'ecommerce:read', 'products:read', 'orders:read',\n      'coupons:read', 'analytics:read', 'forum:read',\n      'signage:read', 'crowdfunding:read', 'shortcodes:read'\n    ],\n    seller: [\n      'media:read', 'media:write', 'ecommerce:read',\n      'products:read', 'orders:read', 'analytics:read', 'forum:read'\n    ],\n    supplier: [\n      'media:read', 'media:write', 'ecommerce:read',\n      'products:read', 'orders:read', 'analytics:read', 'forum:read'\n    ],\n    retailer: [\n      'ecommerce:read', 'products:read', 'orders:read', \n      'analytics:read', 'forum:read', 'users:read'\n    ],\n    affiliate: [\n      'affiliate:read', 'forum:read', 'users:read'\n    ],\n    customer: [\n      'users:read'\n    ]\n  };\n  \n  return rolePermissionMap[role] || [];\n}","import { type FC } from 'react';\nimport { useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom'\nimport { \n  X,\n  ChevronDown,\n  ChevronLeft\n} from 'lucide-react'\nimport { clsx } from 'clsx'\nimport { MenuItem } from '@/config/wordpressMenuFinal'\nimport { useAdminMenu } from '@/hooks/useAdminMenu'\n\ninterface AdminSidebarProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nconst AdminSidebar: FC<AdminSidebarProps> = ({ isOpen, onClose }) => {\n  const location = useLocation()\n  const [expandedItems, setExpandedItems] = useState<any[]>([])\n  const [isCollapsed, setIsCollapsed] = useState(false)\n  \n  // Get menu items with role-based filtering automatically handled\n  const { menuItems, isLoading: menuLoading } = useAdminMenu()\n\n  const toggleExpanded = (itemId: string) => {\n    setExpandedItems((prev: any) => \n      prev.includes(itemId) \n        ? prev.filter((id: any) => id !== itemId)\n        : [...prev, itemId]\n    )\n  }\n\n  const isActive = (path: string) => location.pathname === path\n\n  const isParentActive = (children: MenuItem[] | undefined) => \n    children?.some((child: any) => child.path && isActive(child.path)) || false\n\n  const handleMenuItemClick = (item: MenuItem) => {\n    if (item.id === 'collapse') {\n      setIsCollapsed(!isCollapsed)\n      return\n    }\n  }\n\n  const renderMenuItem = (item: MenuItem) => {\n    if (item.separator) {\n      return <div key={item.id} className=\"my-2 border-t border-[#444]\" />\n    }\n\n    const hasChildren = item.children && item.children.length > 0\n    const isExpanded = expandedItems.includes(item.id)\n    const parentActive = hasChildren && isParentActive(item.children)\n\n    if (item.id === 'collapse') {\n      return (\n        <button\n          key={item.id}\n          onClick={() => handleMenuItemClick(item)}\n          className=\"admin-sidebar-item w-full relative mt-auto\"\n        >\n          <div className=\"flex items-center gap-3\">\n            {isCollapsed ? <ChevronLeft className=\"w-5 h-5\" /> : item.icon}\n            {!isCollapsed && <span>{item.label}</span>}\n          </div>\n        </button>\n      )\n    }\n\n    if (hasChildren) {\n      return (\n        <div key={item.id}>\n          <button\n            onClick={() => toggleExpanded(item.id)}\n            className={clsx(\n              'admin-sidebar-item w-full relative',\n              parentActive && 'active'\n            )}\n          >\n            <div className=\"flex items-center gap-3\">\n              {item.icon}\n              {!isCollapsed && <span>{item.label}</span>}\n            </div>\n            <ChevronDown \n              className={clsx(\n                'w-4 h-4 transition-transform duration-200',\n                isExpanded && 'rotate-180'\n              )}\n            />\n          </button>\n          \n          {isExpanded && item.children && !isCollapsed && (\n            <div className=\"ml-6 mt-1 space-y-1\">\n              {item.children.map((child: any) => (\n                <Link\n                  key={child.id}\n                  to={child.path!}\n                  className={clsx(\n                    'admin-sidebar-item relative',\n                    isActive(child.path!) && 'active'\n                  )}\n                  onClick={onClose}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    {child.icon}\n                    <span>{child.label}</span>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          )}\n        </div>\n      )\n    }\n\n    return (\n      <Link\n        key={item.id}\n        to={item.path!}\n        className={clsx(\n          'admin-sidebar-item relative',\n          isActive(item.path!) && 'active'\n        )}\n        onClick={onClose}\n      >\n        <div className=\"flex items-center gap-3\">\n          {item.icon}\n          {!isCollapsed && <span>{item.label}</span>}\n        </div>\n      </Link>\n    )\n  }\n\n  return (\n    <aside \n      className={clsx(\n        isCollapsed ? 'w-[36px] collapsed' : 'w-[160px]'\n      )}\n    >\n      <div className=\"flex h-full flex-col\">\n        {/* Logo */}\n        <div className=\"flex h-8 items-center justify-between px-2 bg-[#1d2327]\">\n          {!isCollapsed && (\n            <Link to=\"/\" className=\"flex items-center gap-1 text-[13px] hover:text-modern-primary transition-colors\">\n              <div className=\"w-5 h-5 bg-modern-primary rounded-sm flex items-center justify-center\">\n                <span className=\"text-white text-xs font-bold\">O</span>\n              </div>\n              <span>O4O Admin</span>\n            </Link>\n          )}\n          <button\n            onClick={onClose}\n            className=\"lg:hidden text-sidebar-text hover:text-white ml-auto\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {/* Navigation */}\n        <nav className=\"flex-1 py-2 custom-scrollbar overflow-y-auto\">\n          {menuLoading ? (\n            <div className=\"flex justify-center items-center h-20\">\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-white\"></div>\n            </div>\n          ) : menuItems.length === 0 ? (\n            <div className=\"text-center p-4 text-sidebar-text text-xs\">\n              메뉴를 불러오는 중...\n            </div>\n          ) : (\n            menuItems.map(renderMenuItem)\n          )}\n        </nav>\n\n        {/* Footer */}\n        {!isCollapsed && (\n          <div className=\"p-2 border-t border-sidebar-border\">\n            <div className=\"text-xs text-sidebar-text text-center\">\n              O4O v1.0.0\n            </div>\n          </div>\n        )}\n      </div>\n    </aside>\n  )\n}\n\nexport default AdminSidebar","import { forwardRef, HTMLAttributes, ButtonHTMLAttributes, createContext, useContext, useState, useEffect, useRef, ReactNode } from 'react';\nimport { Check, ChevronRight, Circle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface DropdownMenuContextValue {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst DropdownMenuContext = createContext<DropdownMenuContextValue | null>(null);\n\ninterface DropdownMenuRadioGroupContextValue {\n  value: string;\n  onValueChange: (value: string) => void;\n}\n\nconst DropdownMenuRadioGroupContext = createContext<DropdownMenuRadioGroupContextValue | null>(null);\n\nexport interface DropdownMenuProps {\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  children: ReactNode;\n}\n\nconst DropdownMenu = ({ open: controlledOpen, defaultOpen = false, onOpenChange, children }: DropdownMenuProps) => {\n  const [uncontrolledOpen, setUncontrolledOpen] = useState(defaultOpen);\n  const open = controlledOpen ?? uncontrolledOpen;\n  \n  const handleOpenChange = (newOpen: boolean) => {\n    if (controlledOpen === undefined) {\n      setUncontrolledOpen(newOpen);\n    }\n    onOpenChange?.(newOpen);\n  };\n\n  return (\n    <DropdownMenuContext.Provider value={{ open, onOpenChange: handleOpenChange }}>\n      <div className=\"relative inline-block text-left\">\n        {children}\n      </div>\n    </DropdownMenuContext.Provider>\n  );\n};\n\nconst DropdownMenuTrigger = forwardRef<HTMLButtonElement, ButtonHTMLAttributes<HTMLButtonElement> & { asChild?: boolean }>(\n  ({ onClick, asChild, ...props }, ref) => {\n    const context = useContext(DropdownMenuContext);\n    if (!context) throw new Error('DropdownMenuTrigger must be used within DropdownMenu');\n    \n    return (\n      <button\n        ref={ref}\n        onClick={(e: any) => {\n          onClick?.(e);\n          context.onOpenChange(!context.open);\n        }}\n        aria-expanded={context.open}\n        aria-haspopup=\"true\"\n        {...props}\n      />\n    );\n  }\n);\n\nconst DropdownMenuGroup = ({ children, ...props }: HTMLAttributes<HTMLDivElement>) => (\n  <div role=\"group\" {...props}>\n    {children}\n  </div>\n);\n\nconst DropdownMenuPortal = ({ children }: { children: ReactNode }) => children;\n\ninterface DropdownMenuSubProps {\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  children: ReactNode;\n}\n\nconst DropdownMenuSub = ({ open: controlledOpen, defaultOpen = false, onOpenChange, children }: DropdownMenuSubProps) => {\n  const [uncontrolledOpen, setUncontrolledOpen] = useState(defaultOpen);\n  const open = controlledOpen ?? uncontrolledOpen;\n  \n  const handleOpenChange = (newOpen: boolean) => {\n    if (controlledOpen === undefined) {\n      setUncontrolledOpen(newOpen);\n    }\n    onOpenChange?.(newOpen);\n  };\n\n  return (\n    <DropdownMenuContext.Provider value={{ open, onOpenChange: handleOpenChange }}>\n      <div className=\"relative\">\n        {children}\n      </div>\n    </DropdownMenuContext.Provider>\n  );\n};\n\ninterface DropdownMenuRadioGroupProps extends HTMLAttributes<HTMLDivElement> {\n  value?: string;\n  onValueChange?: (value: string) => void;\n}\n\nconst DropdownMenuRadioGroup = ({ value = '', onValueChange = () => {}, children, ...props }: DropdownMenuRadioGroupProps) => (\n  <DropdownMenuRadioGroupContext.Provider value={{ value, onValueChange }}>\n    <div role=\"radiogroup\" {...props}>\n      {children}\n    </div>\n  </DropdownMenuRadioGroupContext.Provider>\n);\n\ninterface DropdownMenuContentProps extends HTMLAttributes<HTMLDivElement> {\n  sideOffset?: number;\n  align?: 'start' | 'center' | 'end' | string;\n}\n\nconst DropdownMenuContent = forwardRef<HTMLDivElement, DropdownMenuContentProps>(\n  ({ className, sideOffset = 4, children, ...props }) => {\n    const context = useContext(DropdownMenuContext);\n    if (!context) throw new Error('DropdownMenuContent must be used within DropdownMenu');\n    \n    const contentRef = useRef<HTMLDivElement>(null);\n    \n    useEffect(() => {\n      const handleClickOutside = (e: MouseEvent) => {\n        if (contentRef.current && !contentRef.current.contains(e.target as Node)) {\n          context.onOpenChange(false);\n        }\n      };\n      \n      if (context.open) {\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => document.removeEventListener('mousedown', handleClickOutside);\n      }\n    }, [context]);\n    \n    if (!context.open) return null;\n    \n    return (\n      <div\n        ref={contentRef}\n        className={cn(\n          \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md\",\n          \"animate-in fade-in-0 zoom-in-95\",\n          className\n        )}\n        style={{ marginTop: `${sideOffset}px` }}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\ninterface DropdownMenuItemProps extends HTMLAttributes<HTMLDivElement> {\n  inset?: boolean;\n  disabled?: boolean;\n}\n\nconst DropdownMenuItem = forwardRef<HTMLDivElement, DropdownMenuItemProps>(\n  ({ className, inset, disabled, onClick, ...props }, ref) => {\n    const context = useContext(DropdownMenuContext);\n    \n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors\",\n          \"hover:bg-accent hover:text-accent-foreground\",\n          \"focus:bg-accent focus:text-accent-foreground\",\n          disabled && \"pointer-events-none opacity-50\",\n          inset && \"pl-8\",\n          className\n        )}\n        onClick={(e: any) => {\n          if (!disabled) {\n            onClick?.(e);\n            context?.onOpenChange(false);\n          }\n        }}\n        role=\"menuitem\"\n        aria-disabled={disabled}\n        {...props}\n      />\n    );\n  }\n);\n\ninterface DropdownMenuCheckboxItemProps extends HTMLAttributes<HTMLDivElement> {\n  checked?: boolean;\n  onCheckedChange?: (checked: boolean) => void;\n  disabled?: boolean;\n}\n\nconst DropdownMenuCheckboxItem = forwardRef<HTMLDivElement, DropdownMenuCheckboxItemProps>(\n  ({ className, children, checked, onCheckedChange, disabled, onClick, ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors\",\n          \"hover:bg-accent hover:text-accent-foreground\",\n          \"focus:bg-accent focus:text-accent-foreground\",\n          disabled && \"pointer-events-none opacity-50\",\n          className\n        )}\n        onClick={(e: any) => {\n          if (!disabled) {\n            onClick?.(e);\n            onCheckedChange?.(!checked);\n          }\n        }}\n        role=\"menuitemcheckbox\"\n        aria-checked={checked}\n        aria-disabled={disabled}\n        {...props}\n      >\n        <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n          {checked && <Check className=\"h-4 w-4\" />}\n        </span>\n        {children}\n      </div>\n    );\n  }\n);\n\ninterface DropdownMenuRadioItemProps extends HTMLAttributes<HTMLDivElement> {\n  value: string;\n  disabled?: boolean;\n}\n\nconst DropdownMenuRadioItem = forwardRef<HTMLDivElement, DropdownMenuRadioItemProps>(\n  ({ className, children, value, disabled, onClick, ...props }, ref) => {\n    const context = useContext(DropdownMenuRadioGroupContext);\n    const isChecked = context?.value === value;\n    \n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors\",\n          \"hover:bg-accent hover:text-accent-foreground\",\n          \"focus:bg-accent focus:text-accent-foreground\",\n          disabled && \"pointer-events-none opacity-50\",\n          className\n        )}\n        onClick={(e: any) => {\n          if (!disabled) {\n            onClick?.(e);\n            context?.onValueChange(value);\n          }\n        }}\n        role=\"menuitemradio\"\n        aria-checked={isChecked}\n        aria-disabled={disabled}\n        {...props}\n      >\n        <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n          {isChecked && <Circle className=\"h-2 w-2 fill-current\" />}\n        </span>\n        {children}\n      </div>\n    );\n  }\n);\n\ninterface DropdownMenuLabelProps extends HTMLAttributes<HTMLDivElement> {\n  inset?: boolean;\n}\n\nconst DropdownMenuLabel = forwardRef<HTMLDivElement, DropdownMenuLabelProps>(\n  ({ className, inset, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\n        \"px-2 py-1.5 text-sm font-semibold\",\n        inset && \"pl-8\",\n        className\n      )}\n      {...props}\n    />\n  )\n);\n\nconst DropdownMenuSeparator = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n      role=\"separator\"\n      {...props}\n    />\n  )\n);\n\nconst DropdownMenuShortcut = ({ className, ...props }: HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  );\n};\n\ninterface DropdownMenuSubTriggerProps extends HTMLAttributes<HTMLDivElement> {\n  inset?: boolean;\n  disabled?: boolean;\n}\n\nconst DropdownMenuSubTrigger = forwardRef<HTMLDivElement, DropdownMenuSubTriggerProps>(\n  ({ className, inset, children, disabled, ...props }, ref) => {\n    const context = useContext(DropdownMenuContext);\n    if (!context) throw new Error('DropdownMenuSubTrigger must be used within DropdownMenuSub');\n    \n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none\",\n          \"hover:bg-accent\",\n          \"data-[state=open]:bg-accent\",\n          disabled && \"pointer-events-none opacity-50\",\n          inset && \"pl-8\",\n          className\n        )}\n        onClick={() => !disabled && context.onOpenChange(!context.open)}\n        data-state={context.open ? 'open' : 'closed'}\n        {...props}\n      >\n        {children}\n        <ChevronRight className=\"ml-auto h-4 w-4\" />\n      </div>\n    );\n  }\n);\n\nconst DropdownMenuSubContent = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(\n  ({ className, children, ...props }, ref) => {\n    const context = useContext(DropdownMenuContext);\n    if (!context) throw new Error('DropdownMenuSubContent must be used within DropdownMenuSub');\n    \n    if (!context.open) return null;\n    \n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg\",\n          \"absolute left-full top-0 ml-1\",\n          \"animate-in fade-in-0 zoom-in-95\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\nDropdownMenuTrigger.displayName = 'DropdownMenuTrigger';\nDropdownMenuContent.displayName = 'DropdownMenuContent';\nDropdownMenuItem.displayName = 'DropdownMenuItem';\nDropdownMenuCheckboxItem.displayName = 'DropdownMenuCheckboxItem';\nDropdownMenuRadioItem.displayName = 'DropdownMenuRadioItem';\nDropdownMenuLabel.displayName = 'DropdownMenuLabel';\nDropdownMenuSeparator.displayName = 'DropdownMenuSeparator';\nDropdownMenuShortcut.displayName = 'DropdownMenuShortcut';\nDropdownMenuGroup.displayName = 'DropdownMenuGroup';\nDropdownMenuPortal.displayName = 'DropdownMenuPortal';\nDropdownMenuSub.displayName = 'DropdownMenuSub';\nDropdownMenuSubContent.displayName = 'DropdownMenuSubContent';\nDropdownMenuSubTrigger.displayName = 'DropdownMenuSubTrigger';\nDropdownMenuRadioGroup.displayName = 'DropdownMenuRadioGroup';\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n};\n","\nimport { useState, useEffect, FC } from 'react';\nimport { Menu, Bell, User, LogOut, Settings as SettingsIcon, Shield, Clock } from 'lucide-react';\nimport { useAuth } from '@o4o/auth-context';\nimport toast from 'react-hot-toast';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\n\ninterface AdminHeaderProps {\n  onMenuClick?: () => void;\n}\n\nconst AdminHeader: FC<AdminHeaderProps> = ({ onMenuClick }) => {\n  const { user, logout, getSessionStatus } = useAuth();\n  const [sessionStatus, setSessionStatus] = useState(getSessionStatus());\n\n  // 세션 상태 업데이트\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setSessionStatus(getSessionStatus());\n    }, 60000); // 1분마다 업데이트\n\n    return () => clearInterval(interval);\n  }, [getSessionStatus]);\n\n  const handleLogout = async () => {\n    try {\n      logout();\n      toast.success('로그아웃되었습니다.');\n    } catch (error: any) {\n    // Error logging - use proper error handler\n      toast.error('로그아웃 처리 중 오류가 발생했습니다.');\n    }\n  };\n\n  const getSessionStatusColor = () => {\n    if (!sessionStatus) return 'text-wp-text-secondary';\n    \n    const remainingMinutes = Math.floor(sessionStatus.remainingTime / 60000);\n    if (remainingMinutes > 10) {\n      return 'text-green-600';\n    } else if (remainingMinutes > 5) {\n      return 'text-yellow-600';\n    } else {\n      return 'text-red-600';\n    }\n  };\n\n  const getSessionStatusText = () => {\n    if (!sessionStatus) return 'Unknown';\n    \n    const remainingMinutes = Math.floor(sessionStatus.remainingTime / 60000);\n    if (remainingMinutes > 10) {\n      return 'Active';\n    } else if (remainingMinutes > 5) {\n      return 'Expiring Soon';\n    } else {\n      return 'Expired';\n    }\n  };\n\n\n  return (\n    <header className=\"bg-white border-b border-gray-300\">\n      <div className=\"px-6 py-4\">\n        <div className=\"flex items-center justify-between\">\n          {/* Left side */}\n          <div className=\"flex items-center gap-4\">\n            {onMenuClick && (\n              <button\n                onClick={onMenuClick}\n                className=\"admin-header-mobile-menu\"\n                aria-label=\"Toggle menu\"\n              >\n                <Menu className=\"w-6 h-6\" />\n              </button>\n            )}\n            \n            <div>\n              <h1 className=\"text-xl font-semibold text-wp-text-primary\">\n                관리자 대시보드\n              </h1>\n              <p className=\"text-sm text-wp-text-secondary\">\n                O4O 플랫폼 통합 관리 시스템\n              </p>\n            </div>\n          </div>\n\n        {/* Right side */}\n        <div className=\"flex items-center gap-4\">\n          {/* Session Status Indicator */}\n          <div className={`flex items-center gap-1 text-xs ${getSessionStatusColor()}`}>\n            <Clock className=\"w-3 h-3\" />\n            <span>세션: {getSessionStatusText()}</span>\n          </div>\n\n          {/* Notifications */}\n          <button className=\"p-2 rounded-md text-wp-text-secondary hover:text-wp-text-primary hover:bg-wp-bg-tertiary relative\">\n            <Bell className=\"w-6 h-6\" />\n            <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\n              3\n            </span>\n          </button>\n\n          {/* User menu */}\n          <DropdownMenu>\n            <DropdownMenuTrigger>\n              <button className=\"flex items-center gap-3 p-2 rounded-md text-wp-text-primary hover:bg-wp-bg-tertiary\">\n                <div className=\"w-8 h-8 bg-admin-blue text-white rounded-full flex items-center justify-center\">\n                  <User className=\"w-4 h-4\" />\n                </div>\n                <div className=\"text-left hidden md:block\">\n                  <div className=\"text-sm font-medium flex items-center gap-1\">\n                    {user?.name || 'Admin'}\n                    <Shield className=\"w-3 h-3 text-blue-600\" />\n                  </div>\n                  <div className=\"text-xs text-wp-text-secondary\">{user?.email}</div>\n                </div>\n              </button>\n            </DropdownMenuTrigger>\n            \n            <DropdownMenuContent className=\"w-64\" align=\"end\">\n              {/* User Info Header */}\n              <DropdownMenuLabel className=\"font-normal\">\n                <div className=\"flex flex-col space-y-1\">\n                  <div className=\"font-medium text-wp-text-primary flex items-center gap-2\">\n                    <Shield className=\"w-4 h-4 text-blue-600\" />\n                    {user?.name || 'Admin'}\n                  </div>\n                  <div className=\"text-sm text-wp-text-secondary\">{user?.email}</div>\n                  <div className=\"text-xs text-wp-text-tertiary\">\n                    역할: {user?.role} | SSO 인증\n                  </div>\n                </div>\n              </DropdownMenuLabel>\n\n              <DropdownMenuSeparator />\n\n              {/* Security Status */}\n              <div className=\"px-2 py-2\">\n                <div className=\"text-xs text-wp-text-secondary space-y-1\">\n                  <div className=\"flex justify-between\">\n                    <span>세션 상태:</span>\n                    <span className={getSessionStatusColor()}>\n                      {getSessionStatusText()}\n                    </span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>권한:</span>\n                    <span className=\"text-green-600\">활성</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>계정:</span>\n                    <span className={user?.isApproved ? 'text-green-600' : 'text-yellow-600'}>\n                      {user?.isApproved ? '승인됨' : '승인대기'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n\n              <DropdownMenuSeparator />\n\n              {/* Menu Items */}\n              <DropdownMenuItem onClick={() => {\n                // 프로필 페이지로 이동\n              }}>\n                <User className=\"mr-2 h-4 w-4\" />\n                프로필 설정\n              </DropdownMenuItem>\n              \n              <DropdownMenuItem onClick={() => {\n                // 계정 설정 페이지로 이동\n              }}>\n                <SettingsIcon className=\"mr-2 h-4 w-4\" />\n                계정 설정\n              </DropdownMenuItem>\n\n              <DropdownMenuSeparator />\n              \n              {/* Security Section */}\n              <DropdownMenuLabel className=\"font-normal\">\n                <div className=\"text-xs text-wp-text-secondary\">보안</div>\n              </DropdownMenuLabel>\n              \n              <DropdownMenuItem \n                onClick={() => {\n                  toast.success('모든 기기에서 로그아웃됩니다.');\n                  logout();\n                }}\n                className=\"text-orange-600 focus:text-orange-600 focus:bg-orange-50\"\n              >\n                <Shield className=\"mr-2 h-3 w-3\" />\n                모든 기기에서 로그아웃\n              </DropdownMenuItem>\n\n              <DropdownMenuSeparator />\n              \n              <DropdownMenuItem \n                onClick={handleLogout}\n                className=\"text-red-600 focus:text-red-600 focus:bg-red-50\"\n              >\n                <LogOut className=\"mr-2 h-4 w-4\" />\n                로그아웃\n              </DropdownMenuItem>\n\n              {/* Footer */}\n              <DropdownMenuSeparator />\n              <div className=\"px-2 py-2\">\n                <div className=\"text-xs text-wp-text-tertiary text-center\">\n                  🔒 보안 세션 | 8시간 후 자동 만료\n                </div>\n              </div>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n      </div>\n    </header>\n  );\n};\n\nexport default AdminHeader;","import { FC } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Eye, Plus, MessageSquare, RefreshCw } from 'lucide-react';\nimport { useAuth } from '@o4o/auth-context';\n// ThemeToggle removed - not needed in admin bar\n\ninterface AdminBarProps {\n  onLogout: () => void;\n}\n\nconst AdminBar: FC<AdminBarProps> = ({ onLogout }) => {\n  const { user } = useAuth();\n\n  return (\n    <div className=\"wordpress-admin-bar fixed top-0 left-0 right-0 h-[46px] text-[13px] z-[99999] bg-[#23282d] text-[#ccc]\">\n      <div className=\"h-full flex items-center justify-between px-4\">\n        {/* Left side */}\n        <div className=\"flex items-center gap-4 flex-1\">\n          {/* WordPress Logo */}\n          <Link to=\"/\" className=\"flex items-center gap-1 hover:text-[#00b9eb]\">\n            <div className=\"w-5 h-5 bg-[#464b52] rounded-full flex items-center justify-center\">\n              <span className=\"text-white text-xs font-bold\">W</span>\n            </div>\n            <span>O4O Platform</span>\n          </Link>\n          \n          {/* Quick Links */}\n          <span className=\"text-[#656a70]\">|</span>\n          \n          <a href=\"https://neture.co.kr\" target=\"_blank\" rel=\"noopener noreferrer\" \n             className=\"flex items-center gap-1 hover:text-[#00b9eb]\">\n            <Eye className=\"w-3 h-3\" />\n            <span>사이트 방문</span>\n          </a>\n          \n          <span className=\"text-[#656a70]\">|</span>\n          \n          <div className=\"relative group\">\n            <button className=\"flex items-center gap-1 hover:text-[#00b9eb]\">\n              <Plus className=\"w-3 h-3\" />\n              <span>새로 만들기</span>\n            </button>\n            \n            {/* Dropdown menu */}\n            <div className=\"absolute top-full left-0 mt-1 w-48 bg-[#32373c] border border-[#444] opacity-0 invisible \n                          group-hover:opacity-100 group-hover:visible transition-opacity shadow-lg z-[100000]\">\n              <Link to=\"/posts/new\" className=\"block px-4 py-2 hover:bg-[#00b9eb] hover:text-white\">\n                글\n              </Link>\n              <Link to=\"/media/new\" className=\"block px-4 py-2 hover:bg-[#00b9eb] hover:text-white\">\n                미디어\n              </Link>\n              <Link to=\"/pages/new\" className=\"block px-4 py-2 hover:bg-[#00b9eb] hover:text-white\">\n                페이지\n              </Link>\n              <Link to=\"/ecommerce/products/new\" className=\"block px-4 py-2 hover:bg-[#00b9eb] hover:text-white\">\n                제품\n              </Link>\n              <Link to=\"/users/new\" className=\"block px-4 py-2 hover:bg-[#00b9eb] hover:text-white\">\n                사용자\n              </Link>\n            </div>\n          </div>\n          \n          <span className=\"text-[#656a70]\">|</span>\n          \n          <button className=\"flex items-center gap-1 hover:text-[#00b9eb]\">\n            <RefreshCw className=\"w-3 h-3\" />\n            <span>업데이트</span>\n            <span className=\"ml-1 inline-flex items-center justify-center w-5 h-5 text-xs bg-[#ca4a1f] text-white rounded-full\">\n              2\n            </span>\n          </button>\n          \n          <span className=\"text-[#656a70]\">|</span>\n          \n          <button className=\"flex items-center gap-1 hover:text-[#00b9eb]\">\n            <MessageSquare className=\"w-3 h-3\" />\n            <span>댓글</span>\n            <span className=\"ml-1 inline-flex items-center justify-center w-5 h-5 text-xs bg-[#d54e21] text-white rounded-full\">\n              1\n            </span>\n          </button>\n        </div>\n\n        {/* Right side */}\n        <div className=\"flex items-center gap-3 relative\">\n          <div className=\"relative group\">\n            <button className=\"flex items-center gap-1 hover:text-[#00b9eb] cursor-pointer\">\n              <span className=\"text-[#ccc]\">안녕하세요, {user?.name || 'Admin'}님</span>\n              <span className=\"text-xs\">▼</span>\n            </button>\n            \n            {/* User dropdown menu */}\n            <div className=\"absolute top-full right-0 mt-1 w-48 bg-[#32373c] border border-[#444] opacity-0 invisible \n                          group-hover:opacity-100 group-hover:visible transition-opacity shadow-lg z-[100000]\">\n              <Link to=\"/users/profile\" className=\"block px-4 py-2 hover:bg-[#00b9eb] hover:text-white\">\n                프로필 편집\n              </Link>\n              <div className=\"border-t border-[#444]\"></div>\n              <button onClick={onLogout} className=\"block w-full text-left px-4 py-2 hover:bg-[#00b9eb] hover:text-white\">\n                로그아웃\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminBar;","import { FC, ReactNode, useState } from 'react';\nimport { X } from 'lucide-react';\nimport { clsx } from 'clsx';\n\nexport type NoticeType = 'success' | 'error' | 'warning' | 'info';\n\nexport interface AdminNoticeProps {\n  id?: string;\n  type: NoticeType;\n  message: string;\n  dismissible?: boolean;\n  persistent?: boolean;\n  onDismiss?: (id?: string) => void;\n  children?: ReactNode;\n}\n\n/**\n * WordPress-style Admin Notice Component\n */\nexport const AdminNotice: FC<AdminNoticeProps> = ({\n  id,\n  type,\n  message,\n  dismissible = true,\n  persistent = false,\n  onDismiss,\n  children\n}) => {\n  const [isVisible, setIsVisible] = useState(true);\n\n  const handleDismiss = () => {\n    setIsVisible(false);\n    onDismiss?.(id);\n    \n    // If persistent, save dismissal to localStorage\n    if (persistent && id) {\n      const dismissedNotices = JSON.parse(\n        localStorage.getItem('dismissed_notices') || '[]'\n      );\n      dismissedNotices.push(id);\n      localStorage.setItem('dismissed_notices', JSON.stringify(dismissedNotices));\n    }\n  };\n\n  // Check if notice was previously dismissed\n  if (persistent && id) {\n    const dismissedNotices = JSON.parse(\n      localStorage.getItem('dismissed_notices') || '[]'\n    );\n    if (dismissedNotices.includes(id)) {\n      return null;\n    }\n  }\n\n  if (!isVisible) return null;\n\n  const noticeClasses = clsx(\n    'notice',\n    `notice-${type}`,\n    dismissible && 'is-dismissible',\n    'wp-admin-notice'\n  );\n\n  return (\n    <div className={noticeClasses}>\n      <p dangerouslySetInnerHTML={{ __html: message }} />\n      {children}\n      {dismissible && (\n        <button\n          type=\"button\"\n          className=\"notice-dismiss\"\n          onClick={handleDismiss}\n          aria-label=\"Dismiss this notice\"\n        >\n          <X className=\"w-4 h-4\" />\n          <span className=\"screen-reader-text\">Dismiss this notice.</span>\n        </button>\n      )}\n    </div>\n  );\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import { create } from 'zustand';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport type NoticeType = 'success' | 'error' | 'warning' | 'info';\n\nexport interface AdminNotice {\n  id: string;\n  type: NoticeType;\n  message: string;\n  dismissible?: boolean;\n  persistent?: boolean;\n  duration?: number; // Auto-dismiss after milliseconds\n  createdAt: Date;\n}\n\ninterface AdminNoticesStore {\n  notices: AdminNotice[];\n  addNotice: (notice: Omit<AdminNotice, 'id' | 'createdAt'>) => string;\n  dismissNotice: (id: string) => void;\n  clearNotices: () => void;\n  clearNoticesByType: (type: NoticeType) => void;\n}\n\n/**\n * Zustand store for WordPress-style admin notices\n */\nconst useAdminNoticesStore = create<AdminNoticesStore>((set) => ({\n  notices: [],\n  \n  addNotice: (notice) => {\n    const id = uuidv4();\n    const newNotice: AdminNotice = {\n      ...notice,\n      id,\n      createdAt: new Date(),\n      dismissible: notice.dismissible ?? true,\n      persistent: notice.persistent ?? false,\n    };\n    \n    set((state) => ({\n      notices: [...state.notices, newNotice],\n    }));\n    \n    // Auto-dismiss if duration is set\n    if (notice.duration && notice.duration > 0) {\n      setTimeout(() => {\n        set((state) => ({\n          notices: state.notices.filter((n: any) => n.id !== id),\n        }));\n      }, notice.duration);\n    }\n    \n    return id;\n  },\n  \n  dismissNotice: (id) => {\n    set((state) => ({\n      notices: state.notices.filter((notice: any) => notice.id !== id),\n    }));\n  },\n  \n  clearNotices: () => {\n    set({ notices: [] });\n  },\n  \n  clearNoticesByType: (type) => {\n    set((state) => ({\n      notices: state.notices.filter((notice: any) => notice.type !== type),\n    }));\n  },\n}));\n\n/**\n * Hook for managing WordPress-style admin notices\n */\nexport function useAdminNotices() {\n  const store = useAdminNoticesStore();\n  \n  // Helper functions for common notice types\n  const success = (message: string, options?: Partial<AdminNotice>) => {\n    return store.addNotice({ ...options, type: 'success', message });\n  };\n  \n  const error = (message: string, options?: Partial<AdminNotice>) => {\n    return store.addNotice({ ...options, type: 'error', message });\n  };\n  \n  const warning = (message: string, options?: Partial<AdminNotice>) => {\n    return store.addNotice({ ...options, type: 'warning', message });\n  };\n  \n  const info = (message: string, options?: Partial<AdminNotice>) => {\n    return store.addNotice({ ...options, type: 'info', message });\n  };\n  \n  return {\n    notices: store.notices,\n    addNotice: store.addNotice,\n    dismissNotice: store.dismissNotice,\n    clearNotices: store.clearNotices,\n    clearNoticesByType: store.clearNoticesByType,\n    // Convenience methods\n    success,\n    error,\n    warning,\n    info,\n  };\n}","import { FC } from 'react';\nimport { AdminNotice } from './AdminNotice';\nimport { useAdminNotices } from '@/hooks/useAdminNotices';\n\n/**\n * WordPress-style Admin Notices Container\n * Renders all active admin notices\n */\nexport const AdminNotices: FC = () => {\n  const { notices, dismissNotice } = useAdminNotices();\n\n  if (notices.length === 0) return null;\n\n  return (\n    <div className=\"wp-admin-notices\">\n      {notices.map((notice: any) => (\n        <AdminNotice\n          key={notice.id}\n          {...notice}\n          onDismiss={() => dismissNotice(notice.id)}\n        />\n      ))}\n    </div>\n  );\n};","/**\n * Admin URL Routing Configuration\n * Maps admin URLs to React Router paths\n * Maintains URL structure for compatibility\n */\n\nexport interface WordPressRoute {\n  wpPath: string;\n  reactPath: string;\n  params?: Record<string, string>;\n  title?: string;\n}\n\n// WordPress to React route mappings\nexport const wordpressRoutes: WordPressRoute[] = [\n  // Dashboard\n  { wpPath: '/wp-admin/', reactPath: '/dashboard', title: 'Dashboard' },\n  { wpPath: '/wp-admin/index.php', reactPath: '/dashboard', title: 'Dashboard' },\n  \n  // Posts\n  { wpPath: '/wp-admin/edit.php', reactPath: '/posts', title: 'Posts' },\n  { wpPath: '/wp-admin/post-new.php', reactPath: '/posts/new', title: 'Add New Post' },\n  { wpPath: '/wp-admin/edit-tags.php?taxonomy=category', reactPath: '/posts/categories', title: 'Categories' },\n  { wpPath: '/wp-admin/edit-tags.php?taxonomy=post_tag', reactPath: '/posts/tags', title: 'Tags' },\n  \n  // Media\n  { wpPath: '/wp-admin/upload.php', reactPath: '/media', title: 'Media Library' },\n  { wpPath: '/wp-admin/media-new.php', reactPath: '/media/new', title: 'Add New Media' },\n  \n  // Pages\n  { wpPath: '/wp-admin/edit.php?post_type=page', reactPath: '/pages', title: 'Pages' },\n  { wpPath: '/wp-admin/post-new.php?post_type=page', reactPath: '/pages/new', title: 'Add New Page' },\n  \n  // Reusable Blocks\n  { wpPath: '/wp-admin/edit.php?post_type=wp_block', reactPath: '/reusable-blocks', title: 'Reusable Blocks' },\n  { wpPath: '/wp-admin/post-new.php?post_type=wp_block', reactPath: '/reusable-blocks/new', title: 'Add New Block' },\n  \n  // Comments\n  { wpPath: '/wp-admin/edit-comments.php', reactPath: '/comments', title: 'Comments' },\n  \n  // Appearance\n  { wpPath: '/wp-admin/themes.php', reactPath: '/themes', title: 'Themes' },\n  { wpPath: '/wp-admin/customize.php', reactPath: '/themes/customize', title: 'Customize' },\n  { wpPath: '/wp-admin/widgets.php', reactPath: '/widgets', title: 'Widgets' },\n  { wpPath: '/wp-admin/nav-menus.php', reactPath: '/menus', title: 'Menus' },\n  \n  // Plugins\n  { wpPath: '/wp-admin/plugins.php', reactPath: '/plugins', title: 'Plugins' },\n  { wpPath: '/wp-admin/plugin-install.php', reactPath: '/plugins/install', title: 'Add New Plugin' },\n  \n  // Users\n  { wpPath: '/wp-admin/users.php', reactPath: '/users', title: 'Users' },\n  { wpPath: '/wp-admin/user-new.php', reactPath: '/users/new', title: 'Add New User' },\n  { wpPath: '/wp-admin/profile.php', reactPath: '/profile', title: 'Profile' },\n  \n  // Tools\n  { wpPath: '/wp-admin/tools.php', reactPath: '/tools', title: 'Tools' },\n  { wpPath: '/wp-admin/import.php', reactPath: '/tools/import', title: 'Import' },\n  { wpPath: '/wp-admin/export.php', reactPath: '/tools/export', title: 'Export' },\n  \n  // Settings\n  { wpPath: '/wp-admin/options-general.php', reactPath: '/settings', title: 'General Settings' },\n  { wpPath: '/wp-admin/options-writing.php', reactPath: '/settings/writing', title: 'Writing Settings' },\n  { wpPath: '/wp-admin/options-reading.php', reactPath: '/settings/reading', title: 'Reading Settings' },\n  { wpPath: '/wp-admin/options-discussion.php', reactPath: '/settings/discussion', title: 'Discussion Settings' },\n  { wpPath: '/wp-admin/options-media.php', reactPath: '/settings/media', title: 'Media Settings' },\n  { wpPath: '/wp-admin/options-permalink.php', reactPath: '/settings/permalinks', title: 'Permalink Settings' },\n  \n  // WooCommerce (E-commerce)\n  { wpPath: '/wp-admin/edit.php?post_type=product', reactPath: '/ecommerce/products', title: 'Products' },\n  { wpPath: '/wp-admin/post-new.php?post_type=product', reactPath: '/ecommerce/products/new', title: 'Add Product' },\n  { wpPath: '/wp-admin/edit.php?post_type=shop_order', reactPath: '/ecommerce/orders', title: 'Orders' },\n  { wpPath: '/wp-admin/admin.php?page=wc-reports', reactPath: '/ecommerce/reports', title: 'Reports' },\n  { wpPath: '/wp-admin/admin.php?page=wc-settings', reactPath: '/ecommerce/settings', title: 'WooCommerce Settings' },\n];\n\n// Helper functions\nexport function getReactPath(wpPath: string): string | null {\n  const route = wordpressRoutes.find((r: any) => r.wpPath === wpPath);\n  return route ? route.reactPath : null;\n}\n\nexport function getWordPressPath(reactPath: string): string | null {\n  const route = wordpressRoutes.find((r: any) => r.reactPath === reactPath);\n  return route ? route.wpPath : null;\n}\n\nexport function parseWordPressUrl(url: string): { path: string; params: URLSearchParams } {\n  const [path, query] = url.split('?');\n  const params = new URLSearchParams(query || '');\n  return { path, params };\n}\n\n// WordPress admin URL patterns\nexport const wpAdminPatterns = {\n  isAdminUrl: (path: string) => path.startsWith('/wp-admin/'),\n  isPostEdit: (path: string, params: URLSearchParams) => \n    path === '/wp-admin/post.php' && params.get('action') === 'edit',\n  isPostNew: (path: string) => path === '/wp-admin/post-new.php',\n  isCustomPostType: (params: URLSearchParams) => params.has('post_type'),\n  isTaxonomy: (path: string) => path === '/wp-admin/edit-tags.php',\n};\n\n// Route transformation middleware\nexport function transformWordPressRoute(wpPath: string): string {\n  // Handle special cases\n  const { path, params } = parseWordPressUrl(wpPath);\n  \n  // Edit post\n  if (wpAdminPatterns.isPostEdit(path, params)) {\n    const postId = params.get('post');\n    return `/posts/edit/${postId}`;\n  }\n  \n  // Custom post types\n  if (wpAdminPatterns.isCustomPostType(params)) {\n    const postType = params.get('post_type');\n    if (postType === 'page') return getReactPath(wpPath) || '/pages';\n    if (postType === 'product') return getReactPath(wpPath) || '/ecommerce/products';\n    // Add more custom post types as needed\n  }\n  \n  // Taxonomies\n  if (wpAdminPatterns.isTaxonomy(path)) {\n    const taxonomy = params.get('taxonomy');\n    if (taxonomy === 'category') return '/posts/categories';\n    if (taxonomy === 'post_tag') return '/posts/tags';\n    if (taxonomy === 'product_cat') return '/ecommerce/categories';\n    // Add more taxonomies as needed\n  }\n  \n  // Default mapping\n  return getReactPath(wpPath) || wpPath;\n}\n\n// WordPress menu URL generator\nexport function generateWordPressMenuUrl(menuId: string): string {\n  switch (menuId) {\n    case 'dashboard':\n      return '/wp-admin/index.php';\n    case 'posts':\n      return '/wp-admin/edit.php';\n    case 'media':\n      return '/wp-admin/upload.php';\n    case 'pages':\n      return '/wp-admin/edit.php?post_type=page';\n    case 'comments':\n      return '/wp-admin/edit-comments.php';\n    case 'themes':\n      return '/wp-admin/themes.php';\n    case 'plugins':\n      return '/wp-admin/plugins.php';\n    case 'users':\n      return '/wp-admin/users.php';\n    case 'tools':\n      return '/wp-admin/tools.php';\n    case 'settings':\n      return '/wp-admin/options-general.php';\n    default:\n      return '/wp-admin/';\n  }\n}","import { useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { transformWordPressRoute, wpAdminPatterns } from '@/config/wordpressRoutes';\n\n/**\n * WordPress Router Component\n * Handles WordPress-style URL routing and redirects\n */\nexport function WordPressRouter() {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    const currentPath = location.pathname;\n    \n    // Check if it's a WordPress admin URL\n    if (wpAdminPatterns.isAdminUrl(currentPath)) {\n      // Transform to React route\n      const reactPath = transformWordPressRoute(currentPath + location.search);\n      \n      if (reactPath !== currentPath) {\n        // Redirect to React route\n        navigate(reactPath, { replace: true });\n      }\n    }\n  }, [location, navigate]);\n\n  return null;\n}\n\n/**\n * Hook to navigate using WordPress URLs\n */\nexport function useWordPressNavigate() {\n  const navigate = useNavigate();\n  \n  return (wpPath: string, options?: any) => {\n    const reactPath = transformWordPressRoute(wpPath);\n    navigate(reactPath, options);\n  };\n}","import { create } from 'zustand'\n\ninterface AdminFullscreenStore {\n  isFullscreen: boolean;\n  reason: string | null;\n  enter: (reason?: string) => void;\n  exit: () => void;\n  setFullscreen: (value: boolean, reason?: string | null) => void;\n}\n\nexport const useAdminFullscreen = create<AdminFullscreenStore>((set) => ({\n  isFullscreen: false,\n  reason: null,\n  enter: (reason) => set({ isFullscreen: true, reason: reason ?? null }),\n  exit: () => set({ isFullscreen: false, reason: null }),\n  setFullscreen: (value, reason = null) => set({ isFullscreen: value, reason }),\n}));\n\n","import { FC, ReactNode, useState, useEffect, useMemo } from 'react';\nimport AdminSidebar from './AdminSidebar'\nimport AdminHeader from './AdminHeader'\nimport AdminBar from './AdminBar'\nimport { AdminNotices } from '../notices/AdminNotices'\nimport toast from 'react-hot-toast'\nimport { useAuth } from '@o4o/auth-context'\nimport { WordPressRouter } from '@/components/routing/WordPressRouter'\nimport { useLocation } from 'react-router-dom'\nimport { useAdminFullscreen } from '@/hooks/useAdminFullscreen'\n\ninterface AdminLayoutProps {\n  children: ReactNode\n}\n\nconst AdminLayout: FC<AdminLayoutProps> = ({ children }) => {\n  const [sidebarOpen, setSidebarOpen] = useState(false)\n  const [isMobile, setIsMobile] = useState(false)\n\n  useEffect(() => {\n    const checkMobile = () => {\n      const mobile = window.innerWidth < 1024\n      setIsMobile(mobile)\n    }\n    \n    // Initial check\n    checkMobile()\n    \n    // Listen for resize\n    window.addEventListener('resize', checkMobile)\n    return () => window.removeEventListener('resize', checkMobile)\n  }, [])\n  \n  const { logout } = useAuth()\n  const location = useLocation()\n  const { isFullscreen: fullscreenState } = useAdminFullscreen()\n\n  // Detect fullscreen customizer mode\n  const isFullscreenCustomizer = useMemo(() => {\n    const pathname = location.pathname || ''\n    const search = location.search || ''\n    // Enable fullscreen when visiting the Customizer route\n    if (pathname.startsWith('/customize')) return true\n    // Or via explicit query flags\n    return /[?&](fullscreen|customizer)=(1|true)/i.test(search)\n  }, [location.pathname, location.search])\n\n  const isFullscreenMode = isFullscreenCustomizer || fullscreenState\n\n  // Sync body class as a fallback to ensure layout hides chrome\n  useEffect(() => {\n    if (typeof document === 'undefined') return\n    const cls = 'customizer-fullscreen'\n    if (isFullscreenMode) document.body.classList.add(cls)\n    else document.body.classList.remove(cls)\n  }, [isFullscreenMode])\n\n  const handleLogout = async () => {\n    try {\n      logout()\n      toast.success('로그아웃되었습니다.')\n    } catch (error: any) {\n    // Error logging - use proper error handler\n      toast.error('로그아웃 처리 중 오류가 발생했습니다.')\n    }\n  }\n\n  return (\n    <div className=\"wordpress-admin\">\n      {/* WordPress Router - only loads when admin is authenticated */}\n      <WordPressRouter />\n      \n      {/* WordPress Admin Bar (hidden in fullscreen customizer) */}\n      {!isFullscreenMode && <AdminBar onLogout={handleLogout} />}\n      \n      \n      {/* Sidebar */}\n      {!isFullscreenMode && (\n        <div className={`admin-sidebar ${sidebarOpen ? 'open' : ''}`}>\n          <AdminSidebar isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n        </div>\n      )}\n      \n      {/* Main content wrapper with proper positioning */}\n      <div className={`wordpress-admin-content ${!isMobile && !isFullscreenMode ? 'with-sidebar' : ''}`}>\n        {/* Header with menu button for mobile */}\n        {/* Mobile header toggle (hidden in fullscreen customizer) */}\n        {isMobile && !isFullscreenMode && (\n          <AdminHeader onMenuClick={() => setSidebarOpen(!sidebarOpen)} />\n        )}\n        \n        {/* Page content */}\n        <main>\n          <AdminNotices />\n          {children}\n        </main>\n      </div>\n      \n      {/* Mobile sidebar backdrop */}\n      {!isFullscreenMode && (\n        <div \n          className={`admin-sidebar-backdrop ${sidebarOpen ? 'show' : ''}`}\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n    </div>\n  )\n}\n\nexport default AdminLayout\n","import { FC, ReactNode } from 'react';\n\ninterface EditorLayoutProps {\n  children: ReactNode;\n}\n\n/**\n * 독립형 편집기 레이아웃\n * 관리자 UI와 완전히 분리된 풀스크린 편집기 환경 제공\n */\nconst EditorLayout: FC<EditorLayoutProps> = ({ children }) => {\n  return (\n    <div className=\"h-screen w-full bg-white\">\n      {children}\n    </div>\n  );\n};\n\nexport default EditorLayout;","import { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '@o4o/auth-context';\n\nconst InitialRedirect = () => {\n  const { isAuthenticated, isLoading, isAdmin } = useAuth();\n  const location = useLocation();\n\n  // 로딩 중인 경우 로딩 화면 표시\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-admin-blue\"></div>\n      </div>\n    );\n  }\n\n  // 인증되지 않은 경우 로그인 페이지로\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // 관리자가 아닌 경우 권한 없음 표시\n  if (!isAdmin) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-red-600\">접근 권한이 없습니다</h1>\n          <p className=\"mt-2 text-gray-600\">관리자 권한이 필요합니다.</p>\n        </div>\n      </div>\n    );\n  }\n\n  // 인증된 관리자는 WordPress 대시보드로 리다이렉트\n  return <Navigate to=\"/admin\" replace />;\n};\n\nexport default InitialRedirect;","import { type HTMLAttributes } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","import React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { cn } from '@/lib/utils';\nimport {\n  Undo,\n  Redo,\n  Maximize2,\n  Minimize2,\n  MoreVertical,\n  Eye,\n  Settings,\n  Save,\n  Info,\n  Keyboard,\n  Trash2,\n  Library,\n  Settings2,\n  Sparkles,\n} from 'lucide-react';\n\ninterface EditorHeaderProps {\n  onSave: () => void;\n  onPublish: () => void;\n  onBack?: () => void;\n  canUndo?: boolean;\n  canRedo?: boolean;\n  onUndo?: () => void;\n  onRedo?: () => void;\n  isFullscreen?: boolean;\n  onToggleFullscreen?: () => void;\n  isDirty?: boolean;\n  isPublished?: boolean;\n  onToggleListView?: () => void;\n  onToggleCodeView?: () => void;\n  isCodeView?: boolean;\n  postStatus?: string;\n  onPreview?: () => void;\n  onOpenDesignLibrary?: () => void;\n  onOpenAIGenerator?: () => void;\n  onToggleInspector?: () => void;\n  isInspectorOpen?: boolean;\n  // Optional extras used by some editors\n  title?: string;\n  subtitle?: string;\n  actions?: React.ReactNode;\n}\n\nexport const EditorHeader: React.FC<EditorHeaderProps> = ({\n  onSave,\n  onPublish,\n  onBack,\n  canUndo = false,\n  canRedo = false,\n  onUndo,\n  onRedo,\n  isFullscreen = false,\n  onToggleFullscreen,\n  isDirty = false,\n  isPublished = false,\n  onPreview,\n  onOpenDesignLibrary,\n  onOpenAIGenerator,\n  onToggleInspector,\n  isInspectorOpen = true,\n  title,\n  subtitle,\n  actions,\n}) => {\n  const [isSaving, setIsSaving] = useState(false);\n\n  const handleSave = async () => {\n    setIsSaving(true);\n    await onSave();\n    setTimeout(() => setIsSaving(false), 1000);\n  };\n\n  return (\n    <div className=\"sticky top-0 z-50 bg-white border-b border-gray-200 px-4 py-2\">\n      <div className=\"flex items-center justify-between\">\n        {/* Left Section */}\n        <div className=\"flex items-center gap-3\">\n          {/* WordPress Logo / Back Button */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={onBack}\n            className=\"h-9 w-9 hover:bg-gray-100\"\n            title=\"Back to Dashboard\"\n          >\n            <div className=\"text-2xl font-bold text-blue-600\">W</div>\n          </Button>\n          \n          {/* Undo/Redo */}\n          <div className=\"flex items-center border rounded-md\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={onUndo}\n              disabled={!canUndo}\n              className=\"h-8 w-8 rounded-r-none hover:bg-gray-100\"\n              title=\"Undo (Ctrl+Z)\"\n            >\n              <Undo className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={onRedo}\n              disabled={!canRedo}\n              className=\"h-8 w-8 rounded-l-none border-l hover:bg-gray-100\"\n              title=\"Redo (Ctrl+Shift+Z)\"\n            >\n              <Redo className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Design Library */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onOpenDesignLibrary}\n            className=\"h-8 px-3 hover:bg-gray-100 border border-gray-300\"\n            title=\"Design Library - Choose from templates\"\n          >\n            <Library className=\"h-4 w-4 mr-1\" />\n            디자인 라이브러리\n          </Button>\n\n          {/* AI Generator */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onOpenAIGenerator}\n            className=\"h-8 px-3 hover:bg-gray-100 border border-gray-300 text-purple-600 hover:text-purple-700\"\n            title=\"AI Page Generator - Generate content with AI\"\n          >\n            <Sparkles className=\"h-4 w-4 mr-1\" />\n            AI 페이지 생성\n          </Button>\n\n          {/* Inspector Toggle */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onToggleInspector}\n            className={cn(\n              \"h-8 px-3 hover:bg-gray-100 border border-gray-300\",\n              isInspectorOpen && \"bg-gray-100\"\n            )}\n            title=\"Toggle Inspector Panel\"\n          >\n            <Settings2 className=\"h-4 w-4 mr-1\" />\n            Settings\n          </Button>\n        </div>\n\n        {/* Center Section - Title / Subtitle */}\n        <div className=\"flex items-center gap-3\">\n          {title && (\n            <div className=\"flex flex-col\">\n              <span className=\"text-sm font-medium\">{title}</span>\n              {subtitle && (\n                <span className=\"text-xs text-muted-foreground\">{subtitle}</span>\n              )}\n            </div>\n          )}\n          {isDirty && (\n            <span className=\"text-xs text-orange-500\">• Unsaved changes</span>\n          )}\n        </div>\n\n        {/* Right Section - Actions */}\n        <div className=\"flex items-center gap-2\">\n          {/* Custom Actions (optional) */}\n          {actions}\n\n          {/* Preview */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onPreview}\n            className=\"h-8 px-3 hover:bg-gray-100\"\n            title=\"Preview\"\n          >\n            <Eye className=\"h-4 w-4 mr-1\" />\n            Preview\n          </Button>\n\n          {/* Save Draft */}\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={handleSave}\n            disabled={isSaving || !isDirty}\n            className={cn(\n              \"h-8 px-3\",\n              isDirty && \"border-orange-500 hover:bg-orange-50\"\n            )}\n          >\n            {isSaving ? (\n              \"Saving...\"\n            ) : (\n              <>\n                <Save className=\"h-3 w-3 mr-1\" />\n                Save draft\n              </>\n            )}\n          </Button>\n\n          {/* Publish/Update */}\n          <Button\n            size=\"sm\"\n            onClick={onPublish}\n            className={cn(\n              \"h-8 px-3\",\n              isPublished \n                ? \"bg-green-600 hover:bg-green-700\" \n                : \"bg-blue-600 hover:bg-blue-700\"\n            )}\n          >\n            {isPublished ? \"Update\" : \"Publish\"}\n          </Button>\n\n          {/* Settings Menu */}\n          <DropdownMenu>\n            <DropdownMenuTrigger>\n              <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8 hover:bg-gray-100\">\n                <MoreVertical className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-48\">\n              <DropdownMenuItem className=\"text-sm\">\n                <Settings className=\"h-4 w-4 mr-2\" />\n                Preferences\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={onToggleFullscreen} className=\"text-sm\">\n                {isFullscreen ? (\n                  <>\n                    <Minimize2 className=\"h-4 w-4 mr-2\" />\n                    Exit Fullscreen\n                  </>\n                ) : (\n                  <>\n                    <Maximize2 className=\"h-4 w-4 mr-2\" />\n                    Fullscreen Mode\n                  </>\n                )}\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem className=\"text-sm\">\n                <Keyboard className=\"h-4 w-4 mr-2\" />\n                Keyboard shortcuts\n              </DropdownMenuItem>\n              <DropdownMenuItem className=\"text-sm\">\n                <Info className=\"h-4 w-4 mr-2\" />\n                Help\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem className=\"text-sm text-red-600\">\n                <Trash2 className=\"h-4 w-4 mr-2\" />\n                Move to trash\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n    </div>\n  );\n};\n","/**\n * Post API Service\n * 게시글 관련 API 호출 서비스\n */\n\nimport axios, { AxiosRequestConfig } from 'axios';\nimport { \n  CreatePostRequest, \n  UpdatePostRequest, \n  PostResponse, \n  PostListResponse,\n  MediaUploadResponse,\n  Media \n} from '@/types/post.types';\n\n// API 기본 URL (환경변수에서 가져오기)\n// Production: admin.neture.co.kr에서는 api.neture.co.kr 사용\n// Development: localhost:3000/api 사용\nconst getApiBaseUrl = () => {\n  // 환경변수가 설정되어 있으면 사용\n  if (import.meta.env.VITE_API_URL) {\n    // Normalize to ensure trailing /api is present\n    const v = String(import.meta.env.VITE_API_URL).trim();\n    const url = v.replace(/\\/$/, '');\n    return /\\/api$/.test(url) ? url : `${url}/api`;\n  }\n  \n  // Production 환경 (admin.neture.co.kr -> api.neture.co.kr)\n  if (window.location.hostname === 'admin.neture.co.kr') {\n    return 'https://api.neture.co.kr/api';\n  }\n  \n  // Development 환경\n  return 'http://localhost:3001/api';\n};\n\nconst API_BASE_URL = getApiBaseUrl();\nconst API_V1_URL = `${API_BASE_URL}/v1/content`;\n\n// Axios 인스턴스 생성\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  withCredentials: true, // 쿠키 포함\n});\n\n// V1 API용 Axios 인스턴스\nconst apiV1Client = axios.create({\n  baseURL: API_V1_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  withCredentials: true,\n});\n\n// Dev-only response logging for post endpoints\napiClient.interceptors.response.use(\n  (response) => {\n    try {\n      if (import.meta.env?.DEV && response?.config?.url) {\n        const fullUrl = `${response.config.baseURL || ''}${response.config.url}`;\n        if (/\\/v1\\/content\\/posts|\\/api\\/posts/.test(fullUrl)) {\n          const data = response.data?.data ?? response.data;\n          // dev response observed (logging disabled)\n        }\n      }\n    } catch {}\n    return response;\n  },\n  (error) => Promise.reject(error)\n);\n\napiV1Client.interceptors.response.use(\n  (response) => {\n    try {\n      if (import.meta.env?.DEV && response?.config?.url) {\n        const fullUrl = `${response.config.baseURL || ''}${response.config.url}`;\n        if (/\\/v1\\/content\\/posts|\\/api\\/posts/.test(fullUrl)) {\n          const data = response.data?.data ?? response.data;\n          // dev response observed (logging disabled)\n        }\n      }\n    } catch {}\n    return response;\n  },\n  (error) => Promise.reject(error)\n);\n\n// 요청 인터셉터 (토큰 추가)\napiClient.interceptors.request.use(\n  (config) => {\n    // 여러 위치에서 토큰 확인\n    let token = localStorage.getItem('authToken');\n    if (!token) {\n      token = localStorage.getItem('accessToken');\n    }\n    if (!token) {\n      token = localStorage.getItem('token');\n    }\n    \n    // Zustand store에서도 확인\n    if (!token) {\n      const adminStorage = localStorage.getItem('admin-auth-storage');\n      if (adminStorage) {\n        try {\n          const parsed = JSON.parse(adminStorage);\n          if (parsed.state?.token) {\n            token = parsed.state.token;\n          }\n        } catch {\n          // Ignore parse error\n        }\n      }\n    }\n    \n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    // 개발 환경에서 토큰이 없으면 테스트 토큰 생성\n    else if (import.meta.env.DEV) {\n      const testToken = 'test-token-for-development';\n      config.headers.Authorization = `Bearer ${testToken}`;\n    }\n    // Dev-only: log post endpoints\n    try {\n      if (import.meta.env?.DEV && config?.url) {\n        const fullUrl = `${config.baseURL || ''}${config.url}`;\n        if (/\\/v1\\/content\\/posts|\\/api\\/posts/.test(fullUrl)) {\n          const raw = (config as any).data;\n          let payload: any = raw;\n          if (typeof raw === 'string') { try { payload = JSON.parse(raw); } catch { /* noop */ } }\n          // dev request observed (logging disabled)\n        }\n      }\n    } catch {}\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// V1 API 요청 인터셉터 (토큰 추가)\napiV1Client.interceptors.request.use(\n  (config) => {\n    // 여러 위치에서 토큰 확인\n    let token = localStorage.getItem('authToken');\n    if (!token) {\n      token = localStorage.getItem('accessToken');\n    }\n    if (!token) {\n      token = localStorage.getItem('token');\n    }\n    \n    // Zustand store에서도 확인\n    if (!token) {\n      const adminStorage = localStorage.getItem('admin-auth-storage');\n      if (adminStorage) {\n        try {\n          const parsed = JSON.parse(adminStorage);\n          if (parsed.state?.token) {\n            token = parsed.state.token;\n          }\n        } catch {\n          // Ignore parse error\n        }\n      }\n    }\n    \n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    // 개발 환경에서 토큰이 없으면 테스트 토큰 생성\n    else if (import.meta.env.DEV) {\n      const testToken = 'test-token-for-development';\n      config.headers.Authorization = `Bearer ${testToken}`;\n    }\n    // Dev-only: log post endpoints\n    try {\n      if (import.meta.env?.DEV && config?.url) {\n        const fullUrl = `${config.baseURL || ''}${config.url}`;\n        if (/\\/v1\\/content\\/posts|\\/api\\/posts/.test(fullUrl)) {\n          const raw = (config as any).data;\n          let payload: any = raw;\n          if (typeof raw === 'string') { try { payload = JSON.parse(raw); } catch { /* noop */ } }\n          // dev request observed (logging disabled)\n        }\n      }\n    } catch {}\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// 응답 인터셉터 (에러 처리)\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // 인증 에러 처리\n      localStorage.removeItem('authToken');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// V1 API 응답 인터셉터\napiV1Client.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // 인증 에러 처리\n      localStorage.removeItem('authToken');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\n// Request deduplication\nconst pendingRequests = new Map<string, AbortController>();\n\nconst createRequestKey = (method: string, url: string, data?: any): string => {\n  // Remove _requestId from data for key generation\n  const cleanData = data ? { ...data } : {};\n  delete cleanData._requestId;\n  return `${method}-${url}-${JSON.stringify(cleanData)}`;\n};\n\nconst cancelPendingRequest = (key: string) => {\n  const controller = pendingRequests.get(key);\n  if (controller) {\n    controller.abort();\n    pendingRequests.delete(key);\n  }\n};\n\n/**\n * 게시글 API\n */\n\nexport const postApi = {\n  // 게시글 생성 (/api/posts 사용: 중복 시 409)\n  create: async (data: CreatePostRequest): Promise<PostResponse> => {\n    // Cancel any pending request with same data\n    const requestKey = createRequestKey('POST', '/posts', data);\n    cancelPendingRequest(requestKey);\n    \n    // Create new abort controller\n    const abortController = new AbortController();\n    pendingRequests.set(requestKey, abortController);\n    \n    try {\n      // Remove _requestId from actual request\n      const requestData = { ...data };\n      delete (requestData as any)._requestId;\n      \n      \n      const response = await apiClient.post('/posts', requestData, {\n        signal: abortController.signal\n      } as AxiosRequestConfig);\n      \n      \n      pendingRequests.delete(requestKey);\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      pendingRequests.delete(requestKey);\n      \n      // Don't report aborted requests as errors\n      if (error.name === 'CanceledError' || error.code === 'ERR_CANCELED') {\n        return { success: false, error: 'Request canceled' };\n      }\n      \n      return { \n        success: false, \n        error: error.response?.data?.message || `Failed to create post (${error.response?.status})` \n      };\n    }\n  },\n\n  // 게시글 조회 (/api/posts)\n  get: async (id: string): Promise<PostResponse> => {\n    try {\n      const response = await apiClient.get(`/posts/${id}`);\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to get post' \n      };\n    }\n  },\n\n  // 게시글 수정 (/api/posts)\n  update: async (data: UpdatePostRequest): Promise<PostResponse> => {\n    const { id, ...updateData } = data;\n    \n    // Cancel any pending request with same data\n    const requestKey = createRequestKey('PUT', `/posts/${id}`, updateData);\n    cancelPendingRequest(requestKey);\n    \n    // Create new abort controller\n    const abortController = new AbortController();\n    pendingRequests.set(requestKey, abortController);\n    \n    try {\n      // Remove _requestId from actual request\n      const requestData = { ...updateData };\n      delete (requestData as any)._requestId;\n      \n      const response = await apiClient.put(`/posts/${id}`, requestData, {\n        signal: abortController.signal\n      } as AxiosRequestConfig);\n      \n      pendingRequests.delete(requestKey);\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      pendingRequests.delete(requestKey);\n      \n      // Don't report aborted requests as errors\n      if (error.name === 'CanceledError' || error.code === 'ERR_CANCELED') {\n        return { success: false, error: 'Request canceled' };\n      }\n      \n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to update post' \n      };\n    }\n  },\n  \n  // 자동저장 (/api/posts/:id/autosave)\n  autoSave: async (id: string, data: { title?: string; content?: any; excerpt?: string }): Promise<PostResponse> => {\n    try {\n      const response = await apiClient.post(`/posts/${id}/autosave`, data);\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to autosave' \n      };\n    }\n  },\n\n  // 게시글 삭제 (V1 API 사용)\n  delete: async (id: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      await apiV1Client.delete(`/posts/${id}`);\n      return { success: true };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to delete post' \n      };\n    }\n  },\n\n  // 게시글 발행 (V1 API 사용)\n  publish: async (id: string): Promise<PostResponse> => {\n    try {\n      const response = await apiV1Client.post(`/posts/${id}/publish`);\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to publish post' \n      };\n    }\n  },\n\n  // 임시 저장 (V1 API 사용)\n  saveDraft: async (data: CreatePostRequest | UpdatePostRequest): Promise<PostResponse> => {\n    try {\n      const endpoint = 'id' in data ? `/posts/${data.id}/draft` : '/posts/draft';\n      \n      if (import.meta.env.DEV) {\n        // Dev-only: draft request\n      }\n      \n      const response = await apiV1Client.post(endpoint, data);\n      \n      if (import.meta.env.DEV) {\n        // Dev-only: draft success\n      }\n      \n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || `Failed to save draft (${error.response?.status})` \n      };\n    }\n  },\n\n  // 게시글 목록 조회 (V1 API 사용)\n  list: async (params?: {\n    page?: number;\n    pageSize?: number;\n    status?: string;\n    author?: string;\n    category?: string;\n    tag?: string;\n    search?: string;\n  }): Promise<PostListResponse> => {\n    try {\n      const response = await apiV1Client.get('/posts', { params });\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to list posts' \n      };\n    }\n  },\n};\n\n/**\n * 미디어 API\n */\nexport const mediaApi = {\n  // 파일 업로드 (V1 API 사용)\n  upload: async (file: File, onProgress?: (progress: number) => void): Promise<MediaUploadResponse> => {\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const response = await apiV1Client.post('/content/media/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n        onUploadProgress: (progressEvent: any) => {\n          if (progressEvent.total) {\n            const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n            onProgress?.(progress);\n          }\n        },\n      } as any);\n\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to upload media' \n      };\n    }\n  },\n\n  // 미디어 목록 조회 (V1 API 사용)\n  list: async (params?: {\n    page?: number;\n    pageSize?: number;\n    type?: string;\n  }): Promise<{ success: boolean; data?: Media[]; error?: string }> => {\n    try {\n      const response = await apiV1Client.get('/media', { params });\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to list media' \n      };\n    }\n  },\n\n  // 미디어 삭제 (V1 API 사용)\n  delete: async (id: string): Promise<{ success: boolean; error?: string }> => {\n    try {\n      await apiV1Client.delete(`/content/media/${id}`);\n      return { success: true };\n    } catch (error: any) {\n      return { \n        success: false, \n        error: error.response?.data?.message || 'Failed to delete media' \n      };\n    }\n  },\n};\n\n/**\n * 카테고리/태그 API\n */\nexport const taxonomyApi = {\n  // 카테고리 목록 (V1 API 사용)\n  getCategories: async () => {\n    try {\n      const response = await apiV1Client.get('/categories');\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  // 태그 목록 (V1 API 사용)\n  getTags: async () => {\n    try {\n      const response = await apiV1Client.get('/tags');\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  // 카테고리 생성 (V1 API 사용)\n  createCategory: async (name: string, description?: string) => {\n    try {\n      const response = await apiV1Client.post('/categories', { name, description });\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { success: false, error: error.message };\n    }\n  },\n\n  // 태그 생성 (V1 API 사용)\n  createTag: async (name: string) => {\n    try {\n      const response = await apiV1Client.post('/tags', { name });\n      return { success: true, data: response.data };\n    } catch (error: any) {\n      return { success: false, error: error.message };\n    }\n  },\n};\n","import { forwardRef, HTMLAttributes } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface ScrollAreaProps extends HTMLAttributes<HTMLDivElement> {\n  orientation?: 'vertical' | 'horizontal' | 'both';\n}\n\nconst ScrollArea = forwardRef<HTMLDivElement, ScrollAreaProps>(\n  ({ className, children, orientation = 'vertical', ...props }, ref) => {\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          'relative overflow-auto',\n          {\n            'overflow-y-auto overflow-x-hidden': orientation === 'vertical',\n            'overflow-x-auto overflow-y-hidden': orientation === 'horizontal',\n            'overflow-auto': orientation === 'both',\n          },\n          // Custom scrollbar styling\n          'scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100',\n          'hover:scrollbar-thumb-gray-400',\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\nScrollArea.displayName = 'ScrollArea';\n\n// ScrollBar is not needed with native scrollbar styling\nconst ScrollBar = () => null;\n\nexport { ScrollArea, ScrollBar };","/**\n * Block Manager - Optimized block loading strategy\n * Loads blocks on-demand to reduce initial bundle size\n */\n\nexport interface BlockCategory {\n  name: string;\n  priority: 'high' | 'medium' | 'low';\n  blocks: string[];\n  loaded: boolean;\n}\n\nclass BlockManager {\n  private categories: Map<string, BlockCategory> = new Map();\n  private loadedBlocks: Set<string> = new Set();\n  private blockRegistry: Map<string, any> = new Map();\n\n  constructor() {\n    this.initializeCategories();\n  }\n\n  private initializeCategories() {\n    // Core blocks - always loaded\n    this.categories.set('core', {\n      name: 'Core Blocks',\n      priority: 'high',\n      blocks: ['paragraph', 'heading', 'list', 'list-item', 'quote', 'image'],\n      loaded: false\n    });\n\n    // Layout blocks - loaded on demand\n    this.categories.set('layout', {\n      name: 'Layout Blocks',\n      priority: 'medium',\n      blocks: ['columns', 'column', 'group', 'separator', 'spacer', 'cover'],\n      loaded: false\n    });\n\n    // Media blocks - lazy loaded\n    this.categories.set('media', {\n      name: 'Media Blocks',\n      priority: 'low',\n      blocks: ['gallery', 'audio', 'video', 'file', 'media-text', 'o4o/slide'],\n      loaded: false\n    });\n\n    // Widget blocks - lazy loaded\n    this.categories.set('widgets', {\n      name: 'Widget Blocks',\n      priority: 'low',\n      blocks: ['shortcode', 'archives', 'calendar', 'categories', 'latest-comments', 'latest-posts'],\n      loaded: false\n    });\n\n    // Embed blocks - lazy loaded (including markdown reader)\n    this.categories.set('embeds', {\n      name: 'Embed Blocks',\n      priority: 'low',\n      blocks: ['o4o/markdown-reader', 'o4o/youtube', 'o4o/twitter', 'o4o/instagram'],\n      loaded: false\n    });\n\n    // Dynamic blocks - lazy loaded (without markdown-reader)\n    this.categories.set('dynamic', {\n      name: 'Dynamic Blocks',\n      priority: 'low',\n      blocks: ['o4o/cpt-acf-loop', 'o4o/reusable', 'o4o/spectra-forms'],\n      loaded: false\n    });\n  }\n\n  /**\n   * Load blocks by category\n   */\n  async loadCategory(categoryName: string): Promise<void> {\n    const category = this.categories.get(categoryName);\n    if (!category || category.loaded) {\n      return;\n    }\n\n    try {\n      let module;\n      switch (categoryName) {\n        case 'core':\n          module = await import(\n            /* webpackChunkName: \"blocks-core\" */\n            '@/blocks/core'\n          );\n          if (module.registerCoreBlocks) {\n            module.registerCoreBlocks();\n          }\n          break;\n        case 'layout':\n          module = await import(\n            /* webpackChunkName: \"blocks-layout\" */\n            '@/blocks/layout'\n          );\n          if (module.registerLayoutBlocks) {\n            module.registerLayoutBlocks();\n          }\n          break;\n        case 'media':\n          module = await import(\n            /* webpackChunkName: \"blocks-media\" */\n            '@/blocks/media'\n          );\n          if (module.registerMediaBlocks) {\n            module.registerMediaBlocks();\n          }\n          break;\n        case 'widgets':\n          // Widgets blocks will be implemented later\n          break;\n        case 'embeds':\n          // Register embed blocks directly\n          this.registerBlock('o4o/markdown-reader', {\n            title: 'Markdown Reader',\n            category: 'embed',\n            icon: 'media-document',\n            description: 'Display markdown files',\n            supports: {\n              align: ['wide', 'full'],\n              html: false\n            },\n            attributes: {\n              url: {\n                type: 'string',\n                default: ''\n              }\n            },\n            edit: () => null,\n            save: () => null\n          });\n          \n          this.registerBlock('o4o/youtube', {\n            title: 'YouTube',\n            category: 'embed',\n            icon: 'video',\n            description: 'Embed a YouTube video',\n            attributes: {\n              url: {\n                type: 'string',\n                default: ''\n              }\n            },\n            edit: () => null,\n            save: () => null\n          });\n          \n          this.registerBlock('o4o/twitter', {\n            title: 'Twitter',\n            category: 'embed',\n            icon: 'twitter',\n            description: 'Embed a tweet',\n            attributes: {\n              url: {\n                type: 'string',\n                default: ''\n              }\n            },\n            edit: () => null,\n            save: () => null\n          });\n          \n          this.registerBlock('o4o/instagram', {\n            title: 'Instagram',\n            category: 'embed',\n            icon: 'instagram',\n            description: 'Embed an Instagram post',\n            attributes: {\n              url: {\n                type: 'string',\n                default: ''\n              }\n            },\n            edit: () => null,\n            save: () => null\n          });\n          \n          category.loaded = true;\n          break;\n        case 'dynamic':\n          // Register dynamic blocks directly with proper namespace\n          this.registerBlock('o4o/cpt-acf-loop', {\n            title: 'CPT ACF Loop',\n            category: 'dynamic',\n            icon: 'layout',\n            description: 'Display custom post type loops',\n            attributes: {\n              postType: {\n                type: 'string',\n                default: 'post'\n              },\n              postsPerPage: {\n                type: 'number',\n                default: 10\n              }\n            },\n            edit: () => null,\n            save: () => null\n          });\n          this.registerBlock('o4o/reusable', {\n            title: 'Reusable Block',\n            category: 'dynamic',\n            icon: 'block-default',\n            description: 'Insert a reusable block',\n            attributes: {\n              ref: {\n                type: 'number'\n              }\n            },\n            edit: () => null,\n            save: () => null\n          });\n          this.registerBlock('o4o/spectra-forms', {\n            title: 'Spectra Forms',\n            category: 'dynamic',\n            icon: 'forms',\n            description: 'Add a form',\n            attributes: {\n              formId: {\n                type: 'string'\n              }\n            },\n            edit: () => null,\n            save: () => null\n          });\n          category.loaded = true;\n          break;\n      }\n\n      // Mark category as loaded after registration\n      if (categoryName === 'core' || categoryName === 'layout' || categoryName === 'media') {\n        category.loaded = true;\n      }\n      \n      if (module && categoryName !== 'core' && categoryName !== 'layout' && categoryName !== 'media') {\n        // Register blocks from module for other categories\n        Object.entries(module).forEach(([blockName, blockDefinition]) => {\n          this.registerBlock(blockName, blockDefinition);\n        });\n        category.loaded = true;\n      }\n    } catch (error) {\n      // Failed to load block category\n    }\n  }\n\n  /**\n   * Load only essential blocks for initial render\n   */\n  async loadEssentialBlocks(): Promise<void> {\n    await this.loadCategory('core');\n  }\n\n  /**\n   * Load all high-priority blocks\n   */\n  async loadHighPriorityBlocks(): Promise<void> {\n    const highPriorityCategories = Array.from(this.categories.values())\n      .filter(cat => cat.priority === 'high');\n    \n    await Promise.all(\n      highPriorityCategories.map(cat => \n        this.loadCategory(this.getCategoryName(cat))\n      )\n    );\n  }\n\n  /**\n   * Progressive loading strategy\n   */\n  async loadBlocksProgressive(): Promise<void> {\n    // Load core blocks immediately\n    await this.loadEssentialBlocks();\n\n    // Load medium priority blocks after a delay\n    setTimeout(async () => {\n      const mediumCategories = Array.from(this.categories.values())\n        .filter(cat => cat.priority === 'medium');\n      \n      for (const cat of mediumCategories) {\n        await this.loadCategory(this.getCategoryName(cat));\n      }\n    }, 2000);\n\n    // Load low priority blocks when idle\n    if ('requestIdleCallback' in window) {\n      requestIdleCallback(async () => {\n        const lowCategories = Array.from(this.categories.values())\n          .filter(cat => cat.priority === 'low');\n        \n        for (const cat of lowCategories) {\n          await this.loadCategory(this.getCategoryName(cat));\n        }\n      });\n    }\n  }\n\n  /**\n   * Load specific block on demand\n   */\n  async loadBlock(blockName: string): Promise<any> {\n    if (this.loadedBlocks.has(blockName)) {\n      return this.blockRegistry.get(blockName);\n    }\n\n    // Find category containing this block\n    for (const [categoryName, category] of this.categories) {\n      if (category.blocks.includes(blockName)) {\n        await this.loadCategory(categoryName);\n        return this.blockRegistry.get(blockName);\n      }\n    }\n\n    // Block not found in any category\n    return null;\n  }\n\n  /**\n   * Register a block\n   */\n  private registerBlock(name: string, definition: any): void {\n    this.blockRegistry.set(name, definition);\n    this.loadedBlocks.add(name);\n    \n    // Register with WordPress if available\n    if (window.wp?.blocks?.registerBlockType) {\n      window.wp.blocks.registerBlockType(name, definition);\n    }\n  }\n\n  /**\n   * Get category name for a category object\n   */\n  private getCategoryName(category: BlockCategory): string {\n    for (const [name, cat] of this.categories) {\n      if (cat === category) {\n        return name;\n      }\n    }\n    return '';\n  }\n\n  /**\n   * Get loading statistics\n   */\n  getStats() {\n    const totalBlocks = Array.from(this.categories.values())\n      .reduce((sum, cat) => sum + cat.blocks.length, 0);\n    \n    return {\n      totalBlocks,\n      loadedBlocks: this.loadedBlocks.size,\n      loadedCategories: Array.from(this.categories.values())\n        .filter(cat => cat.loaded).length,\n      totalCategories: this.categories.size\n    };\n  }\n}\n\n// Singleton instance\nlet blockManagerInstance: BlockManager | null = null;\n\nexport function getBlockManager(): BlockManager {\n  if (!blockManagerInstance) {\n    blockManagerInstance = new BlockManager();\n  }\n  return blockManagerInstance;\n}\n\n// Export for use in components\nexport default getBlockManager();","/**\n * Block Icon Mapping System\n * Maps WordPress block names to lucide-react icons\n */\nimport React from 'react';\nimport {\n  Type,\n  Heading1,\n  Heading2,\n  Heading3,\n  Image,\n  List,\n  ListOrdered,\n  Quote,\n  Code,\n  FileText,\n  Video,\n  Music,\n  Columns,\n  Square,\n  Box,\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  AlignJustify,\n  Link,\n  Table,\n  Calendar,\n  Tag,\n  Hash,\n  Search,\n  Archive,\n  Users,\n  MessageSquare,\n  ChevronRight,\n  Layout,\n  Grid3x3,\n  Layers,\n  PanelLeft,\n  PanelRight,\n  PanelTop,\n  PanelBottom,\n  Sparkles,\n  FileImage,\n  Play,\n  Pause,\n  Download,\n  Upload,\n  Share2,\n  Heart,\n  Star,\n  Bookmark,\n  Clock,\n  MapPin,\n  Mail,\n  Phone,\n  Globe,\n  Facebook,\n  Twitter,\n  Instagram,\n  Youtube,\n  Github,\n  Linkedin,\n  Menu,\n  MoreHorizontal,\n  Plus,\n  Minus,\n  X,\n  Check,\n  AlertCircle,\n  Info,\n  HelpCircle,\n  Settings,\n  Edit,\n  Copy,\n  Trash,\n  Move,\n  Eye,\n  EyeOff,\n  Lock,\n  Unlock,\n  User,\n  UserPlus,\n  LogIn,\n  LogOut,\n  Home,\n  File,\n  Folder,\n  FolderOpen,\n  Palette,\n  Brush,\n  PaintBucket,\n  Zap,\n  TrendingUp,\n  BarChart,\n  PieChart,\n  Activity,\n  Map,\n  Navigation,\n  Compass,\n  Flag,\n  Target,\n  Award,\n  Trophy,\n  Gift,\n  ShoppingCart,\n  ShoppingBag,\n  Package,\n  Truck,\n  DollarSign,\n  CreditCard,\n  Wallet,\n  Receipt,\n  Calculator,\n  Briefcase,\n  Building,\n  Cpu,\n  Database,\n  Server,\n  Wifi,\n  Cloud,\n  CloudUpload,\n  CloudDownload,\n  Shield,\n  ShieldCheck,\n  Key,\n  Fingerprint,\n  Camera,\n  Aperture,\n  Mic,\n  Volume,\n  Volume2,\n  VolumeX,\n  Headphones,\n  Speaker,\n  Monitor,\n  Smartphone,\n  Tablet,\n  Laptop,\n  Watch,\n  Printer,\n  Keyboard,\n  Mouse,\n  HardDrive,\n  Save,\n  RefreshCw,\n  RotateCw,\n  Repeat,\n  Shuffle,\n  SkipForward,\n  SkipBack,\n  FastForward,\n  Rewind,\n  ArrowUp,\n  ArrowDown,\n  ArrowLeft,\n  ArrowRight,\n  ChevronUp,\n  ChevronDown,\n  ChevronLeft,\n  ChevronsLeft,\n  ChevronsRight,\n  ChevronsUp,\n  ChevronsDown,\n  CornerUpLeft,\n  CornerUpRight,\n  CornerDownLeft,\n  CornerDownRight,\n  MoveUp,\n  MoveDown,\n  MoveLeft,\n  MoveRight,\n  Maximize,\n  Minimize,\n  Maximize2,\n  Minimize2,\n  Expand,\n  Shrink,\n  ZoomIn,\n  ZoomOut,\n  Command,\n  Option,\n  Shift,\n  Delete,\n  Terminal,\n  Code2,\n  FileCode,\n  FolderCode,\n  GitBranch,\n  GitCommit,\n  GitMerge,\n  GitPullRequest,\n  Binary,\n  Braces,\n  Brackets,\n  FileJson,\n  FileX,\n  FilePlus,\n  FileMinus,\n  FileCheck,\n  TextSelect\n} from 'lucide-react';\n\n// Icon mapping for WordPress core blocks and common blocks\nconst BLOCK_ICONS: Record<string, React.ElementType> = {\n  // Text blocks\n  'core/paragraph': Type,\n  'core/heading': Heading1,\n  'core/list': List,\n  'core/list-item': ChevronRight,\n  'core/quote': Quote,\n  'core/code': Code,\n  'core/preformatted': FileText,\n  'core/pullquote': Quote,\n  'core/verse': FileText,\n  'core/freeform': FileText,\n  'core/html': Code2,\n  'core/more': MoreHorizontal,\n  \n  // Media blocks\n  'core/image': Image,\n  'core/gallery': Grid3x3,\n  'core/audio': Music,\n  'core/video': Video,\n  'core/file': File,\n  'core/media-text': PanelLeft,\n  'core/cover': FileImage,\n  \n  // Layout blocks\n  'core/columns': Columns,\n  'core/column': Square,\n  'core/group': Box,\n  'core/row': PanelLeft,\n  'core/stack': Layers,\n  'core/spacer': MoveDown,\n  'core/separator': Minus,\n  'core/page-break': ChevronsDown,\n  \n  // Widget blocks\n  'core/shortcode': Brackets,\n  'core/archives': Archive,\n  'core/calendar': Calendar,\n  'core/categories': Folder,\n  'core/latest-comments': MessageSquare,\n  'core/latest-posts': FileText,\n  'core/rss': Wifi,\n  'core/search': Search,\n  'core/social-links': Share2,\n  'core/social-link': Link,\n  'core/tag-cloud': Tag,\n  'core/page-list': List,\n  'core/site-logo': Home,\n  'core/site-title': Heading1,\n  'core/site-tagline': Type,\n  'core/query-title': Heading1,\n  'core/post-title': Heading1,\n  'core/post-excerpt': FileText,\n  'core/post-featured-image': Image,\n  'core/post-content': FileText,\n  'core/post-author': User,\n  'core/post-date': Calendar,\n  'core/post-terms': Tag,\n  'core/post-navigation-link': ChevronRight,\n  'core/post-template': Layout,\n  'core/query': Database,\n  'core/query-pagination': ChevronsRight,\n  'core/query-pagination-next': ChevronRight,\n  'core/query-pagination-previous': ChevronLeft,\n  'core/query-pagination-numbers': Hash,\n  'core/query-no-results': AlertCircle,\n  'core/loginout': LogIn,\n  'core/term-description': FileText,\n  'core/avatar': User,\n  'core/post-comments-form': MessageSquare,\n  'core/comment-template': MessageSquare,\n  'core/comment-content': MessageSquare,\n  'core/comment-author-name': User,\n  'core/comment-date': Calendar,\n  'core/comment-edit-link': Edit,\n  'core/comment-reply-link': CornerUpLeft,\n  'core/comments-title': MessageSquare,\n  'core/comments': MessageSquare,\n  'core/comments-pagination': ChevronsRight,\n  'core/comments-pagination-next': ChevronRight,\n  'core/comments-pagination-previous': ChevronLeft,\n  'core/comments-pagination-numbers': Hash,\n  'core/navigation': Menu,\n  'core/navigation-link': Link,\n  'core/navigation-submenu': ChevronDown,\n  'core/home-link': Home,\n  'core/read-more': ChevronRight,\n  \n  // Embed blocks\n  'core/embed': Globe,\n  'core-embed/twitter': Twitter,\n  'core-embed/youtube': Youtube,\n  'core-embed/facebook': Facebook,\n  'core-embed/instagram': Instagram,\n  \n  // Theme blocks\n  'core/template-part': Layout,\n  'core/post-author-name': User,\n  'core/post-author-biography': FileText,\n  'core/footnotes': Hash,\n  \n  // Design blocks\n  'core/button': Square,\n  'core/buttons': Square,\n  'core/table': Table,\n  'core/table-of-contents': List,\n  'core/details': ChevronDown,\n  \n  // Default fallback\n  'default': Plus\n};\n\n// Get icon for a block\nexport function getBlockIcon(blockName: string): React.ElementType {\n  // Direct match\n  if (BLOCK_ICONS[blockName]) {\n    return BLOCK_ICONS[blockName];\n  }\n  \n  // Try to match by suffix (e.g., any/heading -> Heading1)\n  const suffix = blockName.split('/').pop();\n  if (suffix) {\n    // Check common patterns\n    if (suffix.includes('heading')) return Heading1;\n    if (suffix.includes('paragraph')) return Type;\n    if (suffix.includes('text')) return FileText;\n    if (suffix.includes('image')) return Image;\n    if (suffix.includes('video')) return Video;\n    if (suffix.includes('audio')) return Music;\n    if (suffix.includes('list')) return List;\n    if (suffix.includes('quote')) return Quote;\n    if (suffix.includes('code')) return Code;\n    if (suffix.includes('table')) return Table;\n    if (suffix.includes('column')) return Columns;\n    if (suffix.includes('button')) return Square;\n    if (suffix.includes('link')) return Link;\n    if (suffix.includes('embed')) return Globe;\n    if (suffix.includes('gallery')) return Grid3x3;\n    if (suffix.includes('spacer')) return MoveDown;\n    if (suffix.includes('separator')) return Minus;\n    if (suffix.includes('menu')) return Menu;\n    if (suffix.includes('search')) return Search;\n    if (suffix.includes('social')) return Share2;\n    if (suffix.includes('comment')) return MessageSquare;\n    if (suffix.includes('archive')) return Archive;\n    if (suffix.includes('category')) return Folder;\n    if (suffix.includes('tag')) return Tag;\n    if (suffix.includes('user') || suffix.includes('author')) return User;\n    if (suffix.includes('date') || suffix.includes('time')) return Calendar;\n    if (suffix.includes('navigation')) return Menu;\n    if (suffix.includes('template')) return Layout;\n    if (suffix.includes('query')) return Database;\n    if (suffix.includes('group')) return Box;\n    if (suffix.includes('block')) return Square;\n  }\n  \n  // Default icon\n  return BLOCK_ICONS['default'];\n}\n\n// Get icon color based on category\nexport function getBlockIconColor(category: string): string {\n  const colors: Record<string, string> = {\n    'text': 'text-blue-600',\n    'media': 'text-purple-600',\n    'design': 'text-pink-600',\n    'widgets': 'text-green-600',\n    'theme': 'text-orange-600',\n    'embed': 'text-indigo-600',\n    'common': 'text-gray-600',\n    'formatting': 'text-teal-600',\n    'layout': 'text-cyan-600',\n    'reusable': 'text-yellow-600'\n  };\n  \n  return colors[category] || 'text-gray-600';\n}\n\n// Render block icon with proper styling\nexport function renderBlockIcon(\n  blockName: string, \n  category?: string,\n  className?: string,\n  size?: 'sm' | 'md' | 'lg'\n): React.ReactElement {\n  const Icon = getBlockIcon(blockName);\n  const colorClass = category ? getBlockIconColor(category) : 'text-gray-600';\n  \n  const sizeClasses = {\n    'sm': 'h-4 w-4',\n    'md': 'h-6 w-6',\n    'lg': 'h-8 w-8'\n  };\n  \n  const sizeClass = sizeClasses[size || 'md'];\n  \n  return (\n    <Icon className={`${sizeClass} ${colorClass} ${className || ''}`} />\n  );\n}","/**\n * Gutenberg-style Block Inserter\n * WordPress-style grid layout with icons\n */\nimport React, { useState, useMemo, useEffect } from 'react';\nimport '@/styles/gutenberg-inserter.css';\nimport { Input } from '@/components/ui/input';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { \n  Search, \n  X,\n  Plus,\n  Clock,\n  ChevronDown,\n  Sparkles\n} from 'lucide-react';\nimport { getBlockManager } from '@/utils/block-manager';\nimport { renderBlockIcon } from '@/utils/block-icons';\n\ninterface Block {\n  name: string;\n  title: string;\n  description?: string;\n  category: string;\n  icon?: any;\n  keywords?: string[];\n}\n\ninterface Category {\n  slug: string;\n  title: string;\n  icon?: any;\n}\n\ninterface GutenbergBlockInserterProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSelect: (blockName: string) => void;\n}\n\nconst GutenbergBlockInserter: React.FC<GutenbergBlockInserterProps> = ({\n  isOpen,\n  onClose,\n  onSelect\n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n  const [blocks, setBlocks] = useState<Block[]>([]);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [mostUsedBlocks, setMostUsedBlocks] = useState<string[]>([]);\n\n  // Load blocks and categories from WordPress\n  useEffect(() => {\n    if (!isOpen) return;\n\n    const loadData = async () => {\n      // Initialize block manager and load blocks\n      const blockManager = getBlockManager();\n      \n      // Load all block categories progressively\n      await blockManager.loadBlocksProgressive();\n      \n      // Wait a bit for blocks to be registered\n      setTimeout(() => {\n        // Get categories from WordPress\n        const wpCategories = window.wp?.blocks?.getCategories?.() || [];\n        setCategories(wpCategories);\n\n        // Get blocks from WordPress\n        const wpBlocks = window.wp?.blocks?.getBlockTypes?.() || [];\n        setBlocks(wpBlocks.map((block: any) => ({\n          name: block.name,\n          title: block.title || block.name,\n          description: block.description,\n          category: block.category || 'common',\n          icon: block.icon,\n          keywords: block.keywords || []\n        })));\n\n        // Get most used blocks (from localStorage or default)\n        const stored = localStorage.getItem('gutenberg_most_used_blocks');\n        if (stored) {\n          try {\n            setMostUsedBlocks(JSON.parse(stored));\n          } catch {\n            setMostUsedBlocks(['core/paragraph', 'core/heading', 'core/image']);\n          }\n        } else {\n          setMostUsedBlocks(['core/paragraph', 'core/heading', 'core/image']);\n        }\n      }, 100);\n    };\n\n    loadData();\n\n    // Subscribe to block changes\n    const unsubscribe = window.wp?.data?.subscribe?.(loadData);\n    return () => unsubscribe?.();\n  }, [isOpen]);\n\n  // Filter blocks based on search and category\n  const filteredBlocks = useMemo(() => {\n    let result = blocks;\n\n    // Filter by search term\n    if (searchTerm) {\n      const term = searchTerm.toLowerCase();\n      result = result.filter(block =>\n        block.title.toLowerCase().includes(term) ||\n        block.description?.toLowerCase().includes(term) ||\n        block.keywords?.some(k => k.toLowerCase().includes(term))\n      );\n    }\n\n    // Filter by category\n    if (selectedCategory) {\n      result = result.filter(block => block.category === selectedCategory);\n    }\n\n    return result;\n  }, [blocks, searchTerm, selectedCategory]);\n\n  // Group blocks by category\n  const groupedBlocks = useMemo(() => {\n    const groups: Record<string, Block[]> = {};\n    \n    if (searchTerm || selectedCategory) {\n      // When searching or filtering, don't group\n      return { results: filteredBlocks };\n    }\n\n    // Add most used section\n    const mostUsed = blocks.filter(b => mostUsedBlocks.includes(b.name));\n    if (mostUsed.length > 0) {\n      groups['mostUsed'] = mostUsed;\n    }\n\n    // Group by categories\n    categories.forEach(cat => {\n      const catBlocks = blocks.filter(b => b.category === cat.slug);\n      if (catBlocks.length > 0) {\n        groups[cat.slug] = catBlocks;\n      }\n    });\n\n    // Add uncategorized blocks\n    const uncategorized = blocks.filter(\n      b => !categories.some(c => c.slug === b.category)\n    );\n    if (uncategorized.length > 0) {\n      groups['common'] = uncategorized;\n    }\n\n    return groups;\n  }, [blocks, categories, filteredBlocks, searchTerm, selectedCategory, mostUsedBlocks]);\n\n  // Handle block selection\n  const handleBlockSelect = (blockName: string) => {\n    // Update most used blocks\n    const updated = [blockName, ...mostUsedBlocks.filter(b => b !== blockName)].slice(0, 6);\n    setMostUsedBlocks(updated);\n    localStorage.setItem('gutenberg_most_used_blocks', JSON.stringify(updated));\n    \n    // Trigger selection\n    onSelect(blockName);\n  };\n\n  if (!isOpen) return null;\n\n  // Get category title\n  const getCategoryTitle = (slug: string) => {\n    if (slug === 'mostUsed') return 'Most Used';\n    if (slug === 'results') return `${filteredBlocks.length} results`;\n    const category = categories.find(c => c.slug === slug);\n    return category?.title || slug;\n  };\n\n  return (\n    <div className=\"gutenberg-block-inserter fixed inset-y-0 left-0 w-96 bg-white border-r shadow-lg z-50 flex flex-col\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b bg-gray-50\">\n        <h2 className=\"text-base font-semibold text-gray-900\">Add Block</h2>\n        <button\n          onClick={onClose}\n          className=\"p-1.5 hover:bg-gray-200 rounded-md transition-colors\"\n          aria-label=\"Close\"\n        >\n          <X className=\"h-5 w-5 text-gray-600\" />\n        </button>\n      </div>\n\n      {/* Search */}\n      <div className=\"p-4 border-b bg-white\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          <Input\n            type=\"text\"\n            placeholder=\"Search blocks\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10 pr-3 py-2 bg-gray-50 border-gray-200 focus:bg-white\"\n            autoFocus\n          />\n        </div>\n      </div>\n\n      {/* Category tabs */}\n      {!searchTerm && categories.length > 0 && (\n        <div className=\"flex items-center gap-1 px-4 py-2 border-b bg-gray-50 overflow-x-auto\">\n          <button\n            onClick={() => setSelectedCategory(null)}\n            className={`px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors ${\n              !selectedCategory \n                ? 'bg-white text-gray-900 shadow-sm border border-gray-200' \n                : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'\n            }`}\n          >\n            All\n          </button>\n          {categories.map(cat => (\n            <button\n              key={cat.slug}\n              onClick={() => setSelectedCategory(cat.slug)}\n              className={`px-3 py-1.5 text-xs font-medium rounded-md whitespace-nowrap transition-colors ${\n                selectedCategory === cat.slug \n                  ? 'bg-white text-gray-900 shadow-sm border border-gray-200' \n                  : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'\n              }`}\n            >\n              {cat.title}\n            </button>\n          ))}\n        </div>\n      )}\n\n      {/* Blocks Grid */}\n      <ScrollArea className=\"flex-1 bg-gray-50\">\n        <div className=\"p-4\">\n          {Object.entries(groupedBlocks).map(([categorySlug, categoryBlocks]) => (\n            <div key={categorySlug} className=\"mb-6\">\n              {/* Category header */}\n              {!searchTerm && !selectedCategory && (\n                <div className=\"flex items-center gap-2 mb-3\">\n                  {categorySlug === 'mostUsed' && (\n                    <Sparkles className=\"h-4 w-4 text-blue-500\" />\n                  )}\n                  <h3 className=\"text-xs font-semibold uppercase tracking-wider text-gray-500\">\n                    {getCategoryTitle(categorySlug)}\n                  </h3>\n                </div>\n              )}\n\n              {/* WordPress-style Grid Layout */}\n              <div className=\"grid grid-cols-3 gap-1\">\n                {categoryBlocks.map(block => (\n                  <button\n                    key={block.name}\n                    onClick={() => handleBlockSelect(block.name)}\n                    className=\"relative flex flex-col items-center justify-center p-3 h-24 text-center bg-white border border-gray-200 rounded-md hover:bg-blue-50 hover:border-blue-300 hover:shadow-sm transition-all group\"\n                    title={block.description || block.title}\n                  >\n                    {/* Block Icon */}\n                    <div className=\"mb-2 transition-transform group-hover:scale-110\">\n                      {renderBlockIcon(block.name, block.category, '', 'lg')}\n                    </div>\n                    \n                    {/* Block Title */}\n                    <div className=\"text-xs font-medium text-gray-700 group-hover:text-blue-700 line-clamp-2 leading-tight\">\n                      {block.title}\n                    </div>\n                    \n                    {/* Hover indicator */}\n                    <div className=\"absolute inset-0 border-2 border-transparent group-hover:border-blue-400 rounded-md pointer-events-none\" />\n                  </button>\n                ))}\n              </div>\n            </div>\n          ))}\n\n          {/* No results */}\n          {searchTerm && filteredBlocks.length === 0 && (\n            <div className=\"text-center py-12 bg-white rounded-lg\">\n              <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4\">\n                <Search className=\"h-8 w-8 text-gray-400\" />\n              </div>\n              <p className=\"text-gray-600 font-medium\">No blocks found</p>\n              <p className=\"text-sm text-gray-500 mt-1\">Try searching with different keywords</p>\n            </div>\n          )}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n};\n\nexport default GutenbergBlockInserter;","import { forwardRef, HTMLAttributes, createContext, useContext, useState, useEffect, ReactNode, ButtonHTMLAttributes } from 'react';\nimport { X } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface DialogContextValue {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst DialogContext = createContext<DialogContextValue | null>(null);\n\nexport interface DialogProps {\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  children: ReactNode;\n}\n\nconst Dialog = ({ open: controlledOpen, defaultOpen = false, onOpenChange, children }: DialogProps) => {\n  const [uncontrolledOpen, setUncontrolledOpen] = useState(defaultOpen);\n  const open = controlledOpen ?? uncontrolledOpen;\n  \n  const handleOpenChange = (newOpen: boolean) => {\n    if (controlledOpen === undefined) {\n      setUncontrolledOpen(newOpen);\n    }\n    onOpenChange?.(newOpen);\n  };\n\n  return (\n    <DialogContext.Provider value={{ open, onOpenChange: handleOpenChange }}>\n      {children}\n    </DialogContext.Provider>\n  );\n};\n\nconst DialogTrigger = forwardRef<HTMLButtonElement, ButtonHTMLAttributes<HTMLButtonElement>>(\n  ({ onClick, ...props }, ref) => {\n    const context = useContext(DialogContext);\n    if (!context) throw new Error('DialogTrigger must be used within Dialog');\n    \n    return (\n      <button\n        ref={ref}\n        onClick={(e: any) => {\n          onClick?.(e);\n          context.onOpenChange(true);\n        }}\n        {...props}\n      />\n    );\n  }\n);\n\nconst DialogPortal = ({ children }: { children: ReactNode }) => {\n  const context = useContext(DialogContext);\n  if (!context) throw new Error('DialogPortal must be used within Dialog');\n  \n  if (!context.open) return null;\n  \n  return (\n    <>\n      {children}\n    </>\n  );\n};\n\nconst DialogClose = forwardRef<HTMLButtonElement, ButtonHTMLAttributes<HTMLButtonElement>>(\n  ({ onClick, ...props }, ref) => {\n    const context = useContext(DialogContext);\n    if (!context) throw new Error('DialogClose must be used within Dialog');\n    \n    return (\n      <button\n        ref={ref}\n        onClick={(e: any) => {\n          onClick?.(e);\n          context.onOpenChange(false);\n        }}\n        {...props}\n      />\n    );\n  }\n);\n\nconst DialogOverlay = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(\n  ({ className, onClick, ...props }, ref) => {\n    const context = useContext(DialogContext);\n    if (!context) throw new Error('DialogOverlay must be used within Dialog');\n    \n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"fixed inset-0 z-[100000] bg-black/80\",\n          className\n        )}\n        onClick={(e: any) => {\n          onClick?.(e);\n          if (e.target === e.currentTarget) {\n            context.onOpenChange(false);\n          }\n        }}\n        {...props}\n      />\n    );\n  }\n);\n\nconst DialogContent = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(\n  ({ className, children, ...props }, ref) => {\n    const context = useContext(DialogContext);\n    if (!context) throw new Error('DialogContent must be used within Dialog');\n    \n    useEffect(() => {\n      if (context.open) {\n        const handleEscape = (e: KeyboardEvent) => {\n          if (e.key === 'Escape') {\n            context.onOpenChange(false);\n          }\n        };\n        document.addEventListener('keydown', handleEscape);\n        return () => document.removeEventListener('keydown', handleEscape);\n      }\n    }, [context]);\n    \n    return (\n      <DialogPortal>\n        <DialogOverlay />\n        <div\n          ref={ref}\n          className={cn(\n            \"fixed left-[50%] top-[50%] z-[100001] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n          <DialogClose className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none\">\n            <X className=\"h-4 w-4\" />\n            <span className=\"sr-only\">Close</span>\n          </DialogClose>\n        </div>\n      </DialogPortal>\n    );\n  }\n);\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n);\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n);\n\nconst DialogTitle = forwardRef<HTMLHeadingElement, HTMLAttributes<HTMLHeadingElement>>(\n  ({ className, ...props }, ref) => (\n    <h2\n      ref={ref}\n      className={cn(\n        \"text-lg font-semibold leading-none tracking-tight\",\n        className\n      )}\n      {...props}\n    />\n  )\n);\n\nconst DialogDescription = forwardRef<HTMLParagraphElement, HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => (\n    <p\n      ref={ref}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n);\n\nDialog.displayName = 'Dialog';\nDialogTrigger.displayName = 'DialogTrigger';\nDialogPortal.displayName = 'DialogPortal';\nDialogClose.displayName = 'DialogClose';\nDialogOverlay.displayName = 'DialogOverlay';\nDialogContent.displayName = 'DialogContent';\nDialogHeader.displayName = 'DialogHeader';\nDialogFooter.displayName = 'DialogFooter';\nDialogTitle.displayName = 'DialogTitle';\nDialogDescription.displayName = 'DialogDescription';\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};","/**\n * DesignLibraryModal Component - Improved Version\n * Modern and professional template gallery with enhanced UI/UX\n */\n\nimport React, { useState, useMemo } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog';\nimport { Badge } from '@/components/ui/badge';\nimport { cn } from '@/lib/utils';\nimport { \n  X, \n  Eye, \n  ChevronLeft, \n  Sparkles, \n  Layout, \n  FileText, \n  Briefcase, \n  PenTool,\n  Grid3x3,\n  Star,\n  TrendingUp,\n  Clock,\n  Check,\n  Search\n} from 'lucide-react';\nimport { Block } from '@/types/post.types';\n\ninterface TemplateCategory {\n  id: string;\n  name: string;\n  icon: React.ReactNode;\n  description: string;\n  color: string;\n  templates: Template[];\n}\n\ninterface Template {\n  id: string;\n  name: string;\n  category: string;\n  thumbnail: string;\n  description: string;\n  blocks: Block[];\n  tags: string[];\n  isPremium?: boolean;\n  isNew?: boolean;\n  popularity?: number;\n  estimatedTime?: string;\n}\n\ninterface DesignLibraryModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onApplyTemplate: (blocks: Block[]) => void;\n}\n\nconst templateCategories: TemplateCategory[] = [\n  {\n    id: 'basic',\n    name: '기본 템플릿',\n    icon: <Layout className=\"w-4 h-4\" />,\n    description: '간단하고 깔끔한 기본 레이아웃',\n    color: 'from-blue-500 to-blue-600',\n    templates: [\n      {\n        id: 'simple-article',\n        name: '간단한 글',\n        category: 'basic',\n        thumbnail: '/templates/simple-article.png',\n        description: '기본적인 텍스트 위주의 글 템플릿',\n        tags: ['텍스트', '간단함', '기본'],\n        estimatedTime: '5분',\n        popularity: 4.5,\n        blocks: [\n          {\n            id: 'block-1',\n            type: 'core/paragraph',\n            content: { text: '여기에 글의 도입부를 작성하세요. 독자의 관심을 끌 수 있는 내용으로 시작하는 것이 좋습니다.' },\n            attributes: { align: 'left' },\n          },\n          {\n            id: 'block-2',\n            type: 'core/heading',\n            content: { text: '주요 내용', level: 2 },\n            attributes: { level: 2 },\n          },\n          {\n            id: 'block-3',\n            type: 'core/paragraph',\n            content: { text: '본문의 핵심 내용을 여기에 작성하세요. 구체적인 정보와 예시를 포함하면 더욱 효과적입니다.' },\n            attributes: { align: 'left' },\n          },\n        ],\n      },\n      {\n        id: 'newsletter',\n        name: '뉴스레터',\n        category: 'basic',\n        thumbnail: '/templates/newsletter.png',\n        description: '이메일 뉴스레터를 위한 깔끔한 템플릿',\n        tags: ['이메일', '뉴스레터', '구독'],\n        isNew: true,\n        estimatedTime: '10분',\n        popularity: 4.8,\n        blocks: [\n          {\n            id: 'block-1',\n            type: 'core/heading',\n            content: { text: '이번 주 주요 소식', level: 1 },\n            attributes: { level: 1, align: 'center' },\n          },\n          {\n            id: 'block-2',\n            type: 'core/paragraph',\n            content: { text: '구독자 여러분, 안녕하세요! 이번 주 가장 중요한 소식을 모아서 전해드립니다.' },\n            attributes: { align: 'center' },\n          },\n        ],\n      },\n    ],\n  },\n  {\n    id: 'landing',\n    name: '랜딩 페이지',\n    icon: <TrendingUp className=\"w-4 h-4\" />,\n    description: '전환율 높은 랜딩 페이지 템플릿',\n    color: 'from-purple-500 to-pink-500',\n    templates: [\n      {\n        id: 'hero-landing',\n        name: '히어로 섹션',\n        category: 'landing',\n        thumbnail: '/templates/hero-landing.png',\n        description: '강력한 첫인상을 위한 히어로 섹션 템플릿',\n        tags: ['히어로', '랜딩', '마케팅'],\n        isPremium: true,\n        estimatedTime: '15분',\n        popularity: 4.9,\n        blocks: [\n          {\n            id: 'block-1',\n            type: 'core/heading',\n            content: { text: '당신의 비즈니스를 성공으로 이끌어드립니다', level: 1 },\n            attributes: { level: 1, align: 'center' },\n          },\n          {\n            id: 'block-2',\n            type: 'core/paragraph',\n            content: { text: '전문적인 솔루션으로 더 나은 결과를 만들어보세요. 지금 바로 시작하세요!' },\n            attributes: { align: 'center' },\n          },\n          {\n            id: 'block-3',\n            type: 'core/button',\n            content: { text: '무료로 시작하기' },\n            attributes: { align: 'center' },\n          },\n        ],\n      },\n    ],\n  },\n  {\n    id: 'service',\n    name: '서비스 소개',\n    icon: <Briefcase className=\"w-4 h-4\" />,\n    description: '서비스와 제품을 효과적으로 소개',\n    color: 'from-green-500 to-teal-500',\n    templates: [\n      {\n        id: 'service-overview',\n        name: '서비스 개요',\n        category: 'service',\n        thumbnail: '/templates/service-overview.png',\n        description: '서비스나 제품을 소개하는 구조화된 템플릿',\n        tags: ['서비스', '제품', '소개'],\n        estimatedTime: '20분',\n        popularity: 4.7,\n        blocks: [\n          {\n            id: 'block-1',\n            type: 'core/heading',\n            content: { text: '우리의 서비스', level: 1 },\n            attributes: { level: 1, align: 'center' },\n          },\n          {\n            id: 'block-2',\n            type: 'core/paragraph',\n            content: { text: '고객의 니즈에 맞춘 전문적인 서비스를 제공합니다.' },\n            attributes: { align: 'center' },\n          },\n        ],\n      },\n    ],\n  },\n  {\n    id: 'portfolio',\n    name: '포트폴리오',\n    icon: <Grid3x3 className=\"w-4 h-4\" />,\n    description: '작품과 프로젝트를 돋보이게 전시',\n    color: 'from-orange-500 to-red-500',\n    templates: [\n      {\n        id: 'project-showcase',\n        name: '프로젝트 쇼케이스',\n        category: 'portfolio',\n        thumbnail: '/templates/project-showcase.png',\n        description: '작업물이나 프로젝트를 효과적으로 보여주는 템플릿',\n        tags: ['포트폴리오', '프로젝트', '쇼케이스'],\n        isNew: true,\n        estimatedTime: '25분',\n        popularity: 4.6,\n        blocks: [\n          {\n            id: 'block-1',\n            type: 'core/heading',\n            content: { text: '프로젝트 소개', level: 1 },\n            attributes: { level: 1, align: 'center' },\n          },\n        ],\n      },\n    ],\n  },\n  {\n    id: 'blog',\n    name: '블로그',\n    icon: <PenTool className=\"w-4 h-4\" />,\n    description: '매력적인 블로그 포스트 레이아웃',\n    color: 'from-indigo-500 to-blue-500',\n    templates: [\n      {\n        id: 'blog-post',\n        name: '블로그 포스트',\n        category: 'blog',\n        thumbnail: '/templates/blog-post.png',\n        description: '읽기 좋은 블로그 글을 위한 구조화된 템플릿',\n        tags: ['블로그', '글쓰기', '구조'],\n        estimatedTime: '30분',\n        popularity: 4.8,\n        blocks: [\n          {\n            id: 'block-1',\n            type: 'core/paragraph',\n            content: { text: '오늘은 여러분과 함께 흥미로운 주제에 대해 이야기해보려고 합니다.' },\n            attributes: { align: 'left' },\n          },\n        ],\n      },\n    ],\n  },\n];\n\nexport const DesignLibraryModal: React.FC<DesignLibraryModalProps> = ({\n  isOpen,\n  onClose,\n  onApplyTemplate,\n}) => {\n  const [selectedCategory, setSelectedCategory] = useState<string>('basic');\n  const [selectedTemplate, setSelectedTemplate] = useState<Template | null>(null);\n  const [previewMode, setPreviewMode] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [showOnlyNew, setShowOnlyNew] = useState(false);\n  const [showOnlyPremium, setShowOnlyPremium] = useState(false);\n\n  const currentCategory = templateCategories.find(cat => cat.id === selectedCategory);\n  \n  // Filter templates based on search and filters\n  const filteredTemplates = useMemo(() => {\n    let templates = currentCategory?.templates || [];\n    \n    if (searchQuery) {\n      templates = templates.filter(t => \n        t.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        t.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        t.tags.some(tag => tag.toLowerCase().includes(searchQuery.toLowerCase()))\n      );\n    }\n    \n    if (showOnlyNew) {\n      templates = templates.filter(t => t.isNew);\n    }\n    \n    if (showOnlyPremium) {\n      templates = templates.filter(t => t.isPremium);\n    }\n    \n    return templates;\n  }, [currentCategory, searchQuery, showOnlyNew, showOnlyPremium]);\n\n  const handleApplyTemplate = (template: Template) => {\n    const blocksWithNewIds = template.blocks.map(block => ({\n      ...block,\n      id: `block-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n    }));\n    \n    onApplyTemplate(blocksWithNewIds);\n    onClose();\n  };\n\n  const handlePreview = (template: Template) => {\n    setSelectedTemplate(template);\n    setPreviewMode(true);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-7xl h-[90vh] p-0 overflow-hidden\">\n        <div className=\"flex h-full bg-white\">\n          {/* Enhanced Sidebar */}\n          <div className=\"w-72 bg-gradient-to-b from-gray-50 to-white border-r flex flex-col\">\n            <DialogHeader className=\"p-6 border-b bg-white\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl\">\n                  <Sparkles className=\"w-5 h-5 text-white\" />\n                </div>\n                <div>\n                  <DialogTitle className=\"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\n                    디자인 라이브러리\n                  </DialogTitle>\n                  <p className=\"text-xs text-gray-500 mt-0.5\">프로페셔널 템플릿 컬렉션</p>\n                </div>\n              </div>\n            </DialogHeader>\n            \n            <div className=\"flex-1 overflow-y-auto\">\n              {/* Search Bar */}\n              <div className=\"p-4 border-b bg-white/50\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                  <input\n                    type=\"text\"\n                    placeholder=\"템플릿 검색...\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                    className=\"w-full pl-9 pr-3 py-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n\n              {/* Quick Filters */}\n              <div className=\"p-4 space-y-2 border-b\">\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={showOnlyNew}\n                    onChange={(e) => setShowOnlyNew(e.target.checked)}\n                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-600\">새로운 템플릿만</span>\n                  <Badge className=\"bg-green-100 text-green-700 text-xs\">NEW</Badge>\n                </label>\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={showOnlyPremium}\n                    onChange={(e) => setShowOnlyPremium(e.target.checked)}\n                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-600\">프리미엄</span>\n                  <Badge className=\"bg-gradient-to-r from-yellow-400 to-orange-400 text-white text-xs\">\n                    PRO\n                  </Badge>\n                </label>\n              </div>\n\n              {/* Categories */}\n              <div className=\"p-4\">\n                <h3 className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3\">\n                  카테고리\n                </h3>\n                <nav className=\"space-y-1\">\n                  {templateCategories.map((category) => (\n                    <button\n                      key={category.id}\n                      onClick={() => {\n                        setSelectedCategory(category.id);\n                        setPreviewMode(false);\n                        setSearchQuery('');\n                      }}\n                      className={cn(\n                        'w-full text-left px-4 py-3 rounded-xl transition-all duration-200 group',\n                        selectedCategory === category.id\n                          ? 'bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 shadow-sm'\n                          : 'hover:bg-gray-50'\n                      )}\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className={cn(\n                            'p-2 rounded-lg bg-gradient-to-br',\n                            selectedCategory === category.id \n                              ? category.color\n                              : 'from-gray-200 to-gray-300 group-hover:' + category.color,\n                            'transition-all duration-200'\n                          )}>\n                            <div className={cn(\n                              selectedCategory === category.id ? 'text-white' : 'text-gray-600 group-hover:text-white'\n                            )}>\n                              {category.icon}\n                            </div>\n                          </div>\n                          <div>\n                            <div className={cn(\n                              'font-medium text-sm',\n                              selectedCategory === category.id \n                                ? 'text-gray-900' \n                                : 'text-gray-700'\n                            )}>\n                              {category.name}\n                            </div>\n                            <div className=\"text-xs text-gray-500 mt-0.5\">\n                              {category.templates.length}개 템플릿\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </button>\n                  ))}\n                </nav>\n              </div>\n            </div>\n\n            {/* Sidebar Footer */}\n            <div className=\"p-4 border-t bg-gradient-to-r from-blue-50 to-purple-50\">\n              <div className=\"text-xs text-gray-600\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <Star className=\"w-3 h-3 text-yellow-500\" />\n                  <span className=\"font-medium\">팁:</span>\n                </div>\n                <p>템플릿을 선택한 후 자유롭게 수정할 수 있습니다.</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Main Content Area */}\n          <div className=\"flex-1 flex flex-col bg-gray-50\">\n            {!previewMode ? (\n              <>\n                {/* Enhanced Header */}\n                <div className=\"bg-white border-b shadow-sm\">\n                  <div className=\"px-8 py-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <div className={cn(\n                            'p-2 rounded-lg bg-gradient-to-br',\n                            currentCategory?.color\n                          )}>\n                            <div className=\"text-white\">\n                              {currentCategory?.icon}\n                            </div>\n                          </div>\n                          <h2 className=\"text-2xl font-bold text-gray-900\">\n                            {currentCategory?.name}\n                          </h2>\n                        </div>\n                        <p className=\"text-gray-600\">\n                          {currentCategory?.description}\n                        </p>\n                      </div>\n                      <Button \n                        variant=\"ghost\" \n                        size=\"icon\" \n                        onClick={onClose}\n                        className=\"hover:bg-gray-100 rounded-full\"\n                      >\n                        <X className=\"h-5 w-5\" />\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Enhanced Templates Grid */}\n                <div className=\"flex-1 overflow-y-auto px-8 py-6\">\n                  {filteredTemplates.length === 0 ? (\n                    <div className=\"flex flex-col items-center justify-center h-full text-center\">\n                      <div className=\"p-4 bg-gray-100 rounded-full mb-4\">\n                        <Search className=\"w-8 h-8 text-gray-400\" />\n                      </div>\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                        템플릿을 찾을 수 없습니다\n                      </h3>\n                      <p className=\"text-gray-500 max-w-sm\">\n                        다른 검색어를 시도하거나 필터를 변경해보세요.\n                      </p>\n                    </div>\n                  ) : (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                      {filteredTemplates.map((template) => (\n                        <div\n                          key={template.id}\n                          className=\"group bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1\"\n                        >\n                          {/* Enhanced Thumbnail */}\n                          <div className=\"aspect-[4/3] bg-gradient-to-br from-gray-100 to-gray-50 relative overflow-hidden\">\n                            {/* Template Preview Placeholder */}\n                            <div className=\"absolute inset-0 p-6\">\n                              <div className=\"h-full w-full bg-white rounded-lg shadow-inner p-4 flex flex-col items-center justify-center\">\n                                <FileText className=\"w-12 h-12 text-gray-300 mb-3\" />\n                                <div className=\"w-full space-y-2\">\n                                  <div className=\"h-2 bg-gray-200 rounded w-3/4 mx-auto\"></div>\n                                  <div className=\"h-2 bg-gray-200 rounded w-full\"></div>\n                                  <div className=\"h-2 bg-gray-200 rounded w-5/6 mx-auto\"></div>\n                                </div>\n                              </div>\n                            </div>\n\n                            {/* Badges */}\n                            <div className=\"absolute top-4 left-4 flex gap-2\">\n                              {template.isNew && (\n                                <Badge className=\"bg-green-500 text-white border-0 shadow-lg\">\n                                  NEW\n                                </Badge>\n                              )}\n                              {template.isPremium && (\n                                <Badge className=\"bg-gradient-to-r from-yellow-400 to-orange-400 text-white border-0 shadow-lg\">\n                                  PRO\n                                </Badge>\n                              )}\n                            </div>\n                            \n                            {/* Enhanced Hover Actions */}\n                            <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-end justify-center pb-6\">\n                              <div className=\"flex gap-3\">\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"secondary\"\n                                  onClick={() => handlePreview(template)}\n                                  className=\"bg-white/95 backdrop-blur text-gray-900 hover:bg-white shadow-lg\"\n                                >\n                                  <Eye className=\"h-4 w-4 mr-2\" />\n                                  미리보기\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  onClick={() => handleApplyTemplate(template)}\n                                  className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700 shadow-lg\"\n                                >\n                                  <Check className=\"h-4 w-4 mr-2\" />\n                                  적용하기\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Enhanced Info Section */}\n                          <div className=\"p-5\">\n                            <div className=\"flex items-start justify-between mb-3\">\n                              <div>\n                                <h3 className=\"font-semibold text-gray-900 text-lg mb-1\">\n                                  {template.name}\n                                </h3>\n                                <p className=\"text-sm text-gray-600 line-clamp-2\">\n                                  {template.description}\n                                </p>\n                              </div>\n                            </div>\n\n                            {/* Metadata */}\n                            <div className=\"flex items-center gap-4 text-xs text-gray-500 mb-3\">\n                              {template.estimatedTime && (\n                                <div className=\"flex items-center gap-1\">\n                                  <Clock className=\"w-3 h-3\" />\n                                  <span>{template.estimatedTime}</span>\n                                </div>\n                              )}\n                              {template.popularity && (\n                                <div className=\"flex items-center gap-1\">\n                                  <Star className=\"w-3 h-3 text-yellow-500 fill-current\" />\n                                  <span>{template.popularity}</span>\n                                </div>\n                              )}\n                            </div>\n\n                            {/* Tags */}\n                            <div className=\"flex flex-wrap gap-2\">\n                              {template.tags.map((tag) => (\n                                <Badge \n                                  key={tag} \n                                  variant=\"secondary\" \n                                  className=\"text-xs bg-gray-100 text-gray-600 hover:bg-gray-200\"\n                                >\n                                  {tag}\n                                </Badge>\n                              ))}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </>\n            ) : (\n              selectedTemplate && (\n                <>\n                  {/* Enhanced Preview Header */}\n                  <div className=\"bg-white border-b shadow-sm\">\n                    <div className=\"px-8 py-5\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-4\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={() => setPreviewMode(false)}\n                            className=\"hover:bg-gray-100 rounded-full\"\n                          >\n                            <ChevronLeft className=\"h-5 w-5\" />\n                          </Button>\n                          <div>\n                            <div className=\"flex items-center gap-3 mb-1\">\n                              <h2 className=\"text-xl font-bold text-gray-900\">\n                                {selectedTemplate.name}\n                              </h2>\n                              {selectedTemplate.isNew && (\n                                <Badge className=\"bg-green-500 text-white\">NEW</Badge>\n                              )}\n                              {selectedTemplate.isPremium && (\n                                <Badge className=\"bg-gradient-to-r from-yellow-400 to-orange-400 text-white\">\n                                  PRO\n                                </Badge>\n                              )}\n                            </div>\n                            <p className=\"text-sm text-gray-600\">\n                              {selectedTemplate.description}\n                            </p>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                          <Button\n                            variant=\"outline\"\n                            onClick={() => setPreviewMode(false)}\n                          >\n                            다른 템플릿 보기\n                          </Button>\n                          <Button\n                            onClick={() => handleApplyTemplate(selectedTemplate)}\n                            className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700\"\n                          >\n                            <Check className=\"h-4 w-4 mr-2\" />\n                            이 템플릿 적용하기\n                          </Button>\n                          <Button \n                            variant=\"ghost\" \n                            size=\"icon\" \n                            onClick={onClose}\n                            className=\"hover:bg-gray-100 rounded-full\"\n                          >\n                            <X className=\"h-5 w-5\" />\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Enhanced Preview Content */}\n                  <div className=\"flex-1 overflow-y-auto bg-gradient-to-b from-gray-50 to-white p-8\">\n                    <div className=\"max-w-4xl mx-auto\">\n                      <div className=\"bg-white rounded-2xl shadow-lg p-12\">\n                        <div className=\"prose prose-lg max-w-none\">\n                          <div className=\"space-y-6\">\n                            {selectedTemplate.blocks.map((block, index) => (\n                              <div key={`preview-${index}`} className=\"block-preview\">\n                                {block.type === 'core/heading' && (\n                                  <div\n                                    className={cn(\n                                      'font-bold text-gray-900',\n                                      block.content?.level === 1 && 'text-4xl mb-6',\n                                      block.content?.level === 2 && 'text-3xl mb-4 mt-8',\n                                      block.content?.level === 3 && 'text-2xl mb-3 mt-6',\n                                      block.attributes?.align === 'center' && 'text-center',\n                                      block.attributes?.align === 'right' && 'text-right'\n                                    )}\n                                  >\n                                    {block.content?.text}\n                                  </div>\n                                )}\n                                {block.type === 'core/paragraph' && (\n                                  <p\n                                    className={cn(\n                                      'text-gray-700 leading-relaxed text-lg',\n                                      block.attributes?.align === 'center' && 'text-center',\n                                      block.attributes?.align === 'right' && 'text-right'\n                                    )}\n                                  >\n                                    {block.content?.text}\n                                  </p>\n                                )}\n                                {block.type === 'core/list' && (\n                                  <div className=\"ml-4\">\n                                    {block.content?.style === 'ordered' ? (\n                                      <ol className=\"list-decimal space-y-2 text-gray-700\">\n                                        {(block.content?.items as string[])?.map((item, i) => (\n                                          <li key={i} className=\"pl-2\">{item}</li>\n                                        ))}\n                                      </ol>\n                                    ) : (\n                                      <ul className=\"list-disc space-y-2 text-gray-700\">\n                                        {(block.content?.items as string[])?.map((item, i) => (\n                                          <li key={i} className=\"pl-2\">{item}</li>\n                                        ))}\n                                      </ul>\n                                    )}\n                                  </div>\n                                )}\n                                {block.type === 'core/button' && (\n                                  <div className={cn(\n                                    'flex my-6',\n                                    block.attributes?.align === 'center' && 'justify-center',\n                                    block.attributes?.align === 'right' && 'justify-end'\n                                  )}>\n                                    <button className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\">\n                                      {block.content?.text}\n                                    </button>\n                                  </div>\n                                )}\n                              </div>\n                            ))}\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </>\n              )\n            )}\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default DesignLibraryModal;","import { HTMLAttributes } from 'react';\nimport { forwardRef } from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = forwardRef<\n  HTMLDivElement,\n  HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = forwardRef<\n  HTMLParagraphElement,\n  HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = forwardRef<\n  HTMLParagraphElement,\n  HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }","import { forwardRef, HTMLAttributes } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface ProgressProps extends HTMLAttributes<HTMLDivElement> {\n  value?: number;\n  max?: number;\n}\n\nconst Progress = forwardRef<HTMLDivElement, ProgressProps>(\n  ({ className, value = 0, max = 100, ...props }, ref) => {\n    const percentage = Math.min(Math.max(0, (value / max) * 100), 100);\n    \n    return (\n      <div\n        ref={ref}\n        role=\"progressbar\"\n        aria-valuemin={0}\n        aria-valuemax={max}\n        aria-valuenow={value}\n        className={cn(\n          \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          className=\"h-full w-full flex-1 bg-primary transition-all\"\n          style={{ transform: `translateX(-${100 - percentage}%)` }}\n        />\n      </div>\n    );\n  }\n);\n\nProgress.displayName = 'Progress';\n\nexport { Progress };","/**\n * Shortcode Integrator for AI Page Generation\n * AI 페이지 생성에서 shortcode 정보를 가져오고 통합하는 서비스\n */\n\nimport { authClient } from '@o4o/auth-client';\n\nexport interface ShortcodeInfo {\n  name: string;\n  usage: string;\n  description: string;\n  parameters: string;\n  examples: string[];\n  category: string;\n  tags: string[];\n  aiPrompts: string[];\n}\n\nexport interface ShortcodeCategory {\n  name: string;\n  description: string;\n  icon?: string;\n  priority: number;\n}\n\nexport interface ShortcodeRegistryResponse {\n  total: number;\n  categories: ShortcodeCategory[];\n  shortcodes: ShortcodeInfo[];\n  lastUpdated: string;\n}\n\nclass ShortcodeIntegratorService {\n  private static instance: ShortcodeIntegratorService;\n  private shortcodeCache: ShortcodeInfo[] = [];\n  private categories: ShortcodeCategory[] = [];\n  private cacheExpiry: Date | null = null;\n  private readonly CACHE_DURATION = 5 * 60 * 1000; // 5분\n\n  private constructor() {}\n\n  static getInstance(): ShortcodeIntegratorService {\n    if (!ShortcodeIntegratorService.instance) {\n      ShortcodeIntegratorService.instance = new ShortcodeIntegratorService();\n    }\n    return ShortcodeIntegratorService.instance;\n  }\n\n  /**\n   * shortcode 데이터 로드 (캐싱 지원)\n   */\n  async loadShortcodes(forceRefresh = false): Promise<ShortcodeInfo[]> {\n    // 캐시 유효성 체크\n    if (!forceRefresh && \n        this.shortcodeCache.length > 0 && \n        this.cacheExpiry && \n        new Date() < this.cacheExpiry) {\n      return this.shortcodeCache;\n    }\n\n    try {\n      const response = await authClient.api.get<{\n        success: boolean;\n        data: ShortcodeRegistryResponse;\n      }>('/api/ai/shortcodes/reference');\n\n      if (response.data.success) {\n        this.shortcodeCache = response.data.data.shortcodes;\n        this.categories = response.data.data.categories;\n        this.cacheExpiry = new Date(Date.now() + this.CACHE_DURATION);\n        \n        return this.shortcodeCache;\n      } else {\n        throw new Error('Failed to load shortcodes');\n      }\n    } catch (error) {\n      // 캐시된 데이터가 있으면 사용\n      if (this.shortcodeCache.length > 0) {\n        return this.shortcodeCache;\n      }\n      \n      // 기본 shortcode 반환\n      return this.getDefaultShortcodes();\n    }\n  }\n\n  /**\n   * AI 프롬프트 생성 (향상된 버전)\n   */\n  async buildEnhancedAIPrompt(userRequest: string, options: {\n    includeCategories?: string[];\n    maxShortcodes?: number;\n    includeExamples?: boolean;\n    includeUsageHints?: boolean;\n  } = {}): Promise<string> {\n    const {\n      includeCategories,\n      maxShortcodes = 20,\n      includeExamples = true,\n      includeUsageHints = true\n    } = options;\n\n    await this.loadShortcodes();\n\n    let filteredShortcodes = this.shortcodeCache;\n\n    // 카테고리 필터링\n    if (includeCategories && includeCategories.length > 0) {\n      filteredShortcodes = filteredShortcodes.filter(sc =>\n        includeCategories.includes(sc.category)\n      );\n    }\n\n    // 개수 제한\n    filteredShortcodes = filteredShortcodes.slice(0, maxShortcodes);\n\n    // shortcode 목록 포맷팅\n    const shortcodeList = filteredShortcodes.map(sc => {\n      let entry = `- **[${sc.name}]**: ${sc.description}`;\n      \n      if (sc.parameters) {\n        entry += `\\n  Parameters: ${sc.parameters}`;\n      }\n      \n      if (includeExamples && sc.examples.length > 0) {\n        entry += `\\n  Example: ${sc.examples[0]}`;\n      }\n      \n      if (includeUsageHints && sc.aiPrompts.length > 0) {\n        entry += `\\n  Use when: ${sc.aiPrompts[0]}`;\n      }\n      \n      if (sc.tags.length > 0) {\n        entry += `\\n  Tags: ${sc.tags.join(', ')}`;\n      }\n      \n      return entry;\n    }).join('\\n\\n');\n\n    // 카테고리 정보\n    const availableCategories = this.categories\n      .filter(cat => filteredShortcodes.some(sc => sc.category === cat.name))\n      .map(cat => `- ${cat.name}: ${cat.description}`)\n      .join('\\n');\n\n    return `# Available Shortcodes\n\n## Categories Available:\n${availableCategories}\n\n## Shortcodes (${filteredShortcodes.length} available):\n\n${shortcodeList}\n\n---\n\n## User Request: \n\"${userRequest}\"\n\n## Instructions:\n1. **Analyze the user request** carefully to understand what they want to create\n2. **Select appropriate shortcodes** from the list above that best match their needs\n3. **Use shortcode parameters** when needed to customize the output\n4. **Create a complete page structure** using HTML elements and shortcodes\n5. **Consider user experience** - make the page intuitive and well-organized\n6. **Only use shortcodes** from the list above - do not invent new ones\n7. **Include proper HTML structure** with headers, sections, and semantic elements\n8. **Add explanatory text** where it makes sense for context\n\n## Output Format:\nProvide a complete HTML page structure with embedded shortcodes that fulfills the user's request.`;\n  }\n\n  /**\n   * 간단한 AI 프롬프트 생성 (기존 호환성 유지)\n   */\n  async buildAIPrompt(userRequest: string): Promise<string> {\n    return this.buildEnhancedAIPrompt(userRequest, {\n      maxShortcodes: 15,\n      includeExamples: true,\n      includeUsageHints: true\n    });\n  }\n\n  /**\n   * 카테고리별 shortcode 가져오기\n   */\n  async getShortcodesByCategory(category: string): Promise<ShortcodeInfo[]> {\n    await this.loadShortcodes();\n    return this.shortcodeCache.filter(sc => sc.category === category);\n  }\n\n  /**\n   * shortcode 검색\n   */\n  async searchShortcodes(query: string): Promise<ShortcodeInfo[]> {\n    await this.loadShortcodes();\n    const lowercaseQuery = query.toLowerCase();\n    \n    return this.shortcodeCache.filter(sc =>\n      sc.name.toLowerCase().includes(lowercaseQuery) ||\n      sc.description.toLowerCase().includes(lowercaseQuery) ||\n      sc.tags.some(tag => tag.toLowerCase().includes(lowercaseQuery)) ||\n      sc.aiPrompts.some(prompt => prompt.toLowerCase().includes(lowercaseQuery))\n    );\n  }\n\n  /**\n   * 사용 가능한 카테고리 목록\n   */\n  async getAvailableCategories(): Promise<ShortcodeCategory[]> {\n    await this.loadShortcodes();\n    return this.categories;\n  }\n\n  /**\n   * shortcode 통계\n   */\n  async getShortcodeStats() {\n    await this.loadShortcodes();\n    \n    const categoryStats = this.categories.map(cat => ({\n      category: cat.name,\n      count: this.shortcodeCache.filter(sc => sc.category === cat.name).length\n    }));\n\n    return {\n      total: this.shortcodeCache.length,\n      categories: this.categories.length,\n      categoryStats,\n      lastLoaded: this.cacheExpiry?.toISOString() || null\n    };\n  }\n\n  /**\n   * 캐시 무효화\n   */\n  invalidateCache(): void {\n    this.shortcodeCache = [];\n    this.categories = [];\n    this.cacheExpiry = null;\n  }\n\n  /**\n   * 기본 shortcode (API 연결 실패 시 사용)\n   */\n  private getDefaultShortcodes(): ShortcodeInfo[] {\n    return [\n      {\n        name: 'products',\n        usage: '[products]',\n        description: '상품 목록을 표시합니다',\n        parameters: 'limit: 표시할 상품 수, category: 카테고리, featured: 추천 상품만',\n        examples: ['[products limit=\"6\"]'],\n        category: 'ecommerce',\n        tags: ['상품', '쇼핑'],\n        aiPrompts: ['상품을 보여주고 싶을 때']\n      },\n      {\n        name: 'contact-form',\n        usage: '[contact-form]',\n        description: '연락처 폼을 표시합니다',\n        parameters: 'email: 수신 이메일 (필수), title: 폼 제목',\n        examples: ['[contact-form email=\"contact@example.com\"]'],\n        category: 'forms',\n        tags: ['폼', '연락처'],\n        aiPrompts: ['연락처 폼이 필요할 때']\n      },\n      {\n        name: 'recent-posts',\n        usage: '[recent-posts]',\n        description: '최근 게시물을 표시합니다',\n        parameters: 'limit: 게시물 수, category: 카테고리',\n        examples: ['[recent-posts limit=\"5\"]'],\n        category: 'content',\n        tags: ['게시물', '블로그'],\n        aiPrompts: ['최신 글을 보여주고 싶을 때']\n      }\n    ];\n  }\n}\n\nexport const shortcodeIntegrator = ShortcodeIntegratorService.getInstance();","import { v4 as uuidv4 } from 'uuid';\nimport { shortcodeIntegrator } from './shortcodeIntegrator';\n\nexport interface Block {\n  id: string;\n  type: string;\n  content?: any;\n  attributes?: Record<string, any>;\n  innerBlocks?: Block[];\n}\n\nexport interface AIProvider {\n  name: 'openai' | 'claude' | 'gemini' | 'mock';\n  apiKey?: string;\n  model?: string;\n}\n\n// 2025년 최신 Gemini 모델 목록\nexport const GEMINI_MODELS = {\n  'gemini-1.5-flash': 'Gemini 1.5 Flash (2025년 9월 종료 예정)',\n  'gemini-1.5-pro': 'Gemini 1.5 Pro (2025년 9월 종료 예정)', \n  'gemini-2.0-flash': 'Gemini 2.0 Flash (최신 멀티모달)',\n  'gemini-2.5-flash': 'Gemini 2.5 Flash (안정 버전)',\n  'gemini-2.5-pro': 'Gemini 2.5 Pro (최강력 모델)',\n} as const;\n\n// OpenAI 모델 목록\nexport const OPENAI_MODELS = {\n  'gpt-4': 'GPT-4',\n  'gpt-4-turbo': 'GPT-4 Turbo',\n  'gpt-3.5-turbo': 'GPT-3.5 Turbo',\n} as const;\n\n// Claude 모델 목록  \nexport const CLAUDE_MODELS = {\n  'claude-3-opus-20240229': 'Claude 3 Opus',\n  'claude-3-sonnet-20240229': 'Claude 3 Sonnet',\n  'claude-3-haiku-20240307': 'Claude 3 Haiku',\n} as const;\n\nexport interface PageTemplate {\n  name: string;\n  description: string;\n  systemPrompt: string;\n  exampleBlocks?: Block[];\n}\n\n// 진행률 콜백 타입\nexport interface ProgressCallback {\n  (progress: number, message: string): void;\n}\n\n// 생성 옵션 타입\nexport interface GenerateOptions {\n  prompt: string;\n  template: keyof typeof PAGE_TEMPLATES;\n  onProgress?: ProgressCallback;\n  signal?: AbortSignal;\n  useShortcodes?: boolean; // shortcode 사용 여부\n  shortcodeCategories?: string[]; // 포함할 shortcode 카테고리\n}\n\n// 페이지 템플릿 정의\nconst PAGE_TEMPLATES: Record<string, PageTemplate> = {\n  landing: {\n    name: '랜딩 페이지',\n    description: '제품이나 서비스를 소개하는 랜딩 페이지',\n    systemPrompt: `당신은 WordPress Gutenberg 블록 형식으로 페이지를 생성하는 전문가입니다.\n    랜딩 페이지를 생성할 때 다음 블록들을 사용하세요:\n    - core/heading: 제목과 부제목\n    - core/paragraph: 설명 텍스트\n    - core/image: 이미지 (placeholder 사용)\n    - core/columns: 다단 레이아웃\n    - core/button: CTA 버튼\n    - core/separator: 구분선\n    \n    JSON 형식으로 블록 배열을 반환하세요.`,\n  },\n  about: {\n    name: '회사 소개',\n    description: '회사나 팀을 소개하는 페이지',\n    systemPrompt: `회사 소개 페이지를 생성합니다. 다음 구조를 따르세요:\n    - 회사 비전과 미션\n    - 핵심 가치\n    - 팀 소개\n    - 연혁\n    - 연락처 정보`,\n  },\n  product: {\n    name: '제품 소개',\n    description: '제품의 특징과 장점을 설명하는 페이지',\n    systemPrompt: `제품 소개 페이지를 생성합니다. 다음을 포함하세요:\n    - 제품명과 설명\n    - 주요 기능\n    - 장점과 이점\n    - 가격 정보\n    - 고객 후기`,\n  },\n  blog: {\n    name: '블로그 포스트',\n    description: '블로그 형식의 글',\n    systemPrompt: `블로그 포스트를 생성합니다. 다음 구조를 사용하세요:\n    - 제목 (h1)\n    - 소개 단락\n    - 본문 섹션들 (h2, h3)\n    - 이미지\n    - 결론`,\n  },\n};\n\nexport class AIPageGenerator {\n  private provider: AIProvider;\n  private abortController?: AbortController;\n\n  constructor(provider: AIProvider) {\n    this.provider = provider;\n  }\n\n  /**\n   * 프롬프트를 기반으로 페이지 블록을 생성합니다 (개선된 버전)\n   */\n  async generateBlocks(options: GenerateOptions): Promise<Block[]> {\n    const { \n      prompt, \n      template = 'landing', \n      onProgress, \n      signal, \n      useShortcodes = true, \n      shortcodeCategories \n    } = options;\n    const pageTemplate = PAGE_TEMPLATES[template];\n    \n    // 진행률 업데이트 헬퍼\n    const updateProgress = (progress: number, message: string) => {\n      if (onProgress) {\n        onProgress(progress, message);\n      }\n    };\n\n    try {\n      // 0단계: Shortcode 정보 로드 (5%)\n      updateProgress(0, 'Shortcode 정보를 로드 중...');\n      let enhancedPrompt = prompt;\n      \n      if (useShortcodes) {\n        try {\n          enhancedPrompt = await shortcodeIntegrator.buildEnhancedAIPrompt(prompt, {\n            includeCategories: shortcodeCategories,\n            maxShortcodes: 20,\n            includeExamples: true,\n            includeUsageHints: true\n          });\n          updateProgress(5, 'Shortcode 정보가 로드되었습니다');\n        } catch (error) {\n          updateProgress(5, '기본 프롬프트로 진행합니다');\n        }\n      }\n\n      // 1단계: AI 모델 연결 (15%)\n      updateProgress(10, 'AI 모델에 연결 중...');\n      \n      // AbortSignal 체크\n      if (signal?.aborted) {\n        throw new Error('생성이 취소되었습니다');\n      }\n\n      let blocks: Block[] = [];\n\n      // 2단계: 프롬프트 처리 (40%)\n      updateProgress(20, '프롬프트를 처리하고 있습니다...');\n      \n      switch (this.provider.name) {\n        case 'openai':\n          blocks = await this.generateWithOpenAI(enhancedPrompt, pageTemplate, updateProgress, signal);\n          break;\n        case 'claude':\n          blocks = await this.generateWithClaude(enhancedPrompt, pageTemplate, updateProgress, signal);\n          break;\n        case 'gemini':\n          blocks = await this.generateWithGemini(enhancedPrompt, pageTemplate, updateProgress, signal);\n          break;\n        default:\n          // 테스트/개발용 모의 생성\n          updateProgress(30, '테스트 데이터를 생성 중...');\n          blocks = await this.generateMockBlocks(enhancedPrompt, template, updateProgress);\n      }\n\n      // 3단계: 블록 검증 및 정규화 (30%)\n      updateProgress(70, '생성된 블록을 검증하고 있습니다...');\n      blocks = this.validateAndNormalizeBlocks(blocks);\n\n      // 4단계: 완료 (10%)\n      updateProgress(90, '페이지 생성을 완료하고 있습니다...');\n      \n      // 완료\n      updateProgress(100, '페이지가 성공적으로 생성되었습니다!');\n      \n      return blocks;\n    } catch (error: any) {\n      if (error.name === 'AbortError' || error.message === '생성이 취소되었습니다') {\n        throw new Error('생성이 취소되었습니다');\n      }\n      // Error logged internally\n      throw new Error(error.message || '페이지 생성 중 오류가 발생했습니다');\n    }\n  }\n\n  /**\n   * 이전 버전과의 호환성을 위한 래퍼 메서드\n   */\n  async generateBlocksLegacy(\n    prompt: string,\n    template: keyof typeof PAGE_TEMPLATES = 'landing'\n  ): Promise<Block[]> {\n    return this.generateBlocks({ prompt, template });\n  }\n\n  /**\n   * OpenAI API를 사용한 블록 생성\n   */\n  private async generateWithOpenAI(\n    prompt: string,\n    template: PageTemplate,\n    updateProgress: (progress: number, message: string) => void,\n    signal?: AbortSignal\n  ): Promise<Block[]> {\n    if (!this.provider.apiKey) {\n      throw new Error('OpenAI API 키가 설정되지 않았습니다');\n    }\n\n    updateProgress(30, 'OpenAI GPT-4에 요청을 전송 중...');\n\n    const response = await fetch('https://api.openai.com/v1/chat/completions', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${this.provider.apiKey}`,\n      },\n      body: JSON.stringify({\n        model: this.provider.model || 'gpt-4',\n        messages: [\n          {\n            role: 'system',\n            content: template.systemPrompt,\n          },\n          {\n            role: 'user',\n            content: `다음 요구사항으로 페이지를 생성하세요: ${prompt}\n            \n            JSON 배열 형식으로 WordPress 블록들을 반환하세요.\n            예시:\n            [\n              {\n                \"type\": \"core/heading\",\n                \"content\": { \"text\": \"제목\" },\n                \"attributes\": { \"level\": 1 }\n              }\n            ]`,\n          },\n        ],\n        temperature: 0.7,\n      }),\n      signal,\n    });\n\n    updateProgress(50, 'AI 응답을 처리하고 있습니다...');\n\n    const data = await response.json();\n    \n    if (!response.ok) {\n      throw new Error(data.error?.message || 'OpenAI API 오류');\n    }\n\n    updateProgress(60, '블록 데이터를 파싱하고 있습니다...');\n\n    try {\n      const content = data.choices[0].message.content;\n      return JSON.parse(content);\n    } catch (error) {\n      // Fallback to mock blocks\n      return this.generateMockBlocks(prompt, 'landing', updateProgress);\n    }\n  }\n\n  /**\n   * Claude API를 사용한 블록 생성\n   */\n  private async generateWithClaude(\n    prompt: string,\n    template: PageTemplate,\n    updateProgress: (progress: number, message: string) => void,\n    signal?: AbortSignal\n  ): Promise<Block[]> {\n    if (!this.provider.apiKey) {\n      throw new Error('Claude API 키가 설정되지 않았습니다');\n    }\n\n    updateProgress(30, 'Claude AI에 요청을 전송 중...');\n\n    const response = await fetch('https://api.anthropic.com/v1/messages', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-api-key': this.provider.apiKey,\n        'anthropic-version': '2023-06-01',\n      },\n      body: JSON.stringify({\n        model: this.provider.model || 'claude-3-opus-20240229',\n        max_tokens: 4000,\n        messages: [\n          {\n            role: 'user',\n            content: `${template.systemPrompt}\n            \n            다음 요구사항으로 페이지를 생성하세요: ${prompt}\n            \n            WordPress Gutenberg 블록 JSON 배열만 반환하세요.`,\n          },\n        ],\n      }),\n      signal,\n    });\n\n    updateProgress(50, 'Claude 응답을 처리하고 있습니다...');\n\n    const data = await response.json();\n    \n    if (!response.ok) {\n      throw new Error(data.error?.message || 'Claude API 오류');\n    }\n\n    updateProgress(60, '블록 데이터를 파싱하고 있습니다...');\n\n    try {\n      const content = data.content[0].text;\n      return JSON.parse(content);\n    } catch (error) {\n      // Fallback to mock blocks\n      return this.generateMockBlocks(prompt, 'landing', updateProgress);\n    }\n  }\n\n  /**\n   * Gemini API를 사용한 블록 생성 (2025년 최신 버전)\n   */\n  private async generateWithGemini(\n    prompt: string,\n    template: PageTemplate,\n    updateProgress: (progress: number, message: string) => void,\n    signal?: AbortSignal\n  ): Promise<Block[]> {\n    if (!this.provider.apiKey) {\n      throw new Error('Gemini API 키가 설정되지 않았습니다. Google AI Studio에서 API 키를 발급받으세요.');\n    }\n\n    // 기본 모델 설정 - 2025년 권장 모델 사용\n    let modelName = this.provider.model || 'gemini-2.5-flash';\n    \n    // 구 모델명을 신 모델명으로 자동 변환\n    if (modelName === 'gemini-pro') {\n      console.warn('gemini-pro 모델은 더 이상 지원되지 않습니다. gemini-2.5-flash로 변경합니다.');\n      modelName = 'gemini-2.5-flash';\n    }\n    \n    // 1.5 모델 경고 (2025년 9월 종료 예정)\n    if (modelName.includes('1.5')) {\n      console.warn(`${modelName}는 2025년 9월에 종료됩니다. gemini-2.5 모델로 마이그레이션을 권장합니다.`);\n    }\n\n    updateProgress(30, `Google Gemini ${modelName}에 요청을 전송 중...`);\n\n    // API 버전 결정 - 2.5 모델은 v1 사용, 나머지는 v1beta\n    const apiVersion = modelName.includes('2.5') ? 'v1' : 'v1beta';\n    \n    const systemInstruction = `${template.systemPrompt}\n    \n중요: 반드시 유효한 JSON 배열 형식으로만 응답하세요.\n각 블록은 다음 구조를 가져야 합니다:\n{\n  \"type\": \"블록 타입 (예: core/heading)\",\n  \"content\": { \"text\": \"내용\" },\n  \"attributes\": { \"level\": 1 }\n}`;\n\n    const userPrompt = `다음 요구사항으로 WordPress Gutenberg 페이지를 생성하세요: ${prompt}\n\nJSON 배열 형식으로만 응답하세요. 다른 설명이나 텍스트는 포함하지 마세요.`;\n\n    try {\n      const response = await fetch(\n        `https://generativelanguage.googleapis.com/${apiVersion}/models/${modelName}:generateContent?key=${this.provider.apiKey}`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            contents: [\n              {\n                role: 'user',\n                parts: [\n                  {\n                    text: systemInstruction + '\\n\\n' + userPrompt\n                  },\n                ],\n              },\n            ],\n            generationConfig: {\n              temperature: 0.7,\n              topK: 40,\n              topP: 0.95,\n              maxOutputTokens: 8192,\n              responseMimeType: 'application/json',\n            },\n          }),\n          signal,\n        }\n      );\n\n      updateProgress(50, 'Gemini 응답을 처리하고 있습니다...');\n\n      const data = await response.json();\n      \n      if (!response.ok) {\n        console.error('Gemini API Error:', data);\n        \n        // 모델이 없는 경우 대체 모델 사용\n        if (data.error?.message?.includes('is not found')) {\n          console.warn(`${modelName} 모델을 찾을 수 없습니다. 기본 모델로 재시도합니다.`);\n          this.provider.model = 'gemini-2.5-flash';\n          return this.generateWithGemini(prompt, template, updateProgress, signal);\n        }\n        \n        throw new Error(data.error?.message || `Gemini API 오류: ${response.status}`);\n      }\n\n      updateProgress(60, '블록 데이터를 파싱하고 있습니다...');\n\n      try {\n        // 응답 구조 확인 및 파싱\n        const content = data.candidates?.[0]?.content?.parts?.[0]?.text;\n        if (!content) {\n          throw new Error('Gemini 응답에 콘텐츠가 없습니다');\n        }\n        \n        // JSON 파싱 시도\n        let blocks;\n        try {\n          blocks = JSON.parse(content);\n        } catch (parseError) {\n          // JSON이 아닌 경우 코드 블록 제거 후 재시도\n          const jsonMatch = content.match(/```(?:json)?\\s*([\\s\\S]*?)```/);\n          if (jsonMatch) {\n            blocks = JSON.parse(jsonMatch[1]);\n          } else {\n            blocks = JSON.parse(content);\n          }\n        }\n        \n        if (!Array.isArray(blocks)) {\n          throw new Error('응답이 배열 형식이 아닙니다');\n        }\n        \n        return blocks;\n      } catch (error) {\n        console.error('Gemini 응답 파싱 실패:', error);\n        // Fallback to mock blocks\n        updateProgress(60, '기본 템플릿을 사용합니다...');\n        return this.generateMockBlocks(prompt, 'landing', updateProgress);\n      }\n    } catch (error: any) {\n      if (error.name === 'AbortError') {\n        throw error;\n      }\n      console.error('Gemini API 호출 실패:', error);\n      throw new Error(`Gemini API 오류: ${error.message}`);\n    }\n  }\n\n  /**\n   * 개발/테스트용 모의 블록 생성\n   */\n  private async generateMockBlocks(\n    prompt: string,\n    template: string,\n    updateProgress?: (progress: number, message: string) => void\n  ): Promise<Block[]> {\n    // 모의 지연을 추가하여 실제 API 호출처럼 보이게 함\n    if (updateProgress) {\n      updateProgress(40, '템플릿을 준비하고 있습니다...');\n    }\n    \n    await new Promise(resolve => setTimeout(resolve, 500));\n    \n    if (updateProgress) {\n      updateProgress(50, '콘텐츠를 생성하고 있습니다...');\n    }\n    \n    await new Promise(resolve => setTimeout(resolve, 500));\n\n    const blocks: Block[] = [];\n\n    // 제목 추가\n    blocks.push({\n      id: uuidv4(),\n      type: 'core/heading',\n      content: { text: prompt },\n      attributes: { level: 1, textAlign: 'center' },\n    });\n\n    if (updateProgress) {\n      updateProgress(60, '블록을 구성하고 있습니다...');\n    }\n\n    // 템플릿별 기본 구조\n    switch (template) {\n      case 'landing':\n        blocks.push(\n          {\n            id: uuidv4(),\n            type: 'core/paragraph',\n            content: {\n              text: '혁신적인 솔루션으로 여러분의 비즈니스를 한 단계 발전시키세요.',\n            },\n            attributes: { align: 'center', fontSize: 'large' },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/columns',\n            innerBlocks: [\n              {\n                id: uuidv4(),\n                type: 'core/column',\n                innerBlocks: [\n                  {\n                    id: uuidv4(),\n                    type: 'core/heading',\n                    content: { text: '빠른 성능' },\n                    attributes: { level: 3 },\n                  },\n                  {\n                    id: uuidv4(),\n                    type: 'core/paragraph',\n                    content: {\n                      text: '최적화된 코드로 빠른 로딩 속도를 제공합니다.',\n                    },\n                  },\n                ],\n              },\n              {\n                id: uuidv4(),\n                type: 'core/column',\n                innerBlocks: [\n                  {\n                    id: uuidv4(),\n                    type: 'core/heading',\n                    content: { text: '쉬운 사용' },\n                    attributes: { level: 3 },\n                  },\n                  {\n                    id: uuidv4(),\n                    type: 'core/paragraph',\n                    content: {\n                      text: '직관적인 인터페이스로 누구나 쉽게 사용할 수 있습니다.',\n                    },\n                  },\n                ],\n              },\n              {\n                id: uuidv4(),\n                type: 'core/column',\n                innerBlocks: [\n                  {\n                    id: uuidv4(),\n                    type: 'core/heading',\n                    content: { text: '24/7 지원' },\n                    attributes: { level: 3 },\n                  },\n                  {\n                    id: uuidv4(),\n                    type: 'core/paragraph',\n                    content: {\n                      text: '언제든지 전문가의 도움을 받을 수 있습니다.',\n                    },\n                  },\n                ],\n              },\n            ],\n          },\n          {\n            id: uuidv4(),\n            type: 'core/button',\n            content: { text: '지금 시작하기' },\n            attributes: {\n              url: '#',\n              backgroundColor: '#007cba',\n              textColor: '#ffffff',\n              align: 'center',\n            },\n          }\n        );\n        break;\n\n      case 'about':\n        blocks.push(\n          {\n            id: uuidv4(),\n            type: 'core/heading',\n            content: { text: '우리의 비전' },\n            attributes: { level: 2 },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/paragraph',\n            content: {\n              text: '우리는 기술을 통해 더 나은 세상을 만들어갑니다.',\n            },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/heading',\n            content: { text: '핵심 가치' },\n            attributes: { level: 2 },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/list',\n            content: {\n              values: ['혁신', '협력', '신뢰', '고객 중심'],\n            },\n          }\n        );\n        break;\n\n      case 'product':\n        blocks.push(\n          {\n            id: uuidv4(),\n            type: 'core/image',\n            attributes: {\n              url: '/images/product-placeholder.jpg',\n              alt: '제품 이미지',\n              align: 'center',\n            },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/heading',\n            content: { text: '주요 기능' },\n            attributes: { level: 2 },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/list',\n            content: {\n              values: [\n                '실시간 데이터 동기화',\n                '강력한 보안 시스템',\n                '직관적인 대시보드',\n                '맞춤형 리포트',\n              ],\n            },\n          }\n        );\n        break;\n\n      case 'blog':\n        blocks.push(\n          {\n            id: uuidv4(),\n            type: 'core/paragraph',\n            content: {\n              text: '오늘은 흥미로운 주제에 대해 이야기해보겠습니다.',\n            },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/heading',\n            content: { text: '서론' },\n            attributes: { level: 2 },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/paragraph',\n            content: {\n              text: '이 주제가 왜 중요한지 설명합니다...',\n            },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/heading',\n            content: { text: '본론' },\n            attributes: { level: 2 },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/paragraph',\n            content: {\n              text: '핵심 내용을 자세히 다룹니다...',\n            },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/quote',\n            content: {\n              value: '인용문을 통해 신뢰성을 높입니다.',\n              citation: '출처',\n            },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/heading',\n            content: { text: '결론' },\n            attributes: { level: 2 },\n          },\n          {\n            id: uuidv4(),\n            type: 'core/paragraph',\n            content: {\n              text: '오늘 다룬 내용을 정리하면...',\n            },\n          }\n        );\n        break;\n\n      default:\n        blocks.push({\n          id: uuidv4(),\n          type: 'core/paragraph',\n          content: {\n            text: 'AI가 생성한 콘텐츠가 여기에 표시됩니다.',\n          },\n        });\n    }\n\n    // 페이지 끝에 구분선 추가\n    blocks.push({\n      id: uuidv4(),\n      type: 'core/separator',\n      attributes: {},\n    });\n\n    return blocks;\n  }\n\n  /**\n   * 블록 검증 및 정규화\n   */\n  private validateAndNormalizeBlocks(blocks: Block[]): Block[] {\n    return blocks.map((block) => {\n      // ID가 없으면 생성\n      if (!block.id) {\n        block.id = uuidv4();\n      }\n\n      // type이 없으면 기본값 설정\n      if (!block.type) {\n        block.type = 'core/paragraph';\n      }\n\n      // innerBlocks 재귀 처리\n      if (block.innerBlocks && Array.isArray(block.innerBlocks)) {\n        block.innerBlocks = this.validateAndNormalizeBlocks(block.innerBlocks);\n      }\n\n      return block;\n    });\n  }\n\n  /**\n   * 프롬프트에서 템플릿 자동 추론\n   */\n  inferTemplate(prompt: string): keyof typeof PAGE_TEMPLATES {\n    const lowerPrompt = prompt.toLowerCase();\n\n    if (lowerPrompt.includes('랜딩') || lowerPrompt.includes('landing')) {\n      return 'landing';\n    } else if (lowerPrompt.includes('회사') || lowerPrompt.includes('소개')) {\n      return 'about';\n    } else if (lowerPrompt.includes('제품') || lowerPrompt.includes('product')) {\n      return 'product';\n    } else if (lowerPrompt.includes('블로그') || lowerPrompt.includes('blog')) {\n      return 'blog';\n    }\n\n    return 'landing';\n  }\n\n  /**\n   * 사용 가능한 템플릿 목록 반환\n   */\n  getTemplates() {\n    return Object.entries(PAGE_TEMPLATES).map(([key, template]) => ({\n      key,\n      name: template.name,\n      description: template.description,\n    }));\n  }\n\n  /**\n   * 생성 취소\n   */\n  cancel() {\n    if (this.abortController) {\n      this.abortController.abort();\n    }\n  }\n}\n\nexport default AIPageGenerator;","import { FC, useState, useEffect } from 'react';\nimport { Save, AlertCircle, Eye, EyeOff, Sparkles, Key, Check, X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport toast from 'react-hot-toast';\n\n// API 키 저장 서비스\nexport class AIApiKeyService {\n  private static STORAGE_KEY = 'ai_api_keys';\n\n  static getKeys(): Record<string, string> {\n    try {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      return stored ? JSON.parse(stored) : {};\n    } catch {\n      return {};\n    }\n  }\n\n  static setKey(provider: string, key: string): void {\n    const keys = this.getKeys();\n    keys[provider] = key;\n    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(keys));\n  }\n\n  static removeKey(provider: string): void {\n    const keys = this.getKeys();\n    delete keys[provider];\n    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(keys));\n  }\n\n  static getKey(provider: string): string | undefined {\n    return this.getKeys()[provider];\n  }\n\n  // 기본 모델 설정\n  static getDefaultModel(provider: string): string | undefined {\n    try {\n      const stored = localStorage.getItem(`ai_default_model_${provider}`);\n      return stored || undefined;\n    } catch {\n      return undefined;\n    }\n  }\n\n  static setDefaultModel(provider: string, model: string): void {\n    localStorage.setItem(`ai_default_model_${provider}`, model);\n  }\n}\n\nconst AISettings: FC = () => {\n  const [apiKeys, setApiKeys] = useState<Record<string, string>>({\n    gemini: '',\n    openai: '',\n    claude: ''\n  });\n  \n  const [defaultModels, setDefaultModels] = useState<Record<string, string>>({\n    gemini: 'gemini-2.5-flash',\n    openai: 'gpt-4-turbo',\n    claude: 'claude-3-sonnet-20240229'\n  });\n\n  const [showKeys, setShowKeys] = useState<Record<string, boolean>>({\n    gemini: false,\n    openai: false,\n    claude: false\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [testingProvider, setTestingProvider] = useState<string | null>(null);\n  const [testResults, setTestResults] = useState<Record<string, boolean>>({});\n\n  // 프로바이더 정보\n  const providers = [\n    { \n      id: 'gemini', \n      name: 'Google Gemini', \n      icon: '🌟',\n      models: [\n        { id: 'gemini-2.5-flash', name: 'Gemini 2.5 Flash (추천)' },\n        { id: 'gemini-2.5-pro', name: 'Gemini 2.5 Pro' },\n        { id: 'gemini-2.0-flash', name: 'Gemini 2.0 Flash' },\n        { id: 'gemini-1.5-flash', name: 'Gemini 1.5 Flash (곧 종료)' },\n        { id: 'gemini-1.5-pro', name: 'Gemini 1.5 Pro (곧 종료)' }\n      ],\n      apiUrl: 'https://aistudio.google.com/app/apikey',\n      description: 'Google AI Studio에서 무료 API 키 발급'\n    },\n    { \n      id: 'openai', \n      name: 'OpenAI', \n      icon: '🤖',\n      models: [\n        { id: 'gpt-4-turbo', name: 'GPT-4 Turbo' },\n        { id: 'gpt-4', name: 'GPT-4' },\n        { id: 'gpt-3.5-turbo', name: 'GPT-3.5 Turbo' }\n      ],\n      apiUrl: 'https://platform.openai.com/api-keys',\n      description: 'OpenAI Platform에서 API 키 발급 (유료)'\n    },\n    { \n      id: 'claude', \n      name: 'Anthropic Claude', \n      icon: '🧠',\n      models: [\n        { id: 'claude-3-opus-20240229', name: 'Claude 3 Opus' },\n        { id: 'claude-3-sonnet-20240229', name: 'Claude 3 Sonnet' },\n        { id: 'claude-3-haiku-20240307', name: 'Claude 3 Haiku' }\n      ],\n      apiUrl: 'https://console.anthropic.com/',\n      description: 'Anthropic Console에서 API 키 발급 (유료)'\n    }\n  ];\n\n  // 컴포넌트 마운트 시 저장된 키 로드\n  useEffect(() => {\n    const savedKeys = AIApiKeyService.getKeys();\n    const savedModels: Record<string, string> = {};\n    \n    providers.forEach(provider => {\n      const savedModel = AIApiKeyService.getDefaultModel(provider.id);\n      if (savedModel) {\n        savedModels[provider.id] = savedModel;\n      }\n    });\n\n    setApiKeys(prev => ({\n      ...prev,\n      ...savedKeys\n    }));\n\n    if (Object.keys(savedModels).length > 0) {\n      setDefaultModels(prev => ({\n        ...prev,\n        ...savedModels\n      }));\n    }\n  }, []);\n\n  // API 키 저장\n  const handleSave = async () => {\n    setLoading(true);\n    try {\n      // 각 프로바이더의 키 저장\n      Object.entries(apiKeys).forEach(([provider, key]) => {\n        if (key) {\n          AIApiKeyService.setKey(provider, key);\n        } else {\n          AIApiKeyService.removeKey(provider);\n        }\n      });\n\n      // 기본 모델 저장\n      Object.entries(defaultModels).forEach(([provider, model]) => {\n        AIApiKeyService.setDefaultModel(provider, model);\n      });\n\n      toast.success('AI API 설정이 저장되었습니다.');\n    } catch (error) {\n      toast.error('설정 저장 중 오류가 발생했습니다.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // API 키 테스트\n  const handleTestKey = async (providerId: string) => {\n    const key = apiKeys[providerId];\n    if (!key) {\n      toast.error('API 키를 입력해주세요.');\n      return;\n    }\n\n    setTestingProvider(providerId);\n    try {\n      // 간단한 API 테스트 요청\n      let testUrl = '';\n      let headers: HeadersInit = {};\n      let body = {};\n\n      if (providerId === 'gemini') {\n        testUrl = `https://generativelanguage.googleapis.com/v1beta/models?key=${key}`;\n        const response = await fetch(testUrl);\n        if (response.ok) {\n          setTestResults(prev => ({ ...prev, [providerId]: true }));\n          toast.success('Gemini API 키가 유효합니다.');\n        } else {\n          throw new Error('Invalid API key');\n        }\n      } else if (providerId === 'openai') {\n        testUrl = 'https://api.openai.com/v1/models';\n        headers = {\n          'Authorization': `Bearer ${key}`\n        };\n        const response = await fetch(testUrl, { headers });\n        if (response.ok) {\n          setTestResults(prev => ({ ...prev, [providerId]: true }));\n          toast.success('OpenAI API 키가 유효합니다.');\n        } else {\n          throw new Error('Invalid API key');\n        }\n      } else if (providerId === 'claude') {\n        // Claude API는 실제 요청이 필요하므로 간단한 체크만\n        if (key.startsWith('sk-ant-')) {\n          setTestResults(prev => ({ ...prev, [providerId]: true }));\n          toast.success('Claude API 키 형식이 유효합니다.');\n        } else {\n          throw new Error('Invalid API key format');\n        }\n      }\n    } catch (error) {\n      setTestResults(prev => ({ ...prev, [providerId]: false }));\n      toast.error(`${providerId} API 키가 유효하지 않습니다.`);\n    } finally {\n      setTestingProvider(null);\n    }\n  };\n\n  return (\n    <div className=\"wp-card\">\n      <div className=\"wp-card-header\">\n        <h2 className=\"wp-card-title flex items-center gap-2\">\n          <Sparkles className=\"w-5 h-5\" />\n          AI API 설정\n        </h2>\n      </div>\n      \n      <div className=\"wp-card-body space-y-6\">\n        <Alert>\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            AI 페이지 생성 및 기타 AI 기능을 사용하려면 API 키가 필요합니다.\n            각 서비스에서 API 키를 발급받아 아래에 입력해주세요.\n            키는 브라우저에만 안전하게 저장되며 서버로 전송되지 않습니다.\n          </AlertDescription>\n        </Alert>\n\n        {providers.map((provider) => (\n          <div key={provider.id} className=\"border rounded-lg p-4 space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <span className=\"text-2xl\">{provider.icon}</span>\n                <div>\n                  <h3 className=\"font-semibold\">{provider.name}</h3>\n                  <p className=\"text-sm text-gray-500\">{provider.description}</p>\n                </div>\n              </div>\n              <a\n                href={provider.apiUrl}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-sm text-blue-500 hover:underline\"\n              >\n                API 키 발급 →\n              </a>\n            </div>\n\n            <div className=\"space-y-3\">\n              {/* API 키 입력 */}\n              <div>\n                <Label htmlFor={`${provider.id}-key`}>API 키</Label>\n                <div className=\"flex gap-2 mt-1\">\n                  <div className=\"relative flex-1\">\n                    <input\n                      id={`${provider.id}-key`}\n                      type={showKeys[provider.id] ? 'text' : 'password'}\n                      className=\"w-full px-3 py-2 border rounded-md pr-10\"\n                      placeholder={\n                        provider.id === 'gemini' ? 'AIza...' :\n                        provider.id === 'openai' ? 'sk-...' :\n                        'sk-ant-...'\n                      }\n                      value={apiKeys[provider.id]}\n                      onChange={(e) => setApiKeys(prev => ({\n                        ...prev,\n                        [provider.id]: e.target.value\n                      }))}\n                    />\n                    <button\n                      type=\"button\"\n                      className=\"absolute right-2 top-1/2 -translate-y-1/2\"\n                      onClick={() => setShowKeys(prev => ({\n                        ...prev,\n                        [provider.id]: !prev[provider.id]\n                      }))}\n                    >\n                      {showKeys[provider.id] ? \n                        <EyeOff className=\"w-4 h-4 text-gray-400\" /> : \n                        <Eye className=\"w-4 h-4 text-gray-400\" />\n                      }\n                    </button>\n                  </div>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => handleTestKey(provider.id)}\n                    disabled={testingProvider === provider.id}\n                  >\n                    {testingProvider === provider.id ? (\n                      <span className=\"animate-spin\">⏳</span>\n                    ) : testResults[provider.id] === true ? (\n                      <Check className=\"w-4 h-4 text-green-500\" />\n                    ) : testResults[provider.id] === false ? (\n                      <X className=\"w-4 h-4 text-red-500\" />\n                    ) : (\n                      '테스트'\n                    )}\n                  </Button>\n                </div>\n              </div>\n\n              {/* 기본 모델 선택 */}\n              <div>\n                <Label htmlFor={`${provider.id}-model`}>기본 모델</Label>\n                <Select \n                  value={defaultModels[provider.id]} \n                  onValueChange={(value) => setDefaultModels(prev => ({\n                    ...prev,\n                    [provider.id]: value\n                  }))}\n                >\n                  <SelectTrigger id={`${provider.id}-model`} className=\"mt-1\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {provider.models.map(model => (\n                      <SelectItem key={model.id} value={model.id}>\n                        {model.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          </div>\n        ))}\n\n        <div className=\"flex justify-end\">\n          <Button onClick={handleSave} disabled={loading}>\n            {loading ? (\n              <>\n                <span className=\"animate-spin mr-2\">⏳</span>\n                저장 중...\n              </>\n            ) : (\n              <>\n                <Save className=\"mr-2 h-4 w-4\" />\n                설정 저장\n              </>\n            )}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AISettings;","import React, { useState, useRef } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Label } from '@/components/ui/label';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Progress } from '@/components/ui/progress';\nimport { Loader2, Sparkles, AlertCircle, X } from 'lucide-react';\nimport { AIPageGenerator, AIProvider, Block, GenerateOptions, GEMINI_MODELS, OPENAI_MODELS, CLAUDE_MODELS } from '@/services/ai/pageGenerator';\nimport { AIApiKeyService } from '@/pages/settings/AISettings';\nimport { useNavigate } from 'react-router-dom';\n\ninterface AIPageGeneratorModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onGenerate: (blocks: Block[]) => void;\n}\n\nconst AIPageGeneratorModal: React.FC<AIPageGeneratorModalProps> = ({\n  isOpen,\n  onClose,\n  onGenerate,\n}) => {\n  const [prompt, setPrompt] = useState('');\n  const [template, setTemplate] = useState('landing');\n  const [provider, setProvider] = useState<AIProvider['name']>('gemini');\n  const [apiKey, setApiKey] = useState('');\n  const [selectedModel, setSelectedModel] = useState('gemini-2.5-flash');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [useSavedKey, setUseSavedKey] = useState(true);\n  const navigate = useNavigate();\n  \n  // 진행률 관련 상태\n  const [progress, setProgress] = useState(0);\n  const [progressMessage, setProgressMessage] = useState('');\n  \n  // AbortController를 위한 ref\n  const abortControllerRef = useRef<AbortController | null>(null);\n  const generatorRef = useRef<AIPageGenerator | null>(null);\n  \n  // 컴포넌트 마운트 시 저장된 API 키와 모델 로드\n  useEffect(() => {\n    const savedKey = AIApiKeyService.getKey(provider);\n    const savedModel = AIApiKeyService.getDefaultModel(provider);\n    \n    if (savedKey) {\n      setApiKey(savedKey);\n      setUseSavedKey(true);\n    } else {\n      setApiKey('');\n      setUseSavedKey(false);\n    }\n    \n    if (savedModel) {\n      setSelectedModel(savedModel);\n    }\n  }, [provider]);\n\n  const templates = [\n    { key: 'landing', name: '랜딩 페이지', description: '제품이나 서비스를 소개하는 페이지' },\n    { key: 'about', name: '회사 소개', description: '회사나 팀을 소개하는 페이지' },\n    { key: 'product', name: '제품 소개', description: '제품의 특징과 장점을 설명' },\n    { key: 'blog', name: '블로그 포스트', description: '블로그 형식의 글' },\n  ];\n\n  const providers = [\n    { key: 'gemini', name: 'Google Gemini (추천)', requiresKey: true },\n    { key: 'openai', name: 'OpenAI (GPT-4)', requiresKey: true },\n    { key: 'claude', name: 'Claude', requiresKey: true },\n    { key: 'mock', name: '테스트 모드', requiresKey: false },\n  ];\n  \n  // 프로바이더에 따른 모델 목록\n  const getModelsForProvider = (providerName: string) => {\n    switch (providerName) {\n      case 'gemini':\n        return Object.entries(GEMINI_MODELS);\n      case 'openai':\n        return Object.entries(OPENAI_MODELS);\n      case 'claude':\n        return Object.entries(CLAUDE_MODELS);\n      default:\n        return [];\n    }\n  };\n\n  const handleGenerate = async () => {\n    if (!prompt.trim()) {\n      setError('페이지 내용을 입력해주세요.');\n      return;\n    }\n\n    const selectedProvider = providers.find(p => p.key === provider);\n    \n    // API 키 확인 - 저장된 키 또는 입력된 키 사용\n    let finalApiKey = apiKey;\n    if (useSavedKey && selectedProvider?.requiresKey) {\n      const savedKey = AIApiKeyService.getKey(provider);\n      if (savedKey) {\n        finalApiKey = savedKey;\n      }\n    }\n    \n    if (selectedProvider?.requiresKey && !finalApiKey) {\n      setError('API 키가 필요합니다. 설정에서 API 키를 등록하거나 직접 입력해주세요.');\n      return;\n    }\n\n    setIsGenerating(true);\n    setError(null);\n    setProgress(0);\n    setProgressMessage('준비 중...');\n\n    // AbortController 생성\n    abortControllerRef.current = new AbortController();\n\n    try {\n      const generator = new AIPageGenerator({\n        name: provider === 'mock' ? 'openai' : provider as AIProvider['name'],\n        apiKey: provider === 'mock' ? undefined : finalApiKey,\n        model: provider === 'mock' ? undefined : selectedModel,\n      });\n      \n      generatorRef.current = generator;\n\n      // 진행률 콜백\n      const onProgress = (progress: number, message: string) => {\n        setProgress(progress);\n        setProgressMessage(message);\n      };\n\n      const options: GenerateOptions = {\n        prompt,\n        template: template as any,\n        onProgress,\n        signal: abortControllerRef.current.signal,\n      };\n\n      const blocks = provider === 'mock' \n        ? await generator.generateBlocks(options)\n        : await generator.generateBlocks(options);\n\n      onGenerate(blocks);\n      onClose();\n      \n      // 성공 후 초기화\n      setPrompt('');\n      setApiKey('');\n      setProgress(0);\n      setProgressMessage('');\n    } catch (err: any) {\n      if (err.message === '생성이 취소되었습니다') {\n        setError('생성이 취소되었습니다.');\n      } else {\n        setError(err instanceof Error ? err.message : 'AI 생성 중 오류가 발생했습니다.');\n      }\n    } finally {\n      setIsGenerating(false);\n      abortControllerRef.current = null;\n      generatorRef.current = null;\n    }\n  };\n\n  const handleCancel = () => {\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    if (generatorRef.current) {\n      generatorRef.current.cancel();\n    }\n    setIsGenerating(false);\n    setProgress(0);\n    setProgressMessage('');\n  };\n\n  const handleClose = () => {\n    if (isGenerating) {\n      handleCancel();\n    }\n    onClose();\n  };\n\n  const examplePrompts = {\n    landing: '네추어 플랫폼을 소개하는 랜딩 페이지를 만들어주세요. 드롭쉬핑, 포럼, 사이니지 기능을 강조해주세요.',\n    about: '혁신적인 기술 스타트업 회사 소개 페이지를 만들어주세요.',\n    product: 'AI 기반 콘텐츠 생성 도구를 소개하는 페이지를 만들어주세요.',\n    blog: '2025년 웹 개발 트렌드에 대한 블로그 포스트를 작성해주세요.',\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-[600px]\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Sparkles className=\"h-5 w-5 text-purple-500\" />\n              AI 페이지 생성\n            </div>\n            {isGenerating && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleCancel}\n                className=\"text-red-500 hover:text-red-700\"\n              >\n                <X className=\"h-4 w-4 mr-1\" />\n                취소\n              </Button>\n            )}\n          </DialogTitle>\n          <DialogDescription>\n            AI가 자동으로 페이지 콘텐츠를 생성합니다.\n          </DialogDescription>\n        </DialogHeader>\n\n        {isGenerating ? (\n          // 진행 중 화면\n          <div className=\"space-y-4 py-8\">\n            <div className=\"text-center space-y-2\">\n              <Loader2 className=\"h-8 w-8 animate-spin mx-auto text-purple-500\" />\n              <p className=\"text-sm font-medium\">{progressMessage}</p>\n              <p className=\"text-xs text-muted-foreground\">잠시만 기다려주세요...</p>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Progress value={progress} className=\"h-2\" />\n              <p className=\"text-center text-sm text-muted-foreground\">{progress}%</p>\n            </div>\n\n            <div className=\"text-center\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={handleCancel}\n                className=\"text-red-600 border-red-200 hover:bg-red-50\"\n              >\n                <X className=\"h-4 w-4 mr-1\" />\n                생성 취소\n              </Button>\n            </div>\n          </div>\n        ) : (\n          // 입력 화면\n          <div className=\"space-y-4 py-4\">\n            {/* 템플릿 선택 */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template\">템플릿</Label>\n              <Select value={template} onValueChange={setTemplate}>\n                <SelectTrigger id=\"template\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {templates.map((t) => (\n                    <SelectItem key={t.key} value={t.key}>\n                      <div>\n                        <div className=\"font-medium\">{t.name}</div>\n                        <div className=\"text-xs text-muted-foreground\">{t.description}</div>\n                      </div>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n\n            {/* AI 프로바이더 선택 */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"provider\">AI 서비스</Label>\n              <Select value={provider} onValueChange={(v) => {\n                setProvider(v as AIProvider['name']);\n                // 프로바이더 변경 시 기본 모델 설정\n                if (v === 'gemini') setSelectedModel('gemini-2.5-flash');\n                else if (v === 'openai') setSelectedModel('gpt-4-turbo');\n                else if (v === 'claude') setSelectedModel('claude-3-sonnet-20240229');\n              }}>\n                <SelectTrigger id=\"provider\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {providers.map((p) => (\n                    <SelectItem key={p.key} value={p.key}>\n                      <div className=\"flex items-center gap-2\">\n                        <span>{p.name}</span>\n                        {!p.requiresKey && (\n                          <span className=\"text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded\">\n                            무료\n                          </span>\n                        )}\n                      </div>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            \n            {/* 모델 선택 (프로바이더별) */}\n            {provider !== 'mock' && (\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"model\">모델 선택</Label>\n                <Select value={selectedModel} onValueChange={setSelectedModel}>\n                  <SelectTrigger id=\"model\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {getModelsForProvider(provider).map(([key, name]) => (\n                      <SelectItem key={key} value={key}>\n                        <div className=\"text-sm\">\n                          <div>{key}</div>\n                          <div className=\"text-xs text-muted-foreground\">{name}</div>\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n\n            {/* API 키 설정 */}\n            {providers.find(p => p.key === provider)?.requiresKey && (\n              <div className=\"space-y-2\">\n                <Label>API 키 설정</Label>\n                {AIApiKeyService.getKey(provider) ? (\n                  <div className=\"p-3 bg-green-50 border border-green-200 rounded-md\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        <Check className=\"w-4 h-4 text-green-600\" />\n                        <span className=\"text-sm text-green-800\">저장된 API 키 사용 중</span>\n                      </div>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => navigate('/settings/ai')}\n                      >\n                        설정 변경\n                      </Button>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"space-y-2\">\n                    <Alert variant=\"destructive\">\n                      <AlertCircle className=\"h-4 w-4\" />\n                      <AlertDescription>\n                        API 키가 설정되지 않았습니다.\n                        <Button\n                          variant=\"link\"\n                          size=\"sm\"\n                          className=\"ml-2 p-0 h-auto\"\n                          onClick={() => navigate('/settings/ai')}\n                        >\n                          설정으로 이동\n                        </Button>\n                      </AlertDescription>\n                    </Alert>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"use-temp-key\"\n                        checked={!useSavedKey}\n                        onChange={(e) => setUseSavedKey(!e.target.checked)}\n                      />\n                      <Label htmlFor=\"use-temp-key\" className=\"text-sm cursor-pointer\">\n                        임시 API 키 사용\n                      </Label>\n                    </div>\n                    \n                    {!useSavedKey && (\n                      <div>\n                        <input\n                          id=\"apiKey\"\n                          type=\"password\"\n                          className=\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm\"\n                          placeholder={`${provider === 'openai' ? 'sk-...' : provider === 'claude' ? 'sk-ant-...' : 'AIza...'}`}\n                          value={apiKey}\n                          onChange={(e) => setApiKey(e.target.value)}\n                        />\n                        <p className=\"text-xs text-muted-foreground mt-1\">\n                          임시 키는 이번 생성에만 사용됩니다.\n                        </p>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* 프롬프트 입력 */}\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between items-center\">\n                <Label htmlFor=\"prompt\">페이지 내용 설명</Label>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setPrompt(examplePrompts[template as keyof typeof examplePrompts])}\n                >\n                  예시 사용\n                </Button>\n              </div>\n              <Textarea\n                id=\"prompt\"\n                placeholder=\"어떤 페이지를 만들까요? 자세히 설명해주세요...\"\n                value={prompt}\n                onChange={(e) => setPrompt(e.target.value)}\n                rows={5}\n                className=\"resize-none\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                페이지의 목적, 타겟 고객, 주요 내용 등을 자세히 설명하면 더 좋은 결과를 얻을 수 있습니다.\n              </p>\n            </div>\n\n            {/* 에러 메시지 */}\n            {error && (\n              <Alert variant=\"destructive\">\n                <AlertCircle className=\"h-4 w-4\" />\n                <AlertDescription>{error}</AlertDescription>\n              </Alert>\n            )}\n          </div>\n        )}\n\n        {!isGenerating && (\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={handleClose}>\n              취소\n            </Button>\n            <Button onClick={handleGenerate}>\n              <Sparkles className=\"mr-2 h-4 w-4\" />\n              페이지 생성\n            </Button>\n          </DialogFooter>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AIPageGeneratorModal;","import { forwardRef, HTMLAttributes, ButtonHTMLAttributes, createContext, useContext, useState, useEffect, useRef, ReactNode } from 'react';\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cn } from '@/lib/utils';\n\ninterface PopoverContextValue {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst PopoverContext = createContext<PopoverContextValue | null>(null);\n\nexport interface PopoverProps {\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  children: ReactNode;\n}\n\nconst Popover = ({ open: controlledOpen, defaultOpen = false, onOpenChange, children }: PopoverProps) => {\n  const [uncontrolledOpen, setUncontrolledOpen] = useState(defaultOpen);\n  const open = controlledOpen ?? uncontrolledOpen;\n  \n  const handleOpenChange = (newOpen: boolean) => {\n    if (controlledOpen === undefined) {\n      setUncontrolledOpen(newOpen);\n    }\n    onOpenChange?.(newOpen);\n  };\n\n  return (\n    <PopoverContext.Provider value={{ open, onOpenChange: handleOpenChange }}>\n      <div className=\"relative inline-block\">\n        {children}\n      </div>\n    </PopoverContext.Provider>\n  );\n};\n\ninterface PopoverTriggerProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  asChild?: boolean;\n}\n\nconst PopoverTrigger = forwardRef<HTMLButtonElement, PopoverTriggerProps>(\n  ({ onClick, asChild = false, ...props }, ref) => {\n    const context = useContext(PopoverContext);\n    if (!context) throw new Error('PopoverTrigger must be used within Popover');\n    \n    const Comp = asChild ? Slot : \"button\";\n    \n    return (\n      <Comp\n        ref={ref}\n        onClick={(e: any) => {\n          onClick?.(e);\n          context.onOpenChange(!context.open);\n        }}\n        aria-expanded={context.open}\n        aria-haspopup=\"dialog\"\n        {...props}\n      />\n    );\n  }\n);\n\ninterface PopoverContentProps extends HTMLAttributes<HTMLDivElement> {\n  align?: 'start' | 'center' | 'end';\n  side?: 'top' | 'right' | 'bottom' | 'left';\n  sideOffset?: number;\n}\n\nconst PopoverContent = forwardRef<HTMLDivElement, PopoverContentProps>(\n  ({ className, align = 'center', side = 'bottom', sideOffset = 4, children, ...props }) => {\n    const context = useContext(PopoverContext);\n    if (!context) throw new Error('PopoverContent must be used within Popover');\n    \n    const contentRef = useRef<HTMLDivElement>(null);\n    const triggerRef = useRef<HTMLElement | null>(null);\n    \n    useEffect(() => {\n      const handleClickOutside = (e: MouseEvent) => {\n        if (contentRef.current && !contentRef.current.contains(e.target as Node) &&\n            triggerRef.current && !triggerRef.current.contains(e.target as Node)) {\n          context.onOpenChange(false);\n        }\n      };\n      \n      const handleEscape = (e: KeyboardEvent) => {\n        if (e.key === 'Escape') {\n          context.onOpenChange(false);\n        }\n      };\n      \n      if (context.open) {\n        // Find the trigger element\n        const trigger = contentRef.current?.parentElement?.querySelector('[aria-expanded]') as HTMLElement;\n        triggerRef.current = trigger;\n        \n        document.addEventListener('mousedown', handleClickOutside);\n        document.addEventListener('keydown', handleEscape);\n        return () => {\n          document.removeEventListener('mousedown', handleClickOutside);\n          document.removeEventListener('keydown', handleEscape);\n        };\n      }\n    }, [context]);\n    \n    if (!context.open) return null;\n    \n    // Calculate position classes based on side and align\n    const positionClasses = {\n      top: 'bottom-full mb-2',\n      bottom: 'top-full mt-2',\n      left: 'right-full mr-2',\n      right: 'left-full ml-2',\n    };\n    \n    const alignClasses = {\n      start: side === 'top' || side === 'bottom' ? 'left-0' : 'top-0',\n      center: side === 'top' || side === 'bottom' ? 'left-1/2 -translate-x-1/2' : 'top-1/2 -translate-y-1/2',\n      end: side === 'top' || side === 'bottom' ? 'right-0' : 'bottom-0',\n    };\n    \n    return (\n      <div\n        ref={contentRef}\n        className={cn(\n          \"absolute z-50 w-72 rounded-md border bg-white p-4 text-gray-900 shadow-md outline-none\",\n          \"animate-in fade-in-0 zoom-in-95\",\n          positionClasses[side],\n          alignClasses[align],\n          className\n        )}\n        style={{ marginTop: side === 'bottom' ? `${sideOffset}px` : undefined }}\n        role=\"dialog\"\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\nPopoverTrigger.displayName = 'PopoverTrigger';\nPopoverContent.displayName = 'PopoverContent';\n\nexport { Popover, PopoverTrigger, PopoverContent };","/**\n * RichText Component\n * 구텐베르그 스타일 리치 텍스트 에디터\n * WordPress Gutenberg RichText 완전 모방 - 텍스트 역순 문제 해결\n */\n\nimport React, { FC, useRef, useState, useEffect, KeyboardEvent } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface RichTextProps {\n  tagName?: string;\n  value?: string;\n  onChange?: (value: string) => void;\n  onSplit?: (value: string, isOriginal?: boolean) => void;\n  onMerge?: () => void;\n  onReplace?: (blocks: any[]) => void;\n  onRemove?: () => void;\n  onKeyDown?: (e: KeyboardEvent<HTMLDivElement>) => void;\n  onFocusOut?: () => void;\n  placeholder?: string;\n  allowedFormats?: string[];\n  identifier?: string;\n  className?: string;\n  style?: React.CSSProperties;\n  multiline?: boolean | string;\n}\n\nexport const RichText: FC<RichTextProps> = ({\n  tagName = 'div',\n  value = '',\n  onChange,\n  onSplit,\n  onReplace,\n  onRemove,\n  onKeyDown,\n  onFocusOut,\n  placeholder = 'Start writing or type / to choose a block',\n  allowedFormats = ['core/bold', 'core/italic', 'core/link'],\n  className,\n  style,\n  multiline = false,\n}) => {\n  const editorRef = useRef<HTMLDivElement>(null);\n  const [isEmpty, setIsEmpty] = useState(!value || value === '');\n  const isUpdatingRef = useRef(false);\n\n  // 초기값 및 외부 value 변경 처리 - 텍스트 역순 문제 해결\n  useEffect(() => {\n    if (editorRef.current && !isUpdatingRef.current) {\n      const currentContent = editorRef.current.innerHTML;\n      const normalizedCurrent = currentContent.replace(/<br\\s*\\/?>/gi, '').trim();\n      const normalizedValue = (value || '').replace(/<br\\s*\\/?>/gi, '').trim();\n\n      if (normalizedCurrent !== normalizedValue) {\n        // 현재 포커스 상태 저장\n        const wasActive = document.activeElement === editorRef.current;\n        let cursorPosition = 0;\n\n        if (wasActive) {\n          const selection = window.getSelection();\n          if (selection && selection.rangeCount > 0) {\n            const range = selection.getRangeAt(0);\n            cursorPosition = range.startOffset;\n          }\n        }\n\n        // 내용 업데이트\n        editorRef.current.innerHTML = value || '';\n\n        // 포커스 상태였다면 커서 위치 복원\n        if (wasActive) {\n          editorRef.current.focus();\n\n          // 커서 위치 복원\n          setTimeout(() => {\n            try {\n              const selection = window.getSelection();\n              if (selection && editorRef.current) {\n                const textNode = editorRef.current.firstChild;\n                if (textNode && textNode.nodeType === Node.TEXT_NODE) {\n                  const range = document.createRange();\n                  const maxOffset = textNode.textContent?.length || 0;\n                  range.setStart(textNode, Math.min(cursorPosition, maxOffset));\n                  range.collapse(true);\n                  selection.removeAllRanges();\n                  selection.addRange(range);\n                } else {\n                  // 텍스트 노드가 없으면 끝으로 이동\n                  const range = document.createRange();\n                  range.selectNodeContents(editorRef.current);\n                  range.collapse(false);\n                  selection.removeAllRanges();\n                  selection.addRange(range);\n                }\n              }\n            } catch (e) {\n              // 커서 복원 실패 시 무시\n            }\n          }, 0);\n        }\n      }\n    }\n\n    setIsEmpty(!value || value === '' || value === '<p></p>' || value === '<br>');\n  }, [value]);\n\n  // 포맷 적용 함수\n  const applyFormat = (format: string) => {\n    if (!allowedFormats.includes(format)) return;\n\n    const formatMap: { [key: string]: string } = {\n      'core/bold': 'bold',\n      'core/italic': 'italic',\n      'core/link': 'createLink',\n      'core/strikethrough': 'strikeThrough',\n      'core/code': 'code',\n    };\n\n    const command = formatMap[format];\n    if (command) {\n      if (command === 'createLink') {\n        const url = prompt('Enter URL:');\n        if (url) {\n          document.execCommand(command, false, url);\n        }\n      } else {\n        document.execCommand(command, false);\n      }\n\n      if (editorRef.current) {\n        isUpdatingRef.current = true;\n        onChange?.(editorRef.current.innerHTML);\n        setTimeout(() => {\n          isUpdatingRef.current = false;\n        }, 0);\n      }\n    }\n  };\n\n  // 키보드 이벤트 처리\n  const handleKeyDown = (e: KeyboardEvent<HTMLDivElement>) => {\n    // 외부 onKeyDown 핸들러가 있으면 먼저 호출\n    if (onKeyDown) {\n      onKeyDown(e);\n      // 외부 핸들러에서 이벤트가 preventDefault되었으면 내부 처리를 하지 않음\n      if (e.defaultPrevented) {\n        return;\n      }\n    }\n\n    // Ctrl/Cmd + B (Bold)\n    if ((e.ctrlKey || e.metaKey) && e.key === 'b') {\n      e.preventDefault();\n      applyFormat('core/bold');\n    }\n\n    // Ctrl/Cmd + I (Italic)\n    if ((e.ctrlKey || e.metaKey) && e.key === 'i') {\n      e.preventDefault();\n      applyFormat('core/italic');\n    }\n\n    // Ctrl/Cmd + K (Link)\n    if ((e.ctrlKey || e.metaKey) && e.key === 'k') {\n      e.preventDefault();\n      applyFormat('core/link');\n    }\n\n    // Enter 키 처리\n    if (e.key === 'Enter' && !e.shiftKey) {\n      if (multiline) {\n        // 멀티라인 모드에서는 새 줄 추가\n        if (multiline === 'p') {\n          e.preventDefault();\n          document.execCommand('insertParagraph', false);\n          if (editorRef.current) {\n            isUpdatingRef.current = true;\n            onChange?.(editorRef.current.innerHTML);\n            setTimeout(() => {\n              isUpdatingRef.current = false;\n            }, 0);\n          }\n        }\n      } else {\n        // 싱글라인 모드에서는 블록 분할\n        e.preventDefault();\n        if (onSplit && editorRef.current) {\n          const content = editorRef.current.innerHTML;\n          onSplit(content, true);\n        }\n      }\n    }\n\n    // Backspace 처리 (빈 블록 제거)\n    if (e.key === 'Backspace' && isEmpty && onRemove) {\n      e.preventDefault();\n      onRemove();\n    }\n\n    // Delete 처리\n    if (e.key === 'Delete' && isEmpty && onRemove) {\n      e.preventDefault();\n      onRemove();\n    }\n\n    // '/' 입력 감지 (블록 선택기 트리거)\n    if (e.key === '/' && isEmpty && onReplace) {\n      // 블록 선택기를 트리거하는 로직\n      // 실제 구현에서는 블록 선택 UI를 표시\n    }\n  };\n\n  // 입력 처리 - 텍스트 역순 문제 방지\n  const handleInput = () => {\n    if (editorRef.current && !isUpdatingRef.current) {\n      isUpdatingRef.current = true;\n      const newValue = editorRef.current.innerHTML;\n      // 빈 콘텐츠를 정리\n      const cleanValue = newValue === '<br>' || newValue === '<div><br></div>' ? '' : newValue;\n      onChange?.(cleanValue);\n      setIsEmpty(!cleanValue || cleanValue === '' || cleanValue === '<br>');\n\n      setTimeout(() => {\n        isUpdatingRef.current = false;\n      }, 0);\n    }\n  };\n\n  // 포커스 처리\n  const handleFocus = () => {\n    // Handle focus\n  };\n\n  // 블러 처리\n  const handleBlur = () => {\n    // Handle blur\n    onFocusOut?.();\n  };\n\n  // 붙여넣기 처리\n  const handlePaste = (e: React.ClipboardEvent) => {\n    e.preventDefault();\n    const text = e.clipboardData.getData('text/plain');\n    document.execCommand('insertText', false, text);\n    if (editorRef.current) {\n      isUpdatingRef.current = true;\n      onChange?.(editorRef.current.innerHTML);\n      setTimeout(() => {\n        isUpdatingRef.current = false;\n      }, 0);\n    }\n  };\n\n  // Create the appropriate element based on tagName\n  const commonProps = {\n    ref: editorRef,\n    contentEditable: true,\n    suppressContentEditableWarning: true,\n    className: cn('rich-text', 'outline-none', 'min-h-[1.8em]', isEmpty && 'empty', className),\n    style,\n    onInput: handleInput,\n    onKeyDown: handleKeyDown,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onPaste: handlePaste,\n    'data-placeholder': isEmpty ? placeholder : undefined,\n    role: 'textbox',\n    'aria-label': placeholder,\n    'aria-multiline': !!multiline,\n  };\n\n  // For specific tags that need special handling\n  if (tagName === 'h1' || tagName === 'h2' || tagName === 'h3' ||\n      tagName === 'h4' || tagName === 'h5' || tagName === 'h6') {\n    return React.createElement(tagName, commonProps);\n  }\n\n  // For p, div, figcaption, and other simple elements\n  return <div {...commonProps} />;\n};\n\n// 플레인 텍스트 컴포넌트 (제목 등에 사용)\nexport const PlainText: FC<{\n  value?: string;\n  onChange?: (value: string) => void;\n  placeholder?: string;\n  className?: string;\n}> = ({ value = '', onChange, placeholder, className }) => {\n  return (\n    <input\n      type=\"text\"\n      value={value}\n      onChange={(e) => onChange?.(e.target.value)}\n      placeholder={placeholder}\n      className={cn(\n        'w-full outline-none bg-transparent',\n        className\n      )}\n    />\n  );\n};","/**\n * BlockControls Component\n * 구텐베르그 스타일 블록 툴바 - 블록 상단에 표시되는 컨트롤\n * WordPress Gutenberg 패턴 완전 모방\n */\n\nimport { FC, ReactNode, useEffect, useState, useRef } from 'react';\nimport { createPortal } from 'react-dom';\nimport { cn } from '@/lib/utils';\n\ninterface BlockControlsProps {\n  children: ReactNode;\n  group?: 'block' | 'inline' | 'other';\n  controls?: any[];\n}\n\nexport const BlockControls: FC<BlockControlsProps> = ({ \n  children, \n  group = 'block' \n}) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [position, setPosition] = useState({ top: 0, left: 0 });\n  const toolbarRef = useRef<HTMLDivElement>(null);\n  const [selectedBlock, setSelectedBlock] = useState<HTMLElement | null>(null);\n\n  useEffect(() => {\n    // 선택된 블록 찾기\n    const findSelectedBlock = () => {\n      const selection = window.getSelection();\n      if (!selection || selection.rangeCount === 0) return null;\n      \n      let element = selection.anchorNode as HTMLElement;\n      if (element?.nodeType === Node.TEXT_NODE) {\n        element = element.parentElement as HTMLElement;\n      }\n      \n      // 블록 래퍼 찾기 (wp-block 클래스를 가진 요소)\n      while (element && !element.classList?.contains('wp-block')) {\n        element = element.parentElement as HTMLElement;\n      }\n      \n      return element;\n    };\n\n    const updatePosition = () => {\n      const block = findSelectedBlock();\n      if (block) {\n        const rect = block.getBoundingClientRect();\n        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n        \n        setPosition({\n          top: rect.top + scrollTop - 48, // 툴바 높이만큼 위로\n          left: rect.left\n        });\n        setSelectedBlock(block);\n        setIsVisible(true);\n      } else {\n        setIsVisible(false);\n      }\n    };\n\n    // 이벤트 리스너\n    const handleSelectionChange = () => {\n      updatePosition();\n    };\n\n    const handleScroll = () => {\n      if (selectedBlock) {\n        updatePosition();\n      }\n    };\n\n    document.addEventListener('selectionchange', handleSelectionChange);\n    window.addEventListener('scroll', handleScroll);\n    window.addEventListener('resize', updatePosition);\n\n    // 초기 위치 설정\n    updatePosition();\n\n    return () => {\n      document.removeEventListener('selectionchange', handleSelectionChange);\n      window.removeEventListener('scroll', handleScroll);\n      window.removeEventListener('resize', updatePosition);\n    };\n  }, [selectedBlock]);\n\n  if (!isVisible) return null;\n\n  // 포털을 사용하여 body에 직접 렌더링\n  return createPortal(\n    <div\n      ref={toolbarRef}\n      className={cn(\n        'block-editor-block-controls',\n        'fixed z-[100] bg-white border border-gray-300 rounded-sm shadow-sm',\n        'flex items-center p-0',\n        group === 'inline' && 'block-editor-block-controls--inline'\n      )}\n      style={{\n        top: `${position.top}px`,\n        left: `${position.left}px`,\n        transform: 'translateY(-100%)',\n      }}\n    >\n      <div className=\"block-editor-block-toolbar flex items-center\">\n        {children}\n      </div>\n    </div>,\n    document.body\n  );\n};\n\n// 툴바 그룹 컴포넌트\nexport const ToolbarGroup: FC<{ children: ReactNode }> = ({ children }) => {\n  return (\n    <div className=\"flex items-center border-r border-gray-200 last:border-r-0\">\n      {children}\n    </div>\n  );\n};\n\n// 툴바 버튼 컴포넌트\nexport const ToolbarButton: FC<{\n  icon?: ReactNode;\n  label?: string;\n  isActive?: boolean;\n  onClick?: () => void;\n  className?: string;\n}> = ({ icon, label, isActive, onClick, className }) => {\n  return (\n    <button\n      className={cn(\n        'p-2 hover:bg-gray-100 transition-colors',\n        'flex items-center justify-center',\n        'min-w-[36px] h-[36px]',\n        isActive && 'bg-gray-200',\n        className\n      )}\n      onClick={onClick}\n      title={label}\n    >\n      {icon && <span className=\"w-5 h-5\">{icon}</span>}\n      {!icon && label && <span className=\"text-sm\">{label}</span>}\n    </button>\n  );\n};\n\n// 정렬 툴바 컴포넌트\nexport const AlignmentToolbar: FC<{\n  value?: 'left' | 'center' | 'right' | 'justify';\n  onChange?: (align: 'left' | 'center' | 'right' | 'justify' | undefined) => void;\n}> = ({ value, onChange }) => {\n  const alignments = [\n    { value: 'left', icon: '⬅', label: 'Align left' },\n    { value: 'center', icon: '⬌', label: 'Align center' },\n    { value: 'right', icon: '➡', label: 'Align right' },\n    { value: 'justify', icon: '☰', label: 'Justify' },\n  ];\n\n  return (\n    <ToolbarGroup>\n      {alignments.map((alignment) => (\n        <ToolbarButton\n          key={alignment.value}\n          icon={alignment.icon}\n          label={alignment.label}\n          isActive={value === alignment.value}\n          onClick={() => {\n            onChange?.(value === alignment.value ? undefined : alignment.value as any);\n          }}\n        />\n      ))}\n    </ToolbarGroup>\n  );\n};","import { forwardRef, MouseEvent, useEffect, useRef, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\nexport interface SliderProps {\n  className?: string;\n  value?: number[];\n  defaultValue?: number[];\n  onValueChange?: (value: number[]) => void;\n  min?: number;\n  max?: number;\n  step?: number;\n  disabled?: boolean;\n}\n\nconst Slider = forwardRef<HTMLDivElement, SliderProps>(\n  ({ className, value: controlledValue, defaultValue = [0], onValueChange, min = 0, max = 100, step = 1, disabled }, ref) => {\n    const [uncontrolledValue, setUncontrolledValue] = useState(defaultValue);\n    const value = controlledValue ?? uncontrolledValue;\n    const sliderValue = value[0] ?? 0;\n    \n    const trackRef = useRef<HTMLDivElement>(null);\n    const isDragging = useRef(false);\n    \n    const handleValueChange = (newValue: number) => {\n      const clampedValue = Math.min(Math.max(newValue, min), max);\n      const steppedValue = Math.round(clampedValue / step) * step;\n      const newValues = [steppedValue];\n      \n      if (controlledValue === undefined) {\n        setUncontrolledValue(newValues);\n      }\n      onValueChange?.(newValues);\n    };\n    \n    const calculateValue = (clientX: number) => {\n      if (!trackRef.current) return;\n      \n      const rect = trackRef.current.getBoundingClientRect();\n      const percentage = (clientX - rect.left) / rect.width;\n      const rawValue = percentage * (max - min) + min;\n      \n      return rawValue;\n    };\n    \n    const handleMouseDown = (e: MouseEvent) => {\n      if (disabled) return;\n      \n      isDragging.current = true;\n      const newValue = calculateValue(e.clientX);\n      if (newValue !== undefined) {\n        handleValueChange(newValue);\n      }\n    };\n    \n    useEffect(() => {\n      const handleMouseMove = (e: globalThis.MouseEvent) => {\n        if (!isDragging.current || disabled) return;\n        \n        const newValue = calculateValue(e.clientX);\n        if (newValue !== undefined) {\n          handleValueChange(newValue);\n        }\n      };\n      \n      const handleMouseUp = () => {\n        isDragging.current = false;\n      };\n      \n      if (isDragging.current) {\n        document.addEventListener('mousemove', handleMouseMove);\n        document.addEventListener('mouseup', handleMouseUp);\n        \n        return () => {\n          document.removeEventListener('mousemove', handleMouseMove);\n          document.removeEventListener('mouseup', handleMouseUp);\n        };\n      }\n    }, [disabled, handleValueChange, max, min]);\n    \n    const percentage = ((sliderValue - min) / (max - min)) * 100;\n    \n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"relative flex w-full touch-none select-none items-center\",\n          disabled && \"opacity-50 cursor-not-allowed\",\n          className\n        )}\n      >\n        <div\n          ref={trackRef}\n          className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary cursor-pointer\"\n          onMouseDown={handleMouseDown}\n        >\n          <div\n            className=\"absolute h-full bg-primary transition-none\"\n            style={{ width: `${percentage}%` }}\n          />\n        </div>\n        <div\n          className={cn(\n            \"absolute h-5 w-5 rounded-full border-2 border-primary bg-background\",\n            \"ring-offset-background transition-colors\",\n            \"focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n            disabled && \"pointer-events-none\",\n            !disabled && \"cursor-grab active:cursor-grabbing\"\n          )}\n          style={{ left: `${percentage}%`, transform: 'translateX(-50%)' }}\n          onMouseDown={handleMouseDown}\n        >\n          <input\n            type=\"range\"\n            value={sliderValue}\n            min={min}\n            max={max}\n            step={step}\n            disabled={disabled}\n            className=\"sr-only\"\n            onChange={(e: any) => handleValueChange(Number(e.target.value))}\n          />\n        </div>\n      </div>\n    );\n  }\n);\n\nSlider.displayName = 'Slider';\n\nexport { Slider };","/**\n * DropCapController Component\n * Drop Cap (첫 글자 대문자) 기능 제어 컴포넌트\n */\n\nimport React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\nimport { Type, RotateCcw } from 'lucide-react';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\n\ninterface DropCapControllerProps {\n  isEnabled: boolean;\n  lines: number;\n  color: string;\n  fontSize: number;\n  fontWeight: number;\n  onToggle: (enabled: boolean) => void;\n  onLinesChange: (lines: number) => void;\n  onColorChange: (color: string) => void;\n  onFontSizeChange: (size: number) => void;\n  onFontWeightChange: (weight: number) => void;\n  onReset: () => void;\n}\n\nconst DROP_CAP_COLORS = [\n  { value: '#000000', label: 'Black', color: '#000000' },\n  { value: '#3b82f6', label: 'Blue', color: '#3b82f6' },\n  { value: '#ef4444', label: 'Red', color: '#ef4444' },\n  { value: '#10b981', label: 'Green', color: '#10b981' },\n  { value: '#8b5cf6', label: 'Purple', color: '#8b5cf6' },\n  { value: '#f59e0b', label: 'Orange', color: '#f59e0b' },\n  { value: '#6b7280', label: 'Gray', color: '#6b7280' },\n  { value: '#dc2626', label: 'Dark Red', color: '#dc2626' },\n];\n\nconst FONT_WEIGHTS = [\n  { value: 400, label: 'Normal' },\n  { value: 500, label: 'Medium' },\n  { value: 600, label: 'Semibold' },\n  { value: 700, label: 'Bold' },\n  { value: 800, label: 'Extra Bold' },\n  { value: 900, label: 'Black' },\n];\n\nexport const DropCapController: React.FC<DropCapControllerProps> = ({\n  isEnabled,\n  lines,\n  color,\n  fontSize,\n  fontWeight,\n  onToggle,\n  onLinesChange,\n  onColorChange,\n  onFontSizeChange,\n  onFontWeightChange,\n  onReset,\n}) => {\n  return (\n    <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n      {/* Drop Cap Toggle */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Type className=\"h-4 w-4\" />\n          <Label className=\"text-sm font-medium\">Drop Cap</Label>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant={isEnabled ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => onToggle(!isEnabled)}\n            className=\"h-8\"\n          >\n            {isEnabled ? 'On' : 'Off'}\n          </Button>\n          {isEnabled && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onReset}\n              className=\"h-8 px-2\"\n              title=\"Reset to defaults\"\n            >\n              <RotateCcw className=\"h-3 w-3\" />\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Drop Cap Settings */}\n      {isEnabled && (\n        <div className=\"space-y-4\">\n          {/* Lines Height */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">\n              Height ({lines} lines)\n            </Label>\n            <Slider\n              value={[lines]}\n              onValueChange={(value) => onLinesChange(value[0])}\n              min={2}\n              max={6}\n              step={1}\n              className=\"w-full\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500\">\n              <span>2 lines</span>\n              <span>6 lines</span>\n            </div>\n          </div>\n\n          {/* Font Size */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">\n              Font Size ({fontSize}px)\n            </Label>\n            <Slider\n              value={[fontSize]}\n              onValueChange={(value) => onFontSizeChange(value[0])}\n              min={32}\n              max={120}\n              step={4}\n              className=\"w-full\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500\">\n              <span>32px</span>\n              <span>120px</span>\n            </div>\n          </div>\n\n          {/* Font Weight */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Font Weight</Label>\n            <Select value={fontWeight.toString()} onValueChange={(value) => onFontWeightChange(parseInt(value))}>\n              <SelectTrigger className=\"w-full h-8 text-xs\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {FONT_WEIGHTS.map((weight) => (\n                  <SelectItem key={weight.value} value={weight.value.toString()}>\n                    <span style={{ fontWeight: weight.value }}>{weight.label}</span>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Color */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Color</Label>\n            <Select value={color} onValueChange={onColorChange}>\n              <SelectTrigger className=\"w-full h-8\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {DROP_CAP_COLORS.map((colorOption) => (\n                  <SelectItem key={colorOption.value} value={colorOption.value}>\n                    <div className=\"flex items-center gap-2\">\n                      <div\n                        className=\"w-4 h-4 rounded border border-gray-300\"\n                        style={{ backgroundColor: colorOption.color }}\n                      />\n                      <span className=\"text-xs\">{colorOption.label}</span>\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Preview */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n            <div className=\"p-3 bg-white rounded border\">\n              <p className=\"text-sm leading-relaxed\">\n                <span\n                  className=\"float-left mr-2 mt-1 leading-none\"\n                  style={{\n                    fontSize: `${fontSize}px`,\n                    fontWeight,\n                    color,\n                    lineHeight: `${lines * 0.8}rem`,\n                  }}\n                >\n                  T\n                </span>\n                his is how your drop cap will appear in the paragraph. The first letter will be styled according to your settings.\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DropCapController;","/**\n * TypographyPanel Component\n * 고급 타이포그래피 설정 패널\n */\n\nimport React from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\nimport { Button } from '@/components/ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Type, RotateCcw } from 'lucide-react';\n\ninterface TypographyPanelProps {\n  fontSize: number;\n  lineHeight: number;\n  letterSpacing: number;\n  wordSpacing: number;\n  textTransform: 'none' | 'uppercase' | 'lowercase' | 'capitalize';\n  fontWeight: number;\n  fontStyle: 'normal' | 'italic';\n  onFontSizeChange: (size: number) => void;\n  onLineHeightChange: (height: number) => void;\n  onLetterSpacingChange: (spacing: number) => void;\n  onWordSpacingChange: (spacing: number) => void;\n  onTextTransformChange: (transform: 'none' | 'uppercase' | 'lowercase' | 'capitalize') => void;\n  onFontWeightChange: (weight: number) => void;\n  onFontStyleChange: (style: 'normal' | 'italic') => void;\n  onReset: () => void;\n}\n\nconst TEXT_TRANSFORMS = [\n  { value: 'none', label: 'None', example: 'Normal Text' },\n  { value: 'uppercase', label: 'Uppercase', example: 'UPPERCASE TEXT' },\n  { value: 'lowercase', label: 'Lowercase', example: 'lowercase text' },\n  { value: 'capitalize', label: 'Capitalize', example: 'Capitalize Text' },\n] as const;\n\nconst FONT_WEIGHTS = [\n  { value: 100, label: 'Thin' },\n  { value: 200, label: 'Extra Light' },\n  { value: 300, label: 'Light' },\n  { value: 400, label: 'Normal' },\n  { value: 500, label: 'Medium' },\n  { value: 600, label: 'Semibold' },\n  { value: 700, label: 'Bold' },\n  { value: 800, label: 'Extra Bold' },\n  { value: 900, label: 'Black' },\n];\n\nexport const TypographyPanel: React.FC<TypographyPanelProps> = ({\n  fontSize,\n  lineHeight,\n  letterSpacing,\n  wordSpacing,\n  textTransform,\n  fontWeight,\n  fontStyle,\n  onFontSizeChange,\n  onLineHeightChange,\n  onLetterSpacingChange,\n  onWordSpacingChange,\n  onTextTransformChange,\n  onFontWeightChange,\n  onFontStyleChange,\n  onReset,\n}) => {\n  return (\n    <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Type className=\"h-4 w-4\" />\n          <Label className=\"text-sm font-medium\">Typography</Label>\n        </div>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={onReset}\n          className=\"h-8 px-2\"\n          title=\"Reset to defaults\"\n        >\n          <RotateCcw className=\"h-3 w-3\" />\n        </Button>\n      </div>\n\n      {/* Font Size */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">\n          Font Size ({fontSize}px)\n        </Label>\n        <Slider\n          value={[fontSize]}\n          onValueChange={(value) => onFontSizeChange(value[0])}\n          min={12}\n          max={48}\n          step={1}\n          className=\"w-full\"\n        />\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>12px</span>\n          <span>48px</span>\n        </div>\n      </div>\n\n      {/* Line Height */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">\n          Line Height ({lineHeight.toFixed(1)})\n        </Label>\n        <Slider\n          value={[lineHeight]}\n          onValueChange={(value) => onLineHeightChange(value[0])}\n          min={1.0}\n          max={3.0}\n          step={0.1}\n          className=\"w-full\"\n        />\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>1.0</span>\n          <span>3.0</span>\n        </div>\n      </div>\n\n      {/* Letter Spacing */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">\n          Letter Spacing ({letterSpacing.toFixed(2)}em)\n        </Label>\n        <Slider\n          value={[letterSpacing]}\n          onValueChange={(value) => onLetterSpacingChange(value[0])}\n          min={-0.1}\n          max={0.5}\n          step={0.01}\n          className=\"w-full\"\n        />\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>-0.1em</span>\n          <span>0.5em</span>\n        </div>\n      </div>\n\n      {/* Word Spacing */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">\n          Word Spacing ({wordSpacing.toFixed(2)}em)\n        </Label>\n        <Slider\n          value={[wordSpacing]}\n          onValueChange={(value) => onWordSpacingChange(value[0])}\n          min={-0.2}\n          max={1.0}\n          step={0.01}\n          className=\"w-full\"\n        />\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>-0.2em</span>\n          <span>1.0em</span>\n        </div>\n      </div>\n\n      {/* Font Weight */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">Font Weight</Label>\n        <Select value={fontWeight.toString()} onValueChange={(value) => onFontWeightChange(parseInt(value))}>\n          <SelectTrigger className=\"w-full h-8 text-xs\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            {FONT_WEIGHTS.map((weight) => (\n              <SelectItem key={weight.value} value={weight.value.toString()}>\n                <span style={{ fontWeight: weight.value }}>{weight.label}</span>\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Font Style */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">Font Style</Label>\n        <div className=\"flex gap-2\">\n          <Button\n            variant={fontStyle === 'normal' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => onFontStyleChange('normal')}\n            className=\"flex-1 h-8 text-xs\"\n          >\n            Normal\n          </Button>\n          <Button\n            variant={fontStyle === 'italic' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => onFontStyleChange('italic')}\n            className=\"flex-1 h-8 text-xs italic\"\n          >\n            Italic\n          </Button>\n        </div>\n      </div>\n\n      {/* Text Transform */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">Text Transform</Label>\n        <Select value={textTransform} onValueChange={(value: string) => onTextTransformChange(value as 'none' | 'uppercase' | 'lowercase' | 'capitalize')}>\n          <SelectTrigger className=\"w-full h-8 text-xs\">\n            <SelectValue />\n          </SelectTrigger>\n          <SelectContent>\n            {TEXT_TRANSFORMS.map((transform) => (\n              <SelectItem key={transform.value} value={transform.value}>\n                <div className=\"flex flex-col\">\n                  <span className=\"font-medium\">{transform.label}</span>\n                  <span\n                    className=\"text-xs text-gray-500\"\n                    style={{ textTransform: transform.value as any }}\n                  >\n                    {transform.example}\n                  </span>\n                </div>\n              </SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Preview */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n        <div className=\"p-3 bg-white rounded border\">\n          <p\n            className=\"text-sm\"\n            style={{\n              fontSize: `${fontSize}px`,\n              lineHeight,\n              letterSpacing: `${letterSpacing}em`,\n              wordSpacing: `${wordSpacing}em`,\n              textTransform,\n              fontWeight,\n              fontStyle,\n            }}\n          >\n            This is a preview of your typography settings. Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TypographyPanel;","/**\n * HighlightSelector Component\n * 텍스트 하이라이트 색상 및 스타일 선택기\n */\n\nimport React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\nimport { Highlighter, X } from 'lucide-react';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\n\ninterface HighlightSelectorProps {\n  selectedColor: string;\n  opacity: number;\n  onColorChange: (color: string) => void;\n  onOpacityChange: (opacity: number) => void;\n  onClear: () => void;\n  onApply: () => void;\n}\n\nconst HIGHLIGHT_COLORS = [\n  { name: 'Yellow', value: '#fef08a', rgb: '254, 240, 138' },\n  { name: 'Green', value: '#bbf7d0', rgb: '187, 247, 208' },\n  { name: 'Blue', value: '#bfdbfe', rgb: '191, 219, 254' },\n  { name: 'Purple', value: '#ddd6fe', rgb: '221, 214, 254' },\n  { name: 'Pink', value: '#fce7f3', rgb: '252, 231, 243' },\n  { name: 'Orange', value: '#fed7aa', rgb: '254, 215, 170' },\n  { name: 'Red', value: '#fecaca', rgb: '254, 202, 202' },\n  { name: 'Gray', value: '#e5e7eb', rgb: '229, 231, 235' },\n];\n\nexport const HighlightSelector: React.FC<HighlightSelectorProps> = ({\n  selectedColor,\n  opacity,\n  onColorChange,\n  onOpacityChange,\n  onClear,\n  onApply,\n}) => {\n  const getRgbaColor = (hexColor: string, alpha: number) => {\n    const colorData = HIGHLIGHT_COLORS.find(c => c.value === hexColor);\n    if (colorData) {\n      return `rgba(${colorData.rgb}, ${alpha})`;\n    }\n    // Fallback: convert hex to rgba\n    const r = parseInt(hexColor.slice(1, 3), 16);\n    const g = parseInt(hexColor.slice(3, 5), 16);\n    const b = parseInt(hexColor.slice(5, 7), 16);\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n  };\n\n  return (\n    <Popover>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"h-9 px-2 gap-2\"\n          title=\"Text Highlight\"\n        >\n          <Highlighter className=\"h-4 w-4\" />\n          Highlight\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-80 p-4\" align=\"start\">\n        <div className=\"space-y-4\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"text-sm font-medium\">Text Highlight</Label>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onClear}\n              className=\"h-8 px-2 text-gray-500 hover:text-gray-700\"\n            >\n              <X className=\"h-3 w-3 mr-1\" />\n              Clear\n            </Button>\n          </div>\n\n          {/* Color Grid */}\n          <div>\n            <Label className=\"text-xs font-medium text-gray-700 mb-2 block\">\n              Colors\n            </Label>\n            <div className=\"grid grid-cols-4 gap-2\">\n              {HIGHLIGHT_COLORS.map((color) => (\n                <button\n                  key={color.value}\n                  className={`\n                    w-full h-12 rounded border-2 transition-all\n                    ${selectedColor === color.value\n                      ? 'border-blue-500 ring-2 ring-blue-200'\n                      : 'border-gray-300 hover:border-gray-400'\n                    }\n                  `}\n                  style={{\n                    backgroundColor: getRgbaColor(color.value, opacity),\n                  }}\n                  onClick={() => onColorChange(color.value)}\n                  title={color.name}\n                >\n                  <div className=\"text-xs font-medium text-gray-700 p-1\">\n                    Aa\n                  </div>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Opacity */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">\n              Opacity ({Math.round(opacity * 100)}%)\n            </Label>\n            <Slider\n              value={[opacity]}\n              onValueChange={(value) => onOpacityChange(value[0])}\n              min={0.1}\n              max={1.0}\n              step={0.1}\n              className=\"w-full\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500\">\n              <span>10%</span>\n              <span>100%</span>\n            </div>\n          </div>\n\n          {/* Preview */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n            <div className=\"p-3 bg-white rounded border\">\n              <p className=\"text-sm\">\n                This is{' '}\n                <span\n                  style={{\n                    background: selectedColor ? getRgbaColor(selectedColor, opacity) : 'transparent',\n                  }}\n                >\n                  highlighted text\n                </span>{' '}\n                with your selected color and opacity.\n              </p>\n            </div>\n          </div>\n\n          {/* Apply Button */}\n          <div className=\"flex justify-end gap-2 pt-2 border-t\">\n            <Button\n              size=\"sm\"\n              onClick={onApply}\n              disabled={!selectedColor}\n              className=\"flex-1\"\n            >\n              Apply Highlight\n            </Button>\n          </div>\n\n          {/* Quick Tips */}\n          <div className=\"text-xs text-gray-500 space-y-1\">\n            <p><strong>Tip:</strong> Select text first, then apply highlight</p>\n            <p><strong>Shortcut:</strong> Ctrl/Cmd + Shift + H</p>\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default HighlightSelector;","/**\n * InlineImageInserter Component\n * 텍스트 중간에 인라인 이미지 삽입 기능\n */\n\nimport React, { useRef, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport {\n  Image,\n  Upload,\n  Link as LinkIcon,\n  X,\n  AlignLeft,\n  AlignCenter,\n  AlignRight\n} from 'lucide-react';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\n\ninterface InlineImageInserterProps {\n  onInsert: (imageData: InlineImageData) => void;\n}\n\nexport interface InlineImageData {\n  src: string;\n  alt: string;\n  size: 'small' | 'medium' | 'large';\n  align: 'baseline' | 'middle' | 'top' | 'bottom';\n  textWrap: boolean;\n  width?: number;\n  height?: number;\n}\n\nconst IMAGE_SIZES = [\n  { value: 'small', label: 'Small', width: 32, height: 32 },\n  { value: 'medium', label: 'Medium', width: 64, height: 64 },\n  { value: 'large', label: 'Large', width: 96, height: 96 },\n] as const;\n\nconst IMAGE_ALIGNMENTS = [\n  { value: 'baseline', label: 'Baseline', icon: AlignLeft },\n  { value: 'middle', label: 'Middle', icon: AlignCenter },\n  { value: 'top', label: 'Top', icon: AlignRight },\n  { value: 'bottom', label: 'Bottom', icon: AlignLeft },\n] as const;\n\nexport const InlineImageInserter: React.FC<InlineImageInserterProps> = ({\n  onInsert,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [imageUrl, setImageUrl] = useState('');\n  const [altText, setAltText] = useState('');\n  const [size, setSize] = useState<'small' | 'medium' | 'large'>('medium');\n  const [align, setAlign] = useState<'baseline' | 'middle' | 'top' | 'bottom'>('middle');\n  const [textWrap, setTextWrap] = useState(true);\n  const [uploadError, setUploadError] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      setUploadError('Please select a valid image file');\n      return;\n    }\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      setUploadError('File size must be less than 5MB');\n      return;\n    }\n\n    setUploadError('');\n\n    // Create data URL for preview\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const result = e.target?.result as string;\n      setImageUrl(result);\n      setAltText(file.name.replace(/\\.[^/.]+$/, ''));\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleUrlChange = (url: string) => {\n    setImageUrl(url);\n    setUploadError('');\n\n    // Try to extract filename for alt text\n    try {\n      const urlObj = new URL(url);\n      const filename = urlObj.pathname.split('/').pop() || '';\n      setAltText(filename.replace(/\\.[^/.]+$/, ''));\n    } catch (e) {\n      // Invalid URL, ignore\n    }\n  };\n\n  const handleInsert = () => {\n    if (!imageUrl) return;\n\n    const sizeData = IMAGE_SIZES.find(s => s.value === size);\n\n    const imageData: InlineImageData = {\n      src: imageUrl,\n      alt: altText || 'Inline image',\n      size,\n      align,\n      textWrap,\n      width: sizeData?.width,\n      height: sizeData?.height,\n    };\n\n    onInsert(imageData);\n\n    // Reset form\n    setImageUrl('');\n    setAltText('');\n    setSize('medium');\n    setAlign('middle');\n    setTextWrap(true);\n    setUploadError('');\n    setIsOpen(false);\n  };\n\n  const handleReset = () => {\n    setImageUrl('');\n    setAltText('');\n    setSize('medium');\n    setAlign('middle');\n    setTextWrap(true);\n    setUploadError('');\n  };\n\n  return (\n    <Popover open={isOpen} onOpenChange={setIsOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"h-9 px-2 gap-2\"\n          title=\"Insert Inline Image\"\n        >\n          <Image className=\"h-4 w-4\" />\n          Image\n        </Button>\n      </PopoverTrigger>\n\n      <PopoverContent className=\"w-96 p-4\" align=\"start\">\n        <div className=\"space-y-4\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"text-sm font-medium\">Insert Inline Image</Label>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setIsOpen(false)}\n              className=\"h-8 px-2\"\n            >\n              <X className=\"h-3 w-3\" />\n            </Button>\n          </div>\n\n          {/* Image Source Tabs */}\n          <Tabs defaultValue=\"url\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-2\">\n              <TabsTrigger value=\"url\" className=\"text-xs\">\n                <LinkIcon className=\"h-3 w-3 mr-1\" />\n                URL\n              </TabsTrigger>\n              <TabsTrigger value=\"upload\" className=\"text-xs\">\n                <Upload className=\"h-3 w-3 mr-1\" />\n                Upload\n              </TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"url\" className=\"space-y-3\">\n              <div>\n                <Label className=\"text-xs font-medium text-gray-700\">Image URL</Label>\n                <Input\n                  type=\"url\"\n                  placeholder=\"https://example.com/image.jpg\"\n                  value={imageUrl}\n                  onChange={(e) => handleUrlChange(e.target.value)}\n                  className=\"mt-1 text-xs\"\n                />\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"upload\" className=\"space-y-3\">\n              <div>\n                <Label className=\"text-xs font-medium text-gray-700\">Upload Image</Label>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  onChange={handleFileUpload}\n                  className=\"hidden\"\n                />\n                <Button\n                  variant=\"outline\"\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"w-full mt-1 h-8 text-xs\"\n                >\n                  <Upload className=\"h-3 w-3 mr-1\" />\n                  Choose Image File\n                </Button>\n                {uploadError && (\n                  <p className=\"text-xs text-red-500 mt-1\">{uploadError}</p>\n                )}\n              </div>\n            </TabsContent>\n          </Tabs>\n\n          {/* Alt Text */}\n          <div>\n            <Label className=\"text-xs font-medium text-gray-700\">Alt Text</Label>\n            <Input\n              placeholder=\"Describe the image\"\n              value={altText}\n              onChange={(e) => setAltText(e.target.value)}\n              className=\"mt-1 text-xs\"\n            />\n          </div>\n\n          {/* Size */}\n          <div>\n            <Label className=\"text-xs font-medium text-gray-700\">Size</Label>\n            <Select value={size} onValueChange={(value: any) => setSize(value)}>\n              <SelectTrigger className=\"w-full mt-1 h-8 text-xs\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {IMAGE_SIZES.map((sizeOption) => (\n                  <SelectItem key={sizeOption.value} value={sizeOption.value}>\n                    <div className=\"flex items-center gap-2\">\n                      <div\n                        className=\"border border-gray-300 bg-gray-100\"\n                        style={{\n                          width: Math.min(sizeOption.width / 2, 16),\n                          height: Math.min(sizeOption.height / 2, 16),\n                        }}\n                      />\n                      <span>{sizeOption.label} ({sizeOption.width}×{sizeOption.height})</span>\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Alignment */}\n          <div>\n            <Label className=\"text-xs font-medium text-gray-700\">Vertical Alignment</Label>\n            <div className=\"grid grid-cols-4 gap-1 mt-1\">\n              {IMAGE_ALIGNMENTS.map(({ value, label, icon: Icon }) => (\n                <Button\n                  key={value}\n                  variant={align === value ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setAlign(value as any)}\n                  className=\"h-8 text-xs\"\n                  title={label}\n                >\n                  <Icon className=\"h-3 w-3\" />\n                </Button>\n              ))}\n            </div>\n          </div>\n\n          {/* Text Wrap */}\n          <div className=\"flex items-center justify-between\">\n            <Label className=\"text-xs font-medium text-gray-700\">Text Wrapping</Label>\n            <Button\n              variant={textWrap ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setTextWrap(!textWrap)}\n              className=\"h-8 text-xs\"\n            >\n              {textWrap ? 'On' : 'Off'}\n            </Button>\n          </div>\n\n          {/* Preview */}\n          {imageUrl && (\n            <div>\n              <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n              <div className=\"mt-1 p-3 bg-gray-50 rounded border\">\n                <p className=\"text-sm leading-relaxed\">\n                  This is sample text with an{' '}\n                  <img\n                    src={imageUrl}\n                    alt={altText}\n                    style={{\n                      width: IMAGE_SIZES.find(s => s.value === size)?.width,\n                      height: IMAGE_SIZES.find(s => s.value === size)?.height,\n                      verticalAlign: align,\n                      display: textWrap ? 'inline' : 'inline-block',\n                    }}\n                    className=\"mx-1\"\n                  />{' '}\n                  inline image inserted in the middle of the paragraph.\n                </p>\n              </div>\n            </div>\n          )}\n\n          {/* Actions */}\n          <div className=\"flex justify-between gap-2 pt-2 border-t\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleReset}\n              className=\"text-xs\"\n            >\n              Reset\n            </Button>\n            <Button\n              size=\"sm\"\n              onClick={handleInsert}\n              disabled={!imageUrl}\n              className=\"text-xs\"\n            >\n              Insert Image\n            </Button>\n          </div>\n\n          {/* Tips */}\n          <div className=\"text-xs text-gray-500 space-y-1 pt-2 border-t\">\n            <p><strong>Tip:</strong> Position cursor where you want the image</p>\n            <p><strong>Sizes:</strong> Small for icons, Medium for emphasis, Large for illustration</p>\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nexport default InlineImageInserter;","/**\n * ParagraphBlock Component\n * \n * 구텐베르크 수준의 단락 블록 - 완전히 새롭게 구현\n * 직접 조작 원칙과 시각적 피드백 강화\n */\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { cn } from '@/lib/utils';\nimport { \n  Bold, \n  Italic, \n  Link2, \n  Strikethrough,\n  Code,\n  Underline,\n  Highlighter,\n  Subscript,\n  Superscript,\n  RemoveFormatting,\n  MoreHorizontal,\n  Type\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from '@/components/ui/popover';\nimport { Input } from '@/components/ui/input';\nimport { RichText } from '../gutenberg/RichText';\nimport { BlockControls, ToolbarGroup, ToolbarButton, AlignmentToolbar } from '../gutenberg/BlockControls';\nimport { DropCapController } from './paragraph/DropCapController';\nimport { TypographyPanel } from './paragraph/TypographyPanel';\nimport { HighlightSelector } from './paragraph/HighlightSelector';\nimport { InlineImageInserter, InlineImageData } from './paragraph/InlineImageInserter';\nimport './paragraph/paragraph-styles.css';\n\ninterface ParagraphBlockProps {\n  id: string;\n  content: string;\n  onChange: (content: string, attributes?: any) => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after', type?: string) => void;\n  isSelected: boolean;\n  onSelect: () => void;\n  attributes?: {\n    align?: 'left' | 'center' | 'right' | 'justify';\n    dropCap?: boolean;\n    dropCapLines?: number;\n    dropCapColor?: string;\n    dropCapFontSize?: number;\n    dropCapFontWeight?: number;\n    fontSize?: number;\n    lineHeight?: number;\n    letterSpacing?: number;\n    wordSpacing?: number;\n    textColor?: string;\n    backgroundColor?: string;\n    highlightColor?: string;\n    highlightOpacity?: number;\n    padding?: number;\n    margin?: number;\n    borderRadius?: number;\n    fontWeight?: number;\n    fontStyle?: 'normal' | 'italic';\n    textTransform?: 'none' | 'uppercase' | 'lowercase' | 'capitalize';\n  };\n}\n\nconst ParagraphBlock: React.FC<ParagraphBlockProps> = ({\n  id: _id,  // Prefixed with underscore since not used directly\n  content,\n  onChange,\n  onDelete,\n  onDuplicate: _onDuplicate,  // Not used in this implementation\n  onMoveUp: _onMoveUp,  // Not used in this implementation\n  onMoveDown: _onMoveDown,  // Not used in this implementation\n  onAddBlock,\n  isSelected,\n  onSelect,\n  attributes = {}\n}) => {\n  // State\n  const [localContent, setLocalContent] = useState(content);\n  const [isHovered, setIsHovered] = useState(false);\n  const [isFocused, setIsFocused] = useState(false);\n  const [showLinkPopover, setShowLinkPopover] = useState(false);\n  const [linkUrl, setLinkUrl] = useState('');\n  const [selectedText, setSelectedText] = useState('');\n  const [showDropCapSettings, setShowDropCapSettings] = useState(false);\n  const [showTypographySettings, setShowTypographySettings] = useState(false);\n  const blockRef = useRef<HTMLDivElement>(null);\n  const editorRef = useRef<HTMLDivElement>(null);\n  \n  // Default attributes with fallbacks\n  const {\n    align = 'left',\n    dropCap = false,\n    dropCapLines = 3,\n    dropCapColor = '#000000',\n    dropCapFontSize = 64,\n    dropCapFontWeight = 700,\n    fontSize = 16,\n    lineHeight = 1.6,\n    letterSpacing = 0,\n    wordSpacing = 0,\n    textColor = '#1e293b',\n    backgroundColor = '',\n    highlightColor = '',\n    highlightOpacity = 0.3,\n    padding = 0,\n    margin = 0,\n    borderRadius = 0,\n    fontWeight = 400,\n    fontStyle = 'normal',\n    textTransform = 'none'\n  } = attributes;\n\n  // Sync content changes\n  useEffect(() => {\n    setLocalContent(content);\n  }, [content]);\n\n  // Auto-focus when selected\n  useEffect(() => {\n    if (isSelected && editorRef.current) {\n      editorRef.current.focus();\n    }\n  }, [isSelected]);\n\n  // Handle content change\n  const handleContentChange = useCallback((newContent: string) => {\n    setLocalContent(newContent);\n    onChange(newContent, attributes);\n  }, [onChange, attributes]);\n\n  // Update attribute helper\n  const updateAttribute = useCallback((key: string, value: any) => {\n    onChange(localContent, { ...attributes, [key]: value });\n  }, [onChange, localContent, attributes]);\n\n  // Handle text selection for link insertion\n  const handleTextSelection = useCallback(() => {\n    const selection = window.getSelection();\n    if (selection && selection.toString()) {\n      setSelectedText(selection.toString());\n    }\n  }, []);\n\n  // Apply text formatting\n  const applyFormat = useCallback((command: string, value?: string) => {\n    document.execCommand(command, false, value);\n    // Update content after formatting\n    if (editorRef.current) {\n      handleContentChange(editorRef.current.innerHTML);\n    }\n  }, [handleContentChange]);\n\n  // Apply highlight to selected text\n  const applyHighlight = useCallback(() => {\n    const selection = window.getSelection();\n    if (selection && selection.toString() && highlightColor) {\n      const rgba = `rgba(${highlightColor.slice(1).match(/.{2}/g)?.map(hex => parseInt(hex, 16)).join(', ')}, ${highlightOpacity})`;\n      applyFormat('hiliteColor', rgba);\n    }\n  }, [highlightColor, highlightOpacity, applyFormat]);\n\n  // Insert inline image\n  const insertInlineImage = useCallback((imageData: InlineImageData) => {\n    const selection = window.getSelection();\n    if (selection && editorRef.current) {\n      const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n\n      if (range) {\n        // Create image element\n        const img = document.createElement('img');\n        img.src = imageData.src;\n        img.alt = imageData.alt;\n        img.style.width = `${imageData.width}px`;\n        img.style.height = `${imageData.height}px`;\n        img.style.verticalAlign = imageData.align;\n        img.style.display = imageData.textWrap ? 'inline' : 'inline-block';\n        img.style.margin = '0 4px';\n        img.className = 'inline-image';\n\n        // Insert at cursor position\n        range.insertNode(img);\n\n        // Move cursor after image\n        range.setStartAfter(img);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        // Update content\n        handleContentChange(editorRef.current.innerHTML);\n      }\n    }\n  }, [handleContentChange]);\n\n  // Reset drop cap to defaults\n  const resetDropCap = useCallback(() => {\n    onChange(localContent, {\n      ...attributes,\n      dropCapLines: 3,\n      dropCapColor: '#000000',\n      dropCapFontSize: 64,\n      dropCapFontWeight: 700,\n    });\n  }, [localContent, attributes, onChange]);\n\n  // Reset typography to defaults\n  const resetTypography = useCallback(() => {\n    onChange(localContent, {\n      ...attributes,\n      fontSize: 16,\n      lineHeight: 1.6,\n      letterSpacing: 0,\n      wordSpacing: 0,\n      fontWeight: 400,\n      fontStyle: 'normal',\n      textTransform: 'none',\n    });\n  }, [localContent, attributes, onChange]);\n\n  // Insert link with better UX\n  const insertLink = useCallback(() => {\n    const selection = window.getSelection();\n    if (selection && selection.toString()) {\n      setSelectedText(selection.toString());\n      setShowLinkPopover(true);\n    } else {\n      // If no text selected, prompt to select text first\n      alert('Please select some text first to add a link');\n    }\n  }, []);\n\n  // Apply link to selected text\n  const applyLink = useCallback(() => {\n    if (linkUrl && selectedText) {\n      applyFormat('createLink', linkUrl);\n      setShowLinkPopover(false);\n      setLinkUrl('');\n      setSelectedText('');\n    }\n  }, [linkUrl, selectedText, applyFormat]);\n\n  // Handle Enter key for block split\n  const handleSplit = useCallback((value: string, isOriginal?: boolean) => {\n    if (isOriginal) {\n      onChange(value, attributes);\n    }\n    // Create new paragraph block after this one\n    onAddBlock?.('after', 'paragraph');\n  }, [onChange, attributes, onAddBlock]);\n\n  // Handle block merge\n  const handleMerge = useCallback(() => {\n    // Merge with previous block logic would go here\n  }, []);\n\n  // Handle block removal when empty\n  const handleRemove = useCallback(() => {\n    if (!localContent || localContent === '' || localContent === '<br>') {\n      onDelete();\n    }\n  }, [localContent, onDelete]);\n\n  // Keyboard shortcuts\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\n    // Format shortcuts\n    if (e.ctrlKey || e.metaKey) {\n      switch (e.key) {\n        case 'b':\n          e.preventDefault();\n          applyFormat('bold');\n          break;\n        case 'i':\n          e.preventDefault();\n          applyFormat('italic');\n          break;\n        case 'u':\n          e.preventDefault();\n          applyFormat('underline');\n          break;\n        case 'k':\n          e.preventDefault();\n          insertLink();\n          break;\n      }\n    }\n    \n    // Block navigation\n    if (!e.ctrlKey && !e.metaKey && !e.shiftKey) {\n      if (e.key === '/' && localContent === '') {\n        // Trigger block inserter\n        e.preventDefault();\n        // This would open block selector in real implementation\n      }\n    }\n  }, [applyFormat, insertLink, localContent]);\n\n  // Visual state classes\n  const blockClasses = cn(\n    'paragraph-test-block relative transition-all duration-200',\n    'before:content-[\"\"] before:absolute before:inset-0 before:pointer-events-none',\n    'before:border-2 before:rounded before:transition-all',\n    !isSelected && !isHovered && 'before:border-transparent',\n    isHovered && !isSelected && 'before:border-gray-200 before:border-dashed',\n    isSelected && 'before:border-blue-500',\n    isSelected && 'before:shadow-sm'\n  );\n\n  // Content area classes with enhanced drop cap\n  const contentClasses = cn(\n    'paragraph-content relative',\n    'min-h-[1.8em] outline-none',\n    align === 'center' && 'text-center',\n    align === 'right' && 'text-right',\n    align === 'justify' && 'text-justify',\n    isFocused && 'ring-2 ring-blue-500 ring-opacity-20 rounded'\n  );\n\n  // Drop cap styles\n  const dropCapStyles = dropCap ? {\n    '--drop-cap-font-size': `${dropCapFontSize}px`,\n    '--drop-cap-color': dropCapColor,\n    '--drop-cap-font-weight': dropCapFontWeight,\n    '--drop-cap-line-height': `${dropCapLines * 0.8}rem`,\n  } as React.CSSProperties : {};\n\n  // Content styles with enhanced typography\n  const contentStyles: React.CSSProperties = {\n    fontSize: `${fontSize}px`,\n    lineHeight,\n    letterSpacing: letterSpacing ? `${letterSpacing}em` : undefined,\n    wordSpacing: wordSpacing ? `${wordSpacing}em` : undefined,\n    color: textColor || undefined,\n    backgroundColor: backgroundColor || undefined,\n    padding: padding ? `${padding}px` : undefined,\n    margin: margin ? `${margin}px` : undefined,\n    borderRadius: borderRadius ? `${borderRadius}px` : undefined,\n    fontWeight,\n    fontStyle,\n    textTransform,\n    ...dropCapStyles,\n  };\n\n  return (\n    <>\n      {/* Enhanced Block Controls */}\n      {isSelected && (\n        <BlockControls>\n          {/* Primary Text Formatting */}\n          <ToolbarGroup>\n            <ToolbarButton\n              icon={<Bold className=\"h-4 w-4\" />}\n              label=\"Bold (Ctrl+B)\"\n              onClick={() => applyFormat('bold')}\n              isActive={document.queryCommandState('bold')}\n            />\n            <ToolbarButton\n              icon={<Italic className=\"h-4 w-4\" />}\n              label=\"Italic (Ctrl+I)\"\n              onClick={() => applyFormat('italic')}\n              isActive={document.queryCommandState('italic')}\n            />\n            <ToolbarButton\n              icon={<Underline className=\"h-4 w-4\" />}\n              label=\"Underline (Ctrl+U)\"\n              onClick={() => applyFormat('underline')}\n              isActive={document.queryCommandState('underline')}\n            />\n            <ToolbarButton\n              icon={<Strikethrough className=\"h-4 w-4\" />}\n              label=\"Strikethrough\"\n              onClick={() => applyFormat('strikeThrough')}\n              isActive={document.queryCommandState('strikeThrough')}\n            />\n          </ToolbarGroup>\n\n          {/* Link, Image and Code */}\n          <ToolbarGroup>\n            <Popover open={showLinkPopover} onOpenChange={setShowLinkPopover}>\n              <PopoverTrigger>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-9 px-2\"\n                  onClick={insertLink}\n                >\n                  <Link2 className=\"h-4 w-4\" />\n                </Button>\n              </PopoverTrigger>\n              <PopoverContent className=\"w-80\">\n                <div className=\"space-y-2\">\n                  <h4 className=\"font-medium text-sm\">Add Link</h4>\n                  <Input\n                    placeholder=\"https://example.com\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                    onKeyDown={(e) => e.key === 'Enter' && applyLink()}\n                  />\n                  <div className=\"flex justify-end gap-2\">\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => setShowLinkPopover(false)}\n                    >\n                      Cancel\n                    </Button>\n                    <Button size=\"sm\" onClick={applyLink}>\n                      Apply\n                    </Button>\n                  </div>\n                </div>\n              </PopoverContent>\n            </Popover>\n\n            <InlineImageInserter onInsert={insertInlineImage} />\n\n            <ToolbarButton\n              icon={<Code className=\"h-4 w-4\" />}\n              label=\"Inline Code\"\n              onClick={() => {\n                const selection = window.getSelection();\n                if (selection && selection.toString()) {\n                  applyFormat('insertHTML', `<code>${selection.toString()}</code>`);\n                }\n              }}\n            />\n          </ToolbarGroup>\n\n          {/* Advanced Formatting */}\n          <ToolbarGroup>\n            <HighlightSelector\n              selectedColor={highlightColor}\n              opacity={highlightOpacity}\n              onColorChange={(color) => updateAttribute('highlightColor', color)}\n              onOpacityChange={(opacity) => updateAttribute('highlightOpacity', opacity)}\n              onClear={() => updateAttribute('highlightColor', '')}\n              onApply={applyHighlight}\n            />\n\n            <DropdownMenu>\n              <DropdownMenuTrigger>\n                <Button variant=\"ghost\" size=\"sm\" className=\"h-9 px-2\">\n                  <MoreHorizontal className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent>\n                <DropdownMenuItem onClick={() => applyFormat('subscript')}>\n                  <Subscript className=\"h-4 w-4 mr-2\" />\n                  Subscript\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => applyFormat('superscript')}>\n                  <Superscript className=\"h-4 w-4 mr-2\" />\n                  Superscript\n                </DropdownMenuItem>\n                <DropdownMenuSeparator />\n                <DropdownMenuItem onClick={() => setShowDropCapSettings(!showDropCapSettings)}>\n                  <Type className=\"h-4 w-4 mr-2\" />\n                  Drop Cap Settings\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => setShowTypographySettings(!showTypographySettings)}>\n                  <Type className=\"h-4 w-4 mr-2\" />\n                  Typography Settings\n                </DropdownMenuItem>\n                <DropdownMenuSeparator />\n                <DropdownMenuItem onClick={() => applyFormat('removeFormat')}>\n                  <RemoveFormatting className=\"h-4 w-4 mr-2\" />\n                  Clear Formatting\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </ToolbarGroup>\n\n          {/* Text Alignment */}\n          <AlignmentToolbar\n            value={align}\n            onChange={(newAlign) => updateAttribute('align', newAlign)}\n          />\n        </BlockControls>\n      )}\n\n      {/* Inspector Controls removed - now handled by GutenbergSidebar */}\n\n      {/* Block Content with Enhanced Visual Feedback */}\n      <div\n        ref={blockRef}\n        className={blockClasses}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n        onClick={onSelect}\n        onKeyDown={handleKeyDown}\n      >\n        <div\n          ref={editorRef}\n          className={cn(\n            contentClasses,\n            dropCap && 'drop-cap-enabled',\n            dropCap && `lines-${dropCapLines}`\n          )}\n          style={contentStyles}\n          onFocus={() => setIsFocused(true)}\n          onBlur={() => setIsFocused(false)}\n          onMouseUp={handleTextSelection}\n        >\n          <RichText\n            tagName=\"p\"\n            value={localContent}\n            onChange={handleContentChange}\n            onSplit={handleSplit}\n            onMerge={handleMerge}\n            onRemove={handleRemove}\n            placeholder=\"Start writing or type / to choose a block\"\n            allowedFormats={[\n              'core/bold',\n              'core/italic',\n              'core/link',\n              'core/strikethrough',\n              'core/code',\n              'core/underline',\n              'core/subscript',\n              'core/superscript'\n            ]}\n          />\n        </div>\n        \n        {/* Hover hint when empty */}\n        {!localContent && isHovered && !isSelected && (\n          <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n            <span className=\"text-sm text-gray-400\">\n              Click to start writing\n            </span>\n          </div>\n        )}\n      </div>\n\n      {/* Drop Cap Settings Panel */}\n      {isSelected && showDropCapSettings && (\n        <div className=\"mt-4\">\n          <DropCapController\n            isEnabled={dropCap}\n            lines={dropCapLines}\n            color={dropCapColor}\n            fontSize={dropCapFontSize}\n            fontWeight={dropCapFontWeight}\n            onToggle={(enabled) => updateAttribute('dropCap', enabled)}\n            onLinesChange={(lines) => updateAttribute('dropCapLines', lines)}\n            onColorChange={(color) => updateAttribute('dropCapColor', color)}\n            onFontSizeChange={(size) => updateAttribute('dropCapFontSize', size)}\n            onFontWeightChange={(weight) => updateAttribute('dropCapFontWeight', weight)}\n            onReset={resetDropCap}\n          />\n        </div>\n      )}\n\n      {/* Typography Settings Panel */}\n      {isSelected && showTypographySettings && (\n        <div className=\"mt-4\">\n          <TypographyPanel\n            fontSize={fontSize}\n            lineHeight={lineHeight}\n            letterSpacing={letterSpacing}\n            wordSpacing={wordSpacing}\n            textTransform={textTransform}\n            fontWeight={fontWeight}\n            fontStyle={fontStyle}\n            onFontSizeChange={(size) => updateAttribute('fontSize', size)}\n            onLineHeightChange={(height) => updateAttribute('lineHeight', height)}\n            onLetterSpacingChange={(spacing) => updateAttribute('letterSpacing', spacing)}\n            onWordSpacingChange={(spacing) => updateAttribute('wordSpacing', spacing)}\n            onTextTransformChange={(transform) => updateAttribute('textTransform', transform)}\n            onFontWeightChange={(weight) => updateAttribute('fontWeight', weight)}\n            onFontStyleChange={(style) => updateAttribute('fontStyle', style)}\n            onReset={resetTypography}\n          />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ParagraphBlock;","/**\n * EnhancedBlockWrapper Component\n * 향상된 블록 래퍼 - 완벽한 블록 조작 기능\n */\n\nimport { useState, useRef, useEffect, ReactNode } from 'react';\nimport { cn } from '@/lib/utils';\nimport { \n  GripVertical, \n  Plus,\n  Copy,\n  Trash2,\n  ChevronUp,\n  ChevronDown,\n  MoreVertical,\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  AlignJustify,\n  Check,\n  ChevronDown as ChevronDownIcon,\n  Bold,\n  Italic,\n  Type,\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\n\ninterface EnhancedBlockWrapperProps {\n  id: string;\n  type: string;\n  children: ReactNode;\n  isSelected: boolean;\n  onSelect: () => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after') => void;\n  onCopy?: () => void;\n  onPaste?: () => void;\n  isDragging?: boolean;\n  canMoveUp?: boolean;\n  canMoveDown?: boolean;\n  className?: string;\n  onDragStart?: () => void;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDrop?: (e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n  customToolbarContent?: ReactNode;\n  customSidebarContent?: ReactNode;\n  onAlignChange?: (align: 'left' | 'center' | 'right' | 'justify') => void;\n  currentAlign?: 'left' | 'center' | 'right' | 'justify';\n  onToggleBold?: () => void;\n  onToggleItalic?: () => void;\n  onChangeType?: (newType: string) => void;\n  currentType?: string;\n  isBold?: boolean;\n  isItalic?: boolean;\n}\n\nconst EnhancedBlockWrapper: React.FC<EnhancedBlockWrapperProps> = ({\n  id,\n  type,\n  children,\n  isSelected,\n  onSelect,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  onCopy,\n  onPaste,\n  isDragging = false,\n  canMoveUp = true,\n  canMoveDown = true,\n  className,\n  onDragStart,\n  onDragOver: _onDragOver,\n  onDrop: _onDrop,\n  onDragEnd,\n  customToolbarContent,\n  onAlignChange,\n  currentAlign = 'left',\n  onToggleBold,\n  onToggleItalic,\n  onChangeType,\n  currentType,\n  isBold = false,\n  isItalic = false\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n  const [showToolbar, setShowToolbar] = useState(false);\n  const blockRef = useRef<HTMLDivElement>(null);\n\n  // Show toolbar when selected or hovered\n  useEffect(() => {\n    setShowToolbar(isSelected || isHovered);\n  }, [isSelected, isHovered]);\n\n  // Auto-focus block when selected\n  useEffect(() => {\n    if (isSelected && blockRef.current) {\n      const focusableElement = blockRef.current.querySelector(\n        '[contenteditable], input, textarea'\n      );\n      if (focusableElement instanceof HTMLElement) {\n        focusableElement.focus();\n      }\n    }\n  }, [isSelected]);\n\n  // Handle keyboard shortcuts\n  useEffect(() => {\n    if (!isSelected) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Delete key - remove block\n      if (e.key === 'Delete' && !e.shiftKey && !e.ctrlKey) {\n        const target = e.target as HTMLElement;\n        // Only delete if not editing text\n        if (!target.isContentEditable && target.tagName !== 'INPUT' && target.tagName !== 'TEXTAREA') {\n          e.preventDefault();\n          onDelete();\n        }\n      }\n\n      // Ctrl/Cmd + C - copy block\n      if ((e.ctrlKey || e.metaKey) && e.key === 'c' && !e.shiftKey) {\n        const selection = window.getSelection();\n        if (!selection?.toString()) {\n          e.preventDefault();\n          onCopy?.();\n        }\n      }\n\n      // Ctrl/Cmd + V - paste block\n      if ((e.ctrlKey || e.metaKey) && e.key === 'v' && !e.shiftKey) {\n        const target = e.target as HTMLElement;\n        if (!target.isContentEditable && target.tagName !== 'INPUT' && target.tagName !== 'TEXTAREA') {\n          e.preventDefault();\n          onPaste?.();\n        }\n      }\n\n      // Ctrl/Cmd + D - duplicate block\n      if ((e.ctrlKey || e.metaKey) && e.key === 'd') {\n        e.preventDefault();\n        onDuplicate();\n      }\n\n      // Alt + Up/Down - move block\n      if (e.altKey && !e.shiftKey) {\n        if (e.key === 'ArrowUp' && canMoveUp) {\n          e.preventDefault();\n          onMoveUp();\n        } else if (e.key === 'ArrowDown' && canMoveDown) {\n          e.preventDefault();\n          onMoveDown();\n        }\n      }\n\n      // Tab/Shift+Tab - navigate between blocks\n      if (e.key === 'Tab') {\n        // This will be handled by parent component for block navigation\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isSelected, onDelete, onCopy, onPaste, onDuplicate, onMoveUp, onMoveDown, canMoveUp, canMoveDown]);\n\n  return (\n    <div\n      ref={blockRef}\n      data-block-id={id}\n      data-block-type={type}\n      className={cn(\n        'block-wrapper group relative transition-all duration-200',\n        className\n      )}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onClick={(e) => {\n        e.stopPropagation();\n        onSelect();\n      }}\n    >\n      {/* Left side drag handle - removed from here, now in toolbar */}\n\n      {/* Block toolbar - integrated design with better positioning */}\n      {showToolbar && isSelected && (\n        <div className=\"absolute left-0 right-0 flex items-center justify-between z-50\" style={{ top: '-65px' }}>\n          <div className=\"flex items-center gap-1 bg-white border border-gray-200 rounded-lg shadow-lg px-1 py-1\">\n            {/* Drag handle - now in toolbar */}\n            <div\n              className=\"cursor-move p-1 hover:bg-gray-100 rounded flex items-center\"\n              draggable\n              onDragStart={(e) => {\n                e.dataTransfer.effectAllowed = 'move';\n                e.dataTransfer.setData('blockId', id);\n                onDragStart?.();\n              }}\n              onDragEnd={onDragEnd}\n              title=\"Drag to move block\"\n            >\n              <GripVertical className=\"h-4 w-4 text-gray-400\" />\n            </div>\n            \n            <div className=\"w-px h-5 bg-gray-200\" />\n            \n            {/* Block Type Selector (Heading levels, Paragraph) */}\n            {onChangeType && (\n              <>\n                <DropdownMenu>\n                  <DropdownMenuTrigger>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"h-7 px-1.5 gap-0.5 hover:bg-gray-100\"\n                      title=\"Block Type\"\n                    >\n                      {currentType === 'core/paragraph' && <Type className=\"h-4 w-4\" />}\n                      {currentType === 'core/heading' && <Heading2 className=\"h-4 w-4\" />}\n                      {(!currentType || currentType === 'core/paragraph') && <Type className=\"h-4 w-4\" />}\n                      <ChevronDownIcon className=\"h-3 w-3 text-gray-500\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent align=\"start\" className=\"w-44\">\n                    <DropdownMenuItem \n                      onClick={() => onChangeType('core/paragraph')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <Type className=\"h-4 w-4\" />\n                      <span>Paragraph</span>\n                      {currentType === 'core/paragraph' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuSeparator />\n                    <DropdownMenuItem \n                      onClick={() => onChangeType('core/heading-h1')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <Heading1 className=\"h-4 w-4\" />\n                      <span>Heading 1</span>\n                      {currentType === 'core/heading-h1' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onChangeType('core/heading-h2')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <Heading2 className=\"h-4 w-4\" />\n                      <span>Heading 2</span>\n                      {currentType === 'core/heading-h2' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onChangeType('core/heading-h3')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <Heading3 className=\"h-4 w-4\" />\n                      <span>Heading 3</span>\n                      {currentType === 'core/heading-h3' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onChangeType('core/heading-h4')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <Heading4 className=\"h-4 w-4\" />\n                      <span>Heading 4</span>\n                      {currentType === 'core/heading-h4' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onChangeType('core/heading-h5')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <Heading5 className=\"h-4 w-4\" />\n                      <span>Heading 5</span>\n                      {currentType === 'core/heading-h5' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onChangeType('core/heading-h6')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <Heading6 className=\"h-4 w-4\" />\n                      <span>Heading 6</span>\n                      {currentType === 'core/heading-h6' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n                <div className=\"w-px h-5 bg-gray-200\" />\n              </>\n            )}\n            \n            {/* Bold and Italic buttons for text blocks */}\n            {(onToggleBold || onToggleItalic) && (\n              <>\n                {onToggleBold && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className={cn(\n                      \"h-7 px-2 hover:bg-gray-100\",\n                      isBold && \"bg-gray-200\"\n                    )}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onToggleBold();\n                    }}\n                    title=\"Bold (Ctrl+B)\"\n                  >\n                    <Bold className=\"h-4 w-4\" />\n                  </Button>\n                )}\n                {onToggleItalic && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className={cn(\n                      \"h-7 px-2 hover:bg-gray-100\",\n                      isItalic && \"bg-gray-200\"\n                    )}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onToggleItalic();\n                    }}\n                    title=\"Italic (Ctrl+I)\"\n                  >\n                    <Italic className=\"h-4 w-4\" />\n                  </Button>\n                )}\n                <div className=\"w-px h-5 bg-gray-200\" />\n              </>\n            )}\n            \n            {/* Text Alignment Dropdown - only show for text blocks */}\n            {onAlignChange && (\n              <>\n                <DropdownMenu>\n                  <DropdownMenuTrigger>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"h-7 px-1.5 gap-0.5 hover:bg-gray-100\"\n                      title=\"Text Alignment\"\n                    >\n                      {currentAlign === 'center' && <AlignCenter className=\"h-4 w-4\" />}\n                      {currentAlign === 'right' && <AlignRight className=\"h-4 w-4\" />}\n                      {currentAlign === 'justify' && <AlignJustify className=\"h-4 w-4\" />}\n                      {(!currentAlign || currentAlign === 'left') && <AlignLeft className=\"h-4 w-4\" />}\n                      <ChevronDownIcon className=\"h-3 w-3 text-gray-500\" />\n                    </Button>\n                  </DropdownMenuTrigger>\n                  <DropdownMenuContent align=\"start\" className=\"w-44\">\n                    <DropdownMenuItem \n                      onClick={() => onAlignChange('left')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <AlignLeft className=\"h-4 w-4\" />\n                      <span>왼쪽 정렬</span>\n                      {(!currentAlign || currentAlign === 'left') && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onAlignChange('center')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <AlignCenter className=\"h-4 w-4\" />\n                      <span>가운데 정렬</span>\n                      {currentAlign === 'center' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onAlignChange('right')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <AlignRight className=\"h-4 w-4\" />\n                      <span>오른쪽 정렬</span>\n                      {currentAlign === 'right' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                    <DropdownMenuItem \n                      onClick={() => onAlignChange('justify')}\n                      className=\"gap-2 cursor-pointer\"\n                    >\n                      <AlignJustify className=\"h-4 w-4\" />\n                      <span>양쪽 정렬</span>\n                      {currentAlign === 'justify' && <Check className=\"h-4 w-4 ml-auto\" />}\n                    </DropdownMenuItem>\n                  </DropdownMenuContent>\n                </DropdownMenu>\n                <div className=\"w-px h-5 bg-gray-200\" />\n              </>\n            )}\n            \n            {/* Custom toolbar content (e.g., heading level selector) */}\n            {customToolbarContent}\n            \n            {/* Move buttons */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 px-2 hover:bg-gray-100\"\n              onClick={(e) => {\n                e.stopPropagation();\n                onMoveUp();\n              }}\n              disabled={!canMoveUp}\n              title=\"Move block up (Alt+↑)\"\n            >\n              <ChevronUp className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 px-2 hover:bg-gray-100\"\n              onClick={(e) => {\n                e.stopPropagation();\n                onMoveDown();\n              }}\n              disabled={!canMoveDown}\n              title=\"Move block down (Alt+↓)\"\n            >\n              <ChevronDown className=\"h-4 w-4\" />\n            </Button>\n            \n            <div className=\"w-px h-5 bg-gray-200\" />\n\n            {/* Duplicate button */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 px-2 hover:bg-gray-100\"\n              onClick={(e) => {\n                e.stopPropagation();\n                onDuplicate();\n              }}\n              title=\"Duplicate block (Ctrl+D)\"\n            >\n              <Copy className=\"h-4 w-4\" />\n            </Button>\n\n            {/* Delete button */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 px-2 hover:bg-red-100 hover:text-red-600\"\n              onClick={(e) => {\n                e.stopPropagation();\n                onDelete();\n              }}\n              title=\"Delete block (Delete)\"\n            >\n              <Trash2 className=\"h-4 w-4\" />\n            </Button>\n\n            <div className=\"w-px h-5 bg-gray-200\" />\n\n            {/* More options */}\n            <DropdownMenu>\n              <DropdownMenuTrigger>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-7 px-2 hover:bg-gray-100\"\n                >\n                  <MoreVertical className=\"h-4 w-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"start\">\n                <DropdownMenuItem onClick={() => onCopy?.()}>\n                  Copy block (Ctrl+C)\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => onPaste?.()}>\n                  Paste block (Ctrl+V)\n                </DropdownMenuItem>\n                <DropdownMenuSeparator />\n                <DropdownMenuItem onClick={() => onAddBlock?.('before')}>\n                  Add block before\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => onAddBlock?.('after')}>\n                  Add block after\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n\n          {/* Block type indicator */}\n          <div className=\"bg-gray-800 text-white text-xs px-2 py-1 rounded\">\n            {type.replace('core/', '').charAt(0).toUpperCase() + type.replace('core/', '').slice(1)}\n          </div>\n        </div>\n      )}\n\n      {/* Add block button - top */}\n      {isHovered && !isSelected && (\n        <button\n          className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-500 hover:bg-blue-600 text-white rounded-full p-1 opacity-0 hover:opacity-100 group-hover:opacity-100 transition-all z-40\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAddBlock?.('before');\n          }}\n          title=\"Add block before\"\n        >\n          <Plus className=\"h-3 w-3\" />\n        </button>\n      )}\n\n      {/* Block content with selection state */}\n      <div \n        className={cn(\n          'block-content relative rounded-sm transition-all duration-200',\n          'before:content-[\"\"] before:absolute before:inset-0 before:pointer-events-none',\n          'before:border-2 before:rounded-sm before:transition-all',\n          !isSelected && !isHovered && 'before:border-transparent',\n          isHovered && !isSelected && 'before:border-gray-200 hover:bg-gray-50',\n          isSelected && 'before:border-blue-500 before:shadow-md bg-blue-50/30',\n          isDragging && 'opacity-50'\n        )}\n      >\n        {children}\n      </div>\n\n      {/* Add block button - bottom */}\n      {isHovered && !isSelected && (\n        <button\n          className=\"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-blue-500 hover:bg-blue-600 text-white rounded-full p-1 opacity-0 hover:opacity-100 group-hover:opacity-100 transition-all z-40\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAddBlock?.('after');\n          }}\n          title=\"Add block after\"\n        >\n          <Plus className=\"h-3 w-3\" />\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default EnhancedBlockWrapper;","/**\n * EnhancedHeadingBlock Component\n * 헤딩 블록 - 툴바에 레벨 선택기 통합\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport EnhancedBlockWrapper from './EnhancedBlockWrapper';\nimport { cn } from '@/lib/utils';\n\ninterface EnhancedHeadingBlockProps {\n  id: string;\n  content: string;\n  onChange: (content: string, attributes?: any) => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after', type?: string) => void;\n  isSelected: boolean;\n  onSelect: () => void;\n  attributes?: {\n    level?: 1 | 2 | 3 | 4 | 5 | 6;\n    align?: 'left' | 'center' | 'right';\n    fontSize?: number;\n    textColor?: string;\n    backgroundColor?: string;\n    isBold?: boolean;\n    isItalic?: boolean;\n  };\n  canMoveUp?: boolean;\n  canMoveDown?: boolean;\n  isDragging?: boolean;\n  onDragStart?: () => void;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDrop?: (e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n  onCopy?: () => void;\n  onPaste?: () => void;\n  onChangeType?: (newType: string) => void;\n}\n\nconst EnhancedHeadingBlock: React.FC<EnhancedHeadingBlockProps> = ({\n  id,\n  content,\n  onChange,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  isSelected,\n  onSelect,\n  attributes = {},\n  canMoveUp = true,\n  canMoveDown = true,\n  isDragging,\n  onDragStart,\n  onDragOver,\n  onDrop,\n  onDragEnd,\n  onCopy,\n  onPaste,\n  onChangeType,\n}) => {\n  const [localContent, setLocalContent] = useState(content);\n  const editorRef = useRef<HTMLHeadingElement>(null);\n  const { level = 2, align = 'left', isBold = false, isItalic = false } = attributes;\n\n  // Handle alignment change\n  const handleAlignChange = (newAlign: 'left' | 'center' | 'right' | 'justify') => {\n    onChange(localContent, { ...attributes, align: newAlign });\n  };\n\n  // Sync content\n  useEffect(() => {\n    setLocalContent(content);\n    if (editorRef.current && !editorRef.current.textContent) {\n      editorRef.current.textContent = content;\n    }\n  }, [content]);\n\n  // Initialize content on mount\n  useEffect(() => {\n    if (editorRef.current && localContent) {\n      editorRef.current.textContent = localContent;\n    }\n  }, []);\n\n  // Handle content change\n  const handleInput = () => {\n    if (editorRef.current) {\n      const newContent = editorRef.current.textContent || '';\n      setLocalContent(newContent);\n      onChange(newContent, attributes);\n    }\n  };\n\n  // Handle level change\n  const handleLevelChange = (newLevel: number) => {\n    onChange(localContent, { ...attributes, level: newLevel as 1 | 2 | 3 | 4 | 5 | 6 });\n  };\n\n  // Handle bold toggle\n  const handleToggleBold = () => {\n    const newBold = !isBold;\n    onChange(localContent, { ...attributes, isBold: newBold });\n  };\n\n  // Handle italic toggle\n  const handleToggleItalic = () => {\n    const newItalic = !isItalic;\n    onChange(localContent, { ...attributes, isItalic: newItalic });\n  };\n\n  // Handle type change\n  const handleChangeType = (newType: string) => {\n    if (onChangeType) {\n      onChangeType(newType);\n    }\n  };\n\n  // Handle key events\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    // Enter key - create new paragraph\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      // Save current content\n      if (editorRef.current) {\n        const currentContent = editorRef.current.textContent || '';\n        onChange(currentContent, attributes);\n      }\n      // Add new paragraph block after\n      onAddBlock?.('after', 'core/paragraph');\n    }\n    \n    // Backspace on empty - delete block\n    if (e.key === 'Backspace' && localContent === '') {\n      e.preventDefault();\n      onDelete();\n    }\n  };\n\n  // Handle paste - plain text only\n  const handlePaste = (e: React.ClipboardEvent) => {\n    e.preventDefault();\n    const text = e.clipboardData.getData('text/plain');\n    document.execCommand('insertText', false, text);\n  };\n\n  // Size classes for different heading levels\n  const sizeClasses = {\n    1: 'text-4xl font-bold',\n    2: 'text-3xl font-bold',\n    3: 'text-2xl font-semibold',\n    4: 'text-xl font-semibold',\n    5: 'text-lg font-medium',\n    6: 'text-base font-medium',\n  };\n\n  const HeadingTag = `h${level}` as 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6';\n\n  // Custom toolbar content for heading block\n  const customToolbarContent = isSelected ? (\n    <div className=\"flex items-center gap-2 mr-2\">\n      <select\n        value={level.toString()}\n        onChange={(e) => handleLevelChange(parseInt(e.target.value))}\n        className=\"h-7 px-2 text-sm border border-gray-200 rounded hover:border-gray-300 focus:outline-none focus:border-blue-500\"\n      >\n        <option value=\"1\">H1</option>\n        <option value=\"2\">H2</option>\n        <option value=\"3\">H3</option>\n        <option value=\"4\">H4</option>\n        <option value=\"5\">H5</option>\n        <option value=\"6\">H6</option>\n      </select>\n    </div>\n  ) : null;\n\n  return (\n    <EnhancedBlockWrapper\n      id={id}\n      type=\"heading\"\n      isSelected={isSelected}\n      onSelect={onSelect}\n      onDelete={onDelete}\n      onDuplicate={onDuplicate}\n      onMoveUp={onMoveUp}\n      onMoveDown={onMoveDown}\n      onAddBlock={onAddBlock}\n      canMoveUp={canMoveUp}\n      canMoveDown={canMoveDown}\n      isDragging={isDragging}\n      onDragStart={onDragStart}\n      onDragOver={onDragOver}\n      onDrop={onDrop}\n      onDragEnd={onDragEnd}\n      onCopy={onCopy}\n      onPaste={onPaste}\n      customToolbarContent={customToolbarContent}\n      onAlignChange={handleAlignChange}\n      currentAlign={align}\n      onToggleBold={handleToggleBold}\n      onToggleItalic={handleToggleItalic}\n      onChangeType={handleChangeType}\n      currentType={`core/heading-h${level}`}\n      isBold={isBold}\n      isItalic={isItalic}\n    >\n      {/* 순수한 헤딩 콘텐츠만 - 컨트롤 없음 */}\n      <HeadingTag\n        ref={editorRef as any}\n        contentEditable\n        suppressContentEditableWarning\n        className={cn(\n          'heading-editor outline-none w-full',\n          'focus:outline-none',\n          sizeClasses[level],\n          align === 'center' && 'text-center',\n          align === 'right' && 'text-right',\n          !localContent && 'text-gray-400',\n          isBold && 'font-bold',\n          isItalic && 'italic'\n        )}\n        onInput={handleInput}\n        onKeyDown={handleKeyDown}\n        onPaste={handlePaste}\n        data-placeholder={`Heading ${level}`}\n        style={{\n          direction: 'ltr',\n          unicodeBidi: 'normal',\n          fontSize: attributes?.fontSize ? `${attributes.fontSize}px` : undefined,\n          color: attributes?.textColor || undefined,\n          backgroundColor: attributes?.backgroundColor || undefined\n        }}\n      />\n    </EnhancedBlockWrapper>\n  );\n};\n\nexport default EnhancedHeadingBlock;","/**\n * ListBlock Component\n * Inline editable list with Tab/Shift+Tab indentation control\n */\n\nimport { useState, useRef, useEffect } from 'react';\nimport { cn } from '@/lib/utils';\nimport {\n  List,\n  ListOrdered,\n  Plus,\n  Minus,\n  ChevronRight,\n  ChevronLeft,\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  Circle,\n  Square,\n  CheckSquare,\n  ArrowRight,\n  GripVertical,\n  ChevronUp,\n  ChevronDown\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport EnhancedBlockWrapper from './EnhancedBlockWrapper';\nimport './list/list-styles.css';\n\ninterface ListItem {\n  id: string;\n  content: string;\n  level: number;\n  checked?: boolean;\n}\n\ninterface ListBlockProps {\n  id: string;\n  onChange: (content: any, attributes?: any) => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after') => void;\n  isSelected: boolean;\n  onSelect: () => void;\n  attributes?: {\n    items?: ListItem[];\n    type?: 'ordered' | 'unordered' | 'checklist';\n    style?: 'disc' | 'circle' | 'square' | 'arrow' | 'dash' | 'plus' | 'star' | 'diamond' | 'triangle' | 'heart' | 'custom-emoji';\n    numbering?: 'decimal' | 'decimal-zero' | 'lower-roman' | 'upper-roman' | 'lower-alpha' | 'upper-alpha' | 'lower-greek' | 'parentheses' | 'brackets';\n    startNumber?: number;\n    align?: 'left' | 'center' | 'right';\n    color?: 'default' | 'blue' | 'green' | 'purple' | 'red' | 'orange';\n  };\n}\n\nconst ListBlock: React.FC<ListBlockProps> = ({\n  id,\n  onChange,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  isSelected,\n  onSelect,\n  attributes = {}\n}) => {\n  const {\n    items = [{ id: '1', content: '', level: 0 }],\n    type = 'unordered',\n    style = 'disc',\n    numbering = 'decimal',\n    startNumber = 1,\n    align = 'left',\n    color = 'default'\n  } = attributes;\n\n  const [localItems, setLocalItems] = useState<ListItem[]>(items);\n  const [editingItemId, setEditingItemId] = useState<string | null>(null);\n  const [focusedItemId, setFocusedItemId] = useState<string | null>(null);\n  const [draggingItemId, setDraggingItemId] = useState<string | null>(null);\n  const [dragOverItemId, setDragOverItemId] = useState<string | null>(null);\n  const itemRefs = useRef<{ [key: string]: HTMLElement | null }>({});\n\n  // Sync items\n  useEffect(() => {\n    setLocalItems(items);\n  }, [items]);\n\n  // Focus on editing item\n  useEffect(() => {\n    if (editingItemId && itemRefs.current[editingItemId]) {\n      const element = itemRefs.current[editingItemId];\n      element?.focus();\n      \n      // Select all text\n      if (element) {\n        const range = document.createRange();\n        range.selectNodeContents(element);\n        const selection = window.getSelection();\n        selection?.removeAllRanges();\n        selection?.addRange(range);\n      }\n    }\n  }, [editingItemId]);\n\n  // Update items\n  const updateItems = (newItems: ListItem[]) => {\n    setLocalItems(newItems);\n    onChange('', { ...attributes, items: newItems });\n  };\n\n  // Update attribute\n  const updateAttribute = (key: string, value: any) => {\n    onChange('', { ...attributes, [key]: value });\n  };\n\n  // Add new item\n  const addItem = (afterId?: string) => {\n    const newItem: ListItem = {\n      id: Date.now().toString(),\n      content: '',\n      level: 0,\n      checked: type === 'checklist' ? false : undefined\n    };\n\n    if (afterId) {\n      const index = localItems.findIndex(item => item.id === afterId);\n      const referenceItem = localItems[index];\n      newItem.level = referenceItem?.level || 0;\n      \n      const newItems = [...localItems];\n      newItems.splice(index + 1, 0, newItem);\n      updateItems(newItems);\n      \n      // Focus new item\n      setTimeout(() => setEditingItemId(newItem.id), 100);\n    } else {\n      updateItems([...localItems, newItem]);\n      setTimeout(() => setEditingItemId(newItem.id), 100);\n    }\n  };\n\n  // Remove item\n  const removeItem = (itemId: string) => {\n    if (localItems.length === 1) {\n      // Don't remove the last item, just clear it\n      updateItems([{ ...localItems[0], content: '' }]);\n    } else {\n      const newItems = localItems.filter(item => item.id !== itemId);\n      updateItems(newItems);\n    }\n  };\n\n  // Update item content\n  const updateItemContent = (itemId: string, content: string) => {\n    const newItems = localItems.map(item =>\n      item.id === itemId ? { ...item, content } : item\n    );\n    updateItems(newItems);\n  };\n\n  // Toggle checkbox\n  const toggleCheckbox = (itemId: string) => {\n    const newItems = localItems.map(item =>\n      item.id === itemId ? { ...item, checked: !item.checked } : item\n    );\n    updateItems(newItems);\n  };\n\n  // Indent item\n  const indentItem = (itemId: string) => {\n    const newItems = localItems.map(item =>\n      item.id === itemId && item.level < 3\n        ? { ...item, level: item.level + 1 }\n        : item\n    );\n    updateItems(newItems);\n  };\n\n  // Outdent item\n  const outdentItem = (itemId: string) => {\n    const newItems = localItems.map(item =>\n      item.id === itemId && item.level > 0\n        ? { ...item, level: item.level - 1 }\n        : item\n    );\n    updateItems(newItems);\n  };\n\n  // Move item up\n  const moveItemUp = (itemId: string) => {\n    const index = localItems.findIndex(item => item.id === itemId);\n    if (index > 0) {\n      const newItems = [...localItems];\n      [newItems[index - 1], newItems[index]] = [newItems[index], newItems[index - 1]];\n      updateItems(newItems);\n    }\n  };\n\n  // Move item down\n  const moveItemDown = (itemId: string) => {\n    const index = localItems.findIndex(item => item.id === itemId);\n    if (index < localItems.length - 1) {\n      const newItems = [...localItems];\n      [newItems[index], newItems[index + 1]] = [newItems[index + 1], newItems[index]];\n      updateItems(newItems);\n    }\n  };\n\n  // Drag and drop handlers\n  const handleDragStart = (e: React.DragEvent, itemId: string) => {\n    setDraggingItemId(itemId);\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', itemId);\n  };\n\n  const handleDragOver = (e: React.DragEvent, itemId: string) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    setDragOverItemId(itemId);\n  };\n\n  const handleDragLeave = () => {\n    setDragOverItemId(null);\n  };\n\n  const handleDrop = (e: React.DragEvent, targetItemId: string) => {\n    e.preventDefault();\n    const sourceItemId = e.dataTransfer.getData('text/plain');\n\n    if (sourceItemId && sourceItemId !== targetItemId) {\n      const sourceIndex = localItems.findIndex(item => item.id === sourceItemId);\n      const targetIndex = localItems.findIndex(item => item.id === targetItemId);\n\n      if (sourceIndex !== -1 && targetIndex !== -1) {\n        const newItems = [...localItems];\n        const [movedItem] = newItems.splice(sourceIndex, 1);\n        newItems.splice(targetIndex, 0, movedItem);\n        updateItems(newItems);\n      }\n    }\n\n    setDraggingItemId(null);\n    setDragOverItemId(null);\n  };\n\n  const handleDragEnd = () => {\n    setDraggingItemId(null);\n    setDragOverItemId(null);\n  };\n\n  // Handle key down for item\n  const handleItemKeyDown = (e: React.KeyboardEvent, itemId: string, index: number) => {\n    const item = localItems.find(i => i.id === itemId);\n    if (!item) return;\n\n    // Tab to indent\n    if (e.key === 'Tab' && !e.shiftKey) {\n      e.preventDefault();\n      if (item.level < 3) {\n        indentItem(itemId);\n      }\n    }\n\n    // Shift+Tab to outdent\n    if (e.key === 'Tab' && e.shiftKey) {\n      e.preventDefault();\n      if (item.level > 0) {\n        outdentItem(itemId);\n      }\n    }\n\n    // Enter to add new item\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      addItem(itemId);\n    }\n\n    // Backspace on empty item to remove or merge with previous\n    if (e.key === 'Backspace' && item.content === '') {\n      e.preventDefault();\n      if (localItems.length > 1) {\n        // Focus previous item\n        if (index > 0) {\n          const prevItem = localItems[index - 1];\n          setEditingItemId(prevItem.id);\n        }\n        removeItem(itemId);\n      }\n    }\n\n    // Arrow up to focus previous item\n    if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (index > 0) {\n        const prevItem = localItems[index - 1];\n        setEditingItemId(prevItem.id);\n      }\n    }\n\n    // Arrow down to focus next item\n    if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (index < localItems.length - 1) {\n        const nextItem = localItems[index + 1];\n        setEditingItemId(nextItem.id);\n      }\n    }\n  };\n\n  // Get enhanced list styles class\n  const getListStyleClass = () => {\n    const baseClass = 'enhanced-list-block';\n    const styleClass = type === 'ordered' ? `list-style-${numbering}` :\n                      type === 'checklist' ? 'list-checklist' :\n                      `list-style-${style}`;\n    const alignClass = `align-${align}`;\n    const colorClass = `list-color-${color}`;\n\n    return cn(baseClass, styleClass, alignClass, colorClass);\n  };\n\n  // Get list type icon\n  const getListTypeIcon = () => {\n    if (type === 'ordered') return <ListOrdered className=\"h-4 w-4\" />;\n    if (type === 'checklist') return <CheckSquare className=\"h-4 w-4\" />;\n    return <List className=\"h-4 w-4\" />;\n  };\n\n  // Get alignment classes\n  const getAlignmentClasses = () => {\n    switch (align) {\n      case 'center':\n        return 'text-center';\n      case 'right':\n        return 'text-right';\n      default:\n        return 'text-left';\n    }\n  };\n\n  return (\n    <EnhancedBlockWrapper\n      id={id}\n      type=\"list\"\n      isSelected={isSelected}\n      onSelect={onSelect}\n      onDelete={onDelete}\n      onDuplicate={onDuplicate}\n      onMoveUp={onMoveUp}\n      onMoveDown={onMoveDown}\n      onAddBlock={onAddBlock}\n    >\n      {/* Toolbar - shows when selected */}\n      {isSelected && (\n        <div className=\"flex items-center gap-2 mb-2 p-2 bg-gray-50 rounded\">\n          {/* Type selector */}\n          <DropdownMenu>\n            <DropdownMenuTrigger>\n              <Button variant=\"ghost\" size=\"sm\" className=\"gap-2\">\n                {getListTypeIcon()}\n                {type === 'ordered' ? 'Ordered' : type === 'checklist' ? 'Checklist' : 'Unordered'}\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent>\n              <DropdownMenuItem onClick={() => updateAttribute('type', 'unordered')}>\n                <List className=\"h-4 w-4 mr-2\" />\n                Unordered List\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => updateAttribute('type', 'ordered')}>\n                <ListOrdered className=\"h-4 w-4 mr-2\" />\n                Ordered List\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => updateAttribute('type', 'checklist')}>\n                <CheckSquare className=\"h-4 w-4 mr-2\" />\n                Checklist\n              </DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n\n          {/* Style selector for unordered lists */}\n          {type === 'unordered' && (\n            <Select value={style} onValueChange={(v) => updateAttribute('style', v)}>\n              <SelectTrigger className=\"w-32 h-8\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"disc\">• Disc</SelectItem>\n                <SelectItem value=\"circle\">○ Circle</SelectItem>\n                <SelectItem value=\"square\">■ Square</SelectItem>\n                <SelectItem value=\"arrow\">→ Arrow</SelectItem>\n                <SelectItem value=\"dash\">– Dash</SelectItem>\n                <SelectItem value=\"plus\">+ Plus</SelectItem>\n                <SelectItem value=\"star\">★ Star</SelectItem>\n                <SelectItem value=\"diamond\">◆ Diamond</SelectItem>\n                <SelectItem value=\"triangle\">▸ Triangle</SelectItem>\n                <SelectItem value=\"heart\">♥ Heart</SelectItem>\n                <SelectItem value=\"custom-emoji\">🔸 Emoji</SelectItem>\n              </SelectContent>\n            </Select>\n          )}\n\n          {/* Numbering style selector for ordered lists */}\n          {type === 'ordered' && (\n            <Select value={numbering} onValueChange={(v) => updateAttribute('numbering', v)}>\n              <SelectTrigger className=\"w-32 h-8\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"decimal\">1. Decimal</SelectItem>\n                <SelectItem value=\"decimal-zero\">01. Zero-padded</SelectItem>\n                <SelectItem value=\"lower-roman\">i. Lower Roman</SelectItem>\n                <SelectItem value=\"upper-roman\">I. Upper Roman</SelectItem>\n                <SelectItem value=\"lower-alpha\">a. Lower Alpha</SelectItem>\n                <SelectItem value=\"upper-alpha\">A. Upper Alpha</SelectItem>\n                <SelectItem value=\"lower-greek\">α. Lower Greek</SelectItem>\n                <SelectItem value=\"parentheses\">(1) Parentheses</SelectItem>\n                <SelectItem value=\"brackets\">[1] Brackets</SelectItem>\n              </SelectContent>\n            </Select>\n          )}\n\n          {/* Color theme selector */}\n          <Select value={color} onValueChange={(v) => updateAttribute('color', v)}>\n            <SelectTrigger className=\"w-24 h-8\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"default\">Default</SelectItem>\n              <SelectItem value=\"blue\">Blue</SelectItem>\n              <SelectItem value=\"green\">Green</SelectItem>\n              <SelectItem value=\"purple\">Purple</SelectItem>\n              <SelectItem value=\"red\">Red</SelectItem>\n              <SelectItem value=\"orange\">Orange</SelectItem>\n            </SelectContent>\n          </Select>\n\n          <div className=\"w-px h-6 bg-gray-300\" />\n\n          {/* Alignment */}\n          <div className=\"flex gap-1\">\n            <Button\n              variant={align === 'left' ? 'default' : 'ghost'}\n              size=\"sm\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => updateAttribute('align', 'left')}\n            >\n              <AlignLeft className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant={align === 'center' ? 'default' : 'ghost'}\n              size=\"sm\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => updateAttribute('align', 'center')}\n            >\n              <AlignCenter className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant={align === 'right' ? 'default' : 'ghost'}\n              size=\"sm\"\n              className=\"h-8 w-8 p-0\"\n              onClick={() => updateAttribute('align', 'right')}\n            >\n              <AlignRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          <div className=\"w-px h-6 bg-gray-300\" />\n\n          {/* Add item */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => addItem()}\n            className=\"gap-2\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            Add Item\n          </Button>\n        </div>\n      )}\n\n      {/* List items - Enhanced styling */}\n      <div className={getListStyleClass()}>\n        <ul>\n          {localItems.map((item, index) => (\n            <li\n              key={item.id}\n              className={cn(\n                'list-item-wrapper group',\n                'hover:bg-gray-50 rounded px-2 py-1 transition-all duration-200',\n                editingItemId === item.id && 'bg-blue-50',\n                type === 'checklist' && item.checked && 'checked',\n                draggingItemId === item.id && 'list-item-dragging',\n                dragOverItemId === item.id && 'list-item-drop-target'\n              )}\n              style={{\n                marginLeft: `${item.level * 24}px`,\n                '--start-number': startNumber - 1\n              } as React.CSSProperties}\n              onDragOver={(e) => handleDragOver(e, item.id)}\n              onDragLeave={handleDragLeave}\n              onDrop={(e) => handleDrop(e, item.id)}\n            >\n              {/* Item controls - show on hover */}\n              {isSelected && focusedItemId === item.id && (\n                <div className=\"flex gap-1 mr-2 opacity-0 group-hover:opacity-100\">\n                  {/* Drag handle */}\n                  <div\n                    className=\"cursor-move flex items-center justify-center h-6 w-6 text-gray-400 hover:text-gray-600\"\n                    draggable\n                    onDragStart={(e) => handleDragStart(e, item.id)}\n                    onDragEnd={handleDragEnd}\n                    title=\"Drag to reorder\"\n                  >\n                    <GripVertical className=\"h-3 w-3\" />\n                  </div>\n\n                  {/* Move up/down buttons */}\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0\"\n                    onClick={() => moveItemUp(item.id)}\n                    disabled={index === 0}\n                    title=\"Move up\"\n                  >\n                    <ChevronUp className=\"h-3 w-3\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0\"\n                    onClick={() => moveItemDown(item.id)}\n                    disabled={index === localItems.length - 1}\n                    title=\"Move down\"\n                  >\n                    <ChevronDown className=\"h-3 w-3\" />\n                  </Button>\n\n                  {/* Indent/outdent buttons */}\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0\"\n                    onClick={() => outdentItem(item.id)}\n                    disabled={item.level === 0}\n                    title=\"Decrease indent\"\n                  >\n                    <ChevronLeft className=\"h-3 w-3\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0\"\n                    onClick={() => indentItem(item.id)}\n                    disabled={item.level >= 3}\n                    title=\"Increase indent\"\n                  >\n                    <ChevronRight className=\"h-3 w-3\" />\n                  </Button>\n\n                  {/* Remove button */}\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0\"\n                    onClick={() => removeItem(item.id)}\n                    title=\"Remove item\"\n                  >\n                    <Minus className=\"h-3 w-3\" />\n                  </Button>\n                </div>\n              )}\n\n              {/* Checkbox for checklist */}\n              {type === 'checklist' && (\n                <button\n                  className=\"mr-2 flex-shrink-0\"\n                  onClick={() => toggleCheckbox(item.id)}\n                  contentEditable={false}\n                >\n                  {item.checked ? (\n                    <CheckSquare className=\"h-4 w-4 text-blue-600\" />\n                  ) : (\n                    <Square className=\"h-4 w-4 text-gray-400\" />\n                  )}\n                </button>\n              )}\n\n              {/* Item content with enhanced CSS marker */}\n              <div\n                ref={(el) => { itemRefs.current[item.id] = el; }}\n                contentEditable\n                suppressContentEditableWarning\n                className={cn(\n                  'list-item-content flex-1 outline-none min-h-[1.5em]',\n                  editingItemId === item.id && 'ring-2 ring-blue-500 ring-offset-1 rounded px-1',\n                  !item.content && 'text-gray-400',\n                  type === 'checklist' && item.checked && 'line-through text-gray-500'\n                )}\n                onFocus={() => {\n                  setEditingItemId(item.id);\n                  setFocusedItemId(item.id);\n                }}\n                onBlur={() => {\n                  setEditingItemId(null);\n                  setFocusedItemId(null);\n                }}\n                onInput={(e) => {\n                  const target = e.target as HTMLDivElement;\n                  updateItemContent(item.id, target.innerText);\n                }}\n                onKeyDown={(e) => handleItemKeyDown(e, item.id, index)}\n                data-placeholder=\"리스트 항목 입력...\"\n              >\n                {item.content || '리스트 항목 입력...'}\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </EnhancedBlockWrapper>\n  );\n};\n\nexport default ListBlock;","/**\n * CodeBlock Component\n * Code block with syntax highlighting and language selection\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport EnhancedBlockWrapper from './EnhancedBlockWrapper';\nimport { cn } from '@/lib/utils';\nimport { Copy, Check } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\n\ninterface CodeBlockProps {\n  id: string;\n  content: string;\n  onChange: (content: string, attributes?: any) => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after', type?: string) => void;\n  isSelected: boolean;\n  onSelect: () => void;\n  attributes?: {\n    language?: string;\n    code?: string;\n  };\n  canMoveUp?: boolean;\n  canMoveDown?: boolean;\n  isDragging?: boolean;\n  onDragStart?: () => void;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDrop?: (e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n  onCopy?: () => void;\n  onPaste?: () => void;\n  onChangeType?: (newType: string) => void;\n}\n\nconst LANGUAGES = [\n  { value: 'text', label: 'Plain Text' },\n  { value: 'javascript', label: 'JavaScript' },\n  { value: 'typescript', label: 'TypeScript' },\n  { value: 'html', label: 'HTML' },\n  { value: 'css', label: 'CSS' },\n  { value: 'python', label: 'Python' },\n  { value: 'java', label: 'Java' },\n  { value: 'json', label: 'JSON' },\n  { value: 'xml', label: 'XML' },\n  { value: 'sql', label: 'SQL' },\n  { value: 'bash', label: 'Bash' },\n  { value: 'php', label: 'PHP' },\n  { value: 'go', label: 'Go' },\n  { value: 'rust', label: 'Rust' },\n  { value: 'cpp', label: 'C++' },\n];\n\nconst CodeBlock: React.FC<CodeBlockProps> = ({\n  id,\n  content,\n  onChange,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  isSelected,\n  onSelect,\n  attributes = {},\n  canMoveUp = true,\n  canMoveDown = true,\n  isDragging,\n  onDragStart,\n  onDragOver,\n  onDrop,\n  onDragEnd,\n  onCopy,\n  onPaste,\n  onChangeType,\n}) => {\n  const { language = 'text', code: initialCode } = attributes;\n  const [localCode, setLocalCode] = useState(initialCode || content || '');\n  const [copied, setCopied] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Sync with external content changes\n  useEffect(() => {\n    if (initialCode !== undefined) {\n      setLocalCode(initialCode);\n    } else if (content !== localCode) {\n      setLocalCode(content);\n    }\n  }, [content, initialCode]);\n\n  // Auto-resize textarea\n  useEffect(() => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = Math.max(120, textarea.scrollHeight) + 'px';\n    }\n  }, [localCode]);\n\n  // Handle code change\n  const handleCodeChange = (newCode: string) => {\n    setLocalCode(newCode);\n    onChange(newCode, { ...attributes, language, code: newCode });\n  };\n\n  // Handle language change\n  const handleLanguageChange = (newLanguage: string) => {\n    onChange(localCode, { ...attributes, language: newLanguage, code: localCode });\n  };\n\n  // Handle copy to clipboard\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(localCode);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (error) {\n      // Error log removed\n    }\n  };\n\n  // Handle key events\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    // Tab key: Insert 2 spaces\n    if (e.key === 'Tab') {\n      e.preventDefault();\n      const textarea = e.target as HTMLTextAreaElement;\n      const start = textarea.selectionStart;\n      const end = textarea.selectionEnd;\n      const spaces = '  '; // 2 spaces\n\n      const newValue = localCode.substring(0, start) + spaces + localCode.substring(end);\n      handleCodeChange(newValue);\n\n      // Set cursor position after the inserted spaces\n      setTimeout(() => {\n        textarea.selectionStart = textarea.selectionEnd = start + spaces.length;\n      }, 0);\n    }\n\n    // Enter key: Maintain indentation\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      const textarea = e.target as HTMLTextAreaElement;\n      const start = textarea.selectionStart;\n      const lines = localCode.substring(0, start).split('\\n');\n      const currentLine = lines[lines.length - 1];\n      \n      // Calculate indentation\n      const indent = currentLine.match(/^(\\s*)/)?.[1] || '';\n      const newValue = localCode.substring(0, start) + '\\n' + indent + localCode.substring(start);\n      \n      handleCodeChange(newValue);\n      \n      // Set cursor position after the indentation\n      setTimeout(() => {\n        textarea.selectionStart = textarea.selectionEnd = start + 1 + indent.length;\n      }, 0);\n    }\n\n    // Backspace on empty code block\n    if (e.key === 'Backspace' && localCode.trim() === '') {\n      e.preventDefault();\n      onDelete();\n    }\n  };\n\n  // Handle paste - allow normal paste behavior\n\n  // Get syntax highlighting classes (basic)\n  const getSyntaxClasses = () => {\n    const baseClasses = 'font-mono text-sm leading-relaxed';\n    \n    switch (language) {\n      case 'javascript':\n      case 'typescript':\n        return cn(baseClasses, 'text-blue-800');\n      case 'html':\n      case 'xml':\n        return cn(baseClasses, 'text-orange-800');\n      case 'css':\n        return cn(baseClasses, 'text-purple-800');\n      case 'python':\n        return cn(baseClasses, 'text-green-800');\n      case 'json':\n        return cn(baseClasses, 'text-yellow-800');\n      default:\n        return cn(baseClasses, 'text-gray-800');\n    }\n  };\n\n  return (\n    <EnhancedBlockWrapper\n      id={id}\n      type=\"code\"\n      isSelected={isSelected}\n      onSelect={onSelect}\n      onDelete={onDelete}\n      onDuplicate={onDuplicate}\n      onMoveUp={onMoveUp}\n      onMoveDown={onMoveDown}\n      onAddBlock={onAddBlock}\n      canMoveUp={canMoveUp}\n      canMoveDown={canMoveDown}\n      isDragging={isDragging}\n      onDragStart={onDragStart}\n      onDragOver={onDragOver}\n      onDrop={onDrop}\n      onDragEnd={onDragEnd}\n      onCopy={onCopy}\n      onPaste={onPaste}\n      onChangeType={onChangeType}\n      currentType=\"core/code\"\n      customToolbarContent={\n        isSelected ? (\n          <div className=\"flex items-center gap-2\">\n            <Select value={language} onValueChange={handleLanguageChange}>\n              <SelectTrigger className=\"w-32 h-7 text-xs\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {LANGUAGES.map((lang) => (\n                  <SelectItem key={lang.value} value={lang.value} className=\"text-xs\">\n                    {lang.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            \n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 px-2 text-xs\"\n              onClick={handleCopy}\n            >\n              {copied ? (\n                <>\n                  <Check className=\"h-3 w-3 mr-1\" />\n                  Copied!\n                </>\n              ) : (\n                <>\n                  <Copy className=\"h-3 w-3 mr-1\" />\n                  Copy\n                </>\n              )}\n            </Button>\n          </div>\n        ) : null\n      }\n    >\n      <div className=\"relative bg-gray-50 border border-gray-200 rounded-lg overflow-hidden\">\n        {/* Language indicator */}\n        {!isSelected && language !== 'text' && (\n          <div className=\"absolute top-2 right-3 text-xs text-gray-500 uppercase\">\n            {LANGUAGES.find(l => l.value === language)?.label || language}\n          </div>\n        )}\n\n        {/* Code textarea */}\n        <textarea\n          ref={textareaRef}\n          value={localCode}\n          onChange={(e) => handleCodeChange(e.target.value)}\n          onKeyDown={handleKeyDown}\n          className={cn(\n            'w-full p-4 bg-transparent border-0 outline-none resize-none',\n            getSyntaxClasses(),\n            'placeholder:text-gray-400',\n            'scrollbar-thin scrollbar-track-gray-100 scrollbar-thumb-gray-300'\n          )}\n          placeholder=\"Enter code here...\"\n          spellCheck={false}\n          style={{ \n            minHeight: '120px',\n            tabSize: 2,\n            whiteSpace: 'pre'\n          }}\n        />\n      </div>\n\n      {/* Code preview (for when not selected) */}\n      {!isSelected && localCode && (\n        <div className=\"absolute inset-0 bg-gray-50 border border-gray-200 rounded-lg p-4 overflow-auto pointer-events-none\">\n          <pre className={cn(getSyntaxClasses(), 'whitespace-pre-wrap')}>\n            {localCode}\n          </pre>\n        </div>\n      )}\n    </EnhancedBlockWrapper>\n  );\n};\n\nexport default CodeBlock;","/**\n * QuoteStyleSwitcher Component\n * Quote와 Pullquote 스타일 간 전환 컨트롤\n */\n\nimport React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Quote, Maximize2, ArrowRight } from 'lucide-react';\n\ninterface QuoteStyleSwitcherProps {\n  currentStyle: 'default' | 'large' | 'pullquote';\n  onStyleChange: (style: 'default' | 'large' | 'pullquote') => void;\n}\n\nconst QUOTE_STYLES = [\n  {\n    value: 'default',\n    label: 'Default Quote',\n    description: 'Standard quote with left border',\n    icon: Quote,\n    preview: 'Regular blockquote style'\n  },\n  {\n    value: 'large',\n    label: 'Large Quote',\n    description: 'Emphasized quote with larger text',\n    icon: Quote,\n    preview: 'Larger, emphasized quote'\n  },\n  {\n    value: 'pullquote',\n    label: 'Pullquote',\n    description: 'Full-width highlighted quote',\n    icon: Maximize2,\n    preview: 'Full-width standout quote'\n  }\n] as const;\n\nexport const QuoteStyleSwitcher: React.FC<QuoteStyleSwitcherProps> = ({\n  currentStyle,\n  onStyleChange,\n}) => {\n  return (\n    <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex items-center gap-2\">\n        <Quote className=\"h-4 w-4\" />\n        <Label className=\"text-sm font-medium\">Quote Style</Label>\n      </div>\n\n      {/* Style Options */}\n      <div className=\"space-y-3\">\n        {QUOTE_STYLES.map((style) => {\n          const Icon = style.icon;\n          return (\n            <div\n              key={style.value}\n              className={`\n                relative cursor-pointer rounded-lg border-2 p-3 transition-all\n                ${currentStyle === style.value\n                  ? 'border-blue-500 bg-blue-50'\n                  : 'border-gray-200 hover:border-gray-300 bg-white'\n                }\n              `}\n              onClick={() => onStyleChange(style.value)}\n            >\n              {/* Header */}\n              <div className=\"flex items-center gap-3 mb-2\">\n                <Icon className=\"h-4 w-4 text-gray-600\" />\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium text-sm\">{style.label}</h4>\n                  <p className=\"text-xs text-gray-500\">{style.description}</p>\n                </div>\n                {currentStyle === style.value && (\n                  <div className=\"w-2 h-2 bg-blue-500 rounded-full\" />\n                )}\n              </div>\n\n              {/* Preview */}\n              <div className=\"text-xs text-gray-600 bg-gray-100 rounded p-2\">\n                {style.preview}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Quick Switch Buttons */}\n      <div className=\"flex gap-2 pt-2 border-t\">\n        <Button\n          variant={currentStyle === 'default' ? 'default' : 'outline'}\n          size=\"sm\"\n          onClick={() => onStyleChange('default')}\n          className=\"flex-1 text-xs\"\n        >\n          <Quote className=\"h-3 w-3 mr-1\" />\n          Quote\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => {\n            const currentIndex = QUOTE_STYLES.findIndex(s => s.value === currentStyle);\n            const nextIndex = (currentIndex + 1) % QUOTE_STYLES.length;\n            onStyleChange(QUOTE_STYLES[nextIndex].value);\n          }}\n          className=\"px-2\"\n          title=\"Switch to next style\"\n        >\n          <ArrowRight className=\"h-3 w-3\" />\n        </Button>\n        <Button\n          variant={currentStyle === 'pullquote' ? 'default' : 'outline'}\n          size=\"sm\"\n          onClick={() => onStyleChange('pullquote')}\n          className=\"flex-1 text-xs\"\n        >\n          <Maximize2 className=\"h-3 w-3 mr-1\" />\n          Pullquote\n        </Button>\n      </div>\n\n      {/* Tips */}\n      <div className=\"text-xs text-gray-500 space-y-1 pt-2 border-t\">\n        <p><strong>Quote:</strong> Standard blockquote with citation</p>\n        <p><strong>Pullquote:</strong> Full-width attention-grabbing quote</p>\n        <p><strong>Tip:</strong> Use pullquotes to highlight key insights</p>\n      </div>\n    </div>\n  );\n};\n\nexport default QuoteStyleSwitcher;","/**\n * CitationEditor Component\n * 고급 인용 출처 편집 컴포넌트\n */\n\nimport React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { User, Link as LinkIcon, MapPin, Calendar } from 'lucide-react';\n\ninterface CitationEditorProps {\n  citation: string;\n  citationUrl?: string;\n  author?: string;\n  source?: string;\n  position: 'left' | 'center' | 'right';\n  style: 'normal' | 'italic' | 'bold';\n  prefix: 'dash' | 'quote' | 'none';\n  onCitationChange: (citation: string) => void;\n  onCitationUrlChange?: (url: string) => void;\n  onAuthorChange?: (author: string) => void;\n  onSourceChange?: (source: string) => void;\n  onPositionChange: (position: 'left' | 'center' | 'right') => void;\n  onStyleChange: (style: 'normal' | 'italic' | 'bold') => void;\n  onPrefixChange: (prefix: 'dash' | 'quote' | 'none') => void;\n}\n\nconst CITATION_POSITIONS = [\n  { value: 'left', label: 'Left', description: 'Align to left' },\n  { value: 'center', label: 'Center', description: 'Center aligned' },\n  { value: 'right', label: 'Right', description: 'Align to right' },\n] as const;\n\nconst CITATION_STYLES = [\n  { value: 'normal', label: 'Normal', example: 'Normal text' },\n  { value: 'italic', label: 'Italic', example: 'Italic text' },\n  { value: 'bold', label: 'Bold', example: 'Bold text' },\n] as const;\n\nconst CITATION_PREFIXES = [\n  { value: 'dash', label: 'Em Dash', example: '— Author Name' },\n  { value: 'quote', label: 'Quote', example: '\" Author Name' },\n  { value: 'none', label: 'None', example: 'Author Name' },\n] as const;\n\nexport const CitationEditor: React.FC<CitationEditorProps> = ({\n  citation,\n  citationUrl,\n  author,\n  source,\n  position,\n  style,\n  prefix,\n  onCitationChange,\n  onCitationUrlChange,\n  onAuthorChange,\n  onSourceChange,\n  onPositionChange,\n  onStyleChange,\n  onPrefixChange,\n}) => {\n  const formatCitation = () => {\n    const parts = [];\n\n    if (author) parts.push(author);\n    if (source) parts.push(source);\n    if (!author && !source && citation) parts.push(citation);\n\n    const fullCitation = parts.join(', ');\n\n    switch (prefix) {\n      case 'dash':\n        return `— ${fullCitation}`;\n      case 'quote':\n        return `\" ${fullCitation}`;\n      case 'none':\n      default:\n        return fullCitation;\n    }\n  };\n\n  return (\n    <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex items-center gap-2\">\n        <User className=\"h-4 w-4\" />\n        <Label className=\"text-sm font-medium\">Citation Settings</Label>\n      </div>\n\n      {/* Basic Citation */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">Citation Text</Label>\n        <Input\n          placeholder=\"Author, Source, or Custom citation\"\n          value={citation}\n          onChange={(e) => onCitationChange(e.target.value)}\n          className=\"text-xs\"\n        />\n      </div>\n\n      {/* Advanced Fields */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div className=\"space-y-2\">\n          <Label className=\"text-xs font-medium text-gray-700\">Author</Label>\n          <div className=\"relative\">\n            <User className=\"absolute left-2 top-2 h-3 w-3 text-gray-400\" />\n            <Input\n              placeholder=\"Author name\"\n              value={author || ''}\n              onChange={(e) => onAuthorChange?.(e.target.value)}\n              className=\"pl-7 text-xs\"\n            />\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <Label className=\"text-xs font-medium text-gray-700\">Source</Label>\n          <div className=\"relative\">\n            <MapPin className=\"absolute left-2 top-2 h-3 w-3 text-gray-400\" />\n            <Input\n              placeholder=\"Book, Website, etc.\"\n              value={source || ''}\n              onChange={(e) => onSourceChange?.(e.target.value)}\n              className=\"pl-7 text-xs\"\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Citation URL */}\n      <div className=\"space-y-2\">\n        <Label className=\"text-xs font-medium text-gray-700\">Citation Link (Optional)</Label>\n        <div className=\"relative\">\n          <LinkIcon className=\"absolute left-2 top-2 h-3 w-3 text-gray-400\" />\n          <Input\n            type=\"url\"\n            placeholder=\"https://example.com\"\n            value={citationUrl || ''}\n            onChange={(e) => onCitationUrlChange?.(e.target.value)}\n            className=\"pl-7 text-xs\"\n          />\n        </div>\n      </div>\n\n      {/* Style Settings */}\n      <div className=\"space-y-3\">\n        {/* Position */}\n        <div className=\"space-y-2\">\n          <Label className=\"text-xs font-medium text-gray-700\">Position</Label>\n          <Select value={position} onValueChange={(value: any) => onPositionChange(value)}>\n            <SelectTrigger className=\"w-full h-8 text-xs\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {CITATION_POSITIONS.map((pos) => (\n                <SelectItem key={pos.value} value={pos.value}>\n                  <div>\n                    <div className=\"font-medium\">{pos.label}</div>\n                    <div className=\"text-gray-500 text-xs\">{pos.description}</div>\n                  </div>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Style */}\n        <div className=\"space-y-2\">\n          <Label className=\"text-xs font-medium text-gray-700\">Text Style</Label>\n          <Select value={style} onValueChange={(value: any) => onStyleChange(value)}>\n            <SelectTrigger className=\"w-full h-8 text-xs\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {CITATION_STYLES.map((styleOption) => (\n                <SelectItem key={styleOption.value} value={styleOption.value}>\n                  <span\n                    style={{\n                      fontWeight: styleOption.value === 'bold' ? 'bold' : 'normal',\n                      fontStyle: styleOption.value === 'italic' ? 'italic' : 'normal',\n                    }}\n                  >\n                    {styleOption.label}\n                  </span>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {/* Prefix */}\n        <div className=\"space-y-2\">\n          <Label className=\"text-xs font-medium text-gray-700\">Prefix Style</Label>\n          <Select value={prefix} onValueChange={(value: any) => onPrefixChange(value)}>\n            <SelectTrigger className=\"w-full h-8 text-xs\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {CITATION_PREFIXES.map((prefixOption) => (\n                <SelectItem key={prefixOption.value} value={prefixOption.value}>\n                  <div>\n                    <div className=\"font-medium\">{prefixOption.label}</div>\n                    <div className=\"text-gray-500 text-xs\">{prefixOption.example}</div>\n                  </div>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      {/* Preview */}\n      {(citation || author || source) && (\n        <div className=\"space-y-2\">\n          <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n          <div\n            className={`\n              p-3 bg-white rounded border text-sm\n              ${position === 'center' ? 'text-center' :\n                position === 'right' ? 'text-right' : 'text-left'}\n            `}\n          >\n            <span\n              style={{\n                fontWeight: style === 'bold' ? 'bold' : 'normal',\n                fontStyle: style === 'italic' ? 'italic' : 'normal',\n              }}\n            >\n              {formatCitation()}\n            </span>\n          </div>\n        </div>\n      )}\n\n      {/* Quick Actions */}\n      <div className=\"flex gap-2 pt-2 border-t\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => {\n            onCitationChange('');\n            onAuthorChange?.('');\n            onSourceChange?.('');\n            onCitationUrlChange?.('');\n          }}\n          className=\"flex-1 text-xs\"\n        >\n          Clear All\n        </Button>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => {\n            onPositionChange('right');\n            onStyleChange('italic');\n            onPrefixChange('dash');\n          }}\n          className=\"flex-1 text-xs\"\n        >\n          Default Style\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default CitationEditor;","/**\n * QuoteIconSelector Component\n * 인용문 아이콘 커스터마이징 컴포넌트\n */\n\nimport React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport { Quote, RotateCcw, Eye, EyeOff } from 'lucide-react';\n\ninterface QuoteIconSelectorProps {\n  iconStyle: 'quotes1' | 'quotes2' | 'quotes3' | 'quotes4' | 'quotes5';\n  iconSize: number;\n  iconColor: string;\n  iconPosition: 'left' | 'right' | 'none';\n  showIcon: boolean;\n  onIconStyleChange: (style: 'quotes1' | 'quotes2' | 'quotes3' | 'quotes4' | 'quotes5') => void;\n  onIconSizeChange: (size: number) => void;\n  onIconColorChange: (color: string) => void;\n  onIconPositionChange: (position: 'left' | 'right' | 'none') => void;\n  onToggleIcon: (show: boolean) => void;\n  onReset: () => void;\n}\n\nconst QUOTE_ICONS = [\n  { value: 'quotes1', label: 'Classic', icon: '\"', description: 'Traditional double quotes' },\n  { value: 'quotes2', label: 'Curved', icon: '\"', description: 'Curved quote marks' },\n  { value: 'quotes3', label: 'French', icon: '«', description: 'French guillemets' },\n  { value: 'quotes4', label: 'Single', icon: '\\'', description: 'Single quote marks' },\n  { value: 'quotes5', label: 'Modern', icon: '❝', description: 'Modern heavy quotes' },\n] as const;\n\nconst ICON_COLORS = [\n  { value: '#6b7280', label: 'Gray', color: '#6b7280' },\n  { value: '#3b82f6', label: 'Blue', color: '#3b82f6' },\n  { value: '#ef4444', label: 'Red', color: '#ef4444' },\n  { value: '#10b981', label: 'Green', color: '#10b981' },\n  { value: '#8b5cf6', label: 'Purple', color: '#8b5cf6' },\n  { value: '#f59e0b', label: 'Orange', color: '#f59e0b' },\n  { value: '#000000', label: 'Black', color: '#000000' },\n  { value: '#ffffff', label: 'White', color: '#ffffff' },\n];\n\nconst ICON_POSITIONS = [\n  { value: 'left', label: 'Left', description: 'Icon on the left side' },\n  { value: 'right', label: 'Right', description: 'Icon on the right side' },\n  { value: 'none', label: 'None', description: 'No icon displayed' },\n] as const;\n\nexport const QuoteIconSelector: React.FC<QuoteIconSelectorProps> = ({\n  iconStyle,\n  iconSize,\n  iconColor,\n  iconPosition,\n  showIcon,\n  onIconStyleChange,\n  onIconSizeChange,\n  onIconColorChange,\n  onIconPositionChange,\n  onToggleIcon,\n  onReset,\n}) => {\n  const getIconCharacter = (style: string) => {\n    return QUOTE_ICONS.find(icon => icon.value === style)?.icon || '\"';\n  };\n\n  return (\n    <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Quote className=\"h-4 w-4\" />\n          <Label className=\"text-sm font-medium\">Quote Icon</Label>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Button\n            variant={showIcon ? \"default\" : \"outline\"}\n            size=\"sm\"\n            onClick={() => onToggleIcon(!showIcon)}\n            className=\"h-8 gap-1\"\n          >\n            {showIcon ? <Eye className=\"h-3 w-3\" /> : <EyeOff className=\"h-3 w-3\" />}\n            {showIcon ? 'Show' : 'Hide'}\n          </Button>\n          {showIcon && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onReset}\n              className=\"h-8 px-2\"\n              title=\"Reset to defaults\"\n            >\n              <RotateCcw className=\"h-3 w-3\" />\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Icon Settings */}\n      {showIcon && (\n        <div className=\"space-y-4\">\n          {/* Icon Style */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Icon Style</Label>\n            <div className=\"grid grid-cols-5 gap-2\">\n              {QUOTE_ICONS.map((icon) => (\n                <button\n                  key={icon.value}\n                  className={`\n                    flex flex-col items-center justify-center h-16 rounded border-2 transition-all\n                    ${iconStyle === icon.value\n                      ? 'border-blue-500 bg-blue-50'\n                      : 'border-gray-200 hover:border-gray-300 bg-white'\n                    }\n                  `}\n                  onClick={() => onIconStyleChange(icon.value)}\n                  title={icon.description}\n                >\n                  <span\n                    className=\"text-lg font-bold\"\n                    style={{ color: iconColor }}\n                  >\n                    {icon.icon}\n                  </span>\n                  <span className=\"text-xs text-gray-500 mt-1\">{icon.label}</span>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Icon Size */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">\n              Icon Size ({iconSize}px)\n            </Label>\n            <Slider\n              value={[iconSize]}\n              onValueChange={(value) => onIconSizeChange(value[0])}\n              min={24}\n              max={120}\n              step={4}\n              className=\"w-full\"\n            />\n            <div className=\"flex justify-between text-xs text-gray-500\">\n              <span>24px</span>\n              <span>120px</span>\n            </div>\n          </div>\n\n          {/* Icon Color */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Icon Color</Label>\n            <div className=\"grid grid-cols-4 gap-2\">\n              {ICON_COLORS.map((color) => (\n                <button\n                  key={color.value}\n                  className={`\n                    flex items-center justify-center h-10 rounded border-2 transition-all\n                    ${iconColor === color.value\n                      ? 'border-blue-500 ring-2 ring-blue-200'\n                      : 'border-gray-200 hover:border-gray-300'\n                    }\n                  `}\n                  style={{\n                    backgroundColor: color.value === '#ffffff' ? '#f9fafb' : color.value,\n                    color: color.value === '#ffffff' ? '#000000' : '#ffffff',\n                  }}\n                  onClick={() => onIconColorChange(color.value)}\n                  title={color.label}\n                >\n                  <span className=\"text-lg font-bold\">\n                    {getIconCharacter(iconStyle)}\n                  </span>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Icon Position */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Icon Position</Label>\n            <Select value={iconPosition} onValueChange={(value: any) => onIconPositionChange(value)}>\n              <SelectTrigger className=\"w-full h-8 text-xs\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {ICON_POSITIONS.map((position) => (\n                  <SelectItem key={position.value} value={position.value}>\n                    <div>\n                      <div className=\"font-medium\">{position.label}</div>\n                      <div className=\"text-gray-500 text-xs\">{position.description}</div>\n                    </div>\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Preview */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n            <div className=\"p-3 bg-white rounded border\">\n              <div className=\"relative\">\n                {iconPosition === 'left' && (\n                  <span\n                    className=\"absolute -left-2 -top-1 opacity-30\"\n                    style={{\n                      fontSize: `${iconSize}px`,\n                      color: iconColor,\n                      lineHeight: 1,\n                    }}\n                  >\n                    {getIconCharacter(iconStyle)}\n                  </span>\n                )}\n\n                <p className=\"text-sm italic text-gray-700 relative z-10\">\n                  This is how your quote will appear with the selected icon style.\n                </p>\n\n                {iconPosition === 'right' && (\n                  <span\n                    className=\"absolute -right-2 -bottom-1 opacity-30\"\n                    style={{\n                      fontSize: `${iconSize}px`,\n                      color: iconColor,\n                      lineHeight: 1,\n                    }}\n                  >\n                    {getIconCharacter(iconStyle)}\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default QuoteIconSelector;","/**\n * EnhancedQuoteBlock Component\n * 고급 Quote/Pullquote 블록 with 인용 출처 고급 스타일링\n */\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport EnhancedBlockWrapper from './EnhancedBlockWrapper';\nimport { QuoteStyleSwitcher } from './quote/QuoteStyleSwitcher';\nimport { CitationEditor } from './quote/CitationEditor';\nimport { QuoteIconSelector } from './quote/QuoteIconSelector';\nimport { cn } from '@/lib/utils';\nimport { Quote, Settings, Palette } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport './quote/quote-styles.css';\n\ninterface EnhancedQuoteBlockProps {\n  id: string;\n  content: string;\n  onChange: (content: string, attributes?: any) => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after', type?: string) => void;\n  isSelected: boolean;\n  onSelect: () => void;\n  attributes?: {\n    quote?: string;\n    citation?: string;\n    citationUrl?: string;\n    author?: string;\n    source?: string;\n    align?: 'left' | 'center' | 'right' | 'justify';\n    style?: 'default' | 'large' | 'pullquote';\n    citationPosition?: 'left' | 'center' | 'right';\n    citationStyle?: 'normal' | 'italic' | 'bold';\n    citationPrefix?: 'dash' | 'quote' | 'none';\n    iconStyle?: 'quotes1' | 'quotes2' | 'quotes3' | 'quotes4' | 'quotes5';\n    iconSize?: number;\n    iconColor?: string;\n    iconPosition?: 'left' | 'right' | 'none';\n    showIcon?: boolean;\n    theme?: 'default' | 'blue' | 'green' | 'purple' | 'red' | 'orange';\n  };\n  canMoveUp?: boolean;\n  canMoveDown?: boolean;\n  isDragging?: boolean;\n  onDragStart?: () => void;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDrop?: (e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n  onCopy?: () => void;\n  onPaste?: () => void;\n  onChangeType?: (newType: string) => void;\n}\n\nconst EnhancedQuoteBlock: React.FC<EnhancedQuoteBlockProps> = ({\n  id,\n  content,\n  onChange,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  isSelected,\n  onSelect,\n  attributes = {},\n  canMoveUp = true,\n  canMoveDown = true,\n  isDragging,\n  onDragStart,\n  onDragOver,\n  onDrop,\n  onDragEnd,\n  onCopy,\n  onPaste,\n  onChangeType,\n}) => {\n  // Parse attributes with defaults\n  const {\n    quote: initialQuote,\n    citation: initialCitation,\n    citationUrl = '',\n    author = '',\n    source = '',\n    align = 'left',\n    style = 'default',\n    citationPosition = 'right',\n    citationStyle = 'italic',\n    citationPrefix = 'dash',\n    iconStyle = 'quotes1',\n    iconSize = 48,\n    iconColor = '#6b7280',\n    iconPosition = 'left',\n    showIcon = false,\n    theme = 'default'\n  } = attributes;\n\n  // Parse content if needed\n  const parseContent = (contentStr: string) => {\n    if (!contentStr) return { quote: '', citation: '' };\n\n    try {\n      const parsed = JSON.parse(contentStr);\n      return { quote: parsed.quote || '', citation: parsed.citation || '' };\n    } catch {\n      const parts = contentStr.split('\\n---\\n');\n      return {\n        quote: parts[0] || '',\n        citation: parts[1] || ''\n      };\n    }\n  };\n\n  const contentData = parseContent(content);\n  const [localQuote, setLocalQuote] = useState(initialQuote || contentData.quote || '');\n  const [localCitation, setLocalCitation] = useState(initialCitation || contentData.citation || '');\n  const [showStyleSettings, setShowStyleSettings] = useState(false);\n  const [showCitationSettings, setShowCitationSettings] = useState(false);\n  const [showIconSettings, setShowIconSettings] = useState(false);\n\n  const quoteRef = useRef<HTMLDivElement>(null);\n  const citationRef = useRef<HTMLDivElement>(null);\n\n  // Sync with external content changes\n  useEffect(() => {\n    if (initialQuote !== undefined && initialCitation !== undefined) {\n      setLocalQuote(initialQuote);\n      setLocalCitation(initialCitation);\n    } else if (content) {\n      const parsed = parseContent(content);\n      setLocalQuote(parsed.quote);\n      setLocalCitation(parsed.citation);\n    }\n  }, [content, initialQuote, initialCitation]);\n\n  // Update attributes helper\n  const updateAttributes = (updates: Partial<typeof attributes>) => {\n    const newContent = JSON.stringify({ quote: localQuote, citation: localCitation });\n    onChange(newContent, { ...attributes, ...updates });\n  };\n\n  // Handle quote change\n  const handleQuoteChange = (newQuote: string) => {\n    setLocalQuote(newQuote);\n    const newContent = JSON.stringify({ quote: newQuote, citation: localCitation });\n    onChange(newContent, {\n      ...attributes,\n      quote: newQuote,\n      citation: localCitation\n    });\n  };\n\n  // Handle citation change\n  const handleCitationChange = (newCitation: string) => {\n    setLocalCitation(newCitation);\n    const newContent = JSON.stringify({ quote: localQuote, citation: newCitation });\n    onChange(newContent, {\n      ...attributes,\n      quote: localQuote,\n      citation: newCitation\n    });\n  };\n\n  // Handle key events\n  const handleQuoteKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      if (localCitation === '') {\n        citationRef.current?.focus();\n      } else {\n        onAddBlock?.('after', 'core/paragraph');\n      }\n    }\n\n    if (e.key === 'Backspace' && localQuote === '' && localCitation === '') {\n      e.preventDefault();\n      onDelete();\n    }\n  };\n\n  const handleCitationKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      onAddBlock?.('after', 'core/paragraph');\n    }\n\n    if (e.key === 'Backspace' && localCitation === '') {\n      e.preventDefault();\n      quoteRef.current?.focus();\n    }\n  };\n\n  // Handle paste\n  const handlePaste = (e: React.ClipboardEvent) => {\n    e.preventDefault();\n    const text = e.clipboardData.getData('text/plain');\n    document.execCommand('insertText', false, text);\n  };\n\n  // Get quote icon character\n  const getIconCharacter = () => {\n    const iconMap = {\n      quotes1: '\"',\n      quotes2: '\"',\n      quotes3: '«',\n      quotes4: '\\'',\n      quotes5: '❝'\n    };\n    return iconMap[iconStyle] || '\"';\n  };\n\n  // Format citation text\n  const formatCitation = () => {\n    const parts = [];\n    if (author) parts.push(author);\n    if (source) parts.push(source);\n    if (!author && !source && localCitation) parts.push(localCitation);\n\n    const fullCitation = parts.join(', ');\n\n    switch (citationPrefix) {\n      case 'dash':\n        return `— ${fullCitation}`;\n      case 'quote':\n        return `\" ${fullCitation}`;\n      case 'none':\n      default:\n        return fullCitation;\n    }\n  };\n\n  // Get block classes\n  const getBlockClasses = () => {\n    return cn(\n      'enhanced-quote-block',\n      `quote-style-${style}`,\n      `theme-${theme}`,\n      align === 'center' && 'text-center',\n      align === 'right' && 'text-right',\n      align === 'justify' && 'text-justify'\n    );\n  };\n\n  return (\n    <EnhancedBlockWrapper\n      id={id}\n      type=\"quote\"\n      isSelected={isSelected}\n      onSelect={onSelect}\n      onDelete={onDelete}\n      onDuplicate={onDuplicate}\n      onMoveUp={onMoveUp}\n      onMoveDown={onMoveDown}\n      onAddBlock={onAddBlock}\n      canMoveUp={canMoveUp}\n      canMoveDown={canMoveDown}\n      isDragging={isDragging}\n      onDragStart={onDragStart}\n      onDragOver={onDragOver}\n      onDrop={onDrop}\n      onDragEnd={onDragEnd}\n      onCopy={onCopy}\n      onPaste={onPaste}\n      onChangeType={onChangeType}\n      currentType=\"core/quote\"\n      customToolbarContent={\n        isSelected ? (\n          <div className=\"flex items-center gap-2 flex-wrap\">\n            {/* Style Quick Selector */}\n            <div className=\"flex gap-1\">\n              {['default', 'large', 'pullquote'].map((styleOption) => (\n                <Button\n                  key={styleOption}\n                  variant={style === styleOption ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => updateAttributes({ style: styleOption as any })}\n                  className=\"h-7 px-3 text-xs capitalize\"\n                >\n                  {styleOption}\n                </Button>\n              ))}\n            </div>\n\n            <div className=\"w-px h-4 bg-gray-300\" />\n\n            {/* Settings Buttons */}\n            <Button\n              variant={showStyleSettings ? \"default\" : \"ghost\"}\n              size=\"sm\"\n              className=\"h-7 px-2 text-xs\"\n              onClick={() => setShowStyleSettings(!showStyleSettings)}\n            >\n              <Quote className=\"h-3 w-3 mr-1\" />\n              Style\n            </Button>\n\n            <Button\n              variant={showCitationSettings ? \"default\" : \"ghost\"}\n              size=\"sm\"\n              className=\"h-7 px-2 text-xs\"\n              onClick={() => setShowCitationSettings(!showCitationSettings)}\n            >\n              <Settings className=\"h-3 w-3 mr-1\" />\n              Citation\n            </Button>\n\n            <Button\n              variant={showIconSettings ? \"default\" : \"ghost\"}\n              size=\"sm\"\n              className=\"h-7 px-2 text-xs\"\n              onClick={() => setShowIconSettings(!showIconSettings)}\n            >\n              <Palette className=\"h-3 w-3 mr-1\" />\n              Icon\n            </Button>\n          </div>\n        ) : null\n      }\n    >\n      <div className={getBlockClasses()}>\n        {/* Quote Icon */}\n        {showIcon && iconPosition !== 'none' && (\n          <div\n            className={cn('quote-icon', `position-${iconPosition}`)}\n            style={{\n              fontSize: `${iconSize}px`,\n              color: iconColor,\n            }}\n          >\n            {getIconCharacter()}\n          </div>\n        )}\n\n        {/* Quote content */}\n        <div\n          ref={quoteRef}\n          contentEditable\n          suppressContentEditableWarning\n          className={cn(\n            'quote-content outline-none',\n            !localQuote && 'text-gray-400'\n          )}\n          onInput={(e) => {\n            const target = e.target as HTMLDivElement;\n            handleQuoteChange(target.textContent || '');\n          }}\n          onKeyDown={handleQuoteKeyDown}\n          onPaste={handlePaste}\n          data-placeholder=\"Write your quote here...\"\n        >\n          {localQuote}\n        </div>\n\n        {/* Citation */}\n        {(localCitation || author || source || isSelected) && (\n          <div\n            ref={citationRef}\n            contentEditable\n            suppressContentEditableWarning\n            className={cn(\n              'quote-citation outline-none',\n              `style-${citationStyle}`,\n              `position-${citationPosition}`,\n              `prefix-${citationPrefix}`,\n              !localCitation && !author && !source && 'text-gray-400'\n            )}\n            onInput={(e) => {\n              const target = e.target as HTMLDivElement;\n              handleCitationChange(target.textContent || '');\n            }}\n            onKeyDown={handleCitationKeyDown}\n            onPaste={handlePaste}\n            data-placeholder=\"Add citation...\"\n          >\n            {citationUrl ? (\n              <a href={citationUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                {formatCitation()}\n              </a>\n            ) : (\n              formatCitation()\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Style Settings Panel */}\n      {isSelected && showStyleSettings && (\n        <div className=\"mt-4\">\n          <QuoteStyleSwitcher\n            currentStyle={style}\n            onStyleChange={(newStyle) => updateAttributes({ style: newStyle })}\n          />\n        </div>\n      )}\n\n      {/* Citation Settings Panel */}\n      {isSelected && showCitationSettings && (\n        <div className=\"mt-4\">\n          <CitationEditor\n            citation={localCitation}\n            citationUrl={citationUrl}\n            author={author}\n            source={source}\n            position={citationPosition}\n            style={citationStyle}\n            prefix={citationPrefix}\n            onCitationChange={handleCitationChange}\n            onCitationUrlChange={(url) => updateAttributes({ citationUrl: url })}\n            onAuthorChange={(newAuthor) => updateAttributes({ author: newAuthor })}\n            onSourceChange={(newSource) => updateAttributes({ source: newSource })}\n            onPositionChange={(position) => updateAttributes({ citationPosition: position })}\n            onStyleChange={(style) => updateAttributes({ citationStyle: style })}\n            onPrefixChange={(prefix) => updateAttributes({ citationPrefix: prefix })}\n          />\n        </div>\n      )}\n\n      {/* Icon Settings Panel */}\n      {isSelected && showIconSettings && (\n        <div className=\"mt-4\">\n          <QuoteIconSelector\n            iconStyle={iconStyle}\n            iconSize={iconSize}\n            iconColor={iconColor}\n            iconPosition={iconPosition}\n            showIcon={showIcon}\n            onIconStyleChange={(style) => updateAttributes({ iconStyle: style })}\n            onIconSizeChange={(size) => updateAttributes({ iconSize: size })}\n            onIconColorChange={(color) => updateAttributes({ iconColor: color })}\n            onIconPositionChange={(position) => updateAttributes({ iconPosition: position })}\n            onToggleIcon={(show) => updateAttributes({ showIcon: show })}\n            onReset={() => updateAttributes({\n              iconStyle: 'quotes1',\n              iconSize: 48,\n              iconColor: '#6b7280',\n              iconPosition: 'left',\n              showIcon: false\n            })}\n          />\n        </div>\n      )}\n    </EnhancedBlockWrapper>\n  );\n};\n\nexport default EnhancedQuoteBlock;","/**\n * EnhancedImageBlock Component\n * Complete image block with upload, toolbar, sidebar integration, and ACF support\n */\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport EnhancedBlockWrapper from './EnhancedBlockWrapper';\nimport { cn } from '@/lib/utils';\nimport { \n  Image as ImageIcon,\n  Upload,\n  Replace,\n  Trash2,\n  ExternalLink,\n  FileImage\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { mediaApi } from '@/services/api/postApi';\n\ninterface EnhancedImageBlockProps {\n  id: string;\n  content: string;\n  onChange: (content: string, attributes?: any) => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after', type?: string) => void;\n  isSelected: boolean;\n  onSelect: () => void;\n  attributes?: {\n    url?: string;\n    alt?: string;\n    caption?: string;\n    align?: 'left' | 'center' | 'right' | 'justify';\n    size?: 'thumbnail' | 'medium' | 'large' | 'full';\n    linkTo?: 'none' | 'media' | 'custom';\n    linkUrl?: string;\n    width?: number;\n    height?: number;\n    mediaId?: string;\n    // ACF Integration\n    dynamicSource?: {\n      image?: string;\n      caption?: string;\n      alt?: string;\n      link?: string;\n    };\n    useDynamicSource?: boolean;\n  };\n  canMoveUp?: boolean;\n  canMoveDown?: boolean;\n  isDragging?: boolean;\n  onDragStart?: () => void;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDrop?: (e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n  onCopy?: () => void;\n  onPaste?: () => void;\n  onChangeType?: (newType: string) => void;\n}\n\nconst EnhancedImageBlock: React.FC<EnhancedImageBlockProps> = ({\n  id,\n  content,\n  onChange,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  isSelected,\n  onSelect,\n  attributes = {},\n  canMoveUp = true,\n  canMoveDown = true,\n  isDragging,\n  onDragStart,\n  onDragOver,\n  onDrop,\n  onDragEnd,\n  onCopy,\n  onPaste,\n  onChangeType,\n}) => {\n  const {\n    url = '',\n    alt = '',\n    caption = '',\n    align = 'left',\n    size = 'large',\n    linkTo = 'none',\n    linkUrl = '',\n    width,\n    height,\n    dynamicSource = {},\n    useDynamicSource = false\n  } = attributes;\n\n  const [isUploading, setIsUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [localCaption, setLocalCaption] = useState(caption);\n  const [localAlt, setLocalAlt] = useState(alt);\n  const [localLinkUrl, setLocalLinkUrl] = useState(linkUrl);\n  \n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const dropZoneRef = useRef<HTMLDivElement>(null);\n\n  // Sync with external changes\n  useEffect(() => {\n    setLocalCaption(caption);\n    setLocalAlt(alt);\n    setLocalLinkUrl(linkUrl);\n  }, [caption, alt, linkUrl]);\n\n  // Update attributes\n  const updateAttribute = useCallback((key: string, value: any) => {\n    const newContent = url || content;\n    onChange(newContent, { ...attributes, [key]: value });\n  }, [attributes, content, url, onChange]);\n\n  // Handle file upload\n  const handleFileUpload = async (file: File) => {\n    if (!file.type.startsWith('image/')) {\n      // Error log removed\n      return;\n    }\n\n    if (file.size > 10 * 1024 * 1024) { // 10MB limit\n      // Error log removed\n      return;\n    }\n\n    setIsUploading(true);\n    setUploadProgress(0);\n\n    try {\n      const result = await mediaApi.upload(file, (progress) => {\n        setUploadProgress(progress);\n      });\n\n      if (result.success && result.data) {\n        // Get image dimensions\n        const img = new Image();\n        img.onload = () => {\n          onChange(result.data!.url, {\n            ...attributes,\n            url: result.data!.url,\n            alt: file.name.replace(/\\.[^/.]+$/, ''),\n            mediaId: result.data!.id,\n            width: img.naturalWidth,\n            height: img.naturalHeight\n          });\n        };\n        img.src = result.data.url;\n      } else {\n        // Error log removed\n      }\n    } catch (error) {\n      // Error log removed\n    } finally {\n      setIsUploading(false);\n      setUploadProgress(0);\n    }\n  };\n\n  // Handle file selection\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFileUpload(file);\n    }\n  };\n\n  // Handle drag and drop\n  const handleDragEnter = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragOver(true);\n  };\n\n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.target === dropZoneRef.current) {\n      setIsDragOver(false);\n    }\n  };\n\n  const handleDragOverImage = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n\n  const handleDropImage = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragOver(false);\n\n    const files = Array.from(e.dataTransfer.files);\n    const imageFile = files.find(file => file.type.startsWith('image/'));\n    \n    if (imageFile) {\n      handleFileUpload(imageFile);\n    }\n  };\n\n  // Handle alignment change\n  const handleAlignChange = (newAlign: 'left' | 'center' | 'right' | 'justify') => {\n    updateAttribute('align', newAlign);\n  };\n\n  // Handle caption change\n  const handleCaptionChange = (newCaption: string) => {\n    setLocalCaption(newCaption);\n    updateAttribute('caption', newCaption);\n  };\n\n  // Handle alt text change\n  const handleAltChange = (newAlt: string) => {\n    setLocalAlt(newAlt);\n    updateAttribute('alt', newAlt);\n  };\n\n  // Handle link change\n  const handleLinkChange = (newLink: string) => {\n    setLocalLinkUrl(newLink);\n    updateAttribute('linkUrl', newLink);\n    updateAttribute('linkTo', newLink ? 'custom' : 'none');\n  };\n\n  // Handle replace image\n  const handleReplaceImage = () => {\n    fileInputRef.current?.click();\n  };\n\n  // Handle image deletion\n  const handleDeleteImage = () => {\n    onChange('', {\n      ...attributes,\n      url: '',\n      alt: '',\n      caption: '',\n      mediaId: undefined,\n      width: undefined,\n      height: undefined\n    });\n  };\n\n  // Get image size class\n  const getImageSizeClass = () => {\n    switch (size) {\n      case 'thumbnail': return 'max-w-32';\n      case 'medium': return 'max-w-md';\n      case 'large': return 'max-w-2xl';\n      case 'full': return 'w-full';\n      default: return 'max-w-lg';\n    }\n  };\n\n  // Get alignment class\n  const getAlignmentClass = () => {\n    switch (align) {\n      case 'center': return 'mx-auto text-center';\n      case 'right': return 'ml-auto text-right';\n      case 'justify': return 'w-full';\n      default: return 'text-left';\n    }\n  };\n\n  // Render image content\n  const renderImage = () => {\n    if (!url) return null;\n\n    const imageElement = (\n      <img\n        src={url}\n        alt={localAlt}\n        className={cn(\n          'block h-auto rounded',\n          getImageSizeClass()\n        )}\n        style={{\n          width: width ? `${width}px` : undefined,\n          height: height ? `${height}px` : undefined,\n        }}\n        onLoad={(e) => {\n          const img = e.target as HTMLImageElement;\n          if (!width || !height) {\n            updateAttribute('width', img.naturalWidth);\n            updateAttribute('height', img.naturalHeight);\n          }\n        }}\n      />\n    );\n\n    // Wrap with link if specified\n    if (linkTo === 'media') {\n      return (\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-block\">\n          {imageElement}\n        </a>\n      );\n    } else if (linkTo === 'custom' && localLinkUrl) {\n      return (\n        <a href={localLinkUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"inline-block\">\n          {imageElement}\n        </a>\n      );\n    }\n\n    return imageElement;\n  };\n\n  // Custom toolbar content for image-specific controls\n  const customToolbarContent = isSelected && url ? (\n    <div className=\"flex items-center gap-2\">\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        onClick={handleReplaceImage}\n        className=\"h-7 px-2 text-xs\"\n      >\n        <Replace className=\"h-3 w-3 mr-1\" />\n        Replace\n      </Button>\n      \n      <div className=\"w-px h-4 bg-gray-300\" />\n      \n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        onClick={() => updateAttribute('linkTo', linkTo === 'media' ? 'none' : 'media')}\n        className={cn(\"h-7 px-2 text-xs\", linkTo === 'media' && \"bg-blue-100\")}\n      >\n        <ExternalLink className=\"h-3 w-3 mr-1\" />\n        Link to Media\n      </Button>\n      \n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        onClick={handleDeleteImage}\n        className=\"h-7 px-2 text-xs text-red-600 hover:text-red-700 hover:bg-red-50\"\n      >\n        <Trash2 className=\"h-3 w-3 mr-1\" />\n        Remove\n      </Button>\n    </div>\n  ) : null;\n\n  // Custom sidebar content for image settings\n  const customSidebarContent = isSelected ? (\n    <div className=\"space-y-4\">\n      {/* Dynamic Sources Toggle */}\n      <div className=\"border-b border-gray-200 pb-4\">\n        <div className=\"flex items-center justify-between\">\n          <Label className=\"text-sm font-medium\">Dynamic Sources</Label>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => updateAttribute('useDynamicSource', !useDynamicSource)}\n            className={cn(\n              \"h-6 px-2 text-xs\",\n              useDynamicSource ? \"bg-blue-100 text-blue-700\" : \"text-gray-600\"\n            )}\n          >\n            {useDynamicSource ? 'Enabled' : 'Disabled'}\n          </Button>\n        </div>\n        {useDynamicSource && (\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Bind image properties to ACF fields\n          </p>\n        )}\n      </div>\n\n      {useDynamicSource ? (\n        /* ACF Field Binding Interface */\n        <div className=\"space-y-3\">\n          <div>\n            <Label className=\"text-sm font-medium\">Image Field</Label>\n            <select\n              value={dynamicSource.image || ''}\n              onChange={(e) => updateAttribute('dynamicSource', { ...dynamicSource, image: e.target.value })}\n              className=\"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            >\n              <option value=\"\">Select ACF Image Field</option>\n              <option value=\"featured_image\">Featured Image</option>\n              <option value=\"gallery_image\">Gallery Image</option>\n              <option value=\"hero_image\">Hero Image</option>\n              <option value=\"product_image\">Product Image</option>\n              <option value=\"custom_image\">Custom Image</option>\n            </select>\n          </div>\n\n          <div>\n            <Label className=\"text-sm font-medium\">Caption Field</Label>\n            <select\n              value={dynamicSource.caption || ''}\n              onChange={(e) => updateAttribute('dynamicSource', { ...dynamicSource, caption: e.target.value })}\n              className=\"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            >\n              <option value=\"\">Select ACF Text Field</option>\n              <option value=\"image_caption\">Image Caption</option>\n              <option value=\"photo_description\">Photo Description</option>\n              <option value=\"media_title\">Media Title</option>\n              <option value=\"custom_caption\">Custom Caption</option>\n            </select>\n          </div>\n\n          <div>\n            <Label className=\"text-sm font-medium\">Alt Text Field</Label>\n            <select\n              value={dynamicSource.alt || ''}\n              onChange={(e) => updateAttribute('dynamicSource', { ...dynamicSource, alt: e.target.value })}\n              className=\"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            >\n              <option value=\"\">Select ACF Text Field</option>\n              <option value=\"image_alt\">Image Alt Text</option>\n              <option value=\"accessibility_text\">Accessibility Text</option>\n              <option value=\"screen_reader_text\">Screen Reader Text</option>\n              <option value=\"custom_alt\">Custom Alt Text</option>\n            </select>\n          </div>\n\n          <div>\n            <Label className=\"text-sm font-medium\">Link Field</Label>\n            <select\n              value={dynamicSource.link || ''}\n              onChange={(e) => updateAttribute('dynamicSource', { ...dynamicSource, link: e.target.value })}\n              className=\"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            >\n              <option value=\"\">Select ACF URL/Link Field</option>\n              <option value=\"image_link\">Image Link</option>\n              <option value=\"external_url\">External URL</option>\n              <option value=\"product_link\">Product Link</option>\n              <option value=\"custom_link\">Custom Link</option>\n            </select>\n          </div>\n\n          <div className=\"pt-2 border-t border-gray-100\">\n            <p className=\"text-xs text-gray-500\">\n              ACF fields will override manual settings when available\n            </p>\n          </div>\n        </div>\n      ) : (\n        /* Manual Settings Interface */\n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"image-alt\" className=\"text-sm font-medium\">Alt Text</Label>\n            <Input\n              id=\"image-alt\"\n              value={localAlt}\n              onChange={(e) => handleAltChange(e.target.value)}\n              placeholder=\"Describe this image...\"\n              className=\"mt-1\"\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"image-caption\" className=\"text-sm font-medium\">Caption</Label>\n            <Input\n              id=\"image-caption\"\n              value={localCaption}\n              onChange={(e) => handleCaptionChange(e.target.value)}\n              placeholder=\"Add a caption...\"\n              className=\"mt-1\"\n            />\n          </div>\n          \n          <div>\n            <Label htmlFor=\"image-link\" className=\"text-sm font-medium\">Link URL</Label>\n            <Input\n              id=\"image-link\"\n              value={localLinkUrl}\n              onChange={(e) => handleLinkChange(e.target.value)}\n              placeholder=\"https://example.com\"\n              className=\"mt-1\"\n            />\n          </div>\n\n          {width && height && (\n            <div className=\"grid grid-cols-2 gap-2\">\n              <div>\n                <Label htmlFor=\"image-width\" className=\"text-sm font-medium\">Width</Label>\n                <Input\n                  id=\"image-width\"\n                  type=\"number\"\n                  value={width}\n                  onChange={(e) => updateAttribute('width', parseInt(e.target.value) || undefined)}\n                  className=\"mt-1\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"image-height\" className=\"text-sm font-medium\">Height</Label>\n                <Input\n                  id=\"image-height\"\n                  type=\"number\"\n                  value={height}\n                  onChange={(e) => updateAttribute('height', parseInt(e.target.value) || undefined)}\n                  className=\"mt-1\"\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  ) : null;\n\n  return (\n    <EnhancedBlockWrapper\n      id={id}\n      type=\"image\"\n      isSelected={isSelected}\n      onSelect={onSelect}\n      onDelete={onDelete}\n      onDuplicate={onDuplicate}\n      onMoveUp={onMoveUp}\n      onMoveDown={onMoveDown}\n      onAddBlock={onAddBlock}\n      canMoveUp={canMoveUp}\n      canMoveDown={canMoveDown}\n      isDragging={isDragging}\n      onDragStart={onDragStart}\n      onDragOver={onDragOver}\n      onDrop={onDrop}\n      onDragEnd={onDragEnd}\n      onCopy={onCopy}\n      onPaste={onPaste}\n      onAlignChange={handleAlignChange}\n      currentAlign={align}\n      onChangeType={onChangeType}\n      currentType=\"core/image\"\n      customToolbarContent={customToolbarContent}\n      customSidebarContent={customSidebarContent}\n    >\n      <div className={cn('image-block', getAlignmentClass())}>\n        {!url ? (\n          // Upload area\n          <div\n            ref={dropZoneRef}\n            className={cn(\n              'relative border-2 border-dashed rounded-lg p-8 text-center transition-all min-h-48',\n              isDragOver \n                ? 'border-blue-500 bg-blue-50' \n                : 'border-gray-300 hover:border-gray-400 hover:bg-gray-50',\n              isUploading && 'pointer-events-none opacity-50'\n            )}\n            onDragEnter={handleDragEnter}\n            onDragLeave={handleDragLeave}\n            onDragOver={handleDragOverImage}\n            onDrop={handleDropImage}\n          >\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/jpeg,image/jpg,image/png,image/gif,image/webp\"\n              className=\"hidden\"\n              onChange={handleFileSelect}\n            />\n            \n            {isUploading ? (\n              <div className=\"space-y-4\">\n                <Upload className=\"h-16 w-16 mx-auto text-blue-500 animate-pulse\" />\n                <div className=\"w-full max-w-xs mx-auto\">\n                  <div className=\"h-2 bg-gray-200 rounded-full overflow-hidden\">\n                    <div \n                      className=\"h-full bg-blue-500 transition-all duration-300\"\n                      style={{ width: `${uploadProgress}%` }}\n                    />\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-2\">Uploading... {uploadProgress}%</p>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <ImageIcon className=\"h-16 w-16 mx-auto text-gray-400\" />\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                    Upload an image\n                  </h3>\n                  <p className=\"text-sm text-gray-500 mb-4\">\n                    Drag and drop an image here, or click to select\n                  </p>\n                  <p className=\"text-xs text-gray-400 mb-4\">\n                    Supports: JPG, PNG, GIF, WebP • Maximum size: 10MB\n                  </p>\n                </div>\n                <Button\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"mx-auto\"\n                >\n                  <FileImage className=\"h-4 w-4 mr-2\" />\n                  Select Image\n                </Button>\n              </div>\n            )}\n          </div>\n        ) : (\n          // Image display\n          <figure className=\"space-y-2\">\n            {renderImage()}\n            \n            {/* Caption */}\n            {(localCaption || isSelected) && (\n              <figcaption\n                contentEditable={isSelected}\n                suppressContentEditableWarning\n                className={cn(\n                  'text-sm text-gray-600 italic outline-none px-2 py-1',\n                  'focus:bg-gray-50 focus:ring-2 focus:ring-blue-200 focus:ring-inset rounded',\n                  !localCaption && isSelected && 'text-gray-400'\n                )}\n                onInput={(e) => {\n                  const target = e.target as HTMLElement;\n                  handleCaptionChange(target.textContent || '');\n                }}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault();\n                    onAddBlock?.('after', 'core/paragraph');\n                  }\n                }}\n                data-placeholder=\"Write a caption...\"\n                style={{\n                  direction: 'ltr',\n                  unicodeBidi: 'normal'\n                }}\n              >\n                {localCaption}\n              </figcaption>\n            )}\n          </figure>\n        )}\n      </div>\n    </EnhancedBlockWrapper>\n  );\n};\n\nexport default EnhancedImageBlock;","/**\n * GradientEditor Component\n * 그라디언트 배경 편집기 - 선형/원형 그라디언트 지원\n */\n\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Palette,\n  RefreshCw,\n  Plus,\n  X,\n  ChevronDown,\n  ChevronUp,\n  RotateCw\n} from 'lucide-react';\n\ninterface GradientStop {\n  color: string;\n  position: number; // 0-100\n}\n\ninterface GradientSettings {\n  type: 'linear' | 'radial';\n  angle: number; // 0-360 for linear\n  stops: GradientStop[];\n  shape?: 'circle' | 'ellipse'; // for radial\n  position?: string; // for radial position\n}\n\ninterface GradientEditorProps {\n  currentGradient?: GradientSettings;\n  isEnabled: boolean;\n  onGradientChange: (gradient: GradientSettings | null) => void;\n  onToggleGradient: (enabled: boolean) => void;\n}\n\n// 10가지 기본 그라디언트 프리셋\nconst GRADIENT_PRESETS: GradientSettings[] = [\n  {\n    type: 'linear',\n    angle: 45,\n    stops: [\n      { color: '#667eea', position: 0 },\n      { color: '#764ba2', position: 100 }\n    ]\n  },\n  {\n    type: 'linear',\n    angle: 90,\n    stops: [\n      { color: '#f093fb', position: 0 },\n      { color: '#f5576c', position: 100 }\n    ]\n  },\n  {\n    type: 'linear',\n    angle: 135,\n    stops: [\n      { color: '#4facfe', position: 0 },\n      { color: '#00f2fe', position: 100 }\n    ]\n  },\n  {\n    type: 'linear',\n    angle: 45,\n    stops: [\n      { color: '#43e97b', position: 0 },\n      { color: '#38f9d7', position: 100 }\n    ]\n  },\n  {\n    type: 'linear',\n    angle: 90,\n    stops: [\n      { color: '#fa709a', position: 0 },\n      { color: '#fee140', position: 100 }\n    ]\n  },\n  {\n    type: 'radial',\n    angle: 0,\n    shape: 'circle',\n    position: 'center',\n    stops: [\n      { color: '#667eea', position: 0 },\n      { color: '#764ba2', position: 100 }\n    ]\n  },\n  {\n    type: 'linear',\n    angle: 45,\n    stops: [\n      { color: '#ff9a9e', position: 0 },\n      { color: '#fecfef', position: 50 },\n      { color: '#fecfef', position: 100 }\n    ]\n  },\n  {\n    type: 'linear',\n    angle: 90,\n    stops: [\n      { color: '#a8edea', position: 0 },\n      { color: '#fed6e3', position: 100 }\n    ]\n  },\n  {\n    type: 'linear',\n    angle: 135,\n    stops: [\n      { color: '#d299c2', position: 0 },\n      { color: '#fef9d7', position: 100 }\n    ]\n  },\n  {\n    type: 'radial',\n    angle: 0,\n    shape: 'ellipse',\n    position: 'center',\n    stops: [\n      { color: '#89f7fe', position: 0 },\n      { color: '#66a6ff', position: 100 }\n    ]\n  }\n];\n\nexport const GradientEditor: React.FC<GradientEditorProps> = ({\n  currentGradient,\n  isEnabled,\n  onGradientChange,\n  onToggleGradient,\n}) => {\n  const [showPresets, setShowPresets] = useState(true);\n  const [showCustomEditor, setShowCustomEditor] = useState(false);\n\n  // Default gradient\n  const defaultGradient: GradientSettings = {\n    type: 'linear',\n    angle: 45,\n    stops: [\n      { color: '#667eea', position: 0 },\n      { color: '#764ba2', position: 100 }\n    ]\n  };\n\n  const gradient = currentGradient || defaultGradient;\n\n  // Generate CSS gradient string\n  const generateGradientCSS = (grad: GradientSettings): string => {\n    const stopsString = grad.stops\n      .sort((a, b) => a.position - b.position)\n      .map(stop => `${stop.color} ${stop.position}%`)\n      .join(', ');\n\n    if (grad.type === 'linear') {\n      return `linear-gradient(${grad.angle}deg, ${stopsString})`;\n    } else {\n      const shape = grad.shape || 'circle';\n      const position = grad.position || 'center';\n      return `radial-gradient(${shape} at ${position}, ${stopsString})`;\n    }\n  };\n\n  // Update gradient attribute\n  const updateGradient = (updates: Partial<GradientSettings>) => {\n    const newGradient = { ...gradient, ...updates };\n    onGradientChange(newGradient);\n  };\n\n  // Add color stop\n  const addColorStop = () => {\n    const newPosition = gradient.stops.length > 0\n      ? Math.min(100, Math.max(...gradient.stops.map(s => s.position)) + 25)\n      : 50;\n\n    const newStop: GradientStop = {\n      color: '#000000',\n      position: newPosition\n    };\n\n    updateGradient({\n      stops: [...gradient.stops, newStop].sort((a, b) => a.position - b.position)\n    });\n  };\n\n  // Remove color stop\n  const removeColorStop = (index: number) => {\n    if (gradient.stops.length <= 2) return; // Keep at least 2 stops\n\n    const newStops = gradient.stops.filter((_, i) => i !== index);\n    updateGradient({ stops: newStops });\n  };\n\n  // Update color stop\n  const updateColorStop = (index: number, updates: Partial<GradientStop>) => {\n    const newStops = gradient.stops.map((stop, i) =>\n      i === index ? { ...stop, ...updates } : stop\n    );\n    updateGradient({ stops: newStops.sort((a, b) => a.position - b.position) });\n  };\n\n  return (\n    <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Palette className=\"h-4 w-4\" />\n          <Label className=\"text-sm font-medium\">Gradient Background</Label>\n        </div>\n        <Button\n          variant={isEnabled ? \"default\" : \"outline\"}\n          size=\"sm\"\n          onClick={() => onToggleGradient(!isEnabled)}\n          className=\"h-8 px-3 text-xs\"\n        >\n          {isEnabled ? 'Enabled' : 'Disabled'}\n        </Button>\n      </div>\n\n      {isEnabled && (\n        <>\n          {/* Current Gradient Preview */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n            <div\n              className=\"h-12 w-full rounded border\"\n              style={{ background: generateGradientCSS(gradient) }}\n            />\n            <p className=\"text-xs text-gray-500 font-mono break-all\">\n              {generateGradientCSS(gradient)}\n            </p>\n          </div>\n\n          {/* Gradient Type */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Type</Label>\n            <div className=\"flex gap-2\">\n              <Button\n                variant={gradient.type === 'linear' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => updateGradient({ type: 'linear' })}\n                className=\"flex-1 text-xs\"\n              >\n                Linear\n              </Button>\n              <Button\n                variant={gradient.type === 'radial' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => updateGradient({ type: 'radial' })}\n                className=\"flex-1 text-xs\"\n              >\n                Radial\n              </Button>\n            </div>\n          </div>\n\n          {/* Direction/Angle Control */}\n          {gradient.type === 'linear' && (\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs font-medium text-gray-700\">\n                Angle: {gradient.angle}°\n              </Label>\n              <div className=\"flex gap-2 items-center\">\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"360\"\n                  value={gradient.angle}\n                  onChange={(e) => updateGradient({ angle: parseInt(e.target.value) })}\n                  className=\"flex-1\"\n                />\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => updateGradient({ angle: (gradient.angle + 45) % 360 })}\n                  className=\"h-8 w-8 p-0\"\n                >\n                  <RotateCw className=\"h-3 w-3\" />\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {/* Radial Settings */}\n          {gradient.type === 'radial' && (\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs font-medium text-gray-700\">Shape & Position</Label>\n              <div className=\"grid grid-cols-2 gap-2\">\n                <Button\n                  variant={gradient.shape === 'circle' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => updateGradient({ shape: 'circle' })}\n                  className=\"text-xs\"\n                >\n                  Circle\n                </Button>\n                <Button\n                  variant={gradient.shape === 'ellipse' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => updateGradient({ shape: 'ellipse' })}\n                  className=\"text-xs\"\n                >\n                  Ellipse\n                </Button>\n              </div>\n            </div>\n          )}\n\n          {/* Presets */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <Label className=\"text-xs font-medium text-gray-700\">Presets</Label>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowPresets(!showPresets)}\n                className=\"h-6 w-6 p-0\"\n              >\n                {showPresets ? (\n                  <ChevronUp className=\"h-3 w-3\" />\n                ) : (\n                  <ChevronDown className=\"h-3 w-3\" />\n                )}\n              </Button>\n            </div>\n\n            {showPresets && (\n              <div className=\"grid grid-cols-5 gap-2\">\n                {GRADIENT_PRESETS.map((preset, index) => (\n                  <button\n                    key={index}\n                    className=\"h-8 w-full rounded border hover:ring-2 hover:ring-blue-300 transition-all\"\n                    style={{ background: generateGradientCSS(preset) }}\n                    onClick={() => onGradientChange(preset)}\n                    title={`Preset ${index + 1}`}\n                  />\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Custom Editor */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <Label className=\"text-xs font-medium text-gray-700\">Custom Editor</Label>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowCustomEditor(!showCustomEditor)}\n                className=\"h-6 w-6 p-0\"\n              >\n                {showCustomEditor ? (\n                  <ChevronUp className=\"h-3 w-3\" />\n                ) : (\n                  <ChevronDown className=\"h-3 w-3\" />\n                )}\n              </Button>\n            </div>\n\n            {showCustomEditor && (\n              <div className=\"space-y-3 p-3 bg-white rounded border\">\n                {/* Color Stops */}\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label className=\"text-xs font-medium\">Color Stops</Label>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={addColorStop}\n                      disabled={gradient.stops.length >= 4}\n                      className=\"h-6 px-2 text-xs\"\n                    >\n                      <Plus className=\"h-3 w-3\" />\n                    </Button>\n                  </div>\n\n                  {gradient.stops.map((stop, index) => (\n                    <div key={index} className=\"flex items-center gap-2\">\n                      <input\n                        type=\"color\"\n                        value={stop.color}\n                        onChange={(e) => updateColorStop(index, { color: e.target.value })}\n                        className=\"w-8 h-6 rounded border cursor-pointer\"\n                      />\n                      <Input\n                        type=\"range\"\n                        min=\"0\"\n                        max=\"100\"\n                        value={stop.position}\n                        onChange={(e) => updateColorStop(index, { position: parseInt(e.target.value) })}\n                        className=\"flex-1 h-6\"\n                      />\n                      <span className=\"text-xs w-8 text-center\">\n                        {stop.position}%\n                      </span>\n                      {gradient.stops.length > 2 && (\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => removeColorStop(index)}\n                          className=\"h-6 w-6 p-0 text-red-500 hover:text-red-700\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </Button>\n                      )}\n                    </div>\n                  ))}\n                </div>\n\n                {/* Reset Button */}\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => onGradientChange(defaultGradient)}\n                  className=\"w-full text-xs\"\n                >\n                  <RefreshCw className=\"h-3 w-3 mr-1\" />\n                  Reset to Default\n                </Button>\n              </div>\n            )}\n          </div>\n\n          {/* Tips */}\n          <div className=\"text-xs text-gray-500 space-y-1 pt-2 border-t\">\n            <p><strong>Tip:</strong> Gradients enhance button visual appeal</p>\n            <p><strong>Linear:</strong> Directional color flow</p>\n            <p><strong>Radial:</strong> Circular color spread</p>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default GradientEditor;","/**\n * ShadowEditor Component\n * 그림자 효과 편집기 - Box Shadow 커스터마이징\n */\n\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Layers,\n  RefreshCw,\n  ChevronDown,\n  ChevronUp,\n  Sun,\n  Moon\n} from 'lucide-react';\n\ninterface ShadowSettings {\n  enabled: boolean;\n  horizontal: number; // X offset\n  vertical: number;   // Y offset\n  blur: number;       // Blur radius\n  spread: number;     // Spread radius\n  color: string;      // Shadow color\n  opacity: number;    // 0-100\n  inset: boolean;     // Inner shadow\n}\n\ninterface ShadowEditorProps {\n  currentShadow?: ShadowSettings;\n  onShadowChange: (shadow: ShadowSettings) => void;\n}\n\n// 8가지 그림자 프리셋\nconst SHADOW_PRESETS: ShadowSettings[] = [\n  {\n    enabled: true,\n    horizontal: 0,\n    vertical: 2,\n    blur: 4,\n    spread: 0,\n    color: '#000000',\n    opacity: 25,\n    inset: false\n  },\n  {\n    enabled: true,\n    horizontal: 0,\n    vertical: 4,\n    blur: 8,\n    spread: 0,\n    color: '#000000',\n    opacity: 15,\n    inset: false\n  },\n  {\n    enabled: true,\n    horizontal: 0,\n    vertical: 8,\n    blur: 16,\n    spread: 0,\n    color: '#000000',\n    opacity: 10,\n    inset: false\n  },\n  {\n    enabled: true,\n    horizontal: 2,\n    vertical: 2,\n    blur: 8,\n    spread: 0,\n    color: '#000000',\n    opacity: 20,\n    inset: false\n  },\n  {\n    enabled: true,\n    horizontal: 0,\n    vertical: 0,\n    blur: 0,\n    spread: 1,\n    color: '#007cba',\n    opacity: 50,\n    inset: false\n  },\n  {\n    enabled: true,\n    horizontal: 0,\n    vertical: 0,\n    blur: 10,\n    spread: 0,\n    color: '#007cba',\n    opacity: 30,\n    inset: false\n  },\n  {\n    enabled: true,\n    horizontal: 2,\n    vertical: 2,\n    blur: 4,\n    spread: 0,\n    color: '#000000',\n    opacity: 15,\n    inset: true\n  },\n  {\n    enabled: true,\n    horizontal: 0,\n    vertical: -2,\n    blur: 8,\n    spread: -2,\n    color: '#ffffff',\n    opacity: 80,\n    inset: false\n  }\n];\n\nexport const ShadowEditor: React.FC<ShadowEditorProps> = ({\n  currentShadow,\n  onShadowChange,\n}) => {\n  const [showPresets, setShowPresets] = useState(true);\n  const [showCustomEditor, setShowCustomEditor] = useState(false);\n\n  // Default shadow\n  const defaultShadow: ShadowSettings = {\n    enabled: false,\n    horizontal: 0,\n    vertical: 2,\n    blur: 4,\n    spread: 0,\n    color: '#000000',\n    opacity: 25,\n    inset: false\n  };\n\n  const shadow = currentShadow || defaultShadow;\n\n  // Generate CSS box-shadow string\n  const generateShadowCSS = (shadowSettings: ShadowSettings): string => {\n    if (!shadowSettings.enabled) return 'none';\n\n    const { horizontal, vertical, blur, spread, color, opacity, inset } = shadowSettings;\n\n    // Convert color to rgba with opacity\n    const hexToRgba = (hex: string, alpha: number): string => {\n      const r = parseInt(hex.slice(1, 3), 16);\n      const g = parseInt(hex.slice(3, 5), 16);\n      const b = parseInt(hex.slice(5, 7), 16);\n      return `rgba(${r}, ${g}, ${b}, ${alpha / 100})`;\n    };\n\n    const shadowColor = hexToRgba(color, opacity);\n    const insetKeyword = inset ? 'inset ' : '';\n\n    return `${insetKeyword}${horizontal}px ${vertical}px ${blur}px ${spread}px ${shadowColor}`;\n  };\n\n  // Update shadow\n  const updateShadow = (updates: Partial<ShadowSettings>) => {\n    const newShadow = { ...shadow, ...updates };\n    onShadowChange(newShadow);\n  };\n\n  // Toggle shadow\n  const toggleShadow = () => {\n    updateShadow({ enabled: !shadow.enabled });\n  };\n\n  return (\n    <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Layers className=\"h-4 w-4\" />\n          <Label className=\"text-sm font-medium\">Box Shadow</Label>\n        </div>\n        <Button\n          variant={shadow.enabled ? \"default\" : \"outline\"}\n          size=\"sm\"\n          onClick={toggleShadow}\n          className=\"h-8 px-3 text-xs\"\n        >\n          {shadow.enabled ? 'Enabled' : 'Disabled'}\n        </Button>\n      </div>\n\n      {shadow.enabled && (\n        <>\n          {/* Shadow Preview */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n            <div className=\"p-4 bg-white rounded border\">\n              <div\n                className=\"h-12 w-24 bg-blue-500 rounded mx-auto\"\n                style={{ boxShadow: generateShadowCSS(shadow) }}\n              />\n            </div>\n            <p className=\"text-xs text-gray-500 font-mono break-all\">\n              box-shadow: {generateShadowCSS(shadow)}\n            </p>\n          </div>\n\n          {/* Quick Controls */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Quick Settings</Label>\n            <div className=\"grid grid-cols-2 gap-2\">\n              <Button\n                variant={shadow.inset ? \"outline\" : \"default\"}\n                size=\"sm\"\n                onClick={() => updateShadow({ inset: false })}\n                className=\"text-xs\"\n              >\n                <Sun className=\"h-3 w-3 mr-1\" />\n                Outer\n              </Button>\n              <Button\n                variant={shadow.inset ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => updateShadow({ inset: true })}\n                className=\"text-xs\"\n              >\n                <Moon className=\"h-3 w-3 mr-1\" />\n                Inner\n              </Button>\n            </div>\n          </div>\n\n          {/* Position & Size Controls */}\n          <div className=\"space-y-3\">\n            <Label className=\"text-xs font-medium text-gray-700\">Position & Size</Label>\n\n            {/* Horizontal */}\n            <div className=\"space-y-1\">\n              <div className=\"flex justify-between text-xs\">\n                <span>Horizontal: {shadow.horizontal}px</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"-20\"\n                max=\"20\"\n                value={shadow.horizontal}\n                onChange={(e) => updateShadow({ horizontal: parseInt(e.target.value) })}\n                className=\"w-full\"\n              />\n            </div>\n\n            {/* Vertical */}\n            <div className=\"space-y-1\">\n              <div className=\"flex justify-between text-xs\">\n                <span>Vertical: {shadow.vertical}px</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"-20\"\n                max=\"20\"\n                value={shadow.vertical}\n                onChange={(e) => updateShadow({ vertical: parseInt(e.target.value) })}\n                className=\"w-full\"\n              />\n            </div>\n\n            {/* Blur */}\n            <div className=\"space-y-1\">\n              <div className=\"flex justify-between text-xs\">\n                <span>Blur: {shadow.blur}px</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"30\"\n                value={shadow.blur}\n                onChange={(e) => updateShadow({ blur: parseInt(e.target.value) })}\n                className=\"w-full\"\n              />\n            </div>\n\n            {/* Spread */}\n            <div className=\"space-y-1\">\n              <div className=\"flex justify-between text-xs\">\n                <span>Spread: {shadow.spread}px</span>\n              </div>\n              <input\n                type=\"range\"\n                min=\"-10\"\n                max=\"10\"\n                value={shadow.spread}\n                onChange={(e) => updateShadow({ spread: parseInt(e.target.value) })}\n                className=\"w-full\"\n              />\n            </div>\n          </div>\n\n          {/* Color & Opacity */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Color & Opacity</Label>\n            <div className=\"flex gap-2 items-center\">\n              <input\n                type=\"color\"\n                value={shadow.color}\n                onChange={(e) => updateShadow({ color: e.target.value })}\n                className=\"w-12 h-8 rounded border cursor-pointer\"\n              />\n              <div className=\"flex-1 space-y-1\">\n                <div className=\"flex justify-between text-xs\">\n                  <span>Opacity: {shadow.opacity}%</span>\n                </div>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"100\"\n                  value={shadow.opacity}\n                  onChange={(e) => updateShadow({ opacity: parseInt(e.target.value) })}\n                  className=\"w-full\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Presets */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <Label className=\"text-xs font-medium text-gray-700\">Presets</Label>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowPresets(!showPresets)}\n                className=\"h-6 w-6 p-0\"\n              >\n                {showPresets ? (\n                  <ChevronUp className=\"h-3 w-3\" />\n                ) : (\n                  <ChevronDown className=\"h-3 w-3\" />\n                )}\n              </Button>\n            </div>\n\n            {showPresets && (\n              <div className=\"grid grid-cols-4 gap-2\">\n                {SHADOW_PRESETS.map((preset, index) => (\n                  <button\n                    key={index}\n                    className=\"h-12 w-full bg-white rounded border hover:ring-2 hover:ring-blue-300 transition-all relative overflow-hidden\"\n                    onClick={() => onShadowChange(preset)}\n                    title={`Shadow Preset ${index + 1}`}\n                  >\n                    <div\n                      className=\"absolute inset-2 bg-blue-400 rounded\"\n                      style={{ boxShadow: generateShadowCSS(preset) }}\n                    />\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Advanced Editor */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <Label className=\"text-xs font-medium text-gray-700\">Advanced</Label>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setShowCustomEditor(!showCustomEditor)}\n                className=\"h-6 w-6 p-0\"\n              >\n                {showCustomEditor ? (\n                  <ChevronUp className=\"h-3 w-3\" />\n                ) : (\n                  <ChevronDown className=\"h-3 w-3\" />\n                )}\n              </Button>\n            </div>\n\n            {showCustomEditor && (\n              <div className=\"space-y-3 p-3 bg-white rounded border\">\n                {/* Manual Input */}\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <div>\n                    <Label className=\"text-xs\">X Offset</Label>\n                    <Input\n                      type=\"number\"\n                      value={shadow.horizontal}\n                      onChange={(e) => updateShadow({ horizontal: parseInt(e.target.value) || 0 })}\n                      className=\"h-8 text-xs\"\n                    />\n                  </div>\n                  <div>\n                    <Label className=\"text-xs\">Y Offset</Label>\n                    <Input\n                      type=\"number\"\n                      value={shadow.vertical}\n                      onChange={(e) => updateShadow({ vertical: parseInt(e.target.value) || 0 })}\n                      className=\"h-8 text-xs\"\n                    />\n                  </div>\n                  <div>\n                    <Label className=\"text-xs\">Blur</Label>\n                    <Input\n                      type=\"number\"\n                      value={shadow.blur}\n                      onChange={(e) => updateShadow({ blur: parseInt(e.target.value) || 0 })}\n                      className=\"h-8 text-xs\"\n                    />\n                  </div>\n                  <div>\n                    <Label className=\"text-xs\">Spread</Label>\n                    <Input\n                      type=\"number\"\n                      value={shadow.spread}\n                      onChange={(e) => updateShadow({ spread: parseInt(e.target.value) || 0 })}\n                      className=\"h-8 text-xs\"\n                    />\n                  </div>\n                </div>\n\n                {/* Reset Button */}\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => onShadowChange(defaultShadow)}\n                  className=\"w-full text-xs\"\n                >\n                  <RefreshCw className=\"h-3 w-3 mr-1\" />\n                  Reset Shadow\n                </Button>\n              </div>\n            )}\n          </div>\n\n          {/* Tips */}\n          <div className=\"text-xs text-gray-500 space-y-1 pt-2 border-t\">\n            <p><strong>Tip:</strong> Subtle shadows enhance button depth</p>\n            <p><strong>Outer:</strong> Creates drop shadow effect</p>\n            <p><strong>Inner:</strong> Creates pressed/inset effect</p>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ShadowEditor;","/**\n * IconInserter Component\n * 아이콘 삽입 및 커스터마이징 - Lucide Icons 활용\n */\n\nimport React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport {\n  Star,\n  Heart,\n  Home,\n  User,\n  Settings,\n  Search,\n  Mail,\n  Phone,\n  Download,\n  Upload,\n  Play,\n  Pause,\n  ChevronRight,\n  ChevronLeft,\n  ArrowRight,\n  ArrowLeft,\n  Plus,\n  X,\n  Check,\n  Info,\n  AlertCircle,\n  ShoppingCart,\n  CreditCard,\n  Eye,\n  EyeOff,\n  Lock,\n  Unlock,\n  Calendar,\n  Clock,\n  MapPin,\n  Globe,\n  Camera,\n  Image,\n  Video,\n  Music,\n  FileText,\n  Folder,\n  Save,\n  Edit,\n  Trash2,\n  Share,\n  Copy,\n  Link,\n  ExternalLink,\n  Menu,\n  MoreHorizontal,\n  Bell,\n  ChevronDown,\n  ChevronUp,\n  RefreshCw,\n  Zap,\n  Shield,\n  Award,\n  Target,\n  Bookmark,\n  Flag,\n  Gift,\n  Smile,\n  ThumbsUp,\n  MessageCircle,\n  Send,\n  Mic,\n  MicOff,\n  Volume2,\n  VolumeX\n} from 'lucide-react';\n\ninterface IconSettings {\n  enabled: boolean;\n  iconName: string;\n  position: 'left' | 'right';\n  size: number;\n  gap: number;\n  color?: string; // inherit if undefined\n}\n\ninterface IconInserterProps {\n  currentIcon?: IconSettings;\n  buttonText: string;\n  onIconChange: (icon: IconSettings) => void;\n}\n\n// 60개의 자주 사용되는 아이콘들\nconst ICON_LIBRARY = [\n  { name: 'star', icon: Star, category: 'general' },\n  { name: 'heart', icon: Heart, category: 'general' },\n  { name: 'home', icon: Home, category: 'general' },\n  { name: 'user', icon: User, category: 'general' },\n  { name: 'settings', icon: Settings, category: 'general' },\n  { name: 'search', icon: Search, category: 'general' },\n  { name: 'mail', icon: Mail, category: 'communication' },\n  { name: 'phone', icon: Phone, category: 'communication' },\n  { name: 'download', icon: Download, category: 'action' },\n  { name: 'upload', icon: Upload, category: 'action' },\n  { name: 'play', icon: Play, category: 'media' },\n  { name: 'pause', icon: Pause, category: 'media' },\n  { name: 'chevron-right', icon: ChevronRight, category: 'navigation' },\n  { name: 'chevron-left', icon: ChevronLeft, category: 'navigation' },\n  { name: 'arrow-right', icon: ArrowRight, category: 'navigation' },\n  { name: 'arrow-left', icon: ArrowLeft, category: 'navigation' },\n  { name: 'plus', icon: Plus, category: 'action' },\n  { name: 'x', icon: X, category: 'action' },\n  { name: 'check', icon: Check, category: 'status' },\n  { name: 'info', icon: Info, category: 'status' },\n  { name: 'alert-circle', icon: AlertCircle, category: 'status' },\n  { name: 'shopping-cart', icon: ShoppingCart, category: 'ecommerce' },\n  { name: 'credit-card', icon: CreditCard, category: 'ecommerce' },\n  { name: 'eye', icon: Eye, category: 'interface' },\n  { name: 'eye-off', icon: EyeOff, category: 'interface' },\n  { name: 'lock', icon: Lock, category: 'security' },\n  { name: 'unlock', icon: Unlock, category: 'security' },\n  { name: 'calendar', icon: Calendar, category: 'time' },\n  { name: 'clock', icon: Clock, category: 'time' },\n  { name: 'map-pin', icon: MapPin, category: 'location' },\n  { name: 'globe', icon: Globe, category: 'location' },\n  { name: 'camera', icon: Camera, category: 'media' },\n  { name: 'image', icon: Image, category: 'media' },\n  { name: 'video', icon: Video, category: 'media' },\n  { name: 'music', icon: Music, category: 'media' },\n  { name: 'file-text', icon: FileText, category: 'file' },\n  { name: 'folder', icon: Folder, category: 'file' },\n  { name: 'save', icon: Save, category: 'action' },\n  { name: 'edit', icon: Edit, category: 'action' },\n  { name: 'trash-2', icon: Trash2, category: 'action' },\n  { name: 'share', icon: Share, category: 'action' },\n  { name: 'copy', icon: Copy, category: 'action' },\n  { name: 'link', icon: Link, category: 'action' },\n  { name: 'external-link', icon: ExternalLink, category: 'action' },\n  { name: 'menu', icon: Menu, category: 'interface' },\n  { name: 'more-horizontal', icon: MoreHorizontal, category: 'interface' },\n  { name: 'bell', icon: Bell, category: 'communication' },\n  { name: 'chevron-down', icon: ChevronDown, category: 'navigation' },\n  { name: 'chevron-up', icon: ChevronUp, category: 'navigation' },\n  { name: 'refresh-cw', icon: RefreshCw, category: 'action' },\n  { name: 'zap', icon: Zap, category: 'general' },\n  { name: 'shield', icon: Shield, category: 'security' },\n  { name: 'award', icon: Award, category: 'general' },\n  { name: 'target', icon: Target, category: 'general' },\n  { name: 'bookmark', icon: Bookmark, category: 'general' },\n  { name: 'flag', icon: Flag, category: 'general' },\n  { name: 'gift', icon: Gift, category: 'general' },\n  { name: 'smile', icon: Smile, category: 'social' },\n  { name: 'thumbs-up', icon: ThumbsUp, category: 'social' },\n  { name: 'message-circle', icon: MessageCircle, category: 'communication' },\n  { name: 'send', icon: Send, category: 'communication' },\n  { name: 'mic', icon: Mic, category: 'media' },\n  { name: 'mic-off', icon: MicOff, category: 'media' },\n  { name: 'volume-2', icon: Volume2, category: 'media' },\n  { name: 'volume-x', icon: VolumeX, category: 'media' }\n];\n\nconst ICON_CATEGORIES = [\n  'all',\n  'general',\n  'action',\n  'navigation',\n  'communication',\n  'media',\n  'interface',\n  'ecommerce',\n  'security',\n  'time',\n  'location',\n  'file',\n  'social',\n  'status'\n] as const;\n\nexport const IconInserter: React.FC<IconInserterProps> = ({\n  currentIcon,\n  buttonText,\n  onIconChange,\n}) => {\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showIconPicker, setShowIconPicker] = useState(false);\n\n  // Default icon settings\n  const defaultIcon: IconSettings = {\n    enabled: false,\n    iconName: 'star',\n    position: 'left',\n    size: 16,\n    gap: 8\n  };\n\n  const icon = currentIcon || defaultIcon;\n\n  // Filter icons\n  const filteredIcons = ICON_LIBRARY.filter(iconItem => {\n    const matchesCategory = selectedCategory === 'all' || iconItem.category === selectedCategory;\n    const matchesSearch = iconItem.name.toLowerCase().includes(searchTerm.toLowerCase());\n    return matchesCategory && matchesSearch;\n  });\n\n  // Get icon component by name\n  const getIconComponent = (iconName: string) => {\n    const iconItem = ICON_LIBRARY.find(item => item.name === iconName);\n    return iconItem ? iconItem.icon : Star;\n  };\n\n  // Update icon\n  const updateIcon = (updates: Partial<IconSettings>) => {\n    const newIcon = { ...icon, ...updates };\n    onIconChange(newIcon);\n  };\n\n  // Toggle icon\n  const toggleIcon = () => {\n    updateIcon({ enabled: !icon.enabled });\n  };\n\n  // Select icon\n  const selectIcon = (iconName: string) => {\n    updateIcon({ iconName, enabled: true });\n    setShowIconPicker(false);\n  };\n\n  const IconComponent = getIconComponent(icon.iconName);\n\n  return (\n    <div className=\"space-y-4 p-4 border rounded-lg bg-gray-50\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <Star className=\"h-4 w-4\" />\n          <Label className=\"text-sm font-medium\">Button Icon</Label>\n        </div>\n        <Button\n          variant={icon.enabled ? \"default\" : \"outline\"}\n          size=\"sm\"\n          onClick={toggleIcon}\n          className=\"h-8 px-3 text-xs\"\n        >\n          {icon.enabled ? 'Enabled' : 'Disabled'}\n        </Button>\n      </div>\n\n      {icon.enabled && (\n        <>\n          {/* Current Icon Preview */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-xs font-medium text-gray-700\">Preview</Label>\n            <div className=\"p-4 bg-white rounded border\">\n              <div className=\"flex items-center justify-center\">\n                <div\n                  className=\"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded\"\n                  style={{ gap: `${icon.gap}px` }}\n                >\n                  {icon.position === 'left' && (\n                    <IconComponent\n                      size={icon.size}\n                      style={{ color: icon.color || 'inherit' }}\n                    />\n                  )}\n                  <span>{buttonText || 'Button Text'}</span>\n                  {icon.position === 'right' && (\n                    <IconComponent\n                      size={icon.size}\n                      style={{ color: icon.color || 'inherit' }}\n                    />\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Current Icon Info */}\n          <div className=\"flex items-center justify-between p-3 bg-white rounded border\">\n            <div className=\"flex items-center gap-2\">\n              <IconComponent size={16} />\n              <span className=\"text-sm font-medium\">{icon.iconName}</span>\n            </div>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setShowIconPicker(!showIconPicker)}\n              className=\"text-xs\"\n            >\n              Change Icon\n            </Button>\n          </div>\n\n          {/* Icon Settings */}\n          <div className=\"space-y-3\">\n            {/* Position */}\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs font-medium text-gray-700\">Position</Label>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant={icon.position === 'left' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => updateIcon({ position: 'left' })}\n                  className=\"flex-1 text-xs\"\n                >\n                  <ArrowLeft className=\"h-3 w-3 mr-1\" />\n                  Left\n                </Button>\n                <Button\n                  variant={icon.position === 'right' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => updateIcon({ position: 'right' })}\n                  className=\"flex-1 text-xs\"\n                >\n                  Right\n                  <ArrowRight className=\"h-3 w-3 ml-1\" />\n                </Button>\n              </div>\n            </div>\n\n            {/* Size */}\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs font-medium text-gray-700\">\n                Size: {icon.size}px\n              </Label>\n              <input\n                type=\"range\"\n                min=\"12\"\n                max=\"32\"\n                value={icon.size}\n                onChange={(e) => updateIcon({ size: parseInt(e.target.value) })}\n                className=\"w-full\"\n              />\n              <div className=\"flex justify-between text-xs text-gray-500\">\n                <span>12px</span>\n                <span>32px</span>\n              </div>\n            </div>\n\n            {/* Gap */}\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs font-medium text-gray-700\">\n                Gap: {icon.gap}px\n              </Label>\n              <input\n                type=\"range\"\n                min=\"4\"\n                max=\"20\"\n                value={icon.gap}\n                onChange={(e) => updateIcon({ gap: parseInt(e.target.value) })}\n                className=\"w-full\"\n              />\n              <div className=\"flex justify-between text-xs text-gray-500\">\n                <span>4px</span>\n                <span>20px</span>\n              </div>\n            </div>\n\n            {/* Color */}\n            <div className=\"space-y-2\">\n              <Label className=\"text-xs font-medium text-gray-700\">Color</Label>\n              <div className=\"flex gap-2 items-center\">\n                <input\n                  type=\"color\"\n                  value={icon.color || '#ffffff'}\n                  onChange={(e) => updateIcon({ color: e.target.value })}\n                  className=\"w-12 h-8 rounded border cursor-pointer\"\n                />\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => updateIcon({ color: undefined })}\n                  className=\"text-xs\"\n                >\n                  Inherit\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          {/* Icon Picker */}\n          {showIconPicker && (\n            <div className=\"space-y-3 p-3 bg-white rounded border\">\n              {/* Search */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium text-gray-700\">Search Icons</Label>\n                <Input\n                  type=\"text\"\n                  placeholder=\"Search icons...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"h-8 text-xs\"\n                />\n              </div>\n\n              {/* Categories */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium text-gray-700\">Categories</Label>\n                <div className=\"flex flex-wrap gap-1\">\n                  {ICON_CATEGORIES.map((category) => (\n                    <Button\n                      key={category}\n                      variant={selectedCategory === category ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => setSelectedCategory(category)}\n                      className=\"h-6 px-2 text-xs capitalize\"\n                    >\n                      {category}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Icon Grid */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs font-medium text-gray-700\">\n                  Icons ({filteredIcons.length})\n                </Label>\n                <div className=\"grid grid-cols-8 gap-2 max-h-48 overflow-y-auto\">\n                  {filteredIcons.map((iconItem) => {\n                    const IconComp = iconItem.icon;\n                    return (\n                      <button\n                        key={iconItem.name}\n                        className={`\n                          h-10 w-10 flex items-center justify-center rounded border hover:bg-gray-100 transition-colors\n                          ${icon.iconName === iconItem.name ? 'bg-blue-100 border-blue-500' : ''}\n                        `}\n                        onClick={() => selectIcon(iconItem.name)}\n                        title={iconItem.name}\n                      >\n                        <IconComp size={16} />\n                      </button>\n                    );\n                  })}\n                </div>\n              </div>\n\n              {/* Close Button */}\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setShowIconPicker(false)}\n                className=\"w-full text-xs\"\n              >\n                Close Icon Picker\n              </Button>\n            </div>\n          )}\n\n          {/* Tips */}\n          <div className=\"text-xs text-gray-500 space-y-1 pt-2 border-t\">\n            <p><strong>Tip:</strong> Icons enhance button meaning and UX</p>\n            <p><strong>Position:</strong> Left for actions, right for navigation</p>\n            <p><strong>Size:</strong> Keep consistent with text size</p>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default IconInserter;","/**\n * ButtonBlock Component\n * Gutenberg-style button block with BlockControls and InspectorControls\n */\n\nimport { useState, useEffect } from 'react';\nimport { cn } from '@/lib/utils';\nimport {\n  Link2,\n  ExternalLink,\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  AlignJustify,\n  Palette,\n  Settings,\n  Layers,\n  Star,\n  X\n} from 'lucide-react';\nimport EnhancedBlockWrapper from './EnhancedBlockWrapper';\nimport { RichText } from '../gutenberg/RichText';\nimport { BlockControls, ToolbarGroup, ToolbarButton } from '../gutenberg/BlockControls';\nimport { GradientEditor } from './button/GradientEditor';\nimport { ShadowEditor } from './button/ShadowEditor';\nimport { IconInserter } from './button/IconInserter';\nimport { Button } from '@/components/ui/button';\n\ninterface ButtonBlockProps {\n  id: string;\n  content: string;\n  onChange: (content: string, attributes?: any) => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after') => void;\n  isSelected: boolean;\n  onSelect: () => void;\n  attributes?: {\n    text?: string;\n    url?: string;\n    style?: 'fill' | 'outline';\n    width?: number;\n    align?: 'left' | 'center' | 'right' | 'wide' | 'full';\n    textColor?: string;\n    backgroundColor?: string;\n    borderRadius?: number;\n    borderWidth?: number;\n    linkTarget?: string;\n    rel?: string;\n    fontSize?: number;\n    paddingX?: number;\n    paddingY?: number;\n    // Gradient attributes\n    gradientEnabled?: boolean;\n    gradientType?: 'linear' | 'radial';\n    gradientAngle?: number;\n    gradientStops?: Array<{\n      color: string;\n      position: number;\n    }>;\n    gradientShape?: 'circle' | 'ellipse';\n    gradientPosition?: string;\n    // Shadow attributes\n    shadowEnabled?: boolean;\n    shadowHorizontal?: number;\n    shadowVertical?: number;\n    shadowBlur?: number;\n    shadowSpread?: number;\n    shadowColor?: string;\n    shadowOpacity?: number;\n    shadowInset?: boolean;\n    // Icon attributes\n    iconEnabled?: boolean;\n    iconName?: string;\n    iconPosition?: 'left' | 'right';\n    iconSize?: number;\n    iconGap?: number;\n    iconColor?: string;\n  };\n  canMoveUp?: boolean;\n  canMoveDown?: boolean;\n  isDragging?: boolean;\n  onDragStart?: () => void;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDrop?: (e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n  onCopy?: () => void;\n  onPaste?: () => void;\n  onChangeType?: (newType: string) => void;\n}\n\nconst ButtonBlock: React.FC<ButtonBlockProps> = ({\n  id,\n  content,\n  onChange,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  isSelected,\n  onSelect,\n  attributes = {}\n}) => {\n  const [localText, setLocalText] = useState(attributes.text || 'Click here');\n  const [localUrl, setLocalUrl] = useState(attributes.url || '#');\n  const [showGradientSettings, setShowGradientSettings] = useState(false);\n  const [showShadowSettings, setShowShadowSettings] = useState(false);\n  const [showIconSettings, setShowIconSettings] = useState(false);\n\n  const {\n    text = 'Click here',\n    url = '#',\n    style = 'fill',\n    width = 0,\n    align = 'center',\n    textColor = '#ffffff',\n    backgroundColor = '#007cba',\n    borderRadius = 2,\n    borderWidth = 2,\n    linkTarget = '',\n    // rel = '',  // Currently unused\n    fontSize = 16,\n    paddingX = 24,\n    paddingY = 12,\n    // Gradient defaults\n    gradientEnabled = false,\n    gradientType = 'linear',\n    gradientAngle = 45,\n    gradientStops = [\n      { color: '#667eea', position: 0 },\n      { color: '#764ba2', position: 100 }\n    ],\n    gradientShape = 'circle',\n    gradientPosition = 'center',\n    // Shadow defaults\n    shadowEnabled = false,\n    shadowHorizontal = 0,\n    shadowVertical = 2,\n    shadowBlur = 4,\n    shadowSpread = 0,\n    shadowColor = '#000000',\n    shadowOpacity = 25,\n    shadowInset = false,\n    // Icon defaults\n    iconEnabled = false,\n    iconName = 'star',\n    iconPosition = 'left',\n    iconSize = 16,\n    iconGap = 8,\n    iconColor\n  } = attributes;\n\n  // Sync text and URL changes\n  useEffect(() => {\n    setLocalText(text);\n    setLocalUrl(url);\n  }, [text, url]);\n\n  // Update attribute\n  const updateAttribute = (key: string, value: any) => {\n    onChange(content, { ...attributes, [key]: value });\n  };\n\n  // Handle text change\n  const handleTextChange = (newText: string) => {\n    // Extract plain text from HTML\n    const plainText = newText.replace(/<[^>]*>/g, '');\n    setLocalText(plainText);\n    updateAttribute('text', plainText);\n  };\n\n  // Generate gradient CSS\n  const generateGradientCSS = (): string => {\n    if (!gradientEnabled || !gradientStops || gradientStops.length < 2) {\n      return '';\n    }\n\n    const stopsString = gradientStops\n      .sort((a, b) => a.position - b.position)\n      .map(stop => `${stop.color} ${stop.position}%`)\n      .join(', ');\n\n    if (gradientType === 'linear') {\n      return `linear-gradient(${gradientAngle}deg, ${stopsString})`;\n    } else {\n      const shape = gradientShape || 'circle';\n      const position = gradientPosition || 'center';\n      return `radial-gradient(${shape} at ${position}, ${stopsString})`;\n    }\n  };\n\n  // Generate shadow CSS\n  const generateShadowCSS = (): string => {\n    if (!shadowEnabled) return 'none';\n\n    // Convert color to rgba with opacity\n    const hexToRgba = (hex: string, alpha: number): string => {\n      const r = parseInt(hex.slice(1, 3), 16);\n      const g = parseInt(hex.slice(3, 5), 16);\n      const b = parseInt(hex.slice(5, 7), 16);\n      return `rgba(${r}, ${g}, ${b}, ${alpha / 100})`;\n    };\n\n    const shadowColorRgba = hexToRgba(shadowColor, shadowOpacity);\n    const insetKeyword = shadowInset ? 'inset ' : '';\n\n    return `${insetKeyword}${shadowHorizontal}px ${shadowVertical}px ${shadowBlur}px ${shadowSpread}px ${shadowColorRgba}`;\n  };\n\n  // Get icon component\n  const getIconComponent = () => {\n    if (!iconEnabled || !iconName) return null;\n\n    // Import icon libraries - we'll use a simple mapping for common icons\n    const iconMap: { [key: string]: any } = {\n      'star': Star,\n      'heart': Star, // We'll use Star as fallback for now\n      'home': Star,\n      'user': Star,\n      'settings': Settings,\n      'search': Star,\n      'mail': Star,\n      'phone': Star,\n      'download': Star,\n      'upload': Star,\n      'arrow-right': Star,\n      'arrow-left': Star,\n      'plus': Star,\n      'check': Star,\n      'x': X,\n      'external-link': ExternalLink,\n      'link': Link2\n    };\n\n    const IconComponent = iconMap[iconName] || Star;\n\n    return (\n      <IconComponent\n        size={iconSize}\n        style={{\n          color: iconColor || 'inherit',\n          flexShrink: 0\n        }}\n      />\n    );\n  };\n\n  // Get button styles\n  const getButtonStyles = () => {\n    const styles: React.CSSProperties = {\n      fontSize: `${fontSize}px`,\n      paddingLeft: `${paddingX}px`,\n      paddingRight: `${paddingX}px`,\n      paddingTop: `${paddingY}px`,\n      paddingBottom: `${paddingY}px`,\n      borderRadius: `${borderRadius}px`,\n      width: width ? `${width}%` : 'auto',\n      // Add shadow\n      boxShadow: generateShadowCSS()\n    };\n\n    if (style === 'fill') {\n      // Use gradient if enabled, otherwise use solid background\n      if (gradientEnabled && gradientStops && gradientStops.length >= 2) {\n        styles.background = generateGradientCSS();\n      } else {\n        styles.backgroundColor = backgroundColor;\n      }\n      styles.color = textColor;\n      styles.border = 'none';\n    } else {\n      styles.backgroundColor = 'transparent';\n      // For outline style, use gradient border if enabled\n      if (gradientEnabled && gradientStops && gradientStops.length >= 2) {\n        styles.borderImage = `${generateGradientCSS()} 1`;\n        styles.borderImageSlice = 1;\n        styles.borderWidth = `${borderWidth}px`;\n        styles.borderStyle = 'solid';\n        styles.color = gradientStops[0]?.color || backgroundColor;\n      } else {\n        styles.color = backgroundColor;\n        styles.border = `${borderWidth}px solid ${backgroundColor}`;\n      }\n    }\n\n    return styles;\n  };\n\n  // Get wrapper alignment class\n  const getAlignmentClass = () => {\n    switch (align) {\n      case 'left': return 'text-left';\n      case 'center': return 'text-center';\n      case 'right': return 'text-right';\n      case 'wide': return 'w-full max-w-4xl mx-auto';\n      case 'full': return 'w-full';\n      default: return 'text-center';\n    }\n  };\n\n  return (\n    <>\n      {/* Block Controls - Floating Toolbar */}\n      {isSelected && (\n        <BlockControls>\n          {/* Link Settings */}\n          <ToolbarGroup>\n            <ToolbarButton\n              icon={<Link2 className=\"h-4 w-4\" />}\n              label=\"Edit Link\"\n              onClick={() => {\n                const newUrl = prompt('Enter URL:', localUrl);\n                if (newUrl !== null) {\n                  setLocalUrl(newUrl);\n                  updateAttribute('url', newUrl);\n                }\n              }}\n            />\n            {localUrl && localUrl !== '#' && (\n              <ToolbarButton\n                icon={<ExternalLink className=\"h-4 w-4\" />}\n                label=\"Open in New Tab\"\n                isActive={linkTarget === '_blank'}\n                onClick={() => {\n                  updateAttribute('linkTarget', linkTarget === '_blank' ? '' : '_blank');\n                  if (linkTarget !== '_blank') {\n                    updateAttribute('rel', 'noopener noreferrer');\n                  }\n                }}\n              />\n            )}\n          </ToolbarGroup>\n\n          {/* Alignment */}\n          <ToolbarGroup>\n            <ToolbarButton\n              icon={<AlignLeft className=\"h-4 w-4\" />}\n              label=\"Align left\"\n              isActive={align === 'left'}\n              onClick={() => updateAttribute('align', 'left')}\n            />\n            <ToolbarButton\n              icon={<AlignCenter className=\"h-4 w-4\" />}\n              label=\"Align center\"\n              isActive={align === 'center'}\n              onClick={() => updateAttribute('align', 'center')}\n            />\n            <ToolbarButton\n              icon={<AlignRight className=\"h-4 w-4\" />}\n              label=\"Align right\"\n              isActive={align === 'right'}\n              onClick={() => updateAttribute('align', 'right')}\n            />\n            <ToolbarButton\n              icon={<AlignJustify className=\"h-4 w-4\" />}\n              label=\"Full width\"\n              isActive={align === 'full'}\n              onClick={() => updateAttribute('align', align === 'full' ? 'center' : 'full')}\n            />\n          </ToolbarGroup>\n\n          {/* Gradient Controls */}\n          <ToolbarGroup>\n            <ToolbarButton\n              icon={<Palette className=\"h-4 w-4\" />}\n              label=\"Gradient Background\"\n              isActive={gradientEnabled}\n              onClick={() => updateAttribute('gradientEnabled', !gradientEnabled)}\n            />\n          </ToolbarGroup>\n        </BlockControls>\n      )}\n\n      {/* Inspector Controls removed - now handled by GutenbergSidebar */}\n\n      {/* Block Content */}\n      <EnhancedBlockWrapper\n        id={id}\n        type=\"button\"\n        isSelected={isSelected}\n        onSelect={onSelect}\n        onDelete={onDelete}\n        onDuplicate={onDuplicate}\n        onMoveUp={onMoveUp}\n        onMoveDown={onMoveDown}\n        onAddBlock={onAddBlock}\n        className=\"wp-block wp-block-button\"\n        customToolbarContent={\n          isSelected ? (\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              {/* Style Quick Selector */}\n              <div className=\"flex gap-1\">\n                <Button\n                  variant={style === 'fill' ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => updateAttribute('style', 'fill')}\n                  className=\"h-7 px-3 text-xs\"\n                >\n                  Fill\n                </Button>\n                <Button\n                  variant={style === 'outline' ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => updateAttribute('style', 'outline')}\n                  className=\"h-7 px-3 text-xs\"\n                >\n                  Outline\n                </Button>\n              </div>\n\n              <div className=\"w-px h-4 bg-gray-300\" />\n\n              {/* Settings Buttons */}\n              <Button\n                variant={showGradientSettings ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                className=\"h-7 px-2 text-xs\"\n                onClick={() => setShowGradientSettings(!showGradientSettings)}\n              >\n                <Palette className=\"h-3 w-3 mr-1\" />\n                Gradient\n              </Button>\n\n              <Button\n                variant={showShadowSettings ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                className=\"h-7 px-2 text-xs\"\n                onClick={() => setShowShadowSettings(!showShadowSettings)}\n              >\n                <Layers className=\"h-3 w-3 mr-1\" />\n                Shadow\n              </Button>\n\n              <Button\n                variant={showIconSettings ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                className=\"h-7 px-2 text-xs\"\n                onClick={() => setShowIconSettings(!showIconSettings)}\n              >\n                <Star className=\"h-3 w-3 mr-1\" />\n                Icon\n              </Button>\n\n              {/* Indicators */}\n              {gradientEnabled && (\n                <div className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded\">\n                  Gradient On\n                </div>\n              )}\n              {shadowEnabled && (\n                <div className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded\">\n                  Shadow On\n                </div>\n              )}\n              {iconEnabled && (\n                <div className=\"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded\">\n                  Icon On\n                </div>\n              )}\n            </div>\n          ) : null\n        }\n      >\n        <div className={cn('wp-block-button__wrapper', getAlignmentClass())}>\n          <div className=\"wp-block-button__link-wrapper inline-block\">\n            <div\n              className={cn(\n                'wp-block-button__link',\n                'inline-flex items-center cursor-pointer transition-all',\n                'hover:opacity-90'\n              )}\n              style={{\n                ...getButtonStyles(),\n                gap: iconEnabled ? `${iconGap}px` : undefined\n              }}\n            >\n              {/* Left Icon */}\n              {iconEnabled && iconPosition === 'left' && getIconComponent()}\n\n              {/* Button Text */}\n              <RichText\n                tagName=\"span\"\n                value={localText}\n                onChange={handleTextChange}\n                placeholder=\"Add text...\"\n                className=\"outline-none\"\n                allowedFormats={['core/bold', 'core/italic']}\n                style={{ background: 'none', border: 'none', padding: 0 }}\n              />\n\n              {/* Right Icon */}\n              {iconEnabled && iconPosition === 'right' && getIconComponent()}\n            </div>\n          </div>\n        </div>\n\n        {/* Gradient Settings Panel */}\n        {isSelected && showGradientSettings && (\n          <div className=\"mt-4\">\n            <GradientEditor\n              currentGradient={gradientEnabled ? {\n                type: gradientType,\n                angle: gradientAngle,\n                stops: gradientStops,\n                shape: gradientShape,\n                position: gradientPosition\n              } : undefined}\n              isEnabled={gradientEnabled}\n              onGradientChange={(gradient) => {\n                if (gradient) {\n                  updateAttribute('gradientType', gradient.type);\n                  updateAttribute('gradientAngle', gradient.angle);\n                  updateAttribute('gradientStops', gradient.stops);\n                  updateAttribute('gradientShape', gradient.shape);\n                  updateAttribute('gradientPosition', gradient.position);\n                } else {\n                  updateAttribute('gradientEnabled', false);\n                }\n              }}\n              onToggleGradient={(enabled) => updateAttribute('gradientEnabled', enabled)}\n            />\n          </div>\n        )}\n\n        {/* Shadow Settings Panel */}\n        {isSelected && showShadowSettings && (\n          <div className=\"mt-4\">\n            <ShadowEditor\n              currentShadow={{\n                enabled: shadowEnabled,\n                horizontal: shadowHorizontal,\n                vertical: shadowVertical,\n                blur: shadowBlur,\n                spread: shadowSpread,\n                color: shadowColor,\n                opacity: shadowOpacity,\n                inset: shadowInset\n              }}\n              onShadowChange={(shadow) => {\n                updateAttribute('shadowEnabled', shadow.enabled);\n                updateAttribute('shadowHorizontal', shadow.horizontal);\n                updateAttribute('shadowVertical', shadow.vertical);\n                updateAttribute('shadowBlur', shadow.blur);\n                updateAttribute('shadowSpread', shadow.spread);\n                updateAttribute('shadowColor', shadow.color);\n                updateAttribute('shadowOpacity', shadow.opacity);\n                updateAttribute('shadowInset', shadow.inset);\n              }}\n            />\n          </div>\n        )}\n\n        {/* Icon Settings Panel */}\n        {isSelected && showIconSettings && (\n          <div className=\"mt-4\">\n            <IconInserter\n              currentIcon={{\n                enabled: iconEnabled,\n                iconName: iconName,\n                position: iconPosition,\n                size: iconSize,\n                gap: iconGap,\n                color: iconColor\n              }}\n              buttonText={localText}\n              onIconChange={(icon) => {\n                updateAttribute('iconEnabled', icon.enabled);\n                updateAttribute('iconName', icon.iconName);\n                updateAttribute('iconPosition', icon.position);\n                updateAttribute('iconSize', icon.size);\n                updateAttribute('iconGap', icon.gap);\n                updateAttribute('iconColor', icon.color);\n              }}\n            />\n          </div>\n        )}\n      </EnhancedBlockWrapper>\n    </>\n  );\n};\n\nexport default ButtonBlock;","/**\n * BlockWrapper Component\n * Provides common functionality for all Gutenberg blocks\n */\n\nimport { useState, useRef, useEffect, ReactNode } from 'react';\nimport { cn } from '@/lib/utils';\nimport { \n  GripVertical, \n  Plus,\n  Copy,\n  Trash2,\n  ArrowUp,\n  ArrowDown\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\n\ninterface BlockWrapperProps {\n  id: string;\n  type: string;\n  children: ReactNode;\n  isSelected: boolean;\n  onSelect: () => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after') => void;\n  isDragging?: boolean;\n  canMoveUp?: boolean;\n  canMoveDown?: boolean;\n  className?: string;\n  onDragStart?: () => void;\n  onDragOver?: (e: React.DragEvent) => void;\n  onDrop?: (e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n}\n\nconst BlockWrapper: React.FC<BlockWrapperProps> = ({\n  id,\n  type,\n  children,\n  isSelected,\n  onSelect,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  isDragging = false,\n  canMoveUp = true,\n  canMoveDown = true,\n  className,\n  onDragStart,\n  onDragOver: _onDragOver,\n  onDrop: _onDrop,\n  onDragEnd\n}) => {\n  const [isHovered, setIsHovered] = useState(false);\n  const blockRef = useRef<HTMLDivElement>(null);\n\n  // Auto-focus block when selected\n  useEffect(() => {\n    if (isSelected && blockRef.current) {\n      const focusableElement = blockRef.current.querySelector(\n        '[contenteditable], input, textarea, button'\n      );\n      if (focusableElement instanceof HTMLElement) {\n        focusableElement.focus();\n      }\n    }\n  }, [isSelected]);\n\n  // Handle keyboard shortcuts\n  useEffect(() => {\n    if (!isSelected) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Block-level shortcuts\n      if (e.altKey && e.shiftKey) {\n        switch (e.key) {\n          case 'ArrowUp':\n            e.preventDefault();\n            onMoveUp();\n            break;\n          case 'ArrowDown':\n            e.preventDefault();\n            onMoveDown();\n            break;\n          case 'd':\n            e.preventDefault();\n            onDuplicate();\n            break;\n        }\n      }\n\n      // Delete block\n      if (e.key === 'Delete' && e.shiftKey) {\n        e.preventDefault();\n        onDelete();\n      }\n\n      // Add new block\n      if (e.key === 'Enter' && e.ctrlKey) {\n        e.preventDefault();\n        onAddBlock?.('after');\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isSelected, onMoveUp, onMoveDown, onDuplicate, onDelete, onAddBlock]);\n\n  return (\n    <div\n      ref={blockRef}\n      data-block-id={id}\n      data-block-type={type}\n      className={cn(\n        'block-wrapper group relative transition-all duration-200',\n        isSelected && 'ring-2 ring-blue-500 ring-offset-1 bg-blue-50 rounded-sm',\n        isHovered && !isSelected && 'ring-1 ring-gray-300 rounded-sm',\n        isDragging && 'opacity-50',\n        className\n      )}\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onClick={(e) => {\n        e.stopPropagation();\n        onSelect();\n      }}\n    >\n      {/* Block toolbar - show when selected */}\n      {isSelected && (\n        <div className=\"absolute -top-10 left-0 flex items-center gap-1 bg-white border border-gray-200 rounded-md shadow-md p-1 z-50\">\n          {/* Move buttons */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-7 w-7 p-0\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onMoveUp();\n            }}\n            disabled={!canMoveUp}\n            title=\"Move up (Alt+Shift+↑)\"\n          >\n            <ArrowUp className=\"h-3 w-3\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-7 w-7 p-0\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onMoveDown();\n            }}\n            disabled={!canMoveDown}\n            title=\"Move down (Alt+Shift+↓)\"\n          >\n            <ArrowDown className=\"h-3 w-3\" />\n          </Button>\n          \n          <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n\n          {/* Duplicate button */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-7 w-7 p-0\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onDuplicate();\n            }}\n            title=\"Duplicate block (Alt+Shift+D)\"\n          >\n            <Copy className=\"h-3 w-3\" />\n          </Button>\n\n          {/* Delete button */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-7 w-7 p-0 hover:text-red-600\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onDelete();\n            }}\n            title=\"Delete block (Shift+Delete)\"\n          >\n            <Trash2 className=\"h-3 w-3\" />\n          </Button>\n          \n          <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n          \n          {/* Drag handle */}\n          <div\n            className=\"cursor-move p-1 hover:bg-gray-100 rounded\"\n            draggable\n            onDragStart={(e) => {\n              e.dataTransfer.effectAllowed = 'move';\n              e.dataTransfer.setData('blockId', id);\n              onDragStart?.();\n            }}\n            onDragEnd={onDragEnd}\n            title=\"Drag to move block\"\n          >\n            <GripVertical className=\"h-3 w-3\" />\n          </div>\n        </div>\n      )}\n\n      {/* Add block quick inserter - show on hover between blocks */}\n      {isHovered && !isSelected && (\n        <button\n          className=\"absolute -top-3 left-1/2 -translate-x-1/2 bg-blue-500 text-white rounded-full p-1 opacity-0 hover:opacity-100 transition-opacity z-40\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAddBlock?.('before');\n          }}\n          title=\"Add block before\"\n        >\n          <Plus className=\"h-3 w-3\" />\n        </button>\n      )}\n\n      {/* Block content */}\n      <div className=\"block-content\">\n        {children}\n      </div>\n\n      {/* Bottom add block button */}\n      {isHovered && !isSelected && (\n        <button\n          className=\"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-blue-500 text-white rounded-full p-1 opacity-0 hover:opacity-100 transition-opacity z-40\"\n          onClick={(e) => {\n            e.stopPropagation();\n            onAddBlock?.('after');\n          }}\n          title=\"Add block after\"\n        >\n          <Plus className=\"h-3 w-3\" />\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default BlockWrapper;","/**\n * ColumnsBlock Component\n * Gutenberg-style columns block with BlockControls and InspectorControls\n */\n\nimport { useState, useEffect } from 'react';\nimport { cn } from '@/lib/utils';\nimport { \n  Layout,\n  Plus,\n  Trash2\n} from 'lucide-react';\nimport BlockWrapper from './BlockWrapper';\nimport { BlockControls, ToolbarGroup, ToolbarButton } from '../gutenberg/BlockControls';\n\ninterface Column {\n  id: string;\n  width?: number;\n  content: any[];\n}\n\ninterface ColumnsBlockProps {\n  id: string;\n  onChange: (content: any, attributes?: any) => void;\n  onDelete: () => void;\n  onDuplicate: () => void;\n  onMoveUp: () => void;\n  onMoveDown: () => void;\n  onAddBlock?: (position: 'before' | 'after') => void;\n  isSelected: boolean;\n  onSelect: () => void;\n  attributes?: {\n    columns?: Column[];\n    columnCount?: number;\n    verticalAlignment?: 'top' | 'center' | 'bottom';\n    isStackedOnMobile?: boolean;\n    gap?: number;\n    minHeight?: number;\n    backgroundColor?: string;\n    padding?: number;\n  };\n}\n\nconst ColumnsBlock: React.FC<ColumnsBlockProps> = ({\n  id,\n  onChange,\n  onDelete,\n  onDuplicate,\n  onMoveUp,\n  onMoveDown,\n  onAddBlock,\n  isSelected,\n  onSelect,\n  attributes = {}\n}) => {\n  const {\n    columns = [\n      { id: '1', width: 50, content: [] },\n      { id: '2', width: 50, content: [] }\n    ],\n    // columnCount = 2,  // Currently unused\n    verticalAlignment = 'top',\n    isStackedOnMobile = true,\n    gap = 20,\n    minHeight = 0,\n    backgroundColor = '',\n    padding = 0\n  } = attributes;\n\n  const [localColumns, setLocalColumns] = useState<Column[]>(columns);\n  const [selectedColumnId, setSelectedColumnId] = useState<string | null>(null);\n\n  // Sync columns\n  useEffect(() => {\n    setLocalColumns(columns);\n  }, [columns]);\n\n  // Update attribute\n  const updateAttribute = (key: string, value: any) => {\n    onChange('', { ...attributes, [key]: value });\n  };\n\n  // Update columns\n  const updateColumns = (newColumns: Column[]) => {\n    setLocalColumns(newColumns);\n    updateAttribute('columns', newColumns);\n    updateAttribute('columnCount', newColumns.length);\n  };\n\n  // Add column\n  const addColumn = () => {\n    const newColumn: Column = {\n      id: Date.now().toString(),\n      width: Math.floor(100 / (localColumns.length + 1)),\n      content: []\n    };\n    \n    // Recalculate widths\n    const totalColumns = localColumns.length + 1;\n    const newWidth = Math.floor(100 / totalColumns);\n    const updatedColumns = localColumns.map(col => ({\n      ...col,\n      width: newWidth\n    }));\n    \n    updateColumns([...updatedColumns, { ...newColumn, width: newWidth }]);\n  };\n\n  // Remove column\n  const removeColumn = (columnId: string) => {\n    if (localColumns.length <= 1) return;\n    \n    const newColumns = localColumns.filter(col => col.id !== columnId);\n    // Recalculate widths\n    const newWidth = Math.floor(100 / newColumns.length);\n    const updatedColumns = newColumns.map(col => ({\n      ...col,\n      width: newWidth\n    }));\n    \n    updateColumns(updatedColumns);\n    setSelectedColumnId(null);\n  };\n\n\n\n  // Get vertical alignment style\n  const getAlignmentStyle = () => {\n    switch (verticalAlignment) {\n      case 'center': return 'items-center';\n      case 'bottom': return 'items-end';\n      default: return 'items-start';\n    }\n  };\n\n  return (\n    <>\n      {/* Block Controls - Floating Toolbar */}\n      {isSelected && (\n        <BlockControls>\n          {/* Column Actions */}\n          <ToolbarGroup>\n            <ToolbarButton\n              icon={<Plus className=\"h-4 w-4\" />}\n              label=\"Add Column\"\n              onClick={addColumn}\n            />\n            {selectedColumnId && (\n              <ToolbarButton\n                icon={<Trash2 className=\"h-4 w-4\" />}\n                label=\"Remove Column\"\n                onClick={() => removeColumn(selectedColumnId)}\n              />\n            )}\n          </ToolbarGroup>\n\n          {/* Vertical Alignment */}\n          <ToolbarGroup>\n            <ToolbarButton\n              icon={<Layout className=\"h-4 w-4 rotate-90\" />}\n              label=\"Align top\"\n              isActive={verticalAlignment === 'top'}\n              onClick={() => updateAttribute('verticalAlignment', 'top')}\n            />\n            <ToolbarButton\n              icon={<Layout className=\"h-4 w-4\" />}\n              label=\"Align center\"\n              isActive={verticalAlignment === 'center'}\n              onClick={() => updateAttribute('verticalAlignment', 'center')}\n            />\n            <ToolbarButton\n              icon={<Layout className=\"h-4 w-4 rotate-90\" />}\n              label=\"Align bottom\"\n              isActive={verticalAlignment === 'bottom'}\n              onClick={() => updateAttribute('verticalAlignment', 'bottom')}\n            />\n          </ToolbarGroup>\n        </BlockControls>\n      )}\n\n      {/* Inspector Controls removed - now handled by GutenbergSidebar */}\n\n      {/* Block Content */}\n      <BlockWrapper\n        id={id}\n        type=\"columns\"\n        isSelected={isSelected}\n        onSelect={onSelect}\n        onDelete={onDelete}\n        onDuplicate={onDuplicate}\n        onMoveUp={onMoveUp}\n        onMoveDown={onMoveDown}\n        onAddBlock={onAddBlock}\n        className=\"wp-block wp-block-columns\"\n      >\n        <div\n          className={cn(\n            'wp-block-columns__wrapper',\n            'flex',\n            isStackedOnMobile && 'flex-col md:flex-row',\n            getAlignmentStyle()\n          )}\n          style={{\n            gap: `${gap}px`,\n            minHeight: minHeight ? `${minHeight}px` : undefined,\n            backgroundColor: backgroundColor || undefined,\n            padding: padding ? `${padding}px` : undefined\n          }}\n        >\n          {localColumns.map((column, index) => (\n            <div\n              key={column.id}\n              className={cn(\n                'wp-block-column',\n                'flex-1 border-2 border-dashed rounded',\n                selectedColumnId === column.id ? 'border-blue-500 bg-blue-50' : 'border-gray-300',\n                'p-4 min-h-[100px] cursor-pointer transition-all'\n              )}\n              style={{\n                flex: `0 0 ${column.width}%`,\n                maxWidth: `${column.width}%`\n              }}\n              onClick={(e) => {\n                e.stopPropagation();\n                setSelectedColumnId(column.id);\n              }}\n            >\n              {/* Column Header */}\n              <div className=\"flex items-center justify-between mb-2 pb-2 border-b border-gray-200\">\n                <span className=\"text-xs text-gray-500 font-medium\">\n                  Column {index + 1} ({column.width}%)\n                </span>\n                <button\n                  className=\"text-gray-400 hover:text-red-500 transition-colors\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    removeColumn(column.id);\n                  }}\n                >\n                  <Trash2 className=\"h-3 w-3\" />\n                </button>\n              </div>\n\n              {/* Column Content Area */}\n              <div className=\"min-h-[60px] flex items-center justify-center text-gray-400\">\n                {column.content.length > 0 ? (\n                  <div className=\"w-full\">\n                    {/* Render nested blocks here */}\n                    {column.content.map((block: any) => (\n                      <div key={block.id} className=\"mb-2\">\n                        {/* Placeholder for nested block */}\n                        <div className=\"p-2 bg-gray-100 rounded text-sm\">\n                          {block.type} block\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                ) : (\n                  <div className=\"text-center\">\n                    <Plus className=\"h-6 w-6 mx-auto mb-2\" />\n                    <p className=\"text-sm\">Add blocks here</p>\n                  </div>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      </BlockWrapper>\n    </>\n  );\n};\n\nexport default ColumnsBlock;","import { FC, lazy, Suspense } from 'react';\nimport { Label } from '@/components/ui/label';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Button } from '@/components/ui/button';\nimport { AlignLeft, AlignCenter, AlignRight, AlignJustify } from 'lucide-react';\n\n// Lazy load block-specific settings components\nconst ImageBlockSettings = lazy(() => import('./ImageBlockSettings'));\nconst ButtonBlockSettings = lazy(() => import('./ButtonBlockSettings'));\nconst GalleryBlockSettings = lazy(() => import('./GalleryBlockSettings'));\nconst CoverBlockSettings = lazy(() => import('./CoverBlockSettings'));\n\ninterface BlockSettingsRendererProps {\n  block: any;\n  onBlockSettingsChange?: (settings: any) => void;\n}\n\nconst BlockSettingsRenderer: FC<BlockSettingsRendererProps> = ({ \n  block, \n  onBlockSettingsChange \n}) => {\n  if (!block) {\n    return (\n      <div className=\"p-4 text-center text-gray-500\">\n        <p className=\"text-sm\">Select a block to see its settings</p>\n      </div>\n    );\n  }\n\n  // Extract block type (remove namespace if present)\n  const blockType = block.type?.replace('o4o/', '').replace('core/', '');\n\n  // Common settings for all blocks\n  const renderCommonSettings = () => (\n    <>\n      <div className=\"space-y-2\">\n        <h3 className=\"text-sm font-medium\">Block Info</h3>\n        <div className=\"space-y-4\">\n          <div className=\"p-3 bg-gray-50 rounded-md\">\n            <p className=\"text-sm font-medium\">{block.type}</p>\n            <p className=\"text-xs text-gray-500\">Block ID: {block.id}</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        <h3 className=\"text-sm font-medium\">Advanced</h3>\n        <div className=\"space-y-4\">\n          <div>\n            <Label className=\"text-xs\">CSS Class</Label>\n            <Input\n              placeholder=\"custom-class\"\n              value={block.attributes?.className || ''}\n              onChange={(e: any) => \n                onBlockSettingsChange?.({\n                  attributes: { ...block.attributes, className: e.target.value }\n                })\n              }\n            />\n          </div>\n          <div>\n            <Label className=\"text-xs\">HTML Anchor</Label>\n            <Input\n              placeholder=\"anchor-id\"\n              value={block.attributes?.anchor || ''}\n              onChange={(e: any) => \n                onBlockSettingsChange?.({\n                  attributes: { ...block.attributes, anchor: e.target.value }\n                })\n              }\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  );\n\n  // Render block-specific settings based on type\n  const renderBlockSpecificSettings = () => {\n    switch (blockType) {\n      case 'image':\n        return (\n          <Suspense fallback={<div>Loading settings...</div>}>\n            <ImageBlockSettings \n              settings={block.attributes || {}}\n              onChange={(settings) => onBlockSettingsChange?.({ attributes: settings })}\n            />\n          </Suspense>\n        );\n\n      case 'button':\n        return (\n          <Suspense fallback={<div>Loading settings...</div>}>\n            <ButtonBlockSettings \n              settings={block.attributes || {}}\n              onChange={(settings) => onBlockSettingsChange?.({ attributes: settings })}\n            />\n          </Suspense>\n        );\n\n      case 'gallery':\n        return (\n          <Suspense fallback={<div>Loading settings...</div>}>\n            <GalleryBlockSettings \n              settings={block.attributes || {}}\n              onChange={(settings) => onBlockSettingsChange?.({ attributes: settings })}\n            />\n          </Suspense>\n        );\n\n      case 'cover':\n        return (\n          <Suspense fallback={<div>Loading settings...</div>}>\n            <CoverBlockSettings \n              settings={block.attributes || {}}\n              onChange={(settings) => onBlockSettingsChange?.({ attributes: settings })}\n            />\n          </Suspense>\n        );\n\n      case 'heading':\n        return (\n          <div className=\"border-b pb-4\">\n            <h3 className=\"text-sm font-medium mb-3\">Typography</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <Label className=\"text-xs\">Level</Label>\n                <Select\n                  value={block.attributes?.level || 'h2'}\n                  onValueChange={(value: string) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, level: value }\n                    })\n                  }\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"h1\">H1</SelectItem>\n                    <SelectItem value=\"h2\">H2</SelectItem>\n                    <SelectItem value=\"h3\">H3</SelectItem>\n                    <SelectItem value=\"h4\">H4</SelectItem>\n                    <SelectItem value=\"h5\">H5</SelectItem>\n                    <SelectItem value=\"h6\">H6</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label className=\"text-xs\">Alignment</Label>\n                <div className=\"flex gap-1\">\n                  {['left', 'center', 'right', 'justify'].map((align) => (\n                    <Button\n                      key={align}\n                      variant={block.attributes?.align === align ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => \n                        onBlockSettingsChange?.({\n                          attributes: { ...block.attributes, align }\n                        })\n                      }\n                      title={align}\n                    >\n                      {align === 'left' && <AlignLeft className=\"h-4 w-4\" />}\n                      {align === 'center' && <AlignCenter className=\"h-4 w-4\" />}\n                      {align === 'right' && <AlignRight className=\"h-4 w-4\" />}\n                      {align === 'justify' && <AlignJustify className=\"h-4 w-4\" />}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'paragraph':\n        return (\n          <div className=\"border-b pb-4\">\n            <h3 className=\"text-sm font-medium mb-3\">Typography</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <Label className=\"text-xs\">Drop Cap</Label>\n                <input\n                  type=\"checkbox\"\n                  checked={block.attributes?.dropCap || false}\n                  onChange={(e) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, dropCap: e.target.checked }\n                    })\n                  }\n                  className=\"ml-2\"\n                />\n              </div>\n              <div>\n                <Label className=\"text-xs\">Alignment</Label>\n                <div className=\"flex gap-1\">\n                  {['left', 'center', 'right', 'justify'].map((align) => (\n                    <Button\n                      key={align}\n                      variant={block.attributes?.align === align ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => \n                        onBlockSettingsChange?.({\n                          attributes: { ...block.attributes, align }\n                        })\n                      }\n                      title={align}\n                    >\n                      {align === 'left' && <AlignLeft className=\"h-4 w-4\" />}\n                      {align === 'center' && <AlignCenter className=\"h-4 w-4\" />}\n                      {align === 'right' && <AlignRight className=\"h-4 w-4\" />}\n                      {align === 'justify' && <AlignJustify className=\"h-4 w-4\" />}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'list':\n        return (\n          <div className=\"border-b pb-4\">\n            <h3 className=\"text-sm font-medium mb-3\">List Settings</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <Label className=\"text-xs\">List Type</Label>\n                <Select\n                  value={block.attributes?.ordered ? 'ordered' : 'unordered'}\n                  onValueChange={(value: string) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, ordered: value === 'ordered' }\n                    })\n                  }\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"unordered\">Unordered (•)</SelectItem>\n                    <SelectItem value=\"ordered\">Ordered (1.)</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label className=\"text-xs\">Start Value (for ordered lists)</Label>\n                <Input\n                  type=\"number\"\n                  min=\"1\"\n                  value={block.attributes?.start || 1}\n                  onChange={(e: any) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, start: parseInt(e.target.value) || 1 }\n                    })\n                  }\n                  disabled={!block.attributes?.ordered}\n                />\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'quote':\n        return (\n          <div className=\"border-b pb-4\">\n            <h3 className=\"text-sm font-medium mb-3\">Quote Settings</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <Label className=\"text-xs\">Citation</Label>\n                <Input\n                  placeholder=\"Citation source\"\n                  value={block.attributes?.citation || ''}\n                  onChange={(e: any) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, citation: e.target.value }\n                    })\n                  }\n                />\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'code':\n        return (\n          <div className=\"border-b pb-4\">\n            <h3 className=\"text-sm font-medium mb-3\">Code Settings</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <Label className=\"text-xs\">Language</Label>\n                <Select\n                  value={block.attributes?.language || 'javascript'}\n                  onValueChange={(value: string) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, language: value }\n                    })\n                  }\n                >\n                  <SelectTrigger>\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"javascript\">JavaScript</SelectItem>\n                    <SelectItem value=\"typescript\">TypeScript</SelectItem>\n                    <SelectItem value=\"python\">Python</SelectItem>\n                    <SelectItem value=\"html\">HTML</SelectItem>\n                    <SelectItem value=\"css\">CSS</SelectItem>\n                    <SelectItem value=\"json\">JSON</SelectItem>\n                    <SelectItem value=\"sql\">SQL</SelectItem>\n                    <SelectItem value=\"bash\">Bash</SelectItem>\n                    <SelectItem value=\"plaintext\">Plain Text</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n              <div>\n                <Label className=\"text-xs\">Show Line Numbers</Label>\n                <input\n                  type=\"checkbox\"\n                  checked={block.attributes?.showLineNumbers || false}\n                  onChange={(e) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, showLineNumbers: e.target.checked }\n                    })\n                  }\n                  className=\"ml-2\"\n                />\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'video':\n        return (\n          <div className=\"border-b pb-4\">\n            <h3 className=\"text-sm font-medium mb-3\">Video Settings</h3>\n            <div className=\"space-y-4\">\n              <div>\n                <Label className=\"text-xs\">Autoplay</Label>\n                <input\n                  type=\"checkbox\"\n                  checked={block.attributes?.autoplay || false}\n                  onChange={(e) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, autoplay: e.target.checked }\n                    })\n                  }\n                  className=\"ml-2\"\n                />\n              </div>\n              <div>\n                <Label className=\"text-xs\">Loop</Label>\n                <input\n                  type=\"checkbox\"\n                  checked={block.attributes?.loop || false}\n                  onChange={(e) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, loop: e.target.checked }\n                    })\n                  }\n                  className=\"ml-2\"\n                />\n              </div>\n              <div>\n                <Label className=\"text-xs\">Muted</Label>\n                <input\n                  type=\"checkbox\"\n                  checked={block.attributes?.muted || false}\n                  onChange={(e) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, muted: e.target.checked }\n                    })\n                  }\n                  className=\"ml-2\"\n                />\n              </div>\n              <div>\n                <Label className=\"text-xs\">Show Controls</Label>\n                <input\n                  type=\"checkbox\"\n                  checked={block.attributes?.controls !== false}\n                  onChange={(e) => \n                    onBlockSettingsChange?.({\n                      attributes: { ...block.attributes, controls: e.target.checked }\n                    })\n                  }\n                  className=\"ml-2\"\n                />\n              </div>\n            </div>\n          </div>\n        );\n\n      default:\n        return (\n          <div className=\"border-b pb-4\">\n            <h3 className=\"text-sm font-medium mb-3\">Block Settings</h3>\n            <div className=\"p-4 text-sm text-gray-600\">\n              No specific settings available for {blockType} block.\n            </div>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className=\"space-y-4 p-4\">\n      {renderBlockSpecificSettings()}\n      {renderCommonSettings()}\n    </div>\n  );\n};\n\nexport default BlockSettingsRenderer;","import { forwardRef, HTMLAttributes, ButtonHTMLAttributes, createContext, useContext, useState } from 'react';\nimport { cn } from '@/lib/utils';\n\ninterface CollapsibleContextValue {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst CollapsibleContext = createContext<CollapsibleContextValue | null>(null);\n\nexport interface CollapsibleProps extends HTMLAttributes<HTMLDivElement> {\n  open?: boolean;\n  defaultOpen?: boolean;\n  onOpenChange?: (open: boolean) => void;\n}\n\nconst Collapsible = forwardRef<HTMLDivElement, CollapsibleProps>(\n  ({ open: controlledOpen, defaultOpen = false, onOpenChange, children, className, ...props }, ref) => {\n    const [uncontrolledOpen, setUncontrolledOpen] = useState(defaultOpen);\n    const open = controlledOpen ?? uncontrolledOpen;\n    \n    const handleOpenChange = (newOpen: boolean) => {\n      if (controlledOpen === undefined) {\n        setUncontrolledOpen(newOpen);\n      }\n      onOpenChange?.(newOpen);\n    };\n\n    return (\n      <CollapsibleContext.Provider value={{ open, onOpenChange: handleOpenChange }}>\n        <div ref={ref} className={className} {...props}>\n          {children}\n        </div>\n      </CollapsibleContext.Provider>\n    );\n  }\n);\n\nconst CollapsibleTrigger = forwardRef<HTMLButtonElement, ButtonHTMLAttributes<HTMLButtonElement>>(\n  ({ onClick, ...props }, ref) => {\n    const context = useContext(CollapsibleContext);\n    if (!context) throw new Error('CollapsibleTrigger must be used within Collapsible');\n    \n    return (\n      <button\n        ref={ref}\n        onClick={(e: any) => {\n          onClick?.(e);\n          context.onOpenChange(!context.open);\n        }}\n        aria-expanded={context.open}\n        {...props}\n      />\n    );\n  }\n);\n\nconst CollapsibleContent = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(\n  ({ className, style, children, ...props }, ref) => {\n    const context = useContext(CollapsibleContext);\n    if (!context) throw new Error('CollapsibleContent must be used within Collapsible');\n    \n    if (!context.open) {\n      return null;\n    }\n    \n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"overflow-hidden\",\n          \"data-[state=open]:animate-collapsible-down data-[state=closed]:animate-collapsible-up\",\n          className\n        )}\n        data-state={context.open ? 'open' : 'closed'}\n        style={{\n          ...style,\n        }}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\nCollapsible.displayName = 'Collapsible';\nCollapsibleTrigger.displayName = 'CollapsibleTrigger';\nCollapsibleContent.displayName = 'CollapsibleContent';\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent };","import { ChangeEvent, FC, ReactNode, useState } from 'react';\nimport {\n  FileText,\n  Settings,\n  Eye,\n  Lock,\n  Image as ImageIcon,\n  ChevronDown,\n  ChevronRight,\n  X,\n  Search,\n  Plus,\n  AlertCircle,\n  Globe\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/components/ui/select';\nimport {\n  Tabs,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport BlockSettingsRenderer from './BlockSettingsRenderer';\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from '@/components/ui/collapsible';\n\ninterface PostSettings {\n  status: 'draft' | 'pending' | 'private' | 'publish' | 'scheduled';\n  visibility: 'public' | 'private' | 'password';\n  publishDate: string;\n  author: string;\n  featuredImage?: string;\n  excerpt: string;\n  slug: string;\n  slugError?: boolean;\n  categories: string[];\n  tags: string[];\n  template: string;\n  commentStatus: boolean;\n  pingStatus: boolean;\n  sticky: boolean;\n  format: 'standard' | 'aside' | 'gallery' | 'link' | 'image' | 'quote' | 'status' | 'video' | 'audio' | 'chat';\n}\n\ninterface BlockSettings {\n  id: string;\n  type: string;\n  attributes: any;\n}\n\ninterface GutenbergSidebarProps {\n  activeTab?: 'document' | 'block';\n  postSettings: PostSettings;\n  blockSettings?: BlockSettings;\n  onPostSettingsChange: (settings: Partial<PostSettings>) => void;\n  onBlockSettingsChange?: (settings: Partial<BlockSettings>) => void;\n  onTabChange?: (tab: 'document' | 'block') => void;\n  onClose?: () => void;\n}\n\n// Panel component for collapsible sections\nconst Panel: FC<{\n  title: string;\n  defaultOpen?: boolean;\n  children: ReactNode;\n}> = ({ title, defaultOpen = true, children }) => {\n  const [isOpen, setIsOpen] = useState(defaultOpen);\n\n  return (\n    <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n      <CollapsibleTrigger className=\"flex items-center justify-between w-full p-4 hover:bg-gray-50 transition-colors\">\n        <h3 className=\"font-medium text-sm\">{title}</h3>\n        {isOpen ? (\n          <ChevronDown className=\"h-4 w-4 text-gray-500\" />\n        ) : (\n          <ChevronRight className=\"h-4 w-4 text-gray-500\" />\n        )}\n      </CollapsibleTrigger>\n      <CollapsibleContent className=\"px-4 pb-4\">\n        {children}\n      </CollapsibleContent>\n    </Collapsible>\n  );\n};\n\nconst GutenbergSidebar: FC<GutenbergSidebarProps> = ({\n  activeTab = 'document',\n  postSettings,\n  blockSettings,\n  onPostSettingsChange,\n  onBlockSettingsChange,\n  onTabChange,\n  onClose\n}) => {\n  const [tagInput, setTagInput] = useState('');\n  const [showCategorySearch, setShowCategorySearch] = useState(false);\n  const [categorySearch, setCategorySearch] = useState('');\n\n  // Mock data for categories\n  const availableCategories = [\n    { id: '1', name: 'News', slug: 'news' },\n    { id: '2', name: 'Tutorials', slug: 'tutorials' },\n    { id: '3', name: 'Updates', slug: 'updates' },\n    { id: '4', name: 'Announcements', slug: 'announcements' },\n  ];\n\n  const handleAddTag = () => {\n    if (tagInput.trim()) {\n      onPostSettingsChange({\n        tags: [...postSettings.tags, tagInput.trim()]\n      });\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    onPostSettingsChange({\n      tags: postSettings.tags.filter((tag: any) => tag !== tagToRemove)\n    });\n  };\n\n  const handleCategoryToggle = (categoryId: string) => {\n    const isSelected = postSettings.categories.includes(categoryId);\n    if (isSelected) {\n      onPostSettingsChange({\n        categories: postSettings.categories.filter((id: any) => id !== categoryId)\n      });\n    } else {\n      onPostSettingsChange({\n        categories: [...postSettings.categories, categoryId]\n      });\n    }\n  };\n\n  return (\n    <div className=\"w-80 h-full bg-white border-l flex flex-col\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b\">\n        <Tabs value={activeTab} onValueChange={(value) => onTabChange?.(value as 'document' | 'block')} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"document\" className=\"flex items-center gap-2\">\n              <FileText className=\"h-4 w-4\" />\n              Document\n            </TabsTrigger>\n            <TabsTrigger value=\"block\" className=\"flex items-center gap-2\">\n              <Settings className=\"h-4 w-4\" />\n              Block\n            </TabsTrigger>\n          </TabsList>\n        </Tabs>\n        {onClose && (\n          <Button\n            variant={\"ghost\" as const}\n            size={\"icon\" as const}\n            className=\"ml-2\"\n            onClick={onClose}\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        )}\n      </div>\n\n      {/* Content */}\n      <ScrollArea className=\"flex-1\">\n        {activeTab === 'document' ? (\n          /* Document Tab */\n          <div className=\"w-full\">\n            {/* Status & Visibility */}\n            <Panel title=\"Status & visibility\">\n              <div className=\"space-y-4\">\n                <div>\n                  <Label className=\"text-xs\">Visibility</Label>\n                  <Select\n                    value={postSettings.visibility}\n                    onValueChange={(value: any) => \n                      onPostSettingsChange({ visibility: value })\n                    }\n                  >\n                    <SelectTrigger className=\"w-full mt-1\">\n                      <SelectValue />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"public\">\n                        <div className=\"flex items-center gap-2\">\n                          <Globe className=\"h-4 w-4\" />\n                          Public\n                        </div>\n                      </SelectItem>\n                      <SelectItem value=\"private\">\n                        <div className=\"flex items-center gap-2\">\n                          <Lock className=\"h-4 w-4\" />\n                          Private\n                        </div>\n                      </SelectItem>\n                      <SelectItem value=\"password\">\n                        <div className=\"flex items-center gap-2\">\n                          <Eye className=\"h-4 w-4\" />\n                          Password protected\n                        </div>\n                      </SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div>\n                  <Label className=\"text-xs\">Publish</Label>\n                  <Input\n                    type=\"datetime-local\"\n                    value={postSettings.publishDate ? postSettings.publishDate.replace('Z', '').slice(0, 16) : ''}\n                    onChange={(e: any) => \n                      onPostSettingsChange({ publishDate: e.target.value })\n                    }\n                    className=\"mt-1\"\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"sticky\" className=\"text-xs\">\n                    Stick to the top of the blog\n                  </Label>\n                  <Switch\n                    id=\"sticky\"\n                    checked={postSettings.sticky}\n                    onCheckedChange={(checked: boolean) => \n                      onPostSettingsChange({ sticky: checked })\n                    }\n                  />\n                </div>\n              </div>\n            </Panel>\n\n            {/* Permalink */}\n            <Panel title=\"Permalink\">\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs\">URL Slug</Label>\n                <div className=\"relative min-w-[200px]\">\n                  <Input\n                    value={postSettings.slug || ''}\n                    onChange={(e: any) => {\n                      const inputValue = e.target.value;\n                      const formattedSlug = inputValue\n                        .toLowerCase()\n                        .replace(/\\s+/g, '-')\n                        .replace(/[^a-z0-9-]/g, '');\n                      onPostSettingsChange({ slug: formattedSlug, slugError: false });\n                    }}\n                    placeholder=\"post-url-slug\"\n                    className={`min-w-[200px] w-full flex-shrink-0 ${postSettings.slugError ? \"border-red-500 bg-red-50\" : \"\"}`}\n                    style={{ minWidth: '200px' }}\n                  />\n                  {postSettings.slugError && (\n                    <div className=\"absolute -bottom-5 left-0 flex items-center gap-1 text-xs text-red-600\">\n                      <AlertCircle className=\"h-3 w-3\" />\n                      <span>\n                        {!postSettings.slug \n                          ? '⚠️ Slug가 비어있습니다. 한글 제목은 수동으로 slug를 입력해야 합니다.'\n                          : 'This slug is already in use. Please choose another.'}\n                      </span>\n                    </div>\n                  )}\n                </div>\n                <p className=\"text-xs text-gray-500 mt-6\">\n                  The last part of the URL. Read more about <a href=\"#\" className=\"text-blue-600 hover:underline\">permalinks</a>\n                </p>\n                {postSettings.slug && (\n                  <div className=\"text-xs text-gray-600 bg-gray-50 p-2 rounded\">\n                    <Globe className=\"h-3 w-3 inline mr-1\" />\n                    Preview: /posts/{postSettings.slug}\n                  </div>\n                )}\n              </div>\n            </Panel>\n\n            {/* Categories */}\n            <Panel title=\"Categories\">\n              <div className=\"space-y-3\">\n                <div className=\"relative\">\n                  <Button\n                    variant={\"outline\" as const}\n                    size={\"sm\" as const}\n                    className=\"w-full justify-start\"\n                    onClick={() => setShowCategorySearch(!showCategorySearch)}\n                  >\n                    <Search className=\"h-4 w-4 mr-2\" />\n                    Search categories\n                  </Button>\n                  \n                  {showCategorySearch && (\n                    <div className=\"absolute top-full left-0 right-0 mt-1 bg-white border rounded-md shadow-lg z-10\">\n                      <Input\n                        autoFocus\n                        placeholder=\"Search...\"\n                        value={categorySearch}\n                        onChange={(e: any) => setCategorySearch(e.target.value)}\n                        className=\"border-0 focus-visible:ring-0\"\n                      />\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n                  {availableCategories\n                    .filter((cat: any) => \n                      cat.name.toLowerCase().includes(categorySearch.toLowerCase())\n                    )\n                    .map((category: any) => (\n                      <label\n                        key={category.id}\n                        className=\"flex items-center gap-2 cursor-pointer hover:bg-gray-50 p-1 rounded\"\n                      >\n                        <input\n                          type=\"checkbox\"\n                          checked={postSettings.categories.includes(category.id)}\n                          onChange={() => handleCategoryToggle(category.id)}\n                          className=\"rounded border-gray-300\"\n                        />\n                        <span className=\"text-sm\">{category.name}</span>\n                      </label>\n                    ))}\n                </div>\n\n                <Button\n                  variant=\"link\"\n                  size={\"sm\" as const}\n                  className=\"p-0 h-auto\"\n                >\n                  <Plus className=\"h-4 w-4 mr-1\" />\n                  Add New Category\n                </Button>\n              </div>\n            </Panel>\n\n            {/* Tags */}\n            <Panel title=\"Tags\">\n              <div className=\"space-y-3\">\n                <div className=\"flex gap-2\">\n                  <Input\n                    placeholder=\"Add new tag\"\n                    value={tagInput}\n                    onChange={(e: any) => setTagInput(e.target.value)}\n                    onKeyPress={(e) => {\n                      if (e.key === 'Enter') {\n                        e.preventDefault();\n                        handleAddTag();\n                      }\n                    }}\n                  />\n                  <Button\n                    size={\"sm\" as const}\n                    onClick={handleAddTag}\n                  >\n                    Add\n                  </Button>\n                </div>\n\n                <div className=\"flex flex-wrap gap-2\">\n                  {postSettings.tags.map((tag: any) => (\n                    <span\n                      key={tag}\n                      className=\"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 rounded-md text-sm\"\n                    >\n                      {tag}\n                      <button\n                        onClick={() => handleRemoveTag(tag)}\n                        className=\"hover:text-red-600\"\n                      >\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </span>\n                  ))}\n                </div>\n              </div>\n            </Panel>\n\n            {/* Featured Image */}\n            <Panel title=\"Featured image\">\n              <div className=\"space-y-3\">\n                {postSettings.featuredImage ? (\n                  <div className=\"relative group\">\n                    <img\n                      src={postSettings.featuredImage}\n                      alt=\"Featured\"\n                      className=\"w-full rounded-md\"\n                    />\n                    <div className=\"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-md flex items-center justify-center gap-2\">\n                      <Button size={\"sm\" as const} variant=\"secondary\">\n                        Replace\n                      </Button>\n                      <Button\n                        size={\"sm\" as const}\n                        variant=\"secondary\"\n                        onClick={() => \n                          onPostSettingsChange({ featuredImage: undefined })\n                        }\n                      >\n                        Remove\n                      </Button>\n                    </div>\n                  </div>\n                ) : (\n                  <Button\n                    variant={\"outline\" as const}\n                    className=\"w-full\"\n                  >\n                    <ImageIcon className=\"h-4 w-4 mr-2\" />\n                    Set featured image\n                  </Button>\n                )}\n              </div>\n            </Panel>\n\n            {/* Excerpt */}\n            <Panel title=\"Excerpt\">\n              <div className=\"space-y-2\">\n                <Textarea\n                  placeholder=\"Write an excerpt (optional)\"\n                  value={postSettings.excerpt}\n                  onChange={(e: ChangeEvent<HTMLTextAreaElement>) => \n                    onPostSettingsChange({ excerpt: e.target.value })\n                  }\n                  rows={4}\n                />\n                <p className=\"text-xs text-gray-500\">\n                  Write an excerpt (optional)\n                </p>\n              </div>\n            </Panel>\n\n            {/* Discussion */}\n            <Panel title=\"Discussion\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"comments\" className=\"text-xs\">\n                    Allow comments\n                  </Label>\n                  <Switch\n                    id=\"comments\"\n                    checked={postSettings.commentStatus}\n                    onCheckedChange={(checked: boolean) => \n                      onPostSettingsChange({ commentStatus: checked })\n                    }\n                  />\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"pingbacks\" className=\"text-xs\">\n                    Allow pingbacks & trackbacks\n                  </Label>\n                  <Switch\n                    id=\"pingbacks\"\n                    checked={postSettings.pingStatus}\n                    onCheckedChange={(checked: boolean) => \n                      onPostSettingsChange({ pingStatus: checked })\n                    }\n                  />\n                </div>\n              </div>\n            </Panel>\n          </div>\n        ) : (\n          /* Block Tab */\n          <div className=\"w-full\">\n            <BlockSettingsRenderer \n              block={blockSettings}\n              onBlockSettingsChange={onBlockSettingsChange}\n            />\n          </div>\n        )}\n      </ScrollArea>\n    </div>\n  );\n};\n\nexport default GutenbergSidebar;\n","/**\n * GutenbergBlockEditor Component\n * Enhanced WordPress Gutenberg-like editor with 3-column layout\n */\n\nimport React, { useState, useCallback, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { EditorHeader } from './EditorHeader';\nimport '../../styles/editor.css';\nimport { postApi } from '@/services/api/postApi';\nimport { debugTokenStatus } from '@/utils/token-debug';\nimport { Block } from '@/types/post.types';\nimport GutenbergBlockInserter from './GutenbergBlockInserter';\nimport { initializeWordPress } from '@/utils/wordpress-initializer';\nimport DesignLibraryModalImproved from './DesignLibraryModalImproved';\nimport AIPageGeneratorModal from '../ai/AIPageGeneratorModal';\nimport ParagraphBlock from './blocks/ParagraphBlock';\nimport EnhancedHeadingBlock from './blocks/EnhancedHeadingBlock';\nimport ListBlock from './blocks/ListBlock';\nimport CodeBlock from './blocks/CodeBlock';\nimport EnhancedQuoteBlock from './blocks/EnhancedQuoteBlock';\nimport EnhancedImageBlock from './blocks/EnhancedImageBlock';\nimport ButtonBlock from './blocks/ButtonBlock';\nimport ColumnsBlock from './blocks/ColumnsBlock';\nimport GutenbergSidebar from './GutenbergSidebar';\n// Toast 기능을 직접 구현\nimport { CheckCircle, XCircle, Info, X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\n\n// Block interface는 이제 @/types/post.types에서 import\n\ninterface PostSettings {\n  status: 'draft' | 'pending' | 'private' | 'publish' | 'scheduled';\n  visibility: 'public' | 'private' | 'password';\n  publishDate: string;\n  author: string;\n  featuredImage?: string;\n  excerpt: string;\n  slug: string;\n  slugError?: boolean;\n  categories: string[];\n  tags: string[];\n  template: string;\n  commentStatus: boolean;\n  pingStatus: boolean;\n  sticky: boolean;\n  format: 'standard' | 'aside' | 'gallery' | 'link' | 'image' | 'quote' | 'status' | 'video' | 'audio' | 'chat';\n}\n\ninterface GutenbergBlockEditorProps {\n  documentTitle?: string;\n  initialBlocks?: Block[];\n  onChange?: (blocks: Block[]) => void;\n  onTitleChange?: (title: string) => void;\n  onSave?: () => void;\n  onPublish?: () => void;\n  slug?: string;\n  postSettings?: Partial<PostSettings>;\n  onPostSettingsChange?: (settings: Partial<PostSettings>) => void;\n}\n\nconst GutenbergBlockEditor: React.FC<GutenbergBlockEditorProps> = ({\n  documentTitle: propDocumentTitle = '',\n  initialBlocks = [],\n  onChange,\n  onTitleChange,\n  onSave,\n  onPublish,\n  slug = '',\n  postSettings: propPostSettings,\n  onPostSettingsChange,\n}) => {\n  // Initialize with empty paragraph only if no initial blocks\n  // But don't trigger onChange for this initialization\n  const [blocks, setBlocks] = useState<Block[]>(() => {\n    if (initialBlocks.length > 0) {\n      return initialBlocks;\n    }\n    // Create a default empty paragraph for new posts\n    return [{\n      id: `block-${Date.now()}`,\n      type: 'core/paragraph',\n      content: { text: '' },\n      attributes: {},\n    }];\n  });\n  const [selectedBlockId, setSelectedBlockId] = useState<string | null>(null);\n  const [documentTitle, setDocumentTitle] = useState(propDocumentTitle);\n  const [isBlockInserterOpen, setIsBlockInserterOpen] = useState(true);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [history, setHistory] = useState<Block[][]>([blocks]);\n  const [historyIndex, setHistoryIndex] = useState(0);\n  const [isDirty, setIsDirty] = useState(false);\n  \n  // Sync blocks with initialBlocks prop changes\n  useEffect(() => {\n    if (initialBlocks && initialBlocks.length > 0) {\n      setBlocks(initialBlocks);\n      setHistory([initialBlocks]);\n      setHistoryIndex(0);\n      setIsDirty(false);\n    }\n  }, [initialBlocks]);\n  \n  // Sync title with prop changes\n  useEffect(() => {\n    setDocumentTitle(propDocumentTitle);\n  }, [propDocumentTitle]);\n  \n  // Sync post settings with prop changes\n  useEffect(() => {\n    if (propPostSettings) {\n      setPostSettings(prev => ({ ...prev, ...propPostSettings }));\n    }\n  }, [propPostSettings]);\n  const [isCodeView, setIsCodeView] = useState(false);\n  const [draggedBlockId, setDraggedBlockId] = useState<string | null>(null);\n  const [dragOverBlockId, setDragOverBlockId] = useState<string | null>(null);\n  const [copiedBlock, setCopiedBlock] = useState<Block | null>(null);\n  const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' | 'info' } | null>(null);\n  const [isDesignLibraryOpen, setIsDesignLibraryOpen] = useState(false);\n  const [isAIGeneratorOpen, setIsAIGeneratorOpen] = useState(false);\n  \n  // Sidebar states\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [activeTab, setActiveTab] = useState<'document' | 'block'>('document');\n  const [selectedBlock, setSelectedBlock] = useState<any>(null);\n  \n  // Post settings state - ensure slug from props is preserved\n  const [postSettings, setPostSettings] = useState<PostSettings>({\n    status: 'draft',\n    visibility: 'public',\n    publishDate: new Date().toISOString().slice(0, 16),\n    author: 'Admin User',\n    featuredImage: undefined,\n    excerpt: '',\n    slugError: false,\n    categories: [],\n    tags: [],\n    template: 'default',\n    commentStatus: true,\n    pingStatus: true,\n    sticky: false,\n    format: 'standard',\n    ...propPostSettings,\n    slug: propPostSettings?.slug || slug || '' // Ensure slug is not overridden\n  });\n  \n  const navigate = useNavigate();\n  \n  // Initialize WordPress on mount\n  useEffect(() => {\n    initializeWordPress().catch(error => {\n      // Failed to initialize WordPress\n    });\n  }, []);\n  \n  // Update slug when propPostSettings or slug prop changes\n  useEffect(() => {\n    const newSlug = propPostSettings?.slug || slug || '';\n    if (newSlug !== postSettings.slug) {\n      setPostSettings(prev => ({ ...prev, slug: newSlug }));\n    }\n  }, [propPostSettings?.slug, slug]);\n  \n  // Update selectedBlock when selectedBlockId changes\n  useEffect(() => {\n    if (selectedBlockId) {\n      const block = blocks.find(b => b.id === selectedBlockId);\n      setSelectedBlock(block || null);\n    } else {\n      setSelectedBlock(null);\n    }\n  }, [selectedBlockId, blocks]);\n  \n  // Simple toast function\n  const showToast = useCallback((message: string, type: 'success' | 'error' | 'info' = 'info') => {\n    setToast({ message, type });\n    setTimeout(() => setToast(null), 3000);\n  }, []);\n\n  // Update blocks and history\n  const updateBlocks = useCallback(\n    (newBlocks: Block[], skipOnChange = false) => {\n      setBlocks(newBlocks);\n      setIsDirty(true);\n\n      // Add to history\n      const newHistory = history.slice(0, historyIndex + 1);\n      newHistory.push(newBlocks);\n      setHistory(newHistory);\n      setHistoryIndex(newHistory.length - 1);\n\n      // Notify parent (unless skipped for initialization)\n      if (!skipOnChange) {\n        onChange?.(newBlocks);\n      }\n    },\n    [history, historyIndex, onChange]\n  );\n\n  // Undo\n  const handleUndo = useCallback(() => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setBlocks(history[newIndex]);\n    }\n  }, [history, historyIndex]);\n\n  // Redo\n  const handleRedo = useCallback(() => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setBlocks(history[newIndex]);\n    }\n  }, [history, historyIndex]);\n\n  // Handle block update\n  const handleBlockUpdate = useCallback(\n    (blockId: string, content: any, attributes?: any) => {\n      const newBlocks = blocks.map((block) =>\n        block.id === blockId\n          ? {\n              ...block,\n              content: typeof content === 'string' ? { text: content } : content,\n              attributes: attributes || block.attributes,\n            }\n          : block\n      );\n      updateBlocks(newBlocks);\n    },\n    [blocks, updateBlocks]\n  );\n\n  // Handle block deletion\n  const handleBlockDelete = useCallback(\n    (blockId: string) => {\n      const newBlocks = blocks.filter((block) => block.id !== blockId);\n      if (newBlocks.length === 0) {\n        // Always keep at least one paragraph block\n        newBlocks.push({\n          id: `block-${Date.now()}`,\n          type: 'core/paragraph',\n          content: { text: '' },\n          attributes: {},\n        });\n      }\n      updateBlocks(newBlocks);\n      setSelectedBlockId(null);\n    },\n    [blocks, updateBlocks]\n  );\n\n  // Handle block copy\n  const handleBlockCopy = useCallback(\n    (blockId: string) => {\n      const block = blocks.find((b) => b.id === blockId);\n      if (block) {\n        setCopiedBlock({ ...block });\n        // 선택사항: 클립보드에도 복사\n        const blockData = JSON.stringify(block);\n        navigator.clipboard.writeText(blockData).catch(() => {\n          // 클립보드 접근 실패 시 내부 상태만 사용\n        });\n      }\n    },\n    [blocks]\n  );\n\n  // Handle block paste\n  const handleBlockPaste = useCallback(\n    (afterBlockId?: string) => {\n      if (copiedBlock) {\n        const newBlock = {\n          ...copiedBlock,\n          id: `block-${Date.now()}`,\n        };\n        \n        if (afterBlockId) {\n          const index = blocks.findIndex((b) => b.id === afterBlockId);\n          const newBlocks = [...blocks];\n          newBlocks.splice(index + 1, 0, newBlock);\n          updateBlocks(newBlocks);\n        } else {\n          // 마지막에 추가\n          updateBlocks([...blocks, newBlock]);\n        }\n        \n        setSelectedBlockId(newBlock.id);\n      }\n    },\n    [blocks, copiedBlock, updateBlocks]\n  );\n\n  // Handle block insertion\n  const handleInsertBlock = useCallback(\n    (blockType: string) => {\n      const newBlock: Block = {\n        id: `block-${Date.now()}`,\n        type: blockType,\n        content: blockType.includes('heading') ? { text: '', level: 2 } : { text: '' },\n        attributes: {},\n      };\n\n      const insertIndex = selectedBlockId\n        ? blocks.findIndex((b) => b.id === selectedBlockId) + 1\n        : blocks.length;\n\n      const newBlocks = [...blocks];\n      newBlocks.splice(insertIndex, 0, newBlock);\n      updateBlocks(newBlocks);\n      setSelectedBlockId(newBlock.id);\n      setIsBlockInserterOpen(false);\n    },\n    [blocks, selectedBlockId, updateBlocks]\n  );\n\n  // Handle add block at position\n  const handleAddBlock = useCallback(\n    (blockId: string, position: 'before' | 'after', blockType = 'core/paragraph') => {\n      const index = blocks.findIndex((b) => b.id === blockId);\n      const newBlock: Block = {\n        id: `block-${Date.now()}`,\n        type: blockType,\n        content: { text: '' },\n        attributes: {},\n      };\n\n      const newBlocks = [...blocks];\n      const insertIndex = position === 'after' ? index + 1 : index;\n      newBlocks.splice(insertIndex, 0, newBlock);\n      updateBlocks(newBlocks);\n      setSelectedBlockId(newBlock.id);\n    },\n    [blocks, updateBlocks]\n  );\n\n  // Handle save\n  const handleSave = useCallback(async () => {\n    try {\n      // If parent provided handler, delegate to avoid duplicate creates\n      if (onSave) {\n        await onSave();\n        setIsDirty(false);\n        showToast('Draft saved', 'success');\n        return;\n      }\n\n      // Fallback (no parent handler): save draft directly\n      if (import.meta.env.DEV) {\n        debugTokenStatus();\n      }\n      showToast('Saving draft...', 'info');\n      const response = await postApi.saveDraft({\n        title: documentTitle,\n        content: blocks,\n        status: 'draft',\n      });\n      if (response.success) {\n        setIsDirty(false);\n        showToast('Draft saved successfully', 'success');\n      } else {\n        showToast(response.error || 'Failed to save draft', 'error');\n      }\n    } catch (error) {\n      showToast('Failed to save draft. Please try again.', 'error');\n    }\n  }, [documentTitle, blocks, onSave, showToast]);\n\n  // Handle publish\n  const handlePublish = useCallback(async () => {\n    try {\n      if (onPublish) {\n        await onPublish();\n        setIsDirty(false);\n        showToast('Published successfully', 'success');\n        return;\n      }\n\n      // Fallback (no parent handler): create directly\n      if (import.meta.env.DEV) {\n        debugTokenStatus();\n      }\n      showToast('Publishing post...', 'info');\n      const response = await postApi.create({\n        title: documentTitle,\n        content: blocks,\n        status: 'published',\n      });\n      if (response.success && response.data) {\n        setIsDirty(false);\n        showToast('Post published successfully!', 'success');\n      } else {\n        showToast(response.error || 'Failed to publish post', 'error');\n      }\n    } catch (error) {\n      showToast('Failed to publish post. Please try again.', 'error');\n    }\n  }, [documentTitle, blocks, onPublish, showToast]);\n\n  // Toggle fullscreen\n  const handleToggleFullscreen = useCallback(() => {\n    setIsFullscreen(!isFullscreen);\n    if (!isFullscreen) {\n      document.documentElement.requestFullscreen?.();\n    } else {\n      document.exitFullscreen?.();\n    }\n  }, [isFullscreen]);\n\n  // Toggle code view\n  const handleToggleCodeView = useCallback(() => {\n    setIsCodeView(!isCodeView);\n  }, [isCodeView]);\n\n  // Handle drag start\n  const handleDragStart = useCallback((blockId: string) => {\n    setDraggedBlockId(blockId);\n  }, []);\n\n  // Handle drag over\n  const handleDragOver = useCallback((e: React.DragEvent, blockId: string) => {\n    e.preventDefault();\n    setDragOverBlockId(blockId);\n  }, []);\n\n  // Handle drop\n  const handleDrop = useCallback((e: React.DragEvent, targetBlockId: string) => {\n    e.preventDefault();\n    \n    if (!draggedBlockId || draggedBlockId === targetBlockId) {\n      setDraggedBlockId(null);\n      setDragOverBlockId(null);\n      return;\n    }\n\n    const draggedIndex = blocks.findIndex(b => b.id === draggedBlockId);\n    const targetIndex = blocks.findIndex(b => b.id === targetBlockId);\n    \n    if (draggedIndex === -1 || targetIndex === -1) {\n      setDraggedBlockId(null);\n      setDragOverBlockId(null);\n      return;\n    }\n\n    const newBlocks = [...blocks];\n    const [draggedBlock] = newBlocks.splice(draggedIndex, 1);\n    \n    // Insert at the correct position\n    const insertIndex = draggedIndex < targetIndex ? targetIndex : targetIndex;\n    newBlocks.splice(insertIndex, 0, draggedBlock);\n    \n    updateBlocks(newBlocks);\n    setDraggedBlockId(null);\n    setDragOverBlockId(null);\n  }, [draggedBlockId, blocks, updateBlocks]);\n\n  // Handle drag end\n  const handleDragEnd = useCallback(() => {\n    setDraggedBlockId(null);\n    setDragOverBlockId(null);\n  }, []);\n\n  // Handle preview\n  const handlePreview = useCallback(() => {\n    // Create preview content\n    const previewContent = {\n      title: documentTitle,\n      blocks: blocks,\n    };\n    \n    // Store in session storage for preview page\n    sessionStorage.setItem('previewContent', JSON.stringify(previewContent));\n    \n    // Open preview in new tab with correct route\n    window.open('/admin/preview', '_blank');\n  }, [documentTitle, blocks]);\n\n  // Removed automatic tab switching - let user control the tab selection\n\n  // Handle navigation with unsaved changes warning\n  const handleNavigation = useCallback(() => {\n    if (isDirty) {\n      const confirmLeave = window.confirm('You have unsaved changes. Are you sure you want to leave?');\n      if (!confirmLeave) return;\n    }\n    navigate('/admin');\n  }, [isDirty, navigate]);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Save: Ctrl/Cmd + S\n      if ((e.ctrlKey || e.metaKey) && e.key === 's') {\n        e.preventDefault();\n        handleSave();\n      }\n      // Undo: Ctrl/Cmd + Z\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) {\n        e.preventDefault();\n        handleUndo();\n      }\n      // Redo: Ctrl/Cmd + Shift + Z\n      if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'z') {\n        e.preventDefault();\n        handleRedo();\n      }\n      // Toggle block inserter: /\n      if (e.key === '/' && document.activeElement?.tagName !== 'INPUT' && document.activeElement?.tagName !== 'TEXTAREA') {\n        e.preventDefault();\n        setIsBlockInserterOpen(!isBlockInserterOpen);\n      }\n      // Delete key for block deletion\n      if (e.key === 'Delete' && selectedBlockId && !e.shiftKey) {\n        const target = e.target as HTMLElement;\n        if (!target.isContentEditable && target.tagName !== 'INPUT' && target.tagName !== 'TEXTAREA') {\n          e.preventDefault();\n          handleBlockDelete(selectedBlockId);\n        }\n      }\n      // Tab navigation between blocks\n      if (e.key === 'Tab' && !e.ctrlKey && !e.metaKey) {\n        e.preventDefault();\n        if (selectedBlockId) {\n          const currentIndex = blocks.findIndex(b => b.id === selectedBlockId);\n          if (e.shiftKey) {\n            // Previous block\n            if (currentIndex > 0) {\n              setSelectedBlockId(blocks[currentIndex - 1].id);\n            }\n          } else {\n            // Next block\n            if (currentIndex < blocks.length - 1) {\n              setSelectedBlockId(blocks[currentIndex + 1].id);\n            }\n          }\n        } else if (blocks.length > 0) {\n          setSelectedBlockId(blocks[0].id);\n        }\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handleSave, handleUndo, handleRedo, isBlockInserterOpen, selectedBlockId, blocks, handleBlockDelete]);\n\n  // Handle block type change\n  const handleBlockTypeChange = useCallback(\n    (blockId: string, newType: string) => {\n      const newBlocks = blocks.map((block) => {\n        if (block.id === blockId) {\n          // Convert heading types\n          if (newType.startsWith('core/heading-')) {\n            const level = parseInt(newType.replace('core/heading-h', ''));\n            return {\n              ...block,\n              type: 'core/heading',\n              content: { text: typeof block.content === 'string' ? block.content : block.content?.text || '', level },\n              attributes: block.attributes || {},\n            };\n          }\n          // Convert to paragraph\n          if (newType === 'core/paragraph') {\n            return {\n              ...block,\n              type: 'core/paragraph',\n              content: { text: typeof block.content === 'string' ? block.content : block.content?.text || '' },\n              attributes: block.attributes || {},\n            };\n          }\n        }\n        return block;\n      });\n      updateBlocks(newBlocks);\n    },\n    [blocks, updateBlocks]\n  );\n\n  // Handle template application\n  const handleApplyTemplate = useCallback(\n    (templateBlocks: Block[]) => {\n      // Replace all current blocks with template blocks, preserving document title\n      updateBlocks(templateBlocks);\n      setSelectedBlockId(null);\n      showToast('템플릿이 적용되었습니다!', 'success');\n    },\n    [updateBlocks, showToast]\n  );\n\n  // Render block component\n  const renderBlock = (block: Block) => {\n    const commonProps = {\n      id: block.id,\n      content: typeof block.content === 'string' ? block.content : block.content?.text || '',\n      onChange: (content: any, attributes?: any) =>\n        handleBlockUpdate(block.id, content, attributes),\n      onDelete: () => handleBlockDelete(block.id),\n      onDuplicate: () => {\n        const newBlock = { ...block, id: `block-${Date.now()}` };\n        const index = blocks.findIndex((b) => b.id === block.id);\n        const newBlocks = [...blocks];\n        newBlocks.splice(index + 1, 0, newBlock);\n        updateBlocks(newBlocks);\n      },\n      onMoveUp: () => {\n        const index = blocks.findIndex((b) => b.id === block.id);\n        if (index > 0) {\n          const newBlocks = [...blocks];\n          [newBlocks[index - 1], newBlocks[index]] = [newBlocks[index], newBlocks[index - 1]];\n          updateBlocks(newBlocks);\n        }\n      },\n      onMoveDown: () => {\n        const index = blocks.findIndex((b) => b.id === block.id);\n        if (index < blocks.length - 1) {\n          const newBlocks = [...blocks];\n          [newBlocks[index], newBlocks[index + 1]] = [newBlocks[index + 1], newBlocks[index]];\n          updateBlocks(newBlocks);\n        }\n      },\n      onAddBlock: (position: 'before' | 'after', type?: string) =>\n        handleAddBlock(block.id, position, type),\n      isSelected: selectedBlockId === block.id,\n      onSelect: () => setSelectedBlockId(block.id),\n      attributes: block.attributes || {},\n      isDragging: draggedBlockId === block.id,\n      onDragStart: () => handleDragStart(block.id),\n      onDragOver: (e: React.DragEvent) => handleDragOver(e, block.id),\n      onDrop: (e: React.DragEvent) => handleDrop(e, block.id),\n      onDragEnd: handleDragEnd,\n      onCopy: () => handleBlockCopy(block.id),\n      onPaste: () => handleBlockPaste(block.id),\n      onChangeType: (newType: string) => handleBlockTypeChange(block.id, newType),\n    };\n\n    const blockIndex = blocks.findIndex((b) => b.id === block.id);\n    const enhancedProps = {\n      ...commonProps,\n      canMoveUp: blockIndex > 0,\n      canMoveDown: blockIndex < blocks.length - 1,\n    };\n\n    switch (block.type) {\n      case 'core/paragraph':\n      case 'paragraph': // Support both formats\n        return <ParagraphBlock key={block.id} {...enhancedProps} />;\n      case 'core/heading':\n      case 'heading': // Support both formats\n        return (\n          <EnhancedHeadingBlock\n            key={block.id}\n            {...enhancedProps}\n            attributes={{ \n              level: block.content?.level || 2,\n              ...block.attributes\n            }}\n          />\n        );\n      case 'core/list':\n      case 'list': // Support both formats\n        return <ListBlock key={block.id} {...enhancedProps} />;\n      case 'core/code':\n      case 'code': // Support both formats\n        return <CodeBlock key={block.id} {...enhancedProps} />;\n      case 'core/quote':\n      case 'quote': // Support both formats\n        return <EnhancedQuoteBlock key={block.id} {...enhancedProps} />;\n      case 'core/image':\n      case 'image': // Support both formats\n        return <EnhancedImageBlock key={block.id} {...enhancedProps} />;\n      case 'core/button':\n      case 'button': // Support both formats\n        return <ButtonBlock key={block.id} {...commonProps} />;\n      case 'core/columns':\n      case 'columns': // Support both formats\n        return <ColumnsBlock key={block.id} {...commonProps} />;\n      default:\n        return (\n          <div key={block.id} className=\"p-4 border border-dashed border-gray-300\">\n            <span className=\"text-gray-500\">Unsupported block type: {block.type}</span>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-gray-50 flex flex-col\">\n      {/* Header */}\n      <EditorHeader\n        onSave={handleSave}\n        onPublish={handlePublish}\n        onBack={handleNavigation}\n        canUndo={historyIndex > 0}\n        canRedo={historyIndex < history.length - 1}\n        onUndo={handleUndo}\n        onRedo={handleRedo}\n        isFullscreen={isFullscreen}\n        onToggleFullscreen={handleToggleFullscreen}\n        isDirty={isDirty}\n        onToggleListView={() => {}}\n        onToggleCodeView={handleToggleCodeView}\n        isCodeView={isCodeView}\n        onPreview={handlePreview}\n        onOpenDesignLibrary={() => setIsDesignLibraryOpen(true)}\n        onOpenAIGenerator={() => setIsAIGeneratorOpen(true)}\n        onToggleInspector={() => setSidebarOpen(!sidebarOpen)}\n        isInspectorOpen={sidebarOpen}\n      />\n\n      {/* Main Layout */}\n      <div className=\"flex-1 flex relative\">\n        {/* Block Inserter */}\n        <GutenbergBlockInserter\n          isOpen={isBlockInserterOpen}\n          onClose={() => setIsBlockInserterOpen(false)}\n          onSelect={handleInsertBlock}\n        />\n\n        {/* Editor Canvas */}\n        <div\n          className={`flex-1 transition-all duration-300 overflow-y-auto ${\n            isBlockInserterOpen ? 'ml-80' : 'ml-0'\n          } ${\n            sidebarOpen ? 'mr-80' : 'mr-0'\n          }`}\n          style={{ paddingTop: '10px', maxHeight: 'calc(100vh - 60px)' }}\n        >\n          <div className=\"max-w-4xl mx-auto p-8\">\n            {/* Title Section - WordPress-style two-tier design */}\n            <div className=\"mb-10\">\n              {/* Title Preview Display */}\n              <div className=\"mb-6\">\n                <h1 className=\"text-4xl font-light text-gray-800 leading-tight\">\n                  {documentTitle || ''}\n                </h1>\n                <div className=\"mt-2 h-px bg-gradient-to-r from-gray-200 to-transparent\"></div>\n              </div>\n              \n              {/* Title Input Field */}\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow\">\n                <label className=\"block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\">\n                  Document Title\n                </label>\n                <input\n                  type=\"text\"\n                  value={documentTitle}\n                  onChange={(e) => {\n                    setDocumentTitle(e.target.value);\n                    setIsDirty(true);\n                    // Notify parent component of title change\n                    if (onTitleChange) {\n                      onTitleChange(e.target.value);\n                    }\n                  }}\n                  placeholder=\"Enter your title here...\"\n                  className=\"w-full px-0 py-1 text-xl font-medium text-gray-900 border-0 border-b-2 border-transparent hover:border-gray-200 focus:border-blue-500 outline-none transition-colors bg-transparent\"\n                  autoComplete=\"off\"\n                />\n                <p className=\"mt-2 text-xs text-gray-500\">\n                  This title will appear at the top of your page\n                </p>\n              </div>\n            </div>\n\n            {/* Blocks */}\n            {isCodeView ? (\n              <div>\n                <textarea\n                  value={JSON.stringify(blocks, null, 2)}\n                  onChange={(e) => {\n                    try {\n                      const parsed = JSON.parse(e.target.value);\n                      setBlocks(parsed);\n                    } catch (error) {\n                      // Error log removed\n                    }\n                  }}\n                  className=\"w-full min-h-[500px] font-mono text-sm p-4 border border-gray-300 rounded\"\n                />\n              </div>\n            ) : (\n              <div className=\"blocks-container\">\n                {blocks.map((block) => (\n                  <div\n                    key={block.id}\n                    className={`block-item ${\n                      dragOverBlockId === block.id ? 'drag-over' : ''\n                    } ${\n                      selectedBlockId === block.id ? 'block-selected' : ''\n                    }`}\n                    onDragOver={(e) => handleDragOver(e, block.id)}\n                    onDrop={(e) => handleDrop(e, block.id)}\n                  >\n                    {renderBlock(block)}\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Add block button */}\n            {!isCodeView && (\n              <div className=\"mt-4 text-center\">\n                <button\n                  onClick={() => setIsBlockInserterOpen(true)}\n                  className=\"px-6 py-3 border-2 border-dashed border-gray-300 rounded hover:border-gray-400 hover:bg-gray-50 text-gray-600 text-sm transition-colors\"\n                >\n                  + Add Block\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* GutenbergSidebar - Right Sidebar */}\n        {sidebarOpen && (\n          <div className={cn(\n            \"fixed right-0 top-[60px] w-80 bg-white border-l overflow-y-auto transition-all duration-300 z-30\",\n            \"shadow-lg\"\n          )}\n               style={{ height: 'calc(100vh - 60px)' }}>\n            {/* Sidebar Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\n              <h2 className=\"font-semibold text-gray-900\">Settings</h2>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"h-8 w-8\"\n                onClick={() => setSidebarOpen(false)}\n              >\n                <X className=\"h-4 w-4\" />\n              </Button>\n            </div>\n\n            {/* GutenbergSidebar Component */}\n            <GutenbergSidebar\n              activeTab={activeTab}\n              postSettings={postSettings}\n              blockSettings={selectedBlock}\n              onPostSettingsChange={(settings) => {\n                // DEBUG: Log post settings change\n                // Logging removed for CI/CD\n                \n                setPostSettings(prev => ({ ...prev, ...settings }));\n                setIsDirty(true);\n                onPostSettingsChange?.(settings);\n              }}\n              onBlockSettingsChange={(settings) => {\n                if (selectedBlock) {\n                  const updated = { ...selectedBlock, ...settings };\n                  const newBlocks = blocks.map(block => \n                    block.id === selectedBlock.id ? updated : block\n                  );\n                  updateBlocks(newBlocks);\n                  setSelectedBlock(updated);\n                }\n              }}\n              onTabChange={(tab) => setActiveTab(tab)}\n              onClose={() => setSidebarOpen(false)}\n            />\n          </div>\n        )}\n      </div>\n      \n      {/* Simple Toast */}\n      {toast && (\n        <div className=\"fixed bottom-4 right-4 z-50 animate-slide-up\">\n          <div className={`flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg bg-white ${\n            toast.type === 'success' ? 'border-green-200' :\n            toast.type === 'error' ? 'border-red-200' :\n            'border-blue-200'\n          }`}>\n            {toast.type === 'success' && <CheckCircle className=\"h-5 w-5 text-green-500\" />}\n            {toast.type === 'error' && <XCircle className=\"h-5 w-5 text-red-500\" />}\n            {toast.type === 'info' && <Info className=\"h-5 w-5 text-blue-500\" />}\n            <p className=\"text-sm font-medium text-gray-900\">{toast.message}</p>\n          </div>\n        </div>\n      )}\n\n      {/* Design Library Modal */}\n      <DesignLibraryModalImproved\n        isOpen={isDesignLibraryOpen}\n        onClose={() => setIsDesignLibraryOpen(false)}\n        onApplyTemplate={handleApplyTemplate}\n      />\n\n      {/* AI Generator Modal */}\n      <AIPageGeneratorModal\n        isOpen={isAIGeneratorOpen}\n        onClose={() => setIsAIGeneratorOpen(false)}\n        onGenerate={(generatedBlocks) => {\n          // Replace existing blocks with AI generated blocks\n          // Convert AI blocks to ensure they have required content property\n          const convertedBlocks = generatedBlocks.map(block => ({\n            ...block,\n            content: block.content || {}\n          }));\n          updateBlocks(convertedBlocks);\n          showToast('AI 페이지가 생성되었습니다!', 'success');\n        }}\n      />\n    </div>\n  );\n};\n\nexport default GutenbergBlockEditor;\n","import { FC, Fragment } from 'react';\nimport { Link, useLocation } from 'react-router-dom'\nimport { ChevronRight, Home } from 'lucide-react'\n\ninterface BreadcrumbItem {\n  label: string\n  path?: string\n}\n\ninterface AdminBreadcrumbProps {\n  items?: BreadcrumbItem[]\n  className?: string\n}\n\nconst AdminBreadcrumb: FC<AdminBreadcrumbProps> = ({ items, className = '' }) => {\n  const location = useLocation()\n  \n  // 경로 기반 자동 브레드크럼 생성\n  const generateBreadcrumbs = (): BreadcrumbItem[] => {\n    const pathSegments = location.pathname.split('/').filter(Boolean)\n    \n    const breadcrumbs: BreadcrumbItem[] = [\n      { label: 'Admin', path: '/admin' }\n    ]\n    \n    // 경로별 라벨 매핑\n    const labelMap: Record<string, string> = {\n      'users': '사용자',\n      'content': '콘텐츠',\n      'products': '상품',\n      'orders': '주문',\n      'analytics': '분석',\n      'settings': '설정',\n      'pending': '승인 대기',\n      'business': '사업자 회원',\n      'affiliates': '파트너 회원',\n      'posts': '글',\n      'pages': '페이지',\n      'cpt': 'CPT 관리',\n      'categories': '카테고리',\n      'inventory': '재고 관리',\n      'sales': '매출 분석',\n      'overview': '전체 개요',\n      'general': '일반',\n      'writing': '쓰기',\n      'reading': '읽기',\n      'discussion': '토론',\n      'permalinks': '고유주소',\n      'privacy': '개인정보',\n      'theme': '테마',\n      'oauth': 'OAuth',\n      'email': '이메일',\n      'integrations': '연동',\n      'shortcodes': 'Shortcodes',\n      'apps': 'Apps',\n      'by-app': '앱별 분류',\n      'by-category': '카테고리별',\n      'stats': '사용 통계',\n      'installed': '설치된 앱',\n      'marketplace': '마켓플레이스',\n      'all': '모든 글',\n      'new': '새 글 추가',\n      'tags': '태그',\n      'comments': '댓글',\n      'themes': '테마',\n      'ecommerce': '전자상거래',\n      'customize': '사용자 정의하기',\n      'menus': '메뉴',\n      'library': '라이브러리'\n    }\n\n    // 특별한 페이지들 처리 (설정, shortcodes 등)\n    const specialPages = ['settings', 'shortcodes', 'apps']\n    const mainPage = pathSegments[0]\n    \n    if (specialPages.includes(mainPage)) {\n      // 메인 페이지 추가\n      breadcrumbs.push({\n        label: labelMap[mainPage] || mainPage,\n        path: pathSegments.length === 1 ? undefined : `/${mainPage}`\n      })\n      \n      // 하위 페이지가 있는 경우만 현재 탭 표시\n      if (pathSegments.length > 1) {\n        const subPage = pathSegments[1] // 마지막이 아닌 두 번째 세그먼트 사용\n        // 유효한 설정 탭인지 확인\n        const validSettingsTabs = ['general', 'writing', 'reading', 'discussion', 'privacy', 'oauth', 'email']\n        if (mainPage === 'settings' && validSettingsTabs.includes(subPage)) {\n          breadcrumbs.push({\n            label: labelMap[subPage] || subPage,\n            path: undefined // 현재 페이지는 링크 없음\n          })\n        } else if (mainPage !== 'settings') {\n          // 설정이 아닌 다른 특별한 페이지의 경우\n          const lastSegment = pathSegments[pathSegments.length - 1]\n          breadcrumbs.push({\n            label: labelMap[lastSegment] || lastSegment,\n            path: undefined\n          })\n        }\n      }\n      \n      return breadcrumbs\n    }\n    \n    // 일반적인 경우 처리\n    let currentPath = ''\n    pathSegments.forEach((segment: string, index: number) => {\n      currentPath += `/${segment}`\n      \n      // admin과 dashboard 세그먼트는 무시 (이미 Admin으로 추가됨)\n      if (segment !== 'admin' && segment !== 'dashboard') {\n        breadcrumbs.push({\n          label: labelMap[segment] || segment,\n          path: index === pathSegments.length - 1 ? undefined : currentPath\n        })\n      }\n    })\n    \n    return breadcrumbs\n  }\n  \n  const breadcrumbItems = items || generateBreadcrumbs()\n  \n  if (breadcrumbItems.length <= 1) {\n    return null\n  }\n  \n  return (\n    <nav className={`flex items-center space-x-2 text-sm text-wp-text-secondary mb-6 ${className}`}>\n      <Home className=\"w-4 h-4\" />\n      \n      {breadcrumbItems.map((item, index) => (\n        <Fragment key={index}>\n          {index > 0 && <ChevronRight className=\"w-4 h-4 text-wp-text-secondary\" />}\n          \n          {item.path ? (\n            <Link\n              to={item.path}\n              className=\"hover:text-admin-blue transition-colors duration-200 font-medium\"\n            >\n              {item.label}\n            </Link>\n          ) : (\n            <span className=\"text-wp-text-primary font-semibold\">\n              {item.label}\n            </span>\n          )}\n        </Fragment>\n      ))}\n    </nav>\n  )\n}\n\nexport default AdminBreadcrumb","import React from 'react';\nimport {\n  FileText,\n  FileJson,\n  FileMinus,\n  FileCode,\n  FileSpreadsheet,\n  FileType,\n  File,\n  Image,\n  Video,\n  Music\n} from 'lucide-react';\n\nexport type FileType = 'image' | 'video' | 'audio' | 'document' | 'markdown' | 'json' | 'pdf' | 'text' | 'spreadsheet' | 'other';\n\nexport const getFileTypeFromMime = (mimeType: string, filename?: string): FileType => {\n  // Check by MIME type\n  if (mimeType.startsWith('image/')) return 'image';\n  if (mimeType.startsWith('video/')) return 'video';\n  if (mimeType.startsWith('audio/')) return 'audio';\n  if (mimeType === 'application/pdf') return 'pdf';\n  if (mimeType === 'application/json') return 'json';\n  if (mimeType === 'text/markdown' || mimeType === 'text/x-markdown') return 'markdown';\n  if (mimeType === 'text/plain') return 'text';\n  if (mimeType.includes('spreadsheet') || mimeType === 'text/csv') return 'spreadsheet';\n  if (mimeType.includes('document')) return 'document';\n\n  // Check by file extension if available\n  if (filename) {\n    const ext = filename.split('.').pop()?.toLowerCase();\n    switch (ext) {\n      case 'md':\n      case 'markdown':\n        return 'markdown';\n      case 'json':\n        return 'json';\n      case 'txt':\n        return 'text';\n      case 'pdf':\n        return 'pdf';\n      case 'csv':\n      case 'xls':\n      case 'xlsx':\n        return 'spreadsheet';\n      case 'doc':\n      case 'docx':\n        return 'document';\n      case 'jpg':\n      case 'jpeg':\n      case 'png':\n      case 'gif':\n      case 'webp':\n      case 'svg':\n        return 'image';\n      case 'mp4':\n      case 'avi':\n      case 'mov':\n      case 'webm':\n        return 'video';\n      case 'mp3':\n      case 'wav':\n      case 'ogg':\n        return 'audio';\n    }\n  }\n\n  return 'other';\n};\n\nexport const getFileIcon = (fileType: FileType, className: string = 'w-5 h-5') => {\n  switch (fileType) {\n    case 'image':\n      return <Image className={className} />;\n    case 'video':\n      return <Video className={className} />;\n    case 'audio':\n      return <Music className={className} />;\n    case 'markdown':\n      return <FileCode className={className} />;\n    case 'json':\n      return <FileJson className={className} />;\n    case 'pdf':\n      return <FileText className={`${className} text-red-600`} />;\n    case 'text':\n      return <FileText className={className} />;\n    case 'spreadsheet':\n      return <FileSpreadsheet className={`${className} text-green-600`} />;\n    case 'document':\n      return <FileType className={`${className} text-blue-600`} />;\n    default:\n      return <File className={className} />;\n  }\n};\n\nexport const getFileColorClass = (fileType: FileType): string => {\n  switch (fileType) {\n    case 'image':\n      return 'text-purple-600 bg-purple-50';\n    case 'video':\n      return 'text-indigo-600 bg-indigo-50';\n    case 'audio':\n      return 'text-pink-600 bg-pink-50';\n    case 'markdown':\n      return 'text-gray-700 bg-gray-100';\n    case 'json':\n      return 'text-yellow-600 bg-yellow-50';\n    case 'pdf':\n      return 'text-red-600 bg-red-50';\n    case 'text':\n      return 'text-gray-600 bg-gray-50';\n    case 'spreadsheet':\n      return 'text-green-600 bg-green-50';\n    case 'document':\n      return 'text-blue-600 bg-blue-50';\n    default:\n      return 'text-gray-500 bg-gray-50';\n  }\n};","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AdminBreadcrumb from '@/components/common/AdminBreadcrumb';\nimport { formatDate, formatFileSize } from '@/lib/utils';\nimport { authClient } from '@o4o/auth-client';\nimport axios from 'axios';\nimport { toast } from 'react-hot-toast';\nimport { getFileTypeFromMime, getFileIcon, getFileColorClass } from '@/utils/fileIcons';\n\ninterface MediaItem {\n  id: string;\n  title: string;\n  filename: string;\n  author: string;\n  createdAt: string;\n  mimeType: string;\n  size: number;\n  thumbnailUrl?: string;\n  url: string;\n  isImage?: boolean;\n}\n\nconst MediaListWordPress: React.FC = () => {\n  const navigate = useNavigate();\n  const [media, setMedia] = useState<MediaItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedMedia, setSelectedMedia] = useState<Set<string>>(new Set());\n  const [searchQuery, setSearchQuery] = useState('');\n  const [activeTab, setActiveTab] = useState<'all' | 'image' | 'document' | 'unattached'>('all');\n  const [currentUser, setCurrentUser] = useState<any>(null);\n  \n  // Get current logged in user\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const user = await authClient.getUser();\n        setCurrentUser(user);\n      } catch (error) {\n        // User not logged in or error fetching\n        setCurrentUser(null);\n      }\n    };\n    fetchUser();\n  }, []);\n\n  // Fetch media from API\n  useEffect(() => {\n    fetchMedia();\n  }, []);\n\n  const fetchMedia = async () => {\n    try {\n      setLoading(true);\n      const response = await authClient.api.get('/v1/content/media?limit=100');\n      \n      let mediaData = [];\n      if (response.data?.data?.media) {\n        mediaData = response.data.data.media;\n      } else if (Array.isArray(response.data)) {\n        mediaData = response.data;\n      }\n\n      const transformed = mediaData.map((item: any) => {\n        // Ensure thumbnailUrl has proper format\n        let thumbnailUrl = item.thumbnailUrl;\n        if (!thumbnailUrl && item.isImage && item.url) {\n          thumbnailUrl = item.url;\n        }\n        // Add API base URL if needed\n        if (thumbnailUrl && !thumbnailUrl.startsWith('http')) {\n          thumbnailUrl = `https://api.neture.co.kr${thumbnailUrl}`;\n        }\n        \n        let url = item.url;\n        if (url && !url.startsWith('http')) {\n          url = `https://api.neture.co.kr${url}`;\n        }\n\n        return {\n          id: item.id,\n          title: item.originalFilename || item.filename || 'Untitled',\n          filename: item.filename,\n          author: item.uploadedBy?.name || item.uploadedBy?.email?.split('@')[0] || currentUser?.name || currentUser?.email?.split('@')[0] || 'Unknown',\n          createdAt: item.createdAt,\n          mimeType: item.mimeType || 'application/octet-stream',\n          size: parseInt(item.size) || 0,\n          thumbnailUrl,\n          url,\n          isImage: item.isImage || (item.mimeType && item.mimeType.startsWith('image/'))\n        };\n      });\n\n      setMedia(transformed);\n    } catch (err) {\n      toast.error('Failed to load media');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEdit = async (id: string, newTitle: string) => {\n    try {\n      await authClient.api.put(`/v1/content/media/${id}`, { title: newTitle });\n      setMedia(prev => prev.map(m => \n        m.id === id ? { ...m, title: newTitle } : m\n      ));\n      toast.success('Media updated');\n    } catch (error) {\n      toast.error('Failed to update media');\n    }\n  };\n\n  const handleDelete = async (id: string) => {\n    // Use non-blocking confirmation\n    const shouldDelete = window.confirm('Delete this media permanently?');\n    if (!shouldDelete) return;\n    \n    // Find the item to delete for potential restoration\n    const itemToDelete = media.find(m => m.id === id);\n    if (!itemToDelete) return;\n    \n    // Optimistically remove from UI immediately for better perceived performance\n    setMedia(prev => prev.filter(m => m.id !== id));\n    \n    try {\n      // Get token from localStorage directly\n      let token = localStorage.getItem('accessToken') || \n                  localStorage.getItem('token') || \n                  localStorage.getItem('authToken');\n      \n      // Also check admin-auth-storage\n      if (!token) {\n        const authStorage = localStorage.getItem('admin-auth-storage');\n        if (authStorage) {\n          try {\n            const parsed = JSON.parse(authStorage);\n            if (parsed.state?.accessToken || parsed.state?.token) {\n              token = parsed.state.accessToken || parsed.state.token;\n            }\n          } catch (e) {\n            // Invalid JSON, ignore\n          }\n        }\n      }\n      \n      if (!token) {\n        // Restore the item if auth fails\n        setMedia(prev => [...prev, itemToDelete].sort((a, b) => \n          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n        ));\n        toast.error('Authentication required. Please login again.');\n        return;\n      }\n      \n      // Perform delete request\n      await axios.delete(`https://api.neture.co.kr/api/v1/content/media/${id}`, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      toast.success('Media deleted successfully');\n    } catch (error: any) {\n      // Restore the item on error\n      setMedia(prev => [...prev, itemToDelete].sort((a, b) => \n        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n      ));\n      toast.error(`Failed to delete: ${error.response?.data?.message || error.message}`);\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (selectedMedia.size === 0) return;\n    \n    const shouldDelete = window.confirm(`Delete ${selectedMedia.size} items permanently?`);\n    if (!shouldDelete) return;\n\n    // Store items to potentially restore\n    const itemsToDelete = media.filter(m => selectedMedia.has(m.id));\n    const selectedIds = new Set(selectedMedia);\n    \n    // Optimistically update UI immediately\n    setMedia(prev => prev.filter(m => !selectedIds.has(m.id)));\n    setSelectedMedia(new Set());\n    toast.loading(`Deleting ${selectedIds.size} items...`);\n\n    try {\n      // Get token from localStorage directly\n      let token = localStorage.getItem('accessToken') || \n                  localStorage.getItem('token') || \n                  localStorage.getItem('authToken');\n      \n      // Also check admin-auth-storage\n      if (!token) {\n        const authStorage = localStorage.getItem('admin-auth-storage');\n        if (authStorage) {\n          try {\n            const parsed = JSON.parse(authStorage);\n            if (parsed.state?.accessToken || parsed.state?.token) {\n              token = parsed.state.accessToken || parsed.state.token;\n            }\n          } catch (e) {\n            // Invalid JSON, ignore\n          }\n        }\n      }\n      \n      if (!token) {\n        // Restore items if auth fails\n        setMedia(prev => [...prev, ...itemsToDelete].sort((a, b) => \n          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n        ));\n        setSelectedMedia(selectedIds);\n        toast.error('Authentication required. Please login again.');\n        return;\n      }\n      \n      // Delete items in parallel but don't block UI\n      const deletePromises = Array.from(selectedIds).map(id => \n        axios.delete(`https://api.neture.co.kr/api/v1/content/media/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        }).catch(error => {\n          // Failed to delete media item\n          return { error, id };\n        })\n      );\n      \n      // Process results in background\n      Promise.all(deletePromises).then(results => {\n        const failedDeletions = results.filter(r => r && 'error' in r);\n        if (failedDeletions.length > 0) {\n          // Restore only the failed items\n          const failedIds = failedDeletions.map((f: any) => f.id);\n          const failedItems = itemsToDelete.filter(item => failedIds.includes(item.id));\n          setMedia(prev => [...prev, ...failedItems].sort((a, b) => \n            new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n          ));\n          toast.error(`Failed to delete ${failedDeletions.length} item(s)`);\n        } else {\n          toast.success('Selected media deleted successfully');\n        }\n      });\n    } catch (error: any) {\n      // Restore all items on complete failure\n      setMedia(prev => [...prev, ...itemsToDelete].sort((a, b) => \n        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n      ));\n      setSelectedMedia(selectedIds);\n      toast.error(`Failed to delete: ${error.response?.data?.message || error.message}`);\n    }\n  };\n\n  // Filter media based on active tab and search\n  const getFilteredMedia = () => {\n    let filtered = media;\n\n    // Tab filter\n    if (activeTab === 'image') {\n      filtered = filtered.filter(m => m.mimeType.startsWith('image/'));\n    } else if (activeTab === 'document') {\n      filtered = filtered.filter(m => {\n        const fileType = getFileTypeFromMime(m.mimeType, m.filename);\n        return ['document', 'markdown', 'json', 'pdf', 'text', 'spreadsheet'].includes(fileType);\n      });\n    } else if (activeTab === 'unattached') {\n      // For now, show all as we don't track attachments\n      filtered = filtered;\n    }\n\n    // Search filter\n    if (searchQuery) {\n      const query = searchQuery.toLowerCase();\n      filtered = filtered.filter(m => \n        m.title.toLowerCase().includes(query) ||\n        m.filename.toLowerCase().includes(query)\n      );\n    }\n\n    // Sort by date desc\n    return filtered.sort((a, b) => \n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n    );\n  };\n\n  const filteredMedia = getFilteredMedia();\n\n  // Count media types\n  const counts = {\n    all: media.length,\n    image: media.filter(m => m.mimeType.startsWith('image/')).length,\n    document: media.filter(m => {\n      const fileType = getFileTypeFromMime(m.mimeType, m.filename);\n      return ['document', 'markdown', 'json', 'pdf', 'text', 'spreadsheet'].includes(fileType);\n    }).length,\n    unattached: media.length // Simplified - all are unattached for now\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"text-gray-600\">Loading media...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b px-8 py-3\">\n        <AdminBreadcrumb \n          items={[\n            { label: 'Dashboard', path: '/' },\n            { label: 'Media', path: '/media' },\n            { label: 'Library' }\n          ]}\n        />\n      </div>\n\n      <div className=\"px-8 py-6\">\n        {/* Title */}\n        <div className=\"flex items-center gap-3 mb-4\">\n          <h1 className=\"text-2xl font-normal\">Media Library</h1>\n          <button\n            onClick={() => navigate('/media/new')}\n            className=\"px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50\"\n          >\n            Add New\n          </button>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex items-center gap-4 mb-4 text-sm\">\n          <button\n            onClick={() => setActiveTab('all')}\n            className={activeTab === 'all' ? 'font-medium' : 'text-blue-600 hover:text-blue-800'}\n          >\n            All ({counts.all})\n          </button>\n          <span className=\"text-gray-400\">|</span>\n          <button\n            onClick={() => setActiveTab('image')}\n            className={activeTab === 'image' ? 'font-medium' : 'text-blue-600 hover:text-blue-800'}\n          >\n            Images ({counts.image})\n          </button>\n          <span className=\"text-gray-400\">|</span>\n          <button\n            onClick={() => setActiveTab('document')}\n            className={activeTab === 'document' ? 'font-medium' : 'text-blue-600 hover:text-blue-800'}\n          >\n            Documents ({counts.document})\n          </button>\n          <span className=\"text-gray-400\">|</span>\n          <button\n            onClick={() => setActiveTab('unattached')}\n            className={activeTab === 'unattached' ? 'font-medium' : 'text-blue-600 hover:text-blue-800'}\n          >\n            Unattached ({counts.unattached})\n          </button>\n        </div>\n\n        {/* Actions Bar */}\n        <div className=\"flex justify-between items-center mb-4\">\n          {/* Bulk Actions */}\n          <div className=\"flex items-center gap-2\">\n            <select \n              className=\"text-sm border border-gray-300 rounded px-3 py-1.5\"\n              defaultValue=\"\"\n            >\n              <option value=\"\">Bulk Actions</option>\n              <option value=\"delete\">Delete Permanently</option>\n            </select>\n            <button\n              onClick={handleBulkDelete}\n              className=\"px-3 py-1.5 text-sm border border-gray-300 rounded hover:bg-gray-50\"\n              disabled={selectedMedia.size === 0}\n            >\n              Apply\n            </button>\n          </div>\n\n          {/* Search */}\n          <div className=\"flex items-center gap-2\">\n            <input\n              type=\"search\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"px-3 py-1.5 text-sm border border-gray-300 rounded\"\n              placeholder=\"Search media...\"\n            />\n          </div>\n        </div>\n\n        {/* Count */}\n        <div className=\"text-sm text-gray-600 mb-2\">\n          {filteredMedia.length} items\n        </div>\n\n        {/* Media Table */}\n        <div className=\"bg-white border rounded\">\n          <table className=\"w-full\">\n            <thead className=\"border-b bg-gray-50\">\n              <tr>\n                <th className=\"w-10 px-3 py-3 text-left\">\n                  <input\n                    type=\"checkbox\"\n                    onChange={(e) => {\n                      if (e.target.checked) {\n                        setSelectedMedia(new Set(filteredMedia.map(m => m.id)));\n                      } else {\n                        setSelectedMedia(new Set());\n                      }\n                    }}\n                    checked={selectedMedia.size === filteredMedia.length && filteredMedia.length > 0}\n                  />\n                </th>\n                <th className=\"px-3 py-3 text-left text-sm font-medium\">File</th>\n                <th className=\"px-3 py-3 text-left text-sm font-medium\">Author</th>\n                <th className=\"px-3 py-3 text-left text-sm font-medium\">Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredMedia.map((item) => (\n                <tr key={item.id} className=\"border-b hover:bg-gray-50\">\n                  <td className=\"px-3 py-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedMedia.has(item.id)}\n                      onChange={(e) => {\n                        const newSelected = new Set(selectedMedia);\n                        if (e.target.checked) {\n                          newSelected.add(item.id);\n                        } else {\n                          newSelected.delete(item.id);\n                        }\n                        setSelectedMedia(newSelected);\n                      }}\n                    />\n                  </td>\n                  <td className=\"px-3 py-3\">\n                    <div className=\"flex items-start gap-3\">\n                      {/* Thumbnail */}\n                      {item.thumbnailUrl || item.isImage ? (\n                        <img\n                          src={item.thumbnailUrl || item.url}\n                          alt={item.title}\n                          className=\"w-16 h-16 object-cover rounded border\"\n                          onError={(e) => {\n                            e.currentTarget.style.display = 'none';\n                            e.currentTarget.nextElementSibling?.classList.remove('hidden');\n                          }}\n                        />\n                      ) : (\n                        <div className={`w-16 h-16 rounded border flex items-center justify-center ${getFileColorClass(getFileTypeFromMime(item.mimeType, item.filename))}`}>\n                          {getFileIcon(getFileTypeFromMime(item.mimeType, item.filename), 'w-8 h-8')}\n                        </div>\n                      )}\n                      \n                      {/* File Info */}\n                      <div>\n                        <div className=\"font-medium text-sm text-blue-600 hover:text-blue-800 cursor-pointer\">\n                          {item.title}\n                        </div>\n                        <div className=\"text-xs text-gray-500 mt-1\">{item.filename}</div>\n                        \n                        {/* Actions */}\n                        <div className=\"flex items-center gap-2 mt-2 text-xs\">\n                          <button\n                            onClick={() => {\n                              // Simple edit - change title\n                              const newTitle = prompt('Edit title:', item.title);\n                              if (newTitle && newTitle !== item.title) {\n                                handleEdit(item.id, newTitle);\n                              }\n                            }}\n                            className=\"text-blue-600 hover:text-blue-800\"\n                          >\n                            Edit\n                          </button>\n                          <span className=\"text-gray-400\">|</span>\n                          <button\n                            onClick={() => handleDelete(item.id)}\n                            className=\"text-red-600 hover:text-red-800\"\n                          >\n                            Delete Permanently\n                          </button>\n                          <span className=\"text-gray-400\">|</span>\n                          <a\n                            href={item.url}\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"text-blue-600 hover:text-blue-800\"\n                          >\n                            View\n                          </a>\n                        </div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-3 py-3 text-sm text-gray-600\">\n                    {item.author}\n                  </td>\n                  <td className=\"px-3 py-3 text-sm text-gray-600\">\n                    <div>{formatDate(item.createdAt)}</div>\n                    <div className=\"text-xs text-gray-500 mt-1\">\n                      {formatFileSize(item.size)}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n\n              {filteredMedia.length === 0 && (\n                <tr>\n                  <td colSpan={4} className=\"px-3 py-8 text-center text-gray-500\">\n                    No media found\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MediaListWordPress;","import { HTMLAttributes } from 'react';\nimport { forwardRef } from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nconst Card = forwardRef<\n  HTMLDivElement,\n  HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = forwardRef<\n  HTMLDivElement,\n  HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = forwardRef<\n  HTMLParagraphElement,\n  HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h3\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = forwardRef<\n  HTMLParagraphElement,\n  HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <p\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = forwardRef<\n  HTMLDivElement,\n  HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = forwardRef<\n  HTMLDivElement,\n  HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }","import { FC, useState } from 'react';\nimport {\n  Layout,\n  FileText,\n  Info,\n  Phone,\n  Star,\n  TrendingUp,\n  Users,\n  Package,\n  Megaphone,\n  BookOpen,\n  Search,\n  Plus,\n  Eye,\n  Heart,\n  Copy,\n  Check,\n  MessageSquare,\n  DollarSign\n} from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardFooter,\n  CardHeader,\n  CardTitle,\n} from '@/components/ui/card';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { cn } from '@/lib/utils';\n\n// Template types\nexport interface Template {\n  id: string;\n  name: string;\n  description: string;\n  category: 'landing' | 'product' | 'blog' | 'page' | 'section';\n  icon: React.ComponentType<any>;\n  thumbnail?: string;\n  blocks: any[];\n  tags: string[];\n  isPro?: boolean;\n  isFavorite?: boolean;\n}\n\nexport interface Pattern {\n  id: string;\n  name: string;\n  category: 'header' | 'hero' | 'features' | 'cta' | 'testimonial' | 'pricing' | 'footer' | 'content';\n  blocks: any[];\n  thumbnail?: string;\n}\n\n// Template data\nconst templates: Template[] = [\n  {\n    id: 'landing-1',\n    name: 'SaaS Landing Page',\n    description: 'Modern landing page for SaaS products with hero, features, pricing, and testimonials',\n    category: 'landing',\n    icon: TrendingUp,\n    tags: ['saas', 'startup', 'modern'],\n    blocks: [\n      { type: 'hero', content: { title: 'Build Better Products Faster' } },\n      { type: 'features', content: { columns: 3 } },\n      { type: 'pricing', content: { plans: 3 } },\n      { type: 'testimonials', content: { count: 3 } },\n      { type: 'cta', content: { title: 'Start Your Free Trial' } }\n    ]\n  },\n  {\n    id: 'product-1',\n    name: 'Product Showcase',\n    description: 'Elegant product page with gallery, description, and purchase options',\n    category: 'product',\n    icon: Package,\n    tags: ['ecommerce', 'product', 'shop'],\n    blocks: [\n      { type: 'breadcrumb', content: {} },\n      { type: 'product-gallery', content: {} },\n      { type: 'product-info', content: {} },\n      { type: 'product-tabs', content: {} },\n      { type: 'related-products', content: {} }\n    ]\n  },\n  {\n    id: 'blog-1',\n    name: 'Blog Article',\n    description: 'Clean blog post layout with sidebar and comments',\n    category: 'blog',\n    icon: BookOpen,\n    tags: ['blog', 'article', 'content'],\n    blocks: [\n      { type: 'post-header', content: {} },\n      { type: 'post-content', content: {} },\n      { type: 'author-bio', content: {} },\n      { type: 'related-posts', content: {} },\n      { type: 'comments', content: {} }\n    ]\n  },\n  {\n    id: 'about-1',\n    name: 'About Us',\n    description: 'Company about page with team, values, and history',\n    category: 'page',\n    icon: Users,\n    tags: ['about', 'company', 'team'],\n    isPro: true,\n    blocks: [\n      { type: 'hero', content: { title: 'Our Story' } },\n      { type: 'text-image', content: {} },\n      { type: 'team-grid', content: {} },\n      { type: 'values', content: {} },\n      { type: 'timeline', content: {} }\n    ]\n  },\n  {\n    id: 'contact-1',\n    name: 'Contact Page',\n    description: 'Contact page with form, map, and office locations',\n    category: 'page',\n    icon: Phone,\n    tags: ['contact', 'form', 'location'],\n    blocks: [\n      { type: 'contact-hero', content: {} },\n      { type: 'contact-form', content: {} },\n      { type: 'office-locations', content: {} },\n      { type: 'map', content: {} }\n    ]\n  }\n];\n\n// Pattern data\nconst patterns: Pattern[] = [\n  {\n    id: 'hero-1',\n    name: 'Hero with CTA',\n    category: 'hero',\n    blocks: [\n      { type: 'heading', content: { text: 'Welcome to Our Platform' } },\n      { type: 'paragraph', content: { text: 'Build amazing things with our tools' } },\n      { type: 'buttons', content: {} }\n    ]\n  },\n  {\n    id: 'features-1',\n    name: '3 Column Features',\n    category: 'features',\n    blocks: [\n      { type: 'heading', content: { text: 'Our Features' } },\n      { type: 'columns', content: { count: 3 } }\n    ]\n  },\n  {\n    id: 'cta-1',\n    name: 'Centered CTA',\n    category: 'cta',\n    blocks: [\n      { type: 'cta', content: { alignment: 'center' } }\n    ]\n  },\n  {\n    id: 'testimonial-1',\n    name: 'Testimonial Carousel',\n    category: 'testimonial',\n    blocks: [\n      { type: 'testimonial-carousel', content: {} }\n    ]\n  },\n  {\n    id: 'pricing-1',\n    name: '3 Tier Pricing',\n    category: 'pricing',\n    blocks: [\n      { type: 'pricing-table', content: { plans: 3 } }\n    ]\n  }\n];\n\ninterface ContentTemplatesProps {\n  onSelectTemplate?: (template: Template) => void;\n  onSelectPattern?: (pattern: Pattern) => void;\n  mode?: 'templates' | 'patterns' | 'both';\n}\n\nconst ContentTemplates: FC<ContentTemplatesProps> = ({\n  onSelectTemplate,\n  onSelectPattern,\n  mode = 'both'\n}) => {\n  const [activeTab, setActiveTab] = useState<'templates' | 'patterns'>('templates');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [favorites, setFavorites] = useState<any[]>([]);\n  const [copiedId, setCopiedId] = useState<string | null>(null);\n\n  // Template categories\n  const templateCategories = [\n    { id: 'all', name: 'All Templates', icon: Layout },\n    { id: 'landing', name: 'Landing Pages', icon: TrendingUp },\n    { id: 'product', name: 'Product Pages', icon: Package },\n    { id: 'blog', name: 'Blog Posts', icon: BookOpen },\n    { id: 'page', name: 'Pages', icon: FileText },\n  ];\n\n  // Pattern categories\n  const patternCategories = [\n    { id: 'all', name: 'All Patterns', icon: Layout },\n    { id: 'header', name: 'Headers', icon: Layout },\n    { id: 'hero', name: 'Hero Sections', icon: Star },\n    { id: 'features', name: 'Features', icon: Package },\n    { id: 'cta', name: 'Call to Action', icon: Megaphone },\n    { id: 'testimonial', name: 'Testimonials', icon: MessageSquare },\n    { id: 'pricing', name: 'Pricing', icon: DollarSign },\n    { id: 'footer', name: 'Footers', icon: Layout },\n  ];\n\n  // Filter templates\n  const filteredTemplates = templates.filter((template: any) => {\n    const matchesSearch = template.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         template.description.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         template.tags.some((tag: any) => tag.toLowerCase().includes(searchQuery.toLowerCase()));\n    const matchesCategory = selectedCategory === 'all' || template.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  // Filter patterns\n  const filteredPatterns = patterns.filter((pattern: any) => {\n    const matchesSearch = pattern.name.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesCategory = selectedCategory === 'all' || pattern.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  // Toggle favorite\n  const toggleFavorite = (id: string) => {\n    setFavorites((prev: any) => \n      prev.includes(id) \n        ? prev.filter((fId: any) => fId !== id)\n        : [...prev, id]\n    );\n  };\n\n  // Copy template ID\n  const copyTemplateId = (id: string) => {\n    navigator.clipboard.writeText(id);\n    setCopiedId(id);\n    setTimeout(() => setCopiedId(null), 2000);\n  };\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      {/* Header */}\n      <div className=\"p-6 border-b\">\n        <h2 className=\"text-2xl font-bold mb-2\">Content Templates & Patterns</h2>\n        <p className=\"text-gray-600\">\n          Choose from pre-designed templates or mix and match patterns\n        </p>\n      </div>\n\n      {/* Search */}\n      <div className=\"p-6 border-b\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          <Input\n            placeholder=\"Search templates and patterns...\"\n            value={searchQuery}\n            onChange={(e: any) => setSearchQuery(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <Tabs\n        value={activeTab}\n        onValueChange={(value: any) => setActiveTab(value)}\n        className=\"flex-1 flex flex-col\"\n      >\n        {mode === 'both' && (\n          <TabsList className=\"mx-6\">\n            <TabsTrigger value=\"templates\">Templates</TabsTrigger>\n            <TabsTrigger value=\"patterns\">Patterns</TabsTrigger>\n          </TabsList>\n        )}\n\n        {/* Templates Tab */}\n        <TabsContent value=\"templates\" className=\"flex-1 flex m-0\">\n          {/* Categories Sidebar */}\n          <div className=\"w-64 border-r p-4\">\n            <h3 className=\"font-medium text-sm mb-4\">Categories</h3>\n            <div className=\"space-y-1\">\n              {templateCategories.map((category: any) => (\n                <button\n                  key={category.id}\n                  onClick={() => setSelectedCategory(category.id)}\n                  className={cn(\n                    'w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm transition-colors',\n                    selectedCategory === category.id\n                      ? 'bg-primary-100 text-primary-700'\n                      : 'hover:bg-gray-100'\n                  )}\n                >\n                  <category.icon className=\"h-4 w-4\" />\n                  <span>{category.name}</span>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Templates Grid */}\n          <ScrollArea className=\"flex-1 p-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {filteredTemplates.map((template: any) => {\n                const Icon = template.icon;\n                const isFavorite = favorites.includes(template.id);\n                \n                return (\n                  <Card key={template.id} className=\"overflow-hidden hover:shadow-lg transition-shadow\">\n                    <CardHeader>\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex items-start gap-3\">\n                          <div className=\"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center\">\n                            <Icon className=\"h-5 w-5 text-primary-600\" />\n                          </div>\n                          <div>\n                            <CardTitle className=\"text-lg\">{template.name}</CardTitle>\n                            {template.isPro && (\n                              <Badge variant=\"secondary\" className=\"mt-1\">\n                                PRO\n                              </Badge>\n                            )}\n                          </div>\n                        </div>\n                        <Button\n                          variant={\"ghost\" as const}\n                          size={\"icon\" as const}\n                          className=\"h-8 w-8\"\n                          onClick={() => toggleFavorite(template.id)}\n                        >\n                          <Heart\n                            className={cn(\n                              'h-4 w-4',\n                              isFavorite && 'fill-red-500 text-red-500'\n                            )}\n                          />\n                        </Button>\n                      </div>\n                    </CardHeader>\n                    \n                    <CardContent>\n                      <CardDescription>{template.description}</CardDescription>\n                      \n                      <div className=\"flex flex-wrap gap-2 mt-4\">\n                        {template.tags.map((tag: any) => (\n                          <Badge key={tag} variant={\"outline\" as const} className=\"text-xs\">\n                            {tag}\n                          </Badge>\n                        ))}\n                      </div>\n                      \n                      <div className=\"mt-4 p-3 bg-gray-50 rounded-md\">\n                        <p className=\"text-xs text-gray-600 mb-1\">Contains:</p>\n                        <p className=\"text-sm\">{(template.blocks as any).length} blocks</p>\n                      </div>\n                    </CardContent>\n                    \n                    <CardFooter className=\"gap-2\">\n                      <Button\n                        className=\"flex-1\"\n                        onClick={() => onSelectTemplate?.(template)}\n                      >\n                        Use Template\n                      </Button>\n                      <Button\n                        variant={\"outline\" as const}\n                        size={\"icon\" as const}\n                        onClick={() => {\n                          // Preview\n                        }}\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant={\"outline\" as const}\n                        size={\"icon\" as const}\n                        onClick={() => copyTemplateId(template.id)}\n                      >\n                        {copiedId === template.id ? (\n                          <Check className=\"h-4 w-4 text-green-600\" />\n                        ) : (\n                          <Copy className=\"h-4 w-4\" />\n                        )}\n                      </Button>\n                    </CardFooter>\n                  </Card>\n                );\n              })}\n            </div>\n          </ScrollArea>\n        </TabsContent>\n\n        {/* Patterns Tab */}\n        <TabsContent value=\"patterns\" className=\"flex-1 flex m-0\">\n          {/* Categories Sidebar */}\n          <div className=\"w-64 border-r p-4\">\n            <h3 className=\"font-medium text-sm mb-4\">Pattern Types</h3>\n            <div className=\"space-y-1\">\n              {patternCategories.map((category: any) => (\n                <button\n                  key={category.id}\n                  onClick={() => setSelectedCategory(category.id)}\n                  className={cn(\n                    'w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm transition-colors',\n                    selectedCategory === category.id\n                      ? 'bg-primary-100 text-primary-700'\n                      : 'hover:bg-gray-100'\n                  )}\n                >\n                  <category.icon className=\"h-4 w-4\" />\n                  <span>{category.name}</span>\n                </button>\n              ))}\n            </div>\n            \n            <div className=\"mt-8 p-4 bg-blue-50 rounded-lg\">\n              <h4 className=\"font-medium text-sm mb-2 flex items-center gap-2\">\n                <Info className=\"h-4 w-4\" />\n                Pro Tip\n              </h4>\n              <p className=\"text-xs text-gray-700\">\n                Combine multiple patterns to create your own unique layouts. \n                Patterns are reusable across all your pages.\n              </p>\n            </div>\n          </div>\n\n          {/* Patterns Grid */}\n          <ScrollArea className=\"flex-1 p-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {filteredPatterns.map((pattern: any) => (\n                <Card\n                  key={pattern.id}\n                  className=\"cursor-pointer hover:shadow-md transition-all hover:scale-105\"\n                  onClick={() => onSelectPattern?.(pattern)}\n                >\n                  <CardContent className=\"p-6\">\n                    <div className=\"aspect-video bg-gray-100 rounded-md mb-4 flex items-center justify-center\">\n                      <Layout className=\"h-12 w-12 text-gray-400\" />\n                    </div>\n                    <h4 className=\"font-medium\">{pattern.name}</h4>\n                    <p className=\"text-sm text-gray-600 mt-1\">\n                      {(pattern.blocks as any).length} blocks\n                    </p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n            \n            {/* Create custom pattern */}\n            <Card className=\"mt-6 border-dashed\">\n              <CardContent className=\"p-12 text-center\">\n                <Plus className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n                <h3 className=\"text-lg font-medium mb-2\">Create Custom Pattern</h3>\n                <p className=\"text-gray-600 mb-4\">\n                  Save your own block combinations as reusable patterns\n                </p>\n                <Button variant={\"outline\" as const}>\n                  Create Pattern\n                </Button>\n              </CardContent>\n            </Card>\n          </ScrollArea>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n\nexport default ContentTemplates;","import * as React from 'react'\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip'\nimport { cn } from '@/lib/utils'\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      'z-50 overflow-hidden rounded-md bg-slate-900 px-3 py-1.5 text-xs text-slate-50 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }","import { useState, FC, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useQueryClient } from '@tanstack/react-query';\nimport {\n  ArrowLeft,\n  Save,\n  Eye,\n  MoreVertical,\n  Settings2,\n  X,\n  Undo2,\n  Redo2,\n  Plus,\n  List,\n  Info\n} from 'lucide-react';\nimport type { Post } from '@/types/post.types';\nimport { Button } from '@/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Badge } from '@/components/ui/badge';\nimport { cn } from '@/lib/utils';\nimport { initializeWordPress } from '@/utils/wordpress-initializer';\nimport GutenbergBlockEditor from '@/components/editor/GutenbergBlockEditor';\nimport GutenbergSidebar from '@/components/editor/GutenbergSidebar';\nimport MediaListWordPress from '@/pages/media/MediaListWordPress';\nimport ContentTemplates from '@/components/editor/ContentTemplates';\nimport AIPageGeneratorModal from '@/components/ai/AIPageGeneratorModal';\nimport {\n  Dialog,\n  DialogContent,\n} from '@/components/ui/dialog';\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from '@/components/ui/tooltip';\nimport toast from 'react-hot-toast';\nimport '@/styles/editor-animations.css';\nimport { postApi } from '@/services/api/postApi';\n\ninterface StandaloneEditorProps {\n  mode?: 'post' | 'page' | 'template' | 'pattern';\n  postId?: string | number;  // Now passed from EditorRouteWrapper\n}\n\nconst StandaloneEditor: FC<StandaloneEditorProps> = ({ mode = 'post', postId: initialPostId }) => {\n  const [isMobile, setIsMobile] = useState(false);\n  // Don't use 'new' as an ID - it should be undefined for new posts\n  const [currentPostId, setCurrentPostId] = useState<string | number | undefined>(\n    initialPostId === 'new' ? undefined : initialPostId\n  );\n  \n  // 모바일 감지\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    \n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const queryClient = useQueryClient();\n  \n  // Simple and reliable check for new post\n  const isNewPost = !currentPostId;\n  \n  // Component initialized with postId and mode from props\n  \n  // Editor state\n  const [postTitle, setPostTitle] = useState('');\n  const [blocks, setBlocks] = useState<any[]>([]);\n  const [sidebarOpen, setSidebarOpen] = useState(true); // Changed to true for better UX and permalink access\n  const [activeTab] = useState<'document' | 'block'>('document');\n  const [selectedBlock, setSelectedBlock] = useState<any>(null);\n  const [showMediaLibrary, setShowMediaLibrary] = useState(false);\n  const [showTemplates, setShowTemplates] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const saveRequestRef = useRef<AbortController | null>(null);\n  const lastSaveHashRef = useRef<string | null>(null);\n  const [lastSaved, setLastSaved] = useState<Date | null>(null);\n  const [isWordPressReady, setIsWordPressReady] = useState(false);\n  const [showListView, setShowListView] = useState(false);\n  const [isDirty, setIsDirty] = useState(false);\n  const [isPostDataLoaded, setIsPostDataLoaded] = useState(false);\n  const [showAIGenerator, setShowAIGenerator] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(null);\n  \n  // Add refs to track latest state values for save operations\n  const blocksRef = useRef<any[]>([]);\n  \n  // Post settings\n  const [postSettings, setPostSettings] = useState({\n    status: 'draft' as 'draft' | 'publish' | 'pending' | 'private' | 'scheduled',\n    visibility: 'public' as 'public' | 'private' | 'password',\n    publishDate: new Date().toISOString().slice(0, 16),\n    author: 'Admin User',\n    featuredImage: undefined as string | undefined,\n    excerpt: '',\n    slug: '',\n    slugError: false,\n    categories: [] as string[],\n    tags: [] as string[],\n    template: 'default',\n    commentStatus: true,\n    pingStatus: true,\n    sticky: false,\n    format: 'standard' as 'standard' | 'aside' | 'chat' | 'gallery' | 'link' | 'image' | 'quote' | 'status' | 'video' | 'audio'\n  });\n  \n  // Initialize ref with postSettings after it's defined\n  const postSettingsRef = useRef(postSettings);\n\n  // Helper function to normalize API response\n  const normalizePostResponse = (response: any): Post | null => {\n    if (!response) return null;\n    \n    let data = response;\n    \n    // Handle various response structures\n    // Case 1: { success: true, data: { data: {...} } } (postApi wrapper + server response)\n    if (data.success && data.data) {\n      data = data.data;\n    }\n    \n    // Case 2: { data: {...} } (server response)\n    if (data.data && !data.id && !data.title) {\n      data = data.data;\n    }\n    \n    // Case 3: { post: {...} } (alternative structure)\n    if (data.post && !data.id && !data.title) {\n      data = data.post;\n    }\n    \n    // Validate essential fields\n    if (!data.id) {\n      // Invalid post data: missing id\n      return null;\n    }\n    \n    return data as Post;\n  };\n\n  // Simplified load post data function\n  const loadPostData = async (id: string | number) => {\n    const loadingToast = toast.loading(`Loading post...`);\n    \n    try {\n      const response = await postApi.get(String(id));\n      \n      // Store API response for debugging (works in production too)\n      if (typeof window !== 'undefined') {\n        (window as any).__LAST_API_RESPONSE = response;\n        (window as any).__LAST_API_RESPONSE_TIME = new Date().toISOString();\n      }\n      \n      if (!response.success) {\n        throw new Error(response.error || 'Failed to load post');\n      }\n      \n      // Normalize the response\n      const data = normalizePostResponse(response);\n      \n      if (!data) {\n        throw new Error('Invalid post data received');\n      }\n      \n      // Extract and set title\n      const title = data.title || '';\n      setPostTitle(title);\n      \n      // Parse and set content\n      let parsedBlocks = [];\n      if (data.content) {\n        if (typeof data.content === 'string') {\n          try {\n            const parsed = JSON.parse(data.content);\n            parsedBlocks = Array.isArray(parsed) ? parsed : \n                          (parsed?.blocks || []);\n          } catch {\n            // Plain text - create paragraph block\n            parsedBlocks = [{ \n              id: 'block-1', \n              type: 'core/paragraph', \n              attributes: { content: data.content }\n            }];\n          }\n        } else if (Array.isArray(data.content)) {\n          parsedBlocks = data.content;\n        } else if ((data as any).content?.blocks) {\n          parsedBlocks = (data as any).content.blocks;\n        }\n      }\n      \n      setBlocks(parsedBlocks);\n      blocksRef.current = parsedBlocks; // Update ref\n      \n      // Set post settings - ensure slug is preserved\n      setPostSettings(prev => {\n        const mapStatus = (s: any) => {\n          if (s === 'published') return 'publish';\n          if (s === 'trash') return 'draft';\n          return s;\n        };\n        const toIsoLocal = (input: any) => {\n          const d = input ? new Date(input) : new Date();\n          return d.toISOString().replace('Z', '').slice(0, 16);\n        };\n        const newSettings = {\n          ...prev,\n          status: mapStatus(data.status || 'draft') as any,\n          visibility: 'public' as const,\n          publishDate: toIsoLocal(data.publishedAt || data.createdAt),\n          author: data.author?.name || 'Admin User',\n          featuredImage: data.featuredImage?.url,\n          excerpt: data.excerpt || '',\n          slug: data.slug || prev.slug || '', // Preserve existing slug if API doesn't return one\n          categories: data.categories?.map((c: any) => typeof c === 'object' ? c.id : c) || [],\n          tags: data.tags?.map((t: any) => typeof t === 'object' ? t.id : t) || [],\n          template: 'default',\n          commentStatus: true,\n          pingStatus: true,\n          sticky: false,\n          format: 'standard' as const\n        };\n        \n        // Store debug data on window for production debugging\n        if (typeof window !== 'undefined') {\n          (window as any).__DEBUG_AFTER_SET = {\n            newSlug: newSettings.slug,\n            dataSlug: data.slug,\n            prevSlug: prev.slug,\n            allNewSettings: newSettings,\n            timestamp: new Date().toISOString()\n          };\n        }\n        \n        return newSettings;\n      });\n      \n      // Update postSettings ref\n      postSettingsRef.current = {\n        ...postSettingsRef.current,\n        slug: data.slug || '',\n        status: (data.status === 'published' ? 'publish' : (data.status === 'trash' ? 'draft' : (data.status || 'draft'))),\n        excerpt: data.excerpt || '',\n        categories: (data.categories || []).map((c: any) => typeof c === 'object' ? c.id : c),\n        tags: (data.tags || []).map((t: any) => typeof t === 'object' ? t.id : t),\n        sticky: (data as any).sticky || false,\n        featuredImage: data.featuredImage?.url,\n        format: (data as any).format || 'standard',\n        commentStatus: (data as any).commentStatus !== false\n      };\n      \n      setIsDirty(false);\n      setIsPostDataLoaded(true);  // Mark data as loaded\n      toast.dismiss(loadingToast);\n      toast.success('Post loaded');\n      \n    } catch (error: any) {\n      // Log error in development only\n      if (import.meta.env.DEV) {\n        // Load error occurred\n      }\n      toast.dismiss(loadingToast);\n      toast.error(error.message || 'Failed to load post');\n      \n      // Reset to empty state on error\n      setPostTitle('');\n      setBlocks([]);\n      setIsDirty(false);\n    }\n  };\n\n  // Initialize editor and load data\n  useEffect(() => {\n    const initializeEditor = async () => {\n      try {\n        // Initialize WordPress editor\n        await initializeWordPress();\n        setIsWordPressReady(true);\n        \n        // Load post data if editing existing post\n        if (currentPostId && !isNewPost) {\n          await loadPostData(currentPostId);\n        } else {\n          // Reset states for new post\n          setPostTitle('');\n          setBlocks([]);\n          blocksRef.current = []; // Reset ref\n          setIsDirty(false);\n          setIsPostDataLoaded(true);  // New post is \"loaded\" immediately\n        }\n        \n        // Editor is ready\n        \n      } catch (error) {\n        if (import.meta.env.DEV) {\n          // Init error occurred\n        }\n        toast.error('Failed to initialize editor');\n        setIsWordPressReady(true); // Still show editor even if init fails\n      }\n    };\n    \n    initializeEditor();\n  }, [currentPostId, isNewPost]); // loadPostData removed - it has empty deps and won't change\n\n  // Track unsaved changes - removed as it causes issues\n  // isDirty is now managed manually when actual changes occur\n  \n  // Autosave removed - only save when user explicitly clicks save/publish\n\n  // Warn before leaving with unsaved changes\n  useEffect(() => {\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (isDirty) {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n    \n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n  }, [isDirty]);\n\n  // This function was moved to above useEffect to avoid temporal dead zone\n\n  // Removed debounce - using direct calls with isSaving flag for duplicate prevention\n  \n  // Generate hash of save data to prevent duplicate saves\n  const generateSaveHash = (data: any) => {\n    const str = JSON.stringify({\n      title: data.title,\n      content: data.content,  // Now includes { blocks: [...] } structure\n      status: data.status,\n      slug: data.slug\n    });\n    // Simple hash function\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash;\n    }\n    return hash.toString();\n  };\n  \n  const handleSave = async (publish = false): Promise<string | undefined> => {\n    // Prevent double-clicking and concurrent saves\n    if (isSaving) {\n      toast('Save already in progress', { icon: '⏳' });\n      return;\n    }\n    \n    // isSaving flag prevents duplicate saves\n    \n    // Cancel any in-flight request\n    if (saveRequestRef.current) {\n      saveRequestRef.current.abort();\n      saveRequestRef.current = null;\n    }\n    \n    // Client-side validation\n    // Use refs to get latest values and avoid stale closure\n    const currentBlocks = blocksRef.current;\n    const currentSettings = postSettingsRef.current;\n    \n    const trimmedTitle = postTitle?.trim() || '';\n    let trimmedSlug = currentSettings.slug?.trim() || '';\n    \n    // Auto-generate slug from title if empty (for non-Korean titles)\n    // Only for new posts, not updates\n    if (!trimmedSlug && trimmedTitle && !currentPostId) {\n      // Check if title contains Korean characters\n      const hasKorean = /[\\u3131-\\uD79D]/.test(trimmedTitle);\n      if (!hasKorean) {\n        // Auto-generate slug for English titles\n        trimmedSlug = trimmedTitle\n          .toLowerCase()\n          .replace(/\\s+/g, '-')\n          .replace(/[^a-z0-9-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-|-$/g, '');\n      }\n    }\n    \n    const hasContent = currentBlocks && currentBlocks.length > 0 && currentBlocks.some(block => {\n      const content = block.content;\n      if (typeof content === 'string') return content.trim().length > 0;\n      if (content?.text && typeof content.text === 'string') return content.text.trim().length > 0;\n      if (content?.url) return true; // Image blocks\n      return false;\n    });\n    \n    // Title validation - Title is required\n    if (!trimmedTitle) {\n      toast.error('⚠️ 제목을 입력해주세요. 제목은 필수 항목입니다.', {\n        duration: 5000,\n        icon: '📝'\n      });\n      return;\n    }\n    \n    // DEBUG: Comprehensive slug debugging\n    // Logging removed for CI/CD\n    \n    // Slug validation - Required for all posts\n    if (!trimmedSlug) {\n      // Always require slug to be entered manually if it's empty\n      const errorMessage = '⚠️ Slug가 비어있습니다. 오른쪽 사이드바의 Permalink 필드에 영문 URL을 입력해주세요.';\n      \n      toast.error(errorMessage, {\n        duration: 5000,\n        icon: '🔗'\n      });\n      setPostSettings(prev => ({ ...prev, slugError: true }));\n      setSidebarOpen(true); // Open sidebar to show slug input\n      return;\n    }\n    \n    // Validate slug format\n    const slugPattern = /^[a-z0-9]+(?:-[a-z0-9]+)*$/;\n    if (!slugPattern.test(trimmedSlug)) {\n      toast.error('⚠️ 올바르지 않은 slug 형식입니다. 소문자, 숫자, 하이픈만 사용 가능합니다.', {\n        duration: 5000\n      });\n      setPostSettings(prev => ({ ...prev, slugError: true }));\n      setSidebarOpen(true);\n      return;\n    }\n    \n    setIsSaving(true);\n    \n    // Create new abort controller for this request\n    saveRequestRef.current = new AbortController();\n    \n    try {\n      // Don't use default title - let backend handle empty titles\n      \n      // Prepare base data for both create and update\n      // Use refs for latest state values\n      const contentType = mode === 'page' ? 'page' : 'post';\n      const baseData = {\n        title: trimmedTitle,  // Use validated trimmed title\n        content: JSON.stringify(currentBlocks),  // Serialize blocks array to string\n        excerpt: currentSettings.excerpt,\n        slug: trimmedSlug,  // Use the validated/trimmed slug\n        status: publish ? 'publish' : (currentSettings.status || 'draft'),\n        type: contentType,  // Explicitly set type based on mode\n        categories: currentSettings.categories,\n        tags: currentSettings.tags,\n        featured: false,\n        sticky: currentSettings.sticky,\n        featuredImage: currentSettings.featuredImage,\n        format: currentSettings.format,\n        allowComments: currentSettings.commentStatus\n      };\n      \n      // Debug info removed - Pages type issue resolved in backend\n      \n      // Check if this is a duplicate save (same content)\n      const saveHash = generateSaveHash(baseData);\n      if (lastSaveHashRef.current === saveHash && !isDirty) {\n        setIsSaving(false);\n        toast('No changes to save', { icon: 'ℹ️' });\n        return currentPostId != null ? String(currentPostId) : undefined;\n      }\n      \n      // Add unique request ID to prevent duplicate processing\n      const requestId = `${Date.now()}-${Math.random()}`;\n      const requestData = { ...baseData, _requestId: requestId };\n      \n      // Call appropriate API method based on whether we have a post ID\n      const response = currentPostId \n        ? await postApi.update({ ...requestData, id: String(currentPostId) }) // Update existing post\n        : await postApi.create(requestData);\n      \n      if (!response.success) {\n        throw new Error(response.error || 'Failed to save');\n      }\n      \n      const savedData = response.data;\n      \n      // Invalidate posts queries to refresh lists\n      queryClient.invalidateQueries({ queryKey: ['posts'] });\n      queryClient.invalidateQueries({ queryKey: ['posts-counts'] });\n      \n      // If it's a new post and we get an ID back, update the URL and state\n      if (!currentPostId && savedData?.id) {\n        setCurrentPostId(savedData.id);  // Update internal state\n        navigate(`/editor/${mode}s/${savedData.id}`, { replace: true });\n        // Don't return here - continue with the rest of the save logic\n      }\n      \n      // Update post settings with saved data\n      // Only update slug if it's different from what we sent (server might have modified it)\n      if (savedData?.slug && savedData.slug !== trimmedSlug) {\n        setPostSettings(prev => ({ ...prev, slug: String(savedData.slug) }));\n        postSettingsRef.current = { ...postSettingsRef.current, slug: savedData.slug };\n      }\n      \n      setLastSaved(new Date());\n      setIsDirty(false);\n      lastSaveHashRef.current = saveHash; // Remember last saved content hash\n      \n      if (publish) {\n        setPostSettings(prev => ({ ...prev, status: 'publish' }));\n        toast.success('Published successfully!');\n      } else {\n        toast.success('Saved as draft');\n      }\n      \n          // Return the saved post ID for use in preview\n          const savedId = savedData?.id != null ? String(savedData.id) : undefined;\n          return savedId || (currentPostId != null ? String(currentPostId) : undefined);\n    } catch (error: any) {\n      // Show specific conflict/validation messages when possible\n      const status = error?.response?.status;\n      const errorMessage = error?.response?.data?.error?.message;\n      \n      if (import.meta.env.DEV) {\n        // Save error occurred\n      }\n      \n      const errorCode = error.response?.data?.error || error.response?.data?.error?.code;\n      const errorDetails = error.response?.data?.details;\n      \n      if (errorCode === 'INVALID_SLUG' || errorCode === 'INVALID_SLUG_FORMAT') {\n        toast.error('❌ Slug 에러: ' + (errorDetails || 'Invalid slug format. Use only lowercase letters, numbers, and hyphens'));\n        setPostSettings(prev => ({ ...prev, slugError: true }));\n        setSidebarOpen(true); // Open sidebar to show the error\n      } else if (errorCode === 'SLUG_REQUIRED' || errorCode === 'SLUG_GENERATION_FAILED') {\n        toast.error('❌ Slug 생성 실패: 한글 제목은 수동으로 slug를 입력해야 합니다');\n        setPostSettings(prev => ({ ...prev, slugError: true }));\n        setSidebarOpen(true); // Open sidebar to let user input slug\n      } else if (errorCode === 'DUPLICATE_SLUG' || status === 409) {\n        toast.error('❌ 중복된 slug: 이미 사용 중인 slug입니다. 다른 slug를 입력해주세요');\n        setPostSettings(prev => ({ ...prev, slugError: true }));\n        setSidebarOpen(true);\n      } else if (status === 400) {\n        // Validation error from API\n        const message = error.response?.data?.message || errorMessage || '제목이나 내용 중 하나는 입력해야 합니다';\n        toast.error('❌ 유효성 검사 실패: ' + message);\n      } else if (status === 422) {\n        toast.error('Validation failed. Please check required fields.');\n      } else {\n        toast.error(error?.message || 'Failed to save');\n      }\n      return undefined;\n    } finally {\n      setIsSaving(false);\n      saveRequestRef.current = null;\n    }\n  };\n\n  const handlePublish = async () => {\n    await handleSave(true);\n  };\n\n  const handlePreview = async () => {\n    let postIdToPreview = currentPostId;\n    \n    // Save draft first if needed\n    if (isDirty || !currentPostId) {\n      toast('Saving draft for preview...', { icon: '💾' });\n      const savedId = await handleSave(false);\n      if (savedId) {\n        postIdToPreview = savedId;\n      } else {\n        toast.error('Failed to save. Cannot preview.');\n        return;\n      }\n    }\n    \n    // Open preview with the correct ID\n    if (postIdToPreview) {\n      window.open(`/preview/posts/${postIdToPreview}`, '_blank');\n    }\n  };\n\n  const handleBack = () => {\n    if (isDirty) {\n      if (confirm('You have unsaved changes. Are you sure you want to leave?')) {\n        navigate(-1);\n      }\n    } else {\n      navigate(-1);\n    }\n  };\n\n  const handleSelectTemplate = (template: any) => {\n    setBlocks(template.blocks);\n    blocksRef.current = template.blocks; // Update ref\n    setShowTemplates(false);\n    setIsDirty(true);\n  };\n\n  const handleSelectPattern = (pattern: any) => {\n    const newBlocks = [...blocksRef.current, ...pattern.blocks];\n    setBlocks(newBlocks);\n    blocksRef.current = newBlocks; // Update ref\n    setShowTemplates(false);\n    setIsDirty(true);\n  };\n\n  const handleMediaSelect = (media: any) => {\n    // Handle both single item and array\n    const items = Array.isArray(media) ? media : [media];\n    \n    if (items.length > 0 && selectedBlock) {\n      const updatedBlock = {\n        ...selectedBlock,\n        content: {\n          ...selectedBlock.content,\n          url: items[0].url,\n          alt: items[0].alt\n        }\n      };\n      \n      setBlocks(blocks.map(block => \n        block.id === selectedBlock.id ? updatedBlock : block\n      ));\n      setIsDirty(true);\n    }\n    setShowMediaLibrary(false);\n  };\n\n  // Get mode label\n  const getModeLabel = () => {\n    switch (mode) {\n      case 'page': return 'Page';\n      case 'template': return 'Template';\n      case 'pattern': return 'Pattern';\n      default: return 'Post';\n    }\n  };\n\n  if (!isWordPressReady) {\n    return (\n      <div className=\"h-screen flex items-center justify-center bg-white\">\n        <div className=\"text-center\">\n          <div className=\"w-8 h-8 border-4 border-gray-300 border-t-blue-600 rounded-full animate-spin mb-4 mx-auto\" />\n          <p className=\"text-gray-600\">Initializing editor...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={containerRef}\n      className=\"h-screen flex flex-col bg-white\"\n    >\n      {/* Development Debug Bar */}\n      {import.meta.env.DEV && (\n        <div className=\"bg-gray-800 text-gray-200 text-xs px-2 py-1 flex gap-3 font-mono\">\n          <span className=\"text-blue-400\">ID: {currentPostId || 'new'}</span>\n          <span className=\"text-green-400\">Mode: {mode}</span>\n          <span className=\"text-yellow-400\">Title: {postTitle ? `\"${postTitle.substring(0, 20)}...\"` : 'empty'}</span>\n          <span className=\"text-purple-400\">Blocks: {blocks.length}</span>\n          {isDirty && <span className=\"text-red-400\">• unsaved</span>}\n        </div>\n      )}\n      \n      {/* Editor Header */}\n      <div className={cn(\n        \"bg-white border-b flex items-center justify-between\",\n        isMobile ? \"px-2 py-2\" : \"px-3 py-2\"\n      )}>\n        <div className={cn(\n          \"flex items-center\",\n          isMobile ? \"gap-1 flex-1\" : \"gap-2\"\n        )}>\n          {/* Back to Admin */}\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className={isMobile ? \"h-8 w-8\" : \"h-9 w-9\"}\n                  onClick={handleBack}\n                >\n                  <ArrowLeft className={isMobile ? \"h-4 w-4\" : \"h-5 w-5\"} />\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>\n                <p>Back to dashboard</p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n\n          {/* WordPress Logo - 모바일에서 숨김 */}\n          {!isMobile && (\n            <div className=\"w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-700 rounded flex items-center justify-center\">\n              <span className=\"text-white font-bold text-sm\">W</span>\n            </div>\n          )}\n\n          {/* Title Input - Hidden because GutenbergBlockEditor has its own title field */}\n          <div className=\"flex-1 max-w-2xl\" style={{ display: 'none' }}>\n            <input\n              type=\"text\"\n              placeholder=\"\"\n              value={postTitle || ''}\n              onChange={(e) => {\n                setPostTitle(e.target.value);\n                setIsDirty(true);\n              }}\n              className={cn(\n                \"w-full px-2 py-1 font-semibold border-0 outline-none focus:ring-0 placeholder-gray-400 text-gray-900\",\n                isMobile ? \"text-base\" : \"text-xl\"\n              )}\n            />\n          </div>\n\n          {/* Status Badge - 모바일에서 숨김 */}\n          {!isMobile && (\n            <Badge \n              variant={postSettings.status === 'publish' ? 'default' : 'secondary'}\n              className=\"capitalize\"\n            >\n              {postSettings.status}\n            </Badge>\n          )}\n          \n          {/* Saved Indicator - 모바일에서 숨김 */}\n          {!isMobile && lastSaved && (\n            <span className=\"text-sm text-gray-500\">\n              Saved {lastSaved.toLocaleTimeString()}\n            </span>\n          )}\n          {!isMobile && isDirty && !isSaving && (\n            <span className=\"text-sm text-orange-500\">Unsaved changes</span>\n          )}\n        </div>\n        \n        {/* Right Actions */}\n        <div className={cn(\n          \"flex items-center\",\n          isMobile ? \"gap-0\" : \"gap-1\"\n        )}>\n          {/* Undo/Redo - 모바일에서 숨김 */}\n          {!isMobile && (\n            <div className=\"flex items-center mr-2\">\n              <TooltipProvider>\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <Button variant=\"ghost\" size=\"icon\" className=\"h-9 w-9\">\n                      <Undo2 className=\"h-4 w-4\" />\n                    </Button>\n                  </TooltipTrigger>\n                  <TooltipContent>\n                    <p>Undo</p>\n                  </TooltipContent>\n                </Tooltip>\n              </TooltipProvider>\n              \n              <TooltipProvider>\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <Button variant=\"ghost\" size=\"icon\" className=\"h-9 w-9\">\n                      <Redo2 className=\"h-4 w-4\" />\n                    </Button>\n                  </TooltipTrigger>\n                  <TooltipContent>\n                    <p>Redo</p>\n                  </TooltipContent>\n                </Tooltip>\n              </TooltipProvider>\n            </div>\n          )}\n\n\n          {/* View Options - 모바일에서 숨김 */}\n          {!isMobile && (\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-9 w-9\"\n                    onClick={() => setShowListView(!showListView)}\n                  >\n                    <List className=\"h-4 w-4\" />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p>List view</p>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          )}\n\n          {/* Preview Toggle - 모바일에서 숨김 */}\n          {!isMobile && (\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-9 w-9\"\n                    onClick={handlePreview}\n                  >\n                    <Eye className=\"h-4 w-4\" />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p>Preview</p>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          )}\n          \n          {/* Save Draft - 모바일에서 간소화 */}\n          {!isMobile ? (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => handleSave(false)}\n              disabled={isSaving || !isDirty}\n            >\n              {isSaving ? (\n                <>\n                  <div className=\"animate-spin h-3 w-3 border-2 border-gray-500 border-t-transparent rounded-full mr-2\" />\n                  Saving...\n                </>\n              ) : (\n                <>\n                  <Save className=\"h-3 w-3 mr-2\" />\n                  Save draft\n                </>\n              )}\n            </Button>\n          ) : (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-8 w-8\"\n              onClick={() => handleSave(false)}\n              disabled={isSaving || !isDirty}\n            >\n              {isSaving ? (\n                <div className=\"animate-spin h-4 w-4 border-2 border-gray-500 border-t-transparent rounded-full\" />\n              ) : (\n                <Save className=\"h-4 w-4\" />\n              )}\n            </Button>\n          )}\n          \n          {/* Publish/Update */}\n          <Button\n            size=\"sm\"\n            onClick={() => handleSave(true)}\n            disabled={isSaving}\n          >\n            {postSettings.status === 'publish' ? 'Update' : 'Publish'}\n          </Button>\n          \n          {/* Settings */}\n          <TooltipProvider>\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className={isMobile ? \"h-8 w-8\" : \"h-9 w-9\"}\n                  onClick={() => setSidebarOpen(!sidebarOpen)}\n                  disabled={!isPostDataLoaded && !isNewPost}\n                >\n                  {sidebarOpen ? (\n                    <X className=\"h-4 w-4\" />\n                  ) : (\n                    <Settings2 className=\"h-4 w-4\" />\n                  )}\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>\n                <p>{sidebarOpen ? 'Close settings' : 'Settings'}</p>\n              </TooltipContent>\n            </Tooltip>\n          </TooltipProvider>\n\n          {/* More Options */}\n          <DropdownMenu>\n            <DropdownMenuTrigger>\n              <Button variant=\"ghost\" size=\"icon\" className={isMobile ? \"h-8 w-8\" : \"h-9 w-9\"}>\n                <MoreVertical className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              {isMobile && (\n                <>\n                  <DropdownMenuItem onClick={handlePreview}>\n                    <Eye className=\"h-4 w-4 mr-2\" />Preview\n                  </DropdownMenuItem>\n                  <DropdownMenuSeparator />\n                </>\n              )}\n              <DropdownMenuItem onClick={() => setShowTemplates(true)}>\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add template\n              </DropdownMenuItem>\n              <DropdownMenuItem onClick={() => setShowMediaLibrary(true)}>\n                Add media\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n              <DropdownMenuItem>Copy all blocks</DropdownMenuItem>\n              <DropdownMenuItem>Export</DropdownMenuItem>\n              {!isMobile && (\n                <>\n                  <DropdownMenuSeparator />\n                  <DropdownMenuItem>\n                    <Info className=\"h-4 w-4 mr-2\" />\n                    Keyboard shortcuts\n                  </DropdownMenuItem>\n                </>\n              )}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        </div>\n      </div>\n      \n      {/* Main Content Area */}\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Editor Canvas */}\n        <div className={cn(\n          \"flex-1 overflow-auto bg-gray-50\"\n        )}>\n          <div className=\"min-h-full\">\n            <GutenbergBlockEditor\n              documentTitle={postTitle || ''}\n              initialBlocks={blocks}\n              slug={postSettings.slug || ''}\n              postSettings={postSettings}\n              onPostSettingsChange={(settings) => {\n                setPostSettings(prev => ({ ...prev, ...settings }));\n                postSettingsRef.current = { ...postSettingsRef.current, ...settings }; // Update ref\n                setIsDirty(true);\n              }}\n              onTitleChange={(newTitle) => {\n                setPostTitle(newTitle);\n                setIsDirty(true);\n              }}\n              onChange={(newBlocks) => {\n                setBlocks(newBlocks);\n                blocksRef.current = newBlocks; // Update ref\n                // Only mark as dirty if we have actual content changes, not just initialization\n                // Check if this is not just an empty paragraph block (default initialization)\n                const hasRealContent = newBlocks.some(block => {\n                  if (block.type === 'core/paragraph') {\n                    const text = block.content?.text || block.content || '';\n                    return typeof text === 'string' && text.trim().length > 0;\n                  }\n                  return true; // Other block types are considered real content\n                });\n                \n                // Only mark dirty if we have a post ID or real content\n                if (currentPostId || hasRealContent) {\n                  setIsDirty(true);\n                }\n              }}\n              onSave={handleSave}\n              onPublish={handlePublish}\n            />\n          </div>\n        </div>\n        \n        {/* Settings Sidebar */}\n        {sidebarOpen && (\n          <div className={cn(\n            \"bg-white border-l overflow-y-auto editor-transition\",\n            \"editor-sidebar-enter\",\n            isMobile ? \"fixed inset-0 z-50 w-full\" : \"w-80\"\n          )}>\n            {/* 모바일 헤더 */}\n            {isMobile && (\n              <div className=\"flex items-center justify-between p-3 border-b\">\n                <h2 className=\"font-semibold\">Settings</h2>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"h-8 w-8\"\n                  onClick={() => setSidebarOpen(false)}\n                >\n                  <X className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            )}\n            <GutenbergSidebar\n              activeTab={activeTab}\n              postSettings={postSettings}\n              blockSettings={selectedBlock}\n              onPostSettingsChange={(settings: any) => {\n                \n                // Clear slug error when slug is changed\n                if (settings.slug !== undefined && postSettings.slugError) {\n                  settings.slugError = false;\n                }\n                setPostSettings(prev => {\n                  const newSettings = { ...prev, ...settings };\n                  \n                  \n                  // Update ref\n                  postSettingsRef.current = newSettings;\n                  \n                  return newSettings;\n                });\n                setIsDirty(true);\n              }}\n              onBlockSettingsChange={(settings: any) => {\n                if (selectedBlock) {\n                  const updated = { ...selectedBlock, ...settings };\n                  const newBlocks = blocks.map(block => \n                    block.id === selectedBlock.id ? updated : block\n                  );\n                  setBlocks(newBlocks);\n                  blocksRef.current = newBlocks; // Update ref\n                  setSelectedBlock(updated);\n                  setIsDirty(true);\n                }\n              }}\n              onClose={() => setSidebarOpen(false)}\n            />\n          </div>\n        )}\n      </div>\n      \n      {/* Media Library Modal */}\n      <Dialog open={showMediaLibrary} onOpenChange={setShowMediaLibrary}>\n        <DialogContent className=\"max-w-6xl h-[80vh] p-0\">\n          <MediaListWordPress />\n        </DialogContent>\n      </Dialog>\n      \n      {/* Templates Modal */}\n      <Dialog open={showTemplates} onOpenChange={setShowTemplates}>\n        <DialogContent className=\"max-w-6xl h-[80vh] p-0\">\n          <ContentTemplates\n            onSelectTemplate={handleSelectTemplate}\n            onSelectPattern={handleSelectPattern}\n          />\n        </DialogContent>\n      </Dialog>\n\n      {/* AI Generator Modal */}\n      <AIPageGeneratorModal\n        isOpen={showAIGenerator}\n        onClose={() => setShowAIGenerator(false)}\n        onGenerate={(generatedBlocks) => {\n          // Replace existing blocks with AI generated blocks (or merge if preferred)\n          setBlocks(generatedBlocks);\n          blocksRef.current = generatedBlocks;\n          setIsDirty(true);\n          toast.success('AI 페이지가 성공적으로 생성되었습니다!');\n        }}\n      />\n    </div>\n  );\n};\n\nexport default StandaloneEditor;\n","import { FC, useMemo } from 'react';\nimport { useParams, useLocation } from 'react-router-dom';\nimport StandaloneEditor from './StandaloneEditor';\n\ninterface EditorRouteWrapperProps {\n  mode?: 'post' | 'page' | 'template' | 'pattern';\n}\n\n/**\n * EditorRouteWrapper - Forces StandaloneEditor remount on route changes\n * \n * Ensures clean state initialization when switching between new/edit modes\n * by using a unique key that changes with route parameters\n */\nconst EditorRouteWrapper: FC<EditorRouteWrapperProps> = ({ mode = 'post' }) => {\n  const { id } = useParams<{ id?: string }>();\n  const location = useLocation();\n  \n  // Generate unique key for component remounting\n  const componentKey = useMemo(\n    () => id ? `${mode}-${id}` : `${mode}-new-${location.key}`,\n    [mode, id, location.key]\n  );\n  \n  return (\n    <StandaloneEditor \n      key={componentKey}\n      mode={mode}\n      postId={id}\n    />\n  );\n};\n\nexport default EditorRouteWrapper;","import { Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider, AdminProtectedRoute, SessionManager } from '@o4o/auth-context';\nimport { AuthClient } from '@o4o/auth-client';\nimport toast from 'react-hot-toast';\nimport { useEffect, Suspense, lazy } from 'react';\nimport ErrorBoundary from '@/components/ErrorBoundary';\nimport { ThemeProvider } from '@/contexts/ThemeContext';\nimport { useAuthStore } from '@/stores/authStore';\nimport '@/styles/wordpress-theme.css';\nimport '@/styles/wordpress-sidebar.css';\nimport '@/styles/admin-layout-fixed.css';\n\n// Register Dynamic Shortcodes\nimport '@/utils/register-dynamic-shortcodes';\n\n// AI Config Migration - Fix old gemini-pro references\nimport '@/utils/aiMigration';\n\n// Layout Components\nimport AdminLayout from '@/components/layout/AdminLayout';\nimport EditorLayout from '@/layouts/EditorLayout';\nimport InitialRedirect from '@/components/InitialRedirect';\n\n// Import EditorRouteWrapper to handle route-based remounting\nimport EditorRouteWrapper from '@/pages/editor/EditorRouteWrapper';\n\n// Page Components - Lazy loaded\nconst Login = lazy(() => import('@/pages/auth/Login'));\nconst ForgotPassword = lazy(() => import('@/pages/auth/ForgotPassword'));\nconst ResetPassword = lazy(() => import('@/pages/auth/ResetPassword'));\nconst AdminHome = lazy(() => import('@/pages/AdminHome'));\nconst WordPressDashboard = lazy(() => import('@/pages/WordPressDashboard'));\nconst DashboardSimple = lazy(() => import('@/pages/dashboard/DashboardSimple'));\nconst UsersPage = lazy(() => import('@/pages/users'));\nconst UserForm = lazy(() => import('@/pages/users/UserForm'));\nconst UserDetail = lazy(() => import('@/pages/users/UserDetail'));\nconst RoleManagement = lazy(() => import('@/pages/users/RoleManagement'));\nconst UserStatistics = lazy(() => import('@/pages/users/UserStatistics'));\n// const Content = lazy(() => import(/* webpackChunkName: \"content\" */ '@/pages/content/Content')); // Removed - replaced by CPT Engine\n// const SettlementDashboard = lazy(() => import('@/pages/ecommerce/SettlementDashboard'));\n// const SettlementReports = lazy(() => import('@/pages/ecommerce/SettlementReports'));\nconst Analytics = lazy(() => import('@/pages/analytics/Analytics'));\nconst Settings = lazy(() => import('@/pages/settings/Settings'));\nconst MailManagement = lazy(() => import('@/pages/mail/MailManagement'));\nconst PagesRouter = lazy(() => import('@/pages/pages/PagesRouter'));\nconst Media = lazy(() => import('@/pages/media/Media'));\nconst CustomFields = lazy(() => import('@/pages/custom-fields/CustomFields'));\n// const ReusableBlocksPage = lazy(() => \n//   import(/* webpackChunkName: \"reusable-blocks\" */ '@/pages/content/ReusableBlocksPage')\n// ); // Removed - content directory deleted\nconst Posts = lazy(() => import('@/pages/posts/Posts'));\nconst Categories = lazy(() => import('@/pages/posts/Categories'));\nconst Tags = lazy(() => import('@/pages/posts/Tags'));\nconst PostPreview = lazy(() => import('@/pages/preview/PostPreview'));\n// const Shortcodes = lazy(() => import('@/pages/documentation/Shortcodes'));\nconst Menus = lazy(() => import('@/pages/menus/Menus'));\n// const TestPage = lazy(() => import('@/pages/test/TestPage')); // Removed test page\n// const SystemMonitoring = lazy(() => import('@/pages/monitoring/SystemMonitoring'));\n\n// Appearance Pages\nconst TemplateParts = lazy(() => import('@/pages/appearance/TemplateParts'));\nconst TemplatePartEditor = lazy(() => import(/* webpackChunkName: \"template-editor\" */ '@/pages/appearance/TemplatePartEditor'));\nconst IntegratedMonitoring = lazy(() => import('@/pages/monitoring/IntegratedMonitoring'));\nconst PerformanceDashboard = lazy(() => import('@/pages/monitoring/PerformanceDashboard'));\n// const WidgetManager = lazy(() => import('@/pages/content/WidgetManager')); // Loaded via Content router\n\n\n// Affiliate Management Pages\n\n// Forum Pages\nconst ForumRouter = lazy(() => import('@/pages/forum/ForumRouter'));\n\n// Digital Signage Pages\nconst SignageRouter = lazy(() => import('@/pages/signage/SignageRouter'));\n\n// Crowdfunding Pages\nconst CrowdfundingRouter = lazy(() => import('@/pages/crowdfunding/CrowdfundingRouter'));\n\n// App Pages\nconst ToolsPage = lazy(() => import('@/pages/ToolsPage'));\n\n\n// UI Showcase\nconst UIShowcase = lazy(() => import('@/pages/UIShowcase'));\n\n// CPT Engine\nconst CPTEngine = lazy(() => import('@/pages/cpt-engine'));\n\n// Dropshipping Pages\nconst DropshippingRouter = lazy(() => import('@/pages/dropshipping'));\n// const GutenbergPage = lazy(() => \n//   import(/* webpackChunkName: \"gutenberg\" */ '@/pages/test/GutenbergPageWrapped')\n// );\n// Test pages removed for production\n// const LoopBlockTest = lazy(() => import('@/pages/test/LoopBlockTest'));\n// const ParagraphTestDemo = lazy(() => import('@/components/editor/blocks/test/ParagraphTestDemo'));\n// const ParagraphTestDirect = lazy(() => import('@/pages/test/ParagraphTestDirect'));\n\n// Removed Apps Manager - using WordPress style menu\n\n// Appearance Pages (WordPress Style)\nconst Customize = lazy(() => import('@/pages/appearance/Customize'));\n\n// Shortcode Management - REMOVED\n\n// Loading component\nconst PageLoader = () => (\n  <div className=\"flex items-center justify-center h-screen\">\n    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-admin-blue\"></div>\n  </div>\n);\n\n// SSO 클라이언트 인스턴스 생성\nconst ssoClient = new AuthClient(\n  import.meta.env.VITE_API_URL || 'https://api.neture.co.kr'\n);\n\n/**\n * 관리자 대시보드 메인 앱\n * SSO 인증 시스템 통합\n */\nfunction App() {\n  const checkSSOSession = useAuthStore(state => state.checkSSOSession);\n  \n  // Initialize SSO on app start\n  useEffect(() => {\n    // 앱 시작 시 즉시 토큰 복원 시도\n    const initializeAuth = async () => {\n      try {\n        // 먼저 저장된 인증 정보로 상태 복원\n        await checkSSOSession();\n      } catch (error) {\n        // SSO session check failed - clear local storage only if it's a 401 error\n        if ((error as any)?.response?.status === 401) {\n          localStorage.removeItem('admin-auth-storage');\n          localStorage.removeItem('authToken');\n          localStorage.removeItem('accessToken');\n        }\n      }\n    };\n\n    // 즉시 초기화 실행\n    initializeAuth();\n    \n    // SSO 세션 모니터링 비활성화 (SSO 엔드포인트가 구현되지 않음)\n    // TODO: SSO 엔드포인트 구현 후 활성화\n    // ssoService.startSessionCheck((isAuthenticated) => {\n    //   if (!isAuthenticated) {\n    //     toast.error('Session expired. Please log in again.');\n    //     checkSSOSession();\n    //   }\n    // });\n    \n    return () => {\n      // ssoService.stopSessionCheck();\n    };\n  }, [checkSSOSession]);\n  \n  // 인증 오류 처리\n  const handleAuthError = (error: string) => {\n    // Error logging - use proper error handler\n    \n    switch (error) {\n      case 'token_refresh_failed':\n        toast.error('세션이 만료되었습니다. 다시 로그인해 주세요.');\n        break;\n      case 'insufficient_permissions':\n        toast.error('관리자 권한이 필요합니다.');\n        break;\n      case 'account_locked':\n        toast.error('계정이 잠겨있습니다. 관리자에게 문의하세요.');\n        break;\n      default:\n        toast.error('인증 오류가 발생했습니다.');\n    }\n  };\n\n  // 세션 만료 경고 처리\n  const handleSessionExpiring = (remainingSeconds: number) => {\n    const minutes = Math.floor(remainingSeconds / 60);\n    toast(`${minutes}분 후 세션이 만료됩니다.`, {\n      icon: '⏰',\n      duration: 5000,\n    });\n  };\n\n  \n  return (\n    <ErrorBoundary>\n      <ThemeProvider>\n        <AuthProvider\n          ssoClient={ssoClient}\n          autoRefresh={true}\n          onAuthError={handleAuthError}\n          onSessionExpiring={handleSessionExpiring}\n        >\n          <SessionManager\n            warningBeforeExpiry={5 * 60 * 1000} // 5분 전 경고\n            onSessionExpiring={handleSessionExpiring}\n          >\n            <Routes>\n            {/* 공개 라우트 - 로그인 페이지 */}\n            <Route path=\"/login\" element={\n              <Suspense fallback={<PageLoader />}>\n                <Login />\n              </Suspense>\n            } />\n            \n            {/* 비밀번호 재설정 페이지 */}\n            <Route path=\"/forgot-password\" element={\n              <Suspense fallback={<PageLoader />}>\n                <ForgotPassword />\n              </Suspense>\n            } />\n            \n            <Route path=\"/reset-password\" element={\n              <Suspense fallback={<PageLoader />}>\n                <ResetPassword />\n              </Suspense>\n            } />\n            \n            {/* 루트 경로 - 인증 상태에 따라 리다이렉트 */}\n            <Route path=\"/\" element={<InitialRedirect />} />\n            \n            {/* 미리보기 페이지 - 인증 불필요 (sessionStorage 기반) */}\n            <Route path=\"/admin/preview\" element={\n              <Suspense fallback={<PageLoader />}>\n                <PostPreview />\n              </Suspense>\n            } />\n            \n            {/* 독립형 편집기 라우트 - 관리자 레이아웃 밖에서 실행 */}\n            <Route path=\"/editor/*\" element={\n              <AdminProtectedRoute \n                requiredRoles={['admin']}\n                requiredPermissions={['content:write']}\n              >\n                <EditorLayout>\n                  <Routes>\n                    <Route path=\"posts/new\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <EditorRouteWrapper mode=\"post\" />\n                      </Suspense>\n                    } />\n                    <Route path=\"posts/:id\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <EditorRouteWrapper mode=\"post\" />\n                      </Suspense>\n                    } />\n                    <Route path=\"pages/new\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <EditorRouteWrapper mode=\"page\" />\n                      </Suspense>\n                    } />\n                    <Route path=\"pages/:id\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <EditorRouteWrapper mode=\"page\" />\n                      </Suspense>\n                    } />\n                    <Route path=\"templates/:id\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <EditorRouteWrapper mode=\"template\" />\n                      </Suspense>\n                    } />\n                    <Route path=\"patterns/:id\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <EditorRouteWrapper mode=\"pattern\" />\n                      </Suspense>\n                    } />\n                  </Routes>\n                </EditorLayout>\n              </AdminProtectedRoute>\n            } />\n            \n            {/* Preview Routes */}\n            <Route path=\"/preview/posts/:id\" element={\n              <Suspense fallback={<PageLoader />}>\n                <PostPreview />\n              </Suspense>\n            } />\n            <Route path=\"/preview/pages/:id\" element={\n              <Suspense fallback={<PageLoader />}>\n                <PostPreview />\n              </Suspense>\n            } />\n            \n            {/* 보호된 관리자 라우트들 */}\n            <Route path=\"/*\" element={\n              <AdminProtectedRoute \n                requiredRoles={['admin']}\n                showContactAdmin={true}\n              >\n                <AdminLayout>\n                  <Routes>\n                    {/* WordPress 스타일 메인 대시보드 */}\n                    <Route path=\"/admin\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <WordPressDashboard />\n                      </Suspense>\n                    } />\n                    \n                    <Route path=\"/home\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <AdminHome />\n                      </Suspense>\n                    } />\n                    \n                    <Route path=\"/dashboard\" element={\n                      <Suspense fallback={<PageLoader />}>\n                        <DashboardSimple />\n                      </Suspense>\n                    } />\n                    \n                    {/* 사용자 관리 */}\n                    <Route path=\"/users\" element={\n                      <AdminProtectedRoute requiredPermissions={['users:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <UsersPage />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    <Route path=\"/users/add\" element={\n                      <AdminProtectedRoute requiredPermissions={['users:create']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <UserForm />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    <Route path=\"/users/new\" element={\n                      <AdminProtectedRoute requiredPermissions={['users:create']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <UserForm />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/users/profile\" element={\n                      <AdminProtectedRoute requiredPermissions={['users:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <UserDetail />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/users/roles\" element={\n                      <AdminProtectedRoute requiredPermissions={['users:update']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <RoleManagement />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    <Route path=\"/users/statistics\" element={\n                      <AdminProtectedRoute requiredPermissions={['users:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <UserStatistics />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    <Route path=\"/users/:id\" element={\n                      <AdminProtectedRoute requiredPermissions={['users:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <UserDetail />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    <Route path=\"/users/:id/edit\" element={\n                      <AdminProtectedRoute requiredPermissions={['users:update']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <UserForm />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 글 관리 */}\n                    <Route path=\"/posts\" element={\n                      <AdminProtectedRoute requiredPermissions={['content:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <Posts />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 카테고리 & 태그 */}\n                    <Route path=\"/posts/categories\" element={\n                      <AdminProtectedRoute requiredPermissions={['categories:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <Categories />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    <Route path=\"/posts/tags\" element={\n                      <AdminProtectedRoute requiredPermissions={['categories:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <Tags />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 페이지 관리 */}\n                    <Route path=\"/pages/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['pages:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <PagesRouter />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 재사용 블록 관리 */}\n                    <Route path=\"/reusable-blocks\" element={\n                      <AdminProtectedRoute requiredPermissions={['content:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <div>Reusable Blocks - Coming Soon</div>\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 외모 관리 (WordPress Style) */}\n                    <Route path=\"/customize\" element={\n                      <AdminProtectedRoute requiredPermissions={['templates:write']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <Customize />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/appearance/menus/*\" element={\n                      <AdminProtectedRoute requiredRoles={['admin']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <Menus />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    \n                    {/* Appearance - Template Parts */}\n                    <Route path=\"/appearance/template-parts\" element={\n                      <AdminProtectedRoute requiredPermissions={['templates:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <TemplateParts />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    <Route path=\"/appearance/template-parts/new\" element={\n                      <AdminProtectedRoute requiredPermissions={['templates:write']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <TemplatePartEditor />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    <Route path=\"/appearance/template-parts/:id/edit\" element={\n                      <AdminProtectedRoute requiredPermissions={['templates:write']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <TemplatePartEditor />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 미디어 관리 */}\n                    <Route path=\"/media/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['media:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <Media />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* E-commerce 관리 */}\n                    \n                    \n                    \n                    {/* 분석 */}\n                    <Route path=\"/analytics/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['analytics:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <Analytics />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    \n                    {/* CPT Engine - New Unified Dashboard */}\n                    <Route path=\"/cpt-engine/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['content:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <CPTEngine />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n\n                    {/* Dropshipping Routes */}\n                    <Route path=\"/dropshipping/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['content:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <DropshippingRouter />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* CPT & ACF - Legacy Routes - Removed (replaced by CPT Engine) */}\n                    \n                    <Route path=\"/acf/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['custom_fields:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <CustomFields />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/acf/groups\" element={\n                      <AdminProtectedRoute requiredPermissions={['custom_fields:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <CustomFields />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 메일 관리 */}\n                    <Route path=\"/mail/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['settings:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <MailManagement />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* Forum - App Guard 적용 */}\n                    <Route path=\"/forum/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['forum:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <ForumRouter />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* Digital Signage - App Guard 적용 */}\n                    <Route path=\"/signage/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['signage:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <SignageRouter />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* Crowdfunding - App Guard 적용 */}\n                    <Route path=\"/crowdfunding/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['crowdfunding:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <CrowdfundingRouter />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 도구 */}\n                    <Route path=\"/tools\" element={\n                      <AdminProtectedRoute requiredPermissions={['tools:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <ToolsPage />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 설정 */}\n                    <Route path=\"/settings/*\" element={\n                      <AdminProtectedRoute requiredPermissions={['settings:read']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <Settings />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* Test routes removed for production */}\n                    \n                    {/* Gutenberg Editor - Using Standalone Full Screen Editor */}\n                    <Route path=\"/gutenberg\" element={\n                      <AdminProtectedRoute requiredPermissions={['content:write']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <EditorRouteWrapper mode=\"post\" />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* UI Showcase */}\n                    <Route path=\"/ui-showcase\" element={\n                      <AdminProtectedRoute requiredPermissions={['admin']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <UIShowcase />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* System Monitoring */}\n                    <Route path=\"/monitoring\" element={\n                      <AdminProtectedRoute requiredPermissions={['admin']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <IntegratedMonitoring />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/monitoring/performance\" element={\n                      <AdminProtectedRoute requiredPermissions={['admin']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <PerformanceDashboard />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    <Route path=\"/monitoring/security\" element={\n                      <AdminProtectedRoute requiredPermissions={['admin']}>\n                        <Suspense fallback={<PageLoader />}>\n                          <IntegratedMonitoring />\n                        </Suspense>\n                      </AdminProtectedRoute>\n                    } />\n                    \n                    {/* 404 핸들링 */}\n                    <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n                  </Routes>\n                </AdminLayout>\n              </AdminProtectedRoute>\n            } />\n        </Routes>\n      </SessionManager>\n    </AuthProvider>\n    </ThemeProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n\n// Deployment trigger: 2025-08-21 20:45 UTC - Trigger after PM2 cleanup on webserver\n","import './react-shim'; // React 19 compatibility - MUST be first\nimport { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client'\nimport { BrowserRouter } from 'react-router-dom'\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query'\nimport { Toaster } from 'react-hot-toast'\nimport { initVersionCheck } from '@/utils/versionCheck'\nimport App from './App'\nimport './styles/globals.css'\n// WordPress styles will be loaded only when needed\n// import './styles/wordpress-dashboard.css'\nimport './styles/dashboard-simple.css'\nimport './styles/bulk-actions.css'\nimport './styles/quick-edit.css'\nimport './styles/help-tab.css'\nimport './styles/media-upload.css'\n// import './styles/ui-improvements.css' // Temporarily disabled to fix sidebar conflict\nimport './styles/wordpress-table-fix.css'\n// Toolset UI styles for CPT Engine\nimport './styles/toolset-ui.css'\n\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: (failureCount, error: any) => {\n        // Don't retry on 404 or 401 errors\n        if (error?.response?.status === 404 || error?.response?.status === 401) {\n          return false;\n        }\n        // Retry up to 1 time for other errors\n        return failureCount < 1;\n      },\n      refetchOnWindowFocus: false,\n      staleTime: 5 * 60 * 1000, // Consider data stale after 5 minutes\n      gcTime: 10 * 60 * 1000, // Keep cache for 10 minutes (gcTime replaced cacheTime in v5)\n    },\n    mutations: {\n      retry: false, // Don't retry mutations by default\n    },\n  },\n})\n\n// Initialize version checking\ninitVersionCheck();\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <BrowserRouter>\n        <App />\n        <Toaster position=\"top-center\" reverseOrder={false} />\n      </BrowserRouter>\n    </QueryClientProvider>\n  </StrictMode>,\n)"],"file":"assets/index-C0gS3Jf3.js"}