import{r as e,j as s,bD as t,ds as a,ck as i,bM as c,dr as r,ba as n,b4 as l,bK as o,bn as d,b1 as m,bN as x,b0 as h,dt as j,V as u}from"./vendor-react-BqkIXTmC.js";import{cF as p,cI as g,cG as f,cH as v,cQ as N,cR as y}from"./wp-misc-D0_U3Yh3.js";import{B as w,m as b}from"./page-template-editor-DmUXhR56.js";import{a as C}from"./api-S8GxkqGz.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-C5jzPyjL.js";import"./vendor-utils-C9jLuAcl.js";import"./wp-data-CsLR-lZb.js";import"./wp-block-editor-main-DEdKEcH7.js";import"./wp-block-editor-store-Cdz5rmmV.js";import"./wp-blocks-core-C_Umt3qd.js";import"./wp-core-skmJSxj5.js";import"./wp-i18n-DP14Ry5v.js";import"./wp-block-editor-utils-CmROb2t9.js";import"./wp-components-i3qvAB06.js";import"./wp-api-Dq90bqIA.js";const O=async()=>(await C.get("/v1/apps/states")).data.data,k=async(e,s)=>(await C.put(`/v1/apps/states/${e}`,{isActive:s})).data.data,P=[{id:"ecommerce",name:"전자상거래",description:"온라인 쇼핑몰 기능 - 상품 관리, 주문 처리, 결제 시스템",icon:s.jsx(l,{className:"w-6 h-6"}),status:"active",version:"2.0.0",author:"O4O Platform",category:"Sales",isCore:!0,features:["상품 관리","재고 관리","주문 처리","Toss Payments 결제"],settings:"/ecommerce/settings"},{id:"affiliate",name:"제휴 마케팅",description:"파트너 추천 프로그램 및 수수료 관리 시스템",icon:s.jsx(o,{className:"w-6 h-6"}),status:"inactive",version:"1.5.0",author:"O4O Platform",category:"Marketing",isCore:!1,features:["추천 링크 생성","수수료 추적","파트너 대시보드","실적 분석"],settings:"/affiliate/settings"},{id:"crowdfunding",name:"크라우드펀딩",description:"프로젝트 펀딩 및 후원 관리 플랫폼",icon:s.jsx(d,{className:"w-6 h-6"}),status:"active",version:"1.2.0",author:"O4O Platform",category:"Finance",isCore:!1,features:["프로젝트 관리","후원자 관리","리워드 시스템","펀딩 통계"],dependencies:["ecommerce"],settings:"/crowdfunding/settings"},{id:"forum",name:"포럼/커뮤니티",description:"사용자 커뮤니티 및 토론 게시판",icon:s.jsx(m,{className:"w-6 h-6"}),status:"active",version:"1.8.0",author:"O4O Platform",category:"Community",isCore:!1,features:["게시판 관리","사용자 등급","포인트 시스템","실시간 알림"],settings:"/forum/settings"},{id:"signage",name:"디지털 사이니지",description:"디지털 디스플레이 콘텐츠 관리 시스템",icon:s.jsx(x,{className:"w-6 h-6"}),status:"inactive",version:"1.0.0",author:"O4O Platform",category:"Media",isCore:!1,features:["콘텐츠 스케줄링","다중 디스플레이","실시간 업데이트","템플릿 관리"],settings:"/signage/settings"},{id:"cpt-acf",name:"CPT & ACF",description:"사용자 정의 게시물 타입 및 필드 관리",icon:s.jsx(h,{className:"w-6 h-6"}),status:"active",version:"1.3.0",author:"O4O Platform",category:"Content",isCore:!0,features:["커스텀 포스트 타입","커스텀 필드","메타 박스","분류 체계"],settings:"/content/custom-fields"},{id:"vendor",name:"벤더 관리",description:"다중 판매자 마켓플레이스 시스템",icon:s.jsx(j,{className:"w-6 h-6"}),status:"inactive",version:"1.1.0",author:"O4O Platform",category:"Sales",isCore:!1,features:["판매자 대시보드","수수료 정산","상품 승인","판매 통계"],dependencies:["ecommerce"],settings:"/vendors/settings"},{id:"security",name:"보안 관리",description:"시스템 보안 및 사용자 접근 제어",icon:s.jsx(c,{className:"w-6 h-6"}),status:"active",version:"2.1.0",author:"O4O Platform",category:"System",isCore:!0,features:["2단계 인증","IP 차단","활동 로그","권한 관리"],settings:"/settings/security"}],S=()=>{const[l,o]=e.useState(P),[d,m]=e.useState("all"),[x,h]=e.useState(""),[j,C]=e.useState(!1);e.useEffect(()=>{S()},[]);const S=async()=>{try{const e=await O();o(s=>s.map(s=>({...s,status:e[s.id]?"active":"inactive"})))}catch(e){}},$=l.filter(e=>{const s="all"===d||"active"===d&&"active"===e.status||"inactive"===d&&"inactive"===e.status||"core"===d&&e.isCore,t=e.name.toLowerCase().includes(x.toLowerCase())||e.description.toLowerCase().includes(x.toLowerCase());return s&&t}),L=$.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category].push(s),e),{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"앱 관리"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"O4O 플랫폼의 기능을 확장하는 앱들을 관리하세요"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(p,{children:s.jsx(g,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"전체 앱"}),s.jsx("p",{className:"text-2xl font-bold",children:l.length})]}),s.jsx(t,{className:"w-8 h-8 text-gray-400"})]})})}),s.jsx(p,{children:s.jsx(g,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"활성화된 앱"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:l.filter(e=>"active"===e.status).length})]}),s.jsx(a,{className:"w-8 h-8 text-green-400"})]})})}),s.jsx(p,{children:s.jsx(g,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"비활성화된 앱"}),s.jsx("p",{className:"text-2xl font-bold text-gray-500",children:l.filter(e=>"inactive"===e.status).length})]}),s.jsx(i,{className:"w-8 h-8 text-gray-400"})]})})}),s.jsx(p,{children:s.jsx(g,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"코어 앱"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600",children:l.filter(e=>e.isCore).length})]}),s.jsx(c,{className:"w-8 h-8 text-blue-400"})]})})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(w,{variant:"all"===d?"default":"outline",onClick:()=>m("all"),children:"전체"}),s.jsx(w,{variant:"active"===d?"default":"outline",onClick:()=>m("active"),children:"활성화"}),s.jsx(w,{variant:"inactive"===d?"default":"outline",onClick:()=>m("inactive"),children:"비활성화"}),s.jsx(w,{variant:"core"===d?"default":"outline",onClick:()=>m("core"),children:"코어 앱"})]}),s.jsx("input",{type:"text",placeholder:"앱 검색...",value:x,onChange:e=>h(e.target.value),className:"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Object.entries(L).map(([e,t])=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:e}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(e=>s.jsxs(p,{className:""+("inactive"===e.status?"opacity-60":""),children:[s.jsx(f,{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg "+("active"===e.status?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:e.icon}),s.jsxs("div",{children:[s.jsxs(v,{className:"text-lg flex items-center gap-2",children:[e.name,e.isCore&&s.jsx(N,{variant:"secondary",className:"text-xs",children:"Core"})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["v",e.version]})]})]}),s.jsx(b,{checked:"active"===e.status,onCheckedChange:()=>(async e=>{try{C(!0);const s=l.find(s=>s.id===e);if(!s)return;const t="active"===s.status?"inactive":"active",a="active"===t;if(a){const e=(s.dependencies||[]).filter(e=>"active"!==l.find(s=>s.id===e)?.status);if(e.length>0)return u.error(`먼저 다음 앱을 활성화해주세요: ${e.join(", ")}`),void C(!1)}if(!a){const s=l.filter(s=>s.dependencies?.includes(e)&&"active"===s.status);if(s.length>0)return u.error(`다음 앱이 이 앱에 의존합니다: ${s.map(e=>e.name).join(", ")}`),void C(!1)}await k(e,a),o(l.map(s=>s.id===e?{...s,status:t}:s)),u.success(`${s.name} 앱이 ${"active"===t?"활성화":"비활성화"}되었습니다.`)}catch(s){const e=s.response?.data?.message||"앱 상태 변경에 실패했습니다.";u.error(e)}finally{C(!1)}})(e.id),disabled:e.isCore&&"active"===e.status||j})]})}),s.jsxs(g,{className:"space-y-4",children:[s.jsx(y,{children:e.description}),e.features&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700",children:"주요 기능:"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.features.slice(0,3).map((e,t)=>s.jsx(N,{variant:"outline",className:"text-xs",children:e},t)),e.features.length>3&&s.jsxs(N,{variant:"outline",className:"text-xs",children:["+",e.features.length-3]})]})]}),e.dependencies&&s.jsxs("div",{className:"text-xs text-amber-600 flex items-center gap-1",children:[s.jsx(r,{className:"w-3 h-3"}),"의존성: ",e.dependencies.join(", ")]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["by ",e.author]}),"active"===e.status&&e.settings&&s.jsxs(w,{size:"sm",variant:"ghost",onClick:()=>window.location.href=e.settings||"#",children:[s.jsx(n,{className:"w-4 h-4 mr-1"}),"설정"]})]})]})]},e.id))})]},e)),0===$.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(t,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"해당하는 앱이 없습니다"})]})]})};export{S as default};
