import{C as $,j as e,M as D,P as I}from"./vendor-react-CPLvoCm3.js";import"./wp-block-editor-Dl58kgFV.js";import"./wp-i18n-CvFqmxct.js";import"./wp-core-DsNNoVDq.js";import"./wp-blocks-core-Bps80Ozc.js";import"./wp-misc-BM-YUiZN.js";import"./wp-data-CXbtpCh2.js";import"./wp-components-YCGeKRou.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-utils-D_7XgcHg.js";import"./wp-api-pXRzUPJ4.js";import"./vendor-monaco-cpVGocfO.js";const B=()=>{if(!window.wp?.blocks?.registerBlockType){console.warn("[Columns Block] WordPress blocks API not available yet");return}const{registerBlockType:k,createBlock:C}=window.wp.blocks,{InnerBlocks:d,useBlockProps:u,InspectorControls:x,BlockControls:w,BlockVerticalAlignmentToolbar:y}=window.wp.blockEditor,{PanelBody:f,RangeControl:b,SelectControl:h,ToggleControl:A,ToolbarGroup:S,ToolbarButton:v}=window.wp.components,{useSelect:P,useDispatch:M}=window.wp.data;k("o4o/columns",{title:"Columns",description:"Display content in multiple columns",category:"design",icon:$,supports:{align:["wide","full"],anchor:!0,html:!1,color:{background:!0,text:!0},spacing:{padding:!0,margin:!0}},attributes:{columns:{type:"number",default:2},verticalAlignment:{type:"string",default:void 0},isStackedOnMobile:{type:"boolean",default:!0},gap:{type:"number",default:20}},edit:function({attributes:i,setAttributes:o,clientId:n}){const{columns:l,verticalAlignment:c,isStackedOnMobile:a,gap:j}=i,{insertBlock:T,removeBlock:N}=M("core/block-editor"),p=P(t=>{const{getBlock:r}=t("core/block-editor");return r(n)?.innerBlocks||[]},[n]),g=t=>{const r=p.length;if(t>r)for(let s=r;s<t;s++){const E=C("o4o/column",{width:100/t});T(E,s,n,!1)}else if(t<r)for(let s=r-1;s>=t;s--)p[s]&&N(p[s].clientId,!1);p.slice(0,t).forEach(s=>{s.attributes.width=100/t}),o({columns:t})},O=u({className:`o4o-columns-block ${a?"stack-on-mobile":""}`,style:{display:"flex",gap:`${j}px`,alignItems:c==="center"?"center":c==="bottom"?"flex-end":"flex-start"}});return e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx(y,{onChange:t=>o({verticalAlignment:t}),value:c}),e.jsxs(S,{children:[e.jsx(v,{icon:D,title:"Remove column",onClick:()=>l>1&&g(l-1),disabled:l<=1}),e.jsx(v,{icon:I,title:"Add column",onClick:()=>l<6&&g(l+1),disabled:l>=6})]})]}),e.jsx(x,{children:e.jsxs(f,{title:"Columns Settings",initialOpen:!0,children:[e.jsx(b,{label:"Number of Columns",value:l,onChange:t=>t&&g(t),min:1,max:6,step:1}),e.jsx(b,{label:"Gap between columns",value:j,onChange:t=>o({gap:t||0}),min:0,max:100,step:5}),e.jsx(h,{label:"Vertical Alignment",value:c||"",options:[{label:"Default",value:""},{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"}],onChange:t=>o({verticalAlignment:t===""?void 0:t})}),e.jsx(A,{label:"Stack on Mobile",checked:a,onChange:t=>o({isStackedOnMobile:t}),disabled:!1,className:"",__nextHasNoMarginBottom:!1})]})}),e.jsx("div",{...O,children:e.jsx(d,{allowedBlocks:["o4o/column"],template:Array(l).fill(["o4o/column",{width:100/l}]),templateLock:!1,renderAppender:!1})})]})},save:({attributes:m})=>{const{verticalAlignment:i,isStackedOnMobile:o,gap:n}=m,l=u.save({className:`o4o-columns-block ${o?"stack-on-mobile":""}`,style:{display:"flex",gap:`${n}px`,alignItems:i==="center"?"center":i==="bottom"?"flex-end":"flex-start"}});return e.jsx("div",{...l,children:e.jsx(d.Content,{})})}}),k("o4o/column",{title:"Column",description:"A single column within a columns block",category:"design",parent:["o4o/columns"],supports:{reusable:!1,html:!1,color:{background:!0,text:!0},spacing:{padding:!0}},attributes:{width:{type:"number",default:void 0},verticalAlignment:{type:"string",default:void 0}},edit:function({attributes:i,setAttributes:o}){const{width:n,verticalAlignment:l}=i,c=u({className:"o4o-column-block",style:{flexBasis:n?`${n}%`:void 0,alignSelf:l==="center"?"center":l==="bottom"?"flex-end":l==="stretch"?"stretch":"flex-start"}});return e.jsxs(e.Fragment,{children:[e.jsx(x,{children:e.jsxs(f,{title:"Column Settings",initialOpen:!0,children:[e.jsx(b,{label:"Width (%)",value:n||0,onChange:a=>o({width:a}),min:10,max:100,step:1}),e.jsx(h,{label:"Vertical Alignment",value:l||"",options:[{label:"Default",value:""},{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"},{label:"Stretch",value:"stretch"}],onChange:a=>o({verticalAlignment:a===""?void 0:a})})]})}),e.jsx("div",{...c,children:e.jsx(d,{allowedBlocks:!0,renderAppender:d.ButtonBlockAppender})})]})},save:({attributes:m})=>{const{width:i,verticalAlignment:o}=m,n=u.save({className:"o4o-column-block",style:{flexBasis:i?`${i}%`:void 0,alignSelf:o==="center"?"center":o==="bottom"?"flex-end":o==="stretch"?"stretch":"flex-start"}});return e.jsx("div",{...n,children:e.jsx(d.Content,{})})}})};window.wp?.blocks?.registerBlockType?B():document.addEventListener("DOMContentLoaded",B);export{B as registerColumnsBlock};
