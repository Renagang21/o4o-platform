import{u as e,r as t,j as s,bK as r,bg as a,c_ as i,E as o,d4 as n,bN as l}from"./vendor-react-BQ6HOJoh.js";import{a as d}from"./vendor-query-LYSOqK5P.js";import{B as c,I as p,b as m}from"./page-template-editor-C7FodHrK.js";import{av as x,ao as j,ap as h,aq as u,at as w}from"./wp-misc-DS9m4_P2.js";import"./wp-block-editor-a11y-DrduSWFW.js";import"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-api-Buev8_QU.js";import"./wp-block-editor-utils-M5qXzE1L.js";import"./wp-block-editor-colors-D38h-Odz.js";import"./wp-blocks-core-6vwQKPfS.js";import"./wp-block-editor-clipboard-Dg0Y1gQ6.js";import"./wp-block-editor-store-B-g1aSix.js";import"./vendor-ui-CrFdsnXa.js";import"./wp-block-editor-dnd-BYoS8-II.js";import"./wp-block-editor-library-BpQvynjE.js";import"./wp-block-editor-menus-BTQ2wZ-f.js";import"./wp-block-editor-keyboard-CeHTtvP5.js";import"./wp-block-editor-typography-Bl_1REQP.js";import"./wp-block-editor-spacing-BD_2CpN7.js";import"./wp-block-editor-core-DL280tSA.js";import"./wp-block-editor-selection-CC4tJpUu.js";import"./wp-block-editor-formats-CLXkimOp.js";import"./wp-block-editor-inline-CpXpUhQU.js";import"./wp-block-editor-ui-B8YE_4QL.js";import"./wp-block-editor-transforms-jLcKa8Hv.js";import"./wp-block-editor-preview-iw2Xu1ib.js";import"./wp-block-editor-global-styles-CV5-K6QF.js";import"./wp-block-editor-borders-BH1devca.js";import"./wp-block-editor-patterns-BXdHo9lm.js";import"./wp-block-editor-navigation-BFSoKzg0.js";import"./wp-block-editor-media-Bg-JiQDT.js";import"./wp-api-BeoadipR.js";import"./wp-i18n-DGPtqsXY.js";import"./wp-core-Y-jV-nrZ.js";import"./vendor-monaco-BxJH8uUv.js";import"./wp-block-editor-upload-BLw1R9wP.js";import"./vendor-utils-D-spY-QM.js";import"./wp-block-editor-templates-o1_wAMb9.js";import"./wp-data-BmtL8k4r.js";import"./wp-components-CeQNCpMW.js";const y=()=>{const y=e(),[f,b]=t.useState(""),[v,g]=t.useState("all"),[N,k]=t.useState("all"),{data:C}=d({queryKey:["forum-categories"],queryFn:async()=>(await m.api.get("/v1/forum/categories")).data}),S=C?.data||[],{data:q,isLoading:$}=d({queryKey:["forum-posts",v,N,f],queryFn:async()=>{const e=new URLSearchParams;"all"!==v&&e.append("category",v),"all"!==N&&e.append("status",N),f&&e.append("search",f);return(await m.api.get(`/v1/forum/posts?${e.toString()}`)).data}}),D=q?.data||[],L=e=>{switch(e){case"published":return s.jsx(x,{children:"게시됨"});case"draft":return s.jsx(x,{variant:"secondary",children:"초안"});case"pending":return s.jsx(x,{variant:"outline",children:"검토 중"});case"reported":return s.jsx(x,{variant:"destructive",children:"신고됨"});default:return null}},A=e=>{const t=new Date(e),s=((new Date).getTime()-t.getTime())/36e5;if(s<1){return`${Math.floor(60*s)}분 전`}return s<24?`${Math.floor(s)}시간 전`:s<168?`${Math.floor(s/24)}일 전`:t.toLocaleDateString("ko-KR")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-modern-text-primary",children:"포럼 게시판"}),s.jsx("p",{className:"text-modern-text-secondary mt-1",children:"포럼 게시글을 관리하고 모더레이션하세요."})]}),s.jsxs(c,{onClick:()=>y("/forum/posts/new"),children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"새 게시글"]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-modern-text-tertiary w-5 h-5"}),s.jsx(p,{type:"text",placeholder:"제목, 내용, 작성자로 검색...",value:f,onChange:e=>b(e.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i,{className:"w-5 h-5 text-modern-text-secondary"}),s.jsxs("select",{value:v,onChange:e=>g(e.target.value),className:"px-4 py-2 border border-modern-border-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-modern-primary",children:[s.jsx("option",{value:"all",children:"모든 카테고리"}),S.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]}),s.jsxs("select",{value:N,onChange:e=>k(e.target.value),className:"px-4 py-2 border border-modern-border-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-modern-primary",children:[s.jsx("option",{value:"all",children:"모든 상태"}),s.jsx("option",{value:"published",children:"게시됨"}),s.jsx("option",{value:"draft",children:"초안"}),s.jsx("option",{value:"pending",children:"검토 중"}),s.jsx("option",{value:"reported",children:"신고됨"})]})]})]}),s.jsx("div",{className:"wp-card",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-modern-bg-tertiary border-b border-modern-border-primary",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"제목"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"카테고리"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"작성자"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"상태"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider text-center",children:"통계"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"작성일"}),s.jsx("th",{className:"relative px-6 py-3",children:s.jsx("span",{className:"sr-only",children:"Actions"})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-modern-border-primary",children:$?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-modern-primary"})})})}):0===D.length?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-modern-text-secondary",children:"게시글이 없습니다."})}):D.map(e=>s.jsxs("tr",{className:"hover:bg-modern-bg-hover",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[e.isPinned&&s.jsx(x,{variant:"secondary",className:"text-xs",children:"고정"}),e.isLocked&&s.jsx(x,{variant:"outline",className:"text-xs",children:"잠김"}),s.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),y(`/forum/posts/${e.id}`)},className:"text-sm font-medium text-modern-text-primary hover:text-modern-primary",children:e.title})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(x,{variant:"outline",children:e.category.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-modern-primary text-white rounded-full flex items-center justify-center text-xs font-medium",children:e.author.name.charAt(0)}),s.jsx("span",{className:"text-sm text-modern-text-primary",children:e.author.name})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L(e.status)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-modern-text-secondary",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(o,{className:"w-4 h-4"}),s.jsx("span",{children:e.views})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(n,{className:"w-4 h-4"}),s.jsx("span",{children:e.replyCount})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-modern-text-secondary",children:A(e.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs(j,{children:[s.jsx(h,{children:s.jsx(c,{variant:"ghost",size:"sm",children:s.jsx(l,{className:"w-4 h-4"})})}),s.jsxs(u,{align:"end",children:[s.jsx(w,{onClick:()=>y(`/forum/posts/${e.id}`),children:"보기"}),s.jsx(w,{onClick:()=>y(`/forum/posts/${e.id}/edit`),children:"수정"}),!e.isPinned&&s.jsx(w,{children:"고정하기"}),!e.isLocked&&s.jsx(w,{children:"잠금"}),s.jsx(w,{className:"text-destructive",children:"삭제"})]})]})})]},e.id))})]})})})]})};export{y as default};
