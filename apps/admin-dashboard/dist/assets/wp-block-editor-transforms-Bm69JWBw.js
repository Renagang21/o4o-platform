import{a as e,c as o}from"./wp-i18n-D6_Il8Rt.js";import{B as t,u as r,a as s,V as n}from"./wp-block-editor-misc-De1L5-zR.js";import{w as a,g as i,c as l,a as c}from"./wp-blocks-core-NinAvWTg.js";import{P as m,B as p}from"./wp-block-editor-preview-CaF7fUZD.js";import{b as u}from"./wp-block-editor-a11y-YlMsb8JF.js";import{r as d,j as b}from"./vendor-react-DqgGMt48.js";import{MenuGroup as f,MenuItem as k,Popover as g,Composite as h,VisuallyHidden as x,ToolbarGroup as j,ToolbarButton as v,__experimentalToggleGroupControl as w,__experimentalToggleGroupControlOptionIcon as T}from"./wp-components-BJYLMD7r.js";import{ak as _,al as N}from"./wp-block-editor-utils-Bqn4TiQr.js";import{b3 as S,ba as B,bG as C,bH as y,bw as I,bi as G,bI as U,bJ as H,bK as D}from"./wp-misc-CVe7ECV4.js";import{g as M,l as z}from"./wp-core-kvRrOm9B.js";import{s as P}from"./wp-block-editor-store-BZ6fZn58.js";import{c as R}from"./vendor-ui-CrFdsnXa.js";const V=({className:o,possibleBlockTransformations:t,possibleBlockVariationTransformations:r,onSelect:s,onSelectVariation:n,blocks:i})=>{const[l,c]=d.useState(),{priorityTextTransformations:p,restTransformations:k}=function(e){const o={"core/paragraph":1,"core/heading":2,"core/list":3,"core/quote":4},t=d.useMemo(()=>{const t=Object.keys(o),r=e.reduce((e,o)=>{const{name:r}=o;return t.includes(r)?e.priorityTextTransformations.push(o):e.restTransformations.push(o),e},{priorityTextTransformations:[],restTransformations:[]});if(1===r.priorityTextTransformations.length&&"core/quote"===r.priorityTextTransformations[0].name){const e=r.priorityTextTransformations.pop();r.restTransformations.push(e)}return r},[e]);return t.priorityTextTransformations.sort(({name:e},{name:t})=>o[e]<o[t]?-1:1),t}(t),g=p.length&&k.length,h=!!k.length&&b.jsx($,{restTransformations:k,onSelect:s,setHoveredTransformItemName:c});return b.jsxs(b.Fragment,{children:[b.jsxs(f,{label:e("Transform to"),className:o,children:[l&&b.jsx(m,{blocks:a(i,l)}),!!r?.length&&b.jsx(u,{transformations:r,blocks:i,onSelect:n}),p.map(e=>b.jsx(L,{item:e,onSelect:s,setHoveredTransformItemName:c},e.name)),!g&&h]}),!!g&&b.jsx(f,{className:o,children:h})]})};function $({restTransformations:e,onSelect:o,setHoveredTransformItemName:t}){return e.map(e=>b.jsx(L,{item:e,onSelect:o,setHoveredTransformItemName:t},e.name))}function L({item:e,onSelect:o,setHoveredTransformItemName:r}){const{name:s,icon:n,title:a,isDisabled:l}=e;return b.jsxs(k,{className:i(s),onClick:e=>{e.preventDefault(),o(s)},disabled:l,onMouseLeave:()=>r(null),onMouseEnter:()=>r(s),children:[b.jsx(t,{icon:n,showColors:!0}),a]})}const W=(e,o)=>{const t=N(o.name,o.attributes);e.attributes={...e.attributes,...t}},q=(e,o)=>d.useMemo(()=>e.reduce((e,t)=>{const r=((e,o)=>{const t=o.map(e=>l(e)),r=new Set;for(const s of e){let e=!1;for(const o of t){const t=_(o,s.name,r);if(t){e=!0,r.add(t.clientId),W(t,s);break}}if(!e)return}return t})(o,t.blocks);return r&&e.push({...t,transformedBlocks:r}),e},[]),[e,o]);function E({blocks:o,patterns:t,onSelect:r}){const[s,n]=d.useState(!1),a=q(t,o);return a.length?b.jsxs(f,{className:"block-editor-block-switcher__pattern__transforms__menugroup",children:[s&&b.jsx(F,{patterns:a,onSelect:r}),b.jsx(k,{onClick:e=>{e.preventDefault(),n(!s)},icon:S,children:e("Patterns")})]}):null}function F({patterns:e,onSelect:o}){const t=M("medium","<");return b.jsx("div",{className:"block-editor-block-switcher__popover-preview-container",children:b.jsx(g,{className:"block-editor-block-switcher__popover-preview",placement:t?"bottom":"right-start",offset:16,children:b.jsx("div",{className:"block-editor-block-switcher__preview is-pattern-list-preview",children:b.jsx(O,{patterns:e,onSelect:o})})})})}function O({patterns:o,onSelect:t}){return b.jsx(h,{role:"listbox",className:"block-editor-block-switcher__preview-patterns-container","aria-label":e("Patterns list"),children:o.map(e=>b.jsx(J,{pattern:e,onSelect:t},e.name))})}function J({pattern:e,onSelect:o}){const t="block-editor-block-switcher__preview-patterns-container",r=z(J,`${t}-list__item-description`);return b.jsxs("div",{className:`${t}-list__list-item`,children:[b.jsxs(h.Item,{render:b.jsx("div",{role:"option","aria-label":e.title,"aria-describedby":e.description?r:void 0,className:`${t}-list__item`}),onClick:()=>o(e.transformedBlocks),children:[b.jsx(p,{blocks:e.transformedBlocks,viewportWidth:e.viewportWidth||500}),b.jsx("div",{className:`${t}-list__item-title`,children:e.title})]}),!!e.description&&b.jsx(x,{id:r,children:e.description})]})}function K(e){return r(o=>{const{getBlocksByClientId:t,getSelectedBlockClientIds:r,isUngroupable:s,isGroupable:n}=o(P),{getGroupingBlockName:a,getBlockType:i}=o(c),l=e?.length?e:r(),m=t(l),[p]=m,u=1===l.length&&s(l[0]);return{clientIds:l,isGroupable:n(l),isUngroupable:u,blocksSelection:m,groupingBlockName:a(),onUngroup:u&&i(p.name)?.transforms?.ungroup}},[e])}const A={group:{type:"constrained"},row:{type:"flex",flexWrap:"nowrap"},stack:{type:"flex",orientation:"vertical"},grid:{type:"grid"}};function Q(){const{blocksSelection:e,clientIds:t,groupingBlockName:n,isGroupable:i}=K(),{replaceBlocks:l}=s(P),{canRemove:m,variations:p}=r(e=>{const{canRemoveBlocks:o}=e(P),{getBlockVariations:r}=e(c);return{canRemove:o(t),variations:r(n,"transform")}},[t,n]),u=o=>{const r=a(e,n);"string"!=typeof o&&(o="group"),r&&r.length>0&&(r[0].attributes.layout=A[o],l(t,r))};if(!i||!m)return null;const d=!!p.find(({name:e})=>"group-row"===e),f=!!p.find(({name:e})=>"group-stack"===e),k=!!p.find(({name:e})=>"group-grid"===e);return b.jsxs(j,{children:[b.jsx(v,{icon:B,label:o("Group","verb"),onClick:u}),d&&b.jsx(v,{icon:C,label:o("Row","single horizontal line"),onClick:()=>u("row")}),f&&b.jsx(v,{icon:y,label:o("Stack","verb"),onClick:()=>u("stack")}),k&&b.jsx(v,{icon:I,label:o("Grid","verb"),onClick:()=>u("grid")})]})}function X({clientIds:e,isGroupable:t,isUngroupable:i,onUngroup:l,blocksSelection:c,groupingBlockName:m,onClose:p=()=>{}}){const{getSelectedBlockClientIds:u}=r(P),{replaceBlocks:d}=s(P);if(!t&&!i)return null;const f=u();return b.jsxs(b.Fragment,{children:[t&&b.jsx(k,{shortcut:f.length>1?n.primary("g"):void 0,onClick:()=>{(()=>{const o=a(c,m);o&&d(e,o)})(),p()},children:o("Group","verb")}),i&&b.jsx(k,{onClick:()=>{(()=>{let o=c[0].innerBlocks;o.length&&(l&&(o=l(c[0].attributes,c[0].innerBlocks)),d(e,o))})(),p()},children:o("Ungroup","Ungrouping blocks from within a grouping block back into individual blocks within the Editor")})]})}const Y=[{label:e("None"),value:"none",icon:G},{label:e("Uppercase"),value:"uppercase",icon:U},{label:e("Lowercase"),value:"lowercase",icon:H},{label:e("Capitalize"),value:"capitalize",icon:D}];function Z({className:o,value:t,onChange:r}){return b.jsx(w,{isDeselectable:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:e("Letter case"),className:R("block-editor-text-transform-control",o),value:t,onChange:e=>{r(e===t?void 0:e)},children:Y.map(e=>b.jsx(T,{value:e.value,icon:e.icon,label:e.label},e.value))})}export{V as B,X as C,E as P,Z as T,Q as a,K as u};
