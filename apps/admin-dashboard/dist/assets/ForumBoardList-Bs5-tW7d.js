import{a1 as k,r as o,j as e,x as S,S as C,co as D,O as M,cx as F,E as $}from"./vendor-react-CMQx0Rxg.js";import{a as m}from"./vendor-query-B9kD0akd.js";import{B as p,I,s as t,D as L,n as B,o as E,r as n,j as h}from"./page-gutenberg-Bg9cnlWs.js";import"./wp-all-CpKe89B2.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-utils-DQ8F5vJI.js";const Q=()=>{const i=k(),[c,u]=o.useState(""),[l,j]=o.useState("all"),[d,f]=o.useState("all"),{data:y}=m({queryKey:["forum-categories"],queryFn:async()=>(await h.api.get("/v1/forum/categories")).data}),g=y?.data||[],{data:N,isLoading:v}=m({queryKey:["forum-posts",l,d,c],queryFn:async()=>{const s=new URLSearchParams;return l!=="all"&&s.append("category",l),d!=="all"&&s.append("status",d),c&&s.append("search",c),(await h.api.get(`/v1/forum/posts?${s.toString()}`)).data}}),x=N?.data||[],w=s=>{switch(s){case"published":return e.jsx(t,{children:"게시됨"});case"draft":return e.jsx(t,{variant:"secondary",children:"초안"});case"pending":return e.jsx(t,{variant:"outline",children:"검토 중"});case"reported":return e.jsx(t,{variant:"destructive",children:"신고됨"});default:return null}},b=s=>{const a=new Date(s),r=(new Date().getTime()-a.getTime())/(1e3*60*60);return r<1?`${Math.floor(r*60)}분 전`:r<24?`${Math.floor(r)}시간 전`:r<168?`${Math.floor(r/24)}일 전`:a.toLocaleDateString("ko-KR")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-modern-text-primary",children:"포럼 게시판"}),e.jsx("p",{className:"text-modern-text-secondary mt-1",children:"포럼 게시글을 관리하고 모더레이션하세요."})]}),e.jsxs(p,{onClick:()=>i("/forum/posts/new"),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"새 게시글"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-modern-text-tertiary w-5 h-5"}),e.jsx(I,{type:"text",placeholder:"제목, 내용, 작성자로 검색...",value:c,onChange:s=>u(s.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-modern-text-secondary"}),e.jsxs("select",{value:l,onChange:s=>j(s.target.value),className:"px-4 py-2 border border-modern-border-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-modern-primary",children:[e.jsx("option",{value:"all",children:"모든 카테고리"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("select",{value:d,onChange:s=>f(s.target.value),className:"px-4 py-2 border border-modern-border-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-modern-primary",children:[e.jsx("option",{value:"all",children:"모든 상태"}),e.jsx("option",{value:"published",children:"게시됨"}),e.jsx("option",{value:"draft",children:"초안"}),e.jsx("option",{value:"pending",children:"검토 중"}),e.jsx("option",{value:"reported",children:"신고됨"})]})]})]}),e.jsx("div",{className:"wp-card",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-modern-bg-tertiary border-b border-modern-border-primary",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"제목"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"카테고리"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"작성자"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"상태"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider text-center",children:"통계"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-modern-text-secondary uppercase tracking-wider",children:"작성일"}),e.jsx("th",{className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-modern-border-primary",children:v?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-modern-primary"})})})}):x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-modern-text-secondary",children:"게시글이 없습니다."})}):x.map(s=>e.jsxs("tr",{className:"hover:bg-modern-bg-hover",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.isPinned&&e.jsx(t,{variant:"secondary",className:"text-xs",children:"고정"}),s.isLocked&&e.jsx(t,{variant:"outline",className:"text-xs",children:"잠김"}),e.jsx("a",{href:"#",onClick:a=>{a.preventDefault(),i(`/forum/posts/${s.id}`)},className:"text-sm font-medium text-modern-text-primary hover:text-modern-primary",children:s.title})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(t,{variant:"outline",children:s.category.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-modern-primary text-white rounded-full flex items-center justify-center text-xs font-medium",children:s.author.name.charAt(0)}),e.jsx("span",{className:"text-sm text-modern-text-primary",children:s.author.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(s.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-modern-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:s.views})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:s.replyCount})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-modern-text-secondary",children:b(s.createdAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs(L,{children:[e.jsx(B,{children:e.jsx(p,{variant:"ghost",size:"sm",children:e.jsx($,{className:"w-4 h-4"})})}),e.jsxs(E,{align:"end",children:[e.jsx(n,{onClick:()=>i(`/forum/posts/${s.id}`),children:"보기"}),e.jsx(n,{onClick:()=>i(`/forum/posts/${s.id}/edit`),children:"수정"}),!s.isPinned&&e.jsx(n,{children:"고정하기"}),!s.isLocked&&e.jsx(n,{children:"잠금"}),e.jsx(n,{className:"text-destructive",children:"삭제"})]})]})})]},s.id))})]})})})]})};export{Q as default};
