import{u as e,r as s,j as t,bK as r,b6 as a,bU as i,b1 as l,aE as c,cm as n,c8 as o,E as d}from"./vendor-react-DqgGMt48.js";import{a as m}from"./vendor-query-D_c3FRkE.js";import{B as x,I as p,b as j}from"./page-template-editor-5uesjTWI.js";import{cF as h,cI as u,cQ as g,cG as b,cH as w}from"./wp-misc-DyLrwF9p.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-utils-C9jLuAcl.js";import"./wp-blocks-core-65VcejHr.js";import"./wp-block-editor-misc-Bvzg-2Jv.js";import"./wp-core-BVMytgUH.js";import"./wp-block-editor-api-MRWBPx9C.js";import"./wp-block-editor-store-BOagVFfu.js";import"./wp-block-editor-clipboard-D5sqncpm.js";import"./wp-i18n-BuBz6Sgx.js";import"./wp-block-editor-global-styles-DFEUywv4.js";import"./wp-block-editor-typography-D5fCIzVQ.js";import"./wp-components-Uj2D7Nfy.js";import"./wp-block-editor-spacing-CY2h70rf.js";import"./wp-block-editor-menus-CucXu4UM.js";import"./wp-block-editor-core-BF86nm2P.js";import"./wp-block-editor-utils-BmaAXcuk.js";import"./wp-block-editor-colors-60WWD1Za.js";import"./wp-block-editor-a11y-BVzCbFSD.js";import"./wp-block-editor-preview-WXXja22U.js";import"./wp-block-editor-borders-C-QIiBvP.js";import"./wp-block-editor-formats--rvRJrSX.js";import"./wp-block-editor-selection-DBFjOmhH.js";import"./wp-block-editor-inline-CtEBI-J7.js";import"./wp-block-editor-ui-DwG3jajt.js";import"./wp-block-editor-transforms-Bg08EtRt.js";import"./wp-block-editor-patterns-DIcm1rGW.js";import"./wp-block-editor-navigation-ufXSM7dn.js";import"./wp-block-editor-dnd-yPphmZPp.js";import"./wp-block-editor-media-CatADaW3.js";import"./wp-api-COhbxmzY.js";import"./wp-block-editor-keyboard-3DDntAoE.js";import"./wp-block-editor-templates-C6YLNdWR.js";import"./wp-data-CL-okzN5.js";const N=()=>{const N=e(),[v,y]=s.useState(""),[f,k]=s.useState("all"),[C,P]=s.useState(1),{data:M,isLoading:S}=m({queryKey:["crowdfunding-projects",{search:v,status:f,page:C,limit:12}],queryFn:async()=>{const e={page:C,limit:12,...v&&{search:v},..."all"!==f&&{status:f}},s=new URLSearchParams(Object.entries(e).reduce((e,[s,t])=>(void 0!==t&&(e[s]=String(t)),e),{})).toString();return(await j.api.get(`/v1/crowdfunding-simple/projects?${s}`)).data}}),q=M?.data||[],z=M?.pagination,{data:D}=m({queryKey:["crowdfunding-stats"],queryFn:async()=>(await j.api.get("/v1/crowdfunding-simple/dashboard/stats")).data}),B=D?.data,F=e=>{const s={recruiting:{label:"모집중",variant:"default",color:"bg-blue-500"},in_progress:{label:"진행중",variant:"secondary",color:"bg-yellow-500"},completed:{label:"완료",variant:"outline",color:"bg-green-500"},cancelled:{label:"중단",variant:"destructive",color:"bg-red-500"}},r=s[e]||s.recruiting;return t.jsx(g,{variant:r.variant,children:r.label})};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-2xl font-bold text-modern-text-primary flex items-center gap-2",children:[t.jsx(r,{className:"w-8 h-8 text-modern-primary"}),"크라우드펀딩 프로젝트"]}),t.jsx("p",{className:"text-modern-text-secondary mt-1",children:"제품 개발사와 판매자를 연결하여 비용을 절감하는 B2B 크라우드펀딩"})]}),t.jsxs(x,{onClick:()=>N("/crowdfunding/projects/new"),children:[t.jsx(a,{className:"w-4 h-4 mr-2"}),"새 프로젝트"]})]}),B&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx(h,{children:t.jsx(u,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-modern-text-secondary",children:"전체 프로젝트"}),t.jsx("p",{className:"text-2xl font-bold text-modern-text-primary",children:B.totalProjects})]}),t.jsx(r,{className:"w-8 h-8 text-modern-primary opacity-20"})]})})}),t.jsx(h,{children:t.jsx(u,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-modern-text-secondary",children:"활성 프로젝트"}),t.jsx("p",{className:"text-2xl font-bold text-modern-primary",children:B.activeProjects})]}),t.jsx(i,{className:"w-8 h-8 text-modern-warning opacity-20"})]})})}),t.jsx(h,{children:t.jsx(u,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-modern-text-secondary",children:"완료 프로젝트"}),t.jsx("p",{className:"text-2xl font-bold text-modern-primary",children:B.completedProjects})]}),t.jsx(g,{className:"w-8 h-8 text-modern-success opacity-20"})]})})}),t.jsx(h,{children:t.jsx(u,{className:"p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-modern-text-secondary",children:"성공률"}),t.jsxs("p",{className:"text-2xl font-bold text-modern-text-primary",children:[B.successRate,"%"]})]}),t.jsx(l,{className:"w-8 h-8 text-modern-primary opacity-20"})]})})})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("form",{onSubmit:e=>{e.preventDefault(),P(1)},className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-modern-text-tertiary w-5 h-5"}),t.jsx(p,{type:"text",placeholder:"프로젝트명, 설명, 개발사명으로 검색...",value:v,onChange:e=>y(e.target.value),className:"pl-10"})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(n,{className:"w-5 h-5 text-modern-text-secondary"}),t.jsxs("select",{value:f,onChange:e=>{k(e.target.value),P(1)},className:"px-4 py-2 border border-modern-border-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-modern-primary",children:[t.jsx("option",{value:"all",children:"모든 상태"}),t.jsx("option",{value:"recruiting",children:"모집중"}),t.jsx("option",{value:"in_progress",children:"진행중"}),t.jsx("option",{value:"completed",children:"완료"}),t.jsx("option",{value:"cancelled",children:"중단"})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[S?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,s)=>t.jsx(h,{className:"animate-pulse",children:t.jsx(u,{className:"p-6",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-4 bg-modern-bg-tertiary rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-modern-bg-tertiary rounded w-1/2"}),t.jsx("div",{className:"h-20 bg-modern-bg-tertiary rounded"}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("div",{className:"h-3 bg-modern-bg-tertiary rounded w-1/4"}),t.jsx("div",{className:"h-3 bg-modern-bg-tertiary rounded w-1/4"})]})]})})},s))}):0===q.length?t.jsx(h,{children:t.jsxs(u,{className:"p-12 text-center",children:[t.jsx(r,{className:"w-16 h-16 text-modern-text-tertiary mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-modern-text-primary mb-2",children:"프로젝트가 없습니다"}),t.jsx("p",{className:"text-modern-text-secondary mb-4",children:"첫 번째 크라우드펀딩 프로젝트를 만들어보세요!"}),t.jsxs(x,{onClick:()=>N("/crowdfunding/projects/new"),children:[t.jsx(a,{className:"w-4 h-4 mr-2"}),"새 프로젝트 만들기"]})]})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(e=>{const s=(r=e.currentParticipantCount,(a=e.targetParticipantCount)>0?Math.min(r/a*100,100):0);var r,a;const i=(e=>{const s=new Date(e),t=new Date,r=s.getTime()-t.getTime(),a=Math.ceil(r/864e5);return Math.max(0,a)})(e.endDate),c="recruiting"===e.status&&i>0;return t.jsxs(h,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[t.jsx(b,{className:"pb-3",children:t.jsx("div",{className:"flex items-start justify-between",children:t.jsxs("div",{className:"flex-1",children:[t.jsx(w,{className:"text-lg line-clamp-2 mb-2",children:e.title}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-modern-text-secondary",children:[t.jsxs("span",{children:["by ",e.creatorName]}),F(e.status)]})]})})}),t.jsx(u,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"text-sm text-modern-text-secondary line-clamp-3",children:e.description}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-modern-text-secondary",children:"진행률"}),t.jsxs("span",{className:"font-medium text-modern-text-primary",children:[e.currentParticipantCount,"/",e.targetParticipantCount," (",Math.round(s),"%)"]})]}),t.jsx("div",{className:"w-full bg-modern-bg-tertiary rounded-full h-2",children:t.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(s>=100?"bg-modern-success":s>=50?"bg-modern-primary":"bg-modern-warning"),style:{width:`${s}%`}})})]}),t.jsxs("div",{className:"flex items-center justify-between text-sm text-modern-text-secondary",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(o,{className:"w-4 h-4"}),t.jsx("span",{children:c?`${i}일 남음`:"종료"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(l,{className:"w-4 h-4"}),t.jsxs("span",{children:[e.currentParticipantCount,"명 참여"]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs(x,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>N(`/crowdfunding/projects/${e.id}`),children:[t.jsx(d,{className:"w-4 h-4 mr-2"}),"상세보기"]}),e.forumLink&&t.jsx(x,{variant:"ghost",size:"sm",onClick:()=>N(e.forumLink),children:"포럼"})]})]})})]},e.id)})}),z&&z.totalPages>1&&t.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[t.jsx(x,{variant:"outline",size:"sm",disabled:C<=1,onClick:()=>P(e=>Math.max(1,e-1)),children:"이전"}),t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,z.totalPages)},(e,s)=>{const r=Math.max(1,Math.min(z.totalPages-4,Math.max(1,C-2)))+s;return t.jsx(x,{variant:r===C?"default":"ghost",size:"sm",onClick:()=>P(r),className:"w-8 h-8 p-0",children:r},r)})}),t.jsx(x,{variant:"outline",size:"sm",disabled:C>=z.totalPages,onClick:()=>P(e=>Math.min(z.totalPages,e+1)),children:"다음"})]})]})]})};export{N as default};
