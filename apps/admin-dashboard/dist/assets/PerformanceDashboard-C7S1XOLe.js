import{r as e,j as s,bx as a,dh as t,di as r,dg as i,bO as l,bK as c,bh as n,bw as d,dj as m}from"./vendor-react-BoWgD0Bu.js";import{a as x}from"./vendor-query-CbBSyLUF.js";import{cy as o,cz as h,cA as j,cB as p,cV as g,cK as N}from"./wp-misc-fiKRzvVp.js";import{B as u,d as y,e as f,f as v,g as b}from"./page-template-editor-CWJwXWLM.js";import{a as w}from"./api-client-CxLCD9ze.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-utils-C9jLuAcl.js";import"./wp-foundation-BzBJX52f.js";import"./wp-block-editor-main-y2nlPlta.js";import"./wp-i18n-BPC8WmOV.js";import"./wp-block-editor-store-PPID3vJI.js";import"./wp-block-editor-utils-C52tDze8.js";import"./wp-components-CKWj6dcl.js";function C(){const[C,P]=e.useState(!0),[k]=e.useState(5e3),{data:R,isLoading:M,refetch:F}=x({queryKey:["performance-metrics"],queryFn:async()=>(await w.get("/monitoring/metrics")).data,refetchInterval:!!C&&k}),{data:U}=x({queryKey:["performance-history"],queryFn:async()=>(await w.get("/monitoring/metrics/history")).data,refetchInterval:!!C&&k}),q=e=>{const s=["B","KB","MB","GB","TB"];let a=e,t=0;for(;a>=1024&&t<s.length-1;)a/=1024,t++;return`${a.toFixed(2)} ${s[t]}`},D=(e,s=!1)=>s?e<30?"text-green-500":e<70?"text-yellow-500":"text-red-500":e>90?"text-red-500":e>70?"text-yellow-500":"text-green-500",T=e=>e>90?"bg-red-500":e>70?"bg-yellow-500":"bg-green-500";return M||!R?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-admin-blue"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Performance Dashboard"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"Real-time system performance monitoring"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm",children:"Auto Refresh"}),s.jsx("input",{type:"checkbox",checked:C,onChange:e=>P(e.target.checked),className:"rounded"})]}),s.jsxs(u,{variant:"outline",size:"sm",onClick:()=>F(),children:[s.jsx(a,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(o,{children:[s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(j,{className:"text-sm font-medium",children:"CPU Usage"}),s.jsx(t,{className:`w-4 h-4 ${D(R.cpu.usage)}`})]})}),s.jsxs(p,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[R.cpu.usage.toFixed(1),"%"]}),s.jsx(g,{value:R.cpu.usage,className:`mt-2 h-2 ${T(R.cpu.usage)}`}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Load: ",R.cpu.loadAverage.map(e=>e.toFixed(2)).join(", ")]})]})]}),s.jsxs(o,{children:[s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(j,{className:"text-sm font-medium",children:"Memory Usage"}),s.jsx(r,{className:`w-4 h-4 ${D(R.memory.percentage)}`})]})}),s.jsxs(p,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[R.memory.percentage.toFixed(1),"%"]}),s.jsx(g,{value:R.memory.percentage,className:`mt-2 h-2 ${T(R.memory.percentage)}`}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[q(R.memory.used)," / ",q(R.memory.total)]})]})]}),s.jsxs(o,{children:[s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(j,{className:"text-sm font-medium",children:"Disk Usage"}),s.jsx(i,{className:`w-4 h-4 ${D(R.disk.percentage)}`})]})}),s.jsxs(p,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[R.disk.percentage.toFixed(1),"%"]}),s.jsx(g,{value:R.disk.percentage,className:`mt-2 h-2 ${T(R.disk.percentage)}`}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[q(R.disk.used)," / ",q(R.disk.total)]})]})]}),s.jsxs(o,{children:[s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(j,{className:"text-sm font-medium",children:"API Performance"}),s.jsx(l,{className:"w-4 h-4 text-blue-500"})]})}),s.jsxs(p,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[R.api.averageResponseTime,"ms"]}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[s.jsxs("span",{children:[R.api.requestsPerMinute," req/min"]}),s.jsxs("span",{children:[R.api.errorRate.toFixed(2),"% errors"]})]})]})]})]}),s.jsxs(y,{defaultValue:"realtime",className:"space-y-4",children:[s.jsxs(f,{children:[s.jsx(v,{value:"realtime",children:"Real-time"}),s.jsx(v,{value:"history",children:"History"}),s.jsx(v,{value:"database",children:"Database"}),s.jsx(v,{value:"api",children:"API Stats"})]}),s.jsxs(b,{value:"realtime",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs(o,{children:[s.jsxs(h,{children:[s.jsx(j,{children:"CPU & Memory Usage"}),s.jsx(N,{children:"Real-time resource utilization"})]}),s.jsxs(p,{children:[s.jsx("div",{className:"h-[300px] bg-gray-50 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"CPU & Memory Chart"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Chart visualization coming soon"})]})}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Current CPU:"}),s.jsxs("span",{className:"ml-2 font-medium",children:[R?.cpu?.usage?.toFixed(1)||0,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Current Memory:"}),s.jsxs("span",{className:"ml-2 font-medium",children:[R?.memory?.percentage?.toFixed(1)||0,"%"]})]})]})]})]}),s.jsxs(o,{children:[s.jsxs(h,{children:[s.jsx(j,{children:"Memory Distribution"}),s.jsx(N,{children:"Current memory allocation"})]}),s.jsxs(p,{children:[s.jsx("div",{className:"h-[300px] bg-gray-50 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(r,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Memory Distribution Chart"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Chart visualization coming soon"})]})}),s.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Used Memory:"}),s.jsx("span",{className:"ml-2 font-medium",children:q(R.memory.used)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Free Memory:"}),s.jsx("span",{className:"ml-2 font-medium",children:q(R.memory.free)})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("span",{className:"text-gray-500",children:"Usage:"}),s.jsxs("span",{className:"ml-2 font-medium",children:[R.memory.percentage.toFixed(1),"%"]})]})]})]})]})]}),s.jsxs(o,{children:[s.jsx(h,{children:s.jsx(j,{children:"System Information"})}),s.jsx(p,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Uptime"}),s.jsx("p",{className:"font-medium",children:($=R.uptime,`${Math.floor($/86400)}d ${Math.floor($%86400/3600)}h ${Math.floor($%3600/60)}m`)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"CPU Cores"}),s.jsx("p",{className:"font-medium",children:R.cpu.cores})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Memory"}),s.jsx("p",{className:"font-medium",children:q(R.memory.total)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Disk"}),s.jsx("p",{className:"font-medium",children:q(R.disk.total)})]})]})})]})]}),s.jsx(b,{value:"history",className:"space-y-4",children:s.jsxs(o,{children:[s.jsxs(h,{children:[s.jsx(j,{children:"Performance History"}),s.jsx(N,{children:"System performance over time"})]}),s.jsxs(p,{children:[s.jsx("div",{className:"h-[400px] bg-gray-50 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(c,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Performance History Chart"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Chart visualization coming soon"})]})}),U&&U.length>0&&s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"Recent Data Points:"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Latest CPU:"}),s.jsxs("span",{className:"ml-2 font-medium",children:[U[U.length-1]?.cpu?.toFixed(1)||0,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Latest Memory:"}),s.jsxs("span",{className:"ml-2 font-medium",children:[U[U.length-1]?.memory?.toFixed(1)||0,"%"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Latest Response:"}),s.jsxs("span",{className:"ml-2 font-medium",children:[U[U.length-1]?.responseTime||0,"ms"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Data Points:"}),s.jsx("span",{className:"ml-2 font-medium",children:U.length})]})]})]})]})]})}),s.jsx(b,{value:"database",className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(o,{children:[s.jsx(h,{children:s.jsx(j,{children:"Database Connections"})}),s.jsx(p,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("span",{className:"text-sm",children:"Active Connections"}),s.jsxs("span",{className:"text-sm font-medium",children:[R.database.connections," / ",R.database.maxConnections]})]}),s.jsx(g,{value:R.database.connections/R.database.maxConnections*100,className:"h-2"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Avg Query Time"}),s.jsxs("p",{className:"text-xl font-bold",children:[R.database.queryTime,"ms"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Slow Queries"}),s.jsx("p",{className:"text-xl font-bold",children:R.database.slowQueries})]})]})]})})]}),s.jsxs(o,{children:[s.jsx(h,{children:s.jsx(j,{children:"Database Performance"})}),s.jsx(p,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Connection Pool"}),s.jsx(n,{className:"w-4 h-4 text-green-500"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Query Cache"}),s.jsx(n,{className:"w-4 h-4 text-green-500"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Index Usage"}),s.jsx(n,{className:"w-4 h-4 text-green-500"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Replication"}),s.jsx(d,{className:"w-4 h-4 text-yellow-500"})]})]})})]})]})}),s.jsxs(b,{value:"api",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(o,{children:[s.jsx(h,{children:s.jsx(j,{children:"Request Volume"})}),s.jsxs(p,{children:[s.jsx("div",{className:"text-3xl font-bold",children:R.api.requestsPerMinute}),s.jsx("p",{className:"text-sm text-gray-500",children:"requests per minute"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(c,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-sm text-green-500",children:"+12% from last hour"})]})]})]}),s.jsxs(o,{children:[s.jsx(h,{children:s.jsx(j,{children:"Response Time"})}),s.jsxs(p,{children:[s.jsxs("div",{className:"text-3xl font-bold",children:[R.api.averageResponseTime,"ms"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"average response time"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(m,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-sm text-green-500",children:"-5ms from last hour"})]})]})]}),s.jsxs(o,{children:[s.jsx(h,{children:s.jsx(j,{children:"Error Rate"})}),s.jsxs(p,{children:[s.jsxs("div",{className:"text-3xl font-bold",children:[R.api.errorRate.toFixed(2),"%"]}),s.jsx("p",{className:"text-sm text-gray-500",children:"of all requests"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(n,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-sm text-green-500",children:"Within normal range"})]})]})]})]}),s.jsxs(o,{children:[s.jsxs(h,{children:[s.jsx(j,{children:"Response Time Distribution"}),s.jsx(N,{children:"API endpoint performance breakdown"})]}),s.jsxs(p,{children:[s.jsx("div",{className:"h-[300px] bg-gray-50 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Response Time Distribution Chart"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Chart visualization coming soon"})]})}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"Sample Endpoint Performance:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"/api/posts"}),s.jsx("span",{className:"font-medium",children:"45ms"})]}),s.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"/api/users"}),s.jsx("span",{className:"font-medium",children:"32ms"})]}),s.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"/api/products"}),s.jsx("span",{className:"font-medium",children:"58ms"})]}),s.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"/api/orders"}),s.jsx("span",{className:"font-medium",children:"72ms"})]}),s.jsxs("div",{className:"flex justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{className:"text-gray-600",children:"/api/analytics"}),s.jsx("span",{className:"font-medium",children:"125ms"})]})]})]})]})]})]})]})]});var $}export{C as default};
