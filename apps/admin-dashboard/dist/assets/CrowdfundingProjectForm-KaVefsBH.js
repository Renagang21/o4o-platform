import{a3 as e,a4 as r,r as o,V as a,j as s,a5 as d,F as m,dy as i,s as t,a1 as n}from"./vendor-react-40ZmJ4HC.js";import{u as p,a as l,b as u}from"./vendor-query-DJJ0FlEA.js";import{j as c,B as f,C as N,k as b,l as h,m as g,L as x,I as v,T as j}from"./page-gutenberg-CxDN_6a_.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-utils-EdRAegAf.js";import"./wp-all-BeSh6B1c.js";const D=()=>{const D=e(),{id:w}=r(),C=p(),P=!!w,[F,E]=o.useState({title:"",description:"",targetParticipantCount:10,startDate:"",endDate:"",forumLink:""}),[V,y]=o.useState({}),{data:k,isLoading:L}=l({queryKey:["crowdfunding-project",w],queryFn:async()=>(await c.api.get(`/crowdfunding-simple/projects/${w}`)).data,enabled:P}),S=u({mutationFn:async e=>(await c.api.post("/crowdfunding-simple/projects",e)).data,onSuccess:()=>{a.success("프로젝트가 생성되었습니다!"),C.invalidateQueries({queryKey:["crowdfunding-projects"]}),D("/crowdfunding/projects")},onError:e=>{a.error(e.response?.data?.error||"프로젝트 생성에 실패했습니다.")}}),q=u({mutationFn:async e=>(await c.api.put(`/crowdfunding-simple/projects/${w}`,e)).data,onSuccess:()=>{a.success("프로젝트가 수정되었습니다!"),C.invalidateQueries({queryKey:["crowdfunding-project",w]}),C.invalidateQueries({queryKey:["crowdfunding-projects"]}),D(`/crowdfunding/projects/${w}`)},onError:e=>{a.error(e.response?.data?.error||"프로젝트 수정에 실패했습니다.")}});o.useEffect(()=>{if(k?.data){const e=k.data;E({title:e.title,description:e.description,targetParticipantCount:e.targetParticipantCount,startDate:e.startDate,endDate:e.endDate,forumLink:e.forumLink||""})}},[k]);const $=(e,r)=>{E(o=>({...o,[e]:r})),V[e]&&y(r=>({...r,[e]:void 0}))},K=(new Date).toISOString().split("T")[0];return P&&L?s.jsxDEV("div",{className:"flex items-center justify-center h-96",children:s.jsxDEV("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-modern-primary"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:158,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:157,columnNumber:7},void 0):s.jsxDEV("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV(f,{variant:"ghost",size:"sm",onClick:()=>D(P?`/crowdfunding/projects/${w}`:"/crowdfunding/projects"),children:[s.jsxDEV(d,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:172,columnNumber:11},void 0),P?"프로젝트 상세":"프로젝트 목록"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:167,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:s.jsxDEV("h1",{className:"text-2xl font-bold text-modern-text-primary",children:P?"프로젝트 수정":"새 프로젝트 만들기"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:176,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:175,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:166,columnNumber:7},void 0),s.jsxDEV("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return F.title.trim()||(e.title="프로젝트 제목을 입력하세요."),F.description.trim()||(e.description="프로젝트 설명을 입력하세요."),F.targetParticipantCount<1&&(e.targetParticipantCount="목표 참여 매장 수는 1개 이상이어야 합니다."),F.startDate||(e.startDate="시작일을 선택하세요."),F.endDate||(e.endDate="종료일을 선택하세요."),F.startDate&&F.endDate&&F.startDate>=F.endDate&&(e.endDate="종료일은 시작일보다 늦어야 합니다."),F.startDate&&new Date(F.startDate)<new Date&&(e.startDate="시작일은 현재 날짜 이후여야 합니다."),y(e),0===Object.keys(e).length})()?P?q.mutate(F):S.mutate(F):a.error("입력한 정보를 확인해주세요.")},className:"space-y-6",children:[s.jsxDEV(N,{children:[s.jsxDEV(b,{children:s.jsxDEV(h,{className:"flex items-center gap-2",children:[s.jsxDEV(m,{className:"w-5 h-5 text-modern-primary"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:187,columnNumber:15},void 0),"프로젝트 기본 정보"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:186,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:185,columnNumber:11},void 0),s.jsxDEV(g,{className:"space-y-4",children:[s.jsxDEV("div",{children:[s.jsxDEV(x,{htmlFor:"title",children:"프로젝트 제목 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:193,columnNumber:15},void 0),s.jsxDEV(v,{id:"title",value:F.title,onChange:e=>$("title",e.target.value),placeholder:"예: 친환경 포장재 대량 구매 프로젝트",className:V.title?"border-red-500":""},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:194,columnNumber:15},void 0),V.title&&s.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:V.title},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:202,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:192,columnNumber:13},void 0),s.jsxDEV("div",{children:[s.jsxDEV(x,{htmlFor:"description",children:"프로젝트 설명 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:207,columnNumber:15},void 0),s.jsxDEV(j,{id:"description",value:F.description,onChange:e=>$("description",e.target.value),placeholder:"프로젝트의 목적, 혜택, 예상 절감 비용 등을 상세히 설명해주세요...",rows:8,className:V.description?"border-red-500":""},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:208,columnNumber:15},void 0),V.description&&s.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:V.description},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:217,columnNumber:17},void 0),s.jsxDEV("p",{className:"text-sm text-modern-text-secondary mt-1",children:"참여 매장이 이해하기 쉽도록 구체적인 혜택과 절감 효과를 포함해주세요."},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:219,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:206,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:191,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:184,columnNumber:9},void 0),s.jsxDEV(N,{children:[s.jsxDEV(b,{children:s.jsxDEV(h,{className:"flex items-center gap-2",children:[s.jsxDEV(i,{className:"w-5 h-5 text-modern-primary"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:230,columnNumber:15},void 0),"목표 및 기간 설정"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:229,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:228,columnNumber:11},void 0),s.jsxDEV(g,{className:"space-y-4",children:[s.jsxDEV("div",{children:[s.jsxDEV(x,{htmlFor:"targetParticipantCount",children:"목표 참여 매장 수 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:236,columnNumber:15},void 0),s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV(v,{id:"targetParticipantCount",type:"number",min:"1",max:"1000",value:F.targetParticipantCount,onChange:e=>$("targetParticipantCount",parseInt(e.target.value)||0),className:"max-w-xs "+(V.targetParticipantCount?"border-red-500":"")},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:238,columnNumber:17},void 0),s.jsxDEV("span",{className:"text-modern-text-secondary",children:"개 매장"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:247,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:237,columnNumber:15},void 0),V.targetParticipantCount&&s.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:V.targetParticipantCount},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:250,columnNumber:17},void 0),s.jsxDEV("p",{className:"text-sm text-modern-text-secondary mt-1",children:"목표를 달성하면 비용 절감 효과를 얻을 수 있는 최소 참여 매장 수를 설정하세요."},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:252,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:235,columnNumber:13},void 0),s.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxDEV("div",{children:[s.jsxDEV(x,{htmlFor:"startDate",children:"프로젝트 시작일 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:259,columnNumber:17},void 0),s.jsxDEV(v,{id:"startDate",type:"date",min:K,value:F.startDate,onChange:e=>$("startDate",e.target.value),className:V.startDate?"border-red-500":""},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:260,columnNumber:17},void 0),V.startDate&&s.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:V.startDate},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:269,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:258,columnNumber:15},void 0),s.jsxDEV("div",{children:[s.jsxDEV(x,{htmlFor:"endDate",children:"프로젝트 종료일 *"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:274,columnNumber:17},void 0),s.jsxDEV(v,{id:"endDate",type:"date",min:F.startDate||K,value:F.endDate,onChange:e=>$("endDate",e.target.value),className:V.endDate?"border-red-500":""},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:275,columnNumber:17},void 0),V.endDate&&s.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:V.endDate},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:284,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:273,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:257,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:234,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:227,columnNumber:9},void 0),s.jsxDEV(N,{children:[s.jsxDEV(b,{children:s.jsxDEV(h,{className:"flex items-center gap-2",children:[s.jsxDEV(t,{className:"w-5 h-5 text-modern-primary"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:295,columnNumber:15},void 0),"추가 설정"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:294,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:293,columnNumber:11},void 0),s.jsxDEV(g,{className:"space-y-4",children:s.jsxDEV("div",{children:[s.jsxDEV(x,{htmlFor:"forumLink",children:"포럼 링크 (선택)"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:301,columnNumber:15},void 0),s.jsxDEV(v,{id:"forumLink",value:F.forumLink,onChange:e=>$("forumLink",e.target.value),placeholder:"/forum/posts/project-discussion"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:302,columnNumber:15},void 0),s.jsxDEV("p",{className:"text-sm text-modern-text-secondary mt-1",children:"참여자들이 토론할 수 있는 포럼 페이지 링크를 입력하세요."},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:308,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:300,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:299,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:292,columnNumber:9},void 0),s.jsxDEV("div",{className:"flex justify-end gap-3",children:[s.jsxDEV(f,{type:"button",variant:"outline",onClick:()=>D(P?`/crowdfunding/projects/${w}`:"/crowdfunding/projects"),children:"취소"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:317,columnNumber:11},void 0),s.jsxDEV(f,{type:"submit",disabled:S.isPending||q.isPending,children:[s.jsxDEV(n,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:328,columnNumber:13},void 0),S.isPending||q.isPending?"저장 중...":P?"수정하기":"프로젝트 만들기"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:324,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:316,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:182,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/apps/CrowdfundingProjectForm.tsx",lineNumber:164,columnNumber:5},void 0)};export{D as default};
//# sourceMappingURL=CrowdfundingProjectForm-KaVefsBH.js.map
