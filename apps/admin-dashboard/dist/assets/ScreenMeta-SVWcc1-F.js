import{r as u,j as e,B as v,c as f,bS as y,bt as N,cz as O,X as k}from"./vendor-react-LfmQXg7x.js";import{c as p}from"./vendor-ui-BkLtITBR.js";import{c as h}from"./page-gutenberg-Bgd5YFXg.js";const T=({title:s="Screen Options",options:t,onOptionsChange:i,columnsPerPage:r,onColumnsChange:l,itemsPerPage:d=20,onItemsPerPageChange:c})=>{const[n,m]=u.useState(!1),g=(a,o)=>{const j=t.map(x=>x.id===a?{...x,checked:o}:x);i(j)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>m(!n),className:p("absolute -top-1 right-0 px-3 py-1 text-sm","bg-modern-bg-card border border-modern-border-primary rounded-t","hover:bg-modern-bg-hover transition-colors","flex items-center gap-1",n&&"bg-modern-bg-hover"),children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:s}),e.jsx(f,{className:p("w-4 h-4 transition-transform",n&&"rotate-180")})]}),n&&e.jsx("div",{className:"absolute top-8 right-0 w-96 bg-modern-bg-card border border-modern-border-primary rounded-lg shadow-modern-shadow-lg z-50",children:e.jsxs("div",{className:"p-4",children:[t.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-modern-text-primary mb-2",children:"Boxes"}),e.jsx("div",{className:"space-y-2",children:t.map(a=>e.jsxs("label",{className:"flex items-start gap-2 text-sm text-modern-text-secondary hover:text-modern-text-primary cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.checked,onChange:o=>g(a.id,o.target.checked),className:"mt-0.5 rounded border-modern-border-primary text-modern-primary focus:ring-modern-primary"}),e.jsxs("div",{children:[e.jsx("span",{children:a.label}),a.description&&e.jsx("p",{className:"text-xs text-modern-text-tertiary mt-0.5",children:a.description})]})]},a.id))})]}),r!==void 0&&l&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-modern-text-primary mb-2",children:"Layout"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-modern-text-secondary",children:"Number of Columns:"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(a=>e.jsx("button",{onClick:()=>l(a),className:p("w-8 h-8 text-sm rounded border transition-colors",r===a?"bg-modern-primary text-white border-modern-primary":"bg-white border-modern-border-primary text-modern-text-primary hover:border-modern-primary"),children:a},a))})]})]}),c&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-modern-text-primary mb-2",children:"Pagination"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"items-per-page",className:"text-sm text-modern-text-secondary",children:"Number of items per page:"}),e.jsx("input",{id:"items-per-page",type:"number",min:"1",max:"999",value:d,onChange:a=>{const o=parseInt(a.target.value);o>0&&c(o)},className:"w-16 px-2 py-1 text-sm border border-modern-border-primary rounded focus:outline-none focus:ring-2 focus:ring-modern-primary"})]})]}),e.jsx("div",{className:"flex justify-end pt-2 border-t border-modern-border-primary",children:e.jsx("button",{onClick:()=>m(!1),className:"px-4 py-1.5 text-sm bg-modern-primary text-white rounded hover:bg-modern-primary-hover transition-colors",children:"Apply"})})]})})]})},b=y(s=>({_isOpen:!1,activeTab:null,tabs:[],sidebar:null,toggleHelp:()=>s(t=>({_isOpen:!t._isOpen,activeTab:t._isOpen?null:t.tabs[0]?.id||null})),openHelp:()=>s(t=>({_isOpen:!0,activeTab:t.tabs[0]?.id||null})),closeHelp:()=>s({_isOpen:!1,activeTab:null}),setActiveTab:t=>s({activeTab:t}),setTabs:t=>s(i=>({tabs:t,activeTab:i._isOpen?t[0]?.id||null:i.activeTab})),setSidebar:t=>s({sidebar:t}),reset:()=>s({_isOpen:!1,activeTab:null,tabs:[],sidebar:null})}));function w(){const s=b(),t=N();return u.useEffect(()=>{s.reset()},[t.pathname]),s}function E(s,t){const i=b(c=>c.setTabs),r=b(c=>c.setSidebar),l=JSON.stringify(s),d=JSON.stringify(t);u.useEffect(()=>(i(s),r(t||null),()=>{i([]),r(null)}),[l,d])}const C=()=>{const{_isOpen:s,activeTab:t,tabs:i,sidebar:r,toggleHelp:l,closeHelp:d,setActiveTab:c}=w();return i.length===0?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{id:"contextual-help-link-wrap",className:"hide-if-no-js screen-meta-toggle",children:e.jsxs("button",{type:"button",id:"contextual-help-link",className:h("button show-settings",s&&"screen-meta-active"),"aria-controls":"contextual-help-wrap","aria-expanded":s,onClick:l,children:[e.jsx(O,{className:"w-4 h-4 inline mr-1"}),"Help"]})}),e.jsxs("div",{id:"contextual-help-wrap",className:h("contextual-help-wrap hidden",s&&"contextual-help-open"),"aria-label":"Contextual Help Tab",children:[e.jsx("div",{id:"contextual-help-back",className:s?"contextual-help-open":""}),e.jsxs("div",{id:"contextual-help-columns",children:[e.jsx("div",{className:"contextual-help-tabs",children:e.jsx("ul",{children:i.map(n=>e.jsx("li",{id:`tab-link-${n.id}`,className:t===n.id?"active":"",children:e.jsx("a",{href:`#tab-panel-${n.id}`,onClick:m=>{m.preventDefault(),c(n.id)},"aria-controls":`tab-panel-${n.id}`,children:n.title})},n.id))})}),r&&e.jsxs("div",{className:"contextual-help-sidebar",children:[e.jsx("h3",{children:r.title}),typeof r.content=="string"?e.jsx("div",{dangerouslySetInnerHTML:{__html:r.content}}):r.content]}),e.jsx("div",{className:"contextual-help-tabs-wrap",children:i.map(n=>e.jsx("div",{id:`tab-panel-${n.id}`,className:h("help-tab-content",t===n.id?"active":""),children:typeof n.content=="string"?e.jsx("div",{dangerouslySetInnerHTML:{__html:n.content}}):n.content},n.id))})]}),e.jsx("button",{type:"button",className:"contextual-help-close",onClick:d,"aria-label":"Close Help",children:e.jsx(k,{className:"w-5 h-5"})})]})]})},I=s=>{const t=s.columns?.map(r=>({id:r.id,label:r.label,checked:r.checked,type:"checkbox"}))||[],i=r=>{r.forEach(l=>{s.onColumnChange&&s.onColumnChange(l.id,l.checked)})};return e.jsx("div",{id:"screen-meta",className:"metabox-prefs",children:e.jsx("div",{id:"screen-meta-links",children:e.jsxs("div",{className:"screen-options-and-help-container",children:[e.jsx(C,{}),e.jsx(T,{options:t,onOptionsChange:i,itemsPerPage:s.itemsPerPage,onItemsPerPageChange:s.onItemsPerPageChange})]})})})};export{I as S,E as u};
