import{b as e,u as s,r as t,j as a,bU as l,A as r,dk as d,df as i,cf as c,bE as n,c0 as m,c1 as o,c2 as x,dj as p,b_ as h,b$ as j,ci as b,cy as g}from"./vendor-react-BQ6HOJoh.js";import{c as N,b as u,d as y}from"./useOrders-DCl__9ym.js";import{n as f}from"./page-template-editor-C7FodHrK.js";import{u as v,D as w}from"./vendor-utils-D-spY-QM.js";import"./wp-block-editor-a11y-DrduSWFW.js";import"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-api-Buev8_QU.js";import"./wp-block-editor-utils-M5qXzE1L.js";import"./wp-block-editor-colors-D38h-Odz.js";import"./wp-blocks-core-6vwQKPfS.js";import"./wp-block-editor-clipboard-Dg0Y1gQ6.js";import"./wp-misc-DS9m4_P2.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-LYSOqK5P.js";import"./wp-core-Y-jV-nrZ.js";import"./wp-block-editor-keyboard-CeHTtvP5.js";import"./wp-data-BmtL8k4r.js";import"./wp-block-editor-store-B-g1aSix.js";import"./wp-block-editor-dnd-BYoS8-II.js";import"./wp-block-editor-library-BpQvynjE.js";import"./wp-block-editor-menus-BTQ2wZ-f.js";import"./wp-block-editor-typography-Bl_1REQP.js";import"./wp-block-editor-spacing-BD_2CpN7.js";import"./wp-block-editor-core-DL280tSA.js";import"./wp-block-editor-selection-CC4tJpUu.js";import"./wp-block-editor-formats-CLXkimOp.js";import"./wp-block-editor-inline-CpXpUhQU.js";import"./wp-block-editor-ui-B8YE_4QL.js";import"./wp-block-editor-transforms-jLcKa8Hv.js";import"./wp-block-editor-preview-iw2Xu1ib.js";import"./wp-block-editor-global-styles-CV5-K6QF.js";import"./wp-block-editor-borders-BH1devca.js";import"./wp-block-editor-patterns-BXdHo9lm.js";import"./wp-block-editor-navigation-BFSoKzg0.js";import"./wp-block-editor-media-Bg-JiQDT.js";import"./wp-api-BeoadipR.js";import"./wp-i18n-DGPtqsXY.js";import"./vendor-monaco-BxJH8uUv.js";import"./wp-block-editor-upload-BLw1R9wP.js";import"./wp-block-editor-templates-o1_wAMb9.js";import"./wp-components-CeQNCpMW.js";import"./ecommerceApi-CzsNp_7N.js";import"./unified-client-CYWwJk4G.js";import"./index-C-wyiE3c.js";import"./vendor-socket-CMcZe9fK.js";const k=()=>{const{id:k}=e(),A=s(),[C,S]=t.useState(!1),[I,D]=t.useState(""),[F,q]=t.useState(""),[z,M]=t.useState(""),{data:$,isLoading:E}=N(k||""),H=u(),U=y(),L=$?.data;if(E)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})});if(!L)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(l,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"주문을 찾을 수 없습니다"}),a.jsx("button",{onClick:()=>A("/orders"),className:"text-blue-600 hover:text-blue-800",children:"주문 목록으로 돌아가기"})]});const B=async e=>{await H.mutateAsync({orderId:L.id,status:e,note:z||void 0}),M("")};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>A("/orders"),className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(r,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["주문 #",L.orderNumber]}),a.jsx("p",{className:"text-gray-600 mt-1",children:v(new Date(L.createdAt),"yyyy년 MM월 dd일 HH:mm",{locale:w})})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[a.jsx(d,{className:"w-4 h-4 mr-2"}),"인쇄"]}),a.jsxs("button",{className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[a.jsx(i,{className:"w-4 h-4 mr-2"}),"다운로드"]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{className:"col-span-2 space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(c,{className:"w-5 h-5"}),"주문 상품"]})}),a.jsx("div",{className:"p-6",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b",children:[a.jsx("th",{className:"text-left pb-3 text-sm font-medium text-gray-500",children:"상품"}),a.jsx("th",{className:"text-center pb-3 text-sm font-medium text-gray-500",children:"수량"}),a.jsx("th",{className:"text-right pb-3 text-sm font-medium text-gray-500",children:"단가"}),a.jsx("th",{className:"text-right pb-3 text-sm font-medium text-gray-500",children:"합계"})]})}),a.jsx("tbody",{children:L.items?.map(e=>a.jsxs("tr",{className:"border-b",children:[a.jsx("td",{className:"py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 rounded bg-gray-200 flex items-center justify-center",children:a.jsx(c,{className:"w-6 h-6 text-gray-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:e.productName||"상품명 없음"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["SKU: ",e.productSku||"-"]})]})]})}),a.jsx("td",{className:"text-center py-4",children:e.quantity}),a.jsx("td",{className:"text-right py-4",children:f(e.price)}),a.jsx("td",{className:"text-right py-4 font-medium",children:f(e.price*e.quantity)})]},e.id))}),a.jsxs("tfoot",{children:[a.jsxs("tr",{children:[a.jsx("td",{colSpan:3,className:"text-right pt-4 pb-2",children:"소계:"}),a.jsx("td",{className:"text-right pt-4 pb-2 font-medium",children:f(L.subtotal)})]}),L.shipping>0&&a.jsxs("tr",{children:[a.jsx("td",{colSpan:3,className:"text-right pb-2",children:"배송비:"}),a.jsx("td",{className:"text-right pb-2",children:f(L.shipping)})]}),L.discount>0&&a.jsxs("tr",{children:[a.jsx("td",{colSpan:3,className:"text-right pb-2",children:"할인:"}),a.jsxs("td",{className:"text-right pb-2 text-red-600",children:["-",f(L.discount)]})]}),a.jsxs("tr",{className:"border-t",children:[a.jsx("td",{colSpan:3,className:"text-right pt-4 text-lg font-semibold",children:"총액:"}),a.jsx("td",{className:"text-right pt-4 text-lg font-semibold",children:f(L.total)})]})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(n,{className:"w-5 h-5"}),"청구지 정보"]})}),a.jsxs("div",{className:"p-6 space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:L.customerName}),a.jsx("p",{className:"text-sm text-gray-600",children:L.billingAddress?.company})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(m,{className:"w-4 h-4"}),L.billingAddress?.address1]}),L.billingAddress?.address2&&a.jsx("p",{className:"ml-6",children:L.billingAddress.address2}),a.jsxs("p",{className:"ml-6",children:[L.billingAddress?.city," ",L.billingAddress?.state," ",L.billingAddress?.postalCode]})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(o,{className:"w-4 h-4"}),L.billingAddress?.phone]}),a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(x,{className:"w-4 h-4"}),L.billingAddress?.email]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(p,{className:"w-5 h-5"}),"배송지 정보"]})}),a.jsxs("div",{className:"p-6 space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:L.customerName}),a.jsx("p",{className:"text-sm text-gray-600",children:L.shippingAddress?.company})]}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(m,{className:"w-4 h-4"}),L.shippingAddress?.address1]}),L.shippingAddress?.address2&&a.jsx("p",{className:"ml-6",children:L.shippingAddress.address2}),a.jsxs("p",{className:"ml-6",children:[L.shippingAddress?.city," ",L.shippingAddress?.state," ",L.shippingAddress?.postalCode]})]}),a.jsx("div",{className:"text-sm text-gray-600 space-y-1",children:a.jsxs("p",{className:"flex items-center gap-2",children:[a.jsx(o,{className:"w-4 h-4"}),L.shippingAddress?.phone]})})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(h,{className:"w-5 h-5"}),"주문 활동"]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"text-center text-gray-500 py-4",children:[a.jsx(h,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"주문 활동이 없습니다"})]})}),a.jsx("div",{className:"mt-6 pt-6 border-t",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("textarea",{value:z,onChange:e=>M(e.target.value),placeholder:"주문 메모 추가...",className:"flex-1 px-3 py-2 border rounded-lg resize-none",rows:2}),a.jsx("button",{onClick:()=>{z.trim()&&B(L.status)},disabled:!z.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"추가"})]})})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsx("h2",{className:"text-lg font-semibold",children:"주문 상태"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"현재 상태"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${{pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800",cancelled:"bg-gray-100 text-gray-800",refunded:"bg-red-100 text-red-800"}[L.status]}`,children:(G=L.status,{pending:"대기중",processing:"처리중",shipped:"배송중",completed:"완료",cancelled:"취소됨",refunded:"환불됨"}[G]||G)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"상태 변경"}),a.jsxs("select",{value:L.status,onChange:e=>B(e.target.value),className:"w-full border rounded-lg px-3 py-2",children:[a.jsx("option",{value:"pending",children:"대기중"}),a.jsx("option",{value:"processing",children:"처리중"}),a.jsx("option",{value:"shipped",children:"배송중"}),a.jsx("option",{value:"completed",children:"완료"}),a.jsx("option",{value:"cancelled",children:"취소"}),a.jsx("option",{value:"refunded",children:"환불"})]})]}),("completed"===L.status||"cancelled"===L.status)&&a.jsxs("button",{onClick:()=>S(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[a.jsx(j,{className:"w-4 h-4"}),"환불 처리"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(b,{className:"w-5 h-5"}),"결제 정보"]})}),a.jsxs("div",{className:"p-6 space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"결제 방법"}),a.jsx("span",{className:"font-medium",children:L.paymentMethod})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"결제 상태"}),a.jsx("span",{className:"font-medium "+("completed"===L.paymentStatus?"text-green-600":"text-red-600"),children:"completed"===L.paymentStatus?"결제완료":"미결제"})]}),L.transactionId&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"거래 ID"}),a.jsx("span",{className:"font-mono text-sm",children:L.transactionId})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[a.jsx(g,{className:"w-5 h-5"}),"고객 정보"]})}),a.jsx("div",{className:"p-6 space-y-3",children:L.customerId?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:L.customerName}),a.jsx("p",{className:"text-sm text-gray-600",children:L.customerEmail})]}),a.jsx("div",{className:"pt-3 border-t",children:a.jsx("a",{href:`#/users/${L.customerId}`,onClick:e=>{e.preventDefault(),A(`/users/${L.customerId}`)},className:"text-blue-600 hover:text-blue-800 text-sm",children:"고객 프로필 보기 →"})})]}):a.jsx("p",{className:"text-gray-500",children:"게스트 주문"})})]})]})]}),C&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"환불 처리"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"환불 금액"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:"₩"}),a.jsx("input",{type:"number",value:I,onChange:e=>D(e.target.value),placeholder:L.total.toString(),max:L.total,className:"w-full pl-8 pr-3 py-2 border rounded-lg"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["최대 환불 가능 금액: ",f(L.total)]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"환불 사유"}),a.jsx("textarea",{value:F,onChange:e=>q(e.target.value),placeholder:"환불 사유를 입력하세요...",className:"w-full px-3 py-2 border rounded-lg resize-none",rows:3})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border rounded-lg hover:bg-gray-50",children:"취소"}),a.jsx("button",{onClick:async()=>{!I||parseFloat(I)<=0||(await U.mutateAsync({orderId:L.id,amount:parseFloat(I),reason:F||void 0}),S(!1),D(""),q(""))},disabled:!I||parseFloat(I)<=0,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"환불 처리"})]})]})})]});var G};export{k as default};
