import{f as e}from"./wp-block-editor-global-styles-CgbocFEz.js";import{N as t}from"./wp-blocks-core-BDaUU0zy.js";import{s as o}from"./wp-block-editor-store-D0LqdVTA.js";import{u as r,a as s}from"./wp-block-editor-misc-5qbjj7fi.js";import{r as n}from"./vendor-react-DqgGMt48.js";function l(l,c,i,a){const{getBlocks:u,getSelectedBlocksInitialCaretPosition:f,isBlockSelected:m}=r(o),{replaceInnerBlocks:p,__unstableMarkNextChangeAsNotPersistent:k}=s(o),d=n.useRef(null);n.useLayoutEffect(()=>{let o=!1;return window.queueMicrotask(()=>{if(o)return;const r=u(l),s=0===r.length||"all"===i||"contentOnly"===i,n=!e(c,d.current);if(!s||!n)return;d.current=c;const g=t(r,c);e(g,r)||(k(),p(l,g,0===r.length&&a&&0!==g.length&&m(l),f()))}),()=>{o=!0}},[c,i,l])}export{l as u};
