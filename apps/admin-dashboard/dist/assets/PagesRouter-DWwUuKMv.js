import{r as e,V as s,j as t,bS as a,be as r,b6 as i,aE as l,b0 as d,bY as c,bW as n,E as o,bc as x,b8 as p,c0 as m,c1 as h,b$ as u}from"./vendor-react-DqgGMt48.js";import{u as j,a as g,b}from"./vendor-query-D_c3FRkE.js";import{a as y}from"./base-DqX9aL5V.js";import{C as w,E as v}from"./vendor-utils-C9jLuAcl.js";import{P as f}from"./PageForm-apsTX4a0.js";import"./vendor-monaco-BxJH8uUv.js";import"./index-CqU4KnuF.js";import"./wp-misc-DyLrwF9p.js";import"./vendor-ui-CrFdsnXa.js";import"./page-template-editor-5uesjTWI.js";import"./wp-blocks-core-65VcejHr.js";import"./wp-block-editor-misc-Bvzg-2Jv.js";import"./wp-core-BVMytgUH.js";import"./wp-block-editor-api-MRWBPx9C.js";import"./wp-block-editor-store-BOagVFfu.js";import"./wp-block-editor-clipboard-D5sqncpm.js";import"./wp-i18n-BuBz6Sgx.js";import"./wp-block-editor-global-styles-DFEUywv4.js";import"./wp-block-editor-typography-D5fCIzVQ.js";import"./wp-components-Uj2D7Nfy.js";import"./wp-block-editor-spacing-CY2h70rf.js";import"./wp-block-editor-menus-CucXu4UM.js";import"./wp-block-editor-core-BF86nm2P.js";import"./wp-block-editor-utils-BmaAXcuk.js";import"./wp-block-editor-colors-60WWD1Za.js";import"./wp-block-editor-a11y-BVzCbFSD.js";import"./wp-block-editor-preview-WXXja22U.js";import"./wp-block-editor-borders-C-QIiBvP.js";import"./wp-block-editor-formats--rvRJrSX.js";import"./wp-block-editor-selection-DBFjOmhH.js";import"./wp-block-editor-inline-CtEBI-J7.js";import"./wp-block-editor-ui-DwG3jajt.js";import"./wp-block-editor-transforms-Bg08EtRt.js";import"./wp-block-editor-patterns-DIcm1rGW.js";import"./wp-block-editor-navigation-ufXSM7dn.js";import"./wp-block-editor-dnd-yPphmZPp.js";import"./wp-block-editor-media-CatADaW3.js";import"./wp-api-COhbxmzY.js";import"./wp-block-editor-keyboard-3DDntAoE.js";import"./wp-block-editor-templates-C6YLNdWR.js";import"./wp-data-CL-okzN5.js";import"./vendor-socket-CMcZe9fK.js";const N=()=>{const[m,h]=e.useState(""),[u,f]=e.useState("all"),[N,k]=e.useState([]),[$,C]=e.useState(""),S=j(),{data:q,isLoading:E}=g({queryKey:["pages",u,m],queryFn:async()=>{const e=new URLSearchParams;"all"!==u&&e.append("status",u),m&&e.append("search",m);return(await y.get(`/admin/pages?${e}`)).data}}),A=b({mutationFn:async e=>{await y.delete(`/admin/pages/${e}`)},onSuccess:()=>{S.invalidateQueries({queryKey:["pages"]}),s.success("페이지가 삭제되었습니다")},onError:()=>{s.error("페이지 삭제에 실패했습니다")}}),F=b({mutationFn:async e=>(await y.post(`/admin/pages/${e}/clone`)).data,onSuccess:()=>{S.invalidateQueries({queryKey:["pages"]}),s.success("페이지가 복제되었습니다")},onError:()=>{s.error("페이지 복제에 실패했습니다")}}),M=b({mutationFn:async({action:e,ids:s})=>{"delete"===e?await y.delete("/admin/pages/bulk",{data:{ids:s}}):"publish"!==e&&"draft"!==e||await y.patch("/admin/pages/bulk",{ids:s,status:e})},onSuccess:()=>{S.invalidateQueries({queryKey:["pages"]}),s.success("일괄 작업이 완료되었습니다"),k([]),C("")},onError:()=>{s.error("일괄 작업에 실패했습니다")}}),D=q?.pages||[],K=q?.total||0,P=e=>({published:"게시됨",draft:"임시저장",private:"비공개",archived:"보관됨",scheduled:"예약됨"}[e]||e);return t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"페이지 관리"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"웹사이트의 정적 페이지를 관리합니다"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsxs(a,{to:"/pages/pattern-builder",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 flex items-center space-x-2",children:[t.jsx(r,{className:"w-4 h-4"}),t.jsx("span",{children:"패턴 빌더"})]}),t.jsxs(a,{to:"/pages/new",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[t.jsx(i,{className:"w-4 h-4"}),t.jsx("span",{children:"새 페이지"})]})]})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),t.jsx("input",{type:"text",value:m,onChange:e=>h(e.target.value),placeholder:"페이지 검색...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),t.jsxs("select",{value:u,onChange:e=>f(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"all",children:"모든 상태"}),t.jsx("option",{value:"published",children:"게시됨"}),t.jsx("option",{value:"draft",children:"임시저장"}),t.jsx("option",{value:"private",children:"비공개"}),t.jsx("option",{value:"scheduled",children:"예약됨"}),t.jsx("option",{value:"archived",children:"보관됨"})]})]}),N.length>0&&t.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[t.jsxs("select",{value:$,onChange:e=>C(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[t.jsx("option",{value:"",children:"일괄 작업"}),t.jsx("option",{value:"publish",children:"게시"}),t.jsx("option",{value:"draft",children:"임시저장으로 변경"}),t.jsx("option",{value:"delete",children:"삭제"})]}),t.jsx("button",{onClick:()=>{$&&0!==N.length&&("delete"!==$||confirm("선택한 페이지를 삭제하시겠습니까?"))&&M.mutate({action:$,ids:N})},disabled:!$,className:"px-3 py-1 bg-gray-600 text-white rounded-md text-sm hover:bg-gray-700 disabled:bg-gray-400",children:"적용"}),t.jsxs("span",{className:"text-sm text-gray-600",children:[N.length,"개 선택됨"]})]})]}),E?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===D.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(d,{className:"w-8 h-8 text-gray-400"})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"페이지가 없습니다"}),t.jsx("p",{className:"text-gray-500 mb-4",children:"첫 번째 페이지를 만들어보세요"}),t.jsxs(a,{to:"/pages/new",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-flex items-center",children:[t.jsx(i,{className:"w-4 h-4 mr-2"}),"새 페이지 만들기"]})]}):t.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[t.jsx("th",{className:"w-12 px-6 py-3",children:t.jsx("input",{type:"checkbox",checked:N.length===D.length,onChange:e=>{return s=e.target.checked,void k(s?D.map(e=>e.id):[]);var s},className:"rounded border-gray-300"})}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"제목"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작성자"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"조회수"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"날짜"}),t.jsx("th",{className:"relative px-6 py-3",children:t.jsx("span",{className:"sr-only",children:"액션"})})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{return t.jsxs("tr",{className:"hover:bg-gray-50",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsx("input",{type:"checkbox",checked:N.includes(e.id),onChange:s=>{s.target.checked?k([...N,e.id]):k(N.filter(s=>s!==e.id))},className:"rounded border-gray-300"})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("div",{className:"flex items-start",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(a,{to:`/pages/${e.id}/edit`,className:"text-sm font-medium text-gray-900 hover:text-blue-600 truncate",children:e.title}),e.isHomepage&&t.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[t.jsx(c,{className:"w-3 h-3 mr-1"}),"홈"]})]}),e.parent&&t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["상위: ",e.parent.title]}),t.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[t.jsx("a",{href:`/${e.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-gray-500 hover:text-blue-600",children:"보기"}),t.jsx(a,{to:`/pages/${e.id}/edit`,className:"text-xs text-gray-500 hover:text-blue-600",children:"편집"}),t.jsx("button",{onClick:()=>F.mutate(e.id),className:"text-xs text-gray-500 hover:text-blue-600",children:"복제"})]})]})})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(n,{className:"w-4 h-4 text-gray-400 mr-2"}),t.jsx("div",{className:"text-sm text-gray-900",children:e.author.name})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s=e.status,{published:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",private:"bg-purple-100 text-purple-800",archived:"bg-red-100 text-red-800",scheduled:"bg-blue-100 text-blue-800"}[s]||"bg-gray-100 text-gray-800"}`,children:P(e.status)})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.views.toLocaleString()}),t.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[t.jsx("div",{className:"text-sm text-gray-900",children:e.publishedAt?w(new Date(e.publishedAt),"yyyy-MM-dd",{locale:v}):"-"}),t.jsx("div",{className:"text-xs text-gray-500",children:"scheduled"===e.status&&e.scheduledAt?`예약: ${w(new Date(e.scheduledAt),"MM/dd HH:mm",{locale:v})}`:`수정: ${w(new Date(e.updatedAt),"MM/dd",{locale:v})}`})]}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[t.jsx("a",{href:`/${e.slug}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600",title:"보기",children:t.jsx(o,{className:"w-4 h-4"})}),t.jsx(a,{to:`/pages/${e.id}/edit`,className:"text-gray-400 hover:text-gray-600",title:"편집",children:t.jsx(x,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>{confirm("이 페이지를 삭제하시겠습니까?")&&A.mutate(e.id)},className:"text-gray-400 hover:text-red-600",title:"삭제",children:t.jsx(p,{className:"w-4 h-4"})})]})})]},e.id);var s})})]}),K>20&&t.jsxs("div",{className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[t.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.jsx("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"이전"}),t.jsx("button",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"다음"})]}),t.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-700",children:["총 ",t.jsx("span",{className:"font-medium",children:K}),"개 페이지"]})}),t.jsx("div",{children:t.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"})})]})]})]})]})},k=()=>t.jsxs(m,{children:[t.jsx(h,{path:"/",element:t.jsx(N,{})}),t.jsx(h,{path:"/new",element:t.jsx(f,{})}),t.jsx(h,{path:"/:id/edit",element:t.jsx(f,{})}),t.jsx(h,{path:"*",element:t.jsx(u,{to:"/",replace:!0})})]});export{k as default};
