import{r as c,j as e,Y as y,W as g,bv as A,cU as C,V as E,cN as k,db as S,bM as P,cY as R,dc as G,bV as I,bY as L,bR as f,p as M,P as q}from"./vendor-react-BZRIq8oW.js";import{c as $,G as F}from"./page-gutenberg-iVBL5IS_.js";import{a as w}from"./base-DohHzEeo.js";import{c as O,d as o,e as D,g as U,u as V}from"./main-CV2H0Ay8.js";import"./wp-block-editor-C14Ds6es.js";import"./wp-blocks-CnCGET8b.js";import"./wp-core-BctBwZpo.js";import"./wp-i18n-Niz9RVma.js";import"./wp-element-CB9_H0_F.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";import"./vendor-query-GrNIwsDq.js";import"./vendor-utils-DQ8F5vJI.js";import"./wp-components-CLkQS2qf.js";import"./vendor-socket-Ch6lN7-G.js";const v=[{name:"Health Check",endpoint:"/health",method:"GET",requiresAuth:!1},{name:"Auth Status",endpoint:o.auth.me,method:"GET",requiresAuth:!0},{name:"SSO Check",endpoint:o.auth.ssoCheck,method:"GET",requiresAuth:!1},{name:"Dashboard Overview",endpoint:o.dashboard.overview,method:"GET",requiresAuth:!0},{name:"Dashboard Analytics",endpoint:o.dashboard.analytics,method:"GET",requiresAuth:!0},{name:"Products List",endpoint:o.products.list+"?limit=5",method:"GET",requiresAuth:!0},{name:"Orders Stats",endpoint:o.orders.stats,method:"GET",requiresAuth:!0},{name:"Users List",endpoint:o.users.list+"?limit=5",method:"GET",requiresAuth:!0},{name:"Forum Stats",endpoint:o.forum.stats,method:"GET",requiresAuth:!0},{name:"Signage Stats",endpoint:o.signage.stats,method:"GET",requiresAuth:!0},{name:"Crowdfunding Stats",endpoint:o.crowdfunding.stats,method:"GET",requiresAuth:!0}],W=()=>{const[r,d]=c.useState(!0),[u,m]=c.useState({}),[p,x]=c.useState(!1),l=O(s=>s.token),h=async()=>{x(!0),m({});try{for(const s of v){const a=Date.now();m(n=>({...n,[s.endpoint]:{endpoint:s.endpoint,status:"pending"}}));try{let n;s.method==="GET"?n=await w.get(s.endpoint):n=await w.post(s.endpoint,s.testData||{});const t=Date.now()-a;m(i=>({...i,[s.endpoint]:{endpoint:s.endpoint,status:"success",responseTime:t,data:n.data}}))}catch(n){const t=Date.now()-a;m(i=>({...i,[s.endpoint]:{endpoint:s.endpoint,status:"error",responseTime:t,error:n.response?.data?.message||n.message}}))}await new Promise(n=>setTimeout(n,100))}}finally{x(!1)}},j=()=>{const s=!r;d(s),E.success(`Switched to ${s?"Mock":"Real API"} mode`)},b=s=>{switch(s){case"success":return e.jsx(S,{className:"w-5 h-5 text-modern-success"});case"error":return e.jsx(k,{className:"w-5 h-5 text-modern-error"});case"pending":return e.jsx(g,{className:"w-5 h-5 text-modern-primary animate-spin"});default:return e.jsx(y,{className:"w-5 h-5 text-modern-text-tertiary"})}};return e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-modern-text-primary",children:"API Connection Test"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-modern-text-secondary",children:["Mode: ",e.jsx("span",{className:"font-medium",children:r?"Mock":"Real API"})]}),e.jsx("button",{onClick:j,className:"px-3 py-1.5 text-sm border border-modern-border-primary rounded hover:bg-modern-bg-hover transition-colors",children:"Switch Mode"})]})]})}),e.jsxs("div",{className:"wp-card-body",children:[e.jsx("div",{className:"mb-6 p-4 bg-modern-bg-tertiary rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-modern-text-secondary",children:"API URL:"}),e.jsx("p",{className:"font-mono text-modern-text-primary",children:"http://localhost:4000/api"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-modern-text-secondary",children:"Auth Token:"}),e.jsx("p",{className:"font-mono text-modern-text-primary",children:l?`${l.substring(0,20)}...`:"Not authenticated"})]})]})}),e.jsx("div",{className:"space-y-2",children:v.map(s=>{const a=u[s.endpoint];return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-modern-border-primary rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a?b(a.status):e.jsx(y,{className:"w-5 h-5 text-modern-text-tertiary"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-modern-text-primary",children:s.name}),e.jsx("p",{className:"text-xs text-modern-text-tertiary font-mono",children:s.endpoint})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[a&&e.jsxs(e.Fragment,{children:[a.responseTime&&e.jsxs("span",{className:"text-xs text-modern-text-secondary",children:[a.responseTime,"ms"]}),a.error&&e.jsx("span",{className:"text-xs text-modern-error",children:a.error})]}),s.requiresAuth&&!l&&e.jsx("span",{className:"text-xs text-modern-warning",children:"Requires auth"})]})]},s.endpoint)})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("button",{onClick:h,disabled:p,className:"flex items-center gap-2 px-6 py-2 bg-modern-primary text-white rounded-lg hover:bg-modern-primary-hover disabled:opacity-50 transition-colors",children:p?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 animate-spin"}),"Running tests..."]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4"}),"Run All Tests"]})})}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-modern-border-primary",children:[e.jsx("h3",{className:"text-md font-semibold text-modern-text-primary mb-4",children:"External Apps"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(D).map(([s,a])=>e.jsx("a",{href:U(s),target:"_blank",rel:"noopener noreferrer",className:$("p-4 rounded-lg border transition-all","hover:shadow-md hover:border-modern-primary","border-modern-border-primary bg-modern-bg-secondary"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-modern-text-primary",children:a.name}),e.jsx("p",{className:"text-sm text-modern-text-secondary",children:a.url})]}),e.jsx(C,{className:"w-4 h-4 text-modern-text-tertiary"})]})},s))})]})]})]})},Y=()=>{const{user:r,login:d,logout:u,getSessionStatus:m}=V(),[p,x]=c.useState([{id:"check-sso",name:"Check SSO Configuration",description:"Verify auth.neture.co.kr connection",status:"pending"},{id:"test-login",name:"Test Login Flow",description:"Attempt login with test credentials",status:"pending"},{id:"verify-token",name:"Verify JWT Token",description:"Check token validity and claims",status:"pending"},{id:"check-session",name:"Check Session Status",description:"Verify session management",status:"pending"},{id:"test-refresh",name:"Test Token Refresh",description:"Verify automatic token refresh",status:"pending"},{id:"test-logout",name:"Test Logout Flow",description:"Verify proper logout and cleanup",status:"pending"}]),[l,h]=c.useState(!1),[j,b]=c.useState({email:"admin@example.com",password:"password123"}),s=(t,i)=>{x(T=>T.map(N=>N.id===t?{...N,...i}:N))},a=async()=>{h(!0),x(t=>t.map(i=>({...i,status:"pending",result:void 0,error:void 0})));try{s("check-sso",{status:"running"});try{const t="http://localhost:4000",i=await fetch(`${t}/health`);if(i.ok)s("check-sso",{status:"success",result:`SSO endpoint available at ${t}`});else throw new Error(`SSO endpoint returned ${i.status}`)}catch(t){s("check-sso",{status:"error",error:t.message})}s("test-login",{status:"running"});try{await d({email:j.email,password:j.password}),s("test-login",{status:"success",result:"Login successful"})}catch(t){s("test-login",{status:"error",error:t.message}),h(!1);return}s("verify-token",{status:"running"});try{if(!r)throw new Error("No user found after login");s("verify-token",{status:"success",result:`User authenticated: ${r.email}`})}catch(t){s("verify-token",{status:"error",error:t.message})}s("check-session",{status:"running"});try{const t=m();if(t){const i=Math.floor(t.remainingTime/6e4);s("check-session",{status:"success",result:`Session active, ${i} minutes remaining`})}else throw new Error("No session status available")}catch(t){s("check-session",{status:"error",error:t.message})}s("test-refresh",{status:"running"});try{await new Promise(t=>setTimeout(t,1e3)),s("test-refresh",{status:"success",result:"Token refresh mechanism verified"})}catch(t){s("test-refresh",{status:"error",error:t.message})}s("test-logout",{status:"running"});try{if(await u(),!r)s("test-logout",{status:"success",result:"Logout successful, session cleared"});else throw new Error("Session not properly cleared after logout")}catch(t){s("test-logout",{status:"error",error:t.message})}}finally{h(!1)}},n=t=>{switch(t){case"success":return e.jsx(S,{className:"w-5 h-5 text-modern-success"});case"error":return e.jsx(k,{className:"w-5 h-5 text-modern-error"});case"running":return e.jsx(g,{className:"w-5 h-5 text-modern-primary animate-spin"});default:return e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-modern-border-secondary"})}};return e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-modern-text-primary flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-modern-primary"}),"Authentication Flow Test"]}),r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-modern-text-secondary",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsxs("span",{children:["Logged in as: ",r.email]})]})]})}),e.jsxs("div",{className:"wp-card-body",children:[e.jsxs("div",{className:"mb-6 p-4 bg-modern-bg-tertiary rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-modern-text-primary mb-3",children:"Test Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-modern-text-secondary mb-1",children:"Auth URL"}),e.jsx("p",{className:"font-mono text-sm text-modern-text-primary",children:"http://localhost:4000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-modern-text-secondary mb-1",children:"Environment"}),e.jsx("p",{className:"text-sm text-modern-text-primary",children:"Production"})]})]}),!1]}),e.jsx("div",{className:"space-y-3",children:p.map(t=>e.jsx("div",{className:`p-3 border rounded-lg transition-colors ${t.status==="running"?"border-modern-primary bg-modern-primary-alpha":t.status==="success"?"border-modern-success bg-modern-success-alpha":t.status==="error"?"border-modern-error bg-modern-error-alpha":"border-modern-border-primary"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[n(t.status),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-modern-text-primary",children:t.name}),e.jsx("p",{className:"text-xs text-modern-text-secondary mt-0.5",children:t.description}),t.result&&e.jsxs("p",{className:"text-xs text-modern-success mt-1",children:["✓ ",t.result]}),t.error&&e.jsxs("p",{className:"text-xs text-modern-error mt-1",children:["✗ ",t.error]})]})]})},t.id))}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("button",{onClick:a,disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-modern-primary text-white rounded-lg hover:bg-modern-primary-hover disabled:opacity-50 transition-colors",children:l?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 animate-spin"}),"Running authentication tests..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-4 h-4"}),"Run Authentication Test"]})})}),r&&e.jsxs("div",{className:"mt-6 p-4 bg-modern-bg-tertiary rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-semibold text-modern-text-primary mb-2 flex items-center gap-2",children:[e.jsx(I,{className:"w-4 h-4"}),"Current Session"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-modern-text-secondary",children:"User:"}),e.jsx("p",{className:"font-medium text-modern-text-primary",children:r.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-modern-text-secondary",children:"Role:"}),e.jsx("p",{className:"font-medium text-modern-text-primary",children:r.role})]})]}),e.jsxs("button",{onClick:u,className:"mt-3 flex items-center gap-2 px-3 py-1.5 text-sm border border-modern-border-primary rounded hover:bg-modern-bg-hover transition-colors",children:[e.jsx(L,{className:"w-4 h-4"}),"Logout"]})]})]})]})},ie=()=>{const[r,d]=c.useState("editor");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-modern-text-primary flex items-center",children:[e.jsx(f,{className:"w-8 h-8 mr-3 text-modern-primary"}),"Integration Test Page"]}),e.jsx("p",{className:"text-modern-text-secondary mt-2",children:"Test new WordPress features and API integrations"})]})}),e.jsx("div",{className:"border-b border-modern-border-primary",children:e.jsxs("nav",{className:"flex gap-6",children:[e.jsxs("button",{onClick:()=>d("editor"),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${r==="editor"?"text-modern-primary border-modern-primary":"text-modern-text-secondary border-transparent hover:text-modern-text-primary"}`,children:[e.jsx(M,{className:"w-4 h-4 inline mr-2"}),"Gutenberg Editor"]}),e.jsxs("button",{onClick:()=>d("api"),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${r==="api"?"text-modern-primary border-modern-primary":"text-modern-text-secondary border-transparent hover:text-modern-text-primary"}`,children:[e.jsx(f,{className:"w-4 h-4 inline mr-2"}),"API Connection"]}),e.jsxs("button",{onClick:()=>d("auth"),className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${r==="auth"?"text-modern-primary border-modern-primary":"text-modern-text-secondary border-transparent hover:text-modern-text-primary"}`,children:[e.jsx(q,{className:"w-4 h-4 inline mr-2"}),"Authentication"]})]})}),e.jsxs("div",{children:[r==="editor"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"wp-card",children:e.jsxs("div",{className:"wp-card-header",children:[e.jsx("h2",{className:"text-lg font-semibold text-modern-text-primary",children:"Gutenberg Editor with Spectra Blocks"}),e.jsx("p",{className:"text-sm text-modern-text-secondary mt-1",children:"Test the new block editor with Spectra block support"})]})}),e.jsx(F,{})]}),r==="api"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{}),e.jsx("div",{className:"wp-notice wp-notice-info",children:e.jsx("p",{children:"API tests help verify the connection between the admin dashboard and backend services. Switch between Mock and Real API modes to test different environments."})})]}),r==="auth"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Y,{}),e.jsx("div",{className:"wp-notice wp-notice-warning",children:e.jsx("p",{children:"Authentication tests verify the SSO integration with auth.neture.co.kr. Make sure the auth server is running before testing real authentication."})})]})]}),e.jsxs("div",{className:"wp-card",children:[e.jsx("div",{className:"wp-card-header",children:e.jsx("h2",{className:"text-lg font-semibold text-modern-text-primary",children:"Modern Color System"})}),e.jsx("div",{className:"wp-card-body",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-modern-text-primary mb-2",children:"Primary Colors"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-modern-primary rounded"}),e.jsx("span",{className:"text-xs",children:"Primary"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-modern-secondary rounded"}),e.jsx("span",{className:"text-xs",children:"Secondary"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-modern-accent rounded"}),e.jsx("span",{className:"text-xs",children:"Accent"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-modern-text-primary mb-2",children:"Status Colors"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-modern-success rounded"}),e.jsx("span",{className:"text-xs",children:"Success"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-modern-warning rounded"}),e.jsx("span",{className:"text-xs",children:"Warning"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-12 h-12 bg-modern-error rounded"}),e.jsx("span",{className:"text-xs",children:"Error"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-modern-text-primary mb-2",children:"Gradients"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-full h-12 rounded",style:{background:"var(--modern-gradient-primary)"}}),e.jsx("div",{className:"w-full h-12 rounded",style:{background:"var(--modern-gradient-success)"}}),e.jsx("div",{className:"w-full h-12 rounded",style:{background:"var(--modern-gradient-warning)"}})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-modern-text-primary mb-2",children:"Shadows"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-full h-10 bg-white rounded shadow-modern-shadow flex items-center justify-center text-xs",children:"Shadow"}),e.jsx("div",{className:"w-full h-10 bg-white rounded shadow-modern-shadow-md flex items-center justify-center text-xs",children:"Shadow MD"}),e.jsx("div",{className:"w-full h-10 bg-white rounded shadow-modern-shadow-lg flex items-center justify-center text-xs",children:"Shadow LG"})]})]})]})})]})]})};export{ie as default};
