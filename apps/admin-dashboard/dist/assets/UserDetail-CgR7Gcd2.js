import{b as s,u as e,r as a,V as r,j as t,A as i,cj as c,cS as l,bQ as d,c2 as o,co as n,cM as m,cw as p,cq as x}from"./vendor-react-BQ6HOJoh.js";import{B as j,d as h,e as v,f as g,g as u}from"./page-template-editor-C7FodHrK.js";import{ak as w,al as b,am as y,an as N,av as f,aw as k}from"./wp-misc-DS9m4_P2.js";import{a as A}from"./base-CCc79OzR.js";import{u as S,C as U}from"./vendor-utils-D-spY-QM.js";import"./wp-block-editor-a11y-DrduSWFW.js";import"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-api-Buev8_QU.js";import"./wp-block-editor-utils-M5qXzE1L.js";import"./wp-block-editor-colors-D38h-Odz.js";import"./wp-blocks-core-6vwQKPfS.js";import"./wp-block-editor-clipboard-Dg0Y1gQ6.js";import"./wp-block-editor-store-B-g1aSix.js";import"./vendor-ui-CrFdsnXa.js";import"./wp-block-editor-dnd-BYoS8-II.js";import"./wp-block-editor-library-BpQvynjE.js";import"./wp-block-editor-menus-BTQ2wZ-f.js";import"./wp-block-editor-keyboard-CeHTtvP5.js";import"./wp-block-editor-typography-Bl_1REQP.js";import"./wp-block-editor-spacing-BD_2CpN7.js";import"./wp-block-editor-core-DL280tSA.js";import"./wp-block-editor-selection-CC4tJpUu.js";import"./wp-block-editor-formats-CLXkimOp.js";import"./wp-block-editor-inline-CpXpUhQU.js";import"./wp-block-editor-ui-B8YE_4QL.js";import"./wp-block-editor-transforms-jLcKa8Hv.js";import"./wp-block-editor-preview-iw2Xu1ib.js";import"./wp-block-editor-global-styles-CV5-K6QF.js";import"./wp-block-editor-borders-BH1devca.js";import"./wp-block-editor-patterns-BXdHo9lm.js";import"./wp-block-editor-navigation-BFSoKzg0.js";import"./wp-block-editor-media-Bg-JiQDT.js";import"./wp-api-BeoadipR.js";import"./wp-i18n-DGPtqsXY.js";import"./wp-core-Y-jV-nrZ.js";import"./vendor-monaco-BxJH8uUv.js";import"./wp-block-editor-upload-BLw1R9wP.js";import"./wp-block-editor-templates-o1_wAMb9.js";import"./vendor-query-LYSOqK5P.js";import"./wp-data-BmtL8k4r.js";import"./wp-components-CeQNCpMW.js";import"./index-C-wyiE3c.js";import"./vendor-socket-CMcZe9fK.js";function C(){const{id:C}=s(),$=e(),[E,R]=a.useState(null),[_,D]=a.useState([]),[F,L]=a.useState(!0);a.useEffect(()=>{C&&B()},[C]);const B=async()=>{try{L(!0);const s=await A.get(`/v1/users/${C}`);s.data.success&&R(s.data.data);const e=await A.get(`/v1/users/${C}/approval-history`);e.data.success&&D(e.data.data)}catch(s){r.error("Failed to load user details"),$("/users")}finally{L(!1)}},M=s=>({super_admin:"bg-purple-500",admin:"bg-red-500",vendor:"bg-blue-500",seller:"bg-green-500",customer:"bg-gray-500",business:"bg-yellow-500",moderator:"bg-indigo-500",partner:"bg-pink-500"}[s]||"bg-gray-500"),V=s=>{switch(s){case"approved":return t.jsx(c,{className:"h-4 w-4 text-green-500"});case"rejected":return t.jsx(l,{className:"h-4 w-4 text-red-500"});default:return t.jsx(x,{className:"h-4 w-4 text-gray-500"})}};return F?t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),t.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})}):E?t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs(j,{variant:"ghost",onClick:()=>$("/users"),children:[t.jsx(i,{className:"mr-2 h-4 w-4"}),"Back to Users"]}),t.jsx("h1",{className:"text-2xl font-bold",children:E?.name||"Unknown User"})]}),t.jsxs("div",{className:"flex gap-2",children:["pending"===E?.status&&t.jsxs(t.Fragment,{children:[t.jsxs(j,{onClick:async()=>{try{await A.post(`/v1/users/${C}/approve`,{notes:"Approved via admin dashboard"}),r.success("User approved successfully"),B()}catch(s){r.error("Failed to approve user")}},children:[t.jsx(c,{className:"mr-2 h-4 w-4"}),"Approve"]}),t.jsxs(j,{variant:"destructive",onClick:async()=>{try{await A.post(`/v1/users/${C}/reject`,{notes:"Rejected via admin dashboard"}),r.success("User rejected successfully"),B()}catch(s){r.error("Failed to reject user")}},children:[t.jsx(l,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),t.jsxs(j,{variant:"outline",onClick:()=>$(`/users/${C}/edit`),children:[t.jsx(d,{className:"mr-2 h-4 w-4"}),"Edit"]})]})]}),t.jsxs(h,{defaultValue:"overview",className:"w-full",children:[t.jsxs(v,{children:[t.jsx(g,{value:"overview",children:"Overview"}),t.jsx(g,{value:"history",children:"Approval History"}),t.jsx(g,{value:"activity",children:"Activity"})]}),t.jsxs(u,{value:"overview",className:"space-y-6",children:[t.jsxs(w,{children:[t.jsx(b,{children:t.jsx(y,{children:"User Information"})}),t.jsx(N,{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(o,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),t.jsx("p",{className:"font-medium",children:E?.email})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(n,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),t.jsx(f,{className:`${q=E?.status||"pending",{active:"bg-green-500",approved:"bg-green-500",pending:"bg-yellow-500",rejected:"bg-red-500"}[q]||"bg-gray-500"} text-white`,children:E?.status})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(m,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Joined"}),t.jsx("p",{className:"font-medium",children:E?S(new Date(Date.now()),"MMM d, yyyy"):""})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(p,{className:"h-5 w-5 text-gray-400"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Last Login"}),t.jsx("p",{className:"font-medium",children:E?.lastLoginAt?U(new Date(E?.lastLoginAt),{addSuffix:!0}):"Never"})]})]})]})})]}),t.jsxs(w,{children:[t.jsx(b,{children:t.jsx(y,{children:"Roles & Permissions"})}),t.jsx(N,{children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Assigned Roles"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:E?.role?[E.role]:[].map(s=>t.jsx(f,{className:`${M(s)} text-white`,children:s.replace("_"," ")},s))})]}),E?.permissions&&E?.permissions.length>0&&t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Special Permissions"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:E?.permissions.map(s=>t.jsx(f,{variant:"outline",children:s},s))})]})]})})]}),t.jsxs(w,{children:[t.jsx(b,{children:t.jsx(y,{children:"Account Status"})}),t.jsx(N,{children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Email Verified"}),t.jsx("p",{className:"text-2xl font-bold",children:E?.isEmailVerified?"✓":"✗"})]}),t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Account Active"}),t.jsx("p",{className:"text-2xl font-bold",children:E?.isActive?"✓":"✗"})]}),t.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Login Attempts"}),t.jsx("p",{className:"text-2xl font-bold",children:E?.loginAttempts||0})]})]})})]})]}),t.jsx(u,{value:"history",className:"space-y-4",children:t.jsxs(w,{children:[t.jsxs(b,{children:[t.jsx(y,{children:"Approval History"}),t.jsx(k,{children:"Timeline of all approval actions for this user"})]}),t.jsx(N,{children:0===_.length?t.jsx("p",{className:"text-center text-gray-500 py-8",children:"No approval history found"}):t.jsx("div",{className:"space-y-4",children:_.map(s=>t.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg",children:[t.jsx("div",{className:"mt-1",children:V(s.action)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("p",{className:"font-medium",children:["approved"===s.action&&"Approved","rejected"===s.action&&"Rejected","status_changed"===s.action&&"Status Changed"]}),t.jsxs("span",{className:"text-sm text-gray-500",children:["by ",s.admin?.fullName||s.admin?.email||"System"]})]}),s.notes&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:s.notes}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[t.jsxs("span",{children:[s.previous_status," → ",s.new_status]}),t.jsx("span",{children:U(new Date(s.created_at),{addSuffix:!0})})]})]})]},s.id))})})]})}),t.jsx(u,{value:"activity",children:t.jsxs(w,{children:[t.jsxs(b,{children:[t.jsx(y,{children:"Recent Activity"}),t.jsx(k,{children:"User's recent actions and system events"})]}),t.jsx(N,{children:t.jsx("p",{className:"text-center text-gray-500 py-8",children:"Activity tracking coming soon"})})]})})]})]}):t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-gray-500",children:"User not found"}),t.jsx(j,{onClick:()=>$("/users"),className:"mt-4",children:"Back to Users"})]})});var q}export{C as default};
