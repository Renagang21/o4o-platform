import{r as o,j as e,M as q,Q as O,a1 as B,U as Fe,co as Pe,bo as Oe,cm as Ue,ay as de,cp as We,w as ze,z as y,a as oe,X as xe,cq as ue,bk as Ke,ad as me,Y as $,u as qe,b as Be,c as Qe,F as ae,aw as re,b8 as ne,aA as le,l as ce,au as Ve,C as Xe,bq as Ye,cr as Ge,c6 as He,c7 as K}from"./vendor-react-P__8vGRG.js";import{u as x}from"./unified-client-DYKT-pLO.js";import"./vendor-utils-dq2XMRwt.js";import"./index-C0gS3Jf3.js";import"./vendor-query-CucHvDcH.js";import"./page-template-editor-BTdVTS-a.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-socket-DgcwqWsT.js";const Je=()=>{const[M,r]=o.useState(""),[n,d]=o.useState([]),[b,m]=o.useState(null),[h]=o.useState([{id:"1",name:"주 메뉴",slug:"primary-menu",location:"primary",itemCount:7,createdAt:"2024-01-15",updatedAt:"2024-01-20"},{id:"2",name:"푸터 메뉴",slug:"footer-menu",location:"footer",itemCount:5,createdAt:"2024-01-16",updatedAt:"2024-01-19"},{id:"3",name:"모바일 메뉴",slug:"mobile-menu",location:"mobile",itemCount:6,createdAt:"2024-01-17",updatedAt:"2024-01-18"},{id:"4",name:"소셜 링크",slug:"social-links",location:"social",itemCount:4,createdAt:"2024-01-18",updatedAt:"2024-01-18"}]),g={primary:{name:"주 메뉴",icon:Ue,color:"blue"},footer:{name:"푸터 메뉴",icon:Oe,color:"gray"},mobile:{name:"모바일 메뉴",icon:Pe,color:"green"},social:{name:"소셜 링크",icon:Fe,color:"purple"}},u=h.filter(l=>l.name.toLowerCase().includes(M.toLowerCase())||l.slug.toLowerCase().includes(M.toLowerCase())),v=l=>{confirm("이 메뉴를 삭제하시겠습니까?")&&y.success("메뉴가 삭제되었습니다")},R=l=>{y.success(`"${l.name}" 메뉴가 복제되었습니다`)},T=()=>{if(n.length===0){y.error("삭제할 메뉴를 선택하세요");return}confirm(`선택한 ${n.length}개 메뉴를 삭제하시겠습니까?`)&&(y.success(`${n.length}개 메뉴가 삭제되었습니다`),d([]))},w=()=>{n.length===u.length?d([]):d(u.map(l=>l.id))},C=l=>{if(!l||!g[l])return null;const j=g[l],f={blue:"bg-blue-100 text-blue-700 border-blue-200",gray:"bg-gray-100 text-gray-700 border-gray-200",green:"bg-green-100 text-green-700 border-green-200",purple:"bg-purple-100 text-purple-700 border-purple-200"};return{icon:j.icon,className:f[j.color],name:j.name}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-gray-700"}),"메뉴"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"사이트의 내비게이션 메뉴를 관리합니다"})]}),e.jsxs(O,{to:"/appearance/menus/new",className:"px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 flex items-center gap-2 shadow-sm transition-all duration-200 transform hover:scale-105",children:[e.jsx(B,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"새 메뉴 만들기"})]})]})}),e.jsx("div",{className:"px-8 py-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Object.entries(g).map(([l,j])=>{const f=h.filter(E=>E.location===l).length,N=j.icon,S=C(l);return e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:j.name}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:f})]}),e.jsx("div",{className:`p-3 rounded-lg ${S?.className}`,children:e.jsx(N,{className:"w-6 h-6"})})]})},l)})})}),e.jsx("div",{className:"px-8 pb-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:M,onChange:l=>r(l.target.value),placeholder:"메뉴 검색...",className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n.length>0&&e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-blue-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-blue-700",children:[n.length,"개 선택됨"]}),e.jsx("button",{onClick:T,className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"삭제"}),e.jsx("button",{onClick:()=>d([]),className:"text-sm text-gray-600 hover:text-gray-700",children:"선택 해제"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(We,{className:"w-5 h-5"})}),e.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:e.jsx(ze,{className:"w-5 h-5"})})]})]})})}),e.jsx("div",{className:"px-8 pb-8",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:u.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(q,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"메뉴가 없습니다"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"첫 번째 메뉴를 만들어보세요"}),e.jsxs(O,{to:"/appearance/menus/new",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(B,{className:"w-4 h-4"}),"새 메뉴 만들기"]})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:n.length===u.length&&u.length>0,onChange:w,className:"rounded border-gray-300"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"메뉴 이름"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"위치"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"항목 수"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"마지막 수정"}),e.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"작업"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(l=>{const j=C(l.location),f=j?.icon;return e.jsxs("tr",{className:"hover:bg-blue-50/30 transition-colors",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("input",{type:"checkbox",checked:n.includes(l.id),onChange:N=>{N.target.checked?d([...n,l.id]):d(n.filter(S=>S!==l.id))},className:"rounded border-gray-300"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{children:[e.jsx(O,{to:`/appearance/menus/${l.id}/edit`,className:"text-base font-semibold text-gray-900 hover:text-blue-600 transition-colors",children:l.name}),e.jsx("div",{className:"flex items-center gap-3 mt-2",children:b===l.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",defaultValue:l.slug,className:"px-2 py-0.5 text-xs border rounded",onKeyDown:N=>{N.key==="Enter"&&(m(null),y.success("슬러그가 업데이트되었습니다")),N.key==="Escape"&&m(null)},autoFocus:!0}),e.jsx("button",{onClick:()=>{m(null),y.success("슬러그가 업데이트되었습니다")},className:"text-green-600 hover:text-green-700",children:e.jsx(oe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>m(null),className:"text-gray-600 hover:text-gray-700",children:e.jsx(xe,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["슬러그: ",e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:l.slug})]}),e.jsx("button",{onClick:()=>m(l.id),className:"text-xs text-blue-600 hover:text-blue-700",children:"편집"})]})})]})}),e.jsx("td",{className:"px-6 py-5",children:j&&f&&e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium border ${j.className}`,children:[e.jsx(f,{className:"w-3 h-3"}),j.name]})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:l.itemCount}),e.jsx("span",{className:"text-xs text-gray-500",children:"항목"})]})}),e.jsxs("td",{className:"px-6 py-5",children:[e.jsx("div",{className:"text-sm text-gray-600",children:new Date(l.updatedAt).toLocaleDateString("ko-KR")}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["생성: ",new Date(l.createdAt).toLocaleDateString("ko-KR")]})]}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(O,{to:`/appearance/menus/${l.id}/edit`,className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"편집",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(l),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-all",title:"복제",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(l.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"삭제",children:e.jsx(me,{className:"w-4 h-4"})})]})})]},l.id)})})]})})}),e.jsx("div",{className:"px-8 pb-8",children:e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"메뉴 사용 가이드"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"메뉴 만들기"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:'"새 메뉴 만들기" 버튼을 클릭합니다'})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"페이지, 글, 카테고리 등을 메뉴에 추가합니다"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"드래그 앤 드롭으로 순서를 조정합니다"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"메뉴 위치"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"주 메뉴: 사이트 상단 내비게이션"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"푸터 메뉴: 사이트 하단 링크"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx($,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"모바일 메뉴: 모바일 전용 내비게이션"})]})]})]})]})]})})]})};class A{static async getMenus(r){return(await x.raw.get("/api/v1/menus",{params:r})).data}static async getMenu(r){return(await x.raw.get(`/api/v1/menus/${r}`)).data}static async getMenuByLocation(r){return(await x.raw.get(`/api/v1/menus/location/${r}`)).data}static async createMenu(r){return(await x.raw.post("/api/v1/menus",r)).data}static async updateMenu(r,n){return(await x.raw.put(`/api/v1/menus/${r}`,n)).data}static async deleteMenu(r){return(await x.raw.delete(`/api/v1/menus/${r}`)).data}static async duplicateMenu(r,n,d){return(await x.raw.post(`/api/v1/menus/${r}/duplicate`,{name:n,slug:d})).data}static async reorderMenuItems(r,n){return(await x.raw.put(`/api/v1/menus/${r}/reorder`,n)).data}static async createMenuItem(r){return(await x.raw.post("/api/v1/menu-items",r)).data}static async updateMenuItem(r,n){return(await x.raw.put(`/api/v1/menu-items/${r}`,n)).data}static async deleteMenuItem(r){return(await x.raw.delete(`/api/v1/menu-items/${r}`)).data}static async getMenuLocations(){return(await x.raw.get("/api/v1/menus/locations")).data}static async createMenuItemConditions(r,n){return(await x.raw.post(`/api/v1/menu-items/${r}/conditions`,n)).data}static async getMenuItemConditions(r){return(await x.raw.get(`/api/v1/menu-items/${r}/conditions`)).data}static async deleteMenuItemConditions(r){return(await x.raw.delete(`/api/v1/menu-items/${r}/conditions`)).data}static async createMenuStyles(r,n){return(await x.raw.post(`/api/v1/menus/${r}/styles`,n)).data}static async getMenuStyles(r){return(await x.raw.get(`/api/v1/menus/${r}/styles`)).data}static async updateMenuStyles(r,n){return(await x.raw.put(`/api/v1/menus/${r}/styles`,n)).data}static async createMegaMenu(r,n){return(await x.raw.post(`/api/v1/menus/${r}/mega-menu`,n)).data}static async getMegaMenu(r){return(await x.raw.get(`/api/v1/menus/${r}/mega-menu`)).data}static async updateMegaMenu(r,n){return(await x.raw.put(`/api/v1/menus/${r}/mega-menu`,n)).data}static buildMenuTree(r){const n=new Map,d=[];r.forEach(m=>{n.set(m.id,{...m,children:[]})}),r.forEach(m=>{const h=n.get(m.id);if(m.parent?.id){const g=n.get(m.parent.id);g&&(g.children=g.children||[],g.children.push(h))}else d.push(h)});const b=m=>{m.sort((h,g)=>h.order_num-g.order_num),m.forEach(h=>{h.children&&h.children.length>0&&b(h.children)})};return b(d),d}static flattenMenuTree(r,n){const d=[];let b=0;const m=(h,g)=>{h.forEach(u=>{d.push({id:u.id,parent_id:g,order_num:b++}),u.children&&u.children.length>0&&m(u.children,u.id)})};return m(r,n),d}}const ie=()=>{const M=qe(),{id:r}=Be(),n=o.useRef(null),d=o.useRef(null),[b,m]=o.useState(""),[h,g]=o.useState(""),[u,v]=o.useState([]),[R,T]=o.useState(""),[w,C]=o.useState("pages"),[l,j]=o.useState(!1),[f,N]=o.useState(""),[S,E]=o.useState(""),[U,pe]=o.useState(""),[_,W]=o.useState([]),[he,z]=o.useState(null),[ge,Q]=o.useState(!1),[,V]=o.useState(!1),[Ze,X]=o.useState(!1),[F,Y]=o.useState(null),[be,je]=o.useState([]),[ye,fe]=o.useState([]),[Ne,ve]=o.useState([]),[we,ke]=o.useState([]),[Ce,G]=o.useState([]);o.useEffect(()=>{Me(),Se()},[]),o.useEffect(()=>{r&&Ie(r)},[r]);const Me=async()=>{try{const s=await x.raw.get("/api/pages?limit=100");s.data?.success&&s.data?.data&&je(s.data.data.map(i=>({id:i.id,title:i.title,type:"page",url:`/${i.slug}`})));const t=await x.raw.get("/api/posts?limit=100");t.data?.success&&t.data?.data&&fe(t.data.data.map(i=>({id:i.id,title:i.title,type:"post",url:`/blog/${i.slug}`})));const c=await x.raw.get("/api/categories?limit=100");c.data?.success&&c.data?.data&&ve(c.data.data.map(i=>({id:i.id,title:i.name,type:"category",url:`/category/${i.slug}`})));const a=await x.raw.get("/api/tags?limit=100");a.data?.success&&a.data?.data&&ke(a.data.data.map(i=>({id:i.id,title:i.name,type:"tag",url:`/tag/${i.slug}`})))}catch{}},Se=async()=>{try{const s=await A.getMenuLocations();s.success&&s.data&&G(s.data.map(t=>({id:t.key||t.id,key:t.key,name:t.name,description:t.description||""})))}catch{G([{id:"primary",key:"primary",name:"주 메뉴",description:"사이트 상단에 표시되는 메인 메뉴"},{id:"footer",key:"footer",name:"푸터 메뉴",description:"사이트 하단에 표시되는 메뉴"},{id:"mobile",key:"mobile",name:"모바일 메뉴",description:"모바일 기기에서 표시되는 메뉴"},{id:"social",key:"social",name:"소셜 링크",description:"소셜 미디어 링크 메뉴"}])}},Ie=async s=>{V(!0);try{const t=await A.getMenu(s);if(t.success&&t.data){const c=t.data;if(Y(c.id),m(c.name),g(c.slug),T(c.location||""),c.items&&c.items.length>0){const a=H(c.items);v(a)}}}catch{y.error("메뉴를 불러오는데 실패했습니다")}finally{V(!1)}},H=s=>s.map(t=>({id:t.id,title:t.title,url:t.url,type:t.type||"custom",target:t.target,cssClass:t.css_classes,description:t.description,originalId:t.object_id,children:t.children?H(t.children):[],menu_id:t.menu_id,order_num:t.order_num})),J=(s,t,c)=>s.map((a,i)=>({id:a.id.startsWith("new-")?void 0:a.id,menu_id:t,parent_id:c,title:a.title,url:a.url,type:a.type,target:a.target||"_self",object_id:a.originalId,css_classes:a.cssClass,description:a.description,order_num:i,is_active:!0,children:a.children?J(a.children,t,a.id):[]}));o.useEffect(()=>{if(b&&!r){const s=b.toLowerCase().replace(/[^a-z0-9가-힣ㄱ-ㅎㅏ-ㅣ\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();g(s)}},[b,r]);const Z=()=>{let s=[];switch(w){case"pages":s=be;break;case"posts":s=ye;break;case"categories":s=Ne;break;case"tags":s=we;break;default:s=[]}return U?s.filter(t=>t.title.toLowerCase().includes(U.toLowerCase())):s},Le=()=>{if(_.length===0){y.error("항목을 선택해주세요");return}const s=Z(),t=_.map(c=>{const a=s.find(i=>i.id===c);return a?{id:Date.now().toString()+Math.random(),title:a.title,url:a.url,type:a.type,originalId:a.id}:null}).filter(Boolean);v([...u,...t]),W([]),y.success(`${t.length}개 항목이 추가되었습니다`)},$e=()=>{if(!f||!S){y.error("제목과 URL을 입력해주세요");return}const s={id:Date.now().toString(),title:f,url:S,type:"custom"};v([...u,s]),N(""),E(""),j(!1),y.success("사용자 정의 링크가 추가되었습니다")},_e=s=>{const t=c=>c.filter(a=>a.id===s?!1:(a.children&&(a.children=t(a.children)),!0));v(t(u)),y.success("메뉴 항목이 삭제되었습니다")},D=(s,t)=>{const c=a=>a.map(i=>i.id===s?{...i,...t}:i.children?{...i,children:c(i.children)}:i);v(c(u))},Ae=s=>{const t=c=>c.map(a=>a.id===s?{...a,isOpen:!a.isOpen}:a.children?{...a,children:t(a.children)}:a);v(t(u))},Ee=(s,t)=>{n.current=t,Q(!0),s.dataTransfer.effectAllowed="move"},De=(s,t)=>{d.current=t},Re=()=>{if(n.current&&d.current&&n.current.id!==d.current.id){const s=n.current,t=d.current,c=p=>{for(let k=0;k<p.length;k++){if(p[k].id===s.id){const I=p.splice(k,1)[0];return{items:p,removed:I}}if(p[k].children){const I=c(p[k].children);if(I.removed)return{items:p,removed:I.removed}}}return{items:p}},a=(p,k,I)=>{for(let L=0;L<p.length;L++){if(p[L].id===I)return p.splice(L+1,0,k),p;p[L].children&&(p[L].children=a(p[L].children,k,I))}return p};let i=[...u];const{items:P,removed:te}=c(i);te&&(i=a(P,te,t.id),v(i))}n.current=null,d.current=null,Q(!1)},Te=async()=>{if(!b){y.error("메뉴 이름을 입력해주세요");return}X(!0);try{const s={name:b,slug:h||b.toLowerCase().replace(/\s+/g,"-"),location:R,description:"",is_active:!0};let t;if(F||r?t=(await A.updateMenu(F||r,s)).data:(t=(await A.createMenu(s)).data,Y(t.id)),t&&u.length>0){const c=J(u,t.id);for(const a of c)await ee(a,t.id)}y.success("메뉴가 저장되었습니다!"),!r&&!F&&M("/menus")}catch{y.error("메뉴 저장 중 오류가 발생했습니다")}finally{X(!1)}},ee=async(s,t,c)=>{const a={menu_id:t,parent_id:c,title:s.title,url:s.url,type:s.type,target:s.target,object_id:s.object_id,css_classes:s.css_classes,description:s.description,order_num:s.order_num,is_active:!0};let i=s.id;if(!s.id||s.id.startsWith("new-")?i=(await A.createMenuItem(a)).data.id:await A.updateMenuItem(s.id,a),s.children&&s.children.length>0)for(const P of s.children)await ee(P,t,i);return i},se=(s,t=0)=>{const c=he===s.id;return e.jsxs("div",{className:`${t>0?"ml-8":""}`,children:[e.jsx("div",{className:`group bg-white border rounded-lg mb-2 ${ge?"cursor-move":""} hover:border-blue-300 transition-colors`,draggable:!0,onDragStart:a=>Ee(a,s),onDragEnter:a=>De(a,s),onDragEnd:Re,children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[s.children&&s.children.length>0&&e.jsx("button",{onClick:()=>Ae(s.id),className:"mr-2 text-gray-500 hover:text-gray-700",children:s.isOpen?e.jsx(Xe,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-1",children:c?e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",value:s.title,onChange:a=>D(s.id,{title:a.target.value}),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"메뉴 제목"}),s.type==="custom"&&e.jsx("input",{type:"text",value:s.url||"",onChange:a=>D(s.id,{url:a.target.value}),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"URL"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s.cssClass||"",onChange:a=>D(s.id,{cssClass:a.target.value}),className:"flex-1 px-2 py-1 border rounded text-sm",placeholder:"CSS 클래스"}),e.jsxs("select",{value:s.target||"_self",onChange:a=>D(s.id,{target:a.target.value}),className:"px-2 py-1 border rounded text-sm",children:[e.jsx("option",{value:"_self",children:"같은 탭"}),e.jsx("option",{value:"_blank",children:"새 탭"})]})]}),e.jsx("input",{type:"text",value:s.description||"",onChange:a=>D(s.id,{description:a.target.value}),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"설명 (선택사항)"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.title}),s.type==="page"&&e.jsx(ae,{className:"w-3 h-3 text-blue-500"}),s.type==="post"&&e.jsx(re,{className:"w-3 h-3 text-green-500"}),s.type==="category"&&e.jsx(le,{className:"w-3 h-3 text-orange-500"}),s.type==="tag"&&e.jsx(ce,{className:"w-3 h-3 text-purple-500"}),s.type==="custom"&&e.jsx(ne,{className:"w-3 h-3 text-gray-500"}),s.target==="_blank"&&e.jsx(Ye,{className:"w-3 h-3 text-gray-400"})]}),s.url&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.url}),s.description&&e.jsx("div",{className:"text-xs text-gray-600 italic mt-1",children:s.description})]})})]}),e.jsx("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:c?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>z(null),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:e.jsx(oe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(null),className:"p-1 text-gray-600 hover:bg-gray-100 rounded",children:e.jsx(xe,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>z(s.id),className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"편집",children:e.jsx(ue,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-1 text-gray-600 hover:bg-gray-100 rounded cursor-move",title:"드래그하여 이동",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_e(s.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"삭제",children:e.jsx(me,{className:"w-4 h-4"})})]})})]})})}),s.children&&s.isOpen&&e.jsx("div",{className:"mt-1",children:s.children.map(a=>se(a,t+1))})]},s.id)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"메뉴 편집"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"사이트 메뉴를 만들고 관리합니다"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>M("/menus"),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"취소"}),e.jsxs("button",{onClick:Te,className:"px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 flex items-center gap-2 shadow-sm",children:[e.jsx(Qe,{className:"w-4 h-4"}),"메뉴 저장"]})]})]})}),e.jsx("div",{className:"px-8 py-6",children:e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-96",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"메뉴에 추가"})}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>C("pages"),className:`flex-1 px-4 py-2 text-sm font-medium ${w==="pages"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ae,{className:"w-4 h-4 inline mr-1"}),"페이지"]}),e.jsxs("button",{onClick:()=>C("posts"),className:`flex-1 px-4 py-2 text-sm font-medium ${w==="posts"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(re,{className:"w-4 h-4 inline mr-1"}),"글"]}),e.jsxs("button",{onClick:()=>C("links"),className:`flex-1 px-4 py-2 text-sm font-medium ${w==="links"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ne,{className:"w-4 h-4 inline mr-1"}),"링크"]})]}),e.jsxs("div",{className:"flex border-b",children:[e.jsxs("button",{onClick:()=>C("categories"),className:`flex-1 px-4 py-2 text-sm font-medium ${w==="categories"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(le,{className:"w-4 h-4 inline mr-1"}),"카테고리"]}),e.jsxs("button",{onClick:()=>C("tags"),className:`flex-1 px-4 py-2 text-sm font-medium ${w==="tags"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(ce,{className:"w-4 h-4 inline mr-1"}),"태그"]})]}),e.jsx("div",{className:"p-4",children:w==="links"?e.jsx("div",{className:"space-y-3",children:l?e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:S,onChange:s=>E(s.target.value),placeholder:"https://example.com",className:"w-full px-3 py-2 border rounded-lg text-sm"}),e.jsx("input",{type:"text",value:f,onChange:s=>N(s.target.value),placeholder:"링크 텍스트",className:"w-full px-3 py-2 border rounded-lg text-sm"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:$e,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"추가"}),e.jsx("button",{onClick:()=>{j(!1),N(""),E("")},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:"취소"})]})]}):e.jsxs("button",{onClick:()=>j(!0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:[e.jsx(B,{className:"w-4 h-4 inline mr-2"}),"사용자 정의 링크 추가"]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(de,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:U,onChange:s=>pe(s.target.value),placeholder:"검색...",className:"w-full pl-9 pr-3 py-2 border rounded-lg text-sm"})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Z().map(s=>e.jsxs("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:_.includes(s.id),onChange:t=>{t.target.checked?W([..._,s.id]):W(_.filter(c=>c!==s.id))},className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700",children:s.title})]},s.id))}),e.jsx("button",{onClick:Le,disabled:_.length===0,className:"w-full mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-sm",children:"메뉴에 추가"})]})})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"메뉴 설정"})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"메뉴 이름"}),e.jsx("input",{type:"text",value:b,onChange:s=>m(s.target.value),placeholder:"메뉴 이름을 입력하세요",className:"w-full px-3 py-2 border rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"슬러그"}),e.jsx("input",{type:"text",value:h,onChange:s=>g(s.target.value),placeholder:"menu-slug",className:"w-full px-3 py-2 border rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"메뉴 위치"}),e.jsx("div",{className:"space-y-2",children:Ce.map(s=>e.jsxs("label",{className:"flex items-start gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[e.jsx("input",{type:"radio",name:"location",value:s.id,checked:R===s.id,onChange:t=>T(t.target.value),className:"mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.id))})]})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"메뉴 구조"}),e.jsx("div",{className:"text-sm text-gray-500",children:"드래그하여 순서 변경"})]}),e.jsx("div",{className:"p-4",children:u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"메뉴 항목을 추가하세요"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"왼쪽 패널에서 페이지, 글, 카테고리 등을 선택하여 메뉴에 추가할 수 있습니다"})]}):e.jsx("div",{className:"space-y-2",children:u.map(s=>se(s))})}),u.length>0&&e.jsx("div",{className:"p-4 border-t bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-sm"}),e.jsx("span",{children:"페이지"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-sm"}),e.jsx("span",{children:"글"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-sm"}),e.jsx("span",{children:"카테고리"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-sm"}),e.jsx("span",{children:"태그"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-sm"}),e.jsx("span",{children:"사용자 정의"})]})]})})]}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),"사용 팁"]}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• 메뉴 항목을 드래그하여 순서를 변경할 수 있습니다"}),e.jsx("li",{children:"• 항목을 다른 항목 아래로 드래그하면 하위 메뉴가 됩니다"}),e.jsx("li",{children:"• 각 항목의 편집 버튼을 클릭하여 세부 설정을 변경할 수 있습니다"}),e.jsx("li",{children:"• CSS 클래스를 추가하여 스타일을 커스터마이징할 수 있습니다"})]})]})]})]})})]})},is=()=>e.jsxs(He,{children:[e.jsx(K,{path:"/",element:e.jsx(Je,{})}),e.jsx(K,{path:"/new",element:e.jsx(ie,{})}),e.jsx(K,{path:"/:id/edit",element:e.jsx(ie,{})})]});export{is as default};
//# sourceMappingURL=Menus-CSnhM7Ed.js.map
