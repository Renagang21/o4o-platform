import{a3 as e,r as t,j as s,a5 as a,cM as l,Y as n,a1 as r,P as c,D as o}from"./vendor-react-Bb0TGSr4.js";import{C as i}from"./contentApi-CympKPIU.js";import"./vendor-monaco-BxJH8uUv.js";import"./unified-client-DTaHHfiV.js";import"./vendor-utils-B-KQWpLj.js";import"./index--Zslr9cr.js";import"./vendor-query-BEO_OofR.js";import"./page-gutenberg-CGPrHM9_.js";import"./vendor-ui-CrFdsnXa.js";import"./wp-foundation-Ht0JG6Uo.js";import"./wp-components-CoD93iDH.js";import"./vendor-socket-CMcZe9fK.js";const d=e=>({type:"doc",content:e.map(e=>({type:"custom-block",attrs:{id:e.id,blockType:e.type,content:e.content,settings:e.settings}}))}),m=[{type:"hero",label:"Hero Section",icon:"🏔️"},{type:"heading",label:"Heading",icon:"📝"},{type:"paragraph",label:"Paragraph",icon:"📄"},{type:"image",label:"Image",icon:"🖼️"},{type:"button",label:"Button",icon:"🔘"},{type:"columns",label:"Columns",icon:"📊"},{type:"spacer",label:"Spacer",icon:"↕️"}],x=()=>{const o=e(),[x,u]=t.useState(null),[b,g]=t.useState([]),[y,j]=t.useState(null),[v,N]=t.useState(!0),[f,w]=t.useState(!1),[k,S]=t.useState(!1);t.useEffect(()=>{C()},[]);const C=async()=>{try{N(!0);const e={id:"homepage-1",name:"homepage",type:"page",layoutType:"custom",description:"Main homepage template",content:d([]),status:"active",isDefault:!0,active:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};u(e),g([])}catch(e){}finally{N(!1)}},D=e=>{switch(e){case"hero":return{title:"Welcome to Our Platform",subtitle:"Build amazing experiences",backgroundImage:"",buttons:[{text:"Get Started",url:"/signup",style:"primary"},{text:"Learn More",url:"/about",style:"secondary"}]};case"heading":return{text:"New Heading",level:2};case"paragraph":return{text:"Enter your content here..."};case"image":return{src:"",alt:"Image description"};case"button":return{text:"Click Me",url:"#",style:"primary"};case"columns":return{columns:[{blocks:[]},{blocks:[]}]};case"spacer":return{height:"2rem"};default:return{}}},M=e=>"hero"===e?{height:"500px",overlay:!0,overlayOpacity:.5}:{},I=async()=>{if(x)try{w(!0);const e=await i.updateTemplate(x.id,{...x,content:d(b),updatedAt:(new Date).toISOString()});u(e.data),alert("Homepage template saved successfully!")}catch(e){alert("Failed to save template")}finally{w(!1)}};return v?s.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):s.jsxs("div",{className:"flex h-screen bg-gray-50",children:[s.jsxs("div",{className:"w-80 bg-white border-r overflow-y-auto",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("button",{onClick:()=>o("/admin/templates"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[s.jsx(a,{className:"w-4 h-4 mr-2"}),"Back to Templates"]})}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Add Blocks"}),s.jsx("div",{className:"space-y-2",children:m.map(({type:e,label:t,icon:a})=>s.jsxs("button",{onClick:()=>(e=>{const t={id:`block-${Date.now()}`,type:e,content:D(e),settings:M(e)};g([...b,t])})(e),className:"w-full flex items-center p-3 border rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("span",{className:"text-2xl mr-3",children:a}),s.jsx("span",{className:"text-left",children:s.jsx("div",{className:"font-medium",children:t})})]},e))})]}),y&&s.jsxs("div",{className:"p-4 border-t",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Block Settings"}),s.jsx(h,{block:b.find(e=>e.id===y),onUpdate:e=>((e,t)=>{g(b.map(s=>s.id===e?{...s,...t}:s))})(y,e)})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"bg-white border-b px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(l,{className:"w-6 h-6 mr-3 text-blue-600"}),s.jsx("h1",{className:"text-2xl font-bold",children:"Homepage Editor"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>S(!k),className:"flex items-center px-4 py-2 border rounded-lg hover:bg-gray-50",children:[s.jsx(n,{className:"w-4 h-4 mr-2"}),k?"Edit":"Preview"]}),s.jsxs("button",{onClick:I,disabled:f,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),"Save"]}),s.jsxs("button",{onClick:async()=>{if(x)try{w(!0),await I(),alert("Homepage published successfully! The changes are now live.")}catch(e){alert("Failed to publish template")}finally{w(!1)}},disabled:f,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[s.jsx(l,{className:"w-4 h-4 mr-2"}),"Publish"]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:0===b.length?s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center",children:[s.jsx(c,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Start by adding blocks from the sidebar"})]}):s.jsx("div",{className:"space-y-4",children:b.map((e,t)=>s.jsx(p,{block:e,isSelected:y===e.id,onSelect:()=>j(e.id),onDelete:()=>{return t=e.id,g(b.filter(e=>e.id!==t)),void j(null);var t},onMove:t=>((e,t)=>{const s=b.findIndex(t=>t.id===e);if(-1===s)return;const a=[...b];"up"===t&&s>0?[a[s],a[s-1]]=[a[s-1],a[s]]:"down"===t&&s<b.length-1&&([a[s],a[s+1]]=[a[s+1],a[s]]),g(a)})(e.id,t),canMoveUp:t>0,canMoveDown:t<b.length-1},e.id))})})})]})]})},p=({block:e,isSelected:t,onSelect:a,onDelete:l,onMove:n,canMoveUp:r,canMoveDown:c})=>s.jsxs("div",{className:"relative group border rounded-lg p-4 cursor-pointer transition-all "+(t?"border-blue-500 shadow-lg":"border-gray-200 hover:border-gray-300"),onClick:a,children:[s.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),n("up")},disabled:!r,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-50",children:"↑"}),s.jsx("button",{onClick:e=>{e.stopPropagation(),n("down")},disabled:!c,className:"p-1 hover:bg-gray-100 rounded disabled:opacity-50",children:"↓"}),s.jsx("button",{onClick:e=>{e.stopPropagation(),l()},className:"p-1 hover:bg-red-100 rounded text-red-600",children:s.jsx(o,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"text-sm text-gray-500 mb-2",children:e.type}),s.jsx(u,{block:e})]}),u=({block:e})=>{switch(e.type){case"hero":return s.jsxs("div",{className:"bg-gray-100 p-4 rounded",children:[s.jsx("h3",{className:"font-bold",children:e.content.title}),s.jsx("p",{className:"text-gray-600",children:e.content.subtitle})]});case"heading":return s.jsx("h3",{className:"font-bold",children:e.content.text});case"paragraph":return s.jsx("p",{children:e.content.text});case"button":return s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",children:e.content.text});case"image":return s.jsx("div",{className:"bg-gray-100 p-8 text-center rounded",children:s.jsxs("span",{className:"text-gray-500",children:["Image: ",e.content.alt||"No description"]})});default:return s.jsxs("div",{className:"text-gray-500",children:["Block type: ",e.type]})}},h=({block:e,onUpdate:t})=>{const a=(s,a)=>{t({content:{...e.content,[s]:a}})};switch(e.type){case"hero":return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Title"}),s.jsx("input",{type:"text",value:e.content.title||"",onChange:e=>a("title",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Subtitle"}),s.jsx("input",{type:"text",value:e.content.subtitle||"",onChange:e=>a("subtitle",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]});case"heading":return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),s.jsx("input",{type:"text",value:e.content.text||"",onChange:e=>a("text",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Level"}),s.jsx("select",{value:e.content.level||2,onChange:e=>a("level",parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-lg",children:[1,2,3,4,5,6].map(e=>s.jsxs("option",{value:e,children:["H",e]},e))})]})]});case"paragraph":return s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),s.jsx("textarea",{value:e.content.text||"",onChange:e=>a("text",e.target.value),className:"w-full px-3 py-2 border rounded-lg",rows:4})]});case"button":return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Text"}),s.jsx("input",{type:"text",value:e.content.text||"",onChange:e=>a("text",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"URL"}),s.jsx("input",{type:"text",value:e.content.url||"",onChange:e=>a("url",e.target.value),className:"w-full px-3 py-2 border rounded-lg"})]})]});default:return s.jsx("div",{className:"text-gray-500",children:"No settings available"})}};export{x as default};
