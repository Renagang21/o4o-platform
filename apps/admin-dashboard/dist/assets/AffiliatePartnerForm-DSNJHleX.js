import{u as e,b as s,r as a,V as i,j as r,A as t,S as l}from"./vendor-react-BQ6HOJoh.js";import{b as o,B as n,L as d,I as c,S as m,h as p,i as j,j as u,k as h,T as x}from"./page-template-editor-C7FodHrK.js";import{ak as b,al as v,am as y,aw as w,an as g}from"./wp-misc-DS9m4_P2.js";import{u as k,a as f,b as N}from"./vendor-query-LYSOqK5P.js";import"./wp-block-editor-a11y-DrduSWFW.js";import"./wp-block-editor-misc-pHCPYvR2.js";import"./wp-block-editor-api-Buev8_QU.js";import"./wp-block-editor-utils-M5qXzE1L.js";import"./wp-block-editor-colors-D38h-Odz.js";import"./wp-blocks-core-6vwQKPfS.js";import"./wp-block-editor-clipboard-Dg0Y1gQ6.js";import"./wp-block-editor-store-B-g1aSix.js";import"./vendor-ui-CrFdsnXa.js";import"./wp-block-editor-dnd-BYoS8-II.js";import"./wp-block-editor-library-BpQvynjE.js";import"./wp-block-editor-menus-BTQ2wZ-f.js";import"./wp-block-editor-keyboard-CeHTtvP5.js";import"./wp-block-editor-typography-Bl_1REQP.js";import"./wp-block-editor-spacing-BD_2CpN7.js";import"./wp-block-editor-core-DL280tSA.js";import"./wp-block-editor-selection-CC4tJpUu.js";import"./wp-block-editor-formats-CLXkimOp.js";import"./wp-block-editor-inline-CpXpUhQU.js";import"./wp-block-editor-ui-B8YE_4QL.js";import"./wp-block-editor-transforms-jLcKa8Hv.js";import"./wp-block-editor-preview-iw2Xu1ib.js";import"./wp-block-editor-global-styles-CV5-K6QF.js";import"./wp-block-editor-borders-BH1devca.js";import"./wp-block-editor-patterns-BXdHo9lm.js";import"./wp-block-editor-navigation-BFSoKzg0.js";import"./wp-block-editor-media-Bg-JiQDT.js";import"./wp-api-BeoadipR.js";import"./wp-i18n-DGPtqsXY.js";import"./wp-core-Y-jV-nrZ.js";import"./vendor-monaco-BxJH8uUv.js";import"./wp-block-editor-upload-BLw1R9wP.js";import"./vendor-utils-D-spY-QM.js";import"./wp-block-editor-templates-o1_wAMb9.js";import"./wp-data-BmtL8k4r.js";import"./wp-components-CeQNCpMW.js";const F=()=>{const F=e(),{id:C}=s(),q=k(),E=!!C,[M,H]=a.useState({name:"",email:"",website:"",type:"individual",commissionRate:10,paymentMethod:"bank",notes:""}),{data:R,isLoading:S}=f({queryKey:["affiliate-partner",C],queryFn:async()=>(await o.api.get(`/v1/affiliate/partners/${C}`)).data,enabled:E}),K=R?.data,Q=N({mutationFn:async e=>(await o.api.post("/v1/affiliate/partners",e)).data,onSuccess:()=>{i.success("제휴사가 추가되었습니다"),q.invalidateQueries({queryKey:["affiliate-partners"]}),F("/affiliate/partners")},onError:()=>{i.error("제휴사 추가에 실패했습니다")}}),V=N({mutationFn:async e=>(await o.api.put(`/v1/affiliate/partners/${C}`,e)).data,onSuccess:()=>{i.success("제휴사 정보가 수정되었습니다"),q.invalidateQueries({queryKey:["affiliate-partners"]}),q.invalidateQueries({queryKey:["affiliate-partner",C]}),F("/affiliate/partners")},onError:()=>{i.error("제휴사 수정에 실패했습니다")}});a.useEffect(()=>{K&&H({name:K.name,email:K.email,website:K.website||"",type:K.type,commissionRate:K.commissionRate,paymentMethod:K.paymentMethod,bankName:K.bankName||"",accountNumber:K.accountNumber||"",accountHolder:K.accountHolder||"",paypalEmail:K.paypalEmail||"",businessNumber:K.businessNumber||"",notes:K.notes||""})},[K]);const z=(e,s)=>{H(a=>({...a,[e]:s}))};return E&&S?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-modern-primary"})}):r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>F("/affiliate/partners"),children:[r.jsx(t,{className:"w-4 h-4 mr-2"}),"제휴사 목록"]}),r.jsx("h1",{className:"text-2xl font-bold text-modern-text-primary",children:E?"제휴사 수정":"새 제휴사 추가"})]}),r.jsxs("form",{onSubmit:e=>{e.preventDefault(),E?V.mutate(M):Q.mutate(M)},children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(b,{children:[r.jsxs(v,{children:[r.jsx(y,{children:"기본 정보"}),r.jsx(w,{children:"제휴사의 기본 정보를 입력하세요"})]}),r.jsxs(g,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(d,{htmlFor:"name",children:"이름 *"}),r.jsx(c,{id:"name",value:M.name,onChange:e=>z("name",e.target.value),placeholder:"예: 김인플루언서",required:!0})]}),r.jsxs("div",{children:[r.jsx(d,{htmlFor:"email",children:"이메일 *"}),r.jsx(c,{id:"email",type:"email",value:M.email,onChange:e=>z("email",e.target.value),placeholder:"partner@example.com",required:!0})]}),r.jsxs("div",{children:[r.jsx(d,{htmlFor:"website",children:"웹사이트"}),r.jsx(c,{id:"website",type:"url",value:M.website,onChange:e=>z("website",e.target.value),placeholder:"https://example.com"})]}),r.jsxs("div",{children:[r.jsx(d,{htmlFor:"type",children:"제휴사 유형 *"}),r.jsxs(m,{value:M.type,onValueChange:e=>z("type",e),children:[r.jsx(p,{children:r.jsx(j,{})}),r.jsxs(u,{children:[r.jsx(h,{value:"individual",children:"개인"}),r.jsx(h,{value:"influencer",children:"인플루언서"}),r.jsx(h,{value:"blog",children:"블로그"}),r.jsx(h,{value:"business",children:"비즈니스"})]})]})]}),"business"===M.type&&r.jsxs("div",{children:[r.jsx(d,{htmlFor:"businessNumber",children:"사업자번호"}),r.jsx(c,{id:"businessNumber",value:M.businessNumber,onChange:e=>z("businessNumber",e.target.value),placeholder:"123-45-67890"})]})]})]}),r.jsxs(b,{children:[r.jsxs(v,{children:[r.jsx(y,{children:"수수료 및 결제"}),r.jsx(w,{children:"수수료율과 결제 정보를 설정하세요"})]}),r.jsxs(g,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(d,{htmlFor:"commissionRate",children:"수수료율 (%) *"}),r.jsx(c,{id:"commissionRate",type:"number",min:"0",max:"100",step:"0.1",value:M.commissionRate,onChange:e=>z("commissionRate",parseFloat(e.target.value)),required:!0})]}),r.jsxs("div",{children:[r.jsx(d,{htmlFor:"paymentMethod",children:"결제 방법 *"}),r.jsxs(m,{value:M.paymentMethod,onValueChange:e=>z("paymentMethod",e),children:[r.jsx(p,{children:r.jsx(j,{})}),r.jsxs(u,{children:[r.jsx(h,{value:"bank",children:"계좌이체"}),r.jsx(h,{value:"paypal",children:"페이팔"}),"business"===M.type&&r.jsx(h,{value:"invoice",children:"세금계산서"})]})]})]}),"bank"===M.paymentMethod&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(d,{htmlFor:"bankName",children:"은행명"}),r.jsx(c,{id:"bankName",value:M.bankName,onChange:e=>z("bankName",e.target.value),placeholder:"예: 국민은행"})]}),r.jsxs("div",{children:[r.jsx(d,{htmlFor:"accountNumber",children:"계좌번호"}),r.jsx(c,{id:"accountNumber",value:M.accountNumber,onChange:e=>z("accountNumber",e.target.value),placeholder:"123-456-789012"})]}),r.jsxs("div",{children:[r.jsx(d,{htmlFor:"accountHolder",children:"예금주"}),r.jsx(c,{id:"accountHolder",value:M.accountHolder,onChange:e=>z("accountHolder",e.target.value),placeholder:"예금주명"})]})]}),"paypal"===M.paymentMethod&&r.jsxs("div",{children:[r.jsx(d,{htmlFor:"paypalEmail",children:"페이팔 이메일"}),r.jsx(c,{id:"paypalEmail",type:"email",value:M.paypalEmail,onChange:e=>z("paypalEmail",e.target.value),placeholder:"paypal@example.com"})]})]})]}),r.jsxs(b,{className:"lg:col-span-2",children:[r.jsxs(v,{children:[r.jsx(y,{children:"추가 정보"}),r.jsx(w,{children:"메모나 특이사항을 입력하세요"})]}),r.jsx(g,{children:r.jsx(x,{value:M.notes,onChange:e=>z("notes",e.target.value),placeholder:"제휴사에 대한 메모나 특이사항을 입력하세요...",rows:4})})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[r.jsx(n,{type:"button",variant:"outline",onClick:()=>F("/affiliate/partners"),children:"취소"}),r.jsxs(n,{type:"submit",disabled:Q.isPending||V.isPending,children:[r.jsx(l,{className:"w-4 h-4 mr-2"}),E?"수정하기":"추가하기"]})]})]})]})};export{F as default};
