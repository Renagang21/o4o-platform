const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-react-BoWgD0Bu.js","assets/vendor-monaco-BxJH8uUv.js"])))=>i.map(i=>d[i]);
import{r as t,j as e,bS as s,b6 as a,b0 as i,bm as n,b1 as r,bD as o,E as c,bK as l,c9 as d,ba as m}from"./vendor-react-BoWgD0Bu.js";import{B as u}from"./page-template-editor-CWJwXWLM.js";import{a as h}from"./vendor-query-CbBSyLUF.js";import{cI as p}from"./wp-misc-fiKRzvVp.js";import{u as g}from"./unified-client-bojksyyO.js";import{E as y}from"./ecommerceApi-D0afJ9ty.js";import{u as v,S as j}from"./ScreenMeta-B-JSnCRK.js";import{D as f}from"./vendor-utils-C9jLuAcl.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./wp-foundation-BzBJX52f.js";import"./wp-block-editor-main-y2nlPlta.js";import"./wp-i18n-BPC8WmOV.js";import"./wp-block-editor-store-PPID3vJI.js";import"./wp-block-editor-utils-C52tDze8.js";import"./wp-components-CKWj6dcl.js";import"./index-Bu1ofPbL.js";import"./vendor-socket-CMcZe9fK.js";const x={async getStats(){let t=null,e=null,s=null;try{const[a,i]=await Promise.all([y.getDashboardStats(),g.raw.get("/api/users/stats").catch(()=>(p(async()=>{const{default:t}=await import("./vendor-react-BoWgD0Bu.js").then(t=>t.dy);return{default:t}},__vite__mapDeps([0,1])).then(({default:t})=>{t.error("사용자 통계를 불러올 수 없습니다")}),{data:{total:0,pending:0,todayCount:0,activeRate:0}}))]);t=null,e=null,s=null;const n=a.data;return{users:{total:n?.totalCustomers||i.data.total||0,pending:i.data.pending||0,today:i.data.todayCount||0,activeRate:i.data.activeRate||85,change:i.data.monthlyChange||12,trend:i.data.monthlyChange>=0?"up":"down"},sales:{today:n?.todaySales||0,changePercent:15.3,monthlyTotal:n?.todaySales?30*n.todaySales:0,monthlyTarget:5e7,trend:"up"},products:{active:n?.totalProducts||0,lowStock:n?.lowStockProducts||0,newThisWeek:5,bestsellers:[],change:8.2,trend:"up"},content:{publishedPages:45,draftContent:12,totalMedia:234,todayViews:1567,change:23.4,trend:"up"},partners:{active:0,pending:0,totalCommission:0,topPartners:[],change:0,trend:"up"},apps:{forum:t?{posts:t.totalPosts,activeUsers:t.activeUsers,pendingModeration:t.pendingModeration}:{posts:0,activeUsers:0,pendingModeration:0},signage:e?{displays:e.totalDisplays,activeDisplays:e.activeDisplays,content:e.totalContent}:{displays:0,activeDisplays:0,content:0},crowdfunding:s?{campaigns:s.totalCampaigns,totalRaised:s.totalRaised,backers:s.totalBackers}:{campaigns:0,totalRaised:0,backers:0}}}}catch(a){return{users:{total:0,pending:0,today:0,activeRate:0,change:0,trend:"up"},sales:{today:0,changePercent:0,monthlyTotal:0,monthlyTarget:5e7,trend:"up"},products:{active:0,lowStock:0,newThisWeek:0,bestsellers:[],change:0,trend:"up"},content:{publishedPages:0,draftContent:0,totalMedia:0,todayViews:0,change:0,trend:"up"},partners:{active:0,pending:0,totalCommission:0,topPartners:[],change:0,trend:"up"},apps:{forum:t?{posts:t.totalPosts,activeUsers:t.activeUsers,pendingModeration:t.pendingModeration}:{posts:0,activeUsers:0,pendingModeration:0},signage:e?{displays:e.totalDisplays,activeDisplays:e.activeDisplays,content:e.totalContent}:{displays:0,activeDisplays:0,content:0},crowdfunding:s?{campaigns:s.totalCampaigns,totalRaised:s.totalRaised,backers:s.totalBackers}:{campaigns:0,totalRaised:0,backers:0}}}}},async getChartData(){try{const[t,e]=await Promise.all([y.getSalesReport("month"),y.getOrders(1,100)]),s=(t.data?.salesByDay||[]).map(t=>({date:t.date,amount:t.sales||0,orders:t.orders||0})),a=e.data||[],i={};a.forEach(t=>{i[t.status]=(i[t.status]||0)+1});const n=[{status:"대기중",count:i.pending||0,color:"#f59e0b"},{status:"처리중",count:i.processing||0,color:"#3b82f6"},{status:"배송중",count:i.shipped||0,color:"#8b5cf6"},{status:"완료",count:i.completed||0,color:"#10b981"},{status:"취소",count:i.cancelled||0,color:"#ef4444"},{status:"환불",count:i.refunded||0,color:"#f97316"}].filter(t=>t.count>0);return{sales:s.length>0?s:this.getDefaultSalesData(),orders:n.length>0?n:this.getDefaultOrdersData(),users:this.getDefaultUsersData()}}catch(t){return{sales:this.getDefaultSalesData(),orders:this.getDefaultOrdersData(),users:this.getDefaultUsersData()}}},async getNotifications(){try{const t=(await g.raw.get("/admin/notifications?limit=20")).data.notifications||[],e=t.filter(t=>"urgent"===t.type).length,s=t.filter(t=>"approval"===t.type).length;return{items:t,total:t.length,urgent:e,approval:s}}catch(t){return{items:this.getDefaultNotifications(),total:4,urgent:2,approval:1}}},async getRecentActivities(){try{return(await g.raw.get("/admin/activities?limit=15")).data.activities||this.getDefaultActivities()}catch(t){return this.getDefaultActivities()}},async getSystemHealth(){try{return(await g.raw.get("/system/health")).data}catch(t){return this.getDefaultSystemHealth()}},getDefaultSalesData(){const t=[],e=new Date;for(let s=29;s>=0;s--){const a=new Date(e);a.setDate(a.getDate()-s),t.push({date:a.toISOString().split("T")[0],amount:Math.floor(5e5*Math.random())+1e5,orders:Math.floor(50*Math.random())+10})}return t},getDefaultOrdersData:()=>[{status:"처리중",count:45,color:"#3b82f6"},{status:"배송중",count:23,color:"#f59e0b"},{status:"완료",count:67,color:"#10b981"},{status:"취소",count:5,color:"#ef4444"}],getDefaultUsersData(){const t=[],e=new Date;for(let s=6;s>=0;s--){const a=new Date(e);a.setDate(a.getDate()-s),t.push({date:a.toISOString().split("T")[0],newUsers:Math.floor(20*Math.random())+5,activeUsers:Math.floor(100*Math.random())+50})}return t},getDefaultNotifications:()=>[{id:"1",type:"urgent",title:"재고 부족 경고",message:"오메가3 제품의 재고가 5개 미만입니다.",time:"2분 전",read:!1,actionUrl:"/products/low-stock"},{id:"2",type:"approval",title:"사업자 승인 대기",message:"김사업자님의 사업자 등록 승인이 대기 중입니다.",time:"15분 전",read:!1,actionUrl:"/users/pending"},{id:"3",type:"success",title:"매출 목표 달성",message:"이번 주 매출 목표를 달성했습니다!",time:"1시간 전",read:!0},{id:"4",type:"info",title:"새로운 리뷰",message:"프리미엄 비타민 상품에 새 리뷰가 등록되었습니다.",time:"2시간 전",read:!0}],getDefaultActivities:()=>[{id:"1",type:"user",message:"새로운 사업자 회원이 가입했습니다",time:"2분 전",user:"김사업자",icon:"👤"},{id:"2",type:"order",message:"새 주문이 접수되었습니다 (#ORD-2025-001)",time:"15분 전",user:"이고객",icon:"🛒"},{id:"3",type:"product",message:"오메가3 상품의 재고가 부족합니다",time:"1시간 전",icon:"📦"},{id:"4",type:"content",message:"건강 가이드 페이지가 발행되었습니다",time:"2시간 전",user:"관리자",icon:"📄"},{id:"5",type:"order",message:"주문 #ORD-2024-156이 배송 완료되었습니다",time:"3시간 전",icon:"✅"}],getDefaultSystemHealth:()=>({api:{status:"healthy",responseTime:120,lastCheck:(new Date).toISOString()},database:{status:"healthy",connections:8,lastCheck:(new Date).toISOString()},storage:{status:"healthy",usage:2.4,total:10},memory:{status:"warning",usage:1.2,total:2}})},w=()=>(v([{id:"overview",title:"Overview",content:"\n        <p>Welcome to your WordPress Dashboard! This is the main hub of your site where you can access all administrative functions.</p>\n        <p>The Dashboard provides a quick overview of your site's content and activity. You can see at a glance:</p>\n        <ul>\n          <li>Site statistics including posts, pages, and comments</li>\n          <li>Recent activity on your site</li>\n          <li>Quick actions to create new content</li>\n          <li>Links to commonly used features</li>\n        </ul>\n        <p>The Dashboard is customizable. You can rearrange widgets, add or remove them, and adjust the layout to suit your workflow.</p>\n      "},{id:"navigation",title:"Navigation",content:"\n        <p>The left-hand navigation menu is your primary way to move around the WordPress admin area.</p>\n        <p><strong>Main sections include:</strong></p>\n        <ul>\n          <li><strong>Posts</strong> - Create and manage blog posts</li>\n          <li><strong>Media</strong> - Upload and manage images, videos, and documents</li>\n          <li><strong>Pages</strong> - Create static pages like About or Contact</li>\n          <li><strong>Comments</strong> - Moderate user comments</li>\n          <li><strong>Appearance</strong> - Customize your site's look</li>\n          <li><strong>Plugins</strong> - Add functionality to your site</li>\n          <li><strong>Users</strong> - Manage user accounts and permissions</li>\n          <li><strong>Tools</strong> - Import/export and other utilities</li>\n          <li><strong>Settings</strong> - Configure site options</li>\n        </ul>\n      "},{id:"quick-actions",title:"Quick Actions",content:'\n        <p>The Dashboard provides several quick action buttons at the top:</p>\n        <ul>\n          <li><strong>New Post</strong> - Start writing a new blog post</li>\n          <li><strong>New Page</strong> - Create a new static page</li>\n          <li><strong>Upload Media</strong> - Add images or files to your media library</li>\n        </ul>\n        <p>You can also access these actions from the admin bar at the top of every page when you hover over the "+ New" menu.</p>\n      '}],{title:"For more information:",content:'\n      <p><a href="https://wordpress.org/support/article/dashboard-screen/" target="_blank">Documentation on Dashboard</a></p>\n      <p><a href="https://wordpress.org/support/" target="_blank">Support Forums</a></p>\n      <p><a href="https://wordpress.org/support/article/wordpress-video-tutorials/" target="_blank">Video Tutorials</a></p>\n    '}),null),N=()=>{const{stats:p,isLoading:g}=(()=>{const[e,s]=t.useState(0),{data:a,isLoading:i,error:n,refetch:r}=h({queryKey:["dashboard","stats",e],queryFn:()=>x.getStats(),enabled:!0,staleTime:3e5,gcTime:6e5,retry:2}),{data:o,isLoading:c,error:l,refetch:d}=h({queryKey:["dashboard","charts",e],queryFn:async()=>{const t=await x.getChartData();return{sales:t.sales,orders:t.orders,users:t.users}},enabled:!0,staleTime:3e5,gcTime:6e5,retry:2}),{data:m,isLoading:u,refetch:p}=h({queryKey:["dashboard","notifications",e],queryFn:()=>x.getNotifications(),enabled:!0,staleTime:12e4,retry:2}),{data:g,isLoading:y,refetch:v}=h({queryKey:["dashboard","activities",e],queryFn:()=>x.getRecentActivities(),enabled:!0,staleTime:18e4,retry:2}),{data:j,isLoading:f,refetch:w}=h({queryKey:["dashboard","health",e],queryFn:()=>x.getSystemHealth(),enabled:!0,staleTime:3e4,retry:1});return{stats:a,chartData:o,notifications:m,activities:g,systemHealth:j,isLoading:i||c||u||y||f,error:n||l,refreshAllData:t.useCallback(async()=>{const t=Date.now();s(t);const e=[r(),d(),p(),v(),w()];await Promise.allSettled(e)},[r,d,p,v,w]),refreshStats:t.useCallback(()=>r(),[r]),refreshCharts:t.useCallback(()=>d(),[d]),refreshNotifications:t.useCallback(()=>p(),[p]),loadingStates:{stats:i,charts:c,notifications:u,activities:y,health:f}}})(),y=[{id:"1",type:"post",title:"Welcome to WordPress!",author:"admin",date:new Date(Date.now()-18e5),icon:i},{id:"2",type:"comment",title:"Great article on React development",author:"John Doe",date:new Date(Date.now()-72e5),icon:n},{id:"3",type:"user",title:"New user registration",author:"jane.smith@example.com",date:new Date(Date.now()-18e6),icon:r}];return g?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"wrap",children:[e.jsx(w,{}),e.jsx(j,{}),e.jsx("h1",{className:"wp-heading-inline",children:"Dashboard"}),e.jsxs("div",{className:"quick-actions-bar",children:[e.jsx(s,{to:"/posts/new",children:e.jsxs(u,{className:"button button-primary",children:[e.jsx(a,{className:"w-4 h-4 mr-1"}),"New Post"]})}),e.jsx(s,{to:"/pages/new",children:e.jsxs(u,{variant:"secondary",children:[e.jsx(a,{className:"w-4 h-4 mr-1"}),"New Page"]})}),e.jsx(s,{to:"/media/upload",children:e.jsxs(u,{variant:"secondary",children:[e.jsx(a,{className:"w-4 h-4 mr-1"}),"Upload Media"]})})]}),e.jsxs("div",{className:"dashboard-stats-grid",children:[e.jsx("div",{className:"stat-card",children:e.jsxs(s,{to:"/posts",className:"stat-card-link",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(i,{className:"w-8 h-8"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:p?.posts||0}),e.jsx("div",{className:"stat-label",children:"Posts"})]})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs(s,{to:"/pages",className:"stat-card-link",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(i,{className:"w-8 h-8"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:p?.pages||0}),e.jsx("div",{className:"stat-label",children:"Pages"})]})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs(s,{to:"/comments",className:"stat-card-link",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(n,{className:"w-8 h-8"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:p?.comments?.total||0}),e.jsx("div",{className:"stat-label",children:"Comments"}),p?.comments&&p.comments.pending>0&&e.jsxs("div",{className:"stat-badge",children:[p.comments.pending," pending"]})]})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs(s,{to:"/users",className:"stat-card-link",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(r,{className:"w-8 h-8"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:"number"==typeof p?.users?p.users:p?.users?.total||0}),e.jsx("div",{className:"stat-label",children:"Users"})]})]})}),void 0!==p?.products&&e.jsx("div",{className:"stat-card",children:e.jsxs(s,{to:"/ecommerce/products",className:"stat-card-link",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(o,{className:"w-8 h-8"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:"number"==typeof p.products?p.products:p.products?.active||0}),e.jsx("div",{className:"stat-label",children:"Products"})]})]})}),void 0!==p?.views&&e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"stat-card-link",children:[e.jsx("div",{className:"stat-icon",children:e.jsx(c,{className:"w-8 h-8"})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-number",children:p.views?.toLocaleString()||0}),e.jsx("div",{className:"stat-label",children:"Views Today"}),e.jsx(l,{className:"w-4 h-4 text-green-600 inline ml-1"})]})]})})]}),e.jsxs("div",{className:"dashboard-activity-section",children:[e.jsx("h2",{className:"section-title",children:"Recent Activity"}),e.jsx("div",{className:"activity-list",children:y.map(t=>{const a=t.icon;return e.jsxs("div",{className:"activity-item",children:[e.jsx("div",{className:"activity-icon",children:e.jsx(a,{className:"w-5 h-5"})}),e.jsxs("div",{className:"activity-content",children:[e.jsxs("div",{className:"activity-title",children:["post"===t.type&&e.jsx(s,{to:`/posts/${t.id}/edit`,children:t.title}),"comment"===t.type&&e.jsxs(e.Fragment,{children:["Comment from ",e.jsx("strong",{children:t.author})," on ",e.jsx(s,{to:`/comments/${t.id}`,children:t.title})]}),"user"===t.type&&e.jsxs(e.Fragment,{children:[t.title,": ",e.jsx("strong",{children:t.author})]})]}),e.jsx("div",{className:"activity-time",children:f(t.date,{addSuffix:!0})})]}),e.jsxs("div",{className:"activity-actions",children:["post"===t.type&&e.jsx(s,{to:`/posts/${t.id}/edit`,className:"activity-action",children:e.jsx(d,{className:"w-4 h-4"})}),"comment"===t.type&&e.jsx(s,{to:`/comments/${t.id}`,className:"activity-action",children:e.jsx(n,{className:"w-4 h-4"})})]})]},t.id)})}),e.jsx("div",{className:"activity-footer",children:e.jsx(s,{to:"/activity",className:"view-all-link",children:"View All Activity →"})})]}),e.jsxs("div",{className:"dashboard-quick-links",children:[e.jsx("h2",{className:"section-title",children:"Quick Links"}),e.jsxs("div",{className:"quick-links-grid",children:[e.jsxs(s,{to:"/themes/customize",className:"quick-link",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),"Customize Your Site"]}),e.jsx(s,{to:"/themes/menus",className:"quick-link",children:"Manage Menus"}),e.jsx(s,{to:"/themes/widgets",className:"quick-link",children:"Manage Widgets"}),e.jsx(s,{to:"/settings/general",className:"quick-link",children:"General Settings"})]})]})]})};export{N as default};
