import{f as e}from"./wp-block-editor-global-styles-DiR2HQC4.js";import{N as t}from"./wp-blocks-core-NinAvWTg.js";import{s as o}from"./wp-block-editor-store-BZ6fZn58.js";import{u as r,a as s}from"./wp-block-editor-misc-De1L5-zR.js";import{r as n}from"./vendor-react-DqgGMt48.js";function l(l,c,i,a){const{getBlocks:u,getSelectedBlocksInitialCaretPosition:f,isBlockSelected:k}=r(o),{replaceInnerBlocks:m,__unstableMarkNextChangeAsNotPersistent:p}=s(o),d=n.useRef(null);n.useLayoutEffect(()=>{let o=!1;return window.queueMicrotask(()=>{if(o)return;const r=u(l),s=0===r.length||"all"===i||"contentOnly"===i,n=!e(c,d.current);if(!s||!n)return;d.current=c;const g=t(r,c);e(g,r)||(p(),m(l,g,0===r.length&&a&&0!==g.length&&k(l),f()))}),()=>{o=!0}},[c,i,l])}export{l as u};
