import{a as s}from"./vendor-utils-DQ8F5vJI.js";import{c as r}from"./main-CP4Dt9TU.js";const n=s.create({baseURL:"https://api.neture.co.kr/api/v1",timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!0});n.interceptors.request.use(e=>{let t=r.getState().token;if(t||(t=localStorage.getItem("authToken")),!t){const a=localStorage.getItem("admin-auth-storage");if(a)try{const o=JSON.parse(a);o.state?.token&&(t=o.state.token)}catch{}}return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));n.interceptors.response.use(e=>e,e=>{if(e.response?.status===401){const t=window.location.pathname;localStorage.removeItem("auth-storage"),localStorage.removeItem("authToken"),localStorage.removeItem("admin-auth-storage"),t!=="/login"&&!e.config?.url?.includes("/auth")&&(r.getState().logout(),window.location.href="/login")}return Promise.reject(e)});export{n as a};
