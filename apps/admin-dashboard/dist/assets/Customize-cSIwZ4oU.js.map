{"version":3,"mappings":"kzBAEO,MAAMA,GAAqB,KACzB,CAEL,aAAc,CACZ,KAAM,CACJ,QAAS,KACT,OAAQ,KACR,MAAO,CACL,QAAS,IACT,OAAQ,IACR,OAAQ,IACV,EAEF,UAAW,CACT,KAAM,GACN,KAAM,eACN,MAAO,CACL,OAAQ,UACR,MAAO,WAET,WAAY,CACV,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,IAAK,OAAQ,IAAK,OAAQ,KACjD,cAAe,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAChD,cAAe,OACjB,EAEF,QAAS,CACP,KAAM,GACN,KAAM,sBACN,MAAO,CACL,OAAQ,UACR,MAAO,WAET,WAAY,CACV,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,IAAK,OAAQ,IAAK,OAAQ,KACjD,cAAe,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAChD,cAAe,OACjB,EAEF,QAAS,MAIX,OAAQ,CACN,aAAc,UACd,eAAgB,UAChB,UAAW,UACX,UAAW,CACT,OAAQ,UACR,MAAO,WAET,YAAa,UACb,eAAgB,UAChB,kBAAmB,UACnB,QAAS,CACP,OAAQ,UACR,OAAQ,UACR,OAAQ,UACR,OAAQ,UACR,OAAQ,UACR,OAAQ,UACR,OAAQ,UACR,OAAQ,UACR,OAAQ,UACV,EAIF,WAAY,CACV,SAAU,CACR,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,KAAM,OAAQ,IAAK,OAAQ,KAClD,cAAe,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAChD,cAAe,QAEjB,SAAU,CACR,GAAI,CACF,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,IAAK,OAAQ,IAAK,OAAQ,KACjD,cAAe,CAAE,QAAS,GAAI,OAAQ,IAAM,OAAQ,GACpD,cAAe,QAEjB,GAAI,CACF,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,IAAK,OAAQ,IAAK,OAAQ,KACjD,cAAe,CAAE,QAAS,IAAM,OAAQ,EAAG,OAAQ,GACnD,cAAe,QAEjB,GAAI,CACF,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,IAAK,OAAQ,IAAK,OAAQ,KACjD,cAAe,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAChD,cAAe,QAEjB,GAAI,CACF,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,IAAK,OAAQ,IAAK,OAAQ,KACjD,cAAe,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAChD,cAAe,QAEjB,GAAI,CACF,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,IAAK,OAAQ,IAAK,OAAQ,KACjD,cAAe,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAChD,cAAe,QAEjB,GAAI,CACF,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,IAAK,OAAQ,IAAK,OAAQ,KACjD,cAAe,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAChD,cAAe,OACjB,EAEF,OAAQ,CACN,WAAY,uCACZ,SAAU,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC7C,WAAY,IACZ,WAAY,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAC7C,cAAe,CAAE,QAAS,GAAK,OAAQ,GAAK,OAAQ,IACpD,cAAe,YACjB,EAIF,UAAW,CACT,OAAQ,QACR,MAAO,CACL,QAAS,KACT,OAAQ,IACR,OAAQ,KAEV,QAAS,CACP,QAAS,CAAE,IAAK,EAAG,MAAO,GAAI,OAAQ,EAAG,KAAM,IAC/C,OAAQ,CAAE,IAAK,EAAG,MAAO,GAAI,OAAQ,EAAG,KAAM,IAC9C,OAAQ,CAAE,IAAK,EAAG,MAAO,GAAI,OAAQ,EAAG,KAAM,GAAG,EAEnD,OAAQ,CACN,QAAS,CAAE,IAAK,EAAG,OAAQ,GAC3B,OAAQ,CAAE,IAAK,EAAG,OAAQ,GAC1B,OAAQ,CAAE,IAAK,EAAG,OAAQ,EAAE,CAC9B,EAIF,QAAS,CACP,OAAQ,gBACR,MAAO,CACL,QAAS,GACT,OAAQ,GACR,OAAQ,KAEV,IAAK,CACH,QAAS,GACT,OAAQ,GACR,OAAQ,GACV,EAIF,OAAQ,CACN,OAAQ,uBACR,OAAQ,GACR,kBAAmB,GACnB,MAAO,CACL,QAAS,GACT,OAAQ,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC3C,WAAY,UACZ,QAAS,CAAC,OAAQ,QAAQ,GAE5B,QAAS,CACP,OAAQ,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC3C,WAAY,UACZ,cAAe,SAEjB,MAAO,CACL,QAAS,GACT,OAAQ,CAAE,QAAS,GAAI,OAAQ,GAAI,OAAQ,IAC3C,WAAY,UACZ,QAAS,CAAC,YAAY,EACxB,EAIF,OAAQ,CACN,OAAQ,kBACR,QAAS,CACP,QAAS,GACT,QAAS,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAC1C,WAAY,UACZ,UAAW,UACX,UAAW,CACT,OAAQ,UACR,MAAO,WAET,QAAS,CACP,QAAS,CAAE,IAAK,GAAI,OAAQ,IAC5B,OAAQ,CAAE,IAAK,GAAI,OAAQ,IAC3B,OAAQ,CAAE,IAAK,GAAI,OAAQ,GAAG,CAChC,EAEF,UAAW,CACT,QAAS,GACT,OAAQ,WACR,SAAU,4CACV,SAAU,GACV,WAAY,UACZ,UAAW,UACX,UAAW,CACT,OAAQ,UACR,MAAO,WAET,QAAS,CACP,QAAS,CAAE,IAAK,GAAI,OAAQ,IAC5B,OAAQ,CAAE,IAAK,GAAI,OAAQ,IAC3B,OAAQ,CAAE,IAAK,GAAI,OAAQ,GAAG,CAChC,CACF,EAIF,KAAM,CACJ,QAAS,CACP,OAAQ,gBACR,QAAS,CAAE,QAAS,EAAG,OAAQ,EAAG,OAAQ,GAC1C,aAAc,UACd,kBAAmB,GACnB,cAAe,MACf,UAAW,SACX,KAAM,CACJ,WAAY,GACZ,SAAU,GACV,aAAc,GACd,aAAc,GACd,aAAc,IAEhB,QAAS,CACP,OAAQ,IACR,aAAc,YAChB,EAEF,OAAQ,CACN,OAAQ,UACR,kBAAmB,GACnB,eAAgB,GAChB,mBAAoB,GACpB,cAAe,GACf,iBAAkB,GAClB,kBAAmB,EACnB,KAAM,CACJ,WAAY,GACZ,SAAU,GACV,aAAc,GACd,SAAU,GACV,aAAc,GACd,aAAc,GAChB,CACF,EAIF,UAAW,GAGX,MAAO,CACL,QAAS,QACT,aAAc,IAAI,OAAO,cACzB,QAAS,GACX,uHC7RG,SAASC,GAASC,EAAwC,CAC/D,OAAOA,GAAQ,OAAOA,GAAS,UAAY,CAAC,MAAM,QAAQA,CAAI,CAChE,CAEO,SAASC,GACdC,EACAC,EACG,CACH,MAAMC,EAAS,CAAE,GAAGF,CAAA,EAEpB,OAAIH,GAASG,CAAM,GAAKH,GAASI,CAAM,GACrC,OAAO,KAAKA,CAAM,EAAE,QAAQE,GAAO,CAC7BN,GAASI,EAAOE,CAAG,CAAC,EAChBA,KAAOH,EAGXE,EAAOC,CAAc,EAAIJ,GAAUC,EAAOG,CAAG,GAAK,GAAIF,EAAOE,CAAG,GAAK,EAAE,EAFvE,OAAO,OAAOD,EAAQ,CAAE,CAACC,CAAG,EAAGF,EAAOE,CAAG,EAAG,EAK9C,OAAO,OAAOD,EAAQ,CAAE,CAACC,CAAG,EAAGF,EAAOE,CAAG,EAAG,CAEhD,CAAC,EAGID,CACT,CAKO,SAASE,GAAeC,EAAUC,EAAqB,CAC5D,OAAOA,EAAK,OAAO,CAACC,EAASJ,IAAQI,IAAUJ,CAAG,EAAGE,CAAG,CAC1D,CAoBO,SAASG,GAAU,EAAQC,EAAiB,CACjD,GAAI,IAAMA,EAAG,MAAO,GAIpB,GAFI,GAAK,MAAQA,GAAK,MAElB,OAAO,GAAM,OAAOA,EAAG,MAAO,GAElC,GAAI,OAAO,GAAM,SAAU,OAAO,IAAMA,EAExC,GAAI,MAAM,QAAQ,CAAC,IAAM,MAAM,QAAQA,CAAC,EAAG,MAAO,GAElD,GAAI,MAAM,QAAQ,CAAC,EACjB,OAAI,EAAE,SAAWA,EAAE,OAAe,GAC3B,EAAE,MAAM,CAACX,EAAMY,IAAUF,GAAUV,EAAMW,EAAEC,CAAK,CAAC,CAAC,EAG3D,MAAMC,EAAQ,OAAO,KAAK,CAAC,EACrBC,EAAQ,OAAO,KAAKH,CAAC,EAE3B,OAAIE,EAAM,SAAWC,EAAM,OAAe,GAEnCD,EAAM,MAAMR,GAAOK,GAAU,EAAEL,CAAG,EAAGM,EAAEN,CAAG,CAAC,CAAC,CACrD,CCzEO,SAASU,GAAYC,EAA2C,CACrE,MAAMC,EAAgB,GAGtB,OAAAA,EAAI,KAAK,SAAS,EAClBA,EAAI,KAAK,GAAGC,GAAuBF,CAAQ,CAAC,EAC5CC,EAAI,KAAK,GAAGE,GAA4BH,CAAQ,CAAC,EACjDC,EAAI,KAAK,GAAGG,GAAyBJ,CAAQ,CAAC,EAC9CC,EAAI,KAAK,GAAG,EAGZA,EAAI,KAAK,GAAGI,GAAsBL,CAAQ,CAAC,EAG3CC,EAAI,KAAK,GAAGK,GAAkBN,CAAQ,CAAC,EACvCC,EAAI,KAAK,GAAGM,GAAkBP,CAAQ,CAAC,EACvCC,EAAI,KAAK,GAAGO,GAAqBR,CAAQ,CAAC,EAC1CC,EAAI,KAAK,GAAGQ,GAAmBT,CAAQ,CAAC,EACxCC,EAAI,KAAK,GAAGS,GAAgBV,CAAQ,CAAC,EAGjCA,EAAS,WACXC,EAAI,KAAKD,EAAS,SAAS,EAGtBC,EAAI,KAAK;AAAA,CAAI,CACtB,CAEA,SAASC,GAAuBF,EAA6C,CAC3E,MAAMW,EAAiB,GACjB,CAAE,OAAAC,GAAWZ,EAEnB,OAAAW,EAAK,KAAK,0BAA0BC,EAAO,YAAY,GAAG,EAC1DD,EAAK,KAAK,4BAA4BC,EAAO,cAAc,GAAG,EAC9DD,EAAK,KAAK,uBAAuBC,EAAO,SAAS,GAAG,EACpDD,EAAK,KAAK,uBAAuBC,EAAO,UAAU,MAAM,GAAG,EAC3DD,EAAK,KAAK,6BAA6BC,EAAO,UAAU,OAASA,EAAO,UAAU,MAAM,GAAG,EAC3FD,EAAK,KAAK,yBAAyBC,EAAO,WAAW,GAAG,EACxDD,EAAK,KAAK,oBAAoBC,EAAO,cAAc,GAAG,EACtDD,EAAK,KAAK,uBAAuBC,EAAO,iBAAiB,GAAG,EAG5D,OAAO,QAAQA,EAAO,OAAO,EAAE,QAAQ,CAAC,CAACvB,EAAKwB,CAAK,IAAM,CACvDF,EAAK,KAAK,mBAAmBtB,CAAG,KAAKwB,CAAK,GAAG,CAC/C,CAAC,EAEMF,CACT,CAEA,SAASR,GAA4BH,EAA6C,CAChF,MAAMW,EAAiB,GACjB,CAAE,WAAAG,GAAed,EAGvB,OAAAW,EAAK,KAAK,6BAA6BG,EAAW,SAAS,UAAU,GAAG,EACxEH,EAAK,KAAK,6BAA6BG,EAAW,SAAS,UAAU,GAAG,EACxEH,EAAK,KAAK,gCAAgCG,EAAW,SAAS,aAAa,GAAG,EAG9EH,EAAK,KAAK,+BAA+BG,EAAW,OAAO,UAAU,GAAG,EACxEH,EAAK,KAAK,+BAA+BG,EAAW,OAAO,UAAU,GAAG,EACxEH,EAAK,KAAK,kCAAkCG,EAAW,OAAO,aAAa,GAAG,EAEvEH,CACT,CAEA,SAASP,GAAyBJ,EAA6C,CAC7E,MAAMW,EAAiB,GACjB,CAAE,UAAAI,EAAW,QAAAC,CAAA,EAAYhB,EAG/B,OAAAW,EAAK,KAAK,oCAAoCI,EAAU,MAAM,OAAO,KAAK,EAC1EJ,EAAK,KAAK,mCAAmCI,EAAU,MAAM,MAAM,KAAK,EACxEJ,EAAK,KAAK,mCAAmCI,EAAU,MAAM,MAAM,KAAK,EAGxEJ,EAAK,KAAK,kCAAkCK,EAAQ,MAAM,OAAO,IAAI,EACrEL,EAAK,KAAK,iCAAiCK,EAAQ,MAAM,MAAM,IAAI,EACnEL,EAAK,KAAK,iCAAiCK,EAAQ,MAAM,MAAM,IAAI,EACnEL,EAAK,KAAK,wBAAwBK,EAAQ,IAAI,OAAO,KAAK,EAEnDL,CACT,CAEA,SAASN,GAAsBL,EAA6C,CAC1E,MAAMC,EAAgB,GAChB,CAAE,WAAAa,EAAY,UAAAC,CAAA,EAAcf,EAGlC,OAAAC,EAAI,KAAK,QAAQ,EACjBA,EAAI,KAAK,kBAAkBa,EAAW,SAAS,UAAU,GAAG,EAC5Db,EAAI,KAAK,gBAAgBa,EAAW,SAAS,SAAS,OAAO,KAAK,EAClEb,EAAI,KAAK,kBAAkBa,EAAW,SAAS,UAAU,GAAG,EAC5Db,EAAI,KAAK,kBAAkBa,EAAW,SAAS,WAAW,OAAO,GAAG,EACpEb,EAAI,KAAK,qBAAqBa,EAAW,SAAS,cAAc,OAAO,KAAK,EAC5Eb,EAAI,KAAK,iCAAiC,EAC1CA,EAAI,KAAK,yCAAyC,EAClDA,EAAI,KAAK,GAAG,EAGZ,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAAE,QAAQgB,GAAO,CAClD,MAAMC,EAAUJ,EAAW,SAASG,CAAuC,EAC3EhB,EAAI,KAAK,GAAGgB,CAAG,IAAI,EACnBhB,EAAI,KAAK,kBAAkBiB,EAAQ,UAAU,GAAG,EAChDjB,EAAI,KAAK,gBAAgBiB,EAAQ,SAAS,OAAO,KAAK,EACtDjB,EAAI,KAAK,kBAAkBiB,EAAQ,UAAU,GAAG,EAChDjB,EAAI,KAAK,kBAAkBiB,EAAQ,WAAW,OAAO,GAAG,EACxDjB,EAAI,KAAK,qBAAqBiB,EAAQ,cAAc,OAAO,KAAK,EAChEjB,EAAI,KAAK,qBAAqBiB,EAAQ,aAAa,GAAG,EACtDjB,EAAI,KAAK,GAAG,CACd,CAAC,EAGDA,EAAI,KAAK,KAAK,EACdA,EAAI,KAAK,iCAAiC,EAC1CA,EAAI,KAAK,0BAA0B,EACnCA,EAAI,KAAK,2BAA2B,EACpCA,EAAI,KAAK,GAAG,EACZA,EAAI,KAAK,WAAW,EACpBA,EAAI,KAAK,uCAAuC,EAChDA,EAAI,KAAK,GAAG,EAGZA,EAAI,KAAK,6BAA6B,EACtCA,EAAI,KAAK,UAAU,EACnBA,EAAI,KAAK,kBAAkBa,EAAW,SAAS,SAAS,MAAM,KAAK,EACnEb,EAAI,KAAK,oBAAoBa,EAAW,SAAS,WAAW,MAAM,GAAG,EACrEb,EAAI,KAAK,KAAK,EAEd,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAAE,QAAQgB,GAAO,CAClD,MAAMC,EAAUJ,EAAW,SAASG,CAAuC,EAC3EhB,EAAI,KAAK,KAAKgB,CAAG,IAAI,EACrBhB,EAAI,KAAK,kBAAkBiB,EAAQ,SAAS,MAAM,KAAK,EACvDjB,EAAI,KAAK,oBAAoBiB,EAAQ,WAAW,MAAM,GAAG,EACzDjB,EAAI,KAAK,KAAK,CAChB,CAAC,EACDA,EAAI,KAAK,GAAG,EAGZA,EAAI,KAAK,6BAA6B,EACtCA,EAAI,KAAK,UAAU,EACnBA,EAAI,KAAK,kBAAkBa,EAAW,SAAS,SAAS,MAAM,KAAK,EACnEb,EAAI,KAAK,oBAAoBa,EAAW,SAAS,WAAW,MAAM,GAAG,EACrEb,EAAI,KAAK,KAAK,EAEd,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAAE,QAAQgB,GAAO,CAClD,MAAMC,EAAUJ,EAAW,SAASG,CAAuC,EAC3EhB,EAAI,KAAK,KAAKgB,CAAG,IAAI,EACrBhB,EAAI,KAAK,kBAAkBiB,EAAQ,SAAS,MAAM,KAAK,EACvDjB,EAAI,KAAK,oBAAoBiB,EAAQ,WAAW,MAAM,GAAG,EACzDjB,EAAI,KAAK,KAAK,CAChB,CAAC,EACDA,EAAI,KAAK,GAAG,EAELA,CACT,CAEA,SAASK,GAAkBN,EAA6C,CACtE,MAAMC,EAAgB,GAChB,CAAE,OAAAkB,EAAQ,aAAAC,CAAA,EAAiBpB,EAEjC,OAAAC,EAAI,KAAK,eAAe,EACxBA,EAAI,KAAK,iBAAiBkB,EAAO,QAAQ,UAAU,GAAG,EACtDlB,EAAI,KAAK,aAAakB,EAAO,QAAQ,OAAO,OAAO,KAAK,EACpDA,EAAO,SACTlB,EAAI,KAAK,qBAAqB,EAC9BA,EAAI,KAAK,WAAW,EACpBA,EAAI,KAAK,iBAAiB,GAE5BA,EAAI,KAAK,GAAG,EAGRmB,EAAa,UAAU,OACzBnB,EAAI,KAAK,eAAe,EACxBA,EAAI,KAAK,YAAYmB,EAAa,UAAU,MAAM,MAAM,GAAG,EAC3DnB,EAAI,KAAK,kBAAkBmB,EAAa,UAAU,WAAW,UAAU,GAAG,EAC1EnB,EAAI,KAAK,gBAAgBmB,EAAa,UAAU,WAAW,SAAS,OAAO,KAAK,EAChFnB,EAAI,KAAK,kBAAkBmB,EAAa,UAAU,WAAW,UAAU,GAAG,EAC1EnB,EAAI,KAAK,GAAG,EACZA,EAAI,KAAK,qBAAqB,EAC9BA,EAAI,KAAK,YAAYmB,EAAa,UAAU,MAAM,KAAK,GAAG,EAC1DnB,EAAI,KAAK,GAAG,GAIVmB,EAAa,KAAK,UACpBnB,EAAI,KAAK,kBAAkB,EAC3BA,EAAI,KAAK,gBAAgBmB,EAAa,KAAK,MAAM,OAAO,KAAK,EAC7DnB,EAAI,KAAK,GAAG,GAIdA,EAAI,KAAK,qBAAqB,EAC9BA,EAAI,KAAK,iBAAiBkB,EAAO,QAAQ,aAAa,GAAG,EACzDlB,EAAI,KAAK,GAAG,EAELA,CACT,CAEA,SAASM,GAAkBP,EAA6C,CACtE,MAAMC,EAAgB,GAChB,CAAE,OAAAoB,GAAWrB,EAGnB,OAAIqB,EAAO,QAAQ,UACjBpB,EAAI,KAAK,uBAAuB,EAChCA,EAAI,KAAK,iBAAiBoB,EAAO,QAAQ,UAAU,GAAG,EACtDpB,EAAI,KAAK,YAAYoB,EAAO,QAAQ,SAAS,GAAG,EAChDpB,EAAI,KAAK,kBAAkBoB,EAAO,QAAQ,QAAQ,QAAQ,GAAG,KAAK,EAClEpB,EAAI,KAAK,qBAAqBoB,EAAO,QAAQ,QAAQ,QAAQ,MAAM,KAAK,EACxEpB,EAAI,KAAK,GAAG,EAEZA,EAAI,KAAK,yBAAyB,EAClCA,EAAI,KAAK,YAAYoB,EAAO,QAAQ,UAAU,MAAM,GAAG,EACvDpB,EAAI,KAAK,GAAG,EACZA,EAAI,KAAK,+BAA+B,EACxCA,EAAI,KAAK,YAAYoB,EAAO,QAAQ,UAAU,KAAK,GAAG,EACtDpB,EAAI,KAAK,GAAG,EAEZA,EAAI,KAAK,2BAA2B,EACpCA,EAAI,KAAK,kBAAkB,EAC3BA,EAAI,KAAK,mCAAmCoB,EAAO,QAAQ,QAAQ,OAAO,SAAS,EACnFpB,EAAI,KAAK,cAAc,EACvBA,EAAI,KAAK,GAAG,GAIVoB,EAAO,UAAU,UACnBpB,EAAI,KAAK,sBAAsB,EAC/BA,EAAI,KAAK,iBAAiBoB,EAAO,UAAU,UAAU,GAAG,EACxDpB,EAAI,KAAK,YAAYoB,EAAO,UAAU,SAAS,GAAG,EAClDpB,EAAI,KAAK,kBAAkBoB,EAAO,UAAU,QAAQ,QAAQ,GAAG,KAAK,EACpEpB,EAAI,KAAK,qBAAqBoB,EAAO,UAAU,QAAQ,QAAQ,MAAM,KAAK,EAC1EpB,EAAI,KAAK,GAAG,EAEZA,EAAI,KAAK,wBAAwB,EACjCA,EAAI,KAAK,YAAYoB,EAAO,UAAU,UAAU,MAAM,GAAG,EACzDpB,EAAI,KAAK,GAAG,EACZA,EAAI,KAAK,8BAA8B,EACvCA,EAAI,KAAK,YAAYoB,EAAO,UAAU,UAAU,KAAK,GAAG,EACxDpB,EAAI,KAAK,GAAG,GAGPA,CACT,CAEA,SAASO,GAAqBR,EAA6C,CACzE,MAAMC,EAAgB,GAChB,CAAE,UAAAc,GAAcf,EAEtB,OAAAC,EAAI,KAAK,kBAAkB,EAEvBc,EAAU,SAAW,SACvBd,EAAI,KAAK,gBAAgBc,EAAU,MAAM,OAAO,KAAK,EACrDd,EAAI,KAAK,mBAAmB,GACnBc,EAAU,SAAW,cAC9Bd,EAAI,KAAK,gBAAgB,EACzBA,EAAI,KAAK,oBAAoB,GACpBc,EAAU,SAAW,UAC9Bd,EAAI,KAAK,gBAAgB,EACzBA,EAAI,KAAK,gBAAgBc,EAAU,MAAM,OAAO,KAAK,EACrDd,EAAI,KAAK,mBAAmB,GAG9BA,EAAI,KAAK,mBAAmBc,EAAU,QAAQ,QAAQ,IAAI,KAAK,EAC/Dd,EAAI,KAAK,oBAAoBc,EAAU,QAAQ,QAAQ,KAAK,KAAK,EACjEd,EAAI,KAAK,GAAG,EAGZA,EAAI,KAAK,6BAA6B,EACtCA,EAAI,KAAK,oBAAoB,EAC7BA,EAAI,KAAK,kBAAkBc,EAAU,MAAM,MAAM,KAAK,EACtDd,EAAI,KAAK,qBAAqBc,EAAU,QAAQ,OAAO,IAAI,KAAK,EAChEd,EAAI,KAAK,sBAAsBc,EAAU,QAAQ,OAAO,KAAK,KAAK,EAClEd,EAAI,KAAK,KAAK,EACdA,EAAI,KAAK,GAAG,EAEZA,EAAI,KAAK,6BAA6B,EACtCA,EAAI,KAAK,oBAAoB,EAC7BA,EAAI,KAAK,kBAAkBc,EAAU,MAAM,MAAM,KAAK,EACtDd,EAAI,KAAK,qBAAqBc,EAAU,QAAQ,OAAO,IAAI,KAAK,EAChEd,EAAI,KAAK,sBAAsBc,EAAU,QAAQ,OAAO,KAAK,KAAK,EAClEd,EAAI,KAAK,KAAK,EACdA,EAAI,KAAK,GAAG,EAELA,CACT,CAEA,SAASQ,GAAmBT,EAA6C,CACvE,MAAMC,EAAgB,GAChB,CAAE,QAAAe,GAAYhB,EAEpB,OAAIgB,EAAQ,SAAW,eACrBf,EAAI,KAAK,qBAAqB,EAC9BA,EAAI,KAAK,kBAAkB,EAC3BA,EAAI,KAAK,UAAUe,EAAQ,IAAI,OAAO,KAAK,EAC3Cf,EAAI,KAAK,GAAG,EAEZA,EAAI,KAAK,wBAAwB,EACjCA,EAAI,KAAK,eAAe,IAAMe,EAAQ,MAAM,OAAO,IAAI,EACvDf,EAAI,KAAK,GAAG,EAEZA,EAAI,KAAK,gBAAgB,EACzBA,EAAI,KAAK,eAAee,EAAQ,MAAM,OAAO,IAAI,EACjDf,EAAI,KAAK,GAAG,EAERe,EAAQ,SAAW,iBACrBf,EAAI,KAAK,gBAAgB,EACzBA,EAAI,KAAK,cAAc,EACvBA,EAAI,KAAK,GAAG,GAIdA,EAAI,KAAK,6BAA6B,EACtCA,EAAI,KAAK,uBAAuB,EAChCA,EAAI,KAAK,6BAA6B,EACtCA,EAAI,KAAK,KAAK,EACdA,EAAI,KAAK,kBAAkB,EAC3BA,EAAI,KAAK,qBAAqB,EAC9BA,EAAI,KAAK,KAAK,EACdA,EAAI,KAAK,GAAG,GAGPA,CACT,CAEA,SAASS,GAAgBV,EAA6C,CACpE,MAAMC,EAAgB,GAChB,CAAE,KAAAqB,GAAStB,EAGjB,OAAAC,EAAI,KAAK,qBAAqB,EAC9BA,EAAI,KAAK,kBAAkB,EAC3BA,EAAI,KAAK,mCAAmCqB,EAAK,QAAQ,QAAQ,OAAO,SAAS,EACjFrB,EAAI,KAAK,cAAc,EACvBA,EAAI,KAAK,GAAG,EAEZA,EAAI,KAAK,6BAA6B,EACtCA,EAAI,KAAK,uBAAuB,EAChCA,EAAI,KAAK,qCAAqCqB,EAAK,QAAQ,QAAQ,MAAM,SAAS,EAClFrB,EAAI,KAAK,KAAK,EACdA,EAAI,KAAK,GAAG,EAEZA,EAAI,KAAK,6BAA6B,EACtCA,EAAI,KAAK,uBAAuB,EAChCA,EAAI,KAAK,qCAAqCqB,EAAK,QAAQ,QAAQ,MAAM,SAAS,EAClFrB,EAAI,KAAK,KAAK,EACdA,EAAI,KAAK,GAAG,EAGRqB,EAAK,OAAO,SAAW,WACzBrB,EAAI,KAAK,oBAAoB,EAC7BA,EAAI,KAAK,qBAAqB,EAC9BA,EAAI,KAAK,mBAAmB,EAC5BA,EAAI,KAAK,GAAG,GAIdA,EAAI,KAAK,gBAAgB,EACzBA,EAAI,KAAK,yBAAyB,EAClCA,EAAI,KAAK,yBAAyB,KAAK,MAAMqB,EAAK,QAAQ,QAAQ,OAAS,EAAE,CAAC,GAAG,EACjFrB,EAAI,KAAK,iCAAiC,EAC1CA,EAAI,KAAK,qBAAqB,EAC9BA,EAAI,KAAK,GAAG,EAELA,CACT,CC5TA,MAAMsB,GAAoBC,gBAAkD,MAAS,EAE/EC,GAAoB,CAACC,EAAwBC,IAA8C,CAC/F,OAAQA,EAAO,MACb,IAAK,iBAAkB,CACrB,MAAMC,EAAkB,CAAE,GAAGF,EAAM,UAEnC,GAAIC,EAAO,MAAQA,EAAO,KAAK,OAAS,EAAG,CAEzC,IAAIzC,EAAc0C,EAAgBD,EAAO,OAAO,EAChD,QAASE,EAAI,EAAGA,EAAIF,EAAO,KAAK,OAAS,EAAGE,IAC1C3C,EAASA,EAAOyC,EAAO,KAAKE,CAAC,CAAC,EAEhC3C,EAAOyC,EAAO,KAAKA,EAAO,KAAK,OAAS,CAAC,CAAC,EAAIA,EAAO,KACvD,MAEEC,EAAgBD,EAAO,OAAO,EAAI1C,GAChC2C,EAAgBD,EAAO,OAAO,EAC9BA,EAAO,OAIX,OAAAC,EAAgB,MAAQ,CACtB,GAAGA,EAAgB,MACnB,aAAc,IAAI,OAAO,cACzB,QAAS,IAGJ,CACL,GAAGF,EACH,SAAUE,EACV,QAAS,GACT,WAAY,UAEhB,CAEA,IAAK,eACH,MAAO,CACL,GAAGF,EACH,SAAUC,EAAO,SACjB,QAAS,GACT,WAAY,SAGhB,IAAK,qBACH,MAAO,CACL,GAAGD,EACH,cAAeC,EAAO,QAG1B,IAAK,kBACH,MAAO,CACL,GAAGD,EACH,WAAYC,EAAO,QAGvB,IAAK,qBACH,MAAO,CACL,GAAGD,EACH,cAAeC,EAAO,SAG1B,IAAK,kBACH,MAAO,CACL,GAAGD,EACH,WAAYC,EAAO,KAGvB,IAAK,aACH,MAAO,CACL,GAAGD,EACH,QAASC,EAAO,SAGpB,IAAK,iBAAkB,CACrB,MAAMG,EAAaJ,EAAM,QAAQ,MAAM,EAAGA,EAAM,aAAe,CAAC,EAChE,OAAAI,EAAW,KAAKH,EAAO,QAAQ,EAG3BG,EAAW,OAAS,IACtBA,EAAW,QAGN,CACL,GAAGJ,EACH,QAASI,EACT,aAAcA,EAAW,OAAS,EAEtC,CAEA,IAAK,OAAQ,CACX,GAAIJ,EAAM,aAAe,EAAG,CAC1B,MAAMK,EAAWL,EAAM,aAAe,EACtC,MAAO,CACL,GAAGA,EACH,SAAUA,EAAM,QAAQK,CAAQ,EAChC,aAAcA,EACd,QAAS,GACT,WAAY,UAEhB,CACA,OAAOL,CACT,CAEA,IAAK,OAAQ,CACX,GAAIA,EAAM,aAAeA,EAAM,QAAQ,OAAS,EAAG,CACjD,MAAMK,EAAWL,EAAM,aAAe,EACtC,MAAO,CACL,GAAGA,EACH,SAAUA,EAAM,QAAQK,CAAQ,EAChC,aAAcA,EACd,QAAS,GACT,WAAY,UAEhB,CACA,OAAOL,CACT,CAEA,IAAK,mBAAoB,CACvB,MAAMM,EAAkBlD,GAAA,EACxB,MAAO,CACL,GAAG4C,EACH,SAAUM,EACV,QAAS,GACT,WAAY,UACZ,QAAS,CAACA,CAAe,EACzB,aAAc,EAElB,CAEA,QACE,OAAON,CAAA,CAEb,EASaO,GAAwD,CAAC,CACpE,SAAAC,EACA,gBAAAC,EACA,WAAAC,EAAa,IACb,cAAAC,CACF,IAAM,CACJ,MAAML,EAAkBlD,GAAA,EAClBwD,EAAiBH,EACnBlD,GAAU+C,EAAiBG,CAAsB,EACjDH,EAEE,CAACN,EAAOa,CAAQ,EAAIC,aAAWf,GAAmB,CACtD,SAAUa,EACV,cAAe,UACf,WAAY,QACZ,cAAe,KACf,WAAAF,EACA,QAAS,GACT,QAAS,CAACE,CAAc,EACxB,aAAc,EACf,EAEKG,EAAmBC,SAAiC,IAAI,EACxDC,EAAkBD,SAAOhB,EAAM,QAAQ,EAGvCkB,EAAgBC,cAAY,CAACC,EAAyBjC,EAAYrB,IAAoB,CAC1F+C,EAAS,CAAE,KAAM,iBAAkB,QAAAO,EAAS,MAAAjC,EAAO,KAAArB,EAAM,EAGzD,WAAW,IAAM,CACXmD,EAAgB,UAAYjB,EAAM,WACpCa,EAAS,CAAE,KAAM,iBAAkB,SAAUb,EAAM,SAAU,EAC7DiB,EAAgB,QAAUjB,EAAM,SAEpC,EAAG,GAAG,EAGFoB,IAAY,gBAAkBtD,GAAQA,EAAK,CAAC,IAAM,QACpD,WAAW,IAAM,CACf,MAAMuD,EAAS,SAAS,eAAe,2BAA2B,EAC9DA,GAAQ,eACVA,EAAO,cAAc,YACnB,CACE,KAAM,cACN,SAAUrB,EAAM,UAElB,IAGN,EAAG,GAAG,EAIRW,GAAe,kBAAkBS,EAASjC,CAAK,CACjD,EAAG,CAACa,EAAM,SAAUW,CAAa,CAAC,EAGlCW,YAAU,IAAM,CACd,MAAMC,EAAiBC,GAA2C,CAChE,GAAIA,EAAM,KAAK,OAAS,iBAElBT,EAAiB,SAAS,cAAe,CAC3C,MAAMxC,EAAMF,GAAY2B,EAAM,QAAQ,EACtCe,EAAiB,QAAQ,cAAc,YACrC,CACE,KAAM,iBACN,QAAS,CAAE,SAAUf,EAAM,SAAU,IAAAzB,CAAA,CAAI,EAE3C,IAEJ,CAEJ,EAEA,cAAO,iBAAiB,UAAWgD,CAAa,EACzC,IAAM,OAAO,oBAAoB,UAAWA,CAAa,CAClE,EAAG,CAACvB,EAAM,QAAQ,CAAC,EAGnBsB,YAAU,IAAM,CACd,GAAIP,EAAiB,SAAS,cAAe,CAC3C,MAAMxC,EAAMF,GAAY2B,EAAM,QAAQ,EACtCe,EAAiB,QAAQ,cAAc,YACrC,CACE,KAAM,iBACN,QAAS,CAAE,SAAUf,EAAM,SAAU,IAAAzB,CAAA,CAAI,EAE3C,IAEJ,CACF,EAAG,CAACyB,EAAM,QAAQ,CAAC,EAGnB,MAAMyB,EAAeN,cAAY,SAAY,CAC3CN,EAAS,CAAE,KAAM,kBAAmB,OAAQ,SAAU,EAEtD,GAAI,CACF,MAAMF,GAAe,SAASX,EAAM,QAAQ,EAE5Ca,EAAS,CAAE,KAAM,kBAAmB,OAAQ,QAAS,EACrDA,EAAS,CAAE,KAAM,aAAc,QAAS,GAAO,CACjD,MAAgB,CACdA,EAAS,CAAE,KAAM,kBAAmB,OAAQ,QAAS,CACvD,CACF,EAAG,CAACb,EAAM,SAAUW,CAAa,CAAC,EAG5Be,EAAkBP,cAAY,SAAY,CAC9CN,EAAS,CAAE,KAAM,kBAAmB,OAAQ,SAAU,EAEtD,GAAI,CAEF,MAAMY,EAAA,EAGN,MAAMd,GAAe,YAAYX,EAAM,QAAQ,EAE/Ca,EAAS,CAAE,KAAM,kBAAmB,OAAQ,QAAS,EACrDA,EAAS,CAAE,KAAM,aAAc,QAAS,GAAO,CACjD,MAAgB,CACdA,EAAS,CAAE,KAAM,kBAAmB,OAAQ,QAAS,CACvD,CACF,EAAG,CAACY,CAAY,CAAC,EAEXtC,EAAgC,CACpC,MAAAa,EACA,cAAAkB,EACA,YAAc5C,GAAauC,EAAS,CAAE,KAAM,eAAgB,SAAAvC,EAAU,EACtE,iBAAmBqD,GAAW,CAC5Bd,EAAS,CAAE,KAAM,qBAAsB,OAAAc,CAAA,CAAQ,EAC/ChB,GAAe,iBAAiBgB,CAAM,CACxC,EACA,iBAAmBP,GAAYP,EAAS,CAAE,KAAM,qBAAsB,QAAAO,EAAS,EAC/E,cAAgBQ,GAAQf,EAAS,CAAE,KAAM,kBAAmB,IAAAe,EAAK,EACjE,aAAAH,EACA,cAAe,IAAM,CACnBZ,EAAS,CAAE,KAAM,mBAAoB,EACrCF,GAAe,WACjB,EACA,gBAAAe,EACA,KAAM,IAAMb,EAAS,CAAE,KAAM,OAAQ,EACrC,KAAM,IAAMA,EAAS,CAAE,KAAM,OAAQ,EACrC,QAASb,EAAM,aAAe,EAC9B,QAASA,EAAM,aAAeA,EAAM,QAAQ,OAAS,EACrD,cAAAW,CAAA,EAIFW,mBAAU,IAAM,CACd,MAAMD,EAAS,SAAS,cAAc,4BAA4B,EAC9DA,IACFN,EAAiB,QAAUM,EAE/B,EAAG,EAAE,EAGHQ,MAAChC,GAAkB,SAAlB,CAA2B,MAAAV,EACzB,SAAAqB,CAAA,CACH,CAEJ,EAEasB,EAAgB,IAAM,CACjC,MAAMC,EAAUC,aAAWnC,EAAiB,EAC5C,GAAI,CAACkC,EACH,MAAM,IAAI,MAAM,sDAAsD,EAExE,OAAOA,CACT,EC7UO,SAASE,EACdC,EAAqC,GACX,CAC1B,KAAM,CACJ,WAAAC,EAAa,IACb,SAAAC,EAAW,GACX,iBAAAC,EAAmB,KACjBH,EAEE,CACJ,MAAAlC,EACA,cAAesC,EACf,iBAAkBC,EAClB,aAAAd,EACA,cAAAe,EACA,KAAMC,EACN,KAAMC,EACN,QAAAC,EACA,QAAAC,CAAA,EACEd,EAAA,EAEE,CAACe,EAAWC,CAAY,EAAIC,WAAsB,IAAI,EACtD,CAACC,EAAUC,CAAW,EAAIF,WAAS,EAAK,EAExCG,EAAmBlC,SAAA,EACnBmC,EAAmBnC,SAAA,EACnBoC,EAAsBpC,SAAgChB,EAAM,QAAQ,EAGpEkB,EAAgBC,cACpB,CAACC,EAAyBjC,EAAYrB,IAAoB,CAEpDoF,EAAiB,SACnB,aAAaA,EAAiB,OAAO,EAIvCZ,EAAqBlB,EAASjC,EAAOrB,CAAI,EAGrCsE,IACFc,EAAiB,QAAU,WAAW,SAAY,CAChDD,EAAY,EAAI,EAChB,GAAI,CACF,MAAMxB,EAAA,EACNqB,EAAa,IAAI,IAAM,CACzB,SACEG,EAAY,EAAK,CACnB,CACF,EAAGd,CAAU,EAEjB,EACA,CAACG,EAAsBb,EAAcW,EAAUD,CAAU,GAIrDkB,EAAalC,cACjB,CAACC,EAAyBtD,IAAoB,CAC5C,MAAMwF,EAAkBtD,EAAM,SAASoB,CAAO,EAE9C,OAAItD,GAAQA,EAAK,OAAS,EACjBF,GAAe0F,EAAiBxF,CAAI,EAGtCwF,CACT,EACA,CAACtD,EAAM,QAAQ,GAIXuD,EAAepC,cAClBC,GAA4B,gDAC3B,2BAAAd,EAAA,EAAkC,0BAAAlD,CAAA,WAAE,KAAK,CAAC,CAAE,mBAAAA,KAAyB,CACnE,MAAMkD,EAAkBlD,EAAA,EACxBkF,EAAqBlB,EAASd,EAAgBc,CAAO,CAAC,CACxD,CAAC,CACH,EACA,CAACkB,CAAoB,GAIjBkB,EAAWrC,cAAY,IAAM,CACjCqB,EAAA,CACF,EAAG,CAACA,CAAa,CAAC,EAGlBlB,mBAAU,IAAM,CACd,GAAIc,GAAYpC,EAAM,QAEpB,OAAImD,EAAiB,SACnB,aAAaA,EAAiB,OAAO,EAIvCA,EAAiB,QAAU,WAAW,SAAY,CAChD,GAAInD,EAAM,QAAS,CACjBiD,EAAY,EAAI,EAChB,GAAI,CACF,MAAMxB,EAAA,EACNqB,EAAa,IAAI,IAAM,CACzB,SACEG,EAAY,EAAK,CACnB,CACF,CACF,EAAGZ,CAAgB,EAEZ,IAAM,CACPc,EAAiB,SACnB,aAAaA,EAAiB,OAAO,CAEzC,CAEJ,EAAG,CAACf,EAAUC,EAAkBrC,EAAM,QAASyB,CAAY,CAAC,EAG5DH,YAAU,IAAM,CACTtD,GAAUoF,EAAoB,QAASpD,EAAM,QAAQ,IACxDoD,EAAoB,QAAUpD,EAAM,SAExC,EAAG,CAACA,EAAM,QAAQ,CAAC,EAGnBsB,YAAU,IACD,IAAM,CACP4B,EAAiB,SACnB,aAAaA,EAAiB,OAAO,EAEnCC,EAAiB,SACnB,aAAaA,EAAiB,OAAO,CAEzC,EACC,EAAE,EAEE,CACL,SAAUnD,EAAM,SAChB,cAAAkB,EACA,WAAAmC,EACA,aAAAE,EACA,SAAAC,EACA,QAASxD,EAAM,QACf,SAAAgD,EACA,UAAAH,EACA,cAAe7C,EAAM,cACrB,iBAAkBuC,EAClB,KAAME,EACN,KAAMC,EACN,QAAAC,EACA,QAAAC,CAAA,CAEJ,CC5KO,MAAMa,GAAoD,CAAC,CAChE,QAAAC,EACA,SAAAC,EAAW,cACb,IAAM,CACJ,KAAM,CAAE,MAAA3D,EAAO,aAAAyB,EAAc,gBAAAC,CAAA,EAAoBI,EAAA,EAC3C,CAAE,QAAA8B,EAAS,SAAAZ,EAAU,KAAAa,EAAM,KAAAC,EAAM,QAAAnB,EAAS,QAAAC,CAAA,EAAYX,EAAA,EAEtD8B,EAAe,IAAM,CACrBH,GAEE,CADO,OAAO,QAAQ,6BAA6B,GAGzDF,EAAA,CACF,EAEMM,EAAa,SAAY,CAC7B,MAAMvC,EAAA,CACR,EAEMwC,EAAgB,SAAY,CAChC,MAAMvC,EAAA,EAENgC,EAAA,CACF,EAEA,OACEQ,OAAC,UAAO,UAAU,uBAChB,UAAAA,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,UACC,QAAS6B,EACT,UAAU,sBACV,MAAM,mBAEN,SAAA7B,MAACsC,EAAA,CAAE,KAAM,GAAI,WAEd,OACC,UAAAtC,MAAC,MAAG,uBAAW,EACfA,MAAC,QAAK,UAAU,0BAA2B,SAAA8B,CAAA,CAAS,GACtD,GACF,EAEAO,OAAC,OAAI,UAAU,wBAEb,UAAAA,OAAC,UACC,QAASH,EACT,UAAU,gCACV,MAAM,YAEN,UAAAlC,MAACuC,IAAU,KAAM,GAAI,MAAO,CAAE,YAAa,GAAK,EAAE,eAKpDF,OAAC,OAAI,UAAU,wBACb,UAAArC,MAAC,UACC,QAASgC,EACT,SAAU,CAAClB,EACX,UAAU,iBACV,MAAM,OAEN,SAAAd,MAACwC,GAAA,CAAK,KAAM,GAAI,IAElBxC,MAAC,UACC,QAASiC,EACT,SAAU,CAAClB,EACX,UAAU,iBACV,MAAM,OAEN,SAAAf,MAACyC,GAAA,CAAK,KAAM,GAAI,GAClB,EACF,EAGAJ,OAAC,KACC,KAAMlE,EAAM,WACZ,OAAO,SACP,IAAI,sBACJ,UAAU,gCACV,MAAM,qBAEN,UAAA6B,MAAC0C,IAAI,KAAM,GAAI,MAAO,CAAE,YAAa,GAAK,EAAE,aAK7CX,GACC/B,MAAC,QAAK,UAAU,uBACb,WACCqC,OAAAM,WAAA,CACE,UAAA3C,MAAC4C,GAAA,CAAU,KAAM,GAAI,UAAU,OAAO,EAAE,aAE1C,EAEA5C,MAAC,QAAK,UAAU,UAAU,2BAAe,EAE7C,EAIFqC,OAAC,UACC,QAASF,EACT,SAAU,CAACJ,GAAWZ,EACtB,UAAU,gCAEV,UAAAnB,MAAC6C,IAAK,KAAM,GAAI,MAAO,CAAE,YAAa,GAAK,EAAE,gBAK/C7C,MAAC,UACC,QAASoC,EACT,SAAUjB,EACV,UAAU,wBAET,WAAW,gBAAkB,WAChC,EACF,GACF,CAEJ,+CCxGA,SAAS3F,EAAS8B,EAAO,CACvB,IAAIwF,EAAO,OAAOxF,EAClB,OAAOA,GAAS,OAASwF,GAAQ,UAAYA,GAAQ,WACvD,CAEA,OAAAC,GAAiBvH,kDC7BjB,IAAIwH,EAAa,OAAO,YAAU,UAAY,YAAU,WAAO,SAAW,QAAU,WAEpF,OAAAC,GAAiBD,kDCHjB,IAAIA,EAAaE,GAAA,EAGbC,EAAW,OAAO,MAAQ,UAAY,MAAQ,KAAK,SAAW,QAAU,KAGxEC,EAAOJ,GAAcG,GAAY,SAAS,aAAa,IAE3D,OAAAE,GAAiBD,kDCRjB,IAAIA,EAAOF,GAAA,EAkBPI,EAAM,UAAW,CACnB,OAAOF,EAAK,KAAK,IAAG,CACtB,EAEA,OAAAG,GAAiBD,kDCrBjB,IAAIE,EAAe,KAUnB,SAASC,EAAgBC,EAAQ,CAG/B,QAFIrH,EAAQqH,EAAO,OAEZrH,KAAWmH,EAAa,KAAKE,EAAO,OAAOrH,CAAK,CAAC,GAAG,CAC3D,OAAOA,CACT,CAEA,OAAAsH,GAAiBF,kDClBjB,IAAIA,EAAkBP,GAAA,EAGlBU,EAAc,OASlB,SAASC,EAASH,EAAQ,CACxB,OAAOA,GACHA,EAAO,MAAM,EAAGD,EAAgBC,CAAM,EAAI,CAAC,EAAE,QAAQE,EAAa,EAAE,CAE1E,CAEA,OAAAE,GAAiBD,kDClBjB,IAAIT,EAAOF,GAAA,EAGPa,EAASX,EAAK,OAElB,OAAAY,GAAiBD,kDCLjB,IAAIA,EAASb,GAAA,EAGTe,EAAc,OAAO,UAGrBC,EAAiBD,EAAY,eAO7BE,EAAuBF,EAAY,SAGnCG,EAAiBL,EAASA,EAAO,YAAc,OASnD,SAASM,EAAU/G,EAAO,CACxB,IAAIgH,EAAQJ,EAAe,KAAK5G,EAAO8G,CAAc,EACjD1G,EAAMJ,EAAM8G,CAAc,EAE9B,GAAI,CACF9G,EAAM8G,CAAc,EAAI,OACxB,IAAIG,EAAW,EACnB,MAAc,EAEZ,IAAIC,EAASL,EAAqB,KAAK7G,CAAK,EAC5C,OAAIiH,IACED,EACFhH,EAAM8G,CAAc,EAAI1G,EAExB,OAAOJ,EAAM8G,CAAc,GAGxBI,CACT,CAEA,OAAAC,GAAiBJ,kDC5CjB,IAAIJ,EAAc,OAAO,UAOrBE,EAAuBF,EAAY,SASvC,SAASS,EAAepH,EAAO,CAC7B,OAAO6G,EAAqB,KAAK7G,CAAK,CACxC,CAEA,OAAAqH,GAAiBD,kDCrBjB,IAAIX,EAASb,GAAA,EACTmB,EAAYO,GAAA,EACZF,EAAiBG,GAAA,EAGjBC,EAAU,gBACVC,EAAe,qBAGfX,EAAiBL,EAASA,EAAO,YAAc,OASnD,SAASiB,EAAW1H,EAAO,CACzB,OAAIA,GAAS,KACJA,IAAU,OAAYyH,EAAeD,EAEtCV,GAAkBA,KAAkB,OAAO9G,CAAK,EACpD+G,EAAU/G,CAAK,EACfoH,EAAepH,CAAK,CAC1B,CAEA,OAAA2H,GAAiBD,kDCHjB,SAASE,EAAa5H,EAAO,CAC3B,OAAOA,GAAS,MAAQ,OAAOA,GAAS,QAC1C,CAEA,OAAA6H,GAAiBD,kDC5BjB,IAAIF,EAAa9B,GAAA,EACbgC,EAAeN,GAAA,EAGfQ,EAAY,kBAmBhB,SAASC,EAAS/H,EAAO,CACvB,OAAO,OAAOA,GAAS,UACpB4H,EAAa5H,CAAK,GAAK0H,EAAW1H,CAAK,GAAK8H,CACjD,CAEA,OAAAE,GAAiBD,kDC5BjB,IAAIxB,EAAWX,GAAA,EACX1H,EAAWoJ,GAAA,EACXS,EAAWR,GAAA,EAGXU,EAAM,IAGNC,EAAa,qBAGbC,EAAa,aAGbC,EAAY,cAGZC,EAAe,SAyBnB,SAASC,EAAStI,EAAO,CACvB,GAAI,OAAOA,GAAS,SAClB,OAAOA,EAET,GAAI+H,EAAS/H,CAAK,EAChB,OAAOiI,EAET,GAAI/J,EAAS8B,CAAK,EAAG,CACnB,IAAIuI,EAAQ,OAAOvI,EAAM,SAAW,WAAaA,EAAM,QAAO,EAAKA,EACnEA,EAAQ9B,EAASqK,CAAK,EAAKA,EAAQ,GAAMA,CAC7C,CACE,GAAI,OAAOvI,GAAS,SAClB,OAAOA,IAAU,EAAIA,EAAQ,CAACA,EAEhCA,EAAQuG,EAASvG,CAAK,EACtB,IAAIwI,EAAWL,EAAW,KAAKnI,CAAK,EACpC,OAAQwI,GAAYJ,EAAU,KAAKpI,CAAK,EACpCqI,EAAarI,EAAM,MAAM,CAAC,EAAGwI,EAAW,EAAI,CAAC,EAC5CN,EAAW,KAAKlI,CAAK,EAAIiI,EAAM,CAACjI,CACvC,CAEA,OAAAyI,GAAiBH,kDC/DjB,IAAIpK,EAAW0H,GAAA,EACXI,EAAMsB,GAAA,EACNgB,EAAWf,GAAA,EAGXmB,EAAkB,sBAGlBC,EAAY,KAAK,IACjBC,EAAY,KAAK,IAwDrB,SAASC,EAASC,EAAMC,EAAMhG,EAAS,CACrC,IAAIiG,EACAC,EACAC,EACAhC,EACAiC,EACAC,EACAC,EAAiB,EACjBC,EAAU,GACVC,EAAS,GACTC,EAAW,GAEf,GAAI,OAAOV,GAAQ,WACjB,MAAM,IAAI,UAAUJ,CAAe,EAErCK,EAAOT,EAASS,CAAI,GAAK,EACrB7K,EAAS6E,CAAO,IAClBuG,EAAU,CAAC,CAACvG,EAAQ,QACpBwG,EAAS,YAAaxG,EACtBmG,EAAUK,EAASZ,EAAUL,EAASvF,EAAQ,OAAO,GAAK,EAAGgG,CAAI,EAAIG,EACrEM,EAAW,aAAczG,EAAU,CAAC,CAACA,EAAQ,SAAWyG,GAG1D,SAASC,EAAWC,EAAM,CACxB,IAAIC,EAAOX,EACPY,EAAUX,EAEd,OAAAD,EAAWC,EAAW,OACtBI,EAAiBK,EACjBxC,EAAS4B,EAAK,MAAMc,EAASD,CAAI,EAC1BzC,CACX,CAEE,SAAS2C,EAAYH,EAAM,CAEzB,OAAAL,EAAiBK,EAEjBP,EAAU,WAAWW,EAAcf,CAAI,EAEhCO,EAAUG,EAAWC,CAAI,EAAIxC,CACxC,CAEE,SAAS6C,EAAcL,EAAM,CAC3B,IAAIM,EAAoBN,EAAON,EAC3Ba,EAAsBP,EAAOL,EAC7Ba,GAAcnB,EAAOiB,EAEzB,OAAOT,EACHX,EAAUsB,GAAahB,EAAUe,CAAmB,EACpDC,EACR,CAEE,SAASC,EAAaT,EAAM,CAC1B,IAAIM,EAAoBN,EAAON,EAC3Ba,EAAsBP,EAAOL,EAKjC,OAAQD,IAAiB,QAAcY,GAAqBjB,GACzDiB,EAAoB,GAAOT,GAAUU,GAAuBf,CACnE,CAEE,SAASY,GAAe,CACtB,IAAIJ,EAAO1D,EAAG,EACd,GAAImE,EAAaT,CAAI,EACnB,OAAOU,EAAaV,CAAI,EAG1BP,EAAU,WAAWW,EAAcC,EAAcL,CAAI,CAAC,CAC1D,CAEE,SAASU,EAAaV,EAAM,CAK1B,OAJAP,EAAU,OAINK,GAAYR,EACPS,EAAWC,CAAI,GAExBV,EAAWC,EAAW,OACf/B,EACX,CAEE,SAASmD,GAAS,CACZlB,IAAY,QACd,aAAaA,CAAO,EAEtBE,EAAiB,EACjBL,EAAWI,EAAeH,EAAWE,EAAU,MACnD,CAEE,SAASmB,GAAQ,CACf,OAAOnB,IAAY,OAAYjC,EAASkD,EAAapE,EAAG,CAAE,CAC9D,CAEE,SAASuE,GAAY,CACnB,IAAIb,EAAO1D,EAAG,EACVwE,EAAaL,EAAaT,CAAI,EAMlC,GAJAV,EAAW,UACXC,EAAW,KACXG,EAAeM,EAEXc,EAAY,CACd,GAAIrB,IAAY,OACd,OAAOU,EAAYT,CAAY,EAEjC,GAAIG,EAEF,oBAAaJ,CAAO,EACpBA,EAAU,WAAWW,EAAcf,CAAI,EAChCU,EAAWL,CAAY,CAEtC,CACI,OAAID,IAAY,SACdA,EAAU,WAAWW,EAAcf,CAAI,GAElC7B,CACX,CACE,OAAAqD,EAAU,OAASF,EACnBE,EAAU,MAAQD,EACXC,CACT,CAEA,OAAAE,GAAiB5B,iCCzKJ6B,GAAgC,CAC3C,CACE,GAAI,eACJ,MAAO,gBACP,YAAa,6BACb,SAAU,CAAC,OAAQ,QAAS,UAAW,QAAS,WAAY,YAAa,UAAW,MAAM,EAC1F,SAAU,SACV,KAAM,CAAC,eAAe,EACtB,WAAY,IAEd,CACE,GAAI,SACJ,MAAO,SACP,YAAa,uCACb,SAAU,CAAC,QAAS,QAAS,UAAW,aAAc,OAAQ,OAAQ,SAAU,UAAW,WAAW,EACtG,SAAU,SACV,KAAM,CAAC,SAAU,QAAQ,EACzB,WAAY,IAEd,CACE,GAAI,aACJ,MAAO,aACP,YAAa,0BACb,SAAU,CAAC,OAAQ,OAAQ,UAAW,KAAM,KAAM,KAAM,YAAa,OAAQ,SAAU,QAAQ,EAC/F,SAAU,SACV,KAAM,CAAC,SAAU,YAAY,EAC7B,WAAY,IAEd,CACE,GAAI,YACJ,MAAO,YACP,YAAa,2BACb,SAAU,CAAC,QAAS,YAAa,SAAU,UAAW,UAAW,SAAU,QAAS,WAAW,EAC/F,SAAU,SACV,KAAM,CAAC,SAAU,WAAW,EAC5B,WAAY,IAEd,CACE,GAAI,SACJ,MAAO,SACP,YAAa,iCACb,SAAU,CAAC,SAAU,aAAc,OAAQ,MAAO,SAAU,cAAe,QAAQ,EACnF,SAAU,SACV,KAAM,CAAC,QAAQ,EACf,WAAY,IAEd,CACE,GAAI,SACJ,MAAO,SACP,YAAa,iCACb,SAAU,CAAC,SAAU,SAAU,UAAW,YAAa,UAAW,QAAQ,EAC1E,SAAU,SACV,KAAM,CAAC,QAAQ,EACf,WAAY,IAEd,CACE,GAAI,UACJ,MAAO,UACP,YAAa,8BACb,SAAU,CAAC,UAAW,SAAU,QAAS,OAAQ,QAAS,UAAU,EACpE,SAAU,SACV,KAAM,CAAC,SAAS,EAChB,WAAY,IAEd,CACE,GAAI,OACJ,MAAO,OACP,YAAa,wCACb,SAAU,CAAC,OAAQ,OAAQ,UAAW,UAAW,WAAY,MAAO,UAAW,QAAQ,EACvF,SAAU,UACV,KAAM,CAAC,MAAM,EACb,WAAY,GAEhB,EAOaC,GAAgD,CAAC,CAC5D,SAAAC,EACA,UAAAC,EAAY,EACd,IAAM,CACJ,KAAM,CAACC,EAAOC,CAAQ,EAAInH,WAAS,EAAE,EAC/B,CAACoH,EAAYC,CAAa,EAAIrH,WAAS,EAAK,EAC5C,CAACsH,EAAeC,CAAgB,EAAIvH,WAAS,CAAC,EAC9C,CAACwH,EAAgBC,CAAiB,EAAIzH,WAAmB,EAAE,EAC3D0H,EAAWzJ,SAAyB,IAAI,EAGxC0J,EAAkBC,UACtB,IAAM3C,GAAU4C,GAAwB,CACtCV,EAASU,CAAW,CACtB,EAAG,GAAG,EACN,EAAC,EAIGC,EAAgBF,UAAQ,IAAM,CAClC,GAAI,CAACV,EAAM,OAET,OAAOJ,GACJ,KAAK,CAACiB,EAAG7M,KAAOA,EAAE,YAAc,IAAM6M,EAAE,YAAc,EAAE,EACxD,MAAM,EAAG,CAAC,EAGf,MAAMC,EAAad,EAAM,cACnBe,EAAQD,EAAW,MAAM,GAAG,EAAE,OAAOE,GAAKA,EAAE,OAAS,CAAC,EAE5D,OAAOpB,GACJ,IAAIvM,GAAQ,CACX,IAAI4N,EAAQ,EAGZ,OAAI5N,EAAK,MAAM,gBAAkByN,IAAYG,GAAS,KAGlD5N,EAAK,MAAM,cAAc,SAASyN,CAAU,IAAGG,GAAS,IAGxD5N,EAAK,YAAY,cAAc,SAASyN,CAAU,IAAGG,GAAS,IAGlEF,EAAM,QAAQG,GAAQ,CACpB7N,EAAK,SAAS,QAAQ8N,GAAW,CAC3BA,EAAQ,cAAc,SAASD,CAAI,IAAGD,GAAS,GACrD,CAAC,CACH,CAAC,EAGDA,IAAU5N,EAAK,YAAc,GAAK,GAE3B,CAAE,GAAGA,EAAM,MAAA4N,CAAA,CACpB,CAAC,EACA,UAAe5N,EAAK,MAAQ,CAAC,EAC7B,KAAK,CAACwN,EAAG7M,IAAMA,EAAE,MAAQ6M,EAAE,KAAK,EAChC,MAAM,EAAG,CAAC,CACf,EAAG,CAACb,CAAK,CAAC,EAGV3I,YAAU,IAAM,CACd,MAAM+J,EAAiBC,GAAqB,CAC1C,GAAKnB,EAEL,OAAQmB,EAAE,KACR,IAAK,YACHA,EAAE,iBACFhB,KACEiB,EAAOV,EAAc,OAAS,EAAIU,EAAO,EAAI,GAE/C,MACF,IAAK,UACHD,EAAE,iBACFhB,KACEiB,EAAO,EAAIA,EAAO,EAAIV,EAAc,OAAS,GAE/C,MACF,IAAK,QACHS,EAAE,iBACET,EAAcR,CAAa,GAC7BmB,EAAaX,EAAcR,CAAa,EAAE,EAAE,EAE9C,MACF,IAAK,SACHD,EAAc,EAAK,EACnBK,EAAS,SAAS,OAClB,MAEN,EAEA,gBAAS,iBAAiB,UAAWY,CAAa,EAC3C,IAAM,SAAS,oBAAoB,UAAWA,CAAa,CACpE,EAAG,CAAClB,EAAYU,EAAeR,CAAa,CAAC,EAE7C,MAAMmB,EAAgBC,GAA8B,CAElD,MAAMC,EAAY,CAACzB,EAAO,GAAGM,EAAe,OAAOoB,GAAKA,IAAM1B,CAAK,CAAC,EAAE,MAAM,EAAG,CAAC,EAChFO,EAAkBkB,CAAS,EAG3BxB,EAAS,EAAE,EACXE,EAAc,EAAK,EACnBL,EAAS0B,CAAS,CACpB,EAEMG,EAAiB,CAACC,EAAc5B,IAAkB,CACtD,GAAI,CAACA,EAAO,OAAO4B,EACnB,MAAMC,EAAQ,IAAI,OAAO,IAAI7B,CAAK,IAAK,IAAI,EACrC8B,EAAQF,EAAK,MAAMC,CAAK,EAC9B,OACEjK,MAAA2C,WAAA,CACG,eAAM,QAAQuH,CAAK,GAAKA,EAAM,IAAI,CAACC,EAAM7L,IACxC2L,EAAM,KAAKE,CAAI,EACbnK,MAAC,QAAa,UAAU,iCACrB,SAAAmK,CAAA,EADQ7L,CAEX,EAEA6L,CAAA,EAGN,CAEJ,EAEA,cACG,OAAI,UAAW,iCAAiChC,CAAS,GACxD,UAAA9F,OAAC,OAAI,UAAU,qCACb,gBAAC+H,GAAA,CAAO,UAAU,4BAA4B,KAAM,GAAI,EACxDpK,MAAC,SACC,IAAK4I,EACL,KAAK,OACL,YAAY,8BACZ,MAAOR,EACP,SAAWqB,GAAM,CACfpB,EAASoB,EAAE,OAAO,KAAK,EACvBZ,EAAgBY,EAAE,OAAO,KAAK,CAChC,EACA,QAAS,IAAMlB,EAAc,EAAI,EACjC,UAAU,+BAEXH,GACCpI,MAAC,UACC,QAAS,IAAM,CACbqI,EAAS,EAAE,EACXO,EAAS,SAAS,OACpB,EACA,UAAU,6BAEV,SAAA5I,MAACsC,EAAA,CAAE,KAAM,GAAI,GACf,EAEJ,EAECgG,GACCjG,OAAC,OAAI,UAAU,gCACZ,WAAC+F,GAASM,EAAe,OAAS,UAChC,OAAI,UAAU,+BACb,UAAArG,OAAC,MACC,UAAArC,MAACqK,GAAA,CAAM,KAAM,GAAI,EAAE,mBAErB,EACArK,MAAC,MACE,eAAM,QAAQ0I,CAAc,GAAKA,EAAe,IAAI,CAAC4B,EAAQhM,IAC5D0B,MAAC,MAEC,QAAS,IAAM,CACbqI,EAASiC,CAAM,EACfzB,EAAgByB,CAAM,CACxB,EAEC,SAAAA,CAAA,EANIhM,CAAA,CAQR,EACH,GACF,EAGD,CAAC8J,GACApI,MAAC,OAAI,UAAU,+BACb,gBAAC,MACC,UAAAA,MAACuK,GAAA,CAAW,KAAM,GAAI,EAAE,oBAE1B,EACF,EAGD,MAAM,QAAQvB,CAAa,GAAKA,EAAc,OAAS,EACtDhJ,MAAC,MAAG,UAAU,+BACX,SAAAgJ,EAAc,IAAI,CAACvN,EAAMY,IACxB2D,MAAC,MAEC,UAAW,+BACT3D,IAAUmM,EAAgB,WAAa,EACzC,GACA,QAAS,IAAMmB,EAAalO,EAAK,EAAE,EACnC,aAAc,IAAMgN,EAAiBpM,CAAK,EAE1C,SAAAgG,OAAC,OAAI,UAAU,sCACb,UAAArC,MAAC,MAAI,SAAA+J,EAAetO,EAAK,MAAO2M,CAAK,EAAE,QACtC,KAAG,SAAA2B,EAAetO,EAAK,YAAa2M,CAAK,EAAE,EAC5C/F,OAAC,OAAI,UAAU,mCACb,UAAArC,MAAC,QAAK,UAAU,4BACb,WAAK,KAAK,KAAK,KAAK,EACvB,EACC,MAAM,QAAQvE,EAAK,QAAQ,GAAKA,EAAK,SAAS,MAAM,EAAG,CAAC,EAAE,IAAI8N,GAC7DlH,OAAC,QAAmB,UAAU,2BAC5B,UAAArC,MAACwK,GAAA,CAAI,KAAM,GAAI,EACdjB,CAAA,GAFQA,CAGX,CACD,GACH,GACF,GArBK9N,EAAK,GAuBb,EACH,EACE2M,SACD,OAAI,UAAU,6BACb,UAAA/F,OAAC,KAAE,oCAAwB+F,EAAM,KAAC,QACjC,KAAE,UAAU,4BAA4B,iEAEzC,GACF,EACE,MACN,GAEJ,CAEJ,EC1TMqC,GAAyB,CAC7B,CACE,GAAI,eACJ,MAAO,gBACP,YAAa,8BAEf,CACE,GAAI,SACJ,MAAO,SACP,SAAU,CACR,CACE,GAAI,SACJ,MAAO,SACP,YAAa,wCAEf,CACE,GAAI,aACJ,MAAO,aACP,YAAa,2BAEf,CACE,GAAI,YACJ,MAAO,YACP,YAAa,2BACf,CACF,EAEF,CACE,GAAI,SACJ,MAAO,SACP,YAAa,iCACb,SAAU,CACR,CACE,GAAI,SACJ,MAAO,iBACP,YAAa,8BACf,CACF,EAEF,CACE,GAAI,SACJ,MAAO,SACP,YAAa,iCACb,SAAU,CACR,CACE,GAAI,SACJ,MAAO,iBACP,YAAa,yBACf,CACF,EAEF,CACE,GAAI,UACJ,MAAO,UACP,YAAa,+BAEf,CACE,GAAI,OACJ,MAAO,OACP,YAAa,wCAEjB,EAOaC,GAAsD,CAAC,CAClE,YAAAC,EACA,cAAAC,CACF,IAAM,CACJ,KAAM,CAAE,MAAAzM,EAAO,iBAAA0M,CAAA,EAAqB5K,EAAA,EAC9B,CAAC6K,EAAgBC,CAAiB,EAAI7J,WAAmB,EAAE,EAC3D,CAAC6H,EAAaiC,CAAc,EAAI9J,WAAS,EAAE,EAC3C,CAAC+J,EAAaC,CAAc,EAAIhK,WAA6B,MAAM,EACnE,CAACiK,EAAgBC,CAAiB,EAAIlK,WAAgC,IAAI,EAE1EmK,EAAeC,GAAoB,CACvCP,EAAkBrB,GAChBA,EAAK,SAAS4B,CAAO,EACjB5B,EAAK,OAAO6B,GAAMA,IAAOD,CAAO,EAChC,CAAC,GAAG5B,EAAM4B,CAAO,EAEzB,EAEME,EAAoBC,GAAwB,CAC5CA,EAAM,UAAYA,EAAM,SAAS,OAAS,EAC5CJ,EAAYI,EAAM,EAAE,GAEpBL,EAAkBK,EAAM,EAAE,EAC1BP,EAAe,SAAS,EACxBL,EAAiBY,EAAM,EAAE,EACzBb,EAAca,EAAM,EAAE,EAE1B,EAEMC,EAAkB,IAAM,CAC5BR,EAAe,MAAM,EACrBE,EAAkB,IAAI,EACtBP,EAAiB,IAAI,CACvB,EAEMc,EAAgBlB,GACf1B,EAEE0B,EAAO,OAAOgB,GAAS,CAC5B,MAAMG,EACJH,EAAM,MAAM,cAAc,SAAS1C,EAAY,aAAa,GAC5D0C,EAAM,aAAa,cAAc,SAAS1C,EAAY,aAAa,EAErE,GAAI0C,EAAM,SAAU,CAClB,MAAMI,EAAmBF,EAAaF,EAAM,QAAQ,EACpD,OAAOG,GAAiBC,EAAiB,OAAS,CACpD,CAEA,OAAOD,CACT,CAAC,EAbwBnB,EAgBrBqB,EAAiBH,EAAalB,EAAM,EAEpCsB,EAAc,CAACN,EAAqBO,EAAgB,IAAM,CAC9D,MAAM1D,EAAawC,EAAe,SAASW,EAAM,EAAE,EAC7CQ,EAAcR,EAAM,UAAYA,EAAM,SAAS,OAAS,EACxDS,EAAWvB,IAAgBc,EAAM,GAEvC,OACEpJ,OAAC,OAAmB,UAAU,8BAC5B,UAAAA,OAAC,OACC,UAAW,uBAAuB6J,EAAW,SAAW,EAAE,UAAUF,CAAK,GACzE,QAAS,IAAMR,EAAiBC,CAAK,EACrC,MAAO,CAAE,YAAa,GAAG,GAAKO,EAAQ,EAAE,MAExC,UAAA3J,OAAC,OAAI,UAAU,8BACb,UAAArC,MAAC,MAAG,UAAU,4BAA6B,SAAAyL,EAAM,MAAM,EACtDA,EAAM,aACLzL,MAAC,KAAE,UAAU,kCAAmC,WAAM,YAAY,GAEtE,EACCiM,GACCjM,MAAC,QAAK,UAAU,4BACb,SAAAsI,EAAatI,MAACmM,GAAA,CAAa,KAAM,GAAI,EAAKnM,MAACmM,GAAA,CAAa,KAAM,GAAI,EACrE,KAIHF,GAAe3D,GACdtI,MAAC,OAAI,UAAU,0BACZ,eAAM,QAAQyL,EAAM,QAAQ,GAAKA,EAAM,SAAS,IAAIW,GAASL,EAAYK,EAAOJ,EAAQ,CAAC,CAAC,EAC7F,IAtBMP,EAAM,EAwBhB,CAEJ,EAEA,GAAIR,IAAgB,WAAaE,EAAgB,CAE/C,MAAM5L,EAAU,MAAM,QAAQkL,EAAM,EACpBA,GAAO,KAAK4B,GAAKA,EAAE,KAAOlB,CAAc,GACxCV,GAAO,QAAQ4B,GAAKA,EAAE,UAAY,EAAE,EAAE,KAAKC,GAAKA,EAAE,KAAOnB,CAAc,EACxE,OAEf,OACE9I,OAAC,OAAI,UAAU,wBACb,UAAAA,OAAC,OAAI,UAAU,+BACb,UAAAA,OAAC,UACC,QAASqJ,EACT,UAAU,4BAEV,UAAA1L,MAACuM,GAAA,CAAY,KAAM,GAAI,EACvBvM,MAAC,QAAK,uBAAW,KAEnBA,MAAC,MAAI,SAAAT,GAAS,MAAM,GACtB,EAEAS,MAAC,OAAI,UAAU,gCAEb,eAAC,OAAI,UAAU,oCACb,SAAAqC,OAAC,KAAE,qBAAS9C,GAAS,MAAM,gBAAY,EACzC,EACF,GACF,CAEJ,CAEA,OACE8C,OAAC,OAAI,UAAU,wBAEb,UAAArC,MAACiI,GAAA,CACC,SAAW2B,GAAc,CACvBwB,EAAkBxB,CAAS,EAC3BsB,EAAe,SAAS,EACxBL,EAAiBjB,CAAS,EAC1BgB,EAAchB,CAAS,CACzB,IAIF5J,MAAC,OAAI,UAAU,uBACZ,eAAM,QAAQ8L,CAAc,GAAKA,EAAe,OAAS,EACxDA,EAAe,IAAIL,GAASM,EAAYN,CAAK,CAAC,QAE7C,OAAI,UAAU,2BACb,SAAApJ,OAAC,KAAE,mCAAuB0G,EAAY,KAAC,EACzC,EAEJ,EAGA/I,MAAC,OAAI,UAAU,2BACb,SAAAqC,OAAC,OACC,UAAW,uBAAuBsI,IAAgB,YAAc,SAAW,EAAE,GAC7E,QAAS,IAAM,CACbS,EAAkB,WAA6B,EAC/CF,EAAe,SAAS,EACxBL,EAAiB,WAA6B,EAC9CD,EAAc,WAA6B,CAC7C,EAEA,UAAA5K,MAAC,MAAG,UAAU,4BAA4B,0BAAc,EACxDA,MAAC,KAAE,UAAU,kCAAkC,mCAE/C,IACF,CACF,GACF,CAEJ,EC/OA,SAASwM,KAAMC,EAAS,CACpB,OAAOA,EAAQ,OAAO,OAAO,EAAE,KAAK,GAAG,CAC3C,CAEA,MAAMC,GAAOC,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAG,2DAA4DrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACrLF,GAAK,YAAc,OACnB,MAAMK,GAAaJ,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAG,gCAAiCrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EAChKG,GAAW,YAAc,aACzB,MAAMC,GAAYL,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,KAAM,CAAE,IAAKD,EAAK,UAAWL,EAAG,qDAAsDrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACnLI,GAAU,YAAc,YACxB,MAAMC,GAAkBN,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,IAAK,CAAE,IAAKD,EAAK,UAAWL,EAAG,gCAAiCrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACnKK,GAAgB,YAAc,kBAC9B,MAAMC,GAAcP,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAG,WAAYrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EAC5IM,GAAY,YAAc,cAC1B,MAAMC,GAAaR,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAG,6BAA8BrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EAC7JO,GAAW,YAAc,aACzB,MAAMC,GAAoB,CAACC,EAAU,aAChB,CACb,QAAS,oJACT,YAAa,+IACb,QAAS,qHACT,UAAW,uIACX,MAAO,kFACP,KAAM,mGACN,QAAS,qLACT,QAAS,wJACjB,GACoBA,CAAO,EAErBC,GAAiB,CAACC,EAAO,aACb,CACV,QAAS,iBACT,GAAI,8BACJ,GAAI,iCACJ,KAAM,WACd,GACiBA,CAAI,EAEfC,GAASb,aAAW,CAAC,CAAE,UAAAxE,EAAW,QAAAkF,EAAU,UAAW,KAAAE,EAAO,UAAW,GAAGX,CAAK,EAAIC,IAC/EC,MAAK,SAAU,CAAE,UAAWN,EAAG,8QAA+QY,GAAkBC,CAAO,EAAGC,GAAeC,CAAI,EAAGpF,CAAS,EAAG,IAAK0E,EAAK,GAAGD,EAAO,CAC3Y,EACDY,GAAO,YAAc,SAErB,MAAMC,GAAQd,aAAW,CAAC,CAAE,UAAAxE,EAAW,QAAAkF,EAAU,UAAW,GAAGT,CAAK,EAAIC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,KAAM,QAAS,UAAWL,EAAG,wCAAyCa,IAAY,WAAa,gCAAiCA,IAAY,eAAiB,0FAA2FlF,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACzXa,GAAM,YAAc,QACpB,MAAMC,GAAaf,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,KAAM,CAAE,IAAKD,EAAK,UAAWL,EAAG,+CAAgDrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EAC9Kc,GAAW,YAAc,aACzB,MAAMC,GAAmBhB,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAG,gCAAiCrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACtKe,GAAiB,YAAc,mBAE/B,MAAMC,GAAQjB,aAAW,CAAC,CAAE,UAAAxE,EAAW,KAAArF,EAAM,GAAG8J,CAAK,EAAIC,IAC7CC,MAAK,QAAS,CAAE,KAAMhK,EAAM,UAAW0J,EAAG,+VAAgWrE,CAAS,EAAG,IAAK0E,EAAK,GAAGD,CAAK,CAAE,CACrb,EACDgB,GAAM,YAAc,QAEpB,MAAMC,GAAQlB,aAAW,CAAC,CAAE,UAAAxE,EAAW,GAAGyE,GAASC,IAASC,MAAK,QAAS,CAAE,IAAKD,EAAK,UAAWL,EAAG,6FAA8FrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EAC1NiB,GAAM,YAAc,QACpB,MAAMC,GAAgB,CAClB,QAAS,4EACT,UAAW,kFACX,YAAa,wFACb,QAAS,iBACb,EACMC,GAAQpB,aAAW,CAAC,CAAE,UAAAxE,EAAW,QAAAkF,EAAU,UAAW,GAAGT,CAAK,EAAIC,IAC5DC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAG,yKAA0KsB,GAAcT,CAAO,EAAGlF,CAAS,EAAG,GAAGyE,CAAK,CAAE,CACzQ,EACDmB,GAAM,YAAc,QAOb,MAAMC,GAAWC,EAAM,WAAW,CAAC,CAAE,UAAA9F,EAAW,GAAGyE,CAAK,EAAIC,IAASC,MAAK,WAAY,CAAE,IAAKD,EAAK,UAAWL,EAAG,uSAAwSrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACvboB,GAAS,YAAc,WAEhB,MAAME,GAASD,EAAM,WAAW,CAAC,CAAE,UAAA9F,EAAW,SAAAxJ,EAAU,GAAGiO,CAAK,EAAIC,IAASC,MAAK,SAAU,CAAE,IAAKD,EAAK,UAAWL,EAAG,6PAA8PrE,CAAS,EAAG,GAAGyE,EAAO,SAAUjO,CAAQ,CAAE,CAAE,EACvauP,GAAO,YAAc,SAGd,MAAMC,GAAOF,EAAM,WAAW,CAAC,CAAE,UAAA9F,EAAW,GAAGyE,CAAK,EAAIC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAGrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACtIuB,GAAK,YAAc,OACZ,MAAMC,GAAWH,EAAM,WAAW,CAAC,CAAE,UAAA9F,EAAW,GAAGyE,CAAK,EAAIC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAG,aAAcrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACxJwB,GAAS,YAAc,WAChB,MAAMC,GAAcJ,EAAM,WAAW,CAAC,CAAE,UAAA9F,EAAW,GAAGyE,CAAK,EAAIC,IAASC,MAAK,SAAU,CAAE,IAAKD,EAAK,UAAWL,EAAG,gGAAiGrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EACjPyB,GAAY,YAAc,cACnB,MAAMC,GAAcL,EAAM,WAAW,CAAC,CAAE,UAAA9F,EAAW,GAAGyE,CAAK,EAAIC,IAASC,MAAK,MAAO,CAAE,IAAKD,EAAK,UAAWL,EAAGrE,CAAS,EAAG,GAAGyE,CAAK,CAAE,CAAE,EAC7I0B,GAAY,YAAc,cC9D1B,MAAMC,GAAwE,CAC5E,QAAS,CAAE,MAAO,EAAG,OAAQ,GAC7B,OAAQ,CAAE,MAAO,IAAK,OAAQ,MAC9B,OAAQ,CAAE,MAAO,IAAK,OAAQ,IAChC,EAIaC,GAAkD,CAAC,CAC9D,IAAAzO,EAAM,IACN,OAAA0O,CACF,IAAM,CACJ,KAAM,CAAE,MAAAtQ,EAAO,iBAAAuQ,CAAA,EAAqBzO,EAAA,EAC9B0O,EAAYxP,SAA0B,IAAI,EAC1CyP,EAAezP,SAAuB,IAAI,EAC1C,CAAC0P,EAAcC,CAAe,EAAI5N,WAAuB,SAAS,EAClE,CAAC6N,EAAcC,CAAe,EAAI9N,WAAiB,EAAE,EACrD,CAAC+N,EAAcC,CAAe,EAAIhO,WAAS,EAAK,EAChD,CAACiO,EAAOC,CAAQ,EAAIlO,WAAS,CAAC,EAC9B,CAACmO,EAAYC,CAAa,EAAIpO,WAAS,CAAC,EACxCqO,EAAiBpQ,SAAA,EACjBqQ,EAAsBrQ,SAAA,EAEtB,CAAE,cAAAsQ,GAAkBtR,EAGpBzB,EAAMoM,UAAQ,IAAMtM,GAAY2B,EAAM,QAAQ,EAAG,CAACA,EAAM,QAAQ,CAAC,EAmBjEuR,EAhBgBpQ,cAAY,IAAM,CACtC,GAAI,CAEF,OAAIS,EAAI,WAAW,MAAM,EAChBA,EAKF,GADQ,OAAO,SAAS,MACf,GAAGA,EAAI,WAAW,GAAG,EAAIA,EAAM,IAAMA,CAAG,EAC1D,MAAgB,CAEd,MAAO,GACT,CACF,EAAG,CAACA,CAAG,CAAC,EAEW,EAGb4P,EAAY7G,UAChB,IACE3C,GAAS,IAAM,CACb,GAAKwI,EAAU,SAAS,cAExB,IAAI,CAEF,MAAMiB,EAAMjB,EAAU,QAAQ,gBAC9B,GAAIiB,EAAK,CACP,IAAIC,EAAUD,EAAI,eAAe,sBAAsB,EAClDC,IACHA,EAAUD,EAAI,cAAc,OAAO,EACnCC,EAAQ,GAAK,uBACbD,EAAI,MAAM,YAAYC,CAAO,GAE3BA,IACFA,EAAQ,YAAcnT,EAE1B,CACF,MAAgB,CAGhB,CAGIiS,EAAU,SAAS,eACrBA,EAAU,QAAQ,cAAc,YAC9B,CACE,KAAM,oBACN,SAAUxQ,EAAM,SAChB,IAAAzB,CAAA,EAEF,KAGN,EAAG,GAAG,EACR,CAACA,EAAKyB,EAAM,QAAQ,GAIhB2R,EAAmBxQ,cAAY,IAAM,CACzC,aAAaiQ,EAAe,OAAO,EAGnC,GAAI,CACF,MAAMK,EAAMjB,EAAU,SAAS,gBAG/B,GAFmBiB,IAAQA,EAAI,MAAM,WAAa,IAAI,OAAS,KAE7CjB,EAAU,SAAS,cACnCG,EAAgB,QAAQ,EACxBQ,EAAc,CAAC,EACfK,EAAA,EACAlB,IAAA,MAEA,OAAM,IAAI,MAAM,sBAAsB,CAE1C,MAAgB,CAGdK,EAAgB,QAAQ,EACxBa,EAAA,EACAlB,IAAA,CACF,CACF,EAAG,CAACkB,EAAWlB,CAAM,CAAC,EAGhBsB,EAAoBzQ,cACvB0Q,GAAmB,CAClB,aAAaT,EAAe,OAAO,EAE/BF,EAAa,EAEf,WAAW,IAAM,CACfC,EAAc5F,GAAQA,EAAO,CAAC,EAC9BoF,EAAgB,SAAS,EACrBH,EAAU,UACZA,EAAU,QAAQ,IAAMe,EAE5B,EAAG,KAAQL,EAAa,EAAE,GAE1BP,EAAgB,OAAO,EACvBE,EACEgB,GAAS,qEAGf,EACA,CAACN,EAAYL,CAAU,GAIzB5P,YAAU,IAAM,CACd,GAAKkP,EAAU,QAEf,OAAAG,EAAgB,SAAS,EAGzBS,EAAe,QAAU,WAAW,IAAM,CACpCV,IAAiB,WACnBkB,EAAkB,yBAAyB,CAE/C,EAAG,GAAK,EAGD,IAAM,CACX,aAAaR,EAAe,OAAO,EACnC,aAAaC,EAAoB,OAAO,CAC1C,CACF,EAAG,CAACE,CAAU,CAAC,EAGfjQ,YAAU,IAAM,CACVoP,IAAiB,UACnBc,EAAA,CAEJ,EAAG,CAACjT,EAAKmS,EAAcc,CAAS,CAAC,EAGjC,MAAMM,EAAsBnQ,GAA0B,CAGpD,GAFA4O,EAAiB5O,CAAM,EAEnB6O,EAAU,SAAW7O,IAAW,UAAW,CAC7C,MAAMoQ,EAAW,SAAS3B,GAAYzO,CAAM,EAAE,KAAK,GACnD6O,EAAU,QAAQ,eAAe,YAC/B,CACE,KAAM,kBACN,SAAAuB,CAAA,EAEF,IAEJ,CACF,EAGMC,EAAmB7Q,cAAY,IAAM,CACpCsP,EAAa,UAEbK,EAKC,SAAS,mBACX,SAAS,iBALPL,EAAa,QAAQ,mBACvBA,EAAa,QAAQ,oBAOzBM,EAAgB,CAACD,CAAY,EAC/B,EAAG,CAACA,CAAY,CAAC,EAGXmB,EAAiB,IAAM,CAC3Bd,EAAc,CAAC,EACfR,EAAgB,SAAS,EACzBE,EAAgB,EAAE,EACdL,EAAU,UACZA,EAAU,QAAQ,IAAMe,EAE5B,EAGMW,EAAuB,IACvBxB,IAAiB,SAAiB,KAGpCxM,OAAC,OAAI,UAAU,gCACZ,UAAAwM,IAAiB,WAChBxM,OAAC,OAAI,UAAU,gCACb,UAAArC,MAACsQ,GAAA,CAAQ,UAAU,gCAAgC,KAAM,GAAI,EAC7DtQ,MAAC,KAAE,8BAAkB,EACpBqP,EAAa,GACZhN,OAAC,KAAE,UAAU,8BAA8B,2BAC1BgN,EAAW,MAC5B,GAEJ,EAGDR,IAAiB,SAChBxM,OAAC,OAAI,UAAU,8BACb,UAAArC,MAACuQ,GAAA,CAAc,KAAM,GAAI,EACzBvQ,MAAC,MAAG,yBAAa,EACjBA,MAAC,KAAG,SAAA+O,CAAA,CAAa,EACjB1M,OAAC,OAAI,UAAU,sCACb,UAAAA,OAACmL,GAAA,CAAO,QAAS4C,EAAgB,QAAQ,UACvC,UAAApQ,MAAC4C,GAAA,CAAU,KAAM,GAAI,EAAE,aAEzB,EACAP,OAACmL,GAAA,CACC,QAAS,IAAM,OAAO,KAAKkC,EAAY,QAAQ,EAC/C,QAAQ,YAER,UAAA1P,MAACwQ,GAAA,CAAa,KAAM,GAAI,EAAE,oBAE5B,EACF,EACAnO,OAAC,WAAQ,UAAU,sCACjB,UAAArC,MAAC,WAAQ,6BAAiB,EAC1BA,MAAC,KAAE,qJAGH,GACF,GACF,EAGD6O,IAAiB,WAChBxM,OAAC,OAAI,UAAU,gCACb,UAAArC,MAACyQ,GAAA,CAAO,KAAM,GAAI,EAClBzQ,MAAC,MAAG,0BAAc,EAClBA,MAAC,KAAE,yEAA6D,EAChEqC,OAACmL,GAAA,CACC,QAAS,IAAM,OAAO,KAAKkC,EAAY,QAAQ,EAC/C,QAAQ,UAER,UAAA1P,MAACwQ,GAAA,CAAa,KAAM,GAAI,EAAE,oBAE5B,EACF,GAEJ,EAIJ,OACEnO,OAAC,OAAI,UAAU,wBAAwB,IAAKuM,EAE1C,UAAAvM,OAAC,OAAI,UAAU,+BACb,UAAAA,OAAC,OAAI,UAAU,gCACb,UAAArC,MAAC,UACC,UAAW,+BACTyP,IAAkB,UAAY,SAAW,EAC3C,GACA,QAAS,IAAMQ,EAAmB,SAAS,EAC3C,MAAM,eAEN,SAAAjQ,MAAC0Q,GAAA,CAAQ,KAAM,GAAI,IAErB1Q,MAAC,UACC,UAAW,+BACTyP,IAAkB,SAAW,SAAW,EAC1C,GACA,QAAS,IAAMQ,EAAmB,QAAQ,EAC1C,MAAM,cAEN,SAAAjQ,MAAC2Q,GAAA,CAAO,KAAM,GAAI,IAEpB3Q,MAAC,UACC,UAAW,+BACTyP,IAAkB,SAAW,SAAW,EAC1C,GACA,QAAS,IAAMQ,EAAmB,QAAQ,EAC1C,MAAM,cAEN,SAAAjQ,MAAC4Q,GAAA,CAAW,KAAM,GAAI,GACxB,EACF,EAEA5Q,MAAC,OAAI,UAAU,4BACb,SAAAA,MAAC,SACC,KAAK,OACL,MAAO0P,EACP,SAAQ,GACR,UAAU,oCAEd,EAEArN,OAAC,OAAI,UAAU,gCACb,UAAArC,MAAC,UACC,QAASoQ,EACT,UAAU,+BACV,MAAM,kBACN,SAAUvB,IAAiB,UAE3B,SAAA7O,MAAC4C,GAAA,CACC,KAAM,GACN,UAAWiM,IAAiB,UAAY,OAAS,IACnD,GAEF7O,MAAC,UACC,QAASmQ,EACT,UAAU,+BACV,MAAOlB,EAAe,kBAAoB,mBAEzC,SAAAA,QAAgB4B,GAAA,CAAU,KAAM,GAAI,EAAK7Q,MAAC8Q,GAAA,CAAU,KAAM,GAAI,IAEjE9Q,MAAC,UACC,QAAS,IAAM,OAAO,KAAK0P,EAAY,QAAQ,EAC/C,UAAU,+BACV,MAAM,kBAEN,SAAA1P,MAACwQ,GAAA,CAAa,KAAM,GAAI,GAC1B,EACF,GACF,EAGAxQ,MAAC,OACC,UAAW,qDAAqDyP,CAAa,GAE7E,SAAApN,OAAC,OAAI,UAAU,gCACZ,UAAAgO,EAAA,EACDrQ,MAAC,UACC,IAAK2O,EACL,IAAKe,EACL,UAAU,+BACV,OAAQI,EACR,QAAS,IAAMC,EAAA,EACf,MAAO,CACL,MACEN,IAAkB,UACd,OACA,GAAGlB,GAAYkB,CAAa,EAAE,KAAK,KACzC,OACEA,IAAkB,UACd,OACA,GAAGlB,GAAYkB,CAAa,EAAE,MAAM,KAC1C,UAAW,SAASN,CAAK,IACzB,gBAAiB,aACnB,EACF,EACF,GACF,EACF,CAEJ,EC5Xa4B,GAAuB,CAACC,EAA6B,KAAO,CACvE,KAAM,CAAE,MAAA7S,EAAO,aAAAyB,EAAc,cAAAe,CAAA,EAAkBV,EAAA,EACzCgR,EAAiB9R,SAAgC,IAAI,EACrD+R,EAAe/R,SAAO,EAAK,EAEjCM,mBAAU,IAAM,CACd,MAAM+J,EAAgB,MAAOC,GAAqB,CAEhD,MAAM9N,EAAS8N,EAAE,OACX0H,EAAYxV,EAAO,UAAY,SACpBA,EAAO,UAAY,YACnBA,EAAO,kBAAoB,OAG5C,GAAI8N,EAAE,SAAWA,EAAE,QACjB,OAAQA,EAAE,IAAI,cAAY,CACxB,IAAK,IAGH,GADAA,EAAE,iBACE,CAACyH,EAAa,QAAS,CACzBA,EAAa,QAAU,GACvB,GAAI,CACEF,EAAS,OACXA,EAAS,UAET,MAAMpR,EAAA,EACNwR,EAAM,QAAQ,2BAA4B,CACxC,SAAU,IACV,SAAU,gBACX,EAEL,MAAgB,CACdA,EAAM,MAAM,yBAAyB,CACvC,SACEF,EAAa,QAAU,EACzB,CACF,CACA,MAEF,IAAK,IACCzH,EAAE,UAEJA,EAAE,iBACEuH,EAAS,SACXA,EAAS,SACTI,EAAM,QAAQ,sBAAuB,CACnC,SAAU,KACV,SAAU,gBACX,KAIH3H,EAAE,iBACEuH,EAAS,SACXA,EAAS,SACTI,EAAM,QAAQ,gBAAiB,CAC7B,SAAU,KACV,SAAU,gBACX,IAGL,MAEF,IAAK,IAEH,GAAI,CAACD,EAEH,GADA1H,EAAE,iBACEuH,EAAS,SACXA,EAAS,eACJ,CAEL,MAAMK,EAAc,SAAS,cAC3B,+BAEEA,IACFA,EAAY,QACZA,EAAY,SAEhB,CAEF,MAEF,IAAK,IAEC5H,EAAE,WACJA,EAAE,iBACEuH,EAAS,QACXA,EAAS,UAES,OAAO,QACvB,2DAGArQ,EAAA,EACAyQ,EAAM,QAAQ,6BAA8B,CAC1C,SAAU,IACV,SAAU,gBACX,IAIP,MAEF,IAAK,IAEH3H,EAAE,iBACEuH,EAAS,YACXA,EAAS,YACTI,EAAM,QAAQ,gCAAiC,CAC7C,SAAU,KACV,SAAU,gBACX,GAEH,MAEF,IAAK,QAEH,GAAI3H,EAAE,SAEJ,GADAA,EAAE,iBACEuH,EAAS,UACXA,EAAS,gBAET,IAAI,CACF,MAAMpR,EAAA,EACNwR,EAAM,QAAQ,sBAAuB,CACnC,SAAU,IACV,SAAU,gBACX,EAED,WAAW,IAAM,CACfJ,EAAS,WACX,EAAG,GAAI,CACT,MAAgB,CACdI,EAAM,MAAM,4BAA4B,CAC1C,CAGJ,MAKN,GAAI,CAACD,EACH,OAAQ1H,EAAE,KACR,IAAK,IAECA,EAAE,WACJA,EAAE,iBACF6H,GAAA,GAEF,MAEF,IAAK,IAEH7H,EAAE,iBACF,MAAM4H,EAAc,SAAS,cAC3B,+BAEEA,IACFA,EAAY,QACZA,EAAY,UAEd,MAEF,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IAEH,GAAI5H,EAAE,OAAQ,CACZA,EAAE,iBACF,MAAM8H,EAAe,SAAS9H,EAAE,GAAG,EAAI,EACjCgB,EAAS,SAAS,iBAAiB,sBAAsB,EAC3DA,EAAO8G,CAAY,GACpB9G,EAAO8G,CAAY,EAAkB,OAE1C,CACA,MAGR,EAGA,gBAAS,iBAAiB,UAAW/H,CAAa,EAG3C,IAAM,CACX,SAAS,oBAAoB,UAAWA,CAAa,CACvD,CACF,EAAG,CAACwH,EAAU7S,EAAOyB,EAAce,CAAa,CAAC,EAE1C,CACL,eAAAsQ,CAAA,CAEJ,EAGA,SAASK,IAAoB,CAC3B,MAAME,EAAY,CAChB,CAAE,KAAM,SAAU,YAAa,iBAC/B,CAAE,KAAM,SAAU,YAAa,oBAC/B,CAAE,KAAM,eAAgB,YAAa,QACrC,CAAE,KAAM,SAAU,YAAa,gBAC/B,CAAE,KAAM,eAAgB,YAAa,qBACrC,CAAE,KAAM,SAAU,YAAa,kBAC/B,CAAE,KAAM,mBAAoB,YAAa,kBACzC,CAAE,KAAM,MAAO,YAAa,oBAC5B,CAAE,KAAM,IAAK,YAAa,gBAC1B,CAAE,KAAM,IAAK,YAAa,kBAC1B,CAAE,KAAM,UAAW,YAAa,6BAA6B,EAIzDC,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAexB,MAAMC,EAAQ,SAAS,cAAc,KAAK,EAC1CA,EAAM,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAUtBA,EAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,QAKZF,EACC,IACE1H,GAAM;AAAA;AAAA;AAAA,cAGHA,EAAE,IAAI;AAAA;AAAA;AAAA,cAGNA,EAAE,WAAW;AAAA;AAAA;AAAA,SAKlB,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,IAOf2H,EAAQ,YAAYC,CAAK,EACzB,SAAS,KAAK,YAAYD,CAAO,EAGjC,MAAME,EAAQ,IAAM,CAClBF,EAAQ,MAAM,UAAY,oBAC1B,WAAW,IAAM,CACf,SAAS,KAAK,YAAYA,CAAO,CACnC,EAAG,GAAG,CACR,EAEAA,EAAQ,iBAAiB,QAAUhI,GAAM,CACnCA,EAAE,SAAWgI,GAASE,EAAA,CAC5B,CAAC,EAED,MAAMC,EAAanI,GAAqB,CAClCA,EAAE,MAAQ,WACZkI,EAAA,EACA,SAAS,oBAAoB,UAAWC,CAAS,EAErD,EACA,SAAS,iBAAiB,UAAWA,CAAS,EAG9C,MAAMC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAUpB,SAAS,KAAK,YAAYA,CAAK,CACjC,CCpTO,MAAMC,EAAW,CAEtB,aAAa,SACXC,EAAe,EACfC,EAAmB,GACnBC,EAC8B,CAC9B,MAAMC,EAAS,CACb,KAAAH,EACA,SAAAC,EACA,GAAGC,CAAA,EAIL,OADiB,MAAME,EAAW,QAAQ,MAAM,KAAKD,CAAM,GAC3C,IAClB,CAEA,aAAa,QAAQ3G,EAAwC,CAE3D,OADiB,MAAM4G,EAAW,QAAQ,MAAM,IAAI5G,CAAE,GACtC,IAClB,CAEA,aAAa,WAAW6G,EAAiD,CAEvE,OADiB,MAAMD,EAAW,QAAQ,MAAM,OAAOC,CAAI,GAC3C,IAClB,CAEA,aAAa,WAAW7G,EAAY6G,EAAiD,CAEnF,OADiB,MAAMD,EAAW,QAAQ,MAAM,OAAO5G,EAAI6G,CAAI,GAC/C,IAClB,CAEA,aAAa,WAAW7G,EAAwC,CAE9D,OADiB,MAAM4G,EAAW,QAAQ,MAAM,OAAO5G,CAAE,GACzC,IAClB,CAEA,aAAa,UAAUA,EAAwC,CAE7D,OADiB,MAAM4G,EAAW,IAAI,KAAK,qBAAqB5G,CAAE,QAAQ,GAC1D,IAClB,CAEA,aAAa,gBAAgB8G,EAAeC,EAAiD,CAE3F,OADiB,MAAMH,EAAW,IAAI,MAAM,yBAA0B,CAAE,IAAAE,EAAK,KAAAC,EAAM,GACnE,IAClB,CAEA,aAAa,gBAAgBD,EAA2C,CAEtE,OADiB,MAAMF,EAAW,IAAI,OAAO,yBAA0B,CAAE,KAAM,CAAE,IAAAE,CAAA,EAAO,GACxE,IAClB,CAEA,aAAa,eAAe9G,EAAmD,CAE7E,OADiB,MAAM4G,EAAW,IAAI,IAAI,qBAAqB5G,CAAE,UAAU,GAC3D,IAClB,CAEA,aAAa,cAAcA,EAAYgH,EAAwD,CAE7F,OADiB,MAAMJ,EAAW,IAAI,KAAK,qBAAqB5G,CAAE,YAAa,CAAE,QAAAgH,CAAA,CAAS,GAC1E,IAClB,CAEA,aAAa,iBAAiBhH,EAA0C,CAEtE,OADiB,MAAM4G,EAAW,IAAI,IAAI,qBAAqB5G,CAAE,YAAY,GAC7D,IAClB,CAEA,aAAa,oBAAoBiH,EAAgBC,EAAgD,CAE/F,OADiB,MAAMN,EAAW,IAAI,KAAK,qBAAqBK,CAAM,cAAcC,CAAU,UAAU,GACxF,IAClB,CAGA,aAAa,SACXV,EAAe,EACfC,EAAmB,GACnBC,EAC8B,CAC9B,MAAMC,EAAS,CACb,KAAAH,EACA,SAAAC,EACA,GAAGC,CAAA,EAIL,OADiB,MAAME,EAAW,IAAI,IAAI,oBAAqB,CAAE,OAAAD,EAAQ,GACzD,IAClB,CAEA,aAAa,QAAQ3G,EAAwC,CAE3D,OADiB,MAAM4G,EAAW,IAAI,IAAI,qBAAqB5G,CAAE,EAAE,GACnD,IAClB,CAEA,aAAa,WAAWwG,EAAiD,CAEvE,OADiB,MAAMI,EAAW,IAAI,KAAK,oBAAqBJ,CAAI,GACpD,IAClB,CAEA,aAAa,WAAWxG,EAAYwG,EAAiD,CAEnF,OADiB,MAAMI,EAAW,IAAI,IAAI,qBAAqB5G,CAAE,GAAIwG,CAAI,GACzD,IAClB,CAEA,aAAa,WAAWxG,EAAwC,CAE9D,OADiB,MAAM4G,EAAW,IAAI,OAAO,qBAAqB5G,CAAE,EAAE,GACtD,IAClB,CAEA,aAAa,UAAUA,EAAwC,CAE7D,OADiB,MAAM4G,EAAW,IAAI,KAAK,qBAAqB5G,CAAE,QAAQ,GAC1D,IAClB,CAEA,aAAa,gBAAgB8G,EAAeC,EAAiD,CAE3F,OADiB,MAAMH,EAAW,IAAI,MAAM,yBAA0B,CAAE,IAAAE,EAAK,KAAAC,EAAM,GACnE,IAClB,CAEA,aAAa,gBAAgBD,EAA2C,CAEtE,OADiB,MAAMF,EAAW,IAAI,OAAO,yBAA0B,CAAE,KAAM,CAAE,IAAAE,CAAA,EAAO,GACxE,IAClB,CAEA,aAAa,cAAc9G,EAAYgH,EAAwD,CAE7F,OADiB,MAAMJ,EAAW,IAAI,KAAK,qBAAqB5G,CAAE,YAAa,CAAE,QAAAgH,CAAA,CAAS,GAC1E,IAClB,CAEA,aAAa,eAAehH,EAAmD,CAE7E,OADiB,MAAM4G,EAAW,IAAI,IAAI,qBAAqB5G,CAAE,UAAU,GAC3D,IAClB,CAEA,aAAa,iBAAiBA,EAA0C,CAEtE,OADiB,MAAM4G,EAAW,IAAI,IAAI,qBAAqB5G,CAAE,YAAY,GAC7D,IAClB,CAEA,aAAa,oBAAoBmH,EAAgBD,EAAgD,CAE/F,OADiB,MAAMN,EAAW,IAAI,KAAK,qBAAqBO,CAAM,cAAcD,CAAU,UAAU,GACxF,IAClB,CAEA,aAAa,aAA4C,CAEvD,OADiB,MAAMN,EAAW,IAAI,IAAI,wBAAwB,GAClD,IAClB,CAGA,aAAa,cAAcQ,EAAwB,GAAwC,CAEzF,OADiB,MAAMR,EAAW,QAAQ,WAAW,KAAK,CAAE,aAAAQ,EAAc,GAC1D,IAClB,CAEA,aAAa,YAAYpH,EAA4C,CAEnE,OADiB,MAAM4G,EAAW,QAAQ,WAAW,IAAI5G,CAAE,GAC3C,IAClB,CAEA,aAAa,eAAeqH,EAA6D,CAEvF,OADiB,MAAMT,EAAW,QAAQ,WAAW,OAAOS,CAAQ,GACpD,IAClB,CAEA,aAAa,eAAerH,EAAYqH,EAA6D,CAEnG,OADiB,MAAMT,EAAW,QAAQ,WAAW,OAAO5G,EAAIqH,CAAQ,GACxD,IAClB,CAEA,aAAa,eAAerH,EAAwC,CAElE,OADiB,MAAM4G,EAAW,QAAQ,WAAW,OAAO5G,CAAE,GAC9C,IAClB,CAEA,aAAa,kBAAkBsH,EAA4F,CAEzH,OADiB,MAAMV,EAAW,IAAI,MAAM,4BAA6B,CAAE,WAAAU,EAAY,GACvE,IAClB,CAGA,aAAa,SAAuC,CAElD,OADiB,MAAMV,EAAW,IAAI,IAAI,WAAW,GACrC,IAClB,CAEA,aAAa,OAAO5G,EAAuC,CAEzD,OADiB,MAAM4G,EAAW,IAAI,IAAI,aAAa5G,CAAE,EAAE,GAC3C,IAClB,CAEA,aAAa,UAAU7N,EAA8C,CAEnE,OADiB,MAAMyU,EAAW,IAAI,KAAK,YAAazU,CAAG,GAC3C,IAClB,CAEA,aAAa,UAAU6N,EAAY7N,EAA8C,CAE/E,OADiB,MAAMyU,EAAW,IAAI,IAAI,aAAa5G,CAAE,GAAI7N,CAAG,GAChD,IAClB,CAEA,aAAa,UAAU6N,EAAwC,CAE7D,OADiB,MAAM4G,EAAW,IAAI,OAAO,aAAa5G,CAAE,EAAE,GAC9C,IAClB,CAEA,aAAa,UAAUuH,EAAgBC,EAA0C,CAE/E,OADiB,MAAMZ,EAAW,IAAI,KAAK,eAAeW,CAAM,UAAUC,CAAI,EAAE,GAChE,IAClB,CAGA,aAAa,cACXhB,EAAe,EACfC,EAAmB,GACnBgB,EACAlQ,EACAwH,EACmC,CACnC,MAAM4H,EAAS,CACb,KAAAH,EACA,SAAAC,EACA,GAAIgB,GAAY,CAAE,SAAAA,CAAA,EAClB,GAAIlQ,GAAQ,CAAE,KAAAA,CAAA,EACd,GAAIwH,GAAU,CAAE,OAAAA,CAAA,CAAO,EAIzB,OADiB,MAAM6H,EAAW,QAAQ,MAAM,KAAKD,CAAM,GAC3C,IAClB,CAEA,aAAa,aAAa3G,EAA6C,CAErE,OADiB,MAAM4G,EAAW,QAAQ,MAAM,IAAI5G,CAAE,GACtC,IAClB,CAEA,aAAa,YACX0H,EACAD,EACAE,EACmC,CACnC,MAAMC,EAAW,IAAI,SAErB,OAAAF,EAAM,QAASG,GAAc,CAC3BD,EAAS,OAAO,QAASC,CAAI,CAC/B,CAAC,EAEGJ,GACFG,EAAS,OAAO,WAAYH,CAAQ,GAGrB,MAAMb,EAAW,IAAI,KAAK,2BAA4BgB,EAAU,CAC/E,QAAS,CACP,eAAgB,sBAClB,CACM,GAEQ,IAClB,CAEA,aAAa,gBAAgB5H,EAAY+G,EAA2D,CAElG,OADiB,MAAMH,EAAW,QAAQ,MAAM,OAAO5G,EAAI+G,CAAI,GAC/C,IAClB,CAEA,aAAa,gBAAgB/G,EAAwC,CAEnE,OADiB,MAAM4G,EAAW,QAAQ,MAAM,OAAO5G,CAAE,GACzC,IAClB,CAEA,aAAa,qBAAqB8G,EAA2C,CAE3E,OADiB,MAAMF,EAAW,IAAI,OAAO,yBAA0B,CAAE,KAAM,CAAE,IAAAE,CAAA,EAAO,GACxE,IAClB,CAGA,aAAa,iBAAuD,CAElE,OADiB,MAAMF,EAAW,IAAI,IAAI,2BAA2B,GACrD,IAClB,CAEA,aAAa,kBAAkBkB,EAAiE,CAE9F,OADiB,MAAMlB,EAAW,IAAI,KAAK,4BAA6BkB,CAAM,GAC9D,IAClB,CAEA,aAAa,kBAAkB9H,EAAY8H,EAAiE,CAE1G,OADiB,MAAMlB,EAAW,IAAI,IAAI,6BAA6B5G,CAAE,GAAI8H,CAAM,GACnE,IAClB,CAEA,aAAa,kBAAkB9H,EAAwC,CAErE,OADiB,MAAM4G,EAAW,IAAI,OAAO,6BAA6B5G,CAAE,EAAE,GAC9D,IAClB,CAGA,aAAa,gBAAqD,CAEhE,OADiB,MAAM4G,EAAW,IAAI,IAAI,6BAA6B,GACvD,IAClB,CAEA,aAAa,cAAc5G,EAA8C,CAEvE,OADiB,MAAM4G,EAAW,IAAI,IAAI,+BAA+B5G,CAAE,EAAE,GAC7D,IAClB,CAEA,aAAa,iBAAiB+H,EAA8D,CAE1F,OADiB,MAAMnB,EAAW,IAAI,KAAK,8BAA+BmB,CAAK,GAC/D,IAClB,CAEA,aAAa,iBAAiB/H,EAAY+H,EAA8D,CAEtG,OADiB,MAAMnB,EAAW,IAAI,IAAI,+BAA+B5G,CAAE,GAAI+H,CAAK,GACpE,IAClB,CAEA,aAAa,iBAAiB/H,EAAwC,CAEpE,OADiB,MAAM4G,EAAW,IAAI,OAAO,+BAA+B5G,CAAE,EAAE,GAChE,IAClB,CAEA,aAAa,kBAAkB8G,EAA+D,CAE5F,OADiB,MAAMF,EAAW,IAAI,KAAK,8BAA+B,CAAE,IAAAE,EAAK,GACjE,IAClB,CAEA,aAAa,kBAAkBC,EAAoD,CAEjF,OADiB,MAAMH,EAAW,IAAI,KAAK,8BAA+BG,CAAI,GAC9D,IAClB,CAGA,aAAa,aAAaxP,EAAiD,CACzE,MAAMoP,EAASpP,EAAO,SAASA,CAAI,GAAK,GAExC,OADiB,MAAMqP,EAAW,IAAI,IAAI,mBAAmBD,CAAM,EAAE,GACrD,IAClB,CAEA,aAAa,YAAY3G,EAA4C,CAEnE,OADiB,MAAM4G,EAAW,IAAI,IAAI,oBAAoB5G,CAAE,EAAE,GAClD,IAClB,CAEA,aAAa,eAAegI,EAA6D,CAEvF,OADiB,MAAMpB,EAAW,IAAI,KAAK,mBAAoBoB,CAAQ,GACvD,IAClB,CAEA,aAAa,eAAehI,EAAYgI,EAA6D,CAEnG,OADiB,MAAMpB,EAAW,IAAI,IAAI,oBAAoB5G,CAAE,GAAIgI,CAAQ,GAC5D,IAClB,CAEA,aAAa,eAAehI,EAAwC,CAElE,OADiB,MAAM4G,EAAW,IAAI,OAAO,oBAAoB5G,CAAE,EAAE,GACrD,IAClB,CAGA,aAAa,UAAyC,CAEpD,OADiB,MAAM4G,EAAW,IAAI,IAAI,cAAc,GACxC,IAClB,CAEA,aAAa,QAAQ5G,EAAwC,CAE3D,OADiB,MAAM4G,EAAW,IAAI,IAAI,gBAAgB5G,CAAE,EAAE,GAC9C,IAClB,CAEA,aAAa,WAAWiI,EAAiD,CAEvE,OADiB,MAAMrB,EAAW,IAAI,KAAK,eAAgBqB,CAAI,GAC/C,IAClB,CAEA,aAAa,WAAWjI,EAAYiI,EAAiD,CAEnF,OADiB,MAAMrB,EAAW,IAAI,IAAI,gBAAgB5G,CAAE,GAAIiI,CAAI,GACpD,IAClB,CAEA,aAAa,WAAWjI,EAAwC,CAE9D,OADiB,MAAM4G,EAAW,IAAI,OAAO,gBAAgB5G,CAAE,EAAE,GACjD,IAClB,CAGA,aAAa,YAAsE,CAEjF,OADiB,MAAM4G,EAAW,QAAQ,QAAQ,QAClC,IAClB,CAEA,aAAa,aAAasB,EAAe3Q,EAA6C,OAA8C,CAElI,OADiB,MAAMqP,EAAW,IAAI,KAAK,6BAA8B,CAAE,MAAAsB,EAAO,KAAA3Q,EAAM,GACxE,IAClB,CAEA,aAAa,aAAa4Q,EAAc5Q,EAA6C,OAAQ6Q,EAAmF,CAC9K,MAAMzB,EAAS,IAAI,gBAAgB,CAAE,KAAAwB,EAAM,KAAA5Q,EAAM,EACjD,OAAI6Q,GAAWzB,EAAO,OAAO,YAAayB,CAAS,GAElC,MAAMxB,EAAW,IAAI,IAAI,8BAA8BD,CAAM,EAAE,GAChE,IAClB,CAEA,aAAa,cAAc9J,EAAewL,EAAkD,CAC1F,MAAM1B,EAAS,IAAI,gBAAgB,CAAE,MAAA9J,EAAO,EAC5C,OAAIwL,GACFA,EAAM,QAAS9Q,GAAcoP,EAAO,OAAO,QAASpP,CAAI,CAAC,GAG1C,MAAMqP,EAAW,IAAI,IAAI,iBAAiBD,CAAM,EAAE,GACnD,IAClB,CAEA,aAAa,iBAMT,CAEF,OADiB,MAAMC,EAAW,IAAI,IAAI,cAAc,GACxC,IAClB,CACF,CCrbO,MAAM0B,GAAkBC,GAA0B,CACvD,GAAIA,IAAU,EAAG,MAAO,UAExB,MAAMC,EAAI,KACJC,EAAQ,CAAC,QAAS,KAAM,KAAM,KAAM,IAAI,EACxC1V,EAAI,KAAK,MAAM,KAAK,IAAIwV,CAAK,EAAI,KAAK,IAAIC,CAAC,CAAC,EAElD,OAAO,YAAYD,EAAQ,KAAK,IAAIC,EAAGzV,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAI,IAAM0V,EAAM1V,CAAC,CACxE,EC4DM2V,GAA8C,CAAC,CACnD,OAAAC,EACA,QAAArS,EACA,SAAAqG,EACA,SAAAiM,EAAW,GACX,cAAAC,EAAgB,CAAC,QAAS,OAAO,EACjC,cAAAC,EAAgB,GAChB,aAAAC,EAAeH,EAAW,GAAK,EAC/B,MAAAV,EAAQ,SACR,UAAAtL,CACF,IAAM,CACJ,KAAM,CAACoM,EAAeC,CAAgB,EAAItT,WACxCmT,EAAc,IAAI5Y,GAAQA,EAAK,EAAE,GAE7B,CAACgZ,EAAUC,CAAW,EAAIxT,WAAmB,MAAM,EACnD,CAAC+Q,EAAS0C,CAAU,EAAIzT,WAAS,CACrC,WAAY,GACZ,SAAUkT,EAAc,SAAW,EAAIA,EAAc,CAAC,EAAK,MAC5D,EACK,CAACQ,EAAcC,CAAe,EAAI3T,WAAS,EAAK,EAChD,CAAC4T,EAAgBC,CAAiB,EAAI7T,WAA2B,EAAE,EACnE,CAAC8T,EAAaC,CAAc,EAAI/T,WAAS,EAAK,EAC9C,CAACgU,EAAaC,CAAc,EAAIjU,WAA2B,IAAI,EAE/D,CAAE,IAAKkU,EAAa,OAAAC,CAAA,EAAWC,GAAA,EAC/BC,EAAYpW,SAAuB,IAAI,EAGvCqW,EAAsBpC,IAAgC,CAC1D,GAAIA,EAAK,GACT,IAAKA,EAAK,IACV,KAAMA,EAAK,OAAS,QAAU,QAAUA,EAAK,OAAS,QAAU,QAAU,QAC1E,MAAOA,EAAK,KACZ,IAAKA,EAAK,SAAWA,EAAK,KAC1B,MAAOA,EAAK,YAAY,MACxB,OAAQA,EAAK,YAAY,OACzB,SAAUA,EAAK,KACf,SAAUA,EAAK,SACf,aAAcA,EAAK,aACnB,QAASA,EAAK,QACd,WAAYA,EAAK,aAIb,CACJ,KAAAd,EACA,cAAAmD,EACA,YAAAC,EACA,mBAAAC,EACA,UAAAC,EACA,QAAAC,GACA,MAAA7F,EAAA,EACE8F,GAAiB,CACnB,SAAU,CAAC,aAAc7D,CAAO,EAChC,QAAS,MAAO,CAAE,UAAA8D,EAAY,KACX,MAAMjE,GAAW,cAChCiE,EACA,GACA,OACA9D,EAAQ,WAAa,MAAQ,OAAYA,EAAQ,SACjDA,EAAQ,YAIZ,iBAAmB+D,GAAa,CAC9B,KAAM,CAAE,WAAAC,GAAeD,EACvB,GAAIC,GAAcA,EAAW,YAAcA,EAAW,WACpD,OAAOA,EAAW,YAAc,CAGpC,EACA,iBAAkB,EAClB,QAAS/B,CAAA,CACV,EAGDzU,YAAU,IAAM,CACV4V,GAAUK,GAAe,CAACC,GAC5BF,EAAA,CAEJ,EAAG,CAACJ,EAAQK,EAAaC,EAAoBF,CAAa,CAAC,EAG3DhW,YAAU,IAAM,CACVyU,GACFM,EAAiBH,EAAc,IAAI5Y,GAAQA,EAAK,EAAE,CAAC,CAEvD,EAAG,CAACyY,EAAQG,CAAa,CAAC,EAG1B5U,YAAU,IAAM,CACd,MAAM+J,EAAiBC,GAAqB,CAC1C,GAAKyK,EAEL,OAAQzK,EAAE,KACR,IAAK,SACHA,EAAE,iBACF5H,EAAA,EACA,MACF,IAAK,QACH4H,EAAE,iBACE8K,EAAc,OAAS,GACzB2B,GAAA,EAEF,MACF,IAAK,KACCzM,EAAE,SAAWA,EAAE,WACjBA,EAAE,iBACF0M,GAAA,GAEF,MAEN,EAEA,gBAAS,iBAAiB,UAAW3M,CAAa,EAC3C,IAAM,SAAS,oBAAoB,UAAWA,CAAa,CACpE,EAAG,CAAC0K,EAAQK,EAAe1S,CAAO,CAAC,EAEnC,MAAMuU,EAAW9D,GAAM,MAAM,WAC3BP,EAAK,MAAM,IAAIyD,CAAkB,GAAK,EAAC,GACpC,GAECa,GAAsBD,EAAS,OAAOhD,GAAQmB,EAAc,SAASnB,EAAK,EAAE,CAAC,EAG7EkD,GAAmBhX,cAAaiX,GAAmB,CAErD/B,EADEL,EACezK,GACXA,EAAK,SAAS6M,CAAM,EACf7M,EAAK,OAAO6B,GAAMA,IAAOgL,CAAM,EAEpC7M,EAAK,QAAU4K,GACjBlD,EAAM,MAAM,MAAMkD,CAAY,iBAAiB,EACxC5K,GAEF,CAAC,GAAGA,EAAM6M,CAAM,EAGR,CAACA,CAAM,CAFvB,CAIL,EAAG,CAACpC,EAAUG,CAAY,CAAC,EAGrB6B,GAAkB7W,cAAY,IAAM,CACxC,GAAIiV,EAAc,SAAW6B,EAAS,OACpC5B,EAAiB,EAAE,MACd,CACL,MAAMgC,EAAUJ,EAAS,MAAM,EAAG9B,CAAY,EAAE,IAAIlB,GAAQA,EAAK,EAAE,EACnEoB,EAAiBgC,CAAO,EACpBJ,EAAS,OAAS9B,GACpBlD,EAAM,MAAM,MAAMkD,CAAY,iBAAiB,CAEnD,CACF,EAAG,CAACC,EAAc,OAAQ6B,EAAU9B,CAAY,CAAC,EAG3C4B,GAAyB5W,cAAY,IAAM,CAC3C6U,EACFjM,EAASmO,EAAmB,EACnBA,GAAoB,OAAS,GACtCnO,EAASmO,GAAoB,CAAC,CAAC,EAEjCxU,EAAA,CACF,EAAG,CAACsS,EAAUkC,GAAqBnO,EAAUrG,CAAO,CAAC,EAG/C4U,GAAenX,cAAY,CAACxD,EAAawB,IAAkB,CAC/DqX,EAAWjL,IAAS,CAClB,GAAGA,EACH,CAAC5N,CAAG,EAAGwB,CAAA,EACP,CACJ,EAAG,EAAE,EAGCoZ,GAASpX,cAAaqX,GAA0B,CACpD9B,EAAgB,EAAI,EACpB+B,GAAiBD,CAAa,CAChC,EAAG,EAAE,EAEC,CAAE,aAAAE,GAAc,cAAAC,GAAe,aAAAC,EAAA,EAAiBC,GAAY,CAChE,OAAAN,GACA,OAAQtC,EAAc,OAAO,CAAC6C,EAAKnU,KACjCmU,EAAI,GAAGnU,CAAI,IAAI,EAAI,GACZmU,GACN,EAA8B,EACjC,SAAU,GACV,QAAS,IAAM,KAAO,KACtB,QAAS,GACV,EAGKL,GAAmB,MAAO3D,GAAkB,CAChDgC,EAAe,EAAI,EACnB,MAAMiC,EAAgCjE,EAAM,IAAIG,IAAS,CACvD,KAAAA,EACA,SAAU,EACV,OAAQ,aACR,EAEF2B,EAAkBmC,CAAW,EAE7B,GAAI,CAEF,MAAMC,EAAmB,YAAY,IAAM,CACzCpC,EAAkBrL,GAAQA,EAAK,IAAIjO,IAAS,CAC1C,GAAGA,EACH,SAAU,KAAK,IAAIA,EAAK,SAAW,KAAK,SAAW,GAAI,EAAE,GACzD,CAAC,CACL,EAAG,GAAG,EAEN,MAAMqW,GAAW,YAAYmB,CAAK,EAElC,cAAckE,CAAgB,EAE9BpC,EAAkBrL,GAAQA,EAAK,IAAIjO,IAAS,CAC1C,GAAGA,EACH,SAAU,IACV,OAAQ,WACR,CAAC,EAEH2V,EAAM,QAAQ,GAAG6B,EAAM,MAAM,iBAAiB,EAG9C,WAAW,IAAM,CACf4C,GAAA,EACAhB,EAAgB,EAAK,EACrBE,EAAkB,EAAE,CACtB,EAAG,GAAI,CAET,OAAS/E,EAAY,CACnB+E,EAAkBrL,GAAQA,EAAK,IAAIjO,IAAS,CAC1C,GAAGA,EACH,OAAQ,QACR,MAAOuU,EAAM,SAAW,gBACxB,CAAC,EACHoB,EAAM,MAAM,cAAc,CAC5B,SACE6D,EAAe,EAAK,CACtB,CACF,EAWMmC,GAAkB,CAAC3b,EAAiBY,IAAkB,CAC1D,MAAMgb,EAAa9C,EAAc,SAAS9Y,EAAK,EAAE,EAEjD,OAAIgZ,IAAa,OAEbpS,OAAC,OAEC,UAAWmK,EACT,8EACA6K,EACI,6BACA,0DAEN,QAAS,IAAMf,GAAiB7a,EAAK,EAAE,EACvC,KAAK,SACL,SAAU,EACV,aAAY,UAAUA,EAAK,KAAK,GAChC,UAAYgO,GAAM,EACZA,EAAE,MAAQ,SAAWA,EAAE,MAAQ,OACjCA,EAAE,iBACF6M,GAAiB7a,EAAK,EAAE,EAE5B,EAEA,UAAAuE,MAAC,OAAI,UAAU,iEACZ,SAAAvE,EAAK,OAAS,QACbuE,MAAC,OACC,IAAKvE,EAAK,cAAgBA,EAAK,IAC/B,IAAKA,EAAK,KAAOA,EAAK,MACtB,UAAU,6BACV,QAAQ,SAGVuE,MAAC,OAAI,UAAU,iDACb,eAACsX,GAAA,CAAK,UAAU,0BAA0B,EAC5C,EAEJ,EAEAjV,OAAC,OAAI,UAAU,iBACb,UAAArC,MAAC,MAAG,UAAU,6CACX,SAAAvE,EAAK,MACR,EACA4G,OAAC,OAAI,UAAU,qDACb,UAAArC,MAAC,QAAK,UAAU,aAAc,SAAAvE,EAAK,KAAK,EACvCA,EAAK,UACJ4G,OAAAM,WAAA,CACE,UAAA3C,MAAC,QAAK,aAAC,EACPA,MAAC,QAAM,SAAA6T,GAAepY,EAAK,QAAQ,EAAE,GACvC,EAEDA,EAAK,OAASA,EAAK,QAClB4G,OAAAM,WAAA,CACE,UAAA3C,MAAC,QAAK,aAAC,SACN,QAAM,UAAAvE,EAAK,MAAM,MAAIA,EAAK,QAAO,GACpC,GAEJ,GACF,EAEA4G,OAAC,OAAI,UAAU,0BACb,UAAArC,MAAC,UACC,QAAUyJ,GAAM,CACdA,EAAE,kBACF0L,EAAe1Z,CAAI,CACrB,EACA,UAAU,gDACV,MAAM,OAEN,SAAAuE,MAAC0C,GAAA,CAAI,UAAU,UAAU,IAG1B2U,SACE,OAAI,UAAU,oEACb,SAAArX,MAACuX,GAAA,CAAM,UAAU,qBAAqB,EACxC,GAEJ,IAvEK9b,EAAK,IA8Ed4G,OAAC,OAEC,UAAWmK,EACT,wFACA6K,EACI,qCACA,wDAEN,QAAS,IAAMf,GAAiB7a,EAAK,EAAE,EACvC,KAAK,SACL,SAAU,EACV,aAAY,UAAUA,EAAK,KAAK,GAChC,UAAYgO,GAAM,EACZA,EAAE,MAAQ,SAAWA,EAAE,MAAQ,OACjCA,EAAE,iBACF6M,GAAiB7a,EAAK,EAAE,EAE5B,EAEC,UAAAA,EAAK,OAAS,QACbuE,MAAC,OACC,IAAKvE,EAAK,cAAgBA,EAAK,IAC/B,IAAKA,EAAK,KAAOA,EAAK,MACtB,UAAU,6BACV,QAAQ,eAGT,OAAI,UAAU,6DACb,SAAAuE,MAACsX,GAAA,CAAK,UAAU,gCAAgC,EAClD,EAIFtX,MAAC,OAAI,UAAU,sFAAsF,QAGpG,OAAI,UAAU,yBACZ,SAAAqX,EACCrX,MAAC,OAAI,UAAU,oEACb,eAACuX,GAAA,CAAM,UAAU,qBAAqB,EACxC,QAEC,OAAI,UAAU,yHAAyH,EAE5I,EAGAvX,MAAC,OAAI,UAAU,iFACb,SAAAA,MAAC,UACC,QAAUyJ,GAAM,CACdA,EAAE,kBACF0L,EAAe1Z,CAAI,CACrB,EACA,UAAU,oEACV,MAAM,OAEN,SAAAuE,MAAC0C,GAAA,CAAI,UAAU,UAAU,IAE7B,EAGCjH,EAAK,OAAS,SACbuE,MAAC,OAAI,UAAU,2BACb,SAAAA,MAAC,OAAI,UAAU,8DAA8D,eAE7E,EACF,IAjEGvE,EAAK,GAqEhB,EAGM+b,GAAc,IACb5C,QAGF,OAAI,UAAU,gFACb,SAAAvS,OAAC,OAAI,UAAU,+CACb,UAAAA,OAAC,OAAI,UAAU,yCACb,UAAArC,MAAC,MAAG,UAAU,wBAAwB,kBAAM,EAC5CA,MAAC,UACC,QAAS,IAAM6U,EAAgB,EAAK,EACpC,SAAUG,EACV,UAAU,oCAEV,SAAAhV,MAACsC,EAAA,CAAE,UAAU,UAAU,GACzB,EACF,EAECwS,EAAe,OAAS,GACvB9U,MAAC,OAAI,UAAU,YACZ,SAAA8U,EAAe,IAAI,CAACrZ,EAAMY,IACzBgG,OAAC,OAAgB,UAAU,YACzB,UAAAA,OAAC,OAAI,UAAU,oCACb,UAAArC,MAAC,QAAK,UAAU,mBAAoB,SAAAvE,EAAK,KAAK,KAAK,EACnD4G,OAAC,QAAK,UAAU,wBACb,eAAK,MAAM5G,EAAK,QAAQ,EAAE,KAC7B,GACF,EACAuE,MAAC,OAAI,UAAU,sCACb,SAAAA,MAAC,OACC,UAAWwM,EACT,kCACA/Q,EAAK,SAAW,QAAU,aAAe,eAE3C,MAAO,CAAE,MAAO,GAAGA,EAAK,QAAQ,IAAI,GAExC,EACCA,EAAK,OACJuE,MAAC,KAAE,UAAU,uBAAwB,WAAK,MAAM,IAjB1C3D,CAmBV,CACD,EACH,GAEJ,EACF,EA3CwB,KAgDtBob,GAAe,IACdvC,EAGHlV,MAAC,OACC,UAAU,gFACV,QAAS,IAAMmV,EAAe,IAAI,EAElC,SAAA9S,OAAC,OAAI,UAAU,sCACb,UAAArC,MAAC,UACC,QAAS,IAAMmV,EAAe,IAAI,EAClC,UAAU,uFAEV,SAAAnV,MAACsC,EAAA,CAAE,UAAU,UAAU,IAGxB4S,EAAY,OAAS,QACpBlV,MAAC,OACC,IAAKkV,EAAY,IACjB,IAAKA,EAAY,KAAOA,EAAY,MACpC,UAAU,uCACV,QAAUzL,GAAMA,EAAE,iBAAgB,GAGpCzJ,MAAC,SACC,IAAKkV,EAAY,IACjB,SAAQ,GACR,UAAU,wBACV,QAAUzL,GAAMA,EAAE,iBAAgB,GAItCpH,OAAC,OAAI,UAAU,6FACb,UAAArC,MAAC,MAAG,UAAU,cAAe,SAAAkV,EAAY,MAAM,EAC9CA,EAAY,SACXlV,MAAC,KAAE,UAAU,0BAA2B,WAAY,QAAQ,GAEhE,GACF,IArCqB,KA0C3B,OAAKkU,EAGHlU,MAAC,OACC,UAAWwM,EAAG,6EAA8ErE,CAAS,EACrG,KAAK,SACL,aAAW,OACX,kBAAgB,uBACf,GAAG0O,GAAA,EAEJ,SAAAxU,OAAC,OACC,UAAU,mFACV,QAAUoH,GAAMA,EAAE,kBAGlB,UAAApH,OAAC,OAAI,UAAU,+BACb,UAAAA,OAAC,OAAI,UAAU,yCACb,UAAArC,MAAC,MAAG,GAAG,uBAAuB,UAAU,sCACrC,SAAAyT,EACH,EACAzT,MAAC,UACC,QAAS6B,EACT,UAAU,gDACV,aAAW,KAEX,SAAA7B,MAACsC,EAAA,CAAE,UAAU,UAAU,GACzB,EACF,EAGAD,OAAC,OAAI,UAAU,kCACb,UAAArC,MAAC,OAAI,UAAU,SACb,SAAAqC,OAAC,OAAI,UAAU,WACb,UAAArC,MAACoK,GAAA,CAAO,UAAU,2EAA2E,EAC7FpK,MAAC,SACC,KAAK,OACL,YAAY,cACZ,MAAOiS,EAAQ,WACf,SAAWxI,GAAMgN,GAAa,aAAchN,EAAE,OAAO,KAAK,EAC1D,UAAU,qHACV,aAAW,MACb,EACF,EACF,EAEApH,OAAC,OAAI,UAAU,aACZ,UAAA+R,EAAc,OAAS,GACtB/R,OAAC,UACC,MAAO4P,EAAQ,SACf,SAAWxI,GAAMgN,GAAa,WAAYhN,EAAE,OAAO,KAAK,EACxD,UAAU,wGACV,aAAW,WAEX,UAAAzJ,MAAC,UAAO,MAAM,MAAM,iBAAK,EACxBoU,EAAc,IAAItR,GACjB9C,MAAC,UAAkB,MAAO8C,EACvB,SAAAA,IAAS,QAAU,MAAQ,OADjBA,CAEb,CACD,KAILT,OAAC,OAAI,UAAU,+CACb,UAAArC,MAAC,UACC,QAAS,IAAM0U,EAAY,MAAM,EACjC,UAAWlI,EACT,gCACAiI,IAAa,OAAS,mCAAqC,iBAE7D,MAAM,QACN,aAAW,QAEX,SAAAzU,MAAC0X,GAAA,CAAQ,UAAU,UAAU,IAE/B1X,MAAC,UACC,QAAS,IAAM0U,EAAY,MAAM,EACjC,UAAWlI,EACT,gCACAiI,IAAa,OAAS,mCAAqC,iBAE7D,MAAM,QACN,aAAW,QAEX,SAAAzU,MAAC2X,GAAA,CAAK,UAAU,UAAU,GAC5B,EACF,EAEA3X,MAAC,SAAO,GAAG8W,GAAA,CAAc,CAAG,EAC5BzU,OAAC,UACC,QAAS,IAAM,CACb,MAAMuV,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,OACbA,EAAM,SAAW,GACjBA,EAAM,OAASxD,EAAc,IAAItR,GAAQ,GAAGA,CAAI,IAAI,EAAE,KAAK,GAAG,EAC9D8U,EAAM,SAAYnO,GAAM,CACtB,MAAMwJ,EAAQ,MAAM,KAAMxJ,EAAE,OAA4B,OAAS,EAAE,EAC/DwJ,EAAM,OAAS,IACjB4B,EAAgB,EAAI,EACpB+B,GAAiB3D,CAAK,EAE1B,EACA2E,EAAM,OACR,EACA,UAAU,0GACV,aAAW,SAEX,UAAA5X,MAAC6X,EAAA,CAAO,UAAU,UAAU,EAAE,SAI/B1D,GAAYiC,EAAS,OAAS,GAC7BpW,MAAC,UACC,QAASmW,GACT,UAAU,yFACV,aAAY5B,EAAc,SAAW6B,EAAS,OAAS,WAAa,QAEnE,SAAA7B,EAAc,SAAW6B,EAAS,OAAS,QAAU,SACxD,EAEJ,GACF,EAECW,IACC/W,MAAC,OAAI,UAAU,gIACb,eAAC,OAAI,UAAU,oCAAoC,wBAEnD,EACF,GAEJ,EAGAA,MAAC,OAAI,UAAU,6BAA6B,IAAKuV,EAC9C,SAAAK,EACCvT,OAAC,OAAI,UAAU,wCACb,UAAArC,MAACsQ,GAAA,CAAQ,UAAU,qCAAqC,EACxDtQ,MAAC,QAAK,UAAU,qBAAqB,0BAAc,GACrD,EACEgQ,GACF3N,OAAC,OAAI,UAAU,qDACb,UAAArC,MAAC8X,GAAA,CAAY,UAAU,eAAe,EACtC9X,MAAC,QAAK,8BAAkB,GAC1B,EACEoW,EAAS,SAAW,EACtB/T,OAAC,OAAI,UAAU,+DACb,UAAArC,MAAC+X,GAAA,CAAU,UAAU,iBAAiB,EACtC/X,MAAC,QAAK,UAAU,2BAA2B,wBAAY,EACvDA,MAAC,QAAK,UAAU,UAAU,oCAAwB,GACpD,EAEAqC,OAAAM,WAAA,CACE,UAAA3C,MAAC,OAAI,UAAWwM,EACdiI,IAAa,OACT,sEACA,aAEH,SAAA2B,EAAS,IAAI,CAAC3a,EAAMY,IAAU+a,GAAgB3b,CAAW,CAAC,EAC7D,EAGCia,GACC1V,MAAC,OAAI,IAAKoV,EAAa,UAAU,2BAC9B,SAAAO,GACC3V,MAACsQ,GAAA,CAAQ,UAAU,qCAAqC,EAE5D,GAEJ,EAEJ,QAGC,OAAI,UAAU,0CACb,SAAAjO,OAAC,OAAI,UAAU,oCACb,UAAArC,MAAC,OAAI,UAAU,wBACZ,WAAc,OAAS,SACrB,QACE,UAAAuU,EAAc,OAAO,QACrBJ,GAAYG,EAAe,GAAK,QAAQA,CAAY,MACvD,EAEAtU,MAAC,QAAK,qBAAS,EAEnB,EACAqC,OAAC,OAAI,UAAU,0BACb,UAAArC,MAAC,UACC,QAAS6B,EACT,UAAU,iFACX,gBAGDQ,OAAC,UACC,QAAS6T,GACT,SAAU3B,EAAc,SAAW,EACnC,UAAU,0JAEV,UAAAvU,MAACuX,GAAA,CAAM,UAAU,UAAU,EAAE,UAE/B,EACF,GACF,EACF,QAGCC,GAAA,EAAY,QAGZC,GAAA,EAAa,IAChB,GAhNgB,IAmNtB,EC/vBaO,GAAwD,CAAC,CACpE,MAAAC,EACA,MAAA3a,EACA,SAAA4a,EACA,YAAAC,EACA,OAAAC,EAAS,UACT,QAAAC,EAAU,EACV,QAAAC,EAAU,EACZ,IAAM,CACJ,KAAM,CAACC,EAAmBC,CAAoB,EAAItX,WAAS,EAAK,EAC1D,CAAC8O,EAAOyI,CAAQ,EAAIvX,WAAwB,IAAI,EAEhDwX,EAAqBC,GAAmC,CAC5D,MAAMC,EAAgB,MAAM,QAAQD,CAAK,EAAIA,EAAM,CAAC,EAAIA,EACxD,GAAIC,EAAe,CAEjB,MAAMC,EAAmB,GAAGD,EAAc,GAAG,GAAGA,EAAc,IAAI,SAAS,GAAG,EAAI,IAAM,GAAG,KAAK,KAAK,KAAK,GAC1GV,EAASW,CAAgB,EAGzB,MAAMrZ,EAAS,SAAS,eAAe,2BAA2B,EAC9DA,IAEFA,EAAO,eAAe,YACpB,CACE,KAAM,cACN,IAAKqZ,CAAA,EAEP,KAIF,WAAW,IAAM,CACfrZ,EAAO,IAAMA,EAAO,GACtB,EAAG,GAAG,EAEV,CACAgZ,EAAqB,EAAK,CAC5B,EAEMM,EAAe,IAAM,CACzBZ,EAAS,IAAI,EACbO,EAAS,IAAI,CACf,EAEMM,EAAoB,IAAM,CAC9BP,EAAqB,EAAI,CAC3B,EAEA,OACEnW,OAAAM,WAAA,CACE,UAAAN,OAAC,OAAI,UAAU,qCACb,UAAAA,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,SAAM,UAAU,sBAAuB,SAAAiY,EAAM,EAC7CE,GACCnY,MAAC,QAAK,UAAU,4BAA6B,SAAAmY,CAAA,CAAY,GAE7D,EAEAnY,MAAC,OAAI,UAAW,qBAAqB1C,EAAQ,YAAc,EAAE,GAC1D,SAAAA,GAASgb,EACRjW,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,OAAI,IAAK1C,EAAO,IAAI,UAAU,UAAU,qBAAqB,EAC9D0C,MAAC,UACC,QAAS8Y,EACT,UAAU,sBACV,MAAM,eAEN,SAAA9Y,MAACsC,EAAA,CAAE,KAAM,GAAI,GACf,EACF,EAEAD,OAAC,OAAI,UAAU,2BACb,UAAArC,MAACgZ,GAAA,CAAU,KAAM,GAAI,UAAU,oBAAoB,EACnDhZ,MAAC,KAAE,UAAU,oBAAoB,uDAEjC,EACAqC,OAAC,UACC,QAAS0W,EACT,UAAU,sBACV,KAAK,SAEL,UAAA/Y,MAAC6X,EAAA,CAAO,KAAM,GAAI,EAAE,uBAEtB,EACF,EAEJ,EAEC7H,GAAShQ,MAAC,OAAI,UAAU,sBAAuB,SAAAgQ,EAAM,EAErD1S,GAAS,CAACgb,GACTjW,OAAC,OAAI,UAAU,wBACb,UAAArC,MAACgZ,GAAA,CAAU,KAAM,GAAI,EACrBhZ,MAAC,QAAK,0BAAc,EACpBA,MAAC,UAAO,QAAS8Y,EAAc,UAAU,qBACvC,SAAA9Y,MAACsC,EAAA,CAAE,KAAM,GAAI,EACf,GACF,GAEJ,EAGAtC,MAACiU,GAAA,CACC,OAAQsE,EACR,QAAS,IAAMC,EAAqB,EAAK,EACzC,SAAUE,EACV,SAAU,GACV,cAAe,CAAC,OAAO,EACvB,MAAM,gBACR,EACF,CAEJ,EC5GaO,EAA0C,CAAC,CACtD,MAAAhB,EACA,MAAA3a,EACA,SAAA4a,EACA,IAAAgB,EAAM,EACN,IAAAC,EAAM,IACN,KAAAC,EAAO,EACP,KAAAC,EAAO,KACP,YAAAlB,EACA,WAAAmB,EAAa,GACb,YAAAC,EAAc,IAChB,IAAM,CACJ,KAAM,CAAE,MAAApb,CAAA,EAAU8B,EAAA,EACZuZ,EAAgBrb,EAAM,cAEtB,CAACsb,EAAcC,CAAe,EAAIxY,WAAeqY,CAAW,EAC5D,CAACI,EAAeC,CAAgB,EAAI1Y,WAAS,EAAI,EAEjD2Y,EAAQ,MAAM,QAAQR,CAAI,EAAIA,EAAO,CAACA,CAAI,EAG1CS,EAAkB,IAClB,OAAOxc,GAAU,SACZA,EAEFA,EAAMkc,CAAa,EAItBO,EAAe,CAACC,EAAkBla,IAA2B,CACjE,GAAI,CAACwZ,GAAc,OAAOhc,GAAU,SAAU,CAC5C4a,EAAS8B,CAAQ,EACjB,MACF,CAOE9B,EAFEyB,EAEO,CACP,QAASK,EACT,OAAQA,EACR,OAAQA,CAAA,EAID,CACP,GAZoB1c,EAapB,CAdiBwC,GAAU0Z,CAcd,EAAGQ,CAAA,CALjB,CAQL,EAGMC,EAAc,IAAc,CAChC,OAAQR,EAAA,CACN,IAAK,IACL,IAAK,KACL,IAAK,KACH,MAAO,KACT,IAAK,KACL,IAAK,MACH,MAAO,IACT,QACE,OAAON,CAAA,CAEb,EAGMe,EAAU,IAAc,CAC5B,OAAQT,EAAA,CACN,IAAK,KACL,IAAK,MACH,MAAO,IACT,QACE,OAAOL,CAAA,CAEb,EAEMe,EAAuB,IAAM,CACjC,GAAI,CAACb,GAAc,OAAOhc,GAAU,SAAU,OAAO,KAErD,MAAM8c,EAAkB9c,EAExB,OACE+E,OAAC,OAAI,UAAU,uBACb,UAAAA,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,UACC,UAAW,uBAAuBwZ,IAAkB,UAAY,SAAW,EAAE,GAC7E,QAAS,IAAMO,EAAaK,EAAgB,QAAS,SAAS,EAC9D,MAAM,UAEN,SAAApa,MAAC0Q,GAAA,CAAQ,KAAM,GAAI,IAErB1Q,MAAC,UACC,UAAW,uBAAuBwZ,IAAkB,SAAW,SAAW,EAAE,GAC5E,QAAS,IAAMO,EAAaK,EAAgB,OAAQ,QAAQ,EAC5D,MAAM,SAEN,SAAApa,MAAC2Q,GAAA,CAAO,KAAM,GAAI,IAEpB3Q,MAAC,UACC,UAAW,uBAAuBwZ,IAAkB,SAAW,SAAW,EAAE,GAC5E,QAAS,IAAMO,EAAaK,EAAgB,OAAQ,QAAQ,EAC5D,MAAM,SAEN,SAAApa,MAAC4Q,GAAA,CAAW,KAAM,GAAI,GACxB,EACF,EAEA5Q,MAAC,UACC,QAAS,IAAM4Z,EAAiB,CAACD,CAAa,EAC9C,UAAW,qBAAqBA,EAAgB,SAAW,EAAE,GAC7D,MAAOA,EAAgB,gBAAkB,cAC1C,eAED,EACF,CAEJ,EAEMU,EAAeP,EAAA,EACfQ,EAAWL,EAAA,EACXM,EAAYL,EAAA,EAElB,OACE7X,OAAC,OAAI,UAAU,6BACb,UAAAA,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,SAAM,UAAU,sBAAuB,SAAAiY,EAAM,EAC7CkC,EAAA,CAAqB,EACxB,EAEChC,GACCnY,MAAC,QAAK,UAAU,4BAA6B,SAAAmY,EAAY,EAG3D9V,OAAC,OAAI,UAAU,yBACb,UAAArC,MAAC,OAAI,UAAU,6BACb,SAAAA,MAAC,SACC,KAAK,QACL,IAAAkZ,EACA,IAAKoB,EACL,KAAMC,EACN,MAAOF,EACP,SAAW5Q,GAAMsQ,EAAa,WAAWtQ,EAAE,OAAO,KAAK,CAAC,EACxD,UAAU,qBACV,MAAO,CACL,WAAY,kDACR4Q,EAAenB,IAAQoB,EAAWpB,GAAQ,GAC9C,YAAamB,EAAenB,IAAQoB,EAAWpB,GAAQ,GAAG,gBAC5D,GAEJ,EAEA7W,OAAC,OAAI,UAAU,2BACb,UAAArC,MAAC,SACC,KAAK,SACL,IAAAkZ,EACA,IAAKoB,EACL,KAAMC,EACN,MAAOF,EACP,SAAW5Q,GAAMsQ,EAAa,WAAWtQ,EAAE,OAAO,KAAK,GAAK,CAAC,EAC7D,UAAU,uBAGXoQ,EAAM,OAAS,EACd7Z,MAAC,UACC,MAAOyZ,EACP,SAAWhQ,GAAMiQ,EAAgBjQ,EAAE,OAAO,KAAa,EACvD,UAAU,oBAET,SAAAoQ,EAAM,IAAKW,GACVxa,MAAC,UAAe,MAAOwa,EACpB,SAAAA,CAAA,EADUA,CAEb,CACD,IAGHxa,MAAC,QAAK,UAAU,0BAA2B,SAAA6Z,EAAM,CAAC,EAAE,GAExD,GACF,EAECP,GAAc,OAAOhc,GAAU,UAAY,CAACqc,GAC3CtX,OAAC,OAAI,UAAU,sBACb,UAAAA,OAAC,QAAK,gBAAI/E,EAAM,QAASmc,CAAA,EAAa,SACrC,QAAK,gBAAInc,EAAM,OAAQmc,CAAA,EAAa,SACpC,QAAK,gBAAInc,EAAM,OAAQmc,CAAA,EAAa,GACvC,GAEJ,CAEJ,EC3MagB,EAA0C,CAAC,CACtD,MAAAxC,EACA,MAAA3a,EACA,SAAA4a,EACA,YAAAC,EACA,SAAAuC,EAAW,EACb,UAEK,OAAI,UAAU,6BACb,SAAArY,OAAC,OAAI,UAAU,yBACb,UAAAA,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,SAAM,UAAU,sBAAuB,SAAAiY,EAAM,EAC7CE,GACCnY,MAAC,QAAK,UAAU,4BAA6B,SAAAmY,CAAA,CAAY,GAE7D,EAEAnY,MAAC,UACC,QAAS,IAAM,CAAC0a,GAAYxC,EAAS,CAAC5a,CAAK,EAC3C,UAAW,uBAAuBA,EAAQ,SAAW,EAAE,IAAIod,EAAW,WAAa,EAAE,GACrF,SAAAA,EACA,KAAK,SACL,eAAcpd,EACd,aAAY2a,EAEZ,SAAAjY,MAAC,QAAK,UAAU,sBAAsB,GACxC,EACF,EACF,ECzBS2a,EAAoD,CAAC,CAChE,MAAA1C,EACA,MAAA3a,EACA,SAAA4a,EACA,YAAAC,EACA,SAAAyC,EAAW,GACX,UAAAC,EAAY,EACd,IAAM,CACJ,KAAM,CAAC3G,EAAQ4G,CAAS,EAAI5Z,WAAS,EAAK,EACpC,CAAC6Z,EAAWC,CAAY,EAAI9Z,WAA6B,QAAQ,EACjE+Z,EAAY9b,SAAuB,IAAI,EAGvC+b,EAAyB,OAAO5d,GAAU,SAC5C,CAAE,OAAQA,EAAO,MAAO,QACxBA,EAEE6d,EAAoB,CAACC,EAAejd,IAA8B,CAEpE+Z,EADE0C,EACO,CACP,GAAGM,EACH,CAAC/c,CAAK,EAAGid,CAAA,EAGFA,CAFR,CAIL,EAEMC,EAAeld,GAA8B,CAE/C+Z,EADE0C,EACO,CACP,GAAGM,EACH,CAAC/c,CAAK,EAAGA,IAAU,QAAU,OAAY,IAGlC,EAFR,CAIL,EAGMmd,EAAe,CACnB,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,UAC5C,UAAW,UAAW,UAAW,UAAW,WAI9C7b,YAAU,IAAM,CACd,MAAM8b,EAAsB5b,GAAsB,CAC5Csb,EAAU,SAAW,CAACA,EAAU,QAAQ,SAAStb,EAAM,MAAc,GACvEmb,EAAU,EAAK,CAEnB,EAEA,OAAI5G,GACF,SAAS,iBAAiB,YAAaqH,CAAkB,EAGpD,IAAM,CACX,SAAS,oBAAoB,YAAaA,CAAkB,CAC9D,CACF,EAAG,CAACrH,CAAM,CAAC,EAEX,MAAMsH,EAAoBrd,GAA8B,CACtD,MAAMsd,EAAetd,IAAU,SAAW+c,EAAW,OAASA,EAAW,MAEzE,OACE7Y,OAAC,OAAI,UAAU,0BACb,UAAAA,OAAC,OAAI,UAAU,4BACb,UAAArC,MAAC,SACC,KAAK,OACL,MAAOyb,GAAgB,GACvB,SAAWhS,GAAM0R,EAAkB1R,EAAE,OAAO,MAAOtL,CAAK,EACxD,YAAY,UACZ,UAAU,sBAEZ6B,MAAC,SACC,KAAK,QACL,MAAOyb,GAAgB,UACvB,SAAWhS,GAAM0R,EAAkB1R,EAAE,OAAO,MAAOtL,CAAK,EACxD,UAAU,6BACZ,EACF,EAEC0c,GAAaY,GACZzb,MAAC,UACC,QAAS,IAAMqb,EAAYld,CAAK,EAChC,UAAU,oBACV,MAAM,cAEN,SAAA6B,MAACsC,EAAA,CAAE,KAAM,GAAI,GACf,EAEJ,CAEJ,EAEA,OACED,OAAC,OAAI,UAAU,mCACb,UAAAA,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,SAAM,UAAU,sBAAuB,SAAAiY,EAAM,EAC7CE,GACCnY,MAAC,QAAK,UAAU,4BAA6B,SAAAmY,CAAA,CAAY,GAE7D,EAEA9V,OAAC,OAAI,UAAU,+BAA+B,IAAK4Y,EACjD,UAAAjb,MAAC,UACC,QAAS,IAAM8a,EAAU,CAAC5G,CAAM,EAChC,UAAU,6BACV,MAAO,CACL,WAAY0G,GAAYG,IAAc,QAClCG,EAAW,OAAS,cACpBA,EAAW,QAAU,eAG3B,SAAAlb,MAAC0b,GAAA,CAAQ,KAAM,GAAI,IAGpBxH,GACC7R,OAAC,OAAI,UAAU,8BACZ,UAAAuY,GACCvY,OAAC,OAAI,UAAU,mBACb,UAAArC,MAAC,UACC,QAAS,IAAMgb,EAAa,QAAQ,EACpC,UAAW,mBAAmBD,IAAc,SAAW,SAAW,EAAE,GACrE,oBAGD/a,MAAC,UACC,QAAS,IAAMgb,EAAa,OAAO,EACnC,UAAW,mBAAmBD,IAAc,QAAU,SAAW,EAAE,GACpE,kBAED,EACF,EAGF1Y,OAAC,OAAI,UAAU,6BACZ,UAAAmZ,EAAiBZ,EAAWG,EAAY,QAAQ,QAEhD,OAAI,UAAU,sBACZ,SAAAO,EAAa,IAAKF,GACjBpb,MAAC,UAEC,QAAS,IAAMmb,EAAkBC,EAAOR,EAAWG,EAAY,QAAQ,EACvE,UAAU,2BACV,MAAO,CAAE,WAAYK,CAAA,EACrB,MAAOA,CAAA,EAJFA,CAAA,CAMR,EACH,GACF,GACF,GAEJ,GACF,CAEJ,ECpKaO,GAAgC,IAAM,CACjD,KAAM,CAAE,SAAAlf,EAAU,cAAA4C,CAAA,EAAkBe,EAAA,EAC9BvC,EAAepB,EAAS,aAExB,CAACmf,EAASC,CAAU,EAAI5N,EAAM,SAA+B,SAAS,EAE5E,OACE5L,OAAC,OAAI,UAAU,sCACb,UAAArC,MAAC,OAAI,UAAU,sBAAsB,yBAAa,EAGlDqC,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,gBAAI,EAGtCqC,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,UACC,QAAS,IAAMwZ,EAAW,SAAS,EACnC,UAAW,aAAaD,IAAY,UAAY,SAAW,EAAE,GAE7D,UAAA5b,MAAC0Q,GAAA,CAAQ,KAAM,GAAI,EAAE,kBAGvBrO,OAAC,UACC,QAAS,IAAMwZ,EAAW,QAAQ,EAClC,UAAW,aAAaD,IAAY,SAAW,SAAW,EAAE,GAE5D,UAAA5b,MAAC4Q,GAAA,CAAW,KAAM,GAAI,EAAE,gBAE1B,EACF,EAECgL,IAAY,UACX5b,MAACgY,GAAA,CACC,MAAM,eACN,MAAOna,EAAa,KAAK,QACzB,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,OAAQ,SAAS,CAAC,EAE1D,YAAY,gEAGd0C,MAACgY,GAAA,CACC,MAAM,cACN,MAAOna,EAAa,KAAK,OACzB,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,OAAQ,QAAQ,CAAC,EAEzD,YAAY,gDAKhB0C,MAACiZ,EAAA,CACC,MAAM,aACN,MAAOpb,EAAa,KAAK,MACzB,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,OAAQ,OAAO,CAAC,EAExD,IAAK,GACL,IAAK,IACL,KAAK,KACL,WAAY,GACZ,YAAY,8BACd,EACF,EAGA+E,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,sBAAU,EAE5CA,MAACya,EAAA,CACC,MAAM,qBACN,MAAO5c,EAAa,UAAU,KAC9B,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,YAAa,MAAM,CAAC,EAE5D,YAAY,8CAGbO,EAAa,UAAU,MACtBwE,OAAAM,WAAA,CACE,UAAAN,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,2BAAe,EACtDA,MAAC,SACC,KAAK,OACL,MAAOnC,EAAa,UAAU,KAC9B,SAAW4L,GACTpK,EAAc,eAAgBoK,EAAE,OAAO,MAAO,CAAC,YAAa,MAAM,CAAC,EAErE,UAAU,mBACV,YAAY,yBACd,EACF,EAEAzJ,MAAC2a,EAAA,CACC,MAAM,cACN,MAAO9c,EAAa,UAAU,MAC9B,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,YAAa,OAAO,CAAC,EAE7D,SAAU,GACV,YAAY,sCAGd0C,MAACiZ,EAAA,CACC,MAAM,kBACN,MAAOpb,EAAa,UAAU,WAAW,SACzC,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,YAAa,aAAc,UAAU,CAAC,EAE9E,IAAK,GACL,IAAK,GACL,KAAK,KACL,WAAY,KAGd+E,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,uBAAW,EAClDqC,OAAC,UACC,MAAOxE,EAAa,UAAU,WAAW,WACzC,SAAW4L,GACTpK,EAAc,eAAgB,OAAOoK,EAAE,OAAO,KAAK,EAAG,CACpD,YACA,aACA,aACD,EAEH,UAAU,qBAEV,UAAAzJ,MAAC,UAAO,MAAO,IAAK,uBAAW,EAC/BA,MAAC,UAAO,MAAO,IAAK,wBAAY,EAChCA,MAAC,UAAO,MAAO,IAAK,wBAAY,EAChCA,MAAC,UAAO,MAAO,IAAK,2BAAe,EACnCA,MAAC,UAAO,MAAO,IAAK,sBAAU,EAC9BA,MAAC,UAAO,MAAO,IAAK,4BAAgB,EACpCA,MAAC,UAAO,MAAO,IAAK,uBAAW,IACjC,EACF,GACF,GAEJ,EAGAqC,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,mBAAO,EAEzCA,MAACya,EAAA,CACC,MAAM,kBACN,MAAO5c,EAAa,QAAQ,KAC5B,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,UAAW,MAAM,CAAC,EAE1D,YAAY,kCAGbO,EAAa,QAAQ,MACpBwE,OAAAM,WAAA,CACE,UAAAN,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,wBAAY,EACnDA,MAAC,SACC,KAAK,OACL,MAAOnC,EAAa,QAAQ,KAC5B,SAAW4L,GACTpK,EAAc,eAAgBoK,EAAE,OAAO,MAAO,CAAC,UAAW,MAAM,CAAC,EAEnE,UAAU,mBACV,YAAY,sBACd,EACF,EAEAzJ,MAAC2a,EAAA,CACC,MAAM,gBACN,MAAO9c,EAAa,QAAQ,MAC5B,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,UAAW,OAAO,CAAC,EAE3D,SAAU,GACV,YAAY,mCAGd0C,MAACiZ,EAAA,CACC,MAAM,oBACN,MAAOpb,EAAa,QAAQ,WAAW,SACvC,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,UAAW,aAAc,UAAU,CAAC,EAE5E,IAAK,EACL,IAAK,GACL,KAAK,KACL,WAAY,IACd,EACF,GAEJ,EAGA+E,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,qBAAS,EAE3CA,MAACgY,GAAA,CACC,MAAM,UACN,MAAOna,EAAa,QACpB,SAAWP,GACT+B,EAAc,eAAgB/B,EAAO,CAAC,SAAS,CAAC,EAElD,YAAY,6DACZ,OAAO,sCAGT0C,MAAC,KAAE,UAAU,kBAAkB,uIAG/B,GACF,GACF,CAEJ,EC5Na8b,GAA0B,IAAM,CAC3C,KAAM,CAAE,SAAArf,EAAU,cAAA4C,CAAA,EAAkBe,EAAA,EAC9B/C,EAASZ,EAAS,OAElB,CAACse,EAAWC,CAAY,EAAI/M,EAAM,SAA8B,OAAO,EAE7E,OACE5L,OAAC,OAAI,UAAU,+BACb,UAAArC,MAAC,OAAI,UAAU,sBAAsB,kBAAM,EAG3CqC,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,UACC,QAAS,IAAM2Y,EAAa,OAAO,EACnC,UAAW,aAAaD,IAAc,QAAU,SAAW,EAAE,GAE7D,UAAA/a,MAAC+b,GAAA,CAAQ,KAAM,GAAI,EAAE,kBAGvB1Z,OAAC,UACC,QAAS,IAAM2Y,EAAa,SAAS,EACrC,UAAW,aAAaD,IAAc,UAAY,SAAW,EAAE,GAE/D,UAAA/a,MAACgc,GAAA,CAAQ,KAAM,GAAI,EAAE,kBAEvB,EACF,EAECjB,IAAc,QACb1Y,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,0BAAc,EAEhDA,MAAC2a,EAAA,CACC,MAAM,gBACN,MAAOtd,EAAO,aACd,SAAWC,GACT+B,EAAc,SAAU/B,EAAO,CAAC,cAAc,CAAC,EAEjD,YAAY,0DAGd0C,MAAC2a,EAAA,CACC,MAAM,kBACN,MAAOtd,EAAO,eACd,SAAWC,GACT+B,EAAc,SAAU/B,EAAO,CAAC,gBAAgB,CAAC,EAEnD,YAAY,gDACd,EACF,EAGA+E,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,uBAAW,EAE7CA,MAAC2a,EAAA,CACC,MAAM,aACN,MAAOtd,EAAO,UACd,SAAWC,GACT+B,EAAc,SAAU/B,EAAO,CAAC,WAAW,CAAC,EAE9C,YAAY,wCAGd0C,MAAC2a,EAAA,CACC,MAAM,aACN,MAAOtd,EAAO,UACd,SAAWC,GACT+B,EAAc,SAAU/B,EAAO,CAAC,WAAW,CAAC,EAE9C,SAAU,GACV,YAAY,mCACd,EACF,EAGA+E,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,6BAAiB,EAEnDA,MAAC2a,EAAA,CACC,MAAM,kBACN,MAAOtd,EAAO,eACd,SAAWC,GACT+B,EAAc,SAAU/B,EAAO,CAAC,gBAAgB,CAAC,EAEnD,YAAY,sCAGd0C,MAAC2a,EAAA,CACC,MAAM,qBACN,MAAOtd,EAAO,kBACd,SAAWC,GACT+B,EAAc,SAAU/B,EAAO,CAAC,mBAAmB,CAAC,EAEtD,YAAY,sCACd,EACF,EAGA+E,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,6BAAiB,EAEnDA,MAAC2a,EAAA,CACC,MAAM,eACN,MAAOtd,EAAO,YACd,SAAWC,GACT+B,EAAc,SAAU/B,EAAO,CAAC,aAAa,CAAC,EAEhD,YAAY,uCACd,EACF,GACF,EAEA+E,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,gCAAoB,EACtDA,MAAC,KAAE,UAAU,4BAA4B,8HAGzC,QAEC,OAAI,UAAU,2BACZ,gBAAO,QAAQ3C,EAAO,OAAO,EAAE,IAAI,CAAC,CAACvB,EAAKwB,CAAK,EAAGjB,IACjDgG,OAAC,OAAc,UAAU,2BACvB,UAAAA,OAAC,QAAK,UAAU,4BAA4B,mBAAOhG,EAAQ,GAAE,EAC7D2D,MAAC2a,EAAA,CACC,MAAM,GACN,MAAArd,EACA,SAAW0c,GAAa,CACtB,MAAMiC,EAAa,CAAE,GAAG5e,EAAO,SAC/B4e,EAAWngB,CAAG,EAAIke,EAClB3a,EAAc,SAAU4c,EAAY,CAAC,SAAS,CAAC,CACjD,EACA,UAAW,IACb,GAXQngB,CAYV,CACD,EACH,EAEAkE,MAAC,UACC,QAAS,IAAM,CACb,MAAMkc,EAAS,QAAQ,OAAO,KAAK7e,EAAO,OAAO,EAAE,OAAS,CAAC,GACvD4e,EAAa,CAAE,GAAG5e,EAAO,QAAS,CAAC6e,CAAM,EAAG,WAClD7c,EAAc,SAAU4c,EAAY,CAAC,SAAS,CAAC,CACjD,EACA,UAAU,yBACX,wBAED,EACF,EAGA5Z,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,gCAAoB,EAEtDqC,OAAC,OAAI,UAAU,uBACb,UAAAA,OAAC,UACC,QAAS,IAAM,CACbhD,EAAc,SAAU,CACtB,aAAc,UACd,eAAgB,UAChB,UAAW,UACX,UAAW,CAAE,OAAQ,UAAW,MAAO,WACvC,YAAa,UACb,eAAgB,UAChB,kBAAmB,WAClB,EAAE,CACP,EACA,UAAU,sBAEV,UAAAW,MAAC,OAAI,UAAU,2BAA2B,MAAO,CAAE,WAAY,WAAa,EAC5EA,MAAC,QAAK,UAAU,4BAA4B,mBAAO,KAGrDqC,OAAC,UACC,QAAS,IAAM,CACbhD,EAAc,SAAU,CACtB,aAAc,UACd,eAAgB,UAChB,UAAW,UACX,UAAW,CAAE,OAAQ,UAAW,MAAO,WACvC,YAAa,UACb,eAAgB,UAChB,kBAAmB,WAClB,EAAE,CACP,EACA,UAAU,sBAEV,UAAAW,MAAC,OAAI,UAAU,2BAA2B,MAAO,CAAE,WAAY,WAAa,EAC5EA,MAAC,QAAK,UAAU,4BAA4B,gBAAI,KAGlDqC,OAAC,UACC,QAAS,IAAM,CACbhD,EAAc,SAAU,CACtB,aAAc,UACd,eAAgB,UAChB,UAAW,UACX,UAAW,CAAE,OAAQ,UAAW,MAAO,WACvC,YAAa,UACb,eAAgB,UAChB,kBAAmB,WAClB,EAAE,CACP,EACA,UAAU,sBAEV,UAAAW,MAAC,OAAI,UAAU,2BAA2B,MAAO,CAAE,WAAY,WAAa,EAC5EA,MAAC,QAAK,UAAU,4BAA4B,mBAAO,KAGrDqC,OAAC,UACC,QAAS,IAAM,CACbhD,EAAc,SAAU,CACtB,aAAc,UACd,eAAgB,UAChB,UAAW,UACX,UAAW,CAAE,OAAQ,UAAW,MAAO,WACvC,YAAa,UACb,eAAgB,UAChB,kBAAmB,WAClB,EAAE,CACP,EACA,UAAU,sBAEV,UAAAW,MAAC,OAAI,UAAU,2BAA2B,MAAO,CAAE,WAAY,WAAa,EAC5EA,MAAC,QAAK,UAAU,4BAA4B,kBAAM,IACpD,EACF,GACF,GACF,GAEJ,CAEJ,EC7OMmc,GAAe,CACnB,iBACA,QACA,YACA,UACA,kBACA,SACA,YACA,OACA,aACA,SACA,UACA,UACA,QACA,SACA,mBACA,eACA,SACA,QACA,QACA,YACA,mBACA,YACA,UACA,cACA,eACA,oBACA,QACA,iBACA,aACA,QACA,WACA,eACA,SACA,YACA,OACA,SACA,kBACA,YACA,SACA,gBACA,eACA,UACA,QACA,QACA,QACA,SACA,SACA,YACA,QACA,iBACA,QACA,aACF,EAGMC,GAAkB,CACtB,aAAc,CACZ,iBAAkB,QAAS,YAAa,SAAU,YAAa,OAC/D,aAAc,UAAW,UAAW,QAAS,SAAU,SACvD,QAAS,QAAS,YAAa,YAAa,UAAW,eACvD,QAAS,YAAa,OAAQ,YAAa,SAAU,gBACrD,UAAW,QAAS,QAAS,QAAS,SAAU,SAAU,YAC1D,QAAS,iBAAkB,SAE7B,MAAS,CACP,UAAW,kBAAmB,mBAAoB,eAClD,cAAe,oBAAqB,SAAU,eAAgB,eAEhE,QAAW,CACT,SAAU,aAAc,SAE1B,YAAe,CACb,iBAAkB,WAAY,eAAgB,UAEhD,UAAa,CACX,kBAEJ,EAUaC,GAAwD,CAAC,CACpE,MAAApE,EACA,MAAA3a,EACA,SAAA4a,EACA,YAAAC,EACA,YAAAmE,EAAc,EAChB,IAAM,CACJ,KAAM,CAACpI,EAAQ4G,CAAS,EAAI5Z,WAAS,EAAK,EACpC,CAACqb,EAAYC,CAAa,EAAItb,WAAS,EAAE,EACzC,CAACub,EAAkBC,CAAmB,EAAIxb,WAAiB,KAAK,EAChE,CAACyb,EAAaC,CAAc,EAAI1b,WAAsB,IAAI,GAAK,EAG/D2b,EAAgB/T,UAAQ,IAAM,CAClC,IAAIgU,EAAQX,GAGZ,OAAIM,IAAqB,QACvBK,EAAQA,EAAM,OAAOC,GACnBX,GAAgBK,CAAgD,GAAG,SAASM,CAAI,IAKhFR,IACFO,EAAQA,EAAM,UACZC,EAAK,cAAc,SAASR,EAAW,aAAa,IAIjDO,CACT,EAAG,CAACP,EAAYE,CAAgB,CAAC,EAG3BO,EAAkBC,GAAqB,CAC3C,GAAIN,EAAY,IAAIM,CAAQ,GAAKA,IAAa,iBAC5C,OAGF,MAAMC,EAAO,SAAS,cAAc,MAAM,EAC1CA,EAAK,KAAO,4CAA4CD,EAAS,QAAQ,IAAK,GAAG,CAAC,yCAClFC,EAAK,IAAM,aACX,SAAS,KAAK,YAAYA,CAAI,EAE9BN,KAAuB,IAAI,IAAIlT,CAAI,EAAE,IAAIuT,CAAQ,CAAC,CACpD,EAGAxd,YAAU,IAAM,CACVnC,GAASA,IAAU,kBACrB0f,EAAe1f,CAAK,CAExB,EAAG,CAACA,CAAK,CAAC,EAGV,MAAM6f,EAAiBF,GACjBA,IAAa,iBACR,+EAEF,IAAIA,CAAQ,gBAGftT,EAAgBsT,GAAqB,CACzC/E,EAAS+E,CAAQ,EACjBnC,EAAU,EAAK,EACf0B,EAAc,EAAE,CAClB,EAGA/c,mBAAU,IAAM,CACd,MAAM8b,EAAsB5b,GAAsB,CACjCA,EAAM,OACT,QAAQ,uBAAuB,GACzCmb,EAAU,EAAK,CAEnB,EAEA,OAAI5G,GACF,SAAS,iBAAiB,YAAaqH,CAAkB,EAGpD,IAAM,CACX,SAAS,oBAAoB,YAAaA,CAAkB,CAC9D,CACF,EAAG,CAACrH,CAAM,CAAC,EAGT7R,OAAC,OAAI,UAAU,qCACb,UAAAA,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,SAAM,UAAU,sBAAuB,SAAAiY,EAAM,EAC7CE,GACCnY,MAAC,QAAK,UAAU,4BAA6B,SAAAmY,CAAA,CAAY,GAE7D,EAEA9V,OAAC,OAAI,UAAU,iCACb,UAAAA,OAAC,UACC,QAAS,IAAMyY,EAAU,CAAC5G,CAAM,EAChC,UAAU,+BACV,MAAO,CAAE,WAAYiJ,EAAc7f,CAAK,GAExC,UAAA0C,MAAC,QAAK,UAAU,6BAA8B,SAAA1C,GAAS,cAAc,EACrE0C,MAAC,QAAK,UAAU,6BAA6B,aAAC,KAG/Csc,GAAehf,GACd0C,MAAC,OACC,UAAU,sBACV,MAAO,CAAE,WAAYmd,EAAc7f,CAAK,GACzC,yDAKF4W,GACC7R,OAAC,OAAI,UAAU,uBAEb,UAAAA,OAAC,OAAI,UAAU,qBACb,UAAAA,OAAC,OAAI,UAAU,qBACb,UAAArC,MAACoK,GAAA,CAAO,KAAM,GAAI,EAClBpK,MAAC,SACC,KAAK,OACL,MAAOuc,EACP,SAAW9S,GAAM+S,EAAc/S,EAAE,OAAO,KAAK,EAC7C,YAAY,kBACZ,UAAU,2BACV,UAAS,IACX,EACF,EAEApH,OAAC,OAAI,UAAU,yBACb,UAAArC,MAAC,UACC,QAAS,IAAM0c,EAAoB,KAAK,EACxC,UAAW,wBAAwBD,IAAqB,MAAQ,SAAW,EAAE,GAC9E,iBAGA,OAAO,KAAKL,EAAe,EAAE,IAAIxJ,GAChC5S,MAAC,UAEC,QAAS,IAAM0c,EAAoB9J,CAAQ,EAC3C,UAAW,wBAAwB6J,IAAqB7J,EAAW,SAAW,EAAE,GAE/E,SAAAA,CAAA,EAJIA,CAAA,CAMR,GACH,GACF,EAGA5S,MAAC,OAAI,UAAU,mBACZ,WAAc,OAAS,EACtB6c,EAAc,IAAIE,GAAQ,CAExB,MAAMK,EAAmB,IAAM,CACzBL,IAAS,kBACXC,EAAeD,CAAI,CAEvB,EAEA,OACE/c,MAAC,UAEC,QAAS,IAAM2J,EAAaoT,CAAI,EAChC,aAAcK,EACd,UAAW,sBAAsBL,IAASzf,EAAQ,WAAa,EAAE,GACjE,MAAO,CAAE,WAAYqf,EAAY,IAAII,CAAI,EAAII,EAAcJ,CAAI,EAAI,WAElE,SAAAA,CAAA,EANIA,CAAA,CASX,CAAC,EAED/c,MAAC,OAAI,UAAU,oBAAoB,0BAAc,EAErD,GACF,GAEJ,GACF,CAEJ,EC5Paqd,EAA0C,CAAC,CACtD,MAAApF,EACA,MAAA3a,EACA,SAAA4a,EACA,QAAA7X,EACA,YAAA8X,EACA,YAAAmF,EAAc,mBACd,SAAA5C,EAAW,GACX,WAAA6C,EAAa,EACf,IAAM,CACJ,KAAM,CAACrJ,EAAQ4G,CAAS,EAAI7M,EAAM,SAAS,EAAK,EAC1C,CAACsO,EAAYC,CAAa,EAAIvO,EAAM,SAAS,EAAE,EAC/CuP,EAAYvP,EAAM,OAAuB,IAAI,EAG7CwP,EAAoCpd,EAAQ,IAAKqd,GACrD,OAAOA,GAAQ,SAAW,CAAE,MAAOA,EAAK,MAAOA,GAAQA,CAAA,EAInDC,EAAiBF,EAAkB,OAAO,CAACxG,EAAK2G,IAAW,CAC/D,MAAMtK,EAAQsK,EAAO,OAAS,UAC9B,OAAK3G,EAAI3D,CAAK,IACZ2D,EAAI3D,CAAK,EAAI,IAEf2D,EAAI3D,CAAK,EAAE,KAAKsK,CAAM,EACf3G,CACT,EAAG,EAAoC,EAGjC4G,EAAkBtB,EACpBkB,EAAkB,OAAQC,GACxBA,EAAI,MAAM,cAAc,SAASnB,EAAW,aAAa,GAE3DkB,EAIEK,EADgBL,EAAkB,KAAMC,GAAQA,EAAI,QAAUpgB,CAAK,GACrC,OAASggB,EAG7CrP,EAAM,UAAU,IAAM,CACpB,MAAMsN,EAAsB5b,GAAsB,CAC5C6d,EAAU,SAAW,CAACA,EAAU,QAAQ,SAAS7d,EAAM,MAAc,IACvEmb,EAAU,EAAK,EACf0B,EAAc,EAAE,EAEpB,EAEA,OAAItI,GACF,SAAS,iBAAiB,YAAaqH,CAAkB,EAGpD,IAAM,CACX,SAAS,oBAAoB,YAAaA,CAAkB,CAC9D,CACF,EAAG,CAACrH,CAAM,CAAC,EAEX,MAAMvK,EAAgBoU,GAAwB,CAC5C7F,EAAS6F,CAAW,EACpBjD,EAAU,EAAK,EACf0B,EAAc,EAAE,CAClB,EAEMwB,EAAgB,IAChB,OAAO,KAAKL,CAAc,EAAE,SAAW,GAAKA,EAAe,QAEtDE,EAAgB,IAAKD,GAC1B5d,MAAC,UAEC,QAAS,IAAM2J,EAAaiU,EAAO,KAAK,EACxC,UAAW,uBACTA,EAAO,QAAUtgB,EAAQ,WAAa,EACxC,IAAIsgB,EAAO,SAAW,WAAa,EAAE,GACrC,SAAUA,EAAO,SAEhB,SAAAA,EAAO,OAPHA,EAAO,MASf,EAII,OAAO,QAAQD,CAAc,EAAE,IAAI,CAAC,CAACrK,EAAO2K,CAAY,IAC7D5b,OAAC,OAAgB,UAAU,qBACxB,UAAAiR,IAAU,WACTtT,MAAC,OAAI,UAAU,2BAA4B,SAAAsT,EAAM,EAElD2K,EACE,OAAQP,GAAQ,CAACnB,GAAcsB,EAAgB,SAASH,CAAG,CAAC,EAC5D,IAAKE,GACJ5d,MAAC,UAEC,QAAS,IAAM2J,EAAaiU,EAAO,KAAK,EACxC,UAAW,uBACTA,EAAO,QAAUtgB,EAAQ,WAAa,EACxC,IAAIsgB,EAAO,SAAW,WAAa,EAAE,GACrC,SAAUA,EAAO,SAEhB,SAAAA,EAAO,OAPHA,EAAO,MASf,IAjBKtK,CAkBV,CACD,EAGH,OACEjR,OAAC,OAAI,UAAU,6BAA6B,IAAKmb,EAC/C,UAAAnb,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,SAAM,UAAU,sBAAuB,SAAAiY,EAAM,EAC7CE,GACCnY,MAAC,QAAK,UAAU,4BAA6B,SAAAmY,CAAA,CAAY,GAE7D,EAEA9V,OAAC,OAAI,UAAU,yBACb,UAAAA,OAAC,UACC,QAAS,IAAM,CAACqY,GAAYI,EAAU,CAAC5G,CAAM,EAC7C,UAAW,wBAAwBA,EAAS,OAAS,EAAE,IACrDwG,EAAW,WAAa,EAC1B,GACA,SAAAA,EAEA,UAAA1a,MAAC,QAAK,UAAU,qBAAsB,SAAA8d,EAAa,EACnD9d,MAACke,GAAA,CAAY,KAAM,GAAI,UAAU,oBAAoB,KAGtDhK,GACC7R,OAAC,OAAI,UAAU,wBACZ,UAAAkb,GACCvd,MAAC,OAAI,UAAU,sBACb,SAAAA,MAAC,SACC,KAAK,OACL,MAAOuc,EACP,SAAW9S,GAAM+S,EAAc/S,EAAE,OAAO,KAAK,EAC7C,YAAY,YACZ,UAAU,4BACV,UAAS,KAEb,EAGFzJ,MAAC,OAAI,UAAU,uBACZ,WAAgB,OAAS,EACxBge,EAAA,EAEAhe,MAAC,OAAI,UAAU,qBAAqB,4BAAgB,EAExD,GACF,GAEJ,GACF,CAEJ,ECtKame,GAA8B,IAAM,CAC/C,KAAM,CAAE,SAAA1hB,EAAU,cAAA4C,CAAA,EAAkBe,EAAA,EAC9B7C,EAAad,EAAS,WAEtB,CAACse,EAAWC,CAAY,EAAI/M,EAAM,SAA0C,MAAM,EAClF,CAACmQ,EAAiBC,CAAkB,EAAIpQ,EAAM,SAAwB,IAAI,EAE1EqQ,EAAoB,CACxB,CAAE,MAAO,MAAO,MAAO,cACvB,CAAE,MAAO,MAAO,MAAO,qBACvB,CAAE,MAAO,MAAO,MAAO,eACvB,CAAE,MAAO,MAAO,MAAO,gBACvB,CAAE,MAAO,MAAO,MAAO,gBACvB,CAAE,MAAO,MAAO,MAAO,mBACvB,CAAE,MAAO,MAAO,MAAO,cACvB,CAAE,MAAO,MAAO,MAAO,oBACvB,CAAE,MAAO,MAAO,MAAO,cAAc,EAGjCC,EAAuB,CAC3B,CAAE,MAAO,OAAQ,MAAO,QACxB,CAAE,MAAO,aAAc,MAAO,cAC9B,CAAE,MAAO,YAAa,MAAO,aAC7B,CAAE,MAAO,YAAa,MAAO,YAAY,EAG3C,OACElc,OAAC,OAAI,UAAU,mCACb,UAAArC,MAAC,OAAI,UAAU,sBAAsB,sBAAU,EAG/CqC,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,UACC,QAAS,IAAM2Y,EAAa,MAAM,EAClC,UAAW,aAAaD,IAAc,OAAS,SAAW,EAAE,GAE5D,UAAA/a,MAACwe,GAAA,CAAK,KAAM,GAAI,EAAE,UAGpBnc,OAAC,UACC,QAAS,IAAM2Y,EAAa,UAAU,EACtC,UAAW,aAAaD,IAAc,WAAa,SAAW,EAAE,GAEhE,UAAA/a,MAACye,GAAA,CAAQ,KAAM,GAAI,EAAE,cAGvBpc,OAAC,UACC,QAAS,IAAM2Y,EAAa,SAAS,EACrC,UAAW,aAAaD,IAAc,UAAY,SAAW,EAAE,GAE/D,UAAA/a,MAAC0e,GAAA,CAAa,KAAM,GAAI,EAAE,YAE5B,EACF,EAEC3D,IAAc,QACb1Y,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,2BAAe,EAEjDA,MAACqc,GAAA,CACC,MAAM,cACN,MAAO9e,EAAW,SAAS,WAC3B,SAAWD,GACT+B,EAAc,aAAc/B,EAAO,CAAC,WAAY,YAAY,CAAC,EAE/D,YAAY,mDAGd0C,MAACiZ,EAAA,CACC,MAAM,YACN,MAAO1b,EAAW,SAAS,SAC3B,SAAWD,GACT+B,EAAc,aAAc/B,EAAO,CAAC,WAAY,UAAU,CAAC,EAE7D,IAAK,GACL,IAAK,GACL,KAAK,KACL,WAAY,GACZ,YAAY,iCAGd0C,MAACqd,EAAA,CACC,MAAM,cACN,MAAO,OAAO9f,EAAW,SAAS,UAAU,EAC5C,SAAWD,GACT+B,EAAc,aAAc,OAAO/B,CAAK,EAAiB,CAAC,WAAY,YAAY,CAAC,EAErF,QAASghB,EACT,YAAY,4BAGdte,MAACiZ,EAAA,CACC,MAAM,cACN,MAAO1b,EAAW,SAAS,WAC3B,SAAWD,GACT+B,EAAc,aAAc/B,EAAO,CAAC,WAAY,YAAY,CAAC,EAE/D,IAAK,EACL,IAAK,EACL,KAAM,GACN,KAAK,KACL,WAAY,GACZ,YAAY,gCAGd0C,MAACiZ,EAAA,CACC,MAAM,iBACN,MAAO1b,EAAW,SAAS,cAC3B,SAAWD,GACT+B,EAAc,aAAc/B,EAAO,CAAC,WAAY,eAAe,CAAC,EAElE,IAAK,GACL,IAAK,EACL,KAAM,GACN,KAAK,KACL,WAAY,GACZ,YAAY,qCAGd0C,MAACqd,EAAA,CACC,MAAM,iBACN,MAAO9f,EAAW,SAAS,cAC3B,SAAWD,GACT+B,EAAc,aAAc/B,EAAwB,CAAC,WAAY,eAAe,CAAC,EAEnF,QAASihB,EACT,YAAY,uBACd,EACF,EAGDxD,IAAc,YACb1Y,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,8BAAkB,EAElD,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EAAY,IAAKrC,GAAY,CAChE,MAAMghB,EAAkBphB,EAAW,SAASI,CAAO,EAC7C2K,EAAa8V,IAAoBzgB,EAEvC,OACE0E,OAAC,OAAkB,UAAU,kBAC3B,UAAAA,OAAC,UACC,QAAS,IAAMgc,EAAmB/V,EAAa,KAAO3K,CAAO,EAC7D,UAAW,0BAA0B2K,EAAa,SAAW,EAAE,GAE/D,UAAAjG,OAAC,QAAM,UAAA1E,EAAQ,cAAc,cAAU,EACvCqC,MAAC,QAAK,UAAU,uBAAuB,aAAC,KAGzCsI,GACCjG,OAAC,OAAI,UAAU,0BACb,UAAArC,MAACqc,GAAA,CACC,MAAM,cACN,MAAOsC,EAAgB,WACvB,SAAWrhB,GACT+B,EAAc,aAAc/B,EAAO,CAAC,WAAYK,EAAS,YAAY,CAAC,EAExE,YAAa,KAGf0E,OAAC,OAAI,UAAU,yBACb,UAAArC,MAACiZ,EAAA,CACC,MAAM,YACN,MAAO0F,EAAgB,SACvB,SAAWrhB,GACT+B,EAAc,aAAc/B,EAAO,CAAC,WAAYK,EAAS,UAAU,CAAC,EAEtE,IAAK,GACL,IAAK,GACL,KAAK,KACL,WAAY,KAGdqC,MAACqd,EAAA,CACC,MAAM,cACN,MAAO,OAAOsB,EAAgB,UAAU,EACxC,SAAWrhB,GACT+B,EAAc,aAAc,OAAO/B,CAAK,EAAiB,CACvD,WACAK,EACA,aACD,EAEH,QAAS2gB,CAAA,EACX,EACF,EAEAjc,OAAC,OAAI,UAAU,yBACb,UAAArC,MAACiZ,EAAA,CACC,MAAM,cACN,MAAO0F,EAAgB,WACvB,SAAWrhB,GACT+B,EAAc,aAAc/B,EAAO,CAAC,WAAYK,EAAS,YAAY,CAAC,EAExE,IAAK,GACL,IAAK,EACL,KAAM,GACN,KAAK,KACL,WAAY,KAGdqC,MAACiZ,EAAA,CACC,MAAM,iBACN,MAAO0F,EAAgB,cACvB,SAAWrhB,GACT+B,EAAc,aAAc/B,EAAO,CAAC,WAAYK,EAAS,eAAe,CAAC,EAE3E,IAAK,GACL,IAAK,GACL,KAAM,GACN,KAAK,KACL,WAAY,IACd,EACF,EAEAqC,MAACqd,EAAA,CACC,MAAM,iBACN,MAAOsB,EAAgB,cACvB,SAAWrhB,GACT+B,EAAc,aAAc/B,EAAwB,CAClD,WACAK,EACA,gBACD,EAEH,QAAS4gB,CAAA,EACX,EACF,IAvFM5gB,CAyFV,CAEJ,CAAC,GACH,EAGDod,IAAc,WACb1Y,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,6BAAiB,EAEnDA,MAACqc,GAAA,CACC,MAAM,cACN,MAAO9e,EAAW,OAAO,WACzB,SAAWD,GACT+B,EAAc,aAAc/B,EAAO,CAAC,SAAU,YAAY,CAAC,EAE7D,YAAY,iDAGd0C,MAACiZ,EAAA,CACC,MAAM,YACN,MAAO1b,EAAW,OAAO,SACzB,SAAWD,GACT+B,EAAc,aAAc/B,EAAO,CAAC,SAAU,UAAU,CAAC,EAE3D,IAAK,GACL,IAAK,GACL,KAAK,KACL,WAAY,GACZ,YAAY,qBAGd0C,MAACqd,EAAA,CACC,MAAM,cACN,MAAO,OAAO9f,EAAW,OAAO,UAAU,EAC1C,SAAWD,GACT+B,EAAc,aAAc,OAAO/B,CAAK,EAAiB,CAAC,SAAU,YAAY,CAAC,EAEnF,QAASghB,EACT,YAAY,uBAGdte,MAACiZ,EAAA,CACC,MAAM,iBACN,MAAO1b,EAAW,OAAO,cACzB,SAAWD,GACT+B,EAAc,aAAc/B,EAAO,CAAC,SAAU,eAAe,CAAC,EAEhE,IAAK,EACL,IAAK,EACL,KAAM,GACN,KAAK,KACL,WAAY,GACZ,YAAY,sCAGd0C,MAACqd,EAAA,CACC,MAAM,iBACN,MAAO9f,EAAW,OAAO,cACzB,SAAWD,GACT+B,EAAc,aAAc/B,EAAwB,CAAC,SAAU,eAAe,CAAC,EAEjF,QAASihB,EACT,YAAY,8BACd,EACF,EAIFlc,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,mBAAO,EACzCqC,OAAC,OAAI,UAAU,2BACb,UAAArC,MAAC,MAAG,MAAO,CACT,WAAYzC,EAAW,SAAS,GAAG,WACnC,SAAU,GAAGA,EAAW,SAAS,GAAG,SAAS,OAAO,KACpD,WAAYA,EAAW,SAAS,GAAG,WACnC,WAAYA,EAAW,SAAS,GAAG,WAAW,QAC9C,cAAe,GAAGA,EAAW,SAAS,GAAG,cAAc,OAAO,KAC9D,cAAeA,EAAW,SAAS,GAAG,eACrC,6BAEH,EACAyC,MAAC,MAAG,MAAO,CACT,WAAYzC,EAAW,SAAS,GAAG,WACnC,SAAU,GAAGA,EAAW,SAAS,GAAG,SAAS,OAAO,KACpD,WAAYA,EAAW,SAAS,GAAG,WACnC,WAAYA,EAAW,SAAS,GAAG,WAAW,QAC9C,cAAe,GAAGA,EAAW,SAAS,GAAG,cAAc,OAAO,KAC9D,cAAeA,EAAW,SAAS,GAAG,eACrC,6BAEH,EACAyC,MAAC,KAAE,MAAO,CACR,WAAYzC,EAAW,SAAS,WAChC,SAAU,GAAGA,EAAW,SAAS,SAAS,OAAO,KACjD,WAAYA,EAAW,SAAS,WAChC,WAAYA,EAAW,SAAS,WAAW,QAC3C,cAAe,GAAGA,EAAW,SAAS,cAAc,OAAO,KAC3D,cAAeA,EAAW,SAAS,eAClC,wKAGH,EACAyC,MAAC,UAAO,MAAO,CACb,WAAYzC,EAAW,OAAO,WAC9B,SAAU,GAAGA,EAAW,OAAO,SAAS,OAAO,KAC/C,WAAYA,EAAW,OAAO,WAC9B,cAAe,GAAGA,EAAW,OAAO,cAAc,OAAO,KACzD,cAAeA,EAAW,OAAO,cACjC,QAAS,YACT,WAAYd,EAAS,OAAO,aAC5B,MAAO,OACP,OAAQ,OACR,aAAc,MACd,OAAQ,WACP,0BAEH,GACF,GACF,GACF,CAEJ,ECjWamiB,GAA6B,IAAM,CAC9C,KAAM,CAAE,SAAAniB,EAAU,cAAA4C,CAAA,EAAkBe,EAAA,EAC9B5C,EAAYf,EAAS,UACrBgB,EAAUhB,EAAS,QAEnB,CAACse,EAAWC,CAAY,EAAI/M,EAAM,SAAkC,WAAW,EAQ/E4Q,EAAuB,CAC3B,CAAE,MAAO,aAAc,MAAO,cAC9B,CAAE,MAAO,eAAgB,MAAO,gBAChC,CAAE,MAAO,gBAAiB,MAAO,iBACjC,CAAE,MAAO,gBAAiB,MAAO,gBAAgB,EAGnD,OACExc,OAAC,OAAI,UAAU,kCACb,UAAArC,MAAC,OAAI,UAAU,sBAAsB,kBAAM,EAG3CqC,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,UACC,QAAS,IAAM2Y,EAAa,WAAW,EACvC,UAAW,aAAaD,IAAc,YAAc,SAAW,EAAE,GAEjE,UAAA/a,MAAC8e,GAAA,CAAO,KAAM,GAAI,EAAE,eAGtBzc,OAAC,UACC,QAAS,IAAM2Y,EAAa,SAAS,EACrC,UAAW,aAAaD,IAAc,UAAY,SAAW,EAAE,GAE/D,UAAA/a,MAAC+e,GAAA,CAAY,KAAM,GAAI,EAAE,YAE3B,EACF,EAEChE,IAAc,YACb1Y,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,4BAAgB,EAElDqC,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,wBAAY,EACnDqC,OAAC,OAAI,UAAU,uBACb,UAAAA,OAAC,UACC,QAAS,IAAMhD,EAAc,YAAa,QAAS,CAAC,QAAQ,CAAC,EAC7D,UAAW,uBAAuB7B,EAAU,SAAW,QAAU,WAAa,EAAE,GAEhF,UAAAwC,MAAC,OAAI,UAAU,2BACb,eAACgf,GAAA,CAAO,KAAM,GAAI,EACpB,EACAhf,MAAC,QAAK,UAAU,4BAA4B,iBAAK,KAGnDqC,OAAC,UACC,QAAS,IAAMhD,EAAc,YAAa,aAAc,CAAC,QAAQ,CAAC,EAClE,UAAW,uBAAuB7B,EAAU,SAAW,aAAe,WAAa,EAAE,GAErF,UAAAwC,MAAC,OAAI,UAAU,2BACb,eAACif,GAAA,CAAS,KAAM,GAAI,EACtB,EACAjf,MAAC,QAAK,UAAU,4BAA4B,sBAAU,KAGxDqC,OAAC,UACC,QAAS,IAAMhD,EAAc,YAAa,QAAS,CAAC,QAAQ,CAAC,EAC7D,UAAW,uBAAuB7B,EAAU,SAAW,QAAU,WAAa,EAAE,GAEhF,UAAAwC,MAAC,OAAI,UAAU,2BACb,eAAC8e,GAAA,CAAO,KAAM,GAAI,EACpB,EACA9e,MAAC,QAAK,UAAU,4BAA4B,iBAAK,IACnD,EACF,EACAA,MAAC,KAAE,UAAU,4BAA4B,+EAEzC,GACF,EAECxC,EAAU,SAAW,cACpBwC,MAACiZ,EAAA,CACC,MAAM,kBACN,MAAOzb,EAAU,MACjB,SAAWF,GAAU+B,EAAc,YAAa/B,EAAO,CAAC,OAAO,CAAC,EAChE,IAAK,IACL,IAAK,KACL,KAAK,KACL,WAAY,GACZ,YAAY,0CACd,EAEJ,EAGA+E,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,6BAAiB,EAEnDqC,OAAC,OAAI,UAAU,4BACb,UAAArC,MAAC,OAAI,UAAU,0BACb,SAAAA,MAAC,QAAK,UAAU,yBAAyB,mBAAO,EAClD,EAEAqC,OAAC,OAAI,UAAU,yBACb,UAAArC,MAACiZ,EAAA,CACC,MAAM,MACN,MAAO,CACL,QAASzb,EAAU,QAAQ,QAAQ,IACnC,OAAQA,EAAU,QAAQ,OAAO,IACjC,OAAQA,EAAU,QAAQ,OAAO,KAEnC,SAAWF,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,YAAa6f,EAAK,CAAC,UAAW,UAAW,KAAK,CAAC,EACzD,OAAO5hB,GAAU,WACnB+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,UAAW,SAAU,KAAK,CAAC,EACrE+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,UAAW,SAAU,KAAK,CAAC,EAEzE,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,KAGd0C,MAACiZ,EAAA,CACC,MAAM,SACN,MAAO,CACL,QAASzb,EAAU,QAAQ,QAAQ,OACnC,OAAQA,EAAU,QAAQ,OAAO,OACjC,OAAQA,EAAU,QAAQ,OAAO,QAEnC,SAAWF,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,YAAa6f,EAAK,CAAC,UAAW,UAAW,QAAQ,CAAC,EAC5D,OAAO5hB,GAAU,WACnB+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,UAAW,SAAU,QAAQ,CAAC,EACxE+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,UAAW,SAAU,QAAQ,CAAC,EAE5E,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,IACd,EACF,EAEA+E,OAAC,OAAI,UAAU,yBACb,UAAArC,MAACiZ,EAAA,CACC,MAAM,OACN,MAAO,CACL,QAASzb,EAAU,QAAQ,QAAQ,KACnC,OAAQA,EAAU,QAAQ,OAAO,KACjC,OAAQA,EAAU,QAAQ,OAAO,MAEnC,SAAWF,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,YAAa6f,EAAK,CAAC,UAAW,UAAW,MAAM,CAAC,EAC1D,OAAO5hB,GAAU,WACnB+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,UAAW,SAAU,MAAM,CAAC,EACtE+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,UAAW,SAAU,MAAM,CAAC,EAE1E,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,KAGd0C,MAACiZ,EAAA,CACC,MAAM,QACN,MAAO,CACL,QAASzb,EAAU,QAAQ,QAAQ,MACnC,OAAQA,EAAU,QAAQ,OAAO,MACjC,OAAQA,EAAU,QAAQ,OAAO,OAEnC,SAAWF,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,YAAa6f,EAAK,CAAC,UAAW,UAAW,OAAO,CAAC,EAC3D,OAAO5hB,GAAU,WACnB+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,UAAW,SAAU,OAAO,CAAC,EACvE+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,UAAW,SAAU,OAAO,CAAC,EAE3E,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,IACd,EACF,GACF,EAEA+E,OAAC,OAAI,UAAU,4BACb,UAAArC,MAAC,OAAI,UAAU,0BACb,SAAAA,MAAC,QAAK,UAAU,yBAAyB,kBAAM,EACjD,EAEAqC,OAAC,OAAI,UAAU,yBACb,UAAArC,MAACiZ,EAAA,CACC,MAAM,MACN,MAAO,CACL,QAASzb,EAAU,OAAO,QAAQ,IAClC,OAAQA,EAAU,OAAO,OAAO,IAChC,OAAQA,EAAU,OAAO,OAAO,KAElC,SAAWF,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,YAAa6f,EAAK,CAAC,SAAU,UAAW,KAAK,CAAC,EACxD,OAAO5hB,GAAU,WACnB+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,SAAU,SAAU,KAAK,CAAC,EACpE+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,SAAU,SAAU,KAAK,CAAC,EAExE,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,KAGd0C,MAACiZ,EAAA,CACC,MAAM,SACN,MAAO,CACL,QAASzb,EAAU,OAAO,QAAQ,OAClC,OAAQA,EAAU,OAAO,OAAO,OAChC,OAAQA,EAAU,OAAO,OAAO,QAElC,SAAWF,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,YAAa6f,EAAK,CAAC,SAAU,UAAW,QAAQ,CAAC,EAC3D,OAAO5hB,GAAU,WACnB+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,SAAU,SAAU,QAAQ,CAAC,EACvE+B,EAAc,YAAa/B,EAAM,OAAQ,CAAC,SAAU,SAAU,QAAQ,CAAC,EAE3E,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,IACd,EACF,GACF,GACF,GACF,EAEA+E,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,0BAAc,EAEhDA,MAACqd,EAAA,CACC,MAAM,mBACN,MAAO5f,EAAQ,OACf,SAAWH,GAAU+B,EAAc,UAAW/B,EAAO,CAAC,QAAQ,CAAC,EAC/D,QAASuhB,EACT,YAAY,wCAGbphB,EAAQ,SAAW,cAClB4E,OAAAM,WAAA,CACE,UAAA3C,MAACiZ,EAAA,CACC,MAAM,gBACN,MAAOxb,EAAQ,MACf,SAAWH,GAAU+B,EAAc,UAAW/B,EAAO,CAAC,OAAO,CAAC,EAC9D,IAAK,GACL,IAAK,GACL,KAAK,IACL,WAAY,GACZ,YAAY,mDAGd0C,MAACiZ,EAAA,CACC,MAAM,cACN,MAAOxb,EAAQ,IACf,SAAWH,GAAU+B,EAAc,UAAW/B,EAAO,CAAC,KAAK,CAAC,EAC5D,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,GACZ,YAAY,qCACd,EACF,GAEJ,EAGCG,EAAQ,SAAW,cAClB4E,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,+BAAmB,EAErDA,MAAC,KAAE,UAAU,4BAA4B,iHAGzC,EAEAA,MAAC,OAAI,UAAU,kBAAkB,2HAGjC,GACF,GAEJ,EAIFqC,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,0BAAc,EAChDA,MAAC,OAAI,UAAU,uBACb,eAAC,OAAI,UAAU,iCAAiC,MAAO,CACrD,SAAUxC,EAAU,SAAW,aAAe,OAAS,GAAGA,EAAU,MAAM,OAAO,KACjF,OAAQ,SACR,QAAS,GAAGA,EAAU,QAAQ,QAAQ,GAAG,MAAMA,EAAU,QAAQ,QAAQ,KAAK,MAAMA,EAAU,QAAQ,QAAQ,MAAM,MAAMA,EAAU,QAAQ,QAAQ,IAAI,MAExJ,SAAA6E,OAAC,OAAI,UAAU,+BAA+B,MAAO,CACnD,QAAS,OACT,IAAK5E,EAAQ,SAAW,aAAe,GAAGA,EAAQ,IAAI,OAAO,KAAO,EACpE,cAAeA,EAAQ,SAAW,eAAiB,cAAgB,OAEnE,UAAAuC,MAAC,OAAI,UAAU,4BAA4B,MAAO,CAChD,KAAMvC,EAAQ,SAAW,aAAe,OAAO,IAAMA,EAAQ,MAAM,OAAO,IAAM,WAChF,WAAY,UACZ,QAAS,OACT,aAAc,MACd,UAAW,SACV,wBAEH,EACCA,EAAQ,SAAW,oBACjB,OAAI,UAAU,+BAA+B,MAAO,CACnD,KAAM,OAAOA,EAAQ,MAAM,OAAO,IAClC,WAAY,UACZ,QAAS,OACT,aAAc,MACd,UAAW,SACV,mBAEH,GAEJ,EACF,EACF,GACF,GACF,CAEJ,EC3Va0hB,GAAgC,IAAM,CACjD,KAAM,CAAE,SAAA1iB,EAAU,cAAA4C,CAAA,EAAkBe,EAAA,EAC9BxC,EAASnB,EAAS,OAElB,CAACse,EAAWC,CAAY,EAAI/M,EAAM,SAAoD,SAAS,EAE/FmR,EAAgB,CACpB,CAAE,MAAO,uBAAwB,MAAO,oCACxC,CAAE,MAAO,uBAAwB,MAAO,sCACxC,CAAE,MAAO,uBAAwB,MAAO,mCAAmC,EAGvEC,EAAmB,CACvB,CAAE,MAAO,OAAQ,MAAO,QACxB,CAAE,MAAO,SAAU,MAAO,UAC1B,CAAE,MAAO,QAAS,MAAO,QAAQ,EAG7BC,EAAiB,CACrB,CAAE,MAAO,OAAQ,MAAO,mBACxB,CAAE,MAAO,SAAU,MAAO,cAC1B,CAAE,MAAO,UAAW,MAAO,WAC3B,CAAE,MAAO,OAAQ,MAAO,QACxB,CAAE,MAAO,aAAc,MAAO,cAC9B,CAAE,MAAO,cAAe,MAAO,cAAc,EAG/C,OACEjd,OAAC,OAAI,UAAU,+BACb,UAAArC,MAAC,OAAI,UAAU,sBAAsB,kBAAM,EAG3CqC,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,UACC,QAAS,IAAM2Y,EAAa,SAAS,EACrC,UAAW,aAAaD,IAAc,UAAY,SAAW,EAAE,GAE/D,UAAA/a,MAACuf,GAAA,CAAK,KAAM,GAAI,EAAE,aAGpBld,OAAC,UACC,QAAS,IAAM2Y,EAAa,SAAS,EACrC,UAAW,aAAaD,IAAc,UAAY,SAAW,EAAE,GAE/D,UAAA/a,MAACwf,GAAA,CAAY,KAAM,GAAI,EAAE,oBAG3Bnd,OAAC,UACC,QAAS,IAAM2Y,EAAa,OAAO,EACnC,UAAW,aAAaD,IAAc,QAAU,SAAW,EAAE,GAE7D,UAAA/a,MAACyf,GAAA,CAAe,KAAM,GAAI,EAAE,kBAG9Bpd,OAAC,UACC,QAAS,IAAM2Y,EAAa,OAAO,EACnC,UAAW,aAAaD,IAAc,QAAU,SAAW,EAAE,GAE7D,UAAA/a,MAACyf,GAAA,CAAe,KAAM,GAAI,EAAE,iBAE9B,EACF,EAEC1E,IAAc,WACb1Y,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,yBAAa,EAE/CA,MAACqd,EAAA,CACC,MAAM,gBACN,MAAOzf,EAAO,OACd,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAQ,CAAC,EAC9D,QAAS8hB,EACT,YAAY,sCACd,EACF,EAEA/c,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,2BAAe,EAEjDA,MAACya,EAAA,CACC,MAAM,gBACN,MAAO7c,EAAO,OACd,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAQ,CAAC,EAC9D,YAAY,uCAGd0C,MAACya,EAAA,CACC,MAAM,qBACN,MAAO7c,EAAO,kBACd,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,mBAAmB,CAAC,EACzE,YAAY,uCACd,EACF,GACF,EAGDyd,IAAc,WACb/a,MAAA2C,WAAA,CAEE,SAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,0BAAc,EAEhDA,MAACiZ,EAAA,CACC,MAAM,gBACN,MAAOrb,EAAO,QAAQ,OACtB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,UAAW,QAAQ,CAAC,EACzE,IAAK,GACL,IAAK,IACL,KAAK,KACL,WAAY,GACZ,YAAY,sCAGd0C,MAAC2a,EAAA,CACC,MAAM,mBACN,MAAO/c,EAAO,QAAQ,WACtB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,UAAW,YAAY,CAAC,EAC7E,YAAY,oCAGd0C,MAACqd,EAAA,CACC,MAAM,iBACN,MAAOzf,EAAO,QAAQ,cACtB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,UAAW,eAAe,CAAC,EAChF,QAAS+hB,EACT,YAAY,oCACd,EACF,EACF,EAGDtE,IAAc,SACb/a,MAAA2C,WAAA,CAEE,SAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,wBAAY,EAE9CA,MAACya,EAAA,CACC,MAAM,sBACN,MAAO7c,EAAO,MAAM,QACpB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAS,SAAS,CAAC,EACxE,YAAY,2DAGbM,EAAO,MAAM,SACZyE,OAAAM,WAAA,CACE,UAAA3C,MAACiZ,EAAA,CACC,MAAM,SACN,MAAOrb,EAAO,MAAM,OACpB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAS,QAAQ,CAAC,EACvE,IAAK,GACL,IAAK,IACL,KAAK,KACL,WAAY,KAGd0C,MAAC2a,EAAA,CACC,MAAM,mBACN,MAAO/c,EAAO,MAAM,WACpB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAS,YAAY,CAAC,IAG7E+E,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,4BAAgB,EACvDA,MAAC,KAAE,UAAU,4BAA4B,kEAEzC,EACAA,MAAC,OAAI,UAAU,uBACZ,WAAe,MAAM,EAAG,CAAC,EAAE,IAAK4d,GAC/Bvb,OAAC,SAAyB,UAAU,uBAClC,UAAArC,MAAC,SACC,KAAK,WACL,QAASpC,EAAO,MAAM,QAAQ,SAASggB,EAAO,KAAY,EAC1D,SAAWnU,GAAM,CACf,MAAMiW,EAAajW,EAAE,OAAO,QACxB,CAAC,GAAG7L,EAAO,MAAM,QAASggB,EAAO,KAAK,EACtChgB,EAAO,MAAM,QAAQ,OAAO0O,GAAKA,IAAMsR,EAAO,KAAK,EACvDve,EAAc,SAAUqgB,EAAY,CAAC,QAAS,SAAS,CAAC,CAC1D,IAED9B,EAAO,QAXEA,EAAO,KAYnB,CACD,EACH,GACF,GACF,GAEJ,EACF,EAGD7C,IAAc,SACb/a,MAAA2C,WAAA,CAEE,SAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,wBAAY,EAE9CA,MAACya,EAAA,CACC,MAAM,sBACN,MAAO7c,EAAO,MAAM,QACpB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAS,SAAS,CAAC,EACxE,YAAY,2DAGbM,EAAO,MAAM,SACZyE,OAAAM,WAAA,CACE,UAAA3C,MAACiZ,EAAA,CACC,MAAM,SACN,MAAOrb,EAAO,MAAM,OACpB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAS,QAAQ,CAAC,EACvE,IAAK,GACL,IAAK,IACL,KAAK,KACL,WAAY,KAGd0C,MAAC2a,EAAA,CACC,MAAM,mBACN,MAAO/c,EAAO,MAAM,WACpB,SAAWN,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAS,YAAY,CAAC,IAG7E+E,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,4BAAgB,EACvDA,MAAC,KAAE,UAAU,4BAA4B,kEAEzC,EACAA,MAAC,OAAI,UAAU,uBACZ,UAACsf,EAAe,CAAC,EAAGA,EAAe,CAAC,EAAGA,EAAe,CAAC,EAAGA,EAAe,CAAC,CAAC,EAAE,IAAK1B,GACjFvb,OAAC,SAAyB,UAAU,uBAClC,UAAArC,MAAC,SACC,KAAK,WACL,QAASpC,EAAO,MAAM,QAAQ,SAASggB,EAAO,KAAY,EAC1D,SAAWnU,GAAM,CACf,MAAMiW,EAAajW,EAAE,OAAO,QACxB,CAAC,GAAG7L,EAAO,MAAM,QAASggB,EAAO,KAAK,EACtChgB,EAAO,MAAM,QAAQ,OAAO0O,GAAKA,IAAMsR,EAAO,KAAK,EACvDve,EAAc,SAAUqgB,EAAY,CAAC,QAAS,SAAS,CAAC,CAC1D,IAED9B,EAAO,QAXEA,EAAO,KAYnB,CACD,EACH,GACF,GACF,GAEJ,EACF,EAIFvb,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,0BAAc,EAChDqC,OAAC,OAAI,UAAU,uBACZ,UAAAzE,EAAO,MAAM,SACZyE,OAAC,OACC,UAAU,6BACV,MAAO,CACL,OAAQ,GAAGzE,EAAO,MAAM,OAAO,OAAO,KACtC,WAAYA,EAAO,MAAM,WACzB,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,SAAU,OACV,MAAO,WAEV,4BACiBA,EAAO,MAAM,QAAQ,KAAK,IAAI,GAAK,gBAIvDyE,OAAC,OACC,UAAU,+BACV,MAAO,CACL,OAAQ,GAAGzE,EAAO,QAAQ,OAAO,OAAO,KACxC,WAAYA,EAAO,QAAQ,WAC3B,QAAS,OACT,WAAY,SACZ,QAAS,SACT,UAAWA,EAAO,MAAM,QAAU,oBAAsB,OACxD,aAAcA,EAAO,MAAM,QAAU,oBAAsB,QAG7D,UAAAoC,MAAC,OAAI,MAAO,CAAE,KAAM,GAClB,SAAAA,MAAC,OAAI,MAAO,CACV,MAAO,QACP,OAAQ,OACR,WAAY,UACZ,aAAc,OACb,EACL,EACAA,MAAC,OAAI,MAAO,CACV,KAAM,EACN,UAAWpC,EAAO,QAAQ,cAC1B,SAAU,OACV,MAAO,WACN,2BAEH,KAGDA,EAAO,MAAM,SACZyE,OAAC,OACC,UAAU,6BACV,MAAO,CACL,OAAQ,GAAGzE,EAAO,MAAM,OAAO,OAAO,KACtC,WAAYA,EAAO,MAAM,WACzB,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,SAAU,OACV,MAAO,WAEV,4BACiBA,EAAO,MAAM,QAAQ,KAAK,IAAI,GAAK,eACrD,EAEJ,GACF,GACF,CAEJ,ECpUa+hB,GAA0B,IAAM,CAC3C,KAAM,CAAE,SAAAljB,EAAU,cAAA4C,CAAA,EAAkBe,EAAA,EAC9BtC,EAASrB,EAAS,OAElB,CAACse,EAAWC,CAAY,EAAI/M,EAAM,SAA+B,SAAS,EAE1E2R,EAAsB,CAC1B,CAAE,MAAO,kBAAmB,MAAO,4BACnC,CAAE,MAAO,kBAAmB,MAAO,gCACnC,CAAE,MAAO,kBAAmB,MAAO,8BAA8B,EAG7DC,EAAyB,CAC7B,CAAE,MAAO,WAAY,MAAO,oCAC5B,CAAE,MAAO,WAAY,MAAO,2BAA2B,EAGzD,OACExd,OAAC,OAAI,UAAU,+BACb,UAAArC,MAAC,OAAI,UAAU,sBAAsB,kBAAM,EAG3CqC,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,UACC,QAAS,IAAM2Y,EAAa,SAAS,EACrC,UAAW,aAAaD,IAAc,UAAY,SAAW,EAAE,GAE/D,UAAA/a,MAAC8f,GAAA,CAAK,KAAM,GAAI,EAAE,oBAGpBzd,OAAC,UACC,QAAS,IAAM2Y,EAAa,QAAQ,EACpC,UAAW,aAAaD,IAAc,SAAW,SAAW,EAAE,GAE9D,UAAA/a,MAACwe,GAAA,CAAK,KAAM,GAAI,EAAE,eAEpB,EACF,EAECzD,IAAc,UACb1Y,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,0BAAc,EAEhDA,MAACya,EAAA,CACC,MAAM,wBACN,MAAO3c,EAAO,QAAQ,QACtB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,UAAW,SAAS,CAAC,EAC1E,YAAY,uCAGbQ,EAAO,QAAQ,SACduE,OAAAM,WAAA,CACE,UAAA3C,MAACqd,EAAA,CACC,MAAM,gBACN,MAAOvf,EAAO,OACd,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,QAAQ,CAAC,EAC9D,QAASsiB,EACT,YAAY,gCAGd5f,MAACiZ,EAAA,CACC,MAAM,oBACN,MAAOnb,EAAO,QAAQ,QACtB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,UAAW,SAAS,CAAC,EAC1E,IAAK,EACL,IAAK,EACL,KAAM,EACN,WAAY,GACZ,YAAY,6BAGd0C,MAAC2a,EAAA,CACC,MAAM,mBACN,MAAO7c,EAAO,QAAQ,WACtB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,UAAW,YAAY,CAAC,EAC7E,YAAY,oCAGd0C,MAAC2a,EAAA,CACC,MAAM,aACN,MAAO7c,EAAO,QAAQ,UACtB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,UAAW,WAAW,CAAC,EAC5E,YAAY,8BAGd0C,MAAC2a,EAAA,CACC,MAAM,aACN,MAAO7c,EAAO,QAAQ,UACtB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,UAAW,WAAW,CAAC,EAC5E,SAAU,GACV,YAAY,6BACd,EACF,GAEJ,EAECQ,EAAO,QAAQ,SACduE,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,+BAAmB,EAErDqC,OAAC,OAAI,UAAU,yBACb,UAAArC,MAACiZ,EAAA,CACC,MAAM,cACN,MAAO,CACL,QAASnb,EAAO,QAAQ,QAAQ,QAAQ,IACxC,OAAQA,EAAO,QAAQ,QAAQ,OAAO,IACtC,OAAQA,EAAO,QAAQ,QAAQ,OAAO,KAExC,SAAWR,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,SAAU6f,EAAK,CAAC,UAAW,UAAW,UAAW,KAAK,CAAC,EACjE,OAAO5hB,GAAU,WACnB+B,EAAc,SAAU/B,EAAM,OAAQ,CAAC,UAAW,UAAW,SAAU,KAAK,CAAC,EAC7E+B,EAAc,SAAU/B,EAAM,OAAQ,CAAC,UAAW,UAAW,SAAU,KAAK,CAAC,EAEjF,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,KAGd0C,MAACiZ,EAAA,CACC,MAAM,iBACN,MAAO,CACL,QAASnb,EAAO,QAAQ,QAAQ,QAAQ,OACxC,OAAQA,EAAO,QAAQ,QAAQ,OAAO,OACtC,OAAQA,EAAO,QAAQ,QAAQ,OAAO,QAExC,SAAWR,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,SAAU6f,EAAK,CAAC,UAAW,UAAW,UAAW,QAAQ,CAAC,EACpE,OAAO5hB,GAAU,WACnB+B,EAAc,SAAU/B,EAAM,OAAQ,CAAC,UAAW,UAAW,SAAU,QAAQ,CAAC,EAChF+B,EAAc,SAAU/B,EAAM,OAAQ,CAAC,UAAW,UAAW,SAAU,QAAQ,CAAC,EAEpF,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,IACd,EACF,GACF,GAEJ,EAEA+E,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,sBAAU,EAE5CA,MAACya,EAAA,CACC,MAAM,oBACN,MAAO3c,EAAO,UAAU,QACxB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,YAAa,SAAS,CAAC,EAC5E,YAAY,yCAGbQ,EAAO,UAAU,SAChBuE,OAAAM,WAAA,CACE,UAAA3C,MAACqd,EAAA,CACC,MAAM,oBACN,MAAOvf,EAAO,UAAU,OACxB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,YAAa,QAAQ,CAAC,EAC3E,QAASuiB,EACT,YAAY,6BAGdxd,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,0BAAc,EACrDA,MAAC,YACC,MAAOlC,EAAO,UAAU,SACxB,SAAW2L,GAAMpK,EAAc,SAAUoK,EAAE,OAAO,MAAO,CAAC,YAAa,UAAU,CAAC,EAClF,UAAU,iBACV,YAAY,4CACZ,KAAM,IAERzJ,MAAC,QAAK,UAAU,4BAA4B,gDAE5C,GACF,EAEClC,EAAO,UAAU,SAAW,YAC3BuE,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,iCAAqB,EAC5DA,MAAC,SACC,KAAK,OACL,MAAOlC,EAAO,UAAU,SACxB,SAAW2L,GAAMpK,EAAc,SAAUoK,EAAE,OAAO,MAAO,CAAC,YAAa,UAAU,CAAC,EAClF,UAAU,mBACV,YAAY,sCAEdzJ,MAAC,QAAK,UAAU,4BAA4B,oDAE5C,GACF,EAGFA,MAAC2a,EAAA,CACC,MAAM,mBACN,MAAO7c,EAAO,UAAU,WACxB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,YAAa,YAAY,CAAC,EAC/E,YAAY,gCAGd0C,MAAC2a,EAAA,CACC,MAAM,aACN,MAAO7c,EAAO,UAAU,UACxB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,YAAa,WAAW,CAAC,EAC9E,YAAY,0BAGd0C,MAAC2a,EAAA,CACC,MAAM,aACN,MAAO7c,EAAO,UAAU,UACxB,SAAWR,GAAU+B,EAAc,SAAU/B,EAAO,CAAC,YAAa,WAAW,CAAC,EAC9E,SAAU,GACV,YAAY,yBACd,EACF,GAEJ,EAECQ,EAAO,UAAU,SAChBuE,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,8BAAkB,EAEpDqC,OAAC,OAAI,UAAU,yBACb,UAAArC,MAACiZ,EAAA,CACC,MAAM,cACN,MAAO,CACL,QAASnb,EAAO,UAAU,QAAQ,QAAQ,IAC1C,OAAQA,EAAO,UAAU,QAAQ,OAAO,IACxC,OAAQA,EAAO,UAAU,QAAQ,OAAO,KAE1C,SAAWR,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,SAAU6f,EAAK,CAAC,YAAa,UAAW,UAAW,KAAK,CAAC,EACnE,OAAO5hB,GAAU,WACnB+B,EAAc,SAAU/B,EAAM,OAAQ,CAAC,YAAa,UAAW,SAAU,KAAK,CAAC,EAC/E+B,EAAc,SAAU/B,EAAM,OAAQ,CAAC,YAAa,UAAW,SAAU,KAAK,CAAC,EAEnF,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,KAGd0C,MAACiZ,EAAA,CACC,MAAM,iBACN,MAAO,CACL,QAASnb,EAAO,UAAU,QAAQ,QAAQ,OAC1C,OAAQA,EAAO,UAAU,QAAQ,OAAO,OACxC,OAAQA,EAAO,UAAU,QAAQ,OAAO,QAE1C,SAAWR,GAAU,CACnB,MAAM4hB,EAAM,OAAO5hB,GAAU,SAAWA,EAAQA,EAAM,QACtD+B,EAAc,SAAU6f,EAAK,CAAC,YAAa,UAAW,UAAW,QAAQ,CAAC,EACtE,OAAO5hB,GAAU,WACnB+B,EAAc,SAAU/B,EAAM,OAAQ,CAAC,YAAa,UAAW,SAAU,QAAQ,CAAC,EAClF+B,EAAc,SAAU/B,EAAM,OAAQ,CAAC,YAAa,UAAW,SAAU,QAAQ,CAAC,EAEtF,EACA,IAAK,EACL,IAAK,IACL,KAAK,KACL,WAAY,IACd,EACF,GACF,GAEJ,EAIF+E,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,0BAAc,EAChDqC,OAAC,OAAI,UAAU,uBACZ,UAAAvE,EAAO,QAAQ,SACdkC,MAAC,OACC,UAAU,+BACV,MAAO,CACL,WAAYlC,EAAO,QAAQ,WAC3B,MAAOA,EAAO,QAAQ,UACtB,QAAS,GAAGA,EAAO,QAAQ,QAAQ,QAAQ,GAAG,WAAWA,EAAO,QAAQ,QAAQ,QAAQ,MAAM,MAGhG,SAAAkC,MAAC,OACC,MAAO,CACL,QAAS,OACT,oBAAqB,UAAUlC,EAAO,QAAQ,QAAQ,OAAO,SAC7D,IAAK,QAGN,eAAM,KAAK,CAAE,OAAQA,EAAO,QAAQ,QAAQ,SAAW,CAACiiB,EAAGzhB,IAC1D+D,OAAC,OAEC,MAAO,CACL,WAAY,wBACZ,QAAS,OACT,aAAc,MACd,UAAW,OACX,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,SAAU,OACV,QAAS,IAEZ,oBACS/D,EAAI,IAbPA,CAAA,CAeR,GACH,GAIHR,EAAO,UAAU,SAChBkC,MAAC,OACC,UAAU,8BACV,MAAO,CACL,WAAYlC,EAAO,UAAU,WAC7B,MAAOA,EAAO,UAAU,UACxB,QAAS,GAAGA,EAAO,UAAU,QAAQ,QAAQ,GAAG,WAAWA,EAAO,UAAU,QAAQ,QAAQ,MAAM,KAClG,UAAWA,EAAO,QAAQ,QAAU,kCAAoC,QAGzE,SAAAA,EAAO,UAAU,SAAW,kBAC1B,OAAI,MAAO,CAAE,QAAS,OAAQ,eAAgB,gBAAiB,WAAY,UAC1E,UAAAkC,MAAC,OAAI,MAAO,CAAE,SAAU,QACrB,SAAAlC,EAAO,UAAU,UAAY,sBAChC,EACAkC,MAAC,OAAI,MAAO,CAAE,SAAU,QACrB,SAAAlC,EAAO,UAAU,UAAY,kBAChC,GACF,EAEAkC,MAAC,OAAI,MAAO,CAAE,UAAW,SAAU,SAAU,QAC1C,SAAAlC,EAAO,UAAU,UAAY,sBAChC,GAEJ,EAEJ,GACF,GACF,CAEJ,EC/VakiB,GAAyB,IAAM,CAC1C,KAAM,CAAE,MAAA7hB,EAAO,YAAA8hB,EAAa,cAAAtf,CAAA,EAAkBV,EAAA,EACxC,CAAC8a,EAAWC,CAAY,EAAI9Z,WAA8B,QAAQ,EAClE,CAACgf,EAAYC,CAAa,EAAIjf,WAAS,EAAE,EACzC,CAACkf,EAAQC,CAAS,EAAInf,WAAS,EAAK,EACpC,CAAC8O,EAAOyI,CAAQ,EAAIvX,WAAwB,IAAI,EAChD,CAACof,EAASC,CAAU,EAAIrf,WAAwB,IAAI,EACpDsf,EAAerhB,SAAyB,IAAI,EAG5CshB,EAAiB,IAAM,CAC3B,MAAMC,EAAU,KAAK,UAAUviB,EAAM,SAAU,KAAM,CAAC,EAChDwiB,EAAU,uCAAyC,mBAAmBD,CAAO,EAE7EE,EAAwB,6BAA6B,IAAI,OAAO,cAAc,MAAM,GAAG,EAAE,CAAC,CAAC,QAE3FC,EAAc,SAAS,cAAc,GAAG,EAC9CA,EAAY,aAAa,OAAQF,CAAO,EACxCE,EAAY,aAAa,WAAYD,CAAqB,EAC1DC,EAAY,QAEZN,EAAW,iCAAiC,EAC5C,WAAW,IAAMA,EAAW,IAAI,EAAG,GAAI,CACzC,EAGMO,EAAkB,SAAY,CAClC,GAAI,CACF,MAAM,UAAU,UAAU,UAAU,KAAK,UAAU3iB,EAAM,SAAU,KAAM,CAAC,CAAC,EAC3EkiB,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,MAAc,CACZ5H,EAAS,6BAA6B,EACtC,WAAW,IAAMA,EAAS,IAAI,EAAG,GAAI,CACvC,CACF,EAGMsI,EAAiB,IAAM,CAC3B,GAAI,CACF,MAAMC,EAAa,KAAK,MAAMd,CAAU,EAGxC,GAAI,CAACc,GAAc,OAAOA,GAAe,SACvC,MAAM,IAAI,MAAM,yBAAyB,EAI3C,MAAMviB,EAAkBlD,GAAA,EAClBwD,EAAiBrD,GAAU+C,EAAiBuiB,CAAU,EAG5DjiB,EAAe,MAAQ,CACrB,GAAGA,EAAe,MAClB,aAAc,IAAI,OAAO,cACzB,QAAS,IAGXkhB,EAAYlhB,CAAc,EAC1BwhB,EAAW,iCAAiC,EAC5CJ,EAAc,EAAE,EAChB,WAAW,IAAMI,EAAW,IAAI,EAAG,GAAI,CACzC,MAAc,CACZ9H,EAAS,uDAAuD,EAChE,WAAW,IAAMA,EAAS,IAAI,EAAG,GAAI,CACvC,CACF,EAGM7B,EAAoBjX,GAA+C,CACvE,MAAMyT,EAAOzT,EAAM,OAAO,QAAQ,CAAC,EACnC,GAAI,CAACyT,EAAM,OAEX,MAAM6N,EAAS,IAAI,WACnBA,EAAO,OAAUxX,GAAM,CACrB,MAAM8I,EAAU9I,EAAE,QAAQ,OAC1B0W,EAAc5N,CAAO,EACrBgO,EAAW,8CAA8C,EACzD,WAAW,IAAMA,EAAW,IAAI,EAAG,GAAI,CACzC,EACAU,EAAO,QAAU,IAAM,CACrBxI,EAAS,qBAAqB,EAC9B,WAAW,IAAMA,EAAS,IAAI,EAAG,GAAI,CACvC,EACAwI,EAAO,WAAW7N,CAAI,CACxB,EAEA,OACE/Q,OAAC,OAAI,UAAU,sCACb,UAAArC,MAAC,OAAI,UAAU,sBAAsB,oCAAwB,EAG7DqC,OAAC,OAAI,UAAU,aACb,UAAAA,OAAC,UACC,QAAS,IAAM2Y,EAAa,QAAQ,EACpC,UAAW,aAAaD,IAAc,SAAW,SAAW,EAAE,GAE9D,UAAA/a,MAACkhB,GAAA,CAAS,KAAM,GAAI,EAAE,YAGxB7e,OAAC,UACC,QAAS,IAAM2Y,EAAa,QAAQ,EACpC,UAAW,aAAaD,IAAc,SAAW,SAAW,EAAE,GAE9D,UAAA/a,MAAC6X,EAAA,CAAO,KAAM,GAAI,EAAE,WAEtB,EACF,EAGC7H,GACC3N,OAAC,OAAI,UAAU,2BACb,UAAArC,MAAC8X,GAAA,CAAY,KAAM,GAAI,EACtB9H,CAAA,EACH,EAGDsQ,GACCje,OAAC,OAAI,UAAU,6BACb,UAAArC,MAACuX,GAAA,CAAM,KAAM,GAAI,EAChB+I,CAAA,EACH,EAGDvF,IAAc,SACb1Y,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,mCAAuB,EACzDA,MAAC,KAAE,UAAU,4BAA4B,2JAGzC,EAEAqC,OAAC,OAAI,UAAU,qBACb,UAAAA,OAAC,UAAO,QAASoe,EAAgB,UAAU,eACzC,UAAAzgB,MAACkhB,GAAA,CAAS,KAAM,GAAI,EAAE,sBAExB,EAEA7e,OAAC,UAAO,QAASye,EAAiB,UAAU,yBACzC,UAAAV,EAASpgB,MAACuX,IAAM,KAAM,GAAI,EAAKvX,MAACmhB,GAAA,CAAK,KAAM,GAAI,EAC/Cf,EAAS,UAAY,qBACxB,GACF,GACF,EAGA/d,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,oCAAwB,EAC1DA,MAAC,OAAI,UAAU,mBACb,gBAAC,OAAK,eAAK,UAAU7B,EAAM,SAAU,KAAM,CAAC,EAAE,MAAM,EAAG,GAAG,EAAE,OAAG,EACjE,EACA6B,MAAC,KAAE,UAAU,kBAAkB,sEAE/B,GACF,GACF,EAEAqC,OAAAM,WAAA,CAEE,UAAAN,OAAC,OAAI,UAAU,sBACb,UAAArC,MAAC,MAAG,UAAU,oBAAoB,2BAAe,EACjDA,MAAC,KAAE,UAAU,4BAA4B,8HAGzC,EAGAqC,OAAC,OAAI,UAAU,uBACb,UAAArC,MAAC,SACC,IAAKwgB,EACL,KAAK,OACL,OAAO,yBACP,SAAU5J,EACV,MAAO,CAAE,QAAS,OAAO,GAG3BvU,OAAC,UACC,QAAS,IAAMme,EAAa,SAAS,QACrC,UAAU,yBAEV,UAAAxgB,MAAC6X,EAAA,CAAO,KAAM,GAAI,EAAE,qBAEtB,EACF,EAGAxV,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC,SAAM,UAAU,sBAAsB,8BAAkB,EACzDA,MAAC,YACC,MAAOkgB,EACP,SAAWzW,GAAM0W,EAAc1W,EAAE,OAAO,KAAK,EAC7C,UAAU,iBACV,YAAY,mCACZ,KAAM,GACN,MAAO,CAAE,WAAY,YAAa,SAAU,OAAO,EACrD,EACF,EAEApH,OAAC,OAAI,UAAU,qBACb,UAAAA,OAAC,UACC,QAAS0e,EACT,SAAU,CAACb,EACX,UAAU,eAEV,UAAAlgB,MAAC6X,EAAA,CAAO,KAAM,GAAI,EAAE,qBAItB7X,MAAC,UACC,QAAS,IAAM,CACbmgB,EAAc,EAAE,EAChB1H,EAAS,IAAI,EACb8H,EAAW,IAAI,CACjB,EACA,UAAU,yBACX,kBAED,EACF,GACF,EAGAle,OAAC,OAAI,UAAU,sBACb,UAAAA,OAAC,OAAI,UAAU,kBAAkB,gBAC5BrC,MAAC,UAAO,oBAAQ,EAAS,wJAE9B,QAEC,UAAO,QAASW,EAAe,UAAU,yBAAyB,qCAEnE,GACF,GACF,GAEJ,CAEJ,ECpNMygB,GAKD,CAAC,CAAE,QAAAvf,EAAS,SAAAC,EAAU,WAAAjD,EAAY,cAAAwiB,KAAoB,CACzD,KAAM,CAACC,EAAezW,CAAgB,EAAI3J,WAAgC,IAAI,EACxE,CAAE,QAAAa,EAAS,KAAAC,EAAM,KAAAC,EAAM,SAAAxF,EAAU,SAAAkF,CAAA,EAAavB,EAAA,EAGpD2Q,GAAqB,CACnB,OAAQ,SAAY,CAClB,MAAMsQ,EAAc5kB,CAAQ,CAC9B,EACA,OAAQuF,EACR,OAAQC,EACR,QAAAJ,EACA,QAASF,CAAA,CACV,EAGDlC,YAAU,IAAM,CACd,MAAM8hB,EAAgB9X,GAAqB,CACzC,GAAIA,EAAE,MAAQ,SAAU,CAKtB,GAHI,OAAO,SAAa,KAAgB,SAAiB,mBAGrD1H,GAEE,CADO,OAAO,QAAQ,6BAA6B,EAC9C,OAEXF,EAAA,CACF,CACF,EAEA,gBAAS,iBAAiB,UAAW0f,CAAY,EAC1C,IAAM,SAAS,oBAAoB,UAAWA,CAAY,CACnE,EAAG,CAAC1f,EAASE,CAAO,CAAC,EAGrBtC,YAAU,IAAM,CACd,MAAM+hB,EAAsB/X,GAAyB,CAC9C1H,IACL0H,EAAE,iBAEFA,EAAE,YAAc,GAClB,EACA,cAAO,iBAAiB,eAAgB+X,CAAkB,EACnD,IAAM,OAAO,oBAAoB,eAAgBA,CAAkB,CAC5E,EAAG,CAACzf,CAAO,CAAC,EAGZtC,YAAU,KACR,SAAS,KAAK,MAAM,SAAW,SACxB,IAAM,CACX,SAAS,KAAK,MAAM,SAAW,EACjC,GACC,EAAE,EAEL,MAAMgiB,EAAuB,IAAM,CACjC,GAAI,CAACH,EACH,OACEjf,OAAC,OAAI,UAAU,wBACb,UAAArC,MAAC,MAAG,uCAA2B,EAC/BA,MAAC,KAAE,gFAAoE,SACtE,MACC,UAAAqC,OAAC,MAAG,gBAAGrC,MAAC,UAAO,kBAAM,EAAS,yCAAqC,SAClE,MAAG,gBAAGA,MAAC,UAAO,sBAAU,EAAS,gCAA4B,SAC7D,MAAG,gBAAGA,MAAC,UAAO,kBAAM,EAAS,2CAAuC,SACpE,MAAG,gBAAGA,MAAC,UAAO,kBAAM,EAAS,8BAA0B,SACvD,MAAG,gBAAGA,MAAC,UAAO,kBAAM,EAAS,2CAAuC,SACpE,MAAG,gBAAGA,MAAC,UAAO,gBAAI,EAAS,6CAAyC,GACvE,GACF,EAKJ,OAAQshB,EAAA,CACN,IAAK,eACH,aAAQ3F,GAAA,EAAoB,EAC9B,IAAK,SACH,aAAQG,GAAA,EAAc,EACxB,IAAK,aACH,aAAQqC,GAAA,EAAkB,EAC5B,IAAK,YACH,aAAQS,GAAA,EAAiB,EAC3B,IAAK,SACH,aAAQO,GAAA,EAAoB,EAC9B,IAAK,SACH,aAAQQ,GAAA,EAAc,EACxB,IAAK,UACH,aAAQf,GAAA,EAAiB,EAC3B,IAAK,OACH,aAAQA,GAAA,EAAiB,EAC3B,IAAK,YACH,aAAQoB,GAAA,EAAa,EACvB,QACE,OAAOhgB,MAAC,OAAI,6BAAiB,EAEnC,EAEA,OACEqC,OAAC,OAAI,UAAU,gBACb,UAAArC,MAAC4B,GAAA,CAAiB,QAAAC,EAAkB,SAAAC,EAAoB,EAExDO,OAAC,OAAI,UAAU,qBACb,UAAArC,MAAC0K,GAAA,CACC,YAAa4W,EACb,cAAezW,CAAA,GAIhByW,SACE,OAAI,UAAU,8BACZ,aACH,EAGFthB,MAACwO,GAAA,CACC,IAAK3P,CAAA,EACP,EACF,GACF,CAEJ,EAGa6iB,GAAkD,CAAC,CAC9D,QAAA7f,EACA,gBAAAjD,EACA,WAAAC,EAAa,IACb,SAAAiD,EAAW,eACX,OAAA6f,CACF,IAAM,CACJ,MAAMxf,EAAa,MAAO1F,GAAsC,CAC9D,GAAIklB,EACF,MAAMA,EAAOllB,CAAQ,MAGrB,IAAI,EACe,MAAMmlB,GAAW,IAAI,KAAK,qCAAsC,CAC/E,QAAS,UACT,SAAAnlB,CAAA,CACD,GAEY,MAAM,SACjB2U,EAAM,QAAQ,6BAA6B,CAE/C,OAASpB,EAAY,CACnBoB,QAAM,MAAMpB,GAAO,UAAU,MAAM,SAAW,yBAAyB,EACjEA,CACR,CAEJ,EAEA,OACEhQ,MAACtB,GAAA,CACC,gBAAAE,EACA,WAAAC,EACA,cAAe,CACb,OAAQsD,EACR,gBAAiB,CAAC5C,EAASjC,IAAU,CAErC,EACA,eAAiBwC,GAAW,CAE5B,EACA,QAAS,IAAM,CAEf,GAGF,SAAAE,MAACohB,GAAA,CACC,QAAAvf,EACA,SAAAC,EACA,WAAAjD,EACA,cAAesD,CAAA,EACjB,EAGN,EChNM0f,GAAsB,IAAM,CAChC,MAAMC,EAAWC,GAAA,EACX,CAAE,MAAAC,EAAO,KAAAC,CAAA,EAASC,GAAA,EAGxBziB,YAAU,KACR,SAAS,KAAK,UAAU,IAAI,uBAAuB,EACnDuiB,EAAM,WAAW,EAEV,IAAM,CACX,SAAS,KAAK,UAAU,OAAO,uBAAuB,EACtDC,EAAA,CACF,GACC,CAACD,EAAOC,CAAI,CAAC,EAEhB,MAAME,EAAc,IAAM,CACxBL,EAAS,QAAQ,CACnB,EAEM3f,EAAa,MAAO1F,GAAkB,CAC1C,GAAI,CAOF,OALiB,MAAMmlB,GAAW,IAAI,KAAK,0BAA2B,CACpE,SAAAnlB,EACA,KAAM,mBACP,GAEY,MAAM,SACjB2U,EAAM,QAAQ,cAAc,EACrB,IAEF,EACT,OAASpB,EAAY,CACnB,MAAMoS,EAAapS,GAAO,UAAU,OAC9BqS,EAAYrS,GAAO,UAAU,MAAM,KAEzC,GAAIoS,IAAe,KAAOA,IAAe,IACnCC,IAAc,0BAChBjR,EAAM,MAAM,0BAA0B,EACtC,WAAW,IAAM,CACf0Q,EAAS,QAAQ,CACnB,EAAG,GAAI,GACEO,IAAc,2BACvBjR,EAAM,MAAM,mBAAmB,EAE/BA,EAAM,MAAM,gBAAgB,MAEzB,CACL,MAAMkR,EAAUtS,GAAO,UAAU,MAAM,SAAW,sBAClDoB,EAAM,MAAMkR,CAAO,CACrB,CACA,MAAO,EACT,CACF,EAEA,OACEtiB,MAAC0hB,GAAA,CACC,QAASS,EACT,WAAsD,OAAO,SAAS,OACtE,SAAS,kBACT,OAAQhgB,CAAA,EAGd","names":["getDefaultSettings","isObject","item","deepMerge","target","source","output","key","getNestedValue","obj","path","current","deepEqual","b","index","keysA","keysB","generateCSS","settings","css","generateColorVariables","generateTypographyVariables","generateSpacingVariables","generateResponsiveCSS","generateHeaderCSS","generateFooterCSS","generateContainerCSS","generateSidebarCSS","generateBlogCSS","vars","colors","value","typography","container","sidebar","tag","heading","header","siteIdentity","footer","blog","CustomizerContext","createContext","customizerReducer","state","action","updatedSettings","i","newHistory","newIndex","defaultSettings","CustomizerProvider","children","initialSettings","previewUrl","eventHandlers","mergedSettings","dispatch","useReducer","previewIframeRef","useRef","lastSettingsRef","updateSetting","useCallback","section","iframe","useEffect","handleMessage","event","saveSettings","publishSettings","device","url","jsx","useCustomizer","context","useContext","useCustomizerState","options","debounceMs","autoSave","autoSaveInterval","contextUpdateSetting","contextSetPreviewDevice","resetSettings","contextUndo","contextRedo","canUndo","canRedo","lastSaved","setLastSaved","useState","isSaving","setIsSaving","debounceTimerRef","autoSaveTimerRef","previousSettingsRef","getSetting","sectionSettings","resetSection","resetAll","CustomizerHeader","onClose","siteName","isDirty","undo","redo","requestClose","handleSave","handlePublish","jsxs","X","ArrowLeft","Undo","Redo","Eye","Fragment","RefreshCw","Save","type","isObject_1","freeGlobal","_freeGlobal","require$$0","freeSelf","root","_root","now","now_1","reWhitespace","trimmedEndIndex","string","_trimmedEndIndex","reTrimStart","baseTrim","_baseTrim","Symbol","_Symbol","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","isOwn","unmasked","result","_getRawTag","objectToString","_objectToString","require$$1","require$$2","nullTag","undefinedTag","baseGetTag","_baseGetTag","isObjectLike","isObjectLike_1","symbolTag","isSymbol","isSymbol_1","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","toNumber","other","isBinary","toNumber_1","FUNC_ERROR_TEXT","nativeMax","nativeMin","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","debounce_1","searchIndex","EnhancedSearch","onSelect","className","query","setQuery","isExpanded","setIsExpanded","selectedIndex","setSelectedIndex","recentSearches","setRecentSearches","inputRef","debouncedSearch","useMemo","searchQuery","searchResults","a","lowerQuery","terms","t","score","term","keyword","handleKeyDown","e","prev","handleSelect","sectionId","newRecent","s","highlightMatch","text","regex","parts","part","Search","Clock","search","TrendingUp","Tag","panels","CustomizerSidebar","activePanel","onPanelSelect","setActiveSection","expandedPanels","setExpandedPanels","setSearchQuery","currentView","setCurrentView","currentSection","setCurrentSection","togglePanel","panelId","id","handlePanelClick","panel","handleBackClick","filterPanels","matchesSearch","filteredChildren","filteredPanels","renderPanel","level","hasChildren","isActive","ChevronRight","child","p","c","ChevronLeft","cn","classes","Card","forwardRef","props","ref","_jsx","CardHeader","CardTitle","CardDescription","CardContent","CardFooter","getVariantClasses","variant","getSizeClasses","size","Button","Alert","AlertTitle","AlertDescription","Input","Label","badgeVariants","Badge","Textarea","React","Select","Tabs","TabsList","TabsTrigger","TabsContent","deviceSizes","EnhancedPreview","onLoad","setPreviewDevice","iframeRef","containerRef","loadingState","setLoadingState","errorMessage","setErrorMessage","isFullscreen","setIsFullscreen","scale","setScale","retryCount","setRetryCount","loadTimeoutRef","cssUpdateTimeoutRef","previewDevice","currentUrl","injectCSS","doc","styleEl","handleIframeLoad","handleIframeError","error","handleDeviceChange","viewport","toggleFullscreen","refreshPreview","renderLoadingOverlay","Loader2","AlertTriangle","ExternalLink","Shield","Monitor","Tablet","Smartphone","Minimize2","Maximize2","useKeyboardShortcuts","handlers","searchInputRef","isProcessing","isInInput","toast","searchInput","showShortcutsHelp","sectionIndex","shortcuts","overlay","modal","close","handleEsc","style","ContentApi","page","pageSize","filters","params","unifiedApi","post","ids","data","content","postId","revisionId","pageId","hierarchical","category","categories","fromId","toId","folderId","files","_onProgress","formData","file","folder","group","template","menu","title","slug","excludeId","types","formatFileSize","bytes","k","sizes","MediaSelector","isOpen","multiple","acceptedTypes","selectedItems","maxSelection","selectedFiles","setSelectedFiles","viewMode","setViewMode","setFilters","showUploader","setShowUploader","uploadProgress","setUploadProgress","isUploading","setIsUploading","previewItem","setPreviewItem","loadMoreRef","inView","useInView","scrollRef","transformMediaFile","fetchNextPage","hasNextPage","isFetchingNextPage","isLoading","refetch","useInfiniteQuery","pageParam","lastPage","pagination","handleConfirmSelection","handleSelectAll","allFiles","selectedFileObjects","handleFileSelect","fileId","fileIds","updateFilter","onDrop","acceptedFiles","handleFileUpload","getRootProps","getInputProps","isDragActive","useDropzone","acc","uploadItems","progressInterval","renderMediaItem","isSelected","Play","Check","UploadModal","PreviewModal","Grid3X3","List","input","Upload","AlertCircle","FileImage","AstraImageUploader","label","onChange","description","accept","maxSize","preview","showMediaSelector","setShowMediaSelector","setError","handleMediaSelect","media","selectedMedia","urlWithTimestamp","handleRemove","handleButtonClick","ImageIcon","AstraSlider","min","max","step","unit","responsive","defaultUnit","currentDevice","selectedUnit","setSelectedUnit","linkedDevices","setLinkedDevices","units","getCurrentValue","handleChange","newValue","getMaxValue","getStep","renderDeviceControls","responsiveValue","currentValue","maxValue","stepValue","u","AstraToggle","disabled","AstraColorPicker","hasHover","clearable","setIsOpen","activeTab","setActiveTab","pickerRef","colorState","handleColorChange","color","handleClear","colorPalette","handleClickOutside","renderColorInput","currentColor","Pipette","SiteIdentitySection","logoTab","setLogoTab","ColorsSection","Droplet","Palette","newPalette","newKey","GOOGLE_FONTS","FONT_CATEGORIES","GoogleFontSelector","showPreview","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","loadedFonts","setLoadedFonts","filteredFonts","fonts","font","loadGoogleFont","fontName","link","getFontFamily","handleMouseEnter","AstraSelect","placeholder","searchable","selectRef","normalizedOptions","opt","groupedOptions","option","filteredOptions","currentLabel","optionValue","renderOptions","groupOptions","ChevronDown","TypographySection","expandedHeading","setExpandedHeading","fontWeightOptions","textTransformOptions","Type","Heading","MousePointer","headingSettings","ContainerSection","sidebarLayoutOptions","Layout","SidebarIcon","Square","Maximize","val","HeaderLayoutSection","layoutOptions","alignmentOptions","contentOptions","Menu","AlignCenter","MoreHorizontal","newContent","FooterSection","footerLayoutOptions","bottomBarLayoutOptions","Grid","_","ImportExport","setSettings","importData","setImportData","copied","setCopied","success","setSuccess","fileInputRef","exportSettings","dataStr","dataUri","exportFileDefaultName","linkElement","copyToClipboard","importSettings","parsedData","reader","Download","Copy","AstraCustomizerContent","onSaveHandler","activeSection","handleEscape","handleBeforeUnload","renderSectionContent","AstraCustomizer","onSave","authClient","Customize","navigate","useNavigate","enter","exit","useAdminFullscreen","handleClose","statusCode","errorCode","message"],"ignoreList":[6,7,8,9,10,11,12,13,14,15,16,17,18,19],"sources":["../../src/pages/appearance/astra-customizer/utils/default-settings.ts","../../src/pages/appearance/astra-customizer/utils/deep-merge.ts","../../src/pages/appearance/astra-customizer/utils/css-generator.ts","../../src/pages/appearance/astra-customizer/context/CustomizerContext.tsx","../../src/pages/appearance/astra-customizer/hooks/useCustomizerState.ts","../../src/pages/appearance/astra-customizer/components/layout/CustomizerHeader.tsx","../../../../node_modules/lodash/isObject.js","../../../../node_modules/lodash/_freeGlobal.js","../../../../node_modules/lodash/_root.js","../../../../node_modules/lodash/now.js","../../../../node_modules/lodash/_trimmedEndIndex.js","../../../../node_modules/lodash/_baseTrim.js","../../../../node_modules/lodash/_Symbol.js","../../../../node_modules/lodash/_getRawTag.js","../../../../node_modules/lodash/_objectToString.js","../../../../node_modules/lodash/_baseGetTag.js","../../../../node_modules/lodash/isObjectLike.js","../../../../node_modules/lodash/isSymbol.js","../../../../node_modules/lodash/toNumber.js","../../../../node_modules/lodash/debounce.js","../../src/pages/appearance/astra-customizer/components/EnhancedSearch.tsx","../../src/pages/appearance/astra-customizer/components/layout/CustomizerSidebar.tsx","../../../../packages/ui/dist/index.js","../../src/pages/appearance/astra-customizer/components/layout/EnhancedPreview.tsx","../../src/pages/appearance/astra-customizer/hooks/useKeyboardShortcuts.ts","../../src/api/contentApi.ts","../../src/utils/format.ts","../../src/components/editor/blocks/shared/MediaSelector.tsx","../../src/pages/appearance/astra-customizer/components/controls/AstraImageUploader.tsx","../../src/pages/appearance/astra-customizer/components/controls/AstraSlider.tsx","../../src/pages/appearance/astra-customizer/components/controls/AstraToggle.tsx","../../src/pages/appearance/astra-customizer/components/controls/AstraColorPicker.tsx","../../src/pages/appearance/astra-customizer/sections/global/SiteIdentitySection.tsx","../../src/pages/appearance/astra-customizer/sections/global/ColorsSection.tsx","../../src/pages/appearance/astra-customizer/components/controls/GoogleFontSelector.tsx","../../src/pages/appearance/astra-customizer/components/controls/AstraSelect.tsx","../../src/pages/appearance/astra-customizer/sections/global/TypographySection.tsx","../../src/pages/appearance/astra-customizer/sections/layout/ContainerSection.tsx","../../src/pages/appearance/astra-customizer/sections/header/HeaderLayoutSection.tsx","../../src/pages/appearance/astra-customizer/sections/footer/FooterSection.tsx","../../src/pages/appearance/astra-customizer/components/ImportExport.tsx","../../src/pages/appearance/astra-customizer/AstraCustomizer.tsx","../../src/pages/appearance/Customize.tsx"],"sourcesContent":["import { AstraCustomizerSettings } from '../types/customizer-types';\n\nexport const getDefaultSettings = (): AstraCustomizerSettings => {\n  return {\n    // Site Identity\n    siteIdentity: {\n      logo: {\n        desktop: null,\n        mobile: null,\n        width: {\n          desktop: 200,\n          tablet: 180,\n          mobile: 150,\n        },\n      },\n      siteTitle: {\n        show: true,\n        text: 'O4O Platform',\n        color: {\n          normal: '#000000',\n          hover: '#0073aa',\n        },\n        typography: {\n          fontFamily: 'system-ui, -apple-system, sans-serif',\n          fontSize: { desktop: 30, tablet: 26, mobile: 22 },\n          fontWeight: 700,\n          lineHeight: { desktop: 1.2, tablet: 1.2, mobile: 1.2 },\n          letterSpacing: { desktop: 0, tablet: 0, mobile: 0 },\n          textTransform: 'none',\n        },\n      },\n      tagline: {\n        show: true,\n        text: 'Optimize for Online',\n        color: {\n          normal: '#666666',\n          hover: '#333333',\n        },\n        typography: {\n          fontFamily: 'system-ui, -apple-system, sans-serif',\n          fontSize: { desktop: 14, tablet: 13, mobile: 12 },\n          fontWeight: 400,\n          lineHeight: { desktop: 1.5, tablet: 1.5, mobile: 1.5 },\n          letterSpacing: { desktop: 0, tablet: 0, mobile: 0 },\n          textTransform: 'none',\n        },\n      },\n      favicon: null,\n    },\n    \n    // Global Colors\n    colors: {\n      primaryColor: '#0073aa',\n      secondaryColor: '#ff6b6b',\n      textColor: '#333333',\n      linkColor: {\n        normal: '#0073aa',\n        hover: '#005177',\n      },\n      borderColor: '#dddddd',\n      bodyBackground: '#ffffff',\n      contentBackground: '#ffffff',\n      palette: {\n        color1: '#0073aa',\n        color2: '#ff6b6b',\n        color3: '#4ecdc4',\n        color4: '#f7b731',\n        color5: '#5f27cd',\n        color6: '#00d2d3',\n        color7: '#ff9ff3',\n        color8: '#54a0ff',\n        color9: '#48dbfb',\n      },\n    },\n    \n    // Global Typography\n    typography: {\n      bodyFont: {\n        fontFamily: 'system-ui, -apple-system, sans-serif',\n        fontSize: { desktop: 16, tablet: 15, mobile: 14 },\n        fontWeight: 400,\n        lineHeight: { desktop: 1.65, tablet: 1.6, mobile: 1.5 },\n        letterSpacing: { desktop: 0, tablet: 0, mobile: 0 },\n        textTransform: 'none',\n      },\n      headings: {\n        h1: {\n          fontFamily: 'system-ui, -apple-system, sans-serif',\n          fontSize: { desktop: 48, tablet: 40, mobile: 32 },\n          fontWeight: 700,\n          lineHeight: { desktop: 1.2, tablet: 1.3, mobile: 1.4 },\n          letterSpacing: { desktop: -1, tablet: -0.5, mobile: 0 },\n          textTransform: 'none',\n        },\n        h2: {\n          fontFamily: 'system-ui, -apple-system, sans-serif',\n          fontSize: { desktop: 36, tablet: 32, mobile: 28 },\n          fontWeight: 700,\n          lineHeight: { desktop: 1.3, tablet: 1.3, mobile: 1.4 },\n          letterSpacing: { desktop: -0.5, tablet: 0, mobile: 0 },\n          textTransform: 'none',\n        },\n        h3: {\n          fontFamily: 'system-ui, -apple-system, sans-serif',\n          fontSize: { desktop: 28, tablet: 24, mobile: 22 },\n          fontWeight: 600,\n          lineHeight: { desktop: 1.4, tablet: 1.4, mobile: 1.4 },\n          letterSpacing: { desktop: 0, tablet: 0, mobile: 0 },\n          textTransform: 'none',\n        },\n        h4: {\n          fontFamily: 'system-ui, -apple-system, sans-serif',\n          fontSize: { desktop: 22, tablet: 20, mobile: 18 },\n          fontWeight: 600,\n          lineHeight: { desktop: 1.4, tablet: 1.4, mobile: 1.5 },\n          letterSpacing: { desktop: 0, tablet: 0, mobile: 0 },\n          textTransform: 'none',\n        },\n        h5: {\n          fontFamily: 'system-ui, -apple-system, sans-serif',\n          fontSize: { desktop: 18, tablet: 17, mobile: 16 },\n          fontWeight: 600,\n          lineHeight: { desktop: 1.5, tablet: 1.5, mobile: 1.5 },\n          letterSpacing: { desktop: 0, tablet: 0, mobile: 0 },\n          textTransform: 'none',\n        },\n        h6: {\n          fontFamily: 'system-ui, -apple-system, sans-serif',\n          fontSize: { desktop: 16, tablet: 15, mobile: 14 },\n          fontWeight: 600,\n          lineHeight: { desktop: 1.5, tablet: 1.5, mobile: 1.5 },\n          letterSpacing: { desktop: 0, tablet: 0, mobile: 0 },\n          textTransform: 'none',\n        },\n      },\n      button: {\n        fontFamily: 'system-ui, -apple-system, sans-serif',\n        fontSize: { desktop: 14, tablet: 14, mobile: 13 },\n        fontWeight: 500,\n        lineHeight: { desktop: 1, tablet: 1, mobile: 1 },\n        letterSpacing: { desktop: 0.5, tablet: 0.5, mobile: 0.5 },\n        textTransform: 'uppercase',\n      },\n    },\n    \n    // Container\n    container: {\n      layout: 'boxed',\n      width: {\n        desktop: 1200,\n        tablet: 992,\n        mobile: 544,\n      },\n      padding: {\n        desktop: { top: 0, right: 20, bottom: 0, left: 20 },\n        tablet: { top: 0, right: 20, bottom: 0, left: 20 },\n        mobile: { top: 0, right: 15, bottom: 0, left: 15 },\n      },\n      margin: {\n        desktop: { top: 0, bottom: 0 },\n        tablet: { top: 0, bottom: 0 },\n        mobile: { top: 0, bottom: 0 },\n      },\n    },\n    \n    // Sidebar\n    sidebar: {\n      layout: 'right-sidebar',\n      width: {\n        desktop: 30,\n        tablet: 30,\n        mobile: 100,\n      },\n      gap: {\n        desktop: 30,\n        tablet: 30,\n        mobile: 30,\n      },\n    },\n    \n    // Header\n    header: {\n      layout: 'header-main-layout-1',\n      sticky: false,\n      transparentHeader: false,\n      above: {\n        enabled: false,\n        height: { desktop: 40, tablet: 40, mobile: 40 },\n        background: '#f5f5f5',\n        content: ['menu', 'search'],\n      },\n      primary: {\n        height: { desktop: 80, tablet: 70, mobile: 60 },\n        background: '#ffffff',\n        menuAlignment: 'right',\n      },\n      below: {\n        enabled: false,\n        height: { desktop: 50, tablet: 50, mobile: 50 },\n        background: '#f5f5f5',\n        content: ['breadcrumb'],\n      },\n    },\n    \n    // Footer\n    footer: {\n      layout: 'footer-layout-1',\n      widgets: {\n        enabled: true,\n        columns: { desktop: 4, tablet: 2, mobile: 1 },\n        background: '#333333',\n        textColor: '#ffffff',\n        linkColor: {\n          normal: '#ffffff',\n          hover: '#0073aa',\n        },\n        padding: {\n          desktop: { top: 60, bottom: 60 },\n          tablet: { top: 50, bottom: 50 },\n          mobile: { top: 40, bottom: 40 },\n        },\n      },\n      bottomBar: {\n        enabled: true,\n        layout: 'layout-1',\n        section1: '© 2025 O4O Platform. All rights reserved.',\n        section2: '',\n        background: '#1a1a1a',\n        textColor: '#999999',\n        linkColor: {\n          normal: '#999999',\n          hover: '#ffffff',\n        },\n        padding: {\n          desktop: { top: 20, bottom: 20 },\n          tablet: { top: 20, bottom: 20 },\n          mobile: { top: 15, bottom: 15 },\n        },\n      },\n    },\n    \n    // Blog\n    blog: {\n      archive: {\n        layout: 'blog-layout-1',\n        columns: { desktop: 3, tablet: 2, mobile: 1 },\n        contentWidth: 'default',\n        showFeaturedImage: true,\n        imagePosition: 'top',\n        imageSize: 'medium',\n        meta: {\n          showAuthor: true,\n          showDate: true,\n          showCategory: true,\n          showComments: false,\n          showReadTime: true,\n        },\n        excerpt: {\n          length: 150,\n          readMoreText: 'Read More',\n        },\n      },\n      single: {\n        layout: 'default',\n        showFeaturedImage: true,\n        showBreadcrumb: true,\n        showPostNavigation: true,\n        showAuthorBox: true,\n        showRelatedPosts: true,\n        relatedPostsCount: 3,\n        meta: {\n          showAuthor: true,\n          showDate: true,\n          showCategory: true,\n          showTags: true,\n          showComments: true,\n          showReadTime: true,\n        },\n      },\n    },\n    \n    // Custom CSS\n    customCSS: '',\n    \n    // Meta\n    _meta: {\n      version: '1.0.0',\n      lastModified: new Date().toISOString(),\n      isDirty: false,\n    },\n  };\n};","/**\n * Deep merge utility for combining settings objects\n */\n\nexport function isObject(item: any): item is Record<string, any> {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n\nexport function deepMerge<T extends Record<string, any>>(\n  target: T,\n  source: Partial<T>\n): T {\n  const output = { ...target };\n  \n  if (isObject(target) && isObject(source)) {\n    Object.keys(source).forEach(key => {\n      if (isObject(source[key])) {\n        if (!(key in target)) {\n          Object.assign(output, { [key]: source[key] });\n        } else {\n          output[key as keyof T] = deepMerge(target[key] || {}, source[key] || {});\n        }\n      } else {\n        Object.assign(output, { [key]: source[key] });\n      }\n    });\n  }\n  \n  return output;\n}\n\n/**\n * Get nested property value from object using path\n */\nexport function getNestedValue(obj: any, path: string[]): any {\n  return path.reduce((current, key) => current?.[key], obj);\n}\n\n/**\n * Set nested property value in object using path\n */\nexport function setNestedValue(obj: any, path: string[], value: any): void {\n  const lastKey = path[path.length - 1];\n  const target = path.slice(0, -1).reduce((current, key) => {\n    if (!current[key]) {\n      current[key] = {};\n    }\n    return current[key];\n  }, obj);\n  \n  target[lastKey] = value;\n}\n\n/**\n * Compare two objects deeply\n */\nexport function deepEqual(a: any, b: any): boolean {\n  if (a === b) return true;\n  \n  if (a == null || b == null) return false;\n  \n  if (typeof a !== typeof b) return false;\n  \n  if (typeof a !== 'object') return a === b;\n  \n  if (Array.isArray(a) !== Array.isArray(b)) return false;\n  \n  if (Array.isArray(a)) {\n    if (a.length !== b.length) return false;\n    return a.every((item, index) => deepEqual(item, b[index]));\n  }\n  \n  const keysA = Object.keys(a);\n  const keysB = Object.keys(b);\n  \n  if (keysA.length !== keysB.length) return false;\n  \n  return keysA.every(key => deepEqual(a[key], b[key]));\n}\n\n/**\n * Create a deep clone of an object\n */\nexport function deepClone<T>(obj: T): T {\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  }\n  \n  if (obj instanceof Date) {\n    return new Date(obj.getTime()) as any;\n  }\n  \n  if (Array.isArray(obj)) {\n    return obj.map(item => deepClone(item)) as any;\n  }\n  \n  const cloned = {} as T;\n  Object.keys(obj).forEach(key => {\n    (cloned as any)[key] = deepClone((obj as any)[key]);\n  });\n  \n  return cloned;\n}","import { AstraCustomizerSettings, ResponsiveValue } from '../types/customizer-types';\n\n/**\n * Generate CSS from customizer settings\n */\nexport function generateCSS(settings: AstraCustomizerSettings): string {\n  const css: string[] = [];\n  \n  // Add CSS custom properties (CSS Variables)\n  css.push(':root {');\n  css.push(...generateColorVariables(settings));\n  css.push(...generateTypographyVariables(settings));\n  css.push(...generateSpacingVariables(settings));\n  css.push('}');\n  \n  // Generate responsive CSS\n  css.push(...generateResponsiveCSS(settings));\n  \n  // Generate component-specific CSS\n  css.push(...generateHeaderCSS(settings));\n  css.push(...generateFooterCSS(settings));\n  css.push(...generateContainerCSS(settings));\n  css.push(...generateSidebarCSS(settings));\n  css.push(...generateBlogCSS(settings));\n  \n  // Add custom CSS\n  if (settings.customCSS) {\n    css.push(settings.customCSS);\n  }\n  \n  return css.join('\\n');\n}\n\nfunction generateColorVariables(settings: AstraCustomizerSettings): string[] {\n  const vars: string[] = [];\n  const { colors } = settings;\n  \n  vars.push(`  --ast-primary-color: ${colors.primaryColor};`);\n  vars.push(`  --ast-secondary-color: ${colors.secondaryColor};`);\n  vars.push(`  --ast-text-color: ${colors.textColor};`);\n  vars.push(`  --ast-link-color: ${colors.linkColor.normal};`);\n  vars.push(`  --ast-link-hover-color: ${colors.linkColor.hover || colors.linkColor.normal};`);\n  vars.push(`  --ast-border-color: ${colors.borderColor};`);\n  vars.push(`  --ast-body-bg: ${colors.bodyBackground};`);\n  vars.push(`  --ast-content-bg: ${colors.contentBackground};`);\n  \n  // Palette colors\n  Object.entries(colors.palette).forEach(([key, value]) => {\n    vars.push(`  --ast-palette-${key}: ${value};`);\n  });\n  \n  return vars;\n}\n\nfunction generateTypographyVariables(settings: AstraCustomizerSettings): string[] {\n  const vars: string[] = [];\n  const { typography } = settings;\n  \n  // Body font\n  vars.push(`  --ast-body-font-family: ${typography.bodyFont.fontFamily};`);\n  vars.push(`  --ast-body-font-weight: ${typography.bodyFont.fontWeight};`);\n  vars.push(`  --ast-body-text-transform: ${typography.bodyFont.textTransform};`);\n  \n  // Button font\n  vars.push(`  --ast-button-font-family: ${typography.button.fontFamily};`);\n  vars.push(`  --ast-button-font-weight: ${typography.button.fontWeight};`);\n  vars.push(`  --ast-button-text-transform: ${typography.button.textTransform};`);\n  \n  return vars;\n}\n\nfunction generateSpacingVariables(settings: AstraCustomizerSettings): string[] {\n  const vars: string[] = [];\n  const { container, sidebar } = settings;\n  \n  // Container widths\n  vars.push(`  --ast-container-width-desktop: ${container.width.desktop}px;`);\n  vars.push(`  --ast-container-width-tablet: ${container.width.tablet}px;`);\n  vars.push(`  --ast-container-width-mobile: ${container.width.mobile}px;`);\n  \n  // Sidebar\n  vars.push(`  --ast-sidebar-width-desktop: ${sidebar.width.desktop}%;`);\n  vars.push(`  --ast-sidebar-width-tablet: ${sidebar.width.tablet}%;`);\n  vars.push(`  --ast-sidebar-width-mobile: ${sidebar.width.mobile}%;`);\n  vars.push(`  --ast-sidebar-gap: ${sidebar.gap.desktop}px;`);\n  \n  return vars;\n}\n\nfunction generateResponsiveCSS(settings: AstraCustomizerSettings): string[] {\n  const css: string[] = [];\n  const { typography, container } = settings;\n  \n  // Desktop styles (default)\n  css.push('body {');\n  css.push(`  font-family: ${typography.bodyFont.fontFamily};`);\n  css.push(`  font-size: ${typography.bodyFont.fontSize.desktop}px;`);\n  css.push(`  font-weight: ${typography.bodyFont.fontWeight};`);\n  css.push(`  line-height: ${typography.bodyFont.lineHeight.desktop};`);\n  css.push(`  letter-spacing: ${typography.bodyFont.letterSpacing.desktop}px;`);\n  css.push(`  color: var(--ast-text-color);`);\n  css.push(`  background-color: var(--ast-body-bg);`);\n  css.push('}');\n  \n  // Headings\n  ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].forEach(tag => {\n    const heading = typography.headings[tag as keyof typeof typography.headings];\n    css.push(`${tag} {`);\n    css.push(`  font-family: ${heading.fontFamily};`);\n    css.push(`  font-size: ${heading.fontSize.desktop}px;`);\n    css.push(`  font-weight: ${heading.fontWeight};`);\n    css.push(`  line-height: ${heading.lineHeight.desktop};`);\n    css.push(`  letter-spacing: ${heading.letterSpacing.desktop}px;`);\n    css.push(`  text-transform: ${heading.textTransform};`);\n    css.push('}');\n  });\n  \n  // Links\n  css.push('a {');\n  css.push(`  color: var(--ast-link-color);`);\n  css.push(`  text-decoration: none;`);\n  css.push(`  transition: color 0.2s;`);\n  css.push('}');\n  css.push('a:hover {');\n  css.push(`  color: var(--ast-link-hover-color);`);\n  css.push('}');\n  \n  // Tablet styles\n  css.push('@media (max-width: 992px) {');\n  css.push('  body {');\n  css.push(`    font-size: ${typography.bodyFont.fontSize.tablet}px;`);\n  css.push(`    line-height: ${typography.bodyFont.lineHeight.tablet};`);\n  css.push('  }');\n  \n  ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].forEach(tag => {\n    const heading = typography.headings[tag as keyof typeof typography.headings];\n    css.push(`  ${tag} {`);\n    css.push(`    font-size: ${heading.fontSize.tablet}px;`);\n    css.push(`    line-height: ${heading.lineHeight.tablet};`);\n    css.push('  }');\n  });\n  css.push('}');\n  \n  // Mobile styles\n  css.push('@media (max-width: 576px) {');\n  css.push('  body {');\n  css.push(`    font-size: ${typography.bodyFont.fontSize.mobile}px;`);\n  css.push(`    line-height: ${typography.bodyFont.lineHeight.mobile};`);\n  css.push('  }');\n  \n  ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].forEach(tag => {\n    const heading = typography.headings[tag as keyof typeof typography.headings];\n    css.push(`  ${tag} {`);\n    css.push(`    font-size: ${heading.fontSize.mobile}px;`);\n    css.push(`    line-height: ${heading.lineHeight.mobile};`);\n    css.push('  }');\n  });\n  css.push('}');\n  \n  return css;\n}\n\nfunction generateHeaderCSS(settings: AstraCustomizerSettings): string[] {\n  const css: string[] = [];\n  const { header, siteIdentity } = settings;\n  \n  css.push('.ast-header {');\n  css.push(`  background: ${header.primary.background};`);\n  css.push(`  height: ${header.primary.height.desktop}px;`);\n  if (header.sticky) {\n    css.push('  position: sticky;');\n    css.push('  top: 0;');\n    css.push('  z-index: 999;');\n  }\n  css.push('}');\n  \n  // Site title\n  if (siteIdentity.siteTitle.show) {\n    css.push('.site-title {');\n    css.push(`  color: ${siteIdentity.siteTitle.color.normal};`);\n    css.push(`  font-family: ${siteIdentity.siteTitle.typography.fontFamily};`);\n    css.push(`  font-size: ${siteIdentity.siteTitle.typography.fontSize.desktop}px;`);\n    css.push(`  font-weight: ${siteIdentity.siteTitle.typography.fontWeight};`);\n    css.push('}');\n    css.push('.site-title:hover {');\n    css.push(`  color: ${siteIdentity.siteTitle.color.hover};`);\n    css.push('}');\n  }\n  \n  // Logo\n  if (siteIdentity.logo.desktop) {\n    css.push('.site-logo img {');\n    css.push(`  max-width: ${siteIdentity.logo.width.desktop}px;`);\n    css.push('}');\n  }\n  \n  // Menu alignment\n  css.push('.ast-primary-menu {');\n  css.push(`  text-align: ${header.primary.menuAlignment};`);\n  css.push('}');\n  \n  return css;\n}\n\nfunction generateFooterCSS(settings: AstraCustomizerSettings): string[] {\n  const css: string[] = [];\n  const { footer } = settings;\n  \n  // Footer widgets\n  if (footer.widgets.enabled) {\n    css.push('.ast-footer-widgets {');\n    css.push(`  background: ${footer.widgets.background};`);\n    css.push(`  color: ${footer.widgets.textColor};`);\n    css.push(`  padding-top: ${footer.widgets.padding.desktop.top}px;`);\n    css.push(`  padding-bottom: ${footer.widgets.padding.desktop.bottom}px;`);\n    css.push('}');\n    \n    css.push('.ast-footer-widgets a {');\n    css.push(`  color: ${footer.widgets.linkColor.normal};`);\n    css.push('}');\n    css.push('.ast-footer-widgets a:hover {');\n    css.push(`  color: ${footer.widgets.linkColor.hover};`);\n    css.push('}');\n    \n    css.push('.ast-footer-widget-area {');\n    css.push('  display: grid;');\n    css.push(`  grid-template-columns: repeat(${footer.widgets.columns.desktop}, 1fr);`);\n    css.push('  gap: 30px;');\n    css.push('}');\n  }\n  \n  // Bottom bar\n  if (footer.bottomBar.enabled) {\n    css.push('.ast-footer-bottom {');\n    css.push(`  background: ${footer.bottomBar.background};`);\n    css.push(`  color: ${footer.bottomBar.textColor};`);\n    css.push(`  padding-top: ${footer.bottomBar.padding.desktop.top}px;`);\n    css.push(`  padding-bottom: ${footer.bottomBar.padding.desktop.bottom}px;`);\n    css.push('}');\n    \n    css.push('.ast-footer-bottom a {');\n    css.push(`  color: ${footer.bottomBar.linkColor.normal};`);\n    css.push('}');\n    css.push('.ast-footer-bottom a:hover {');\n    css.push(`  color: ${footer.bottomBar.linkColor.hover};`);\n    css.push('}');\n  }\n  \n  return css;\n}\n\nfunction generateContainerCSS(settings: AstraCustomizerSettings): string[] {\n  const css: string[] = [];\n  const { container } = settings;\n  \n  css.push('.ast-container {');\n  \n  if (container.layout === 'boxed') {\n    css.push(`  max-width: ${container.width.desktop}px;`);\n    css.push('  margin: 0 auto;');\n  } else if (container.layout === 'full-width') {\n    css.push('  width: 100%;');\n    css.push('  max-width: 100%;');\n  } else if (container.layout === 'fluid') {\n    css.push('  width: 100%;');\n    css.push(`  max-width: ${container.width.desktop}px;`);\n    css.push('  margin: 0 auto;');\n  }\n  \n  css.push(`  padding-left: ${container.padding.desktop.left}px;`);\n  css.push(`  padding-right: ${container.padding.desktop.right}px;`);\n  css.push('}');\n  \n  // Responsive container\n  css.push('@media (max-width: 992px) {');\n  css.push('  .ast-container {');\n  css.push(`    max-width: ${container.width.tablet}px;`);\n  css.push(`    padding-left: ${container.padding.tablet.left}px;`);\n  css.push(`    padding-right: ${container.padding.tablet.right}px;`);\n  css.push('  }');\n  css.push('}');\n  \n  css.push('@media (max-width: 576px) {');\n  css.push('  .ast-container {');\n  css.push(`    max-width: ${container.width.mobile}px;`);\n  css.push(`    padding-left: ${container.padding.mobile.left}px;`);\n  css.push(`    padding-right: ${container.padding.mobile.right}px;`);\n  css.push('  }');\n  css.push('}');\n  \n  return css;\n}\n\nfunction generateSidebarCSS(settings: AstraCustomizerSettings): string[] {\n  const css: string[] = [];\n  const { sidebar } = settings;\n  \n  if (sidebar.layout !== 'no-sidebar') {\n    css.push('.ast-content-area {');\n    css.push('  display: flex;');\n    css.push(`  gap: ${sidebar.gap.desktop}px;`);\n    css.push('}');\n    \n    css.push('.ast-primary-content {');\n    css.push(`  flex: 1 1 ${100 - sidebar.width.desktop}%;`);\n    css.push('}');\n    \n    css.push('.ast-sidebar {');\n    css.push(`  flex: 0 0 ${sidebar.width.desktop}%;`);\n    css.push('}');\n    \n    if (sidebar.layout === 'left-sidebar') {\n      css.push('.ast-sidebar {');\n      css.push('  order: -1;');\n      css.push('}');\n    }\n    \n    // Responsive\n    css.push('@media (max-width: 768px) {');\n    css.push('  .ast-content-area {');\n    css.push('    flex-direction: column;');\n    css.push('  }');\n    css.push('  .ast-sidebar {');\n    css.push('    flex: 0 0 100%;');\n    css.push('  }');\n    css.push('}');\n  }\n  \n  return css;\n}\n\nfunction generateBlogCSS(settings: AstraCustomizerSettings): string[] {\n  const css: string[] = [];\n  const { blog } = settings;\n  \n  // Archive layout\n  css.push('.ast-blog-archive {');\n  css.push('  display: grid;');\n  css.push(`  grid-template-columns: repeat(${blog.archive.columns.desktop}, 1fr);`);\n  css.push('  gap: 30px;');\n  css.push('}');\n  \n  css.push('@media (max-width: 992px) {');\n  css.push('  .ast-blog-archive {');\n  css.push(`    grid-template-columns: repeat(${blog.archive.columns.tablet}, 1fr);`);\n  css.push('  }');\n  css.push('}');\n  \n  css.push('@media (max-width: 576px) {');\n  css.push('  .ast-blog-archive {');\n  css.push(`    grid-template-columns: repeat(${blog.archive.columns.mobile}, 1fr);`);\n  css.push('  }');\n  css.push('}');\n  \n  // Single post\n  if (blog.single.layout === 'narrow') {\n    css.push('.ast-single-post {');\n    css.push('  max-width: 720px;');\n    css.push('  margin: 0 auto;');\n    css.push('}');\n  }\n  \n  // Excerpt\n  css.push('.ast-excerpt {');\n  css.push('  display: -webkit-box;');\n  css.push(`  -webkit-line-clamp: ${Math.floor(blog.archive.excerpt.length / 50)};`);\n  css.push('  -webkit-box-orient: vertical;');\n  css.push('  overflow: hidden;');\n  css.push('}');\n  \n  return css;\n}\n\n/**\n * Get responsive value for current device\n */\nexport function getResponsiveValue<T>(\n  value: ResponsiveValue<T> | T,\n  device: 'desktop' | 'tablet' | 'mobile' = 'desktop'\n): T {\n  if (value && typeof value === 'object' && 'desktop' in value) {\n    return (value as ResponsiveValue<T>)[device];\n  }\n  return value as T;\n}","import React, { createContext, useContext, useReducer, useCallback, useEffect, useRef } from 'react';\nimport {\n  AstraCustomizerSettings,\n  PreviewDevice,\n  SaveStatus,\n  SettingSection,\n  DeepPartial,\n  CustomizerMessage,\n  CustomizerEventHandlers,\n} from '../types/customizer-types';\nimport { getDefaultSettings } from '../utils/default-settings';\nimport { deepMerge } from '../utils/deep-merge';\nimport { generateCSS } from '../utils/css-generator';\n\ninterface CustomizerState {\n  settings: AstraCustomizerSettings;\n  previewDevice: PreviewDevice;\n  saveStatus: SaveStatus;\n  activeSection: SettingSection | null;\n  previewUrl: string;\n  isDirty: boolean;\n  history: AstraCustomizerSettings[];\n  historyIndex: number;\n}\n\ntype CustomizerAction =\n  | { type: 'UPDATE_SETTING'; section: SettingSection; value: any; path?: string[] }\n  | { type: 'SET_SETTINGS'; settings: AstraCustomizerSettings }\n  | { type: 'SET_PREVIEW_DEVICE'; device: PreviewDevice }\n  | { type: 'SET_SAVE_STATUS'; status: SaveStatus }\n  | { type: 'SET_ACTIVE_SECTION'; section: SettingSection | null }\n  | { type: 'SET_PREVIEW_URL'; url: string }\n  | { type: 'MARK_DIRTY'; isDirty: boolean }\n  | { type: 'UNDO' }\n  | { type: 'REDO' }\n  | { type: 'ADD_TO_HISTORY'; settings: AstraCustomizerSettings }\n  | { type: 'RESET_TO_DEFAULT' };\n\ninterface CustomizerContextValue {\n  state: CustomizerState;\n  updateSetting: (section: SettingSection, value: any, path?: string[]) => void;\n  setSettings: (settings: AstraCustomizerSettings) => void;\n  setPreviewDevice: (device: PreviewDevice) => void;\n  setActiveSection: (section: SettingSection | null) => void;\n  setPreviewUrl: (url: string) => void;\n  saveSettings: () => Promise<void>;\n  resetSettings: () => void;\n  publishSettings: () => Promise<void>;\n  undo: () => void;\n  redo: () => void;\n  canUndo: boolean;\n  canRedo: boolean;\n  eventHandlers?: CustomizerEventHandlers;\n}\n\nconst CustomizerContext = createContext<CustomizerContextValue | undefined>(undefined);\n\nconst customizerReducer = (state: CustomizerState, action: CustomizerAction): CustomizerState => {\n  switch (action.type) {\n    case 'UPDATE_SETTING': {\n      const updatedSettings = { ...state.settings };\n      \n      if (action.path && action.path.length > 0) {\n        // Navigate to nested property\n        let target: any = updatedSettings[action.section];\n        for (let i = 0; i < action.path.length - 1; i++) {\n          target = target[action.path[i]];\n        }\n        target[action.path[action.path.length - 1]] = action.value;\n      } else {\n        // Direct section update\n        updatedSettings[action.section] = deepMerge(\n          updatedSettings[action.section] as any,\n          action.value as any\n        ) as any;\n      }\n      \n      updatedSettings._meta = {\n        ...updatedSettings._meta,\n        lastModified: new Date().toISOString(),\n        isDirty: true,\n      };\n      \n      return {\n        ...state,\n        settings: updatedSettings,\n        isDirty: true,\n        saveStatus: 'unsaved',\n      };\n    }\n    \n    case 'SET_SETTINGS':\n      return {\n        ...state,\n        settings: action.settings,\n        isDirty: false,\n        saveStatus: 'saved',\n      };\n    \n    case 'SET_PREVIEW_DEVICE':\n      return {\n        ...state,\n        previewDevice: action.device,\n      };\n    \n    case 'SET_SAVE_STATUS':\n      return {\n        ...state,\n        saveStatus: action.status,\n      };\n    \n    case 'SET_ACTIVE_SECTION':\n      return {\n        ...state,\n        activeSection: action.section,\n      };\n    \n    case 'SET_PREVIEW_URL':\n      return {\n        ...state,\n        previewUrl: action.url,\n      };\n    \n    case 'MARK_DIRTY':\n      return {\n        ...state,\n        isDirty: action.isDirty,\n      };\n    \n    case 'ADD_TO_HISTORY': {\n      const newHistory = state.history.slice(0, state.historyIndex + 1);\n      newHistory.push(action.settings);\n      \n      // Keep only last 50 states\n      if (newHistory.length > 50) {\n        newHistory.shift();\n      }\n      \n      return {\n        ...state,\n        history: newHistory,\n        historyIndex: newHistory.length - 1,\n      };\n    }\n    \n    case 'UNDO': {\n      if (state.historyIndex > 0) {\n        const newIndex = state.historyIndex - 1;\n        return {\n          ...state,\n          settings: state.history[newIndex],\n          historyIndex: newIndex,\n          isDirty: true,\n          saveStatus: 'unsaved',\n        };\n      }\n      return state;\n    }\n    \n    case 'REDO': {\n      if (state.historyIndex < state.history.length - 1) {\n        const newIndex = state.historyIndex + 1;\n        return {\n          ...state,\n          settings: state.history[newIndex],\n          historyIndex: newIndex,\n          isDirty: true,\n          saveStatus: 'unsaved',\n        };\n      }\n      return state;\n    }\n    \n    case 'RESET_TO_DEFAULT': {\n      const defaultSettings = getDefaultSettings();\n      return {\n        ...state,\n        settings: defaultSettings,\n        isDirty: true,\n        saveStatus: 'unsaved',\n        history: [defaultSettings],\n        historyIndex: 0,\n      };\n    }\n    \n    default:\n      return state;\n  }\n};\n\ninterface CustomizerProviderProps {\n  children: React.ReactNode;\n  initialSettings?: DeepPartial<AstraCustomizerSettings>;\n  previewUrl?: string;\n  eventHandlers?: CustomizerEventHandlers;\n}\n\nexport const CustomizerProvider: React.FC<CustomizerProviderProps> = ({\n  children,\n  initialSettings,\n  previewUrl = '/',\n  eventHandlers,\n}) => {\n  const defaultSettings = getDefaultSettings();\n  const mergedSettings = initialSettings \n    ? deepMerge(defaultSettings, initialSettings as any)\n    : defaultSettings;\n  \n  const [state, dispatch] = useReducer(customizerReducer, {\n    settings: mergedSettings,\n    previewDevice: 'desktop',\n    saveStatus: 'saved',\n    activeSection: null,\n    previewUrl,\n    isDirty: false,\n    history: [mergedSettings],\n    historyIndex: 0,\n  });\n  \n  const previewIframeRef = useRef<HTMLIFrameElement | null>(null);\n  const lastSettingsRef = useRef(state.settings);\n  \n  // Update setting with history tracking\n  const updateSetting = useCallback((section: SettingSection, value: any, path?: string[]) => {\n    dispatch({ type: 'UPDATE_SETTING', section, value, path });\n    \n    // Add to history after a delay (debounced)\n    setTimeout(() => {\n      if (lastSettingsRef.current !== state.settings) {\n        dispatch({ type: 'ADD_TO_HISTORY', settings: state.settings });\n        lastSettingsRef.current = state.settings;\n      }\n    }, 500);\n    \n    // Special handling for logo updates - force preview refresh\n    if (section === 'siteIdentity' && path && path[0] === 'logo') {\n      setTimeout(() => {\n        const iframe = document.getElementById('customizer-preview-iframe') as HTMLIFrameElement;\n        if (iframe?.contentWindow) {\n          iframe.contentWindow.postMessage(\n            {\n              type: 'update-logo',\n              settings: state.settings\n            },\n            '*'\n          );\n        }\n      }, 100);\n    }\n    \n    // Call event handler if provided\n    eventHandlers?.onSettingChange?.(section, value);\n  }, [state.settings, eventHandlers]);\n  \n  // PostMessage communication with preview iframe\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent<CustomizerMessage>) => {\n      if (event.data.type === 'preview-ready') {\n        // Send initial settings to preview\n        if (previewIframeRef.current?.contentWindow) {\n          const css = generateCSS(state.settings);\n          previewIframeRef.current.contentWindow.postMessage(\n            {\n              type: 'setting-change',\n              payload: { settings: state.settings, css },\n            },\n            '*'\n          );\n        }\n      }\n    };\n    \n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, [state.settings]);\n  \n  // Update preview when settings change\n  useEffect(() => {\n    if (previewIframeRef.current?.contentWindow) {\n      const css = generateCSS(state.settings);\n      previewIframeRef.current.contentWindow.postMessage(\n        {\n          type: 'setting-change',\n          payload: { settings: state.settings, css },\n        },\n        '*'\n      );\n    }\n  }, [state.settings]);\n  \n  // Save settings to backend\n  const saveSettings = useCallback(async () => {\n    dispatch({ type: 'SET_SAVE_STATUS', status: 'saving' });\n    \n    try {\n      await eventHandlers?.onSave?.(state.settings);\n\n      dispatch({ type: 'SET_SAVE_STATUS', status: 'saved' });\n      dispatch({ type: 'MARK_DIRTY', isDirty: false });\n    } catch (error) {\n      dispatch({ type: 'SET_SAVE_STATUS', status: 'error' });\n    }\n  }, [state.settings, eventHandlers]);\n  \n  // Publish settings (save and apply to live site)\n  const publishSettings = useCallback(async () => {\n    dispatch({ type: 'SET_SAVE_STATUS', status: 'saving' });\n    \n    try {\n      // Save as draft first\n      await saveSettings();\n\n      // Then publish - eventHandlers can handle the actual API call\n      await eventHandlers?.onPublish?.(state.settings);\n\n      dispatch({ type: 'SET_SAVE_STATUS', status: 'saved' });\n      dispatch({ type: 'MARK_DIRTY', isDirty: false });\n    } catch (error) {\n      dispatch({ type: 'SET_SAVE_STATUS', status: 'error' });\n    }\n  }, [saveSettings]);\n  \n  const value: CustomizerContextValue = {\n    state,\n    updateSetting,\n    setSettings: (settings) => dispatch({ type: 'SET_SETTINGS', settings }),\n    setPreviewDevice: (device) => {\n      dispatch({ type: 'SET_PREVIEW_DEVICE', device });\n      eventHandlers?.onDeviceChange?.(device);\n    },\n    setActiveSection: (section) => dispatch({ type: 'SET_ACTIVE_SECTION', section }),\n    setPreviewUrl: (url) => dispatch({ type: 'SET_PREVIEW_URL', url }),\n    saveSettings,\n    resetSettings: () => {\n      dispatch({ type: 'RESET_TO_DEFAULT' });\n      eventHandlers?.onReset?.();\n    },\n    publishSettings,\n    undo: () => dispatch({ type: 'UNDO' }),\n    redo: () => dispatch({ type: 'REDO' }),\n    canUndo: state.historyIndex > 0,\n    canRedo: state.historyIndex < state.history.length - 1,\n    eventHandlers,\n  };\n  \n  // Store iframe ref globally for PostMessage\n  useEffect(() => {\n    const iframe = document.querySelector('#customizer-preview-iframe') as HTMLIFrameElement;\n    if (iframe) {\n      previewIframeRef.current = iframe;\n    }\n  }, []);\n  \n  return (\n    <CustomizerContext.Provider value={value}>\n      {children}\n    </CustomizerContext.Provider>\n  );\n};\n\nexport const useCustomizer = () => {\n  const context = useContext(CustomizerContext);\n  if (!context) {\n    throw new Error('useCustomizer must be used within CustomizerProvider');\n  }\n  return context;\n};\n","import { useState, useEffect, useCallback, useRef } from 'react';\nimport { useCustomizer } from '../context/CustomizerContext';\nimport { \n  AstraCustomizerSettings, \n  SettingSection,\n  PreviewDevice,\n  DeepPartial,\n} from '../types/customizer-types';\nimport { deepMerge, deepEqual, getNestedValue, setNestedValue } from '../utils/deep-merge';\n\ninterface UseCustomizerStateOptions {\n  debounceMs?: number;\n  autoSave?: boolean;\n  autoSaveInterval?: number;\n}\n\ninterface UseCustomizerStateReturn {\n  settings: AstraCustomizerSettings;\n  updateSetting: (section: SettingSection, value: any, path?: string[]) => void;\n  getSetting: (section: SettingSection, path?: string[]) => any;\n  resetSection: (section: SettingSection) => void;\n  resetAll: () => void;\n  isDirty: boolean;\n  isSaving: boolean;\n  lastSaved: Date | null;\n  previewDevice: PreviewDevice;\n  setPreviewDevice: (device: PreviewDevice) => void;\n  undo: () => void;\n  redo: () => void;\n  canUndo: boolean;\n  canRedo: boolean;\n}\n\nexport function useCustomizerState(\n  options: UseCustomizerStateOptions = {}\n): UseCustomizerStateReturn {\n  const {\n    debounceMs = 500,\n    autoSave = false,\n    autoSaveInterval = 60000, // 1 minute\n  } = options;\n  \n  const {\n    state,\n    updateSetting: contextUpdateSetting,\n    setPreviewDevice: contextSetPreviewDevice,\n    saveSettings,\n    resetSettings,\n    undo: contextUndo,\n    redo: contextRedo,\n    canUndo,\n    canRedo,\n  } = useCustomizer();\n  \n  const [lastSaved, setLastSaved] = useState<Date | null>(null);\n  const [isSaving, setIsSaving] = useState(false);\n  \n  const debounceTimerRef = useRef<NodeJS.Timeout>();\n  const autoSaveTimerRef = useRef<NodeJS.Timeout>();\n  const previousSettingsRef = useRef<AstraCustomizerSettings>(state.settings);\n  \n  // Debounced update setting\n  const updateSetting = useCallback(\n    (section: SettingSection, value: any, path?: string[]) => {\n      // Clear existing debounce timer\n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current);\n      }\n      \n      // Update immediately in UI\n      contextUpdateSetting(section, value, path);\n      \n      // Debounce the save operation\n      if (autoSave) {\n        debounceTimerRef.current = setTimeout(async () => {\n          setIsSaving(true);\n          try {\n            await saveSettings();\n            setLastSaved(new Date());\n          } finally {\n            setIsSaving(false);\n          }\n        }, debounceMs);\n      }\n    },\n    [contextUpdateSetting, saveSettings, autoSave, debounceMs]\n  );\n  \n  // Get setting value\n  const getSetting = useCallback(\n    (section: SettingSection, path?: string[]) => {\n      const sectionSettings = state.settings[section];\n      \n      if (path && path.length > 0) {\n        return getNestedValue(sectionSettings, path);\n      }\n      \n      return sectionSettings;\n    },\n    [state.settings]\n  );\n  \n  // Reset section to default\n  const resetSection = useCallback(\n    (section: SettingSection) => {\n      import('../utils/default-settings').then(({ getDefaultSettings }) => {\n        const defaultSettings = getDefaultSettings();\n        contextUpdateSetting(section, defaultSettings[section]);\n      });\n    },\n    [contextUpdateSetting]\n  );\n  \n  // Reset all settings\n  const resetAll = useCallback(() => {\n    resetSettings();\n  }, [resetSettings]);\n  \n  // Auto-save timer\n  useEffect(() => {\n    if (autoSave && state.isDirty) {\n      // Clear existing timer\n      if (autoSaveTimerRef.current) {\n        clearTimeout(autoSaveTimerRef.current);\n      }\n      \n      // Set new timer\n      autoSaveTimerRef.current = setTimeout(async () => {\n        if (state.isDirty) {\n          setIsSaving(true);\n          try {\n            await saveSettings();\n            setLastSaved(new Date());\n          } finally {\n            setIsSaving(false);\n          }\n        }\n      }, autoSaveInterval);\n      \n      return () => {\n        if (autoSaveTimerRef.current) {\n          clearTimeout(autoSaveTimerRef.current);\n        }\n      };\n    }\n  }, [autoSave, autoSaveInterval, state.isDirty, saveSettings]);\n  \n  // Track previous settings\n  useEffect(() => {\n    if (!deepEqual(previousSettingsRef.current, state.settings)) {\n      previousSettingsRef.current = state.settings;\n    }\n  }, [state.settings]);\n  \n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current);\n      }\n      if (autoSaveTimerRef.current) {\n        clearTimeout(autoSaveTimerRef.current);\n      }\n    };\n  }, []);\n  \n  return {\n    settings: state.settings,\n    updateSetting,\n    getSetting,\n    resetSection,\n    resetAll,\n    isDirty: state.isDirty,\n    isSaving,\n    lastSaved,\n    previewDevice: state.previewDevice,\n    setPreviewDevice: contextSetPreviewDevice,\n    undo: contextUndo,\n    redo: contextRedo,\n    canUndo,\n    canRedo,\n  };\n}\n\n/**\n * Hook for managing responsive values\n */\nexport function useResponsiveValue<T>(\n  initialValue: T | { desktop: T; tablet: T; mobile: T },\n  onChange?: (value: { desktop: T; tablet: T; mobile: T }) => void\n) {\n  const { state } = useCustomizer();\n  const currentDevice = state.previewDevice;\n  \n  const isResponsive = (v: any): v is { desktop: T; tablet: T; mobile: T } =>\n    !!v && typeof v === 'object' && 'desktop' in v && 'tablet' in v && 'mobile' in v;\n\n  const [responsiveValue, setResponsiveValue] = useState<{ desktop: T; tablet: T; mobile: T }>(() => {\n    if (isResponsive(initialValue)) {\n      return initialValue;\n    }\n    return {\n      desktop: initialValue as T,\n      tablet: initialValue as T,\n      mobile: initialValue as T,\n    };\n  });\n  \n  const updateValue = useCallback(\n    (value: T, device?: PreviewDevice) => {\n      const targetDevice = device || currentDevice;\n      const newValue = {\n        ...responsiveValue,\n        [targetDevice]: value,\n      };\n      \n      setResponsiveValue(newValue);\n      onChange?.(newValue);\n    },\n    [currentDevice, responsiveValue, onChange]\n  );\n  \n  const getCurrentValue = useCallback(() => {\n    return responsiveValue[currentDevice];\n  }, [responsiveValue, currentDevice]);\n  \n  const syncValue = useCallback(\n    (value: T) => {\n      const newValue = {\n        desktop: value,\n        tablet: value,\n        mobile: value,\n      };\n      \n      setResponsiveValue(newValue);\n      onChange?.(newValue);\n    },\n    [onChange]\n  );\n  \n  return {\n    value: responsiveValue,\n    currentValue: getCurrentValue(),\n    updateValue,\n    syncValue,\n    device: currentDevice,\n  };\n}\n\n/**\n * Hook for managing color states (normal/hover)\n */\nexport function useColorState(\n  initialColor: string | { normal: string; hover?: string },\n  onChange?: (color: { normal: string; hover?: string }) => void\n) {\n  const [colorState, setColorState] = useState(() => {\n    if (typeof initialColor === 'object') {\n      return initialColor;\n    }\n    return { normal: initialColor, hover: undefined };\n  });\n  \n  const updateNormal = useCallback(\n    (color: string) => {\n      const newState = { ...colorState, normal: color };\n      setColorState(newState);\n      onChange?.(newState);\n    },\n    [colorState, onChange]\n  );\n  \n  const updateHover = useCallback(\n    (color: string | undefined) => {\n      const newState = { ...colorState, hover: color };\n      setColorState(newState);\n      onChange?.(newState);\n    },\n    [colorState, onChange]\n  );\n  \n  const resetHover = useCallback(() => {\n    updateHover(undefined);\n  }, [updateHover]);\n  \n  return {\n    normal: colorState.normal,\n    hover: colorState.hover,\n    updateNormal,\n    updateHover,\n    resetHover,\n    hasHover: colorState.hover !== undefined,\n  };\n}\n","import React from 'react';\nimport { X, Save, Undo, Redo, Eye, RefreshCw, ArrowLeft } from 'lucide-react';\nimport { useCustomizer } from '../../context/CustomizerContext';\nimport { useCustomizerState } from '../../hooks/useCustomizerState';\n\ninterface CustomizerHeaderProps {\n  onClose: () => void;\n  siteName?: string;\n}\n\nexport const CustomizerHeader: React.FC<CustomizerHeaderProps> = ({\n  onClose,\n  siteName = 'O4O Platform',\n}) => {\n  const { state, saveSettings, publishSettings } = useCustomizer();\n  const { isDirty, isSaving, undo, redo, canUndo, canRedo } = useCustomizerState();\n  \n  const requestClose = () => {\n    if (isDirty) {\n      const ok = window.confirm('변경사항이 저장되지 않았습니다. 종료하시겠습니까?');\n      if (!ok) return;\n    }\n    onClose();\n  };\n\n  const handleSave = async () => {\n    await saveSettings();\n  };\n  \n  const handlePublish = async () => {\n    await publishSettings();\n    // After successful publish, return to admin via onClose\n    onClose();\n  };\n  \n  return (\n    <header className=\"wp-customizer-header\">\n      <div className=\"wp-customizer-title\">\n        <button\n          onClick={onClose}\n          className=\"wp-customizer-close\"\n          title=\"Close Customizer\"\n        >\n          <X size={20} />\n        </button>\n        <div>\n          <h1>Customizing</h1>\n          <span className=\"wp-customizer-site-name\">{siteName}</span>\n        </div>\n      </div>\n      \n      <div className=\"wp-customizer-actions\">\n        {/* Back to Admin */}\n        <button\n          onClick={requestClose}\n          className=\"wp-button wp-button-secondary\"\n          title=\"관리자로 돌아가기\"\n        >\n          <ArrowLeft size={16} style={{ marginRight: 4 }} />\n          관리자로 돌아가기\n        </button>\n        \n        {/* Undo/Redo */}\n        <div className=\"wp-customizer-history\">\n          <button\n            onClick={undo}\n            disabled={!canUndo}\n            className=\"wp-button-icon\"\n            title=\"Undo\"\n          >\n            <Undo size={16} />\n          </button>\n          <button\n            onClick={redo}\n            disabled={!canRedo}\n            className=\"wp-button-icon\"\n            title=\"Redo\"\n          >\n            <Redo size={16} />\n          </button>\n        </div>\n        \n        {/* Preview */}\n        <a\n          href={state.previewUrl}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"wp-button wp-button-secondary\"\n          title=\"Preview in new tab\"\n        >\n          <Eye size={16} style={{ marginRight: 4 }} />\n          Preview\n        </a>\n        \n        {/* Save Status Indicator */}\n        {isDirty && (\n          <span className=\"wp-customizer-status\">\n            {isSaving ? (\n              <>\n                <RefreshCw size={14} className=\"spin\" />\n                Saving...\n              </>\n            ) : (\n              <span className=\"unsaved\">Unsaved changes</span>\n            )}\n          </span>\n        )}\n        \n        {/* Save Draft */}\n        <button\n          onClick={handleSave}\n          disabled={!isDirty || isSaving}\n          className=\"wp-button wp-button-secondary\"\n        >\n          <Save size={16} style={{ marginRight: 4 }} />\n          Save Draft\n        </button>\n        \n        {/* Publish */}\n        <button\n          onClick={handlePublish}\n          disabled={isSaving}\n          className=\"wp-customizer-publish\"\n        >\n          {isSaving ? 'Publishing...' : 'Publish'}\n        </button>\n      </div>\n    </header>\n  );\n};\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","import React, { useState, useMemo, useCallback, useRef, useEffect } from 'react';\nimport { Search, X, Tag, Clock, TrendingUp } from 'lucide-react';\nimport { SettingSection } from '../types/customizer-types';\nimport debounce from 'lodash/debounce';\n\n/**\n * Enhanced Search Component for WordPress-style Customizer\n * Features: keyword search, tags, recent searches, popular settings\n */\n\nexport interface SearchableItem {\n  id: SettingSection;\n  title: string;\n  description: string;\n  keywords: string[];\n  category: 'global' | 'layout' | 'header' | 'footer' | 'content';\n  path: string[];\n  popularity?: number;\n}\n\n// Search index with keywords and metadata\nexport const searchIndex: SearchableItem[] = [\n  {\n    id: 'siteIdentity',\n    title: 'Site Identity',\n    description: 'Logo, Site Title & Tagline',\n    keywords: ['logo', 'title', 'tagline', 'brand', 'identity', 'site name', 'favicon', 'icon'],\n    category: 'global',\n    path: ['Site Identity'],\n    popularity: 95,\n  },\n  {\n    id: 'colors',\n    title: 'Colors',\n    description: 'Base colors, Link colors, Background',\n    keywords: ['color', 'theme', 'palette', 'background', 'text', 'link', 'accent', 'primary', 'secondary'],\n    category: 'global',\n    path: ['Global', 'Colors'],\n    popularity: 90,\n  },\n  {\n    id: 'typography',\n    title: 'Typography',\n    description: 'Body, Headings, Buttons',\n    keywords: ['font', 'text', 'heading', 'h1', 'h2', 'h3', 'paragraph', 'size', 'weight', 'family'],\n    category: 'global',\n    path: ['Global', 'Typography'],\n    popularity: 85,\n  },\n  {\n    id: 'container',\n    title: 'Container',\n    description: 'Layout width and spacing',\n    keywords: ['width', 'container', 'layout', 'spacing', 'padding', 'margin', 'boxed', 'fullwidth'],\n    category: 'layout',\n    path: ['Global', 'Container'],\n    popularity: 70,\n  },\n  {\n    id: 'header',\n    title: 'Header',\n    description: 'Site header layout and styling',\n    keywords: ['header', 'navigation', 'menu', 'top', 'sticky', 'transparent', 'navbar'],\n    category: 'header',\n    path: ['Header'],\n    popularity: 88,\n  },\n  {\n    id: 'footer',\n    title: 'Footer',\n    description: 'Site footer layout and styling',\n    keywords: ['footer', 'bottom', 'widgets', 'copyright', 'credits', 'social'],\n    category: 'footer',\n    path: ['Footer'],\n    popularity: 75,\n  },\n  {\n    id: 'sidebar',\n    title: 'Sidebar',\n    description: 'Sidebar layout and position',\n    keywords: ['sidebar', 'widget', 'aside', 'left', 'right', 'position'],\n    category: 'layout',\n    path: ['Sidebar'],\n    popularity: 65,\n  },\n  {\n    id: 'blog',\n    title: 'Blog',\n    description: 'Blog archive and single post settings',\n    keywords: ['blog', 'post', 'article', 'archive', 'category', 'tag', 'excerpt', 'author'],\n    category: 'content',\n    path: ['Blog'],\n    popularity: 80,\n  },\n];\n\ninterface EnhancedSearchProps {\n  onSelect: (sectionId: SettingSection) => void;\n  className?: string;\n}\n\nexport const EnhancedSearch: React.FC<EnhancedSearchProps> = ({\n  onSelect,\n  className = '',\n}) => {\n  const [query, setQuery] = useState('');\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Debounced search to improve performance\n  const debouncedSearch = useMemo(\n    () => debounce((searchQuery: string) => {\n      setQuery(searchQuery);\n    }, 150),\n    []\n  );\n\n  // Enhanced search algorithm with scoring\n  const searchResults = useMemo(() => {\n    if (!query.trim()) {\n      // Show popular items when no query\n      return searchIndex\n        .sort((a, b) => (b.popularity || 0) - (a.popularity || 0))\n        .slice(0, 5);\n    }\n\n    const lowerQuery = query.toLowerCase();\n    const terms = lowerQuery.split(' ').filter(t => t.length > 0);\n\n    return searchIndex\n      .map(item => {\n        let score = 0;\n        \n        // Exact title match (highest priority)\n        if (item.title.toLowerCase() === lowerQuery) score += 100;\n        \n        // Title contains query\n        if (item.title.toLowerCase().includes(lowerQuery)) score += 50;\n        \n        // Description contains query\n        if (item.description.toLowerCase().includes(lowerQuery)) score += 30;\n        \n        // Keywords match\n        terms.forEach(term => {\n          item.keywords.forEach(keyword => {\n            if (keyword.toLowerCase().includes(term)) score += 20;\n          });\n        });\n        \n        // Boost by popularity\n        score += (item.popularity || 0) / 10;\n        \n        return { ...item, score };\n      })\n      .filter(item => item.score > 0)\n      .sort((a, b) => b.score - a.score)\n      .slice(0, 8);\n  }, [query]);\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!isExpanded) return;\n      \n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setSelectedIndex(prev => \n            prev < searchResults.length - 1 ? prev + 1 : 0\n          );\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setSelectedIndex(prev => \n            prev > 0 ? prev - 1 : searchResults.length - 1\n          );\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (searchResults[selectedIndex]) {\n            handleSelect(searchResults[selectedIndex].id);\n          }\n          break;\n        case 'Escape':\n          setIsExpanded(false);\n          inputRef.current?.blur();\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isExpanded, searchResults, selectedIndex]);\n\n  const handleSelect = (sectionId: SettingSection) => {\n    // Save to recent searches (in-memory only)\n    const newRecent = [query, ...recentSearches.filter(s => s !== query)].slice(0, 5);\n    setRecentSearches(newRecent);\n    \n    // Clear and close\n    setQuery('');\n    setIsExpanded(false);\n    onSelect(sectionId);\n  };\n\n  const highlightMatch = (text: string, query: string) => {\n    if (!query) return text;\n    const regex = new RegExp(`(${query})`, 'gi');\n    const parts = text.split(regex);\n    return (\n      <>\n        {Array.isArray(parts) && parts.map((part, i) =>\n          regex.test(part) ? (\n            <mark key={i} className=\"wp-customizer-search-highlight\">\n              {part}\n            </mark>\n          ) : (\n            part\n          )\n        )}\n      </>\n    );\n  };\n\n  return (\n    <div className={`wp-customizer-enhanced-search ${className}`}>\n      <div className=\"wp-customizer-search-input-wrapper\">\n        <Search className=\"wp-customizer-search-icon\" size={16} />\n        <input\n          ref={inputRef}\n          type=\"text\"\n          placeholder=\"Search settings... (Ctrl+F)\"\n          value={query}\n          onChange={(e) => {\n            setQuery(e.target.value);\n            debouncedSearch(e.target.value);\n          }}\n          onFocus={() => setIsExpanded(true)}\n          className=\"wp-customizer-search-input\"\n        />\n        {query && (\n          <button\n            onClick={() => {\n              setQuery('');\n              inputRef.current?.focus();\n            }}\n            className=\"wp-customizer-search-clear\"\n          >\n            <X size={14} />\n          </button>\n        )}\n      </div>\n\n      {isExpanded && (\n        <div className=\"wp-customizer-search-dropdown\">\n          {!query && recentSearches.length > 0 && (\n            <div className=\"wp-customizer-search-section\">\n              <h4>\n                <Clock size={14} />\n                Recent Searches\n              </h4>\n              <ul>\n                {Array.isArray(recentSearches) && recentSearches.map((search, i) => (\n                  <li\n                    key={i}\n                    onClick={() => {\n                      setQuery(search);\n                      debouncedSearch(search);\n                    }}\n                  >\n                    {search}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n\n          {!query && (\n            <div className=\"wp-customizer-search-section\">\n              <h4>\n                <TrendingUp size={14} />\n                Popular Settings\n              </h4>\n            </div>\n          )}\n\n          {Array.isArray(searchResults) && searchResults.length > 0 ? (\n            <ul className=\"wp-customizer-search-results\">\n              {searchResults.map((item, index) => (\n                <li\n                  key={item.id}\n                  className={`wp-customizer-search-result ${\n                    index === selectedIndex ? 'selected' : ''\n                  }`}\n                  onClick={() => handleSelect(item.id)}\n                  onMouseEnter={() => setSelectedIndex(index)}\n                >\n                  <div className=\"wp-customizer-search-result-content\">\n                    <h5>{highlightMatch(item.title, query)}</h5>\n                    <p>{highlightMatch(item.description, query)}</p>\n                    <div className=\"wp-customizer-search-result-meta\">\n                      <span className=\"wp-customizer-search-path\">\n                        {item.path.join(' › ')}\n                      </span>\n                      {Array.isArray(item.keywords) && item.keywords.slice(0, 3).map(keyword => (\n                        <span key={keyword} className=\"wp-customizer-search-tag\">\n                          <Tag size={10} />\n                          {keyword}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          ) : query ? (\n            <div className=\"wp-customizer-search-empty\">\n              <p>No settings found for \"{query}\"</p>\n              <p className=\"wp-customizer-search-hint\">\n                Try searching for: colors, typography, header, footer\n              </p>\n            </div>\n          ) : null}\n        </div>\n      )}\n    </div>\n  );\n};","import React, { useState } from 'react';\nimport { ChevronRight, ChevronLeft, Search } from 'lucide-react';\nimport { useCustomizer } from '../../context/CustomizerContext';\nimport { SettingSection } from '../../types/customizer-types';\nimport { EnhancedSearch } from '../EnhancedSearch';\nimport '../../styles/enhanced-search.css';\n\ninterface SidebarPanel {\n  id: SettingSection;\n  title: string;\n  description?: string;\n  icon?: React.ReactNode;\n  children?: SidebarPanel[];\n}\n\nconst panels: SidebarPanel[] = [\n  {\n    id: 'siteIdentity',\n    title: 'Site Identity',\n    description: 'Logo, Site Title & Tagline',\n  },\n  {\n    id: 'colors',\n    title: 'Global',\n    children: [\n      {\n        id: 'colors',\n        title: 'Colors',\n        description: 'Base colors, Link colors, Background',\n      },\n      {\n        id: 'typography',\n        title: 'Typography',\n        description: 'Body, Headings, Buttons',\n      },\n      {\n        id: 'container',\n        title: 'Container',\n        description: 'Layout width and spacing',\n      },\n    ],\n  },\n  {\n    id: 'header',\n    title: 'Header',\n    description: 'Site header layout and styling',\n    children: [\n      {\n        id: 'header',\n        title: 'Header Builder',\n        description: 'Drag & drop header elements',\n      },\n    ],\n  },\n  {\n    id: 'footer',\n    title: 'Footer',\n    description: 'Site footer layout and styling',\n    children: [\n      {\n        id: 'footer',\n        title: 'Footer Builder',\n        description: 'Widgets and bottom bar',\n      },\n    ],\n  },\n  {\n    id: 'sidebar',\n    title: 'Sidebar',\n    description: 'Sidebar layout and position',\n  },\n  {\n    id: 'blog',\n    title: 'Blog',\n    description: 'Blog archive and single post settings',\n  },\n];\n\ninterface CustomizerSidebarProps {\n  activePanel: string | null;\n  onPanelSelect: (panelId: SettingSection) => void;\n}\n\nexport const CustomizerSidebar: React.FC<CustomizerSidebarProps> = ({\n  activePanel,\n  onPanelSelect,\n}) => {\n  const { state, setActiveSection } = useCustomizer();\n  const [expandedPanels, setExpandedPanels] = useState<string[]>([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [currentView, setCurrentView] = useState<'main' | 'section'>('main');\n  const [currentSection, setCurrentSection] = useState<SettingSection | null>(null);\n  \n  const togglePanel = (panelId: string) => {\n    setExpandedPanels(prev =>\n      prev.includes(panelId)\n        ? prev.filter(id => id !== panelId)\n        : [...prev, panelId]\n    );\n  };\n  \n  const handlePanelClick = (panel: SidebarPanel) => {\n    if (panel.children && panel.children.length > 0) {\n      togglePanel(panel.id);\n    } else {\n      setCurrentSection(panel.id);\n      setCurrentView('section');\n      setActiveSection(panel.id);\n      onPanelSelect(panel.id);\n    }\n  };\n  \n  const handleBackClick = () => {\n    setCurrentView('main');\n    setCurrentSection(null);\n    setActiveSection(null);\n  };\n  \n  const filterPanels = (panels: SidebarPanel[]): SidebarPanel[] => {\n    if (!searchQuery) return panels;\n    \n    return panels.filter(panel => {\n      const matchesSearch = \n        panel.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        panel.description?.toLowerCase().includes(searchQuery.toLowerCase());\n      \n      if (panel.children) {\n        const filteredChildren = filterPanels(panel.children);\n        return matchesSearch || filteredChildren.length > 0;\n      }\n      \n      return matchesSearch;\n    });\n  };\n  \n  const filteredPanels = filterPanels(panels);\n  \n  const renderPanel = (panel: SidebarPanel, level: number = 0) => {\n    const isExpanded = expandedPanels.includes(panel.id);\n    const hasChildren = panel.children && panel.children.length > 0;\n    const isActive = activePanel === panel.id;\n    \n    return (\n      <div key={panel.id} className=\"wp-customizer-panel-wrapper\">\n        <div\n          className={`wp-customizer-panel ${isActive ? 'active' : ''} level-${level}`}\n          onClick={() => handlePanelClick(panel)}\n          style={{ paddingLeft: `${20 + level * 15}px` }}\n        >\n          <div className=\"wp-customizer-panel-content\">\n            <h3 className=\"wp-customizer-panel-title\">{panel.title}</h3>\n            {panel.description && (\n              <p className=\"wp-customizer-panel-description\">{panel.description}</p>\n            )}\n          </div>\n          {hasChildren && (\n            <span className=\"wp-customizer-panel-arrow\">\n              {isExpanded ? <ChevronRight size={16} /> : <ChevronRight size={16} />}\n            </span>\n          )}\n        </div>\n        \n        {hasChildren && isExpanded && (\n          <div className=\"wp-customizer-subpanels\">\n            {Array.isArray(panel.children) && panel.children.map(child => renderPanel(child, level + 1))}\n          </div>\n        )}\n      </div>\n    );\n  };\n  \n  if (currentView === 'section' && currentSection) {\n    // Render section content\n    const section = Array.isArray(panels) ? \n                   (panels.find(p => p.id === currentSection) || \n                    panels.flatMap(p => p.children || []).find(c => c.id === currentSection)) : \n                   undefined;\n    \n    return (\n      <div className=\"wp-customizer-sidebar\">\n        <div className=\"wp-customizer-section-header\">\n          <button\n            onClick={handleBackClick}\n            className=\"wp-customizer-back-button\"\n          >\n            <ChevronLeft size={20} />\n            <span>Customizing</span>\n          </button>\n          <h2>{section?.title}</h2>\n        </div>\n        \n        <div className=\"wp-customizer-section-content\">\n          {/* Section content will be rendered by individual section components */}\n          <div className=\"wp-customizer-section-placeholder\">\n            <p>Loading {section?.title} settings...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"wp-customizer-sidebar\">\n      {/* Enhanced Search */}\n      <EnhancedSearch\n        onSelect={(sectionId) => {\n          setCurrentSection(sectionId);\n          setCurrentView('section');\n          setActiveSection(sectionId);\n          onPanelSelect(sectionId);\n        }}\n      />\n      \n      {/* Panels */}\n      <div className=\"wp-customizer-panels\">\n        {Array.isArray(filteredPanels) && filteredPanels.length > 0 ? (\n          filteredPanels.map(panel => renderPanel(panel))\n        ) : (\n          <div className=\"wp-customizer-no-results\">\n            <p>No options found for \"{searchQuery}\"</p>\n          </div>\n        )}\n      </div>\n      \n      {/* Additional CSS Section */}\n      <div className=\"wp-customizer-additional\">\n        <div\n          className={`wp-customizer-panel ${activePanel === 'customCSS' ? 'active' : ''}`}\n          onClick={() => {\n            setCurrentSection('customCSS' as SettingSection);\n            setCurrentView('section');\n            setActiveSection('customCSS' as SettingSection);\n            onPanelSelect('customCSS' as SettingSection);\n          }}\n        >\n          <h3 className=\"wp-customizer-panel-title\">Additional CSS</h3>\n          <p className=\"wp-customizer-panel-description\">\n            Add your own custom CSS\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};","import { jsx as _jsx } from \"react/jsx-runtime\";\n// @o4o/ui - Shared UI Components\n// Export all UI components here\nimport React, { forwardRef } from 'react';\nfunction cn(...classes) {\n    return classes.filter(Boolean).join(' ');\n}\n// Card Components\nconst Card = forwardRef(({ className, ...props }, ref) => (_jsx(\"div\", { ref: ref, className: cn(\"rounded-lg border bg-card text-card-foreground shadow-sm\", className), ...props })));\nCard.displayName = \"Card\";\nconst CardHeader = forwardRef(({ className, ...props }, ref) => (_jsx(\"div\", { ref: ref, className: cn(\"flex flex-col space-y-1.5 p-6\", className), ...props })));\nCardHeader.displayName = \"CardHeader\";\nconst CardTitle = forwardRef(({ className, ...props }, ref) => (_jsx(\"h3\", { ref: ref, className: cn(\"text-2xl font-semibold leading-none tracking-tight\", className), ...props })));\nCardTitle.displayName = \"CardTitle\";\nconst CardDescription = forwardRef(({ className, ...props }, ref) => (_jsx(\"p\", { ref: ref, className: cn(\"text-sm text-muted-foreground\", className), ...props })));\nCardDescription.displayName = \"CardDescription\";\nconst CardContent = forwardRef(({ className, ...props }, ref) => (_jsx(\"div\", { ref: ref, className: cn(\"p-6 pt-0\", className), ...props })));\nCardContent.displayName = \"CardContent\";\nconst CardFooter = forwardRef(({ className, ...props }, ref) => (_jsx(\"div\", { ref: ref, className: cn(\"flex items-center p-6 pt-0\", className), ...props })));\nCardFooter.displayName = \"CardFooter\";\nconst getVariantClasses = (variant = 'default') => {\n    const variants = {\n        default: \"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md hover:from-blue-700 hover:to-blue-800 hover:shadow-lg focus-visible:ring-blue-500\",\n        destructive: \"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-md hover:from-red-700 hover:to-red-800 hover:shadow-lg focus-visible:ring-red-500\",\n        outline: \"border-2 border-gray-300 bg-white text-gray-700 hover:bg-gray-50 hover:border-gray-400 focus-visible:ring-gray-500\",\n        secondary: \"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-800 shadow-sm hover:from-gray-200 hover:to-gray-300 focus-visible:ring-gray-500\",\n        ghost: \"text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus-visible:ring-gray-500\",\n        link: \"text-blue-600 underline-offset-4 hover:underline hover:text-blue-800 focus-visible:ring-blue-500\",\n        primary: \"bg-gradient-to-r from-blue-600 to-blue-700 text-white shadow-md hover:from-blue-700 hover:to-blue-800 hover:shadow-lg transform hover:-translate-y-0.5 focus-visible:ring-blue-500\",\n        success: \"bg-gradient-to-r from-green-600 to-green-700 text-white shadow-md hover:from-green-700 hover:to-green-800 hover:shadow-lg focus-visible:ring-green-500\",\n    };\n    return variants[variant];\n};\nconst getSizeClasses = (size = 'default') => {\n    const sizes = {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-8 rounded-md px-3 text-xs\",\n        lg: \"h-12 rounded-md px-8 text-base\",\n        icon: \"h-10 w-10\",\n    };\n    return sizes[size];\n};\nconst Button = forwardRef(({ className, variant = 'default', size = 'default', ...props }, ref) => {\n    return (_jsx(\"button\", { className: cn(\"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 transform active:scale-95\", getVariantClasses(variant), getSizeClasses(size), className), ref: ref, ...props }));\n});\nButton.displayName = \"Button\";\n// Alert Components\nconst Alert = forwardRef(({ className, variant = 'default', ...props }, ref) => (_jsx(\"div\", { ref: ref, role: \"alert\", className: cn(\"relative w-full rounded-lg border p-4\", variant === 'default' && \"bg-background text-foreground\", variant === 'destructive' && \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\", className), ...props })));\nAlert.displayName = \"Alert\";\nconst AlertTitle = forwardRef(({ className, ...props }, ref) => (_jsx(\"h5\", { ref: ref, className: cn(\"mb-1 font-medium leading-none tracking-tight\", className), ...props })));\nAlertTitle.displayName = \"AlertTitle\";\nconst AlertDescription = forwardRef(({ className, ...props }, ref) => (_jsx(\"div\", { ref: ref, className: cn(\"text-sm [&_p]:leading-relaxed\", className), ...props })));\nAlertDescription.displayName = \"AlertDescription\";\n// Input Component\nconst Input = forwardRef(({ className, type, ...props }, ref) => {\n    return (_jsx(\"input\", { type: type, className: cn(\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\", className), ref: ref, ...props }));\n});\nInput.displayName = \"Input\";\n// Label Component\nconst Label = forwardRef(({ className, ...props }, ref) => (_jsx(\"label\", { ref: ref, className: cn(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\", className), ...props })));\nLabel.displayName = \"Label\";\nconst badgeVariants = {\n    default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n    secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n    destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n    outline: \"text-foreground\"\n};\nconst Badge = forwardRef(({ className, variant = 'default', ...props }, ref) => {\n    return (_jsx(\"div\", { ref: ref, className: cn(\"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\", badgeVariants[variant], className), ...props }));\n});\nBadge.displayName = \"Badge\";\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent, Button, Alert, AlertTitle, AlertDescription, Input, Label, Badge };\n// ---------------------------------------------------------------------------\n// Minimal additional primitives to satisfy app imports\n// These are intentionally lightweight and can be replaced with full-featured\n// components later without changing import sites.\n// Textarea\nexport const Textarea = React.forwardRef(({ className, ...props }, ref) => (_jsx(\"textarea\", { ref: ref, className: cn(\"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\", className), ...props })));\nTextarea.displayName = 'Textarea';\n// Select (native)\nexport const Select = React.forwardRef(({ className, children, ...props }, ref) => (_jsx(\"select\", { ref: ref, className: cn(\"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\", className), ...props, children: children })));\nSelect.displayName = 'Select';\n// Skeleton\nexport const Skeleton = ({ className, ...props }) => (_jsx(\"div\", { className: cn('animate-pulse rounded-md bg-gray-200 dark:bg-gray-800', className), ...props }));\nexport const Tabs = React.forwardRef(({ className, ...props }, ref) => (_jsx(\"div\", { ref: ref, className: cn(className), ...props })));\nTabs.displayName = 'Tabs';\nexport const TabsList = React.forwardRef(({ className, ...props }, ref) => (_jsx(\"div\", { ref: ref, className: cn('flex gap-2', className), ...props })));\nTabsList.displayName = 'TabsList';\nexport const TabsTrigger = React.forwardRef(({ className, ...props }, ref) => (_jsx(\"button\", { ref: ref, className: cn('inline-flex items-center justify-center whitespace-nowrap rounded-md border px-3 py-1 text-sm', className), ...props })));\nTabsTrigger.displayName = 'TabsTrigger';\nexport const TabsContent = React.forwardRef(({ className, ...props }, ref) => (_jsx(\"div\", { ref: ref, className: cn(className), ...props })));\nTabsContent.displayName = 'TabsContent';\n//# sourceMappingURL=index.js.map","import React, { useRef, useEffect, useState, useCallback, useMemo } from 'react';\nimport {\n  Smartphone,\n  Tablet,\n  Monitor,\n  RefreshCw,\n  ExternalLink,\n  AlertTriangle,\n  Maximize2,\n  Minimize2,\n  Loader2,\n  WifiOff,\n  Shield,\n} from 'lucide-react';\nimport { useCustomizer } from '../../context/CustomizerContext';\nimport { PreviewDevice } from '../../types/customizer-types';\nimport { generateCSS } from '../../utils/css-generator';\nimport { Button } from '@o4o/ui';\nimport debounce from 'lodash/debounce';\n\n/**\n * Enhanced Preview Component with improved loading and error handling\n */\n\ninterface EnhancedPreviewProps {\n  url?: string;\n  onLoad?: () => void;\n}\n\nconst deviceSizes: Record<PreviewDevice, { width: number; height: number }> = {\n  desktop: { width: 0, height: 0 },\n  tablet: { width: 768, height: 1024 },\n  mobile: { width: 375, height: 667 },\n};\n\ntype LoadingState = 'initial' | 'loading' | 'loaded' | 'error' | 'blocked';\n\nexport const EnhancedPreview: React.FC<EnhancedPreviewProps> = ({\n  url = '/',\n  onLoad,\n}) => {\n  const { state, setPreviewDevice } = useCustomizer();\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [loadingState, setLoadingState] = useState<LoadingState>('initial');\n  const [errorMessage, setErrorMessage] = useState<string>('');\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [scale, setScale] = useState(1);\n  const [retryCount, setRetryCount] = useState(0);\n  const loadTimeoutRef = useRef<NodeJS.Timeout>();\n  const cssUpdateTimeoutRef = useRef<NodeJS.Timeout>();\n\n  const { previewDevice } = state;\n\n  // Generate optimized CSS with caching\n  const css = useMemo(() => generateCSS(state.settings), [state.settings]);\n\n  // Create preview URL with fallback options\n  const getPreviewUrl = useCallback(() => {\n    try {\n      // Try direct URL first\n      if (url.startsWith('http')) {\n        return url;\n      }\n      \n      // Use relative URL for same-origin\n      const origin = window.location.origin;\n      return `${origin}${url.startsWith('/') ? url : '/' + url}`;\n    } catch (error) {\n      // Error generating preview URL\n      return '/';\n    }\n  }, [url]);\n\n  const currentUrl = getPreviewUrl();\n\n  // Debounced CSS injection for performance\n  const injectCSS = useMemo(\n    () =>\n      debounce(() => {\n        if (!iframeRef.current?.contentWindow) return;\n\n        try {\n          // Try direct DOM access first\n          const doc = iframeRef.current.contentDocument;\n          if (doc) {\n            let styleEl = doc.getElementById('astra-customizer-css');\n            if (!styleEl) {\n              styleEl = doc.createElement('style');\n              styleEl.id = 'astra-customizer-css';\n              doc.head?.appendChild(styleEl);\n            }\n            if (styleEl) {\n              styleEl.textContent = css;\n            }\n          }\n        } catch (error) {\n          // Fallback to postMessage for cross-origin\n          // Using postMessage for CSS injection when cross-origin\n        }\n\n        // Always send postMessage for compatibility\n        if (iframeRef.current?.contentWindow) {\n          iframeRef.current.contentWindow.postMessage(\n            {\n              type: 'customizer-update',\n              settings: state.settings,\n              css,\n            },\n            '*'\n          );\n        }\n      }, 100),\n    [css, state.settings]\n  );\n\n  // Enhanced iframe load handler\n  const handleIframeLoad = useCallback(() => {\n    clearTimeout(loadTimeoutRef.current);\n    \n    // Check if iframe actually loaded content\n    try {\n      const doc = iframeRef.current?.contentDocument;\n      const hasContent = doc && (doc.body?.innerHTML || '').length > 100;\n      \n      if (hasContent || iframeRef.current?.contentWindow) {\n        setLoadingState('loaded');\n        setRetryCount(0);\n        injectCSS();\n        onLoad?.();\n      } else {\n        throw new Error('Empty iframe content');\n      }\n    } catch (error) {\n      // Cross-origin or blocked\n      // Preview loaded (cross-origin)\n      setLoadingState('loaded');\n      injectCSS();\n      onLoad?.();\n    }\n  }, [injectCSS, onLoad]);\n\n  // Handle iframe errors\n  const handleIframeError = useCallback(\n    (error?: string) => {\n      clearTimeout(loadTimeoutRef.current);\n      \n      if (retryCount < 2) {\n        // Auto-retry with delay\n        setTimeout(() => {\n          setRetryCount(prev => prev + 1);\n          setLoadingState('loading');\n          if (iframeRef.current) {\n            iframeRef.current.src = currentUrl;\n          }\n        }, 1000 * (retryCount + 1));\n      } else {\n        setLoadingState('error');\n        setErrorMessage(\n          error || 'Failed to load preview. The site may be blocking embedded frames.'\n        );\n      }\n    },\n    [currentUrl, retryCount]\n  );\n\n  // Setup iframe with timeouts and error handling\n  useEffect(() => {\n    if (!iframeRef.current) return;\n\n    setLoadingState('loading');\n    \n    // Set loading timeout\n    loadTimeoutRef.current = setTimeout(() => {\n      if (loadingState === 'loading') {\n        handleIframeError('Preview loading timeout');\n      }\n    }, 10000); // 10 second timeout\n\n    // Cleanup\n    return () => {\n      clearTimeout(loadTimeoutRef.current);\n      clearTimeout(cssUpdateTimeoutRef.current);\n    };\n  }, [currentUrl]);\n\n  // Inject CSS on changes\n  useEffect(() => {\n    if (loadingState === 'loaded') {\n      injectCSS();\n    }\n  }, [css, loadingState, injectCSS]);\n\n  // Handle device change\n  const handleDeviceChange = (device: PreviewDevice) => {\n    setPreviewDevice(device);\n    // Force refresh on device change for responsive testing\n    if (iframeRef.current && device !== 'desktop') {\n      const viewport = `width=${deviceSizes[device].width}`;\n      iframeRef.current.contentWindow?.postMessage(\n        {\n          type: 'viewport-change',\n          viewport,\n        },\n        '*'\n      );\n    }\n  };\n\n  // Handle fullscreen\n  const toggleFullscreen = useCallback(() => {\n    if (!containerRef.current) return;\n\n    if (!isFullscreen) {\n      if (containerRef.current.requestFullscreen) {\n        containerRef.current.requestFullscreen();\n      }\n    } else {\n      if (document.fullscreenElement) {\n        document.exitFullscreen();\n      }\n    }\n    setIsFullscreen(!isFullscreen);\n  }, [isFullscreen]);\n\n  // Refresh preview\n  const refreshPreview = () => {\n    setRetryCount(0);\n    setLoadingState('loading');\n    setErrorMessage('');\n    if (iframeRef.current) {\n      iframeRef.current.src = currentUrl;\n    }\n  };\n\n  // Render loading state\n  const renderLoadingOverlay = () => {\n    if (loadingState === 'loaded') return null;\n\n    return (\n      <div className=\"wp-customizer-preview-overlay\">\n        {loadingState === 'loading' && (\n          <div className=\"wp-customizer-preview-loading\">\n            <Loader2 className=\"wp-customizer-preview-spinner\" size={32} />\n            <p>Loading preview...</p>\n            {retryCount > 0 && (\n              <p className=\"wp-customizer-preview-retry\">\n                Retry attempt {retryCount}/2\n              </p>\n            )}\n          </div>\n        )}\n\n        {loadingState === 'error' && (\n          <div className=\"wp-customizer-preview-error\">\n            <AlertTriangle size={48} />\n            <h3>Preview Error</h3>\n            <p>{errorMessage}</p>\n            <div className=\"wp-customizer-preview-error-actions\">\n              <Button onClick={refreshPreview} variant=\"primary\">\n                <RefreshCw size={16} />\n                Try Again\n              </Button>\n              <Button\n                onClick={() => window.open(currentUrl, '_blank')}\n                variant=\"secondary\"\n              >\n                <ExternalLink size={16} />\n                Open in New Tab\n              </Button>\n            </div>\n            <details className=\"wp-customizer-preview-error-details\">\n              <summary>Technical Details</summary>\n              <p>\n                This error often occurs when the site blocks embedding in iframes\n                (X-Frame-Options or CSP headers). Try opening the preview in a new tab.\n              </p>\n            </details>\n          </div>\n        )}\n\n        {loadingState === 'blocked' && (\n          <div className=\"wp-customizer-preview-blocked\">\n            <Shield size={48} />\n            <h3>Security Block</h3>\n            <p>The preview cannot be displayed due to security restrictions.</p>\n            <Button\n              onClick={() => window.open(currentUrl, '_blank')}\n              variant=\"primary\"\n            >\n              <ExternalLink size={16} />\n              Open in New Tab\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"wp-customizer-preview\" ref={containerRef}>\n      {/* Preview Header */}\n      <div className=\"wp-customizer-preview-header\">\n        <div className=\"wp-customizer-preview-devices\">\n          <button\n            className={`wp-customizer-device-button ${\n              previewDevice === 'desktop' ? 'active' : ''\n            }`}\n            onClick={() => handleDeviceChange('desktop')}\n            title=\"Desktop view\"\n          >\n            <Monitor size={20} />\n          </button>\n          <button\n            className={`wp-customizer-device-button ${\n              previewDevice === 'tablet' ? 'active' : ''\n            }`}\n            onClick={() => handleDeviceChange('tablet')}\n            title=\"Tablet view\"\n          >\n            <Tablet size={20} />\n          </button>\n          <button\n            className={`wp-customizer-device-button ${\n              previewDevice === 'mobile' ? 'active' : ''\n            }`}\n            onClick={() => handleDeviceChange('mobile')}\n            title=\"Mobile view\"\n          >\n            <Smartphone size={20} />\n          </button>\n        </div>\n\n        <div className=\"wp-customizer-preview-url\">\n          <input\n            type=\"text\"\n            value={currentUrl}\n            readOnly\n            className=\"wp-customizer-preview-url-input\"\n          />\n        </div>\n\n        <div className=\"wp-customizer-preview-actions\">\n          <button\n            onClick={refreshPreview}\n            className=\"wp-customizer-preview-action\"\n            title=\"Refresh preview\"\n            disabled={loadingState === 'loading'}\n          >\n            <RefreshCw\n              size={18}\n              className={loadingState === 'loading' ? 'spin' : ''}\n            />\n          </button>\n          <button\n            onClick={toggleFullscreen}\n            className=\"wp-customizer-preview-action\"\n            title={isFullscreen ? 'Exit fullscreen' : 'Enter fullscreen'}\n          >\n            {isFullscreen ? <Minimize2 size={18} /> : <Maximize2 size={18} />}\n          </button>\n          <button\n            onClick={() => window.open(currentUrl, '_blank')}\n            className=\"wp-customizer-preview-action\"\n            title=\"Open in new tab\"\n          >\n            <ExternalLink size={18} />\n          </button>\n        </div>\n      </div>\n\n      {/* Preview Frame */}\n      <div\n        className={`wp-customizer-preview-frame wp-customizer-preview-${previewDevice}`}\n      >\n        <div className=\"wp-customizer-preview-wrapper\">\n          {renderLoadingOverlay()}\n          <iframe\n            ref={iframeRef}\n            src={currentUrl}\n            className=\"wp-customizer-preview-iframe\"\n            onLoad={handleIframeLoad}\n            onError={() => handleIframeError()}\n            style={{\n              width:\n                previewDevice === 'desktop'\n                  ? '100%'\n                  : `${deviceSizes[previewDevice].width}px`,\n              height:\n                previewDevice === 'desktop'\n                  ? '100%'\n                  : `${deviceSizes[previewDevice].height}px`,\n              transform: `scale(${scale})`,\n              transformOrigin: 'top center',\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};","import { useEffect, useRef } from 'react';\nimport { useCustomizer } from '../context/CustomizerContext';\nimport { toast } from 'react-hot-toast';\n\n/**\n * WordPress-style Keyboard Shortcuts Hook\n * Implements keyboard shortcuts for better UX\n */\n\ninterface ShortcutHandlers {\n  onSave?: () => void;\n  onUndo?: () => void;\n  onRedo?: () => void;\n  onSearch?: () => void;\n  onReset?: () => void;\n  onPreview?: () => void;\n  onPublish?: () => void;\n  onClose?: () => void;\n}\n\nexport const useKeyboardShortcuts = (handlers: ShortcutHandlers = {}) => {\n  const { state, saveSettings, resetSettings } = useCustomizer();\n  const searchInputRef = useRef<HTMLInputElement | null>(null);\n  const isProcessing = useRef(false);\n\n  useEffect(() => {\n    const handleKeyDown = async (e: KeyboardEvent) => {\n      // Don't interfere with input fields unless it's a global shortcut\n      const target = e.target as HTMLElement;\n      const isInInput = target.tagName === 'INPUT' || \n                       target.tagName === 'TEXTAREA' || \n                       target.contentEditable === 'true';\n      \n      // Global shortcuts (work even in input fields)\n      if (e.ctrlKey || e.metaKey) {\n        switch (e.key.toLowerCase()) {\n          case 's':\n            // Ctrl/Cmd + S: Save\n            e.preventDefault();\n            if (!isProcessing.current) {\n              isProcessing.current = true;\n              try {\n                if (handlers.onSave) {\n                  handlers.onSave();\n                } else {\n                  await saveSettings();\n                  toast.success('Settings saved! (Ctrl+S)', {\n                    duration: 2000,\n                    position: 'bottom-center',\n                  });\n                }\n              } catch (error) {\n                toast.error('Failed to save settings');\n              } finally {\n                isProcessing.current = false;\n              }\n            }\n            break;\n\n          case 'z':\n            if (e.shiftKey) {\n              // Ctrl/Cmd + Shift + Z: Redo\n              e.preventDefault();\n              if (handlers.onRedo) {\n                handlers.onRedo();\n                toast.success('Redo (Ctrl+Shift+Z)', {\n                  duration: 1500,\n                  position: 'bottom-center',\n                });\n              }\n            } else {\n              // Ctrl/Cmd + Z: Undo\n              e.preventDefault();\n              if (handlers.onUndo) {\n                handlers.onUndo();\n                toast.success('Undo (Ctrl+Z)', {\n                  duration: 1500,\n                  position: 'bottom-center',\n                });\n              }\n            }\n            break;\n\n          case 'f':\n            // Ctrl/Cmd + F: Focus search\n            if (!isInInput) {\n              e.preventDefault();\n              if (handlers.onSearch) {\n                handlers.onSearch();\n              } else {\n                // Focus the search input if it exists\n                const searchInput = document.querySelector(\n                  '.wp-customizer-search-input'\n                ) as HTMLInputElement;\n                if (searchInput) {\n                  searchInput.focus();\n                  searchInput.select();\n                }\n              }\n            }\n            break;\n\n          case 'r':\n            // Ctrl/Cmd + R: Reset settings (with confirmation)\n            if (e.shiftKey) {\n              e.preventDefault();\n              if (handlers.onReset) {\n                handlers.onReset();\n              } else {\n                const confirmed = window.confirm(\n                  'Reset all settings to default? This cannot be undone.'\n                );\n                if (confirmed) {\n                  resetSettings();\n                  toast.success('Settings reset to defaults', {\n                    duration: 3000,\n                    position: 'bottom-center',\n                  });\n                }\n              }\n            }\n            break;\n\n          case 'p':\n            // Ctrl/Cmd + P: Toggle preview mode\n            e.preventDefault();\n            if (handlers.onPreview) {\n              handlers.onPreview();\n              toast.success('Preview mode toggled (Ctrl+P)', {\n                duration: 1500,\n                position: 'bottom-center',\n              });\n            }\n            break;\n\n          case 'enter':\n            // Ctrl/Cmd + Enter: Publish/Save and exit\n            if (e.shiftKey) {\n              e.preventDefault();\n              if (handlers.onPublish) {\n                handlers.onPublish();\n              } else {\n                try {\n                  await saveSettings();\n                  toast.success('Settings published!', {\n                    duration: 2000,\n                    position: 'bottom-center',\n                  });\n                  // Close after save\n                  setTimeout(() => {\n                    handlers.onClose?.();\n                  }, 1000);\n                } catch (error) {\n                  toast.error('Failed to publish settings');\n                }\n              }\n            }\n            break;\n        }\n      }\n\n      // Non-modifier shortcuts (only when not in input)\n      if (!isInInput) {\n        switch (e.key) {\n          case '?':\n            // ?: Show keyboard shortcuts help\n            if (e.shiftKey) {\n              e.preventDefault();\n              showShortcutsHelp();\n            }\n            break;\n\n          case '/':\n            // /: Quick search (Vim-style)\n            e.preventDefault();\n            const searchInput = document.querySelector(\n              '.wp-customizer-search-input'\n            ) as HTMLInputElement;\n            if (searchInput) {\n              searchInput.focus();\n              searchInput.select();\n            }\n            break;\n\n          case '1':\n          case '2':\n          case '3':\n          case '4':\n          case '5':\n          case '6':\n          case '7':\n          case '8':\n          case '9':\n            // Number keys: Quick navigation to sections\n            if (e.altKey) {\n              e.preventDefault();\n              const sectionIndex = parseInt(e.key) - 1;\n              const panels = document.querySelectorAll('.wp-customizer-panel');\n              if (panels[sectionIndex]) {\n                (panels[sectionIndex] as HTMLElement).click();\n              }\n            }\n            break;\n        }\n      }\n    };\n\n    // Add event listener\n    document.addEventListener('keydown', handleKeyDown);\n\n    // Cleanup\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [handlers, state, saveSettings, resetSettings]);\n\n  return {\n    searchInputRef,\n  };\n};\n\n// Helper function to show shortcuts help\nfunction showShortcutsHelp() {\n  const shortcuts = [\n    { keys: 'Ctrl+S', description: 'Save settings' },\n    { keys: 'Ctrl+Z', description: 'Undo last change' },\n    { keys: 'Ctrl+Shift+Z', description: 'Redo' },\n    { keys: 'Ctrl+F', description: 'Focus search' },\n    { keys: 'Ctrl+Shift+R', description: 'Reset to defaults' },\n    { keys: 'Ctrl+P', description: 'Toggle preview' },\n    { keys: 'Ctrl+Shift+Enter', description: 'Save and close' },\n    { keys: 'ESC', description: 'Close customizer' },\n    { keys: '/', description: 'Quick search' },\n    { keys: '?', description: 'Show this help' },\n    { keys: 'Alt+1-9', description: 'Quick navigate to sections' },\n  ];\n\n  // Create modal overlay\n  const overlay = document.createElement('div');\n  overlay.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.8);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 100000;\n    animation: fadeIn 0.2s ease;\n  `;\n\n  // Create modal content\n  const modal = document.createElement('div');\n  modal.style.cssText = `\n    background: white;\n    border-radius: 8px;\n    padding: 24px;\n    max-width: 500px;\n    max-height: 70vh;\n    overflow-y: auto;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  `;\n\n  modal.innerHTML = `\n    <h2 style=\"margin: 0 0 16px 0; font-size: 20px; color: #1e1e1e;\">\n      ⌨️ Keyboard Shortcuts\n    </h2>\n    <table style=\"width: 100%; border-collapse: collapse;\">\n      ${shortcuts\n        .map(\n          (s) => `\n        <tr style=\"border-bottom: 1px solid #f0f0f1;\">\n          <td style=\"padding: 8px 16px 8px 0; font-weight: 600; font-family: monospace; font-size: 13px; color: #007cba;\">\n            ${s.keys}\n          </td>\n          <td style=\"padding: 8px 0; font-size: 13px; color: #50575e;\">\n            ${s.description}\n          </td>\n        </tr>\n      `\n        )\n        .join('')}\n    </table>\n    <p style=\"margin: 16px 0 0 0; font-size: 12px; color: #8c8f94; text-align: center;\">\n      Press ESC or click outside to close\n    </p>\n  `;\n\n  overlay.appendChild(modal);\n  document.body.appendChild(overlay);\n\n  // Close on click or ESC\n  const close = () => {\n    overlay.style.animation = 'fadeOut 0.2s ease';\n    setTimeout(() => {\n      document.body.removeChild(overlay);\n    }, 200);\n  };\n\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) close();\n  });\n\n  const handleEsc = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      close();\n      document.removeEventListener('keydown', handleEsc);\n    }\n  };\n  document.addEventListener('keydown', handleEsc);\n\n  // Add fade animations\n  const style = document.createElement('style');\n  style.textContent = `\n    @keyframes fadeIn {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n    @keyframes fadeOut {\n      from { opacity: 1; }\n      to { opacity: 0; }\n    }\n  `;\n  document.head.appendChild(style);\n}","import { \n  Post, \n  Page, \n  Category, \n  Tag, \n  MediaFile, \n  MediaFolder,\n  FieldGroup,\n  Template,\n  Menu,\n  ApiResponse,\n  ContentFilters,\n  PostType,\n  PostStatus,\n  TipTapJSONContent\n} from '@/types/content'\nimport { unifiedApi } from './unified-client'\n\nexport class ContentApi {\n  // Posts Management\n  static async getPosts(\n    page: number = 1, \n    pageSize: number = 20, \n    filters?: ContentFilters\n  ): Promise<ApiResponse<Post[]>> {\n    const params = {\n      page,\n      pageSize,\n      ...filters\n    }\n    \n    const response = await unifiedApi.content.posts.list(params)\n    return response.data\n  }\n\n  static async getPost(id: string): Promise<ApiResponse<Post>> {\n    const response = await unifiedApi.content.posts.get(id)\n    return response.data\n  }\n\n  static async createPost(post: Partial<Post>): Promise<ApiResponse<Post>> {\n    const response = await unifiedApi.content.posts.create(post)\n    return response.data\n  }\n\n  static async updatePost(id: string, post: Partial<Post>): Promise<ApiResponse<Post>> {\n    const response = await unifiedApi.content.posts.update(id, post)\n    return response.data\n  }\n\n  static async deletePost(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.content.posts.delete(id)\n    return response.data\n  }\n\n  static async clonePost(id: string): Promise<ApiResponse<Post>> {\n    const response = await unifiedApi.raw.post(`/v1/content/posts/${id}/clone`)\n    return response.data\n  }\n\n  static async bulkUpdatePosts(ids: string[], data: Partial<Post>): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.patch('/v1/content/posts/bulk', { ids, data })\n    return response.data\n  }\n\n  static async bulkDeletePosts(ids: string[]): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete('/v1/content/posts/bulk', { data: { ids } })\n    return response.data\n  }\n\n  static async getPostPreview(id: string): Promise<ApiResponse<{ url: string }>> {\n    const response = await unifiedApi.raw.get(`/v1/content/posts/${id}/preview`)\n    return response.data\n  }\n\n  static async savePostDraft(id: string, content: TipTapJSONContent): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.post(`/v1/content/posts/${id}/autosave`, { content })\n    return response.data\n  }\n\n  static async getPostRevisions(id: string): Promise<ApiResponse<Post[]>> {\n    const response = await unifiedApi.raw.get(`/v1/content/posts/${id}/revisions`)\n    return response.data\n  }\n\n  static async restorePostRevision(postId: string, revisionId: string): Promise<ApiResponse<Post>> {\n    const response = await unifiedApi.raw.post(`/v1/content/posts/${postId}/revisions/${revisionId}/restore`)\n    return response.data\n  }\n\n  // Pages Management\n  static async getPages(\n    page: number = 1, \n    pageSize: number = 20, \n    filters?: ContentFilters\n  ): Promise<ApiResponse<Page[]>> {\n    const params = {\n      page,\n      pageSize,\n      ...filters\n    }\n    \n    const response = await unifiedApi.raw.get('/v1/content/pages', { params })\n    return response.data\n  }\n\n  static async getPage(id: string): Promise<ApiResponse<Page>> {\n    const response = await unifiedApi.raw.get(`/v1/content/pages/${id}`)\n    return response.data\n  }\n\n  static async createPage(page: Partial<Page>): Promise<ApiResponse<Page>> {\n    const response = await unifiedApi.raw.post('/v1/content/pages', page)\n    return response.data\n  }\n\n  static async updatePage(id: string, page: Partial<Page>): Promise<ApiResponse<Page>> {\n    const response = await unifiedApi.raw.put(`/v1/content/pages/${id}`, page)\n    return response.data\n  }\n\n  static async deletePage(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete(`/v1/content/pages/${id}`)\n    return response.data\n  }\n\n  static async clonePage(id: string): Promise<ApiResponse<Page>> {\n    const response = await unifiedApi.raw.post(`/v1/content/pages/${id}/clone`)\n    return response.data\n  }\n\n  static async bulkUpdatePages(ids: string[], data: Partial<Page>): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.patch('/v1/content/pages/bulk', { ids, data })\n    return response.data\n  }\n\n  static async bulkDeletePages(ids: string[]): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete('/v1/content/pages/bulk', { data: { ids } })\n    return response.data\n  }\n\n  static async savePageDraft(id: string, content: TipTapJSONContent): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.post(`/v1/content/pages/${id}/autosave`, { content })\n    return response.data\n  }\n\n  static async getPagePreview(id: string): Promise<ApiResponse<{ url: string }>> {\n    const response = await unifiedApi.raw.get(`/v1/content/pages/${id}/preview`)\n    return response.data\n  }\n\n  static async getPageRevisions(id: string): Promise<ApiResponse<Page[]>> {\n    const response = await unifiedApi.raw.get(`/v1/content/pages/${id}/revisions`)\n    return response.data\n  }\n\n  static async restorePageRevision(pageId: string, revisionId: string): Promise<ApiResponse<Page>> {\n    const response = await unifiedApi.raw.post(`/v1/content/pages/${pageId}/revisions/${revisionId}/restore`)\n    return response.data\n  }\n\n  static async getPageTree(): Promise<ApiResponse<Page[]>> {\n    const response = await unifiedApi.raw.get('/v1/content/pages/tree')\n    return response.data\n  }\n\n  // Categories Management\n  static async getCategories(hierarchical: boolean = true): Promise<ApiResponse<Category[]>> {\n    const response = await unifiedApi.content.categories.list({ hierarchical })\n    return response.data\n  }\n\n  static async getCategory(id: string): Promise<ApiResponse<Category>> {\n    const response = await unifiedApi.content.categories.get(id)\n    return response.data\n  }\n\n  static async createCategory(category: Partial<Category>): Promise<ApiResponse<Category>> {\n    const response = await unifiedApi.content.categories.create(category)\n    return response.data\n  }\n\n  static async updateCategory(id: string, category: Partial<Category>): Promise<ApiResponse<Category>> {\n    const response = await unifiedApi.content.categories.update(id, category)\n    return response.data\n  }\n\n  static async deleteCategory(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.content.categories.delete(id)\n    return response.data\n  }\n\n  static async reorderCategories(categories: { id: string; order: number; parentId?: string }[]): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.patch('/admin/categories/reorder', { categories })\n    return response.data\n  }\n\n  // Tags Management\n  static async getTags(): Promise<ApiResponse<Tag[]>> {\n    const response = await unifiedApi.raw.get('/api/tags')\n    return response.data\n  }\n\n  static async getTag(id: string): Promise<ApiResponse<Tag>> {\n    const response = await unifiedApi.raw.get(`/api/tags/${id}`)\n    return response.data\n  }\n\n  static async createTag(tag: Partial<Tag>): Promise<ApiResponse<Tag>> {\n    const response = await unifiedApi.raw.post('/api/tags', tag)\n    return response.data\n  }\n\n  static async updateTag(id: string, tag: Partial<Tag>): Promise<ApiResponse<Tag>> {\n    const response = await unifiedApi.raw.put(`/api/tags/${id}`, tag)\n    return response.data\n  }\n\n  static async deleteTag(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete(`/api/tags/${id}`)\n    return response.data\n  }\n\n  static async mergeTags(fromId: string, toId: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.post(`/admin/tags/${fromId}/merge/${toId}`)\n    return response.data\n  }\n\n  // Media Management\n  static async getMediaFiles(\n    page: number = 1,\n    pageSize: number = 50,\n    folderId?: string,\n    type?: string,\n    search?: string\n  ): Promise<ApiResponse<MediaFile[]>> {\n    const params = {\n      page,\n      pageSize,\n      ...(folderId && { folderId }),\n      ...(type && { type }),\n      ...(search && { search })\n    }\n    \n    const response = await unifiedApi.content.media.list(params)\n    return response.data\n  }\n\n  static async getMediaFile(id: string): Promise<ApiResponse<MediaFile>> {\n    const response = await unifiedApi.content.media.get(id)\n    return response.data\n  }\n\n  static async uploadFiles(\n    files: File[],\n    folderId?: string,\n    _onProgress?: (progress: number) => void\n  ): Promise<ApiResponse<MediaFile[]>> {\n    const formData = new FormData()\n    \n    files.forEach((file: any) => {\n      formData.append('files', file)\n    })\n    \n    if (folderId) {\n      formData.append('folderId', folderId)\n    }\n\n    const response = await unifiedApi.raw.post('/v1/content/media/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    } as any)\n    \n    return response.data\n  }\n\n  static async updateMediaFile(id: string, data: Partial<MediaFile>): Promise<ApiResponse<MediaFile>> {\n    const response = await unifiedApi.content.media.update(id, data)\n    return response.data\n  }\n\n  static async deleteMediaFile(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.content.media.delete(id)\n    return response.data\n  }\n\n  static async bulkDeleteMediaFiles(ids: string[]): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete('/v1/content/media/bulk', { data: { ids } })\n    return response.data\n  }\n\n  // Media Folders\n  static async getMediaFolders(): Promise<ApiResponse<MediaFolder[]>> {\n    const response = await unifiedApi.raw.get('/v1/content/media/folders')\n    return response.data\n  }\n\n  static async createMediaFolder(folder: Partial<MediaFolder>): Promise<ApiResponse<MediaFolder>> {\n    const response = await unifiedApi.raw.post('/v1/content/media/folders', folder)\n    return response.data\n  }\n\n  static async updateMediaFolder(id: string, folder: Partial<MediaFolder>): Promise<ApiResponse<MediaFolder>> {\n    const response = await unifiedApi.raw.put(`/v1/content/media/folders/${id}`, folder)\n    return response.data\n  }\n\n  static async deleteMediaFolder(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete(`/v1/content/media/folders/${id}`)\n    return response.data\n  }\n\n  // Custom Fields\n  static async getFieldGroups(): Promise<ApiResponse<FieldGroup[]>> {\n    const response = await unifiedApi.raw.get('/admin/custom-fields/groups')\n    return response.data\n  }\n\n  static async getFieldGroup(id: string): Promise<ApiResponse<FieldGroup>> {\n    const response = await unifiedApi.raw.get(`/admin/custom-fields/groups/${id}`)\n    return response.data\n  }\n\n  static async createFieldGroup(group: Partial<FieldGroup>): Promise<ApiResponse<FieldGroup>> {\n    const response = await unifiedApi.raw.post('/admin/custom-fields/groups', group)\n    return response.data\n  }\n\n  static async updateFieldGroup(id: string, group: Partial<FieldGroup>): Promise<ApiResponse<FieldGroup>> {\n    const response = await unifiedApi.raw.put(`/admin/custom-fields/groups/${id}`, group)\n    return response.data\n  }\n\n  static async deleteFieldGroup(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete(`/admin/custom-fields/groups/${id}`)\n    return response.data\n  }\n\n  static async exportFieldGroups(ids?: string[]): Promise<ApiResponse<{ downloadUrl: string }>> {\n    const response = await unifiedApi.raw.post('/admin/custom-fields/export', { ids })\n    return response.data\n  }\n\n  static async importFieldGroups(data: FormData): Promise<ApiResponse<FieldGroup[]>> {\n    const response = await unifiedApi.raw.post('/admin/custom-fields/import', data)\n    return response.data\n  }\n\n  // Templates\n  static async getTemplates(type?: string): Promise<ApiResponse<Template[]>> {\n    const params = type ? `?type=${type}` : ''\n    const response = await unifiedApi.raw.get(`/admin/templates${params}`)\n    return response.data\n  }\n\n  static async getTemplate(id: string): Promise<ApiResponse<Template>> {\n    const response = await unifiedApi.raw.get(`/admin/templates/${id}`)\n    return response.data\n  }\n\n  static async createTemplate(template: Partial<Template>): Promise<ApiResponse<Template>> {\n    const response = await unifiedApi.raw.post('/admin/templates', template)\n    return response.data\n  }\n\n  static async updateTemplate(id: string, template: Partial<Template>): Promise<ApiResponse<Template>> {\n    const response = await unifiedApi.raw.put(`/admin/templates/${id}`, template)\n    return response.data\n  }\n\n  static async deleteTemplate(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete(`/admin/templates/${id}`)\n    return response.data\n  }\n\n  // Menus\n  static async getMenus(): Promise<ApiResponse<Menu[]>> {\n    const response = await unifiedApi.raw.get('/admin/menus')\n    return response.data\n  }\n\n  static async getMenu(id: string): Promise<ApiResponse<Menu>> {\n    const response = await unifiedApi.raw.get(`/admin/menus/${id}`)\n    return response.data\n  }\n\n  static async createMenu(menu: Partial<Menu>): Promise<ApiResponse<Menu>> {\n    const response = await unifiedApi.raw.post('/admin/menus', menu)\n    return response.data\n  }\n\n  static async updateMenu(id: string, menu: Partial<Menu>): Promise<ApiResponse<Menu>> {\n    const response = await unifiedApi.raw.put(`/admin/menus/${id}`, menu)\n    return response.data\n  }\n\n  static async deleteMenu(id: string): Promise<ApiResponse<void>> {\n    const response = await unifiedApi.raw.delete(`/admin/menus/${id}`)\n    return response.data\n  }\n\n  // Utility Functions\n  static async getAuthors(): Promise<ApiResponse<Array<{id: string, name: string}>>> {\n    const response = await unifiedApi.content.authors.list()\n    return response.data\n  }\n\n  static async generateSlug(title: string, type: 'post' | 'page' | 'category' | 'tag' = 'post'): Promise<ApiResponse<{slug: string}>> {\n    const response = await unifiedApi.raw.post('/admin/utils/generate-slug', { title, type })\n    return response.data\n  }\n\n  static async validateSlug(slug: string, type: 'post' | 'page' | 'category' | 'tag' = 'post', excludeId?: string): Promise<ApiResponse<{isValid: boolean, suggestion?: string}>> {\n    const params = new URLSearchParams({ slug, type })\n    if (excludeId) params.append('excludeId', excludeId)\n    \n    const response = await unifiedApi.raw.get(`/admin/utils/validate-slug?${params}`)\n    return response.data\n  }\n\n  static async searchContent(query: string, types?: PostType[]): Promise<ApiResponse<Post[]>> {\n    const params = new URLSearchParams({ query })\n    if (types) {\n      types.forEach((type: any) => params.append('types', type))\n    }\n    \n    const response = await unifiedApi.raw.get(`/admin/search?${params}`)\n    return response.data\n  }\n\n  static async getContentStats(): Promise<ApiResponse<{\n    posts: Record<PostStatus, number>\n    pages: Record<PostStatus, number>\n    media: { total: number; byType: Record<string, number> }\n    categories: number\n    tags: number\n  }>> {\n    const response = await unifiedApi.raw.get('/admin/stats')\n    return response.data\n  }\n}","// Re-export common formatters from @o4o/utils\nexport { formatCurrency, formatDate } from '@o4o/utils';\n\n// Admin-specific formatting utilities\nexport const formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return '0 Bytes'\n  \n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  \n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\nexport const formatNumber = (num: number): string => {\n  return new Intl.NumberFormat('ko-KR').format(num)\n}\n\nexport const formatPercentage = (value: number, decimals: number = 1): string => {\n  return `${value.toFixed(decimals)}%`\n}\n\nexport const truncateText = (text: string, maxLength: number, suffix: string = '...'): string => {\n  if (text.length <= maxLength) return text\n  return text.substring(0, maxLength - suffix.length) + suffix\n}\n\nexport const slugify = (text: string): string => {\n  return text\n    .toLowerCase()\n    .trim()\n    .replace(/[^\\w\\s-]/g, '')\n    .replace(/[\\s_-]+/g, '-')\n    .replace(/^-+|-+$/g, '')\n}","/**\n * MediaSelector Component\n * Cover Block과 Gallery Block에서 공용으로 사용하는 미디어 선택 컴포넌트\n */\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n  X,\n  Search,\n  Grid3X3,\n  List,\n  Check,\n  Upload,\n  Filter,\n  RefreshCw,\n  ChevronLeft,\n  ChevronRight,\n  Play,\n  FileImage,\n  FileVideo,\n  Loader2,\n  AlertCircle,\n  Eye,\n  Download,\n  Trash2\n} from 'lucide-react';\nimport { useDropzone } from 'react-dropzone';\nimport { MediaFile } from '@/types/content';\nimport { ContentApi } from '@/api/contentApi';\nimport { useInfiniteQuery } from '@tanstack/react-query';\nimport { useInView } from 'react-intersection-observer';\nimport toast from 'react-hot-toast';\nimport { cn } from '@/lib/utils';\nimport { formatFileSize } from '@/utils/format';\n\nexport interface MediaItem {\n  id: string;\n  url: string;\n  type: 'image' | 'video';\n  title: string;\n  alt?: string;\n  width?: number;\n  height?: number;\n  fileSize?: number;\n  mimeType?: string;\n  thumbnailUrl?: string;\n  caption?: string;\n  uploadedAt?: string;\n}\n\nexport interface MediaSelectorProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSelect: (media: MediaItem[] | MediaItem) => void;\n  multiple?: boolean;\n  acceptedTypes?: ('image' | 'video')[];\n  selectedItems?: MediaItem[];\n  maxSelection?: number;\n  title?: string;\n  className?: string;\n}\n\ninterface UploadProgress {\n  file: File;\n  progress: number;\n  status: 'uploading' | 'success' | 'error';\n  error?: string;\n}\n\ntype ViewMode = 'grid' | 'list';\ntype FilterType = 'all' | 'image' | 'video';\n\nconst MediaSelector: React.FC<MediaSelectorProps> = ({\n  isOpen,\n  onClose,\n  onSelect,\n  multiple = false,\n  acceptedTypes = ['image', 'video'],\n  selectedItems = [],\n  maxSelection = multiple ? 50 : 1,\n  title = '미디어 선택',\n  className\n}) => {\n  const [selectedFiles, setSelectedFiles] = useState<string[]>(\n    selectedItems.map(item => item.id)\n  );\n  const [viewMode, setViewMode] = useState<ViewMode>('grid');\n  const [filters, setFilters] = useState({\n    searchTerm: '',\n    fileType: acceptedTypes.length === 1 ? acceptedTypes[0] : ('all' as FilterType)\n  });\n  const [showUploader, setShowUploader] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState<UploadProgress[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [previewItem, setPreviewItem] = useState<MediaItem | null>(null);\n\n  const { ref: loadMoreRef, inView } = useInView();\n  const scrollRef = useRef<HTMLDivElement>(null);\n\n  // Transform MediaFile to MediaItem\n  const transformMediaFile = (file: MediaFile): MediaItem => ({\n    id: file.id,\n    url: file.url,\n    type: file.type === 'image' ? 'image' : file.type === 'video' ? 'video' : 'image',\n    title: file.name,\n    alt: file.altText || file.name,\n    width: file.dimensions?.width,\n    height: file.dimensions?.height,\n    fileSize: file.size,\n    mimeType: file.mimeType,\n    thumbnailUrl: file.thumbnailUrl,\n    caption: file.caption,\n    uploadedAt: file.uploadedAt\n  });\n\n  // Fetch media files with infinite scroll\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n    isLoading,\n    refetch,\n    error\n  } = useInfiniteQuery({\n    queryKey: ['mediaFiles', filters],\n    queryFn: async ({ pageParam = 1 }) => {\n      const response = await ContentApi.getMediaFiles(\n        pageParam,\n        50,\n        undefined,\n        filters.fileType === 'all' ? undefined : filters.fileType,\n        filters.searchTerm\n      );\n      return response;\n    },\n    getNextPageParam: (lastPage) => {\n      const { pagination } = lastPage;\n      if (pagination && pagination.currentPage < pagination.totalPages) {\n        return pagination.currentPage + 1;\n      }\n      return undefined;\n    },\n    initialPageParam: 1,\n    enabled: isOpen\n  });\n\n  // Auto-load more when scrolled to bottom\n  useEffect(() => {\n    if (inView && hasNextPage && !isFetchingNextPage) {\n      fetchNextPage();\n    }\n  }, [inView, hasNextPage, isFetchingNextPage, fetchNextPage]);\n\n  // Reset selections when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      setSelectedFiles(selectedItems.map(item => item.id));\n    }\n  }, [isOpen, selectedItems]);\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!isOpen) return;\n\n      switch (e.key) {\n        case 'Escape':\n          e.preventDefault();\n          onClose();\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (selectedFiles.length > 0) {\n            handleConfirmSelection();\n          }\n          break;\n        case 'a':\n          if (e.ctrlKey || e.metaKey) {\n            e.preventDefault();\n            handleSelectAll();\n          }\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, selectedFiles, onClose]);\n\n  const allFiles = data?.pages.flatMap(page =>\n    page.data?.map(transformMediaFile) || []\n  ) || [];\n\n  const selectedFileObjects = allFiles.filter(file => selectedFiles.includes(file.id));\n\n  // Handle file selection\n  const handleFileSelect = useCallback((fileId: string) => {\n    if (multiple) {\n      setSelectedFiles(prev => {\n        if (prev.includes(fileId)) {\n          return prev.filter(id => id !== fileId);\n        }\n        if (prev.length >= maxSelection) {\n          toast.error(`최대 ${maxSelection}개까지 선택할 수 있습니다.`);\n          return prev;\n        }\n        return [...prev, fileId];\n      });\n    } else {\n      setSelectedFiles([fileId]);\n    }\n  }, [multiple, maxSelection]);\n\n  // Handle select all\n  const handleSelectAll = useCallback(() => {\n    if (selectedFiles.length === allFiles.length) {\n      setSelectedFiles([]);\n    } else {\n      const fileIds = allFiles.slice(0, maxSelection).map(file => file.id);\n      setSelectedFiles(fileIds);\n      if (allFiles.length > maxSelection) {\n        toast.error(`최대 ${maxSelection}개까지 선택할 수 있습니다.`);\n      }\n    }\n  }, [selectedFiles.length, allFiles, maxSelection]);\n\n  // Handle confirm selection\n  const handleConfirmSelection = useCallback(() => {\n    if (multiple) {\n      onSelect(selectedFileObjects);\n    } else if (selectedFileObjects.length > 0) {\n      onSelect(selectedFileObjects[0]);\n    }\n    onClose();\n  }, [multiple, selectedFileObjects, onSelect, onClose]);\n\n  // Update filter\n  const updateFilter = useCallback((key: string, value: string) => {\n    setFilters(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  }, []);\n\n  // File drop handling\n  const onDrop = useCallback((acceptedFiles: File[]) => {\n    setShowUploader(true);\n    handleFileUpload(acceptedFiles);\n  }, []);\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: acceptedTypes.reduce((acc, type) => {\n      acc[`${type}/*`] = [];\n      return acc;\n    }, {} as Record<string, string[]>),\n    maxFiles: 10,\n    maxSize: 100 * 1024 * 1024, // 100MB\n    noClick: true\n  });\n\n  // Handle file upload\n  const handleFileUpload = async (files: File[]) => {\n    setIsUploading(true);\n    const uploadItems: UploadProgress[] = files.map(file => ({\n      file,\n      progress: 0,\n      status: 'uploading' as const\n    }));\n\n    setUploadProgress(uploadItems);\n\n    try {\n      // Simulate progress\n      const progressInterval = setInterval(() => {\n        setUploadProgress(prev => prev.map(item => ({\n          ...item,\n          progress: Math.min(item.progress + Math.random() * 20, 90)\n        })));\n      }, 500);\n\n      await ContentApi.uploadFiles(files);\n\n      clearInterval(progressInterval);\n\n      setUploadProgress(prev => prev.map(item => ({\n        ...item,\n        progress: 100,\n        status: 'success' as const\n      })));\n\n      toast.success(`${files.length}개 파일이 업로드되었습니다.`);\n\n      // Refresh media list\n      setTimeout(() => {\n        refetch();\n        setShowUploader(false);\n        setUploadProgress([]);\n      }, 1000);\n\n    } catch (error: any) {\n      setUploadProgress(prev => prev.map(item => ({\n        ...item,\n        status: 'error' as const,\n        error: error.message || '업로드에 실패했습니다.'\n      })));\n      toast.error('업로드에 실패했습니다.');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  // Render file icon\n  const renderFileIcon = (item: MediaItem) => {\n    if (item.type === 'video') {\n      return <FileVideo className=\"w-8 h-8 text-purple-500\" />;\n    }\n    return <FileImage className=\"w-8 h-8 text-blue-500\" />;\n  };\n\n  // Render media item\n  const renderMediaItem = (item: MediaItem, index: number) => {\n    const isSelected = selectedFiles.includes(item.id);\n\n    if (viewMode === 'list') {\n      return (\n        <div\n          key={item.id}\n          className={cn(\n            \"flex items-center gap-4 p-3 rounded-lg border cursor-pointer transition-all\",\n            isSelected\n              ? \"border-blue-500 bg-blue-50\"\n              : \"border-gray-200 hover:border-gray-300 hover:bg-gray-50\"\n          )}\n          onClick={() => handleFileSelect(item.id)}\n          role=\"button\"\n          tabIndex={0}\n          aria-label={`Select ${item.title}`}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' || e.key === ' ') {\n              e.preventDefault();\n              handleFileSelect(item.id);\n            }\n          }}\n        >\n          <div className=\"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden bg-gray-100\">\n            {item.type === 'image' ? (\n              <img\n                src={item.thumbnailUrl || item.url}\n                alt={item.alt || item.title}\n                className=\"w-full h-full object-cover\"\n                loading=\"lazy\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center\">\n                <Play className=\"w-6 h-6 text-purple-500\" />\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex-1 min-w-0\">\n            <h4 className=\"text-sm font-medium text-gray-900 truncate\">\n              {item.title}\n            </h4>\n            <div className=\"flex items-center gap-2 text-xs text-gray-500 mt-1\">\n              <span className=\"capitalize\">{item.type}</span>\n              {item.fileSize && (\n                <>\n                  <span>•</span>\n                  <span>{formatFileSize(item.fileSize)}</span>\n                </>\n              )}\n              {item.width && item.height && (\n                <>\n                  <span>•</span>\n                  <span>{item.width} × {item.height}</span>\n                </>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                setPreviewItem(item);\n              }}\n              className=\"p-1 text-gray-400 hover:text-gray-600 rounded\"\n              title=\"미리보기\"\n            >\n              <Eye className=\"w-4 h-4\" />\n            </button>\n\n            {isSelected && (\n              <div className=\"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center\">\n                <Check className=\"w-3 h-3 text-white\" />\n              </div>\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    // Grid view\n    return (\n      <div\n        key={item.id}\n        className={cn(\n          \"relative aspect-square rounded-lg overflow-hidden cursor-pointer transition-all group\",\n          isSelected\n            ? \"ring-2 ring-blue-500 ring-offset-2\"\n            : \"hover:ring-2 hover:ring-gray-300 hover:ring-offset-1\"\n        )}\n        onClick={() => handleFileSelect(item.id)}\n        role=\"button\"\n        tabIndex={0}\n        aria-label={`Select ${item.title}`}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            handleFileSelect(item.id);\n          }\n        }}\n      >\n        {item.type === 'image' ? (\n          <img\n            src={item.thumbnailUrl || item.url}\n            alt={item.alt || item.title}\n            className=\"w-full h-full object-cover\"\n            loading=\"lazy\"\n          />\n        ) : (\n          <div className=\"w-full h-full bg-gray-900 flex items-center justify-center\">\n            <Play className=\"w-8 h-8 text-white opacity-80\" />\n          </div>\n        )}\n\n        {/* Overlay */}\n        <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity\" />\n\n        {/* Selection indicator */}\n        <div className=\"absolute top-2 right-2\">\n          {isSelected ? (\n            <div className=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\n              <Check className=\"w-4 h-4 text-white\" />\n            </div>\n          ) : (\n            <div className=\"w-6 h-6 border-2 border-white rounded-full bg-black bg-opacity-20 opacity-0 group-hover:opacity-100 transition-opacity\" />\n          )}\n        </div>\n\n        {/* Preview button */}\n        <div className=\"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setPreviewItem(item);\n            }}\n            className=\"p-1 bg-black bg-opacity-50 text-white rounded hover:bg-opacity-70\"\n            title=\"미리보기\"\n          >\n            <Eye className=\"w-4 h-4\" />\n          </button>\n        </div>\n\n        {/* Type indicator */}\n        {item.type === 'video' && (\n          <div className=\"absolute bottom-2 left-2\">\n            <div className=\"px-2 py-1 bg-black bg-opacity-70 text-white text-xs rounded\">\n              비디오\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Upload modal\n  const UploadModal = () => {\n    if (!showUploader) return null;\n\n    return (\n      <div className=\"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center z-10\">\n        <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-semibold\">파일 업로드</h3>\n            <button\n              onClick={() => setShowUploader(false)}\n              disabled={isUploading}\n              className=\"text-gray-400 hover:text-gray-600\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n          </div>\n\n          {uploadProgress.length > 0 && (\n            <div className=\"space-y-3\">\n              {uploadProgress.map((item, index) => (\n                <div key={index} className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm truncate\">{item.file.name}</span>\n                    <span className=\"text-xs text-gray-500\">\n                      {Math.round(item.progress)}%\n                    </span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                    <div\n                      className={cn(\n                        \"h-2 rounded-full transition-all\",\n                        item.status === 'error' ? 'bg-red-500' : 'bg-blue-500'\n                      )}\n                      style={{ width: `${item.progress}%` }}\n                    />\n                  </div>\n                  {item.error && (\n                    <p className=\"text-xs text-red-600\">{item.error}</p>\n                  )}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // Preview modal\n  const PreviewModal = () => {\n    if (!previewItem) return null;\n\n    return (\n      <div\n        className=\"absolute inset-0 bg-black bg-opacity-90 flex items-center justify-center z-20\"\n        onClick={() => setPreviewItem(null)}\n      >\n        <div className=\"max-w-4xl max-h-screen p-8 relative\">\n          <button\n            onClick={() => setPreviewItem(null)}\n            className=\"absolute -top-4 -right-4 p-2 bg-white rounded-full text-gray-600 hover:text-gray-800\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n\n          {previewItem.type === 'image' ? (\n            <img\n              src={previewItem.url}\n              alt={previewItem.alt || previewItem.title}\n              className=\"max-w-full max-h-full object-contain\"\n              onClick={(e) => e.stopPropagation()}\n            />\n          ) : (\n            <video\n              src={previewItem.url}\n              controls\n              className=\"max-w-full max-h-full\"\n              onClick={(e) => e.stopPropagation()}\n            />\n          )}\n\n          <div className=\"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black to-transparent text-white\">\n            <h3 className=\"font-medium\">{previewItem.title}</h3>\n            {previewItem.caption && (\n              <p className=\"text-sm opacity-80 mt-1\">{previewItem.caption}</p>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className={cn(\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\", className)}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"media-selector-title\"\n      {...getRootProps()}\n    >\n      <div\n        className=\"bg-white rounded-lg max-w-6xl w-full mx-4 h-[90vh] overflow-hidden flex flex-col\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"p-6 border-b border-gray-200\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 id=\"media-selector-title\" className=\"text-xl font-semibold text-gray-900\">\n              {title}\n            </h2>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 p-1 rounded\"\n              aria-label=\"닫기\"\n            >\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {/* Filters */}\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"파일명으로 검색...\"\n                  value={filters.searchTerm}\n                  onChange={(e) => updateFilter('searchTerm', e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  aria-label=\"검색\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex gap-2\">\n              {acceptedTypes.length > 1 && (\n                <select\n                  value={filters.fileType}\n                  onChange={(e) => updateFilter('fileType', e.target.value)}\n                  className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  aria-label=\"파일 타입 필터\"\n                >\n                  <option value=\"all\">모든 파일</option>\n                  {acceptedTypes.map(type => (\n                    <option key={type} value={type}>\n                      {type === 'image' ? '이미지' : '비디오'}\n                    </option>\n                  ))}\n                </select>\n              )}\n\n              <div className=\"flex items-center bg-gray-100 rounded-lg p-1\">\n                <button\n                  onClick={() => setViewMode('grid')}\n                  className={cn(\n                    \"p-2 rounded transition-colors\",\n                    viewMode === 'grid' ? 'bg-white shadow-sm text-blue-600' : 'text-gray-500'\n                  )}\n                  title=\"그리드 뷰\"\n                  aria-label=\"그리드 뷰\"\n                >\n                  <Grid3X3 className=\"w-4 h-4\" />\n                </button>\n                <button\n                  onClick={() => setViewMode('list')}\n                  className={cn(\n                    \"p-2 rounded transition-colors\",\n                    viewMode === 'list' ? 'bg-white shadow-sm text-blue-600' : 'text-gray-500'\n                  )}\n                  title=\"리스트 뷰\"\n                  aria-label=\"리스트 뷰\"\n                >\n                  <List className=\"w-4 h-4\" />\n                </button>\n              </div>\n\n              <input {...getInputProps()} />\n              <button\n                onClick={() => {\n                  const input = document.createElement('input');\n                  input.type = 'file';\n                  input.multiple = true;\n                  input.accept = acceptedTypes.map(type => `${type}/*`).join(',');\n                  input.onchange = (e) => {\n                    const files = Array.from((e.target as HTMLInputElement).files || []);\n                    if (files.length > 0) {\n                      setShowUploader(true);\n                      handleFileUpload(files);\n                    }\n                  };\n                  input.click();\n                }}\n                className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2\"\n                aria-label=\"파일 업로드\"\n              >\n                <Upload className=\"w-4 h-4\" />\n                업로드\n              </button>\n\n              {multiple && allFiles.length > 0 && (\n                <button\n                  onClick={handleSelectAll}\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors text-sm\"\n                  aria-label={selectedFiles.length === allFiles.length ? '전체 선택 해제' : '전체 선택'}\n                >\n                  {selectedFiles.length === allFiles.length ? '전체 해제' : '전체 선택'}\n                </button>\n              )}\n            </div>\n          </div>\n\n          {isDragActive && (\n            <div className=\"absolute inset-0 bg-blue-500 bg-opacity-10 border-2 border-dashed border-blue-500 rounded-lg flex items-center justify-center\">\n              <div className=\"text-blue-600 text-lg font-medium\">\n                파일을 여기에 놓으세요\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-6\" ref={scrollRef}>\n          {isLoading ? (\n            <div className=\"flex items-center justify-center h-64\">\n              <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n              <span className=\"ml-2 text-gray-600\">미디어를 불러오는 중...</span>\n            </div>\n          ) : error ? (\n            <div className=\"flex items-center justify-center h-64 text-red-600\">\n              <AlertCircle className=\"w-8 h-8 mr-2\" />\n              <span>미디어를 불러오는데 실패했습니다.</span>\n            </div>\n          ) : allFiles.length === 0 ? (\n            <div className=\"flex flex-col items-center justify-center h-64 text-gray-500\">\n              <FileImage className=\"w-16 h-16 mb-4\" />\n              <span className=\"text-lg font-medium mb-2\">미디어 파일이 없습니다</span>\n              <span className=\"text-sm\">파일을 업로드하거나 검색 조건을 변경해보세요</span>\n            </div>\n          ) : (\n            <>\n              <div className={cn(\n                viewMode === 'grid'\n                  ? \"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\"\n                  : \"space-y-2\"\n              )}>\n                {allFiles.map((item, index) => renderMediaItem(item, index))}\n              </div>\n\n              {/* Load More Trigger */}\n              {hasNextPage && (\n                <div ref={loadMoreRef} className=\"flex justify-center py-8\">\n                  {isFetchingNextPage && (\n                    <Loader2 className=\"w-6 h-6 animate-spin text-blue-500\" />\n                  )}\n                </div>\n              )}\n            </>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-6 border-t border-gray-200 bg-gray-50\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"text-sm text-gray-600\">\n              {selectedFiles.length > 0 ? (\n                <span>\n                  {selectedFiles.length}개 선택됨\n                  {multiple && maxSelection > 1 && ` (최대 ${maxSelection}개)`}\n                </span>\n              ) : (\n                <span>파일을 선택하세요</span>\n              )}\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\n              >\n                취소\n              </button>\n              <button\n                onClick={handleConfirmSelection}\n                disabled={selectedFiles.length === 0}\n                className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n              >\n                <Check className=\"w-4 h-4\" />\n                선택 완료\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* Upload Modal */}\n        <UploadModal />\n\n        {/* Preview Modal */}\n        <PreviewModal />\n      </div>\n    </div>\n  );\n};\n\nexport default MediaSelector;","import React, { useState } from 'react';\nimport { Upload, X, Image as ImageIcon } from 'lucide-react';\nimport MediaSelector from '@/components/editor/blocks/shared/MediaSelector';\nimport type { MediaItem } from '@/components/editor/blocks/shared/MediaSelector';\n\ninterface AstraImageUploaderProps {\n  label: string;\n  value: string | null;\n  onChange: (value: string | null) => void;\n  description?: string;\n  accept?: string;\n  maxSize?: number; // in MB\n  preview?: boolean;\n}\n\nexport const AstraImageUploader: React.FC<AstraImageUploaderProps> = ({\n  label,\n  value,\n  onChange,\n  description,\n  accept = 'image/*',\n  maxSize = 5,\n  preview = true,\n}) => {\n  const [showMediaSelector, setShowMediaSelector] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  const handleMediaSelect = (media: MediaItem[] | MediaItem) => {\n    const selectedMedia = Array.isArray(media) ? media[0] : media;\n    if (selectedMedia) {\n      // Add timestamp for cache busting\n      const urlWithTimestamp = `${selectedMedia.url}${selectedMedia.url.includes('?') ? '&' : '?'}t=${Date.now()}`;\n      onChange(urlWithTimestamp);\n      \n      // Force preview refresh\n      const iframe = document.getElementById('customizer-preview-iframe') as HTMLIFrameElement;\n      if (iframe) {\n        // Send message to iframe to update logo\n        iframe.contentWindow?.postMessage(\n          { \n            type: 'update-logo', \n            url: urlWithTimestamp \n          },\n          '*'\n        );\n        \n        // Also trigger a refresh after a short delay\n        setTimeout(() => {\n          iframe.src = iframe.src;\n        }, 500);\n      }\n    }\n    setShowMediaSelector(false);\n  };\n  \n  const handleRemove = () => {\n    onChange(null);\n    setError(null);\n  };\n  \n  const handleButtonClick = () => {\n    setShowMediaSelector(true);\n  };\n  \n  return (\n    <>\n      <div className=\"astra-control astra-image-uploader\">\n        <div className=\"astra-control-header\">\n          <label className=\"astra-control-label\">{label}</label>\n          {description && (\n            <span className=\"astra-control-description\">{description}</span>\n          )}\n        </div>\n        \n        <div className={`astra-upload-area ${value ? 'has-image' : ''}`}>\n          {value && preview ? (\n            <div className=\"astra-upload-preview\">\n              <img src={value} alt=\"Preview\" className=\"astra-upload-image\" />\n              <button\n                onClick={handleRemove}\n                className=\"astra-upload-remove\"\n                title=\"Remove image\"\n              >\n                <X size={16} />\n              </button>\n            </div>\n          ) : (\n            <div className=\"astra-upload-placeholder\">\n              <ImageIcon size={32} className=\"astra-upload-icon\" />\n              <p className=\"astra-upload-text\">\n                Click to select an image from Media Library\n              </p>\n              <button\n                onClick={handleButtonClick}\n                className=\"astra-upload-button\"\n                type=\"button\"\n              >\n                <Upload size={16} />\n                Open Media Library\n              </button>\n            </div>\n          )}\n        </div>\n        \n        {error && <div className=\"astra-control-error\">{error}</div>}\n        \n        {value && !preview && (\n          <div className=\"astra-upload-filename\">\n            <ImageIcon size={14} />\n            <span>Image selected</span>\n            <button onClick={handleRemove} className=\"astra-upload-clear\">\n              <X size={14} />\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Media Selector Modal */}\n      <MediaSelector\n        isOpen={showMediaSelector}\n        onClose={() => setShowMediaSelector(false)}\n        onSelect={handleMediaSelect}\n        multiple={false}\n        acceptedTypes={['image']}\n        title=\"Select Image\"\n      />\n    </>\n  );\n};","import React, { useState, useCallback } from 'react';\nimport { Monitor, Tablet, Smartphone } from 'lucide-react';\nimport { ResponsiveValue, PreviewDevice } from '../../types/customizer-types';\nimport { useCustomizer } from '../../context/CustomizerContext';\n\ntype Unit = 'px' | 'em' | 'rem' | '%' | 'vh' | 'vw';\n\ninterface AstraSliderProps {\n  label: string;\n  value: number | ResponsiveValue<number>;\n  onChange: (value: number | ResponsiveValue<number>) => void;\n  min?: number;\n  max?: number;\n  step?: number;\n  unit?: Unit | Unit[];\n  description?: string;\n  responsive?: boolean;\n  defaultUnit?: Unit;\n}\n\nexport const AstraSlider: React.FC<AstraSliderProps> = ({\n  label,\n  value,\n  onChange,\n  min = 0,\n  max = 100,\n  step = 1,\n  unit = 'px',\n  description,\n  responsive = false,\n  defaultUnit = 'px',\n}) => {\n  const { state } = useCustomizer();\n  const currentDevice = state.previewDevice;\n  \n  const [selectedUnit, setSelectedUnit] = useState<Unit>(defaultUnit);\n  const [linkedDevices, setLinkedDevices] = useState(true);\n  \n  const units = Array.isArray(unit) ? unit : [unit];\n  \n  // Get value for current device\n  const getCurrentValue = (): number => {\n    if (typeof value === 'number') {\n      return value;\n    }\n    return value[currentDevice];\n  };\n  \n  // Handle value change\n  const handleChange = (newValue: number, device?: PreviewDevice) => {\n    if (!responsive || typeof value === 'number') {\n      onChange(newValue);\n      return;\n    }\n    \n    const targetDevice = device || currentDevice;\n    const responsiveValue = value as ResponsiveValue<number>;\n    \n    if (linkedDevices) {\n      // Update all devices with the same value\n      onChange({\n        desktop: newValue,\n        tablet: newValue,\n        mobile: newValue,\n      });\n    } else {\n      // Update only the target device\n      onChange({\n        ...responsiveValue,\n        [targetDevice]: newValue,\n      });\n    }\n  };\n  \n  // Get max value based on unit\n  const getMaxValue = (): number => {\n    switch (selectedUnit) {\n      case '%':\n      case 'vh':\n      case 'vw':\n        return 100;\n      case 'em':\n      case 'rem':\n        return 10;\n      default:\n        return max;\n    }\n  };\n  \n  // Get step based on unit\n  const getStep = (): number => {\n    switch (selectedUnit) {\n      case 'em':\n      case 'rem':\n        return 0.1;\n      default:\n        return step;\n    }\n  };\n  \n  const renderDeviceControls = () => {\n    if (!responsive || typeof value === 'number') return null;\n    \n    const responsiveValue = value as ResponsiveValue<number>;\n    \n    return (\n      <div className=\"astra-slider-devices\">\n        <div className=\"astra-device-buttons\">\n          <button\n            className={`astra-device-button ${currentDevice === 'desktop' ? 'active' : ''}`}\n            onClick={() => handleChange(responsiveValue.desktop, 'desktop')}\n            title=\"Desktop\"\n          >\n            <Monitor size={14} />\n          </button>\n          <button\n            className={`astra-device-button ${currentDevice === 'tablet' ? 'active' : ''}`}\n            onClick={() => handleChange(responsiveValue.tablet, 'tablet')}\n            title=\"Tablet\"\n          >\n            <Tablet size={14} />\n          </button>\n          <button\n            className={`astra-device-button ${currentDevice === 'mobile' ? 'active' : ''}`}\n            onClick={() => handleChange(responsiveValue.mobile, 'mobile')}\n            title=\"Mobile\"\n          >\n            <Smartphone size={14} />\n          </button>\n        </div>\n        \n        <button\n          onClick={() => setLinkedDevices(!linkedDevices)}\n          className={`astra-link-button ${linkedDevices ? 'linked' : ''}`}\n          title={linkedDevices ? 'Unlink values' : 'Link values'}\n        >\n          🔗\n        </button>\n      </div>\n    );\n  };\n  \n  const currentValue = getCurrentValue();\n  const maxValue = getMaxValue();\n  const stepValue = getStep();\n  \n  return (\n    <div className=\"astra-control astra-slider\">\n      <div className=\"astra-control-header\">\n        <label className=\"astra-control-label\">{label}</label>\n        {renderDeviceControls()}\n      </div>\n      \n      {description && (\n        <span className=\"astra-control-description\">{description}</span>\n      )}\n      \n      <div className=\"astra-slider-container\">\n        <div className=\"astra-slider-track-wrapper\">\n          <input\n            type=\"range\"\n            min={min}\n            max={maxValue}\n            step={stepValue}\n            value={currentValue}\n            onChange={(e) => handleChange(parseFloat(e.target.value))}\n            className=\"astra-slider-track\"\n            style={{\n              background: `linear-gradient(to right, #0073aa 0%, #0073aa ${\n                ((currentValue - min) / (maxValue - min)) * 100\n              }%, #ddd ${((currentValue - min) / (maxValue - min)) * 100}%, #ddd 100%)`,\n            }}\n          />\n        </div>\n        \n        <div className=\"astra-slider-input-group\">\n          <input\n            type=\"number\"\n            min={min}\n            max={maxValue}\n            step={stepValue}\n            value={currentValue}\n            onChange={(e) => handleChange(parseFloat(e.target.value) || 0)}\n            className=\"astra-slider-input\"\n          />\n          \n          {units.length > 1 ? (\n            <select\n              value={selectedUnit}\n              onChange={(e) => setSelectedUnit(e.target.value as Unit)}\n              className=\"astra-slider-unit\"\n            >\n              {units.map((u) => (\n                <option key={u} value={u}>\n                  {u}\n                </option>\n              ))}\n            </select>\n          ) : (\n            <span className=\"astra-slider-unit-label\">{units[0]}</span>\n          )}\n        </div>\n      </div>\n      \n      {responsive && typeof value !== 'number' && !linkedDevices && (\n        <div className=\"astra-slider-values\">\n          <span>D: {value.desktop}{selectedUnit}</span>\n          <span>T: {value.tablet}{selectedUnit}</span>\n          <span>M: {value.mobile}{selectedUnit}</span>\n        </div>\n      )}\n    </div>\n  );\n};","import React from 'react';\n\ninterface AstraToggleProps {\n  label: string;\n  value: boolean;\n  onChange: (value: boolean) => void;\n  description?: string;\n  disabled?: boolean;\n}\n\nexport const AstraToggle: React.FC<AstraToggleProps> = ({\n  label,\n  value,\n  onChange,\n  description,\n  disabled = false,\n}) => {\n  return (\n    <div className=\"astra-control astra-toggle\">\n      <div className=\"astra-toggle-container\">\n        <div className=\"astra-toggle-content\">\n          <label className=\"astra-control-label\">{label}</label>\n          {description && (\n            <span className=\"astra-control-description\">{description}</span>\n          )}\n        </div>\n        \n        <button\n          onClick={() => !disabled && onChange(!value)}\n          className={`astra-toggle-switch ${value ? 'active' : ''} ${disabled ? 'disabled' : ''}`}\n          disabled={disabled}\n          role=\"switch\"\n          aria-checked={value}\n          aria-label={label}\n        >\n          <span className=\"astra-toggle-slider\" />\n        </button>\n      </div>\n    </div>\n  );\n};","import React, { useState, useRef, useEffect } from 'react';\nimport { X, Pipette } from 'lucide-react';\nimport { ColorState } from '../../types/customizer-types';\n\ninterface AstraColorPickerProps {\n  label: string;\n  value: string | ColorState;\n  onChange: (value: string | ColorState) => void;\n  description?: string;\n  hasHover?: boolean;\n  clearable?: boolean;\n}\n\nexport const AstraColorPicker: React.FC<AstraColorPickerProps> = ({\n  label,\n  value,\n  onChange,\n  description,\n  hasHover = false,\n  clearable = true,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [activeTab, setActiveTab] = useState<'normal' | 'hover'>('normal');\n  const pickerRef = useRef<HTMLDivElement>(null);\n  \n  // Convert value to ColorState format\n  const colorState: ColorState = typeof value === 'string' \n    ? { normal: value, hover: undefined }\n    : value;\n  \n  const handleColorChange = (color: string, state: 'normal' | 'hover') => {\n    if (hasHover) {\n      onChange({\n        ...colorState,\n        [state]: color,\n      });\n    } else {\n      onChange(color);\n    }\n  };\n  \n  const handleClear = (state: 'normal' | 'hover') => {\n    if (hasHover) {\n      onChange({\n        ...colorState,\n        [state]: state === 'hover' ? undefined : '',\n      });\n    } else {\n      onChange('');\n    }\n  };\n  \n  // Predefined color palette\n  const colorPalette = [\n    '#000000', '#FFFFFF', '#F44336', '#E91E63', '#9C27B0',\n    '#673AB7', '#3F51B5', '#2196F3', '#03A9F4', '#00BCD4',\n    '#009688', '#4CAF50', '#8BC34A', '#CDDC39', '#FFEB3B',\n    '#FFC107', '#FF9800', '#FF5722', '#795548', '#9E9E9E',\n  ];\n  \n  // Close picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (pickerRef.current && !pickerRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    \n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n  \n  const renderColorInput = (state: 'normal' | 'hover') => {\n    const currentColor = state === 'normal' ? colorState.normal : colorState.hover;\n    \n    return (\n      <div className=\"astra-color-input-group\">\n        <div className=\"astra-color-input-wrapper\">\n          <input\n            type=\"text\"\n            value={currentColor || ''}\n            onChange={(e) => handleColorChange(e.target.value, state)}\n            placeholder=\"#000000\"\n            className=\"astra-color-input\"\n          />\n          <input\n            type=\"color\"\n            value={currentColor || '#000000'}\n            onChange={(e) => handleColorChange(e.target.value, state)}\n            className=\"astra-color-native-picker\"\n          />\n        </div>\n        \n        {clearable && currentColor && (\n          <button\n            onClick={() => handleClear(state)}\n            className=\"astra-color-clear\"\n            title=\"Clear color\"\n          >\n            <X size={14} />\n          </button>\n        )}\n      </div>\n    );\n  };\n  \n  return (\n    <div className=\"astra-control astra-color-picker\">\n      <div className=\"astra-control-header\">\n        <label className=\"astra-control-label\">{label}</label>\n        {description && (\n          <span className=\"astra-control-description\">{description}</span>\n        )}\n      </div>\n      \n      <div className=\"astra-color-picker-container\" ref={pickerRef}>\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"astra-color-preview-button\"\n          style={{\n            background: hasHover && activeTab === 'hover' \n              ? colorState.hover || 'transparent'\n              : colorState.normal || 'transparent',\n          }}\n        >\n          <Pipette size={16} />\n        </button>\n        \n        {isOpen && (\n          <div className=\"astra-color-picker-dropdown\">\n            {hasHover && (\n              <div className=\"astra-color-tabs\">\n                <button\n                  onClick={() => setActiveTab('normal')}\n                  className={`astra-color-tab ${activeTab === 'normal' ? 'active' : ''}`}\n                >\n                  Normal\n                </button>\n                <button\n                  onClick={() => setActiveTab('hover')}\n                  className={`astra-color-tab ${activeTab === 'hover' ? 'active' : ''}`}\n                >\n                  Hover\n                </button>\n              </div>\n            )}\n            \n            <div className=\"astra-color-picker-content\">\n              {renderColorInput(hasHover ? activeTab : 'normal')}\n              \n              <div className=\"astra-color-palette\">\n                {colorPalette.map((color) => (\n                  <button\n                    key={color}\n                    onClick={() => handleColorChange(color, hasHover ? activeTab : 'normal')}\n                    className=\"astra-color-palette-item\"\n                    style={{ background: color }}\n                    title={color}\n                  />\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { useCustomizerState } from '../../hooks/useCustomizerState';\nimport { AstraImageUploader } from '../../components/controls/AstraImageUploader';\nimport { AstraSlider } from '../../components/controls/AstraSlider';\nimport { AstraToggle } from '../../components/controls/AstraToggle';\nimport { AstraColorPicker } from '../../components/controls/AstraColorPicker';\nimport { Monitor, Tablet, Smartphone } from 'lucide-react';\n\nexport const SiteIdentitySection: React.FC = () => {\n  const { settings, updateSetting } = useCustomizerState();\n  const siteIdentity = settings.siteIdentity;\n  \n  const [logoTab, setLogoTab] = React.useState<'desktop' | 'mobile'>('desktop');\n  \n  return (\n    <div className=\"astra-section site-identity-section\">\n      <div className=\"astra-section-title\">Site Identity</div>\n      \n      {/* Logo Upload */}\n      <div className=\"astra-section-group\">\n        <h4 className=\"astra-group-title\">Logo</h4>\n        \n        {/* Logo Tabs */}\n        <div className=\"astra-tabs\">\n          <button\n            onClick={() => setLogoTab('desktop')}\n            className={`astra-tab ${logoTab === 'desktop' ? 'active' : ''}`}\n          >\n            <Monitor size={14} />\n            Desktop Logo\n          </button>\n          <button\n            onClick={() => setLogoTab('mobile')}\n            className={`astra-tab ${logoTab === 'mobile' ? 'active' : ''}`}\n          >\n            <Smartphone size={14} />\n            Mobile Logo\n          </button>\n        </div>\n        \n        {logoTab === 'desktop' ? (\n          <AstraImageUploader\n            label=\"Desktop Logo\"\n            value={siteIdentity.logo.desktop}\n            onChange={(value) =>\n              updateSetting('siteIdentity', value, ['logo', 'desktop'])\n            }\n            description=\"The logo will be displayed in the header on desktop devices\"\n          />\n        ) : (\n          <AstraImageUploader\n            label=\"Mobile Logo\"\n            value={siteIdentity.logo.mobile}\n            onChange={(value) =>\n              updateSetting('siteIdentity', value, ['logo', 'mobile'])\n            }\n            description=\"Optional: Different logo for mobile devices\"\n          />\n        )}\n        \n        {/* Logo Width */}\n        <AstraSlider\n          label=\"Logo Width\"\n          value={siteIdentity.logo.width}\n          onChange={(value) =>\n            updateSetting('siteIdentity', value, ['logo', 'width'])\n          }\n          min={50}\n          max={600}\n          unit=\"px\"\n          responsive={true}\n          description=\"Set the width of your logo\"\n        />\n      </div>\n      \n      {/* Site Title */}\n      <div className=\"astra-section-group\">\n        <h4 className=\"astra-group-title\">Site Title</h4>\n        \n        <AstraToggle\n          label=\"Display Site Title\"\n          value={siteIdentity.siteTitle.show}\n          onChange={(value) =>\n            updateSetting('siteIdentity', value, ['siteTitle', 'show'])\n          }\n          description=\"Show or hide the site title in the header\"\n        />\n        \n        {siteIdentity.siteTitle.show && (\n          <>\n            <div className=\"astra-control\">\n              <label className=\"astra-control-label\">Site Title Text</label>\n              <input\n                type=\"text\"\n                value={siteIdentity.siteTitle.text}\n                onChange={(e) =>\n                  updateSetting('siteIdentity', e.target.value, ['siteTitle', 'text'])\n                }\n                className=\"astra-text-input\"\n                placeholder=\"Enter your site title\"\n              />\n            </div>\n            \n            <AstraColorPicker\n              label=\"Title Color\"\n              value={siteIdentity.siteTitle.color}\n              onChange={(value) =>\n                updateSetting('siteIdentity', value, ['siteTitle', 'color'])\n              }\n              hasHover={true}\n              description=\"Set the color for your site title\"\n            />\n            \n            <AstraSlider\n              label=\"Title Font Size\"\n              value={siteIdentity.siteTitle.typography.fontSize}\n              onChange={(value) =>\n                updateSetting('siteIdentity', value, ['siteTitle', 'typography', 'fontSize'])\n              }\n              min={10}\n              max={60}\n              unit=\"px\"\n              responsive={true}\n            />\n            \n            <div className=\"astra-control\">\n              <label className=\"astra-control-label\">Font Weight</label>\n              <select\n                value={siteIdentity.siteTitle.typography.fontWeight}\n                onChange={(e) =>\n                  updateSetting('siteIdentity', Number(e.target.value), [\n                    'siteTitle',\n                    'typography',\n                    'fontWeight',\n                  ])\n                }\n                className=\"astra-select-input\"\n              >\n                <option value={300}>Light (300)</option>\n                <option value={400}>Normal (400)</option>\n                <option value={500}>Medium (500)</option>\n                <option value={600}>Semi Bold (600)</option>\n                <option value={700}>Bold (700)</option>\n                <option value={800}>Extra Bold (800)</option>\n                <option value={900}>Black (900)</option>\n              </select>\n            </div>\n          </>\n        )}\n      </div>\n      \n      {/* Tagline */}\n      <div className=\"astra-section-group\">\n        <h4 className=\"astra-group-title\">Tagline</h4>\n        \n        <AstraToggle\n          label=\"Display Tagline\"\n          value={siteIdentity.tagline.show}\n          onChange={(value) =>\n            updateSetting('siteIdentity', value, ['tagline', 'show'])\n          }\n          description=\"Show or hide the site tagline\"\n        />\n        \n        {siteIdentity.tagline.show && (\n          <>\n            <div className=\"astra-control\">\n              <label className=\"astra-control-label\">Tagline Text</label>\n              <input\n                type=\"text\"\n                value={siteIdentity.tagline.text}\n                onChange={(e) =>\n                  updateSetting('siteIdentity', e.target.value, ['tagline', 'text'])\n                }\n                className=\"astra-text-input\"\n                placeholder=\"Enter your tagline\"\n              />\n            </div>\n            \n            <AstraColorPicker\n              label=\"Tagline Color\"\n              value={siteIdentity.tagline.color}\n              onChange={(value) =>\n                updateSetting('siteIdentity', value, ['tagline', 'color'])\n              }\n              hasHover={true}\n              description=\"Set the color for your tagline\"\n            />\n            \n            <AstraSlider\n              label=\"Tagline Font Size\"\n              value={siteIdentity.tagline.typography.fontSize}\n              onChange={(value) =>\n                updateSetting('siteIdentity', value, ['tagline', 'typography', 'fontSize'])\n              }\n              min={8}\n              max={30}\n              unit=\"px\"\n              responsive={true}\n            />\n          </>\n        )}\n      </div>\n      \n      {/* Site Icon (Favicon) */}\n      <div className=\"astra-section-group\">\n        <h4 className=\"astra-group-title\">Site Icon</h4>\n        \n        <AstraImageUploader\n          label=\"Favicon\"\n          value={siteIdentity.favicon}\n          onChange={(value) =>\n            updateSetting('siteIdentity', value, ['favicon'])\n          }\n          description=\"Site icon should be a square image at least 512×512 pixels\"\n          accept=\"image/png,image/jpeg,image/x-icon\"\n        />\n        \n        <p className=\"astra-help-text\">\n          The site icon is used as a browser and app icon for your site. \n          Icons must be square, and at least 512 pixels wide and tall.\n        </p>\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { useCustomizerState } from '../../hooks/useCustomizerState';\nimport { AstraColorPicker } from '../../components/controls/AstraColorPicker';\nimport { Palette, Droplet, Link, Type, Square } from 'lucide-react';\n\nexport const ColorsSection: React.FC = () => {\n  const { settings, updateSetting } = useCustomizerState();\n  const colors = settings.colors;\n  \n  const [activeTab, setActiveTab] = React.useState<'theme' | 'palette'>('theme');\n  \n  return (\n    <div className=\"astra-section colors-section\">\n      <div className=\"astra-section-title\">Colors</div>\n      \n      {/* Color Tabs */}\n      <div className=\"astra-tabs\">\n        <button\n          onClick={() => setActiveTab('theme')}\n          className={`astra-tab ${activeTab === 'theme' ? 'active' : ''}`}\n        >\n          <Droplet size={14} />\n          Theme Colors\n        </button>\n        <button\n          onClick={() => setActiveTab('palette')}\n          className={`astra-tab ${activeTab === 'palette' ? 'active' : ''}`}\n        >\n          <Palette size={14} />\n          Color Palette\n        </button>\n      </div>\n      \n      {activeTab === 'theme' ? (\n        <>\n          {/* Primary Colors */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Primary Colors</h4>\n            \n            <AstraColorPicker\n              label=\"Primary Color\"\n              value={colors.primaryColor}\n              onChange={(value) =>\n                updateSetting('colors', value, ['primaryColor'])\n              }\n              description=\"Main brand color used for buttons, links, and accents\"\n            />\n            \n            <AstraColorPicker\n              label=\"Secondary Color\"\n              value={colors.secondaryColor}\n              onChange={(value) =>\n                updateSetting('colors', value, ['secondaryColor'])\n              }\n              description=\"Secondary brand color for additional accents\"\n            />\n          </div>\n          \n          {/* Text Colors */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Text Colors</h4>\n            \n            <AstraColorPicker\n              label=\"Text Color\"\n              value={colors.textColor}\n              onChange={(value) =>\n                updateSetting('colors', value, ['textColor'])\n              }\n              description=\"Default text color for body content\"\n            />\n            \n            <AstraColorPicker\n              label=\"Link Color\"\n              value={colors.linkColor}\n              onChange={(value) =>\n                updateSetting('colors', value, ['linkColor'])\n              }\n              hasHover={true}\n              description=\"Color for links and hover state\"\n            />\n          </div>\n          \n          {/* Background Colors */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Background Colors</h4>\n            \n            <AstraColorPicker\n              label=\"Body Background\"\n              value={colors.bodyBackground}\n              onChange={(value) =>\n                updateSetting('colors', value, ['bodyBackground'])\n              }\n              description=\"Main background color of the site\"\n            />\n            \n            <AstraColorPicker\n              label=\"Content Background\"\n              value={colors.contentBackground}\n              onChange={(value) =>\n                updateSetting('colors', value, ['contentBackground'])\n              }\n              description=\"Background color for content areas\"\n            />\n          </div>\n          \n          {/* Border Color */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Border & Dividers</h4>\n            \n            <AstraColorPicker\n              label=\"Border Color\"\n              value={colors.borderColor}\n              onChange={(value) =>\n                updateSetting('colors', value, ['borderColor'])\n              }\n              description=\"Color for borders and divider lines\"\n            />\n          </div>\n        </>\n      ) : (\n        <>\n          {/* Color Palette */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Global Color Palette</h4>\n            <p className=\"astra-control-description\">\n              Define a color palette that can be used throughout your site. \n              These colors will be available in all color pickers.\n            </p>\n            \n            <div className=\"astra-color-palette-grid\">\n              {Object.entries(colors.palette).map(([key, value], index) => (\n                <div key={key} className=\"astra-color-palette-item\">\n                  <span className=\"astra-color-palette-label\">Color {index + 1}</span>\n                  <AstraColorPicker\n                    label=\"\"\n                    value={value}\n                    onChange={(newValue) => {\n                      const newPalette = { ...colors.palette };\n                      newPalette[key] = newValue as string;\n                      updateSetting('colors', newPalette, ['palette']);\n                    }}\n                    clearable={false}\n                  />\n                </div>\n              ))}\n            </div>\n            \n            <button\n              onClick={() => {\n                const newKey = `color${Object.keys(colors.palette).length + 1}`;\n                const newPalette = { ...colors.palette, [newKey]: '#000000' };\n                updateSetting('colors', newPalette, ['palette']);\n              }}\n              className=\"astra-button secondary\"\n            >\n              + Add Color\n            </button>\n          </div>\n          \n          {/* Preset Color Schemes */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Preset Color Schemes</h4>\n            \n            <div className=\"astra-layout-options\">\n              <button\n                onClick={() => {\n                  updateSetting('colors', {\n                    primaryColor: '#0073aa',\n                    secondaryColor: '#ff6b6b',\n                    textColor: '#333333',\n                    linkColor: { normal: '#0073aa', hover: '#005177' },\n                    borderColor: '#dddddd',\n                    bodyBackground: '#ffffff',\n                    contentBackground: '#ffffff',\n                  }, []);\n                }}\n                className=\"astra-layout-option\"\n              >\n                <div className=\"astra-layout-option-icon\" style={{ background: '#0073aa' }} />\n                <span className=\"astra-layout-option-label\">Default</span>\n              </button>\n              \n              <button\n                onClick={() => {\n                  updateSetting('colors', {\n                    primaryColor: '#1e1e1e',\n                    secondaryColor: '#646970',\n                    textColor: '#e0e0e0',\n                    linkColor: { normal: '#4ecdc4', hover: '#45b7aa' },\n                    borderColor: '#333333',\n                    bodyBackground: '#121212',\n                    contentBackground: '#1e1e1e',\n                  }, []);\n                }}\n                className=\"astra-layout-option\"\n              >\n                <div className=\"astra-layout-option-icon\" style={{ background: '#1e1e1e' }} />\n                <span className=\"astra-layout-option-label\">Dark</span>\n              </button>\n              \n              <button\n                onClick={() => {\n                  updateSetting('colors', {\n                    primaryColor: '#ff6b6b',\n                    secondaryColor: '#4ecdc4',\n                    textColor: '#2c3e50',\n                    linkColor: { normal: '#ff6b6b', hover: '#ff5252' },\n                    borderColor: '#ecf0f1',\n                    bodyBackground: '#f8f9fa',\n                    contentBackground: '#ffffff',\n                  }, []);\n                }}\n                className=\"astra-layout-option\"\n              >\n                <div className=\"astra-layout-option-icon\" style={{ background: '#ff6b6b' }} />\n                <span className=\"astra-layout-option-label\">Vibrant</span>\n              </button>\n              \n              <button\n                onClick={() => {\n                  updateSetting('colors', {\n                    primaryColor: '#27ae60',\n                    secondaryColor: '#e67e22',\n                    textColor: '#34495e',\n                    linkColor: { normal: '#27ae60', hover: '#229954' },\n                    borderColor: '#bdc3c7',\n                    bodyBackground: '#ecf0f1',\n                    contentBackground: '#ffffff',\n                  }, []);\n                }}\n                className=\"astra-layout-option\"\n              >\n                <div className=\"astra-layout-option-icon\" style={{ background: '#27ae60' }} />\n                <span className=\"astra-layout-option-label\">Nature</span>\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};","import React, { useState, useEffect, useMemo } from 'react';\nimport { Search } from 'lucide-react';\n\n// Popular Google Fonts list (can be expanded)\nconst GOOGLE_FONTS = [\n  'System Default',\n  'Arial',\n  'Helvetica',\n  'Georgia',\n  'Times New Roman',\n  'Roboto',\n  'Open Sans',\n  'Lato',\n  'Montserrat',\n  'Oswald',\n  'Raleway',\n  'Poppins',\n  'Inter',\n  'Nunito',\n  'Playfair Display',\n  'Merriweather',\n  'Ubuntu',\n  'Mukta',\n  'Rubik',\n  'Work Sans',\n  'Roboto Condensed',\n  'Noto Sans',\n  'PT Sans',\n  'Roboto Slab',\n  'Josefin Sans',\n  'Libre Baskerville',\n  'Karla',\n  'Dancing Script',\n  'Bebas Neue',\n  'Anton',\n  'Pacifico',\n  'Indie Flower',\n  'Caveat',\n  'Quicksand',\n  'Hind',\n  'Bitter',\n  'Source Code Pro',\n  'Fira Sans',\n  'Barlow',\n  'IBM Plex Sans',\n  'Crimson Text',\n  'Archivo',\n  'Arimo',\n  'Kanit',\n  'Heebo',\n  'Oxygen',\n  'Prompt',\n  'Catamaran',\n  'Dosis',\n  'Libre Franklin',\n  'Cabin',\n  'EB Garamond',\n];\n\n// Font categories\nconst FONT_CATEGORIES = {\n  'Sans Serif': [\n    'System Default', 'Arial', 'Helvetica', 'Roboto', 'Open Sans', 'Lato',\n    'Montserrat', 'Raleway', 'Poppins', 'Inter', 'Nunito', 'Ubuntu',\n    'Mukta', 'Rubik', 'Work Sans', 'Noto Sans', 'PT Sans', 'Josefin Sans',\n    'Karla', 'Quicksand', 'Hind', 'Fira Sans', 'Barlow', 'IBM Plex Sans',\n    'Archivo', 'Arimo', 'Kanit', 'Heebo', 'Oxygen', 'Prompt', 'Catamaran',\n    'Dosis', 'Libre Franklin', 'Cabin',\n  ],\n  'Serif': [\n    'Georgia', 'Times New Roman', 'Playfair Display', 'Merriweather',\n    'Roboto Slab', 'Libre Baskerville', 'Bitter', 'Crimson Text', 'EB Garamond',\n  ],\n  'Display': [\n    'Oswald', 'Bebas Neue', 'Anton',\n  ],\n  'Handwriting': [\n    'Dancing Script', 'Pacifico', 'Indie Flower', 'Caveat',\n  ],\n  'Monospace': [\n    'Source Code Pro',\n  ],\n};\n\ninterface GoogleFontSelectorProps {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  description?: string;\n  showPreview?: boolean;\n}\n\nexport const GoogleFontSelector: React.FC<GoogleFontSelectorProps> = ({\n  label,\n  value,\n  onChange,\n  description,\n  showPreview = true,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [loadedFonts, setLoadedFonts] = useState<Set<string>>(new Set());\n  \n  // Filter fonts based on search and category\n  const filteredFonts = useMemo(() => {\n    let fonts = GOOGLE_FONTS;\n    \n    // Filter by category\n    if (selectedCategory !== 'all') {\n      fonts = fonts.filter(font => \n        FONT_CATEGORIES[selectedCategory as keyof typeof FONT_CATEGORIES]?.includes(font)\n      );\n    }\n    \n    // Filter by search term\n    if (searchTerm) {\n      fonts = fonts.filter(font =>\n        font.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n    }\n    \n    return fonts;\n  }, [searchTerm, selectedCategory]);\n  \n  // Load Google Font for preview\n  const loadGoogleFont = (fontName: string) => {\n    if (loadedFonts.has(fontName) || fontName === 'System Default') {\n      return;\n    }\n    \n    const link = document.createElement('link');\n    link.href = `https://fonts.googleapis.com/css2?family=${fontName.replace(' ', '+')}:wght@300;400;500;600;700&display=swap`;\n    link.rel = 'stylesheet';\n    document.head.appendChild(link);\n    \n    setLoadedFonts(prev => new Set(prev).add(fontName));\n  };\n  \n  // Load selected font\n  useEffect(() => {\n    if (value && value !== 'System Default') {\n      loadGoogleFont(value);\n    }\n  }, [value]);\n  \n  // Get font family CSS value\n  const getFontFamily = (fontName: string) => {\n    if (fontName === 'System Default') {\n      return 'system-ui, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif';\n    }\n    return `\"${fontName}\", sans-serif`;\n  };\n  \n  const handleSelect = (fontName: string) => {\n    onChange(fontName);\n    setIsOpen(false);\n    setSearchTerm('');\n  };\n  \n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as HTMLElement;\n      if (!target.closest('.google-font-selector')) {\n        setIsOpen(false);\n      }\n    };\n    \n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n  \n  return (\n    <div className=\"astra-control google-font-selector\">\n      <div className=\"astra-control-header\">\n        <label className=\"astra-control-label\">{label}</label>\n        {description && (\n          <span className=\"astra-control-description\">{description}</span>\n        )}\n      </div>\n      \n      <div className=\"google-font-selector-container\">\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"google-font-selector-trigger\"\n          style={{ fontFamily: getFontFamily(value) }}\n        >\n          <span className=\"google-font-selector-value\">{value || 'Select Font'}</span>\n          <span className=\"google-font-selector-arrow\">▼</span>\n        </button>\n        \n        {showPreview && value && (\n          <div \n            className=\"google-font-preview\"\n            style={{ fontFamily: getFontFamily(value) }}\n          >\n            The quick brown fox jumps over the lazy dog\n          </div>\n        )}\n        \n        {isOpen && (\n          <div className=\"google-font-dropdown\">\n            {/* Search and Category Filter */}\n            <div className=\"google-font-header\">\n              <div className=\"google-font-search\">\n                <Search size={14} />\n                <input\n                  type=\"text\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  placeholder=\"Search fonts...\"\n                  className=\"google-font-search-input\"\n                  autoFocus\n                />\n              </div>\n              \n              <div className=\"google-font-categories\">\n                <button\n                  onClick={() => setSelectedCategory('all')}\n                  className={`google-font-category ${selectedCategory === 'all' ? 'active' : ''}`}\n                >\n                  All\n                </button>\n                {Object.keys(FONT_CATEGORIES).map(category => (\n                  <button\n                    key={category}\n                    onClick={() => setSelectedCategory(category)}\n                    className={`google-font-category ${selectedCategory === category ? 'active' : ''}`}\n                  >\n                    {category}\n                  </button>\n                ))}\n              </div>\n            </div>\n            \n            {/* Font List */}\n            <div className=\"google-font-list\">\n              {filteredFonts.length > 0 ? (\n                filteredFonts.map(font => {\n                  // Load font on hover for preview\n                  const handleMouseEnter = () => {\n                    if (font !== 'System Default') {\n                      loadGoogleFont(font);\n                    }\n                  };\n                  \n                  return (\n                    <button\n                      key={font}\n                      onClick={() => handleSelect(font)}\n                      onMouseEnter={handleMouseEnter}\n                      className={`google-font-option ${font === value ? 'selected' : ''}`}\n                      style={{ fontFamily: loadedFonts.has(font) ? getFontFamily(font) : 'inherit' }}\n                    >\n                      {font}\n                    </button>\n                  );\n                })\n              ) : (\n                <div className=\"google-font-empty\">No fonts found</div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { ChevronDown } from 'lucide-react';\n\ninterface SelectOption {\n  value: string;\n  label: string;\n  disabled?: boolean;\n  group?: string;\n}\n\ninterface AstraSelectProps {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  options: SelectOption[] | string[];\n  description?: string;\n  placeholder?: string;\n  disabled?: boolean;\n  searchable?: boolean;\n}\n\nexport const AstraSelect: React.FC<AstraSelectProps> = ({\n  label,\n  value,\n  onChange,\n  options,\n  description,\n  placeholder = 'Select an option',\n  disabled = false,\n  searchable = false,\n}) => {\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [searchTerm, setSearchTerm] = React.useState('');\n  const selectRef = React.useRef<HTMLDivElement>(null);\n  \n  // Normalize options to SelectOption format\n  const normalizedOptions: SelectOption[] = options.map((opt) =>\n    typeof opt === 'string' ? { value: opt, label: opt } : opt\n  );\n  \n  // Group options if groups are present\n  const groupedOptions = normalizedOptions.reduce((acc, option) => {\n    const group = option.group || 'default';\n    if (!acc[group]) {\n      acc[group] = [];\n    }\n    acc[group].push(option);\n    return acc;\n  }, {} as Record<string, SelectOption[]>);\n  \n  // Filter options based on search\n  const filteredOptions = searchTerm\n    ? normalizedOptions.filter((opt) =>\n        opt.label.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    : normalizedOptions;\n  \n  // Get current label\n  const currentOption = normalizedOptions.find((opt) => opt.value === value);\n  const currentLabel = currentOption?.label || placeholder;\n  \n  // Close dropdown when clicking outside\n  React.useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (selectRef.current && !selectRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n        setSearchTerm('');\n      }\n    };\n    \n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n  \n  const handleSelect = (optionValue: string) => {\n    onChange(optionValue);\n    setIsOpen(false);\n    setSearchTerm('');\n  };\n  \n  const renderOptions = () => {\n    if (Object.keys(groupedOptions).length === 1 && groupedOptions.default) {\n      // No groups, render flat list\n      return filteredOptions.map((option) => (\n        <button\n          key={option.value}\n          onClick={() => handleSelect(option.value)}\n          className={`astra-select-option ${\n            option.value === value ? 'selected' : ''\n          } ${option.disabled ? 'disabled' : ''}`}\n          disabled={option.disabled}\n        >\n          {option.label}\n        </button>\n      ));\n    }\n    \n    // Render grouped options\n    return Object.entries(groupedOptions).map(([group, groupOptions]) => (\n      <div key={group} className=\"astra-select-group\">\n        {group !== 'default' && (\n          <div className=\"astra-select-group-label\">{group}</div>\n        )}\n        {groupOptions\n          .filter((opt) => !searchTerm || filteredOptions.includes(opt))\n          .map((option) => (\n            <button\n              key={option.value}\n              onClick={() => handleSelect(option.value)}\n              className={`astra-select-option ${\n                option.value === value ? 'selected' : ''\n              } ${option.disabled ? 'disabled' : ''}`}\n              disabled={option.disabled}\n            >\n              {option.label}\n            </button>\n          ))}\n      </div>\n    ));\n  };\n  \n  return (\n    <div className=\"astra-control astra-select\" ref={selectRef}>\n      <div className=\"astra-control-header\">\n        <label className=\"astra-control-label\">{label}</label>\n        {description && (\n          <span className=\"astra-control-description\">{description}</span>\n        )}\n      </div>\n      \n      <div className=\"astra-select-container\">\n        <button\n          onClick={() => !disabled && setIsOpen(!isOpen)}\n          className={`astra-select-trigger ${isOpen ? 'open' : ''} ${\n            disabled ? 'disabled' : ''\n          }`}\n          disabled={disabled}\n        >\n          <span className=\"astra-select-value\">{currentLabel}</span>\n          <ChevronDown size={16} className=\"astra-select-icon\" />\n        </button>\n        \n        {isOpen && (\n          <div className=\"astra-select-dropdown\">\n            {searchable && (\n              <div className=\"astra-select-search\">\n                <input\n                  type=\"text\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  placeholder=\"Search...\"\n                  className=\"astra-select-search-input\"\n                  autoFocus\n                />\n              </div>\n            )}\n            \n            <div className=\"astra-select-options\">\n              {filteredOptions.length > 0 ? (\n                renderOptions()\n              ) : (\n                <div className=\"astra-select-empty\">No options found</div>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { useCustomizerState } from '../../hooks/useCustomizerState';\nimport { GoogleFontSelector } from '../../components/controls/GoogleFontSelector';\nimport { AstraSlider } from '../../components/controls/AstraSlider';\nimport { AstraSelect } from '../../components/controls/AstraSelect';\nimport { Type, Heading, MousePointer } from 'lucide-react';\nimport { TextTransform, FontWeight } from '../../types/customizer-types';\n\nexport const TypographySection: React.FC = () => {\n  const { settings, updateSetting } = useCustomizerState();\n  const typography = settings.typography;\n  \n  const [activeTab, setActiveTab] = React.useState<'body' | 'headings' | 'buttons'>('body');\n  const [expandedHeading, setExpandedHeading] = React.useState<string | null>(null);\n  \n  const fontWeightOptions = [\n    { value: '100', label: 'Thin (100)' },\n    { value: '200', label: 'Extra Light (200)' },\n    { value: '300', label: 'Light (300)' },\n    { value: '400', label: 'Normal (400)' },\n    { value: '500', label: 'Medium (500)' },\n    { value: '600', label: 'Semi Bold (600)' },\n    { value: '700', label: 'Bold (700)' },\n    { value: '800', label: 'Extra Bold (800)' },\n    { value: '900', label: 'Black (900)' },\n  ];\n  \n  const textTransformOptions = [\n    { value: 'none', label: 'None' },\n    { value: 'capitalize', label: 'Capitalize' },\n    { value: 'uppercase', label: 'UPPERCASE' },\n    { value: 'lowercase', label: 'lowercase' },\n  ];\n  \n  return (\n    <div className=\"astra-section typography-section\">\n      <div className=\"astra-section-title\">Typography</div>\n      \n      {/* Typography Tabs */}\n      <div className=\"astra-tabs\">\n        <button\n          onClick={() => setActiveTab('body')}\n          className={`astra-tab ${activeTab === 'body' ? 'active' : ''}`}\n        >\n          <Type size={14} />\n          Body\n        </button>\n        <button\n          onClick={() => setActiveTab('headings')}\n          className={`astra-tab ${activeTab === 'headings' ? 'active' : ''}`}\n        >\n          <Heading size={14} />\n          Headings\n        </button>\n        <button\n          onClick={() => setActiveTab('buttons')}\n          className={`astra-tab ${activeTab === 'buttons' ? 'active' : ''}`}\n        >\n          <MousePointer size={14} />\n          Buttons\n        </button>\n      </div>\n      \n      {activeTab === 'body' && (\n        <div className=\"astra-section-group\">\n          <h4 className=\"astra-group-title\">Body Typography</h4>\n          \n          <GoogleFontSelector\n            label=\"Font Family\"\n            value={typography.bodyFont.fontFamily}\n            onChange={(value) =>\n              updateSetting('typography', value, ['bodyFont', 'fontFamily'])\n            }\n            description=\"Choose the main font for your site's body text\"\n          />\n          \n          <AstraSlider\n            label=\"Font Size\"\n            value={typography.bodyFont.fontSize}\n            onChange={(value) =>\n              updateSetting('typography', value, ['bodyFont', 'fontSize'])\n            }\n            min={10}\n            max={30}\n            unit=\"px\"\n            responsive={true}\n            description=\"Base font size for body text\"\n          />\n          \n          <AstraSelect\n            label=\"Font Weight\"\n            value={String(typography.bodyFont.fontWeight)}\n            onChange={(value) =>\n              updateSetting('typography', Number(value) as FontWeight, ['bodyFont', 'fontWeight'])\n            }\n            options={fontWeightOptions}\n            description=\"Weight of the body font\"\n          />\n          \n          <AstraSlider\n            label=\"Line Height\"\n            value={typography.bodyFont.lineHeight}\n            onChange={(value) =>\n              updateSetting('typography', value, ['bodyFont', 'lineHeight'])\n            }\n            min={1}\n            max={3}\n            step={0.1}\n            unit=\"em\"\n            responsive={true}\n            description=\"Space between lines of text\"\n          />\n          \n          <AstraSlider\n            label=\"Letter Spacing\"\n            value={typography.bodyFont.letterSpacing}\n            onChange={(value) =>\n              updateSetting('typography', value, ['bodyFont', 'letterSpacing'])\n            }\n            min={-2}\n            max={5}\n            step={0.1}\n            unit=\"px\"\n            responsive={true}\n            description=\"Space between individual letters\"\n          />\n          \n          <AstraSelect\n            label=\"Text Transform\"\n            value={typography.bodyFont.textTransform}\n            onChange={(value) =>\n              updateSetting('typography', value as TextTransform, ['bodyFont', 'textTransform'])\n            }\n            options={textTransformOptions}\n            description=\"Transform text case\"\n          />\n        </div>\n      )}\n      \n      {activeTab === 'headings' && (\n        <div className=\"astra-section-group\">\n          <h4 className=\"astra-group-title\">Heading Typography</h4>\n          \n          {(['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] as const).map((heading) => {\n            const headingSettings = typography.headings[heading];\n            const isExpanded = expandedHeading === heading;\n            \n            return (\n              <div key={heading} className=\"astra-accordion\">\n                <button\n                  onClick={() => setExpandedHeading(isExpanded ? null : heading)}\n                  className={`astra-accordion-header ${isExpanded ? 'active' : ''}`}\n                >\n                  <span>{heading.toUpperCase()} - Heading</span>\n                  <span className=\"astra-accordion-icon\">▼</span>\n                </button>\n                \n                {isExpanded && (\n                  <div className=\"astra-accordion-content\">\n                    <GoogleFontSelector\n                      label=\"Font Family\"\n                      value={headingSettings.fontFamily}\n                      onChange={(value) =>\n                        updateSetting('typography', value, ['headings', heading, 'fontFamily'])\n                      }\n                      showPreview={false}\n                    />\n                    \n                    <div className=\"astra-typography-group\">\n                      <AstraSlider\n                        label=\"Font Size\"\n                        value={headingSettings.fontSize}\n                        onChange={(value) =>\n                          updateSetting('typography', value, ['headings', heading, 'fontSize'])\n                        }\n                        min={10}\n                        max={80}\n                        unit=\"px\"\n                        responsive={true}\n                      />\n                      \n                      <AstraSelect\n                        label=\"Font Weight\"\n                        value={String(headingSettings.fontWeight)}\n                        onChange={(value) =>\n                          updateSetting('typography', Number(value) as FontWeight, [\n                            'headings',\n                            heading,\n                            'fontWeight',\n                          ])\n                        }\n                        options={fontWeightOptions}\n                      />\n                    </div>\n                    \n                    <div className=\"astra-typography-group\">\n                      <AstraSlider\n                        label=\"Line Height\"\n                        value={headingSettings.lineHeight}\n                        onChange={(value) =>\n                          updateSetting('typography', value, ['headings', heading, 'lineHeight'])\n                        }\n                        min={0.5}\n                        max={3}\n                        step={0.1}\n                        unit=\"em\"\n                        responsive={true}\n                      />\n                      \n                      <AstraSlider\n                        label=\"Letter Spacing\"\n                        value={headingSettings.letterSpacing}\n                        onChange={(value) =>\n                          updateSetting('typography', value, ['headings', heading, 'letterSpacing'])\n                        }\n                        min={-5}\n                        max={10}\n                        step={0.1}\n                        unit=\"px\"\n                        responsive={true}\n                      />\n                    </div>\n                    \n                    <AstraSelect\n                      label=\"Text Transform\"\n                      value={headingSettings.textTransform}\n                      onChange={(value) =>\n                        updateSetting('typography', value as TextTransform, [\n                          'headings',\n                          heading,\n                          'textTransform',\n                        ])\n                      }\n                      options={textTransformOptions}\n                    />\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      )}\n      \n      {activeTab === 'buttons' && (\n        <div className=\"astra-section-group\">\n          <h4 className=\"astra-group-title\">Button Typography</h4>\n          \n          <GoogleFontSelector\n            label=\"Font Family\"\n            value={typography.button.fontFamily}\n            onChange={(value) =>\n              updateSetting('typography', value, ['button', 'fontFamily'])\n            }\n            description=\"Font for buttons and call-to-action elements\"\n          />\n          \n          <AstraSlider\n            label=\"Font Size\"\n            value={typography.button.fontSize}\n            onChange={(value) =>\n              updateSetting('typography', value, ['button', 'fontSize'])\n            }\n            min={10}\n            max={24}\n            unit=\"px\"\n            responsive={true}\n            description=\"Button text size\"\n          />\n          \n          <AstraSelect\n            label=\"Font Weight\"\n            value={String(typography.button.fontWeight)}\n            onChange={(value) =>\n              updateSetting('typography', Number(value) as FontWeight, ['button', 'fontWeight'])\n            }\n            options={fontWeightOptions}\n            description=\"Button font weight\"\n          />\n          \n          <AstraSlider\n            label=\"Letter Spacing\"\n            value={typography.button.letterSpacing}\n            onChange={(value) =>\n              updateSetting('typography', value, ['button', 'letterSpacing'])\n            }\n            min={0}\n            max={5}\n            step={0.1}\n            unit=\"px\"\n            responsive={true}\n            description=\"Space between button text letters\"\n          />\n          \n          <AstraSelect\n            label=\"Text Transform\"\n            value={typography.button.textTransform}\n            onChange={(value) =>\n              updateSetting('typography', value as TextTransform, ['button', 'textTransform'])\n            }\n            options={textTransformOptions}\n            description=\"Button text transformation\"\n          />\n        </div>\n      )}\n      \n      {/* Typography Preview */}\n      <div className=\"astra-section-group\">\n        <h4 className=\"astra-group-title\">Preview</h4>\n        <div className=\"astra-typography-preview\">\n          <h1 style={{\n            fontFamily: typography.headings.h1.fontFamily,\n            fontSize: `${typography.headings.h1.fontSize.desktop}px`,\n            fontWeight: typography.headings.h1.fontWeight,\n            lineHeight: typography.headings.h1.lineHeight.desktop,\n            letterSpacing: `${typography.headings.h1.letterSpacing.desktop}px`,\n            textTransform: typography.headings.h1.textTransform,\n          }}>\n            Heading 1 Example\n          </h1>\n          <h2 style={{\n            fontFamily: typography.headings.h2.fontFamily,\n            fontSize: `${typography.headings.h2.fontSize.desktop}px`,\n            fontWeight: typography.headings.h2.fontWeight,\n            lineHeight: typography.headings.h2.lineHeight.desktop,\n            letterSpacing: `${typography.headings.h2.letterSpacing.desktop}px`,\n            textTransform: typography.headings.h2.textTransform,\n          }}>\n            Heading 2 Example\n          </h2>\n          <p style={{\n            fontFamily: typography.bodyFont.fontFamily,\n            fontSize: `${typography.bodyFont.fontSize.desktop}px`,\n            fontWeight: typography.bodyFont.fontWeight,\n            lineHeight: typography.bodyFont.lineHeight.desktop,\n            letterSpacing: `${typography.bodyFont.letterSpacing.desktop}px`,\n            textTransform: typography.bodyFont.textTransform,\n          }}>\n            This is a paragraph of body text. The quick brown fox jumps over the lazy dog. \n            This preview shows how your typography settings will look on the actual site.\n          </p>\n          <button style={{\n            fontFamily: typography.button.fontFamily,\n            fontSize: `${typography.button.fontSize.desktop}px`,\n            fontWeight: typography.button.fontWeight,\n            letterSpacing: `${typography.button.letterSpacing.desktop}px`,\n            textTransform: typography.button.textTransform,\n            padding: '10px 20px',\n            background: settings.colors.primaryColor,\n            color: '#fff',\n            border: 'none',\n            borderRadius: '3px',\n            cursor: 'pointer',\n          }}>\n            Button Example\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { useCustomizerState } from '../../hooks/useCustomizerState';\nimport { AstraSlider } from '../../components/controls/AstraSlider';\nimport { AstraSelect } from '../../components/controls/AstraSelect';\nimport { Layout, Maximize, Square, Sidebar as SidebarIcon } from 'lucide-react';\n\nexport const ContainerSection: React.FC = () => {\n  const { settings, updateSetting } = useCustomizerState();\n  const container = settings.container;\n  const sidebar = settings.sidebar;\n  \n  const [activeTab, setActiveTab] = React.useState<'container' | 'sidebar'>('container');\n  \n  const layoutOptions = [\n    { value: 'boxed', label: 'Boxed' },\n    { value: 'full-width', label: 'Full Width' },\n    { value: 'fluid', label: 'Fluid' },\n  ];\n  \n  const sidebarLayoutOptions = [\n    { value: 'no-sidebar', label: 'No Sidebar' },\n    { value: 'left-sidebar', label: 'Left Sidebar' },\n    { value: 'right-sidebar', label: 'Right Sidebar' },\n    { value: 'both-sidebars', label: 'Both Sidebars' },\n  ];\n  \n  return (\n    <div className=\"astra-section container-section\">\n      <div className=\"astra-section-title\">Layout</div>\n      \n      {/* Layout Tabs */}\n      <div className=\"astra-tabs\">\n        <button\n          onClick={() => setActiveTab('container')}\n          className={`astra-tab ${activeTab === 'container' ? 'active' : ''}`}\n        >\n          <Layout size={14} />\n          Container\n        </button>\n        <button\n          onClick={() => setActiveTab('sidebar')}\n          className={`astra-tab ${activeTab === 'sidebar' ? 'active' : ''}`}\n        >\n          <SidebarIcon size={14} />\n          Sidebar\n        </button>\n      </div>\n      \n      {activeTab === 'container' ? (\n        <>\n          {/* Container Layout */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Container Layout</h4>\n            \n            <div className=\"astra-control\">\n              <label className=\"astra-control-label\">Layout Style</label>\n              <div className=\"astra-layout-options\">\n                <button\n                  onClick={() => updateSetting('container', 'boxed', ['layout'])}\n                  className={`astra-layout-option ${container.layout === 'boxed' ? 'selected' : ''}`}\n                >\n                  <div className=\"astra-layout-option-icon\">\n                    <Square size={20} />\n                  </div>\n                  <span className=\"astra-layout-option-label\">Boxed</span>\n                </button>\n                \n                <button\n                  onClick={() => updateSetting('container', 'full-width', ['layout'])}\n                  className={`astra-layout-option ${container.layout === 'full-width' ? 'selected' : ''}`}\n                >\n                  <div className=\"astra-layout-option-icon\">\n                    <Maximize size={20} />\n                  </div>\n                  <span className=\"astra-layout-option-label\">Full Width</span>\n                </button>\n                \n                <button\n                  onClick={() => updateSetting('container', 'fluid', ['layout'])}\n                  className={`astra-layout-option ${container.layout === 'fluid' ? 'selected' : ''}`}\n                >\n                  <div className=\"astra-layout-option-icon\">\n                    <Layout size={20} />\n                  </div>\n                  <span className=\"astra-layout-option-label\">Fluid</span>\n                </button>\n              </div>\n              <p className=\"astra-control-description\">\n                Choose how your content will be contained within the browser window\n              </p>\n            </div>\n            \n            {container.layout !== 'full-width' && (\n              <AstraSlider\n                label=\"Container Width\"\n                value={container.width}\n                onChange={(value) => updateSetting('container', value, ['width'])}\n                min={768}\n                max={1920}\n                unit=\"px\"\n                responsive={true}\n                description=\"Maximum width of the content container\"\n              />\n            )}\n          </div>\n          \n          {/* Container Spacing */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Container Spacing</h4>\n            \n            <div className=\"astra-responsive-controls\">\n              <div className=\"astra-responsive-header\">\n                <span className=\"astra-responsive-label\">Padding</span>\n              </div>\n              \n              <div className=\"astra-typography-group\">\n                <AstraSlider\n                  label=\"Top\"\n                  value={{\n                    desktop: container.padding.desktop.top,\n                    tablet: container.padding.tablet.top,\n                    mobile: container.padding.mobile.top,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('container', val, ['padding', 'desktop', 'top']);\n                    if (typeof value !== 'number') {\n                      updateSetting('container', value.tablet, ['padding', 'tablet', 'top']);\n                      updateSetting('container', value.mobile, ['padding', 'mobile', 'top']);\n                    }\n                  }}\n                  min={0}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                />\n                \n                <AstraSlider\n                  label=\"Bottom\"\n                  value={{\n                    desktop: container.padding.desktop.bottom,\n                    tablet: container.padding.tablet.bottom,\n                    mobile: container.padding.mobile.bottom,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('container', val, ['padding', 'desktop', 'bottom']);\n                    if (typeof value !== 'number') {\n                      updateSetting('container', value.tablet, ['padding', 'tablet', 'bottom']);\n                      updateSetting('container', value.mobile, ['padding', 'mobile', 'bottom']);\n                    }\n                  }}\n                  min={0}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                />\n              </div>\n              \n              <div className=\"astra-typography-group\">\n                <AstraSlider\n                  label=\"Left\"\n                  value={{\n                    desktop: container.padding.desktop.left,\n                    tablet: container.padding.tablet.left,\n                    mobile: container.padding.mobile.left,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('container', val, ['padding', 'desktop', 'left']);\n                    if (typeof value !== 'number') {\n                      updateSetting('container', value.tablet, ['padding', 'tablet', 'left']);\n                      updateSetting('container', value.mobile, ['padding', 'mobile', 'left']);\n                    }\n                  }}\n                  min={0}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                />\n                \n                <AstraSlider\n                  label=\"Right\"\n                  value={{\n                    desktop: container.padding.desktop.right,\n                    tablet: container.padding.tablet.right,\n                    mobile: container.padding.mobile.right,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('container', val, ['padding', 'desktop', 'right']);\n                    if (typeof value !== 'number') {\n                      updateSetting('container', value.tablet, ['padding', 'tablet', 'right']);\n                      updateSetting('container', value.mobile, ['padding', 'mobile', 'right']);\n                    }\n                  }}\n                  min={0}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                />\n              </div>\n            </div>\n            \n            <div className=\"astra-responsive-controls\">\n              <div className=\"astra-responsive-header\">\n                <span className=\"astra-responsive-label\">Margin</span>\n              </div>\n              \n              <div className=\"astra-typography-group\">\n                <AstraSlider\n                  label=\"Top\"\n                  value={{\n                    desktop: container.margin.desktop.top,\n                    tablet: container.margin.tablet.top,\n                    mobile: container.margin.mobile.top,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('container', val, ['margin', 'desktop', 'top']);\n                    if (typeof value !== 'number') {\n                      updateSetting('container', value.tablet, ['margin', 'tablet', 'top']);\n                      updateSetting('container', value.mobile, ['margin', 'mobile', 'top']);\n                    }\n                  }}\n                  min={0}\n                  max={200}\n                  unit=\"px\"\n                  responsive={true}\n                />\n                \n                <AstraSlider\n                  label=\"Bottom\"\n                  value={{\n                    desktop: container.margin.desktop.bottom,\n                    tablet: container.margin.tablet.bottom,\n                    mobile: container.margin.mobile.bottom,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('container', val, ['margin', 'desktop', 'bottom']);\n                    if (typeof value !== 'number') {\n                      updateSetting('container', value.tablet, ['margin', 'tablet', 'bottom']);\n                      updateSetting('container', value.mobile, ['margin', 'mobile', 'bottom']);\n                    }\n                  }}\n                  min={0}\n                  max={200}\n                  unit=\"px\"\n                  responsive={true}\n                />\n              </div>\n            </div>\n          </div>\n        </>\n      ) : (\n        <>\n          {/* Sidebar Layout */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Sidebar Layout</h4>\n            \n            <AstraSelect\n              label=\"Sidebar Position\"\n              value={sidebar.layout}\n              onChange={(value) => updateSetting('sidebar', value, ['layout'])}\n              options={sidebarLayoutOptions}\n              description=\"Choose where to display the sidebar\"\n            />\n            \n            {sidebar.layout !== 'no-sidebar' && (\n              <>\n                <AstraSlider\n                  label=\"Sidebar Width\"\n                  value={sidebar.width}\n                  onChange={(value) => updateSetting('sidebar', value, ['width'])}\n                  min={15}\n                  max={50}\n                  unit=\"%\"\n                  responsive={true}\n                  description=\"Width of the sidebar relative to the container\"\n                />\n                \n                <AstraSlider\n                  label=\"Content Gap\"\n                  value={sidebar.gap}\n                  onChange={(value) => updateSetting('sidebar', value, ['gap'])}\n                  min={0}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                  description=\"Space between content and sidebar\"\n                />\n              </>\n            )}\n          </div>\n          \n          {/* Sidebar Behavior */}\n          {sidebar.layout !== 'no-sidebar' && (\n            <div className=\"astra-section-group\">\n              <h4 className=\"astra-group-title\">Responsive Behavior</h4>\n              \n              <p className=\"astra-control-description\">\n                On mobile devices, the sidebar will automatically move below the main content \n                for better readability.\n              </p>\n              \n              <div className=\"astra-help-text\">\n                💡 Tip: You can set different sidebar widths for tablet and mobile devices \n                using the responsive controls above.\n              </div>\n            </div>\n          )}\n        </>\n      )}\n      \n      {/* Layout Preview */}\n      <div className=\"astra-section-group\">\n        <h4 className=\"astra-group-title\">Layout Preview</h4>\n        <div className=\"astra-layout-preview\">\n          <div className=\"astra-layout-preview-container\" style={{\n            maxWidth: container.layout === 'full-width' ? '100%' : `${container.width.desktop}px`,\n            margin: '0 auto',\n            padding: `${container.padding.desktop.top}px ${container.padding.desktop.right}px ${container.padding.desktop.bottom}px ${container.padding.desktop.left}px`,\n          }}>\n            <div className=\"astra-layout-preview-content\" style={{\n              display: 'flex',\n              gap: sidebar.layout !== 'no-sidebar' ? `${sidebar.gap.desktop}px` : 0,\n              flexDirection: sidebar.layout === 'left-sidebar' ? 'row-reverse' : 'row',\n            }}>\n              <div className=\"astra-layout-preview-main\" style={{\n                flex: sidebar.layout !== 'no-sidebar' ? `1 1 ${100 - sidebar.width.desktop}%` : '1 1 100%',\n                background: '#e0e0e0',\n                padding: '20px',\n                borderRadius: '4px',\n                minHeight: '100px',\n              }}>\n                Main Content\n              </div>\n              {sidebar.layout !== 'no-sidebar' && (\n                <div className=\"astra-layout-preview-sidebar\" style={{\n                  flex: `0 0 ${sidebar.width.desktop}%`,\n                  background: '#f0f0f0',\n                  padding: '20px',\n                  borderRadius: '4px',\n                  minHeight: '100px',\n                }}>\n                  Sidebar\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { useCustomizerState } from '../../hooks/useCustomizerState';\nimport { AstraSlider } from '../../components/controls/AstraSlider';\nimport { AstraToggle } from '../../components/controls/AstraToggle';\nimport { AstraColorPicker } from '../../components/controls/AstraColorPicker';\nimport { AstraSelect } from '../../components/controls/AstraSelect';\nimport { Menu, MoreHorizontal, AlignLeft, AlignCenter, AlignRight } from 'lucide-react';\n\nexport const HeaderLayoutSection: React.FC = () => {\n  const { settings, updateSetting } = useCustomizerState();\n  const header = settings.header;\n  \n  const [activeTab, setActiveTab] = React.useState<'general' | 'primary' | 'above' | 'below'>('general');\n  \n  const layoutOptions = [\n    { value: 'header-main-layout-1', label: 'Layout 1 - Logo Left, Menu Right' },\n    { value: 'header-main-layout-2', label: 'Layout 2 - Logo Center, Menu Below' },\n    { value: 'header-main-layout-3', label: 'Layout 3 - Logo Right, Menu Left' },\n  ];\n  \n  const alignmentOptions = [\n    { value: 'left', label: 'Left' },\n    { value: 'center', label: 'Center' },\n    { value: 'right', label: 'Right' },\n  ];\n  \n  const contentOptions = [\n    { value: 'menu', label: 'Navigation Menu' },\n    { value: 'search', label: 'Search Box' },\n    { value: 'account', label: 'Account' },\n    { value: 'cart', label: 'Cart' },\n    { value: 'breadcrumb', label: 'Breadcrumb' },\n    { value: 'custom-html', label: 'Custom HTML' },\n  ];\n  \n  return (\n    <div className=\"astra-section header-section\">\n      <div className=\"astra-section-title\">Header</div>\n      \n      {/* Header Tabs */}\n      <div className=\"astra-tabs\">\n        <button\n          onClick={() => setActiveTab('general')}\n          className={`astra-tab ${activeTab === 'general' ? 'active' : ''}`}\n        >\n          <Menu size={14} />\n          General\n        </button>\n        <button\n          onClick={() => setActiveTab('primary')}\n          className={`astra-tab ${activeTab === 'primary' ? 'active' : ''}`}\n        >\n          <AlignCenter size={14} />\n          Primary Header\n        </button>\n        <button\n          onClick={() => setActiveTab('above')}\n          className={`astra-tab ${activeTab === 'above' ? 'active' : ''}`}\n        >\n          <MoreHorizontal size={14} />\n          Above Header\n        </button>\n        <button\n          onClick={() => setActiveTab('below')}\n          className={`astra-tab ${activeTab === 'below' ? 'active' : ''}`}\n        >\n          <MoreHorizontal size={14} />\n          Below Header\n        </button>\n      </div>\n      \n      {activeTab === 'general' && (\n        <>\n          {/* General Settings */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Header Layout</h4>\n            \n            <AstraSelect\n              label=\"Header Layout\"\n              value={header.layout}\n              onChange={(value) => updateSetting('header', value, ['layout'])}\n              options={layoutOptions}\n              description=\"Choose the header layout structure\"\n            />\n          </div>\n          \n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Header Behavior</h4>\n            \n            <AstraToggle\n              label=\"Sticky Header\"\n              value={header.sticky}\n              onChange={(value) => updateSetting('header', value, ['sticky'])}\n              description=\"Keep header visible when scrolling\"\n            />\n            \n            <AstraToggle\n              label=\"Transparent Header\"\n              value={header.transparentHeader}\n              onChange={(value) => updateSetting('header', value, ['transparentHeader'])}\n              description=\"Make header transparent on homepage\"\n            />\n          </div>\n        </>\n      )}\n      \n      {activeTab === 'primary' && (\n        <>\n          {/* Primary Header Settings */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Primary Header</h4>\n            \n            <AstraSlider\n              label=\"Header Height\"\n              value={header.primary.height}\n              onChange={(value) => updateSetting('header', value, ['primary', 'height'])}\n              min={30}\n              max={200}\n              unit=\"px\"\n              responsive={true}\n              description=\"Height of the primary header area\"\n            />\n            \n            <AstraColorPicker\n              label=\"Background Color\"\n              value={header.primary.background}\n              onChange={(value) => updateSetting('header', value, ['primary', 'background'])}\n              description=\"Primary header background color\"\n            />\n            \n            <AstraSelect\n              label=\"Menu Alignment\"\n              value={header.primary.menuAlignment}\n              onChange={(value) => updateSetting('header', value, ['primary', 'menuAlignment'])}\n              options={alignmentOptions}\n              description=\"Alignment of the navigation menu\"\n            />\n          </div>\n        </>\n      )}\n      \n      {activeTab === 'above' && (\n        <>\n          {/* Above Header Settings */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Above Header</h4>\n            \n            <AstraToggle\n              label=\"Enable Above Header\"\n              value={header.above.enabled}\n              onChange={(value) => updateSetting('header', value, ['above', 'enabled'])}\n              description=\"Add an additional header section above the main header\"\n            />\n            \n            {header.above.enabled && (\n              <>\n                <AstraSlider\n                  label=\"Height\"\n                  value={header.above.height}\n                  onChange={(value) => updateSetting('header', value, ['above', 'height'])}\n                  min={20}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                />\n                \n                <AstraColorPicker\n                  label=\"Background Color\"\n                  value={header.above.background}\n                  onChange={(value) => updateSetting('header', value, ['above', 'background'])}\n                />\n                \n                <div className=\"astra-control\">\n                  <label className=\"astra-control-label\">Content Elements</label>\n                  <p className=\"astra-control-description\">\n                    Select elements to display in the above header section\n                  </p>\n                  <div className=\"astra-checkbox-group\">\n                    {contentOptions.slice(0, 4).map((option) => (\n                      <label key={option.value} className=\"astra-checkbox-label\">\n                        <input\n                          type=\"checkbox\"\n                          checked={header.above.content.includes(option.value as any)}\n                          onChange={(e) => {\n                            const newContent = e.target.checked\n                              ? [...header.above.content, option.value]\n                              : header.above.content.filter(c => c !== option.value);\n                            updateSetting('header', newContent, ['above', 'content']);\n                          }}\n                        />\n                        {option.label}\n                      </label>\n                    ))}\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </>\n      )}\n      \n      {activeTab === 'below' && (\n        <>\n          {/* Below Header Settings */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Below Header</h4>\n            \n            <AstraToggle\n              label=\"Enable Below Header\"\n              value={header.below.enabled}\n              onChange={(value) => updateSetting('header', value, ['below', 'enabled'])}\n              description=\"Add an additional header section below the main header\"\n            />\n            \n            {header.below.enabled && (\n              <>\n                <AstraSlider\n                  label=\"Height\"\n                  value={header.below.height}\n                  onChange={(value) => updateSetting('header', value, ['below', 'height'])}\n                  min={20}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                />\n                \n                <AstraColorPicker\n                  label=\"Background Color\"\n                  value={header.below.background}\n                  onChange={(value) => updateSetting('header', value, ['below', 'background'])}\n                />\n                \n                <div className=\"astra-control\">\n                  <label className=\"astra-control-label\">Content Elements</label>\n                  <p className=\"astra-control-description\">\n                    Select elements to display in the below header section\n                  </p>\n                  <div className=\"astra-checkbox-group\">\n                    {[contentOptions[0], contentOptions[1], contentOptions[4], contentOptions[5]].map((option) => (\n                      <label key={option.value} className=\"astra-checkbox-label\">\n                        <input\n                          type=\"checkbox\"\n                          checked={header.below.content.includes(option.value as any)}\n                          onChange={(e) => {\n                            const newContent = e.target.checked\n                              ? [...header.below.content, option.value]\n                              : header.below.content.filter(c => c !== option.value);\n                            updateSetting('header', newContent, ['below', 'content']);\n                          }}\n                        />\n                        {option.label}\n                      </label>\n                    ))}\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </>\n      )}\n      \n      {/* Header Preview */}\n      <div className=\"astra-section-group\">\n        <h4 className=\"astra-group-title\">Header Preview</h4>\n        <div className=\"astra-header-preview\">\n          {header.above.enabled && (\n            <div \n              className=\"astra-header-preview-above\"\n              style={{\n                height: `${header.above.height.desktop}px`,\n                background: header.above.background,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                fontSize: '11px',\n                color: '#646970',\n              }}\n            >\n              Above Header - {header.above.content.join(', ') || 'No content'}\n            </div>\n          )}\n          \n          <div \n            className=\"astra-header-preview-primary\"\n            style={{\n              height: `${header.primary.height.desktop}px`,\n              background: header.primary.background,\n              display: 'flex',\n              alignItems: 'center',\n              padding: '0 20px',\n              borderTop: header.above.enabled ? '1px solid #e0e0e0' : 'none',\n              borderBottom: header.below.enabled ? '1px solid #e0e0e0' : 'none',\n            }}\n          >\n            <div style={{ flex: 1 }}>\n              <div style={{\n                width: '120px',\n                height: '30px',\n                background: '#e0e0e0',\n                borderRadius: '3px',\n              }} />\n            </div>\n            <div style={{ \n              flex: 2, \n              textAlign: header.primary.menuAlignment as any,\n              fontSize: '11px',\n              color: '#646970',\n            }}>\n              Navigation Menu\n            </div>\n          </div>\n          \n          {header.below.enabled && (\n            <div \n              className=\"astra-header-preview-below\"\n              style={{\n                height: `${header.below.height.desktop}px`,\n                background: header.below.background,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                fontSize: '11px',\n                color: '#646970',\n              }}\n            >\n              Below Header - {header.below.content.join(', ') || 'No content'}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { useCustomizerState } from '../../hooks/useCustomizerState';\nimport { AstraColorPicker } from '../../components/controls/AstraColorPicker';\nimport { AstraToggle } from '../../components/controls/AstraToggle';\nimport { AstraSlider } from '../../components/controls/AstraSlider';\nimport { AstraSelect } from '../../components/controls/AstraSelect';\nimport { Grid, Type, Layout } from 'lucide-react';\n\nexport const FooterSection: React.FC = () => {\n  const { settings, updateSetting } = useCustomizerState();\n  const footer = settings.footer;\n  \n  const [activeTab, setActiveTab] = React.useState<'widgets' | 'bottom'>('widgets');\n  \n  const footerLayoutOptions = [\n    { value: 'footer-layout-1', label: 'Layout 1 - Equal Columns' },\n    { value: 'footer-layout-2', label: 'Layout 2 - Wide First Column' },\n    { value: 'footer-layout-3', label: 'Layout 3 - Wide Last Column' },\n  ];\n  \n  const bottomBarLayoutOptions = [\n    { value: 'layout-1', label: 'Layout 1 - Text Left, Menu Right' },\n    { value: 'layout-2', label: 'Layout 2 - Centered Text' },\n  ];\n  \n  return (\n    <div className=\"astra-section footer-section\">\n      <div className=\"astra-section-title\">Footer</div>\n      \n      {/* Footer Tabs */}\n      <div className=\"astra-tabs\">\n        <button\n          onClick={() => setActiveTab('widgets')}\n          className={`astra-tab ${activeTab === 'widgets' ? 'active' : ''}`}\n        >\n          <Grid size={14} />\n          Footer Widgets\n        </button>\n        <button\n          onClick={() => setActiveTab('bottom')}\n          className={`astra-tab ${activeTab === 'bottom' ? 'active' : ''}`}\n        >\n          <Type size={14} />\n          Bottom Bar\n        </button>\n      </div>\n      \n      {activeTab === 'widgets' ? (\n        <>\n          {/* Footer Widgets Settings */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Footer Widgets</h4>\n            \n            <AstraToggle\n              label=\"Enable Footer Widgets\"\n              value={footer.widgets.enabled}\n              onChange={(value) => updateSetting('footer', value, ['widgets', 'enabled'])}\n              description=\"Display widget areas in the footer\"\n            />\n            \n            {footer.widgets.enabled && (\n              <>\n                <AstraSelect\n                  label=\"Footer Layout\"\n                  value={footer.layout}\n                  onChange={(value) => updateSetting('footer', value, ['layout'])}\n                  options={footerLayoutOptions}\n                  description=\"Choose footer widget layout\"\n                />\n                \n                <AstraSlider\n                  label=\"Number of Columns\"\n                  value={footer.widgets.columns}\n                  onChange={(value) => updateSetting('footer', value, ['widgets', 'columns'])}\n                  min={1}\n                  max={6}\n                  step={1}\n                  responsive={true}\n                  description=\"Number of widget columns\"\n                />\n                \n                <AstraColorPicker\n                  label=\"Background Color\"\n                  value={footer.widgets.background}\n                  onChange={(value) => updateSetting('footer', value, ['widgets', 'background'])}\n                  description=\"Footer widgets background color\"\n                />\n                \n                <AstraColorPicker\n                  label=\"Text Color\"\n                  value={footer.widgets.textColor}\n                  onChange={(value) => updateSetting('footer', value, ['widgets', 'textColor'])}\n                  description=\"Footer widgets text color\"\n                />\n                \n                <AstraColorPicker\n                  label=\"Link Color\"\n                  value={footer.widgets.linkColor}\n                  onChange={(value) => updateSetting('footer', value, ['widgets', 'linkColor'])}\n                  hasHover={true}\n                  description=\"Footer widgets link color\"\n                />\n              </>\n            )}\n          </div>\n          \n          {footer.widgets.enabled && (\n            <div className=\"astra-section-group\">\n              <h4 className=\"astra-group-title\">Widget Area Spacing</h4>\n              \n              <div className=\"astra-typography-group\">\n                <AstraSlider\n                  label=\"Padding Top\"\n                  value={{\n                    desktop: footer.widgets.padding.desktop.top,\n                    tablet: footer.widgets.padding.tablet.top,\n                    mobile: footer.widgets.padding.mobile.top,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('footer', val, ['widgets', 'padding', 'desktop', 'top']);\n                    if (typeof value !== 'number') {\n                      updateSetting('footer', value.tablet, ['widgets', 'padding', 'tablet', 'top']);\n                      updateSetting('footer', value.mobile, ['widgets', 'padding', 'mobile', 'top']);\n                    }\n                  }}\n                  min={0}\n                  max={200}\n                  unit=\"px\"\n                  responsive={true}\n                />\n                \n                <AstraSlider\n                  label=\"Padding Bottom\"\n                  value={{\n                    desktop: footer.widgets.padding.desktop.bottom,\n                    tablet: footer.widgets.padding.tablet.bottom,\n                    mobile: footer.widgets.padding.mobile.bottom,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('footer', val, ['widgets', 'padding', 'desktop', 'bottom']);\n                    if (typeof value !== 'number') {\n                      updateSetting('footer', value.tablet, ['widgets', 'padding', 'tablet', 'bottom']);\n                      updateSetting('footer', value.mobile, ['widgets', 'padding', 'mobile', 'bottom']);\n                    }\n                  }}\n                  min={0}\n                  max={200}\n                  unit=\"px\"\n                  responsive={true}\n                />\n              </div>\n            </div>\n          )}\n        </>\n      ) : (\n        <>\n          {/* Bottom Bar Settings */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Bottom Bar</h4>\n            \n            <AstraToggle\n              label=\"Enable Bottom Bar\"\n              value={footer.bottomBar.enabled}\n              onChange={(value) => updateSetting('footer', value, ['bottomBar', 'enabled'])}\n              description=\"Display copyright/bottom bar section\"\n            />\n            \n            {footer.bottomBar.enabled && (\n              <>\n                <AstraSelect\n                  label=\"Bottom Bar Layout\"\n                  value={footer.bottomBar.layout}\n                  onChange={(value) => updateSetting('footer', value, ['bottomBar', 'layout'])}\n                  options={bottomBarLayoutOptions}\n                  description=\"Choose bottom bar layout\"\n                />\n                \n                <div className=\"astra-control\">\n                  <label className=\"astra-control-label\">Copyright Text</label>\n                  <textarea\n                    value={footer.bottomBar.section1}\n                    onChange={(e) => updateSetting('footer', e.target.value, ['bottomBar', 'section1'])}\n                    className=\"astra-textarea\"\n                    placeholder=\"© 2024 Your Company. All rights reserved.\"\n                    rows={3}\n                  />\n                  <span className=\"astra-control-description\">\n                    You can use HTML and shortcodes here\n                  </span>\n                </div>\n                \n                {footer.bottomBar.layout === 'layout-1' && (\n                  <div className=\"astra-control\">\n                    <label className=\"astra-control-label\">Right Section Content</label>\n                    <input\n                      type=\"text\"\n                      value={footer.bottomBar.section2}\n                      onChange={(e) => updateSetting('footer', e.target.value, ['bottomBar', 'section2'])}\n                      className=\"astra-text-input\"\n                      placeholder=\"Privacy Policy | Terms of Service\"\n                    />\n                    <span className=\"astra-control-description\">\n                      Additional content for the right section\n                    </span>\n                  </div>\n                )}\n                \n                <AstraColorPicker\n                  label=\"Background Color\"\n                  value={footer.bottomBar.background}\n                  onChange={(value) => updateSetting('footer', value, ['bottomBar', 'background'])}\n                  description=\"Bottom bar background color\"\n                />\n                \n                <AstraColorPicker\n                  label=\"Text Color\"\n                  value={footer.bottomBar.textColor}\n                  onChange={(value) => updateSetting('footer', value, ['bottomBar', 'textColor'])}\n                  description=\"Bottom bar text color\"\n                />\n                \n                <AstraColorPicker\n                  label=\"Link Color\"\n                  value={footer.bottomBar.linkColor}\n                  onChange={(value) => updateSetting('footer', value, ['bottomBar', 'linkColor'])}\n                  hasHover={true}\n                  description=\"Bottom bar link color\"\n                />\n              </>\n            )}\n          </div>\n          \n          {footer.bottomBar.enabled && (\n            <div className=\"astra-section-group\">\n              <h4 className=\"astra-group-title\">Bottom Bar Spacing</h4>\n              \n              <div className=\"astra-typography-group\">\n                <AstraSlider\n                  label=\"Padding Top\"\n                  value={{\n                    desktop: footer.bottomBar.padding.desktop.top,\n                    tablet: footer.bottomBar.padding.tablet.top,\n                    mobile: footer.bottomBar.padding.mobile.top,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('footer', val, ['bottomBar', 'padding', 'desktop', 'top']);\n                    if (typeof value !== 'number') {\n                      updateSetting('footer', value.tablet, ['bottomBar', 'padding', 'tablet', 'top']);\n                      updateSetting('footer', value.mobile, ['bottomBar', 'padding', 'mobile', 'top']);\n                    }\n                  }}\n                  min={0}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                />\n                \n                <AstraSlider\n                  label=\"Padding Bottom\"\n                  value={{\n                    desktop: footer.bottomBar.padding.desktop.bottom,\n                    tablet: footer.bottomBar.padding.tablet.bottom,\n                    mobile: footer.bottomBar.padding.mobile.bottom,\n                  }}\n                  onChange={(value) => {\n                    const val = typeof value === 'number' ? value : value.desktop;\n                    updateSetting('footer', val, ['bottomBar', 'padding', 'desktop', 'bottom']);\n                    if (typeof value !== 'number') {\n                      updateSetting('footer', value.tablet, ['bottomBar', 'padding', 'tablet', 'bottom']);\n                      updateSetting('footer', value.mobile, ['bottomBar', 'padding', 'mobile', 'bottom']);\n                    }\n                  }}\n                  min={0}\n                  max={100}\n                  unit=\"px\"\n                  responsive={true}\n                />\n              </div>\n            </div>\n          )}\n        </>\n      )}\n      \n      {/* Footer Preview */}\n      <div className=\"astra-section-group\">\n        <h4 className=\"astra-group-title\">Footer Preview</h4>\n        <div className=\"astra-footer-preview\">\n          {footer.widgets.enabled && (\n            <div\n              className=\"astra-footer-preview-widgets\"\n              style={{\n                background: footer.widgets.background,\n                color: footer.widgets.textColor,\n                padding: `${footer.widgets.padding.desktop.top}px 20px ${footer.widgets.padding.desktop.bottom}px`,\n              }}\n            >\n              <div\n                style={{\n                  display: 'grid',\n                  gridTemplateColumns: `repeat(${footer.widgets.columns.desktop}, 1fr)`,\n                  gap: '30px',\n                }}\n              >\n                {Array.from({ length: footer.widgets.columns.desktop }, (_, i) => (\n                  <div\n                    key={i}\n                    style={{\n                      background: 'rgba(255,255,255,0.1)',\n                      padding: '15px',\n                      borderRadius: '3px',\n                      minHeight: '80px',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      fontSize: '11px',\n                      opacity: 0.7,\n                    }}\n                  >\n                    Widget {i + 1}\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n          \n          {footer.bottomBar.enabled && (\n            <div\n              className=\"astra-footer-preview-bottom\"\n              style={{\n                background: footer.bottomBar.background,\n                color: footer.bottomBar.textColor,\n                padding: `${footer.bottomBar.padding.desktop.top}px 20px ${footer.bottomBar.padding.desktop.bottom}px`,\n                borderTop: footer.widgets.enabled ? '1px solid rgba(255,255,255,0.1)' : 'none',\n              }}\n            >\n              {footer.bottomBar.layout === 'layout-1' ? (\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                  <div style={{ fontSize: '12px' }}>\n                    {footer.bottomBar.section1 || '© 2024 Your Company'}\n                  </div>\n                  <div style={{ fontSize: '12px' }}>\n                    {footer.bottomBar.section2 || 'Privacy | Terms'}\n                  </div>\n                </div>\n              ) : (\n                <div style={{ textAlign: 'center', fontSize: '12px' }}>\n                  {footer.bottomBar.section1 || '© 2024 Your Company'}\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","import React, { useState, useRef } from 'react';\nimport { Download, Upload, Copy, Check, AlertCircle } from 'lucide-react';\nimport { useCustomizer } from '../context/CustomizerContext';\nimport { AstraCustomizerSettings } from '../types/customizer-types';\nimport { getDefaultSettings } from '../utils/default-settings';\nimport { deepMerge } from '../utils/deep-merge';\n\nexport const ImportExport: React.FC = () => {\n  const { state, setSettings, resetSettings } = useCustomizer();\n  const [activeTab, setActiveTab] = useState<'export' | 'import'>('export');\n  const [importData, setImportData] = useState('');\n  const [copied, setCopied] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  // Export settings as JSON\n  const exportSettings = () => {\n    const dataStr = JSON.stringify(state.settings, null, 2);\n    const dataUri = 'data:application/json;charset=utf-8,' + encodeURIComponent(dataStr);\n    \n    const exportFileDefaultName = `astra-customizer-settings-${new Date().toISOString().split('T')[0]}.json`;\n    \n    const linkElement = document.createElement('a');\n    linkElement.setAttribute('href', dataUri);\n    linkElement.setAttribute('download', exportFileDefaultName);\n    linkElement.click();\n    \n    setSuccess('Settings exported successfully!');\n    setTimeout(() => setSuccess(null), 3000);\n  };\n  \n  // Copy settings to clipboard\n  const copyToClipboard = async () => {\n    try {\n      await navigator.clipboard.writeText(JSON.stringify(state.settings, null, 2));\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      setError('Failed to copy to clipboard');\n      setTimeout(() => setError(null), 3000);\n    }\n  };\n  \n  // Import settings from JSON\n  const importSettings = () => {\n    try {\n      const parsedData = JSON.parse(importData);\n      \n      // Validate the imported data structure\n      if (!parsedData || typeof parsedData !== 'object') {\n        throw new Error('Invalid settings format');\n      }\n      \n      // Merge with default settings to ensure all properties exist\n      const defaultSettings = getDefaultSettings();\n      const mergedSettings = deepMerge(defaultSettings, parsedData) as AstraCustomizerSettings;\n      \n      // Update meta information\n      mergedSettings._meta = {\n        ...mergedSettings._meta,\n        lastModified: new Date().toISOString(),\n        isDirty: true,\n      };\n      \n      setSettings(mergedSettings);\n      setSuccess('Settings imported successfully!');\n      setImportData('');\n      setTimeout(() => setSuccess(null), 3000);\n    } catch (err) {\n      setError('Invalid JSON format. Please check your settings data.');\n      setTimeout(() => setError(null), 5000);\n    }\n  };\n  \n  // Handle file upload\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    \n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const content = e.target?.result as string;\n      setImportData(content);\n      setSuccess('File loaded. Click Import to apply settings.');\n      setTimeout(() => setSuccess(null), 3000);\n    };\n    reader.onerror = () => {\n      setError('Failed to read file');\n      setTimeout(() => setError(null), 3000);\n    };\n    reader.readAsText(file);\n  };\n  \n  return (\n    <div className=\"astra-section import-export-section\">\n      <div className=\"astra-section-title\">Import / Export Settings</div>\n      \n      {/* Tabs */}\n      <div className=\"astra-tabs\">\n        <button\n          onClick={() => setActiveTab('export')}\n          className={`astra-tab ${activeTab === 'export' ? 'active' : ''}`}\n        >\n          <Download size={14} />\n          Export\n        </button>\n        <button\n          onClick={() => setActiveTab('import')}\n          className={`astra-tab ${activeTab === 'import' ? 'active' : ''}`}\n        >\n          <Upload size={14} />\n          Import\n        </button>\n      </div>\n      \n      {/* Notifications */}\n      {error && (\n        <div className=\"astra-notification error\">\n          <AlertCircle size={16} />\n          {error}\n        </div>\n      )}\n      \n      {success && (\n        <div className=\"astra-notification success\">\n          <Check size={16} />\n          {success}\n        </div>\n      )}\n      \n      {activeTab === 'export' ? (\n        <>\n          {/* Export Section */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Export Current Settings</h4>\n            <p className=\"astra-control-description\">\n              Export your customizer settings to a JSON file or copy to clipboard. \n              You can use this to backup your settings or transfer them to another site.\n            </p>\n            \n            <div className=\"astra-button-group\">\n              <button onClick={exportSettings} className=\"astra-button\">\n                <Download size={16} />\n                Download JSON File\n              </button>\n              \n              <button onClick={copyToClipboard} className=\"astra-button secondary\">\n                {copied ? <Check size={16} /> : <Copy size={16} />}\n                {copied ? 'Copied!' : 'Copy to Clipboard'}\n              </button>\n            </div>\n          </div>\n          \n          {/* Settings Preview */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Current Settings Preview</h4>\n            <div className=\"astra-code-block\">\n              <pre>{JSON.stringify(state.settings, null, 2).slice(0, 500)}...</pre>\n            </div>\n            <p className=\"astra-help-text\">\n              This is a preview of your current settings in JSON format.\n            </p>\n          </div>\n        </>\n      ) : (\n        <>\n          {/* Import Section */}\n          <div className=\"astra-section-group\">\n            <h4 className=\"astra-group-title\">Import Settings</h4>\n            <p className=\"astra-control-description\">\n              Import customizer settings from a JSON file or paste JSON data directly. \n              This will override your current settings.\n            </p>\n            \n            {/* File Upload */}\n            <div className=\"astra-import-options\">\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\".json,application/json\"\n                onChange={handleFileUpload}\n                style={{ display: 'none' }}\n              />\n              \n              <button\n                onClick={() => fileInputRef.current?.click()}\n                className=\"astra-button secondary\"\n              >\n                <Upload size={16} />\n                Choose JSON File\n              </button>\n            </div>\n            \n            {/* Text Input */}\n            <div className=\"astra-control\">\n              <label className=\"astra-control-label\">Or Paste JSON Data</label>\n              <textarea\n                value={importData}\n                onChange={(e) => setImportData(e.target.value)}\n                className=\"astra-textarea\"\n                placeholder=\"Paste your settings JSON here...\"\n                rows={10}\n                style={{ fontFamily: 'monospace', fontSize: '12px' }}\n              />\n            </div>\n            \n            <div className=\"astra-button-group\">\n              <button\n                onClick={importSettings}\n                disabled={!importData}\n                className=\"astra-button\"\n              >\n                <Upload size={16} />\n                Import Settings\n              </button>\n              \n              <button\n                onClick={() => {\n                  setImportData('');\n                  setError(null);\n                  setSuccess(null);\n                }}\n                className=\"astra-button secondary\"\n              >\n                Clear\n              </button>\n            </div>\n          </div>\n          \n          {/* Warning */}\n          <div className=\"astra-section-group\">\n            <div className=\"astra-help-text\">\n              ⚠️ <strong>Warning:</strong> Importing settings will replace all your current customizer settings. \n              Make sure to export your current settings first if you want to keep a backup.\n            </div>\n            \n            <button onClick={resetSettings} className=\"astra-button secondary\">\n              Reset to Default Settings\n            </button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n};","import React, { useState, useEffect } from 'react';\nimport { CustomizerProvider } from './context/CustomizerContext';\nimport { CustomizerHeader } from './components/layout/CustomizerHeader';\nimport { CustomizerSidebar } from './components/layout/CustomizerSidebar';\nimport { EnhancedPreview } from './components/layout/EnhancedPreview';\nimport { SettingSection, AstraCustomizerSettings } from './types/customizer-types';\nimport '../../../styles/wordpress-customizer.css';\nimport './styles/controls.css';\nimport './styles/sections.css';\nimport './styles/enhanced-preview.css';\nimport { useCustomizerState } from './hooks/useCustomizerState';\nimport { useKeyboardShortcuts } from './hooks/useKeyboardShortcuts';\nimport { authClient } from '@o4o/auth-client';\nimport toast from 'react-hot-toast';\n\n// Import section components\nimport { SiteIdentitySection } from './sections/global/SiteIdentitySection';\nimport { ColorsSection } from './sections/global/ColorsSection';\nimport { TypographySection } from './sections/global/TypographySection';\nimport { ContainerSection } from './sections/layout/ContainerSection';\nimport { HeaderLayoutSection } from './sections/header/HeaderLayoutSection';\nimport { FooterSection } from './sections/footer/FooterSection';\nimport { ImportExport } from './components/ImportExport';\n\ninterface AstraCustomizerProps {\n  onClose: () => void;\n  initialSettings?: Partial<AstraCustomizerSettings>;\n  previewUrl?: string;\n  siteName?: string;\n  onSave?: (settings: AstraCustomizerSettings) => Promise<void>;\n}\n\n// Inner component that uses the context\nconst AstraCustomizerContent: React.FC<{\n  onClose: () => void;\n  siteName: string;\n  previewUrl: string;\n  onSaveHandler: (settings: AstraCustomizerSettings) => Promise<void>;\n}> = ({ onClose, siteName, previewUrl, onSaveHandler }) => {\n  const [activeSection, setActiveSection] = useState<SettingSection | null>(null);\n  const { isDirty, undo, redo, settings, resetAll } = useCustomizerState();\n\n  // Initialize keyboard shortcuts\n  useKeyboardShortcuts({\n    onSave: async () => {\n      await onSaveHandler(settings);\n    },\n    onUndo: undo,\n    onRedo: redo,\n    onClose,\n    onReset: resetAll,\n  });\n\n  // Handle escape key to close customizer (unless currently in fullscreen)\n  useEffect(() => {\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        // If any element is in fullscreen, let ESC exit fullscreen first\n        if (typeof document !== 'undefined' && (document as any).fullscreenElement) {\n          return;\n        }\n        if (isDirty) {\n          const ok = window.confirm('변경사항이 저장되지 않았습니다. 종료하시겠습니까?');\n          if (!ok) return;\n        }\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [onClose, isDirty]);\n\n  // Warn on page unload if there are unsaved changes\n  useEffect(() => {\n    const handleBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (!isDirty) return;\n      e.preventDefault();\n      // Chrome requires returnValue to be set\n      e.returnValue = '';\n    };\n    window.addEventListener('beforeunload', handleBeforeUnload);\n    return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n  }, [isDirty]);\n\n  // Prevent body scroll when customizer is open\n  useEffect(() => {\n    document.body.style.overflow = 'hidden';\n    return () => {\n      document.body.style.overflow = '';\n    };\n  }, []);\n\n  const renderSectionContent = () => {\n    if (!activeSection) {\n      return (\n        <div className=\"wp-customizer-welcome\">\n          <h2>Welcome to Astra Customizer</h2>\n          <p>Select a section from the left panel to start customizing your site.</p>\n          <ul>\n            <li>🎨 <strong>Colors</strong> - Customize your site's color scheme</li>\n            <li>📝 <strong>Typography</strong> - Set fonts and text styles</li>\n            <li>📐 <strong>Layout</strong> - Control container widths and spacing</li>\n            <li>🔝 <strong>Header</strong> - Design your site header</li>\n            <li>🔻 <strong>Footer</strong> - Customize footer widgets and content</li>\n            <li>📰 <strong>Blog</strong> - Configure blog layout and post display</li>\n          </ul>\n        </div>\n      );\n    }\n\n    // Render appropriate section component based on activeSection\n    switch (activeSection) {\n      case 'siteIdentity':\n        return <SiteIdentitySection />;\n      case 'colors':\n        return <ColorsSection />;\n      case 'typography':\n        return <TypographySection />;\n      case 'container':\n        return <ContainerSection />;\n      case 'header':\n        return <HeaderLayoutSection />;\n      case 'footer':\n        return <FooterSection />;\n      case 'sidebar':\n        return <ContainerSection />;\n      case 'blog':\n        return <ContainerSection />;\n      case 'customCSS':\n        return <ImportExport />;\n      default:\n        return <div>Section not found</div>;\n    }\n  };\n\n  return (\n    <div className=\"wp-customizer\">\n      <CustomizerHeader onClose={onClose} siteName={siteName} />\n\n      <div className=\"wp-customizer-body\">\n        <CustomizerSidebar\n          activePanel={activeSection}\n          onPanelSelect={setActiveSection}\n        />\n\n        {/* Section Content Area - Hidden for now, will show when section is selected */}\n        {activeSection && (\n          <div className=\"wp-customizer-section-panel\">\n            {renderSectionContent()}\n          </div>\n        )}\n\n        <EnhancedPreview\n          url={previewUrl}\n        />\n      </div>\n    </div>\n  );\n};\n\n// Main component that provides the context\nexport const AstraCustomizer: React.FC<AstraCustomizerProps> = ({\n  onClose,\n  initialSettings,\n  previewUrl = '/',\n  siteName = 'O4O Platform',\n  onSave,\n}) => {\n  const handleSave = async (settings: AstraCustomizerSettings) => {\n    if (onSave) {\n      await onSave(settings);\n    } else {\n      // Default save implementation using API\n      try {\n        const response = await authClient.api.post('/api/v1/themes/customizer/settings', {\n          themeId: 'default',\n          settings: settings\n        });\n\n        if (response.data?.success) {\n          toast.success('Settings saved successfully');\n        }\n      } catch (error: any) {\n        toast.error(error?.response?.data?.message || 'Failed to save settings');\n        throw error;\n      }\n    }\n  };\n\n  return (\n    <CustomizerProvider\n      initialSettings={initialSettings}\n      previewUrl={previewUrl}\n      eventHandlers={{\n        onSave: handleSave,\n        onSettingChange: (section, value) => {\n          // Handle setting change\n        },\n        onDeviceChange: (device) => {\n          // Handle device change\n        },\n        onReset: () => {\n          // Handle reset\n        },\n      }}\n    >\n      <AstraCustomizerContent\n        onClose={onClose}\n        siteName={siteName}\n        previewUrl={previewUrl}\n        onSaveHandler={handleSave}\n      />\n    </CustomizerProvider>\n  );\n};\n\n// Export as default for lazy loading\nexport default AstraCustomizer;\n","import React, { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAdminFullscreen } from '@/hooks/useAdminFullscreen';\nimport { authClient } from '@o4o/auth-client';\nimport toast from 'react-hot-toast';\nimport { AstraCustomizer } from './astra-customizer/AstraCustomizer';\n\nconst Customize: React.FC = () => {\n  const navigate = useNavigate();\n  const { enter, exit } = useAdminFullscreen();\n  \n  // 풀스크린 모드 관리\n  useEffect(() => {\n    document.body.classList.add('customizer-fullscreen');\n    enter('customize');\n    \n    return () => {\n      document.body.classList.remove('customizer-fullscreen');\n      exit();\n    };\n  }, [enter, exit]);\n  \n  const handleClose = () => {\n    navigate('/admin');\n  };\n  \n  const handleSave = async (settings: any) => {\n    try {\n      // API를 통해 설정 저장\n      const response = await authClient.api.post('/v1/settings/customizer', {\n        settings: settings,\n        type: 'astra-customizer'\n      });\n\n      if (response.data?.success) {\n        toast.success('설정이 저장되었습니다.');\n        return true;\n      }\n      return false;\n    } catch (error: any) {\n      const statusCode = error?.response?.status;\n      const errorCode = error?.response?.data?.code;\n\n      if (statusCode === 401 || statusCode === 403) {\n        if (errorCode === 'USER_NOT_AUTHENTICATED') {\n          toast.error('세션이 만료되었습니다. 다시 로그인해주세요.');\n          setTimeout(() => {\n            navigate('/login');\n          }, 2000);\n        } else if (errorCode === 'INSUFFICIENT_PERMISSIONS') {\n          toast.error('설정을 저장할 권한이 없습니다.');\n        } else {\n          toast.error('인증 오류가 발생했습니다.');\n        }\n      } else {\n        const message = error?.response?.data?.message || '설정 저장 중 오류가 발생했습니다.';\n        toast.error(message);\n      }\n      return false;\n    }\n  };\n  \n  return (\n    <AstraCustomizer\n      onClose={handleClose}\n      previewUrl={import.meta.env.VITE_PUBLIC_APP_ORIGIN || window.location.origin}\n      siteName=\"Neture Platform\"\n      onSave={handleSave}\n    />\n  );\n};\n\nexport default Customize;\n"],"file":"assets/Customize-cSIwZ4oU.js"}