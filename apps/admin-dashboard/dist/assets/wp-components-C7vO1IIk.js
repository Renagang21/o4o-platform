import{r as u,j as d}from"./vendor-react-k21L8gyu.js";import{az as E}from"./wp-block-editor-DM9yXXIa.js";import"./wp-i18n-DQMG9Moe.js";import{t as P}from"./wp-core-CTkjrE6Y.js";function x(){const t=new Map,e=new Map;function r(n){const i=e.get(n);if(i)for(const f of i)f()}return{get(n){return t.get(n)},set(n,i){t.set(n,i),r(n)},delete(n){t.delete(n),r(n)},subscribe(n,i){let f=e.get(n);return f||(f=new Set,e.set(n,f)),f.add(i),()=>{f.delete(i),f.size===0&&e.delete(n)}}}}function v(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;let i=0;for(;i<r.length;){const f=r[i],a=t[f];if(a===void 0&&!e.hasOwnProperty(f)||a!==e[f])return!1;i++}return!0}function C(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}function b(t,e){if(t&&e){if(t.constructor===Object&&e.constructor===Object)return v(t,e);if(Array.isArray(t)&&Array.isArray(e))return C(t,e)}return t===e}function y(t,e){typeof t=="function"?t(e):t&&t.hasOwnProperty("current")&&(t.current=e)}function U(t){const e=u.useRef(),r=u.useRef(!1),n=u.useRef(!1),i=u.useRef([]),f=u.useRef(t);return f.current=t,u.useLayoutEffect(()=>{n.current===!1&&r.current===!0&&t.forEach((a,s)=>{const c=i.current[s];a!==c&&(y(c,null),y(a,e.current))}),i.current=t},t),u.useLayoutEffect(()=>{n.current=!1}),u.useCallback(a=>{y(e,a),n.current=!0,r.current=a!==null;const s=a?f.current:i.current;for(const c of s)y(c,a)},[])}const m=new Set;function k(){return globalThis.SCRIPT_DEBUG===!0}function D(t){if(k()&&!m.has(t)){console.warn(t);try{throw Error(t)}catch{}m.add(t)}}const O=E("div",{target:"e19lxcc00"})("");function V({as:t,...e},r){return d.jsx(O,{as:t,ref:r,...e})}const A=Object.assign(u.forwardRef(V),{selector:".components-view"}),L={registerSlot:()=>{},unregisterSlot:()=>{},registerFill:()=>{},unregisterFill:()=>{},getSlot:()=>{},getFills:()=>[],subscribe:()=>()=>{}},R=u.createContext(L);function w(t){return typeof t=="function"}class $ extends u.Component{constructor(e){super(e),this.isUnmounted=!1}componentDidMount(){const{registerSlot:e}=this.props;this.isUnmounted=!1,e(this.props.name,this)}componentWillUnmount(){const{unregisterSlot:e}=this.props;this.isUnmounted=!0,e(this.props.name,this)}componentDidUpdate(e){const{name:r,unregisterSlot:n,registerSlot:i}=this.props;e.name!==r&&(n(e.name,this),i(r,this))}forceUpdate(){this.isUnmounted||super.forceUpdate()}render(){var e;const{children:r,name:n,fillProps:i={},getFills:f}=this.props,a=((e=f(n,this))!==null&&e!==void 0?e:[]).map(s=>{const c=w(s.children)?s.children(i):s.children;return u.Children.map(c,(l,p)=>{if(!l||typeof l=="string")return l;let S=p;return typeof l=="object"&&"key"in l&&l?.key&&(S=l.key),u.cloneElement(l,{key:S})})}).filter(s=>!P(s));return d.jsx(d.Fragment,{children:w(r)?r(a):a})}}const M=t=>d.jsx(R.Consumer,{children:({registerSlot:e,unregisterSlot:r,getFills:n})=>d.jsx($,{...t,registerSlot:e,unregisterSlot:r,getFills:n})}),T={slots:x(),fills:x(),registerSlot:()=>{globalThis.SCRIPT_DEBUG===!0&&D("Components must be wrapped within `SlotFillProvider`. See https://developer.wordpress.org/block-editor/components/slot-fill/")},updateSlot:()=>{},unregisterSlot:()=>{},registerFill:()=>{},unregisterFill:()=>{},isDefault:!0},F=u.createContext(T);function _(t,e){const{name:r,fillProps:n={},as:i,children:f,...a}=t,{registerSlot:s,unregisterSlot:c,...l}=u.useContext(F),p=u.useRef(null);return u.useLayoutEffect(()=>(s(r,p,n),()=>{c(r,p)}),[s,c,r]),u.useLayoutEffect(()=>{l.updateSlot(r,n)}),d.jsx(A,{as:i,ref:U([e,p]),...a})}const q=u.forwardRef(_);function B(){const t=x(),e=x();return{slots:t,fills:e,registerSlot:(s,c,l)=>{const p=t.get(s);t.set(s,{...p,ref:c||p?.ref,fillProps:l||p?.fillProps||{}})},updateSlot:(s,c)=>{const l=t.get(s);if(!l||b(l.fillProps,c))return;l.fillProps=c;const p=e.get(s);p&&p.forEach(S=>S.current.rerender())},unregisterSlot:(s,c)=>{t.get(s)?.ref===c&&t.delete(s)},registerFill:(s,c)=>{e.set(s,[...e.get(s)||[],c])},unregisterFill:(s,c)=>{const l=e.get(s);l&&e.set(s,l.filter(p=>p!==c))}}}function K({children:t}){const[e]=u.useState(B);return d.jsx(F.Provider,{value:e,children:t})}function z(){const t={},e={};let r=[];function n(o,g){const h=t[o];t[o]=g,p(),l(o),h&&h.forceUpdate()}function i(o,g){e[o]=[...e[o]||[],g],l(o)}function f(o,g){t[o]===g&&(delete t[o],p())}function a(o,g){var h;e[o]=(h=e[o]?.filter(j=>j!==g))!==null&&h!==void 0?h:[],l(o)}function s(o){return t[o]}function c(o,g){return t[o]!==g?[]:e[o]}function l(o){const g=s(o);g&&g.forceUpdate()}function p(){r.forEach(o=>o())}function S(o){return r.push(o),()=>{r=r.filter(g=>g!==o)}}return{registerSlot:n,unregisterSlot:f,registerFill:i,unregisterFill:a,getSlot:s,getFills:c,subscribe:S}}function G({children:t}){const[e]=u.useState(z);return d.jsx(R.Provider,{value:e,children:t})}function I(t,e){const{bubblesVirtually:r,...n}=t;return r?d.jsx(q,{...n,ref:e}):d.jsx(M,{...n})}u.forwardRef(I);function N({children:t,passthrough:e=!1}){return!u.useContext(F).isDefault&&e?d.jsx(d.Fragment,{children:t}):d.jsx(G,{children:d.jsx(K,{children:t})})}N.displayName="SlotFillProvider";export{N as P};
