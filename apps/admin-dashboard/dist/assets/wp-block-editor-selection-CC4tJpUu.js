import{by as e,bz as t,ah as n,bA as o,bB as s,bC as i,as as r,u as c,b as l,aE as a,av as u,aw as d,bD as f,bE as m,s as b,_ as g,B as p,a0 as k,g as h}from"./wp-block-editor-misc-pHCPYvR2.js";import{ax as y,F as S,bZ as v}from"./wp-block-editor-utils-M5qXzE1L.js";import{j as w,r as j}from"./vendor-react-BQ6HOJoh.js";import{s as C}from"./wp-block-editor-store-B-g1aSix.js";import{ah as B}from"./wp-block-editor-a11y-DrduSWFW.js";import{a as E,A as _}from"./wp-blocks-core-6vwQKPfS.js";import{y as x}from"./wp-misc-DS9m4_P2.js";import{h as N}from"./wp-block-editor-library-BpQvynjE.js";function O(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0}function P(e,{sequential:t=!1}={}){const n=e.querySelectorAll(function(e){return[e?'[tabindex]:not([tabindex^="-"])':"[tabindex]","a[href]","button:not([disabled])",'input:not([type="hidden"]):not([disabled])',"select:not([disabled])","textarea:not([disabled])",'iframe:not([tabindex^="-"])',"object","embed","summary","area[href]","[contenteditable]:not([contenteditable=false])"].join(",")}(t));return Array.from(n).filter(e=>{if(!O(e))return!1;const{nodeName:t}=e;return"AREA"!==t||function(e){const t=e.closest("map[name]");if(!t)return!1;const n=e.ownerDocument.querySelector('img[usemap="#'+t.name+'"]');return!!n&&O(n)}(e)})}const I=Object.freeze(Object.defineProperty({__proto__:null,find:P},Symbol.toStringTag,{value:"Module"}));function R(t){const n=t.getSelection(),o=n.rangeCount?n.getRangeAt(0):null;return o?e(o):null}function A(e){y(e.defaultView);const t=e.defaultView.getSelection(),n=t.rangeCount?t.getRangeAt(0):null;return!!n&&!n.collapsed}function D(e){return A(e)||!!e.activeElement&&function(e){if(!t(e)&&!n(e))return!1;try{const{selectionStart:t,selectionEnd:n}=e;return null===t||t!==n}catch(o){return!0}}(e.activeElement)}function M(e){return!!e.activeElement&&(t(e.activeElement)||n(e.activeElement)||A(e))}function T(e){const{anchorNode:t,focusNode:n,anchorOffset:o,focusOffset:s}=e,i=t.compareDocumentPosition(n);return!(i&t.DOCUMENT_POSITION_PRECEDING)&&(!!(i&t.DOCUMENT_POSITION_FOLLOWING)||(0!==i||o<=s))}function F(e,t,n,s){const i=s.style.zIndex,r=s.style.position,{position:c="static"}=o(s);"static"===c&&(s.style.position="relative"),s.style.zIndex="10000";const l=function(e,t,n){if(e.caretRangeFromPoint)return e.caretRangeFromPoint(t,n);if(!e.caretPositionFromPoint)return null;const o=e.caretPositionFromPoint(t,n);if(!o)return null;const s=e.createRange();return s.setStart(o.offsetNode,o.offset),s.collapse(!0),s}(e,t,n);return s.style.zIndex=i,s.style.position=r,l}function z(e,t,n){if(!e)return;if(e.focus(),s(e)){if("number"!=typeof e.selectionStart)return;return void(t?(e.selectionStart=e.value.length,e.selectionEnd=e.value.length):(e.selectionStart=0,e.selectionEnd=0))}if(!e.isContentEditable)return;const o=i(e,t,()=>function(e,t,n){const{ownerDocument:o}=e,s=r(e)?!t:t,i=e.getBoundingClientRect();return void 0===n?n=t?i.right-1:i.left+1:n<=i.left?n=i.left+1:n>=i.right&&(n=i.right-1),F(o,n,s?i.bottom-1:i.top+1,e)}(e,t,n));if(!o)return;const{ownerDocument:c}=e,{defaultView:l}=c,a=l.getSelection();a.removeAllRanges(),a.addRange(o)}function L(e,t){return z(e,t,void 0)}function V(e,t,n){return z(e,t,n?.left)}function q(){const{getSettings:e,hasSelectedBlock:t,hasMultiSelection:n}=c(C),{clearSelectedBlock:o}=l(C),{clearBlockSelection:s}=e();return S(e=>{if(s)return e.addEventListener("mousedown",i),()=>{e.removeEventListener("mousedown",i)};function i(s){(t()||n())&&s.target===e&&o()}},[t,n,o,s])}function G(e){return w.jsx("div",{ref:q(),...e})}function U(){const{clearSelectedBlock:e,multiSelect:t,selectBlock:n}=l(C),{getBlockName:o,getBlockParents:s,getBlockSelectionStart:i,getSelectedBlockClientIds:r,hasMultiSelection:p,hasSelectedBlock:k}=c(C),{getBlockType:h}=c(E);return{updateBlockSelection:j.useCallback(async(c,l,y,S)=>{if(!c?.shiftKey&&c?.keyCode!==a)return void n(l,S);c.preventDefault();const w="keydown"===c.type&&c.keyCode===a,j="keydown"===c.type&&(c.keyCode===u||c.keyCode===d||c.keyCode===f||c.keyCode===m);if(!j&&!k()&&!p())return void n(l,null);const C=r(),E=[...s(l),l];if((w||j&&!C.some(e=>E.includes(e)))&&await e(),!w){let e=i(),n=l;j&&(k()||p()||(e=l),y&&(n=y));const o=s(e),r=s(n),{start:c,end:a}=v(e,n,o,r);await t(c,a,null)}const _=r();if((c.keyCode===f||c.keyCode===m)&&_.length>1)return;const x=C.filter(e=>!_.includes(e));let N;if(1===x.length){const e=h(o(x[0]))?.title;e&&(N=b(g("%s deselected."),e))}else x.length>1&&(N=b(g("%s blocks deselected."),x.length));N&&B(N,"assertive")},[e,o,h,s,i,r,p,k,t,n])}}function W(){const{blocks:e}=c(e=>{const{getMultiSelectedBlocks:t}=e(C);return{blocks:t()}},[]),t=x(_(e),"words");return w.jsxs("div",{className:"block-editor-multi-selection-inspector__card",children:[w.jsx(p,{icon:N,showColors:!0}),w.jsxs("div",{className:"block-editor-multi-selection-inspector__card-content",children:[w.jsx("div",{className:"block-editor-multi-selection-inspector__card-title",children:b(k("%d Block","%d Blocks",e.length),e.length)}),w.jsx("div",{className:"block-editor-multi-selection-inspector__card-description",children:b(k("%d word selected.","%d words selected.",t),t)})]})]})}function H(){return h("wp.blockEditor.MultiSelectScrollIntoView",{hint:"This behaviour is now built-in.",since:"5.8"}),null}export{G as B,H as M,V as a,M as b,R as c,D as d,I as e,P as f,U as g,F as h,T as i,W as j,L as p,q as u};
