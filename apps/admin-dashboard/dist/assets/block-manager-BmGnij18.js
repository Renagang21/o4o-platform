import{_ as e}from"./page-gutenberg-CGPrHM9_.js";import"./vendor-react-Bb0TGSr4.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-BEO_OofR.js";import"./vendor-utils-B-KQWpLj.js";import"./wp-foundation-Ht0JG6Uo.js";import"./wp-components-CoD93iDH.js";class t{categories=new Map;loadedBlocks=new Set;blockRegistry=new Map;constructor(){this.initializeCategories()}initializeCategories(){this.categories.set("core",{name:"Core Blocks",priority:"high",blocks:["paragraph","heading","list","list-item","quote","image"],loaded:!1}),this.categories.set("layout",{name:"Layout Blocks",priority:"medium",blocks:["columns","column","group","separator","spacer","cover"],loaded:!1}),this.categories.set("media",{name:"Media Blocks",priority:"low",blocks:["gallery","audio","video","file","media-text"],loaded:!1}),this.categories.set("widgets",{name:"Widget Blocks",priority:"low",blocks:["shortcode","archives","calendar","categories","latest-comments","latest-posts"],loaded:!1}),this.categories.set("embeds",{name:"Embed Blocks",priority:"low",blocks:["embed","youtube","twitter","facebook","instagram"],loaded:!1})}async loadCategory(t){const o=this.categories.get(t);if(o&&!o.loaded)try{let s;switch(t){case"core":s=await e(()=>import("./index-lgYdSI0F.js"),[]);break;case"layout":s=await e(()=>import("./index-7jPvmCTO.js"),[]);break;case"media":s=await e(()=>import("./index-CGYSRc98.js"),[])}s&&(Object.entries(s).forEach(([e,t])=>{this.registerBlock(e,t)}),o.loaded=!0)}catch(s){}}async loadEssentialBlocks(){await this.loadCategory("core")}async loadHighPriorityBlocks(){const e=Array.from(this.categories.values()).filter(e=>"high"===e.priority);await Promise.all(e.map(e=>this.loadCategory(this.getCategoryName(e))))}async loadBlocksProgressive(){await this.loadEssentialBlocks(),setTimeout(async()=>{const e=Array.from(this.categories.values()).filter(e=>"medium"===e.priority);for(const t of e)await this.loadCategory(this.getCategoryName(t))},2e3),"requestIdleCallback"in window&&requestIdleCallback(async()=>{const e=Array.from(this.categories.values()).filter(e=>"low"===e.priority);for(const t of e)await this.loadCategory(this.getCategoryName(t))})}async loadBlock(e){if(this.loadedBlocks.has(e))return this.blockRegistry.get(e);for(const[t,o]of this.categories)if(o.blocks.includes(e))return await this.loadCategory(t),this.blockRegistry.get(e);return null}registerBlock(e,t){this.blockRegistry.set(e,t),this.loadedBlocks.add(e),window.wp?.blocks?.registerBlockType&&window.wp.blocks.registerBlockType(e,t)}getCategoryName(e){for(const[t,o]of this.categories)if(o===e)return t;return""}getStats(){return{totalBlocks:Array.from(this.categories.values()).reduce((e,t)=>e+t.blocks.length,0),loadedBlocks:this.loadedBlocks.size,loadedCategories:Array.from(this.categories.values()).filter(e=>e.loaded).length,totalCategories:this.categories.size}}}let o=null;function s(){return o||(o=new t),o}s();export{s as getBlockManager};
