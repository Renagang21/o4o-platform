import{a4 as e,a3 as s,r,cb as a,V as o,j as m,a5 as i,a1 as l}from"./vendor-react-40ZmJ4HC.js";import{a as d,o as t,_ as u,b as n,s as p,l as c}from"./vendor-forms-CGXdf1-e.js";import{B as h,C as N,k as b,l as f,t as x,m as v,L as g,I as j,S as U,f as F,g as V,h as E,i as D}from"./page-gutenberg-CxDN_6a_.js";import{C as w}from"./checkbox-EQenI04E.js";import{a as y}from"./base-BtSJbM5J.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-query-DJJ0FlEA.js";import"./vendor-utils-EdRAegAf.js";import"./wp-all-BeSh6B1c.js";import"./index-CDOT2nxa.js";import"./vendor-socket-CMcZe9fK.js";const C=t({email:p().email("Invalid email address"),password:p().min(6,"Password must be at least 6 characters").optional().or(c("")),firstName:p().optional(),lastName:p().optional(),roles:n(p()).min(1,"At least one role is required"),status:u(["active","pending","approved","rejected"])});function k(){const{id:t}=e(),u=s(),[n,p]=r.useState(!1),c=!!t,{register:k,handleSubmit:S,setValue:A,watch:P,formState:{errors:B}}=a({resolver:d(C),defaultValues:{email:"",password:"",firstName:"",lastName:"",roles:["customer"],status:"pending"}}),L=P("roles");r.useEffect(()=>{c&&R()},[t]);const R=async()=>{try{p(!0);const e=await y.get(`/v1/users/${t}`);if(e.data.success){const s=e.data.data;A("email",s.email),A("firstName",s.firstName||""),A("lastName",s.lastName||""),A("roles",s.roles),A("status",s.status)}}catch(e){o.error("Failed to load user"),u("/users")}finally{p(!1)}},q=e=>{const s=L||[];s.includes(e)?s.length>1&&A("roles",s.filter(s=>s!==e)):A("roles",[...s,e])};return m.jsxDEV("div",{className:"p-6",children:[m.jsxDEV("div",{className:"mb-6",children:m.jsxDEV(h,{variant:"ghost",onClick:()=>u("/users"),children:[m.jsxDEV(i,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:144,columnNumber:11},this),"Back to Users"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:143,columnNumber:9},this)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:142,columnNumber:7},this),m.jsxDEV("form",{onSubmit:S(async e=>{try{p(!0);const s={...e,role:e.roles[0]};c?(s.password||delete s.password,await y.put(`/v1/users/${t}`,s),o.success("User updated successfully")):(await y.post("/v1/users",s),o.success("User created successfully")),u("/users")}catch(s){o.error(s.response?.data?.error||"Failed to save user")}finally{p(!1)}}),children:m.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxDEV("div",{className:"lg:col-span-2",children:m.jsxDEV(N,{children:[m.jsxDEV(b,{children:[m.jsxDEV(f,{children:c?"Edit User":"Add New User"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:155,columnNumber:17},this),m.jsxDEV(x,{children:c?"Update user information":"Create a new user account"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:156,columnNumber:17},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:154,columnNumber:15},this),m.jsxDEV(v,{className:"space-y-6",children:[m.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxDEV("div",{children:[m.jsxDEV(g,{htmlFor:"firstName",children:"First Name"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:163,columnNumber:21},this),m.jsxDEV(j,{id:"firstName",...k("firstName"),placeholder:"John"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:164,columnNumber:21},this),B.firstName&&m.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:B.firstName.message},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:170,columnNumber:23},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:162,columnNumber:19},this),m.jsxDEV("div",{children:[m.jsxDEV(g,{htmlFor:"lastName",children:"Last Name"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:174,columnNumber:21},this),m.jsxDEV(j,{id:"lastName",...k("lastName"),placeholder:"Doe"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:175,columnNumber:21},this),B.lastName&&m.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:B.lastName.message},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:181,columnNumber:23},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:173,columnNumber:19},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:161,columnNumber:17},this),m.jsxDEV("div",{children:[m.jsxDEV(g,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:187,columnNumber:19},this),m.jsxDEV(j,{id:"email",type:"email",...k("email"),placeholder:"john.doe@example.com",disabled:c},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:188,columnNumber:19},this),B.email&&m.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:B.email.message},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:196,columnNumber:21},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:186,columnNumber:17},this),m.jsxDEV("div",{children:[m.jsxDEV(g,{htmlFor:"password",children:["Password ",c&&"(leave blank to keep current)"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:201,columnNumber:19},this),m.jsxDEV(j,{id:"password",type:"password",...k("password"),placeholder:c?"Leave blank to keep current":"Enter password"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:204,columnNumber:19},this),B.password&&m.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:B.password.message},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:211,columnNumber:21},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:200,columnNumber:17},this),m.jsxDEV("div",{children:[m.jsxDEV(g,{htmlFor:"status",children:"Status"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:216,columnNumber:19},this),m.jsxDEV(U,{value:P("status"),onValueChange:e=>A("status",e),children:[m.jsxDEV(F,{children:m.jsxDEV(V,{placeholder:"Select status"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:222,columnNumber:23},this)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:221,columnNumber:21},this),m.jsxDEV(E,{children:[m.jsxDEV(D,{value:"active",children:"Active"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:225,columnNumber:23},this),m.jsxDEV(D,{value:"pending",children:"Pending"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:226,columnNumber:23},this),m.jsxDEV(D,{value:"approved",children:"Approved"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:227,columnNumber:23},this),m.jsxDEV(D,{value:"rejected",children:"Rejected"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:228,columnNumber:23},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:224,columnNumber:21},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:217,columnNumber:19},this),B.status&&m.jsxDEV("p",{className:"text-sm text-red-500 mt-1",children:B.status.message},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:232,columnNumber:21},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:215,columnNumber:17},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:160,columnNumber:15},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:153,columnNumber:13},this)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:152,columnNumber:11},this),m.jsxDEV("div",{children:[m.jsxDEV(N,{children:[m.jsxDEV(b,{children:[m.jsxDEV(f,{children:"User Roles"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:243,columnNumber:17},this),m.jsxDEV(x,{children:"Select one or more roles for this user"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:244,columnNumber:17},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:242,columnNumber:15},this),m.jsxDEV(v,{children:[m.jsxDEV("div",{className:"space-y-3",children:[{value:"super_admin",label:"Super Admin",description:"Full system access"},{value:"admin",label:"Admin",description:"Administrative access"},{value:"vendor",label:"Vendor",description:"Vendor/supplier access"},{value:"seller",label:"Seller",description:"Can sell products"},{value:"customer",label:"Customer",description:"Regular user"},{value:"business",label:"Business",description:"Business account"},{value:"moderator",label:"Moderator",description:"Content moderation"},{value:"partner",label:"Partner",description:"Partner access"}].map(e=>m.jsxDEV("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>q(e.value),children:[m.jsxDEV(w,{checked:L?.includes(e.value)||!1,onCheckedChange:()=>q(e.value),onClick:e=>e.stopPropagation()},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:256,columnNumber:23},this),m.jsxDEV("div",{className:"flex-1",children:[m.jsxDEV("div",{className:"font-medium",children:e.label},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:262,columnNumber:25},this),m.jsxDEV("div",{className:"text-sm text-gray-600",children:e.description},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:263,columnNumber:25},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:261,columnNumber:23},this)]},e.value,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:251,columnNumber:21},this))},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:249,columnNumber:17},this),B.roles&&m.jsxDEV("p",{className:"text-sm text-red-500 mt-2",children:B.roles.message},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:269,columnNumber:19},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:248,columnNumber:15},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:241,columnNumber:13},this),m.jsxDEV("div",{className:"mt-6 flex gap-3",children:[m.jsxDEV(h,{type:"submit",className:"flex-1",disabled:n,children:[m.jsxDEV(l,{className:"mr-2 h-4 w-4"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:281,columnNumber:17},this),n?"Saving...":c?"Update User":"Create User"]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:276,columnNumber:15},this),m.jsxDEV(h,{type:"button",variant:"outline",onClick:()=>u("/users"),disabled:n,children:"Cancel"},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:284,columnNumber:15},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:275,columnNumber:13},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:240,columnNumber:11},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:150,columnNumber:9},this)},void 0,!1,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:149,columnNumber:7},this)]},void 0,!0,{fileName:"/home/user/o4o-platform/apps/admin-dashboard/src/pages/users/UserForm.tsx",lineNumber:141,columnNumber:5},this)}export{k as default};
//# sourceMappingURL=UserForm-CMswtDf1.js.map
