import{r as e,j as s,bx as a,bw as t,bO as r,dg as i,bM as c,cD as l,ba as n,c8 as d}from"./vendor-react-DqgGMt48.js";import{a as o}from"./vendor-query-D_c3FRkE.js";import{c_ as m,d2 as x,c$ as p,cF as j,cG as h,cH as u,cI as y,cR as g,cQ as b}from"./wp-misc-CVe7ECV4.js";import{B as N,d as v,e as f,f as w,g as k}from"./page-template-editor-Dej8aqbo.js";import{a as S}from"./api-client-CxLCD9ze.js";import B from"./PerformanceDashboard-PQQdT2Wv.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-ui-CrFdsnXa.js";import"./vendor-utils-C9jLuAcl.js";import"./wp-data-D64LRRbU.js";import"./wp-block-editor-misc-De1L5-zR.js";import"./wp-core-kvRrOm9B.js";import"./wp-block-editor-api-BKhomcj9.js";import"./wp-blocks-core-NinAvWTg.js";import"./wp-block-editor-store-BZ6fZn58.js";import"./wp-block-editor-clipboard-DrG0xX4B.js";import"./wp-i18n-D6_Il8Rt.js";import"./wp-block-editor-global-styles-DiR2HQC4.js";import"./wp-block-editor-typography-W96exnXk.js";import"./wp-components-BJYLMD7r.js";import"./wp-block-editor-spacing-CpdaiY4Q.js";import"./wp-block-editor-menus-IWaA-N3x.js";import"./wp-block-editor-core-BSca1VBH.js";import"./wp-block-editor-utils-Bqn4TiQr.js";import"./wp-block-editor-a11y-YlMsb8JF.js";import"./wp-block-editor-preview-CaF7fUZD.js";import"./wp-block-editor-borders-BtjnCtLF.js";import"./wp-block-editor-formats-B4-8T-Nh.js";import"./wp-block-editor-selection-DYIw7ude.js";import"./wp-block-editor-inline-DHEsfgnI.js";import"./wp-block-editor-ui-l6-7VhtF.js";import"./wp-block-editor-transforms-Bm69JWBw.js";import"./wp-block-editor-patterns-CNk0M6ZZ.js";import"./wp-block-editor-navigation-iME_YXGb.js";import"./wp-block-editor-dnd-DduwJSaE.js";import"./wp-block-editor-media-CVSKmHRK.js";import"./wp-api-Dp_oFsVM.js";import"./wp-block-editor-keyboard-C8o4qxcy.js";import"./wp-block-editor-templates-A6LfENHh.js";function L(){const[L,C]=e.useState("overview"),{data:E,isLoading:D,refetch:A}=o({queryKey:["monitoring-summary"],queryFn:async()=>(await S.get("/monitoring/summary")).data,refetchInterval:3e4}),z=async()=>{try{await S.post("/monitoring/backup/trigger"),A()}catch(e){}};if(D||!E)return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-admin-blue"})});const F=e=>{switch(e){case"healthy":return"text-green-500";case"degraded":return"text-yellow-500";case"critical":return"text-red-500";default:return"text-gray-500"}},M=e=>s.jsx(b,{variant:{critical:"destructive",high:"destructive",error:"destructive",warning:"default",medium:"default",low:"secondary",info:"secondary"}[e]||"default",children:e});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"System Monitoring"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"Comprehensive system health and security monitoring"})]}),s.jsxs(N,{variant:"outline",size:"sm",onClick:()=>A(),children:[s.jsx(a,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),"healthy"!==E.system.health&&s.jsxs(m,{variant:"critical"===E.system.health?"destructive":"default",children:[s.jsx(t,{className:"h-4 w-4"}),s.jsxs(x,{children:["System Health: ",E.system.health.toUpperCase()]}),s.jsxs(p,{children:["System performance is ",E.system.health,". Please check the performance dashboard for details."]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(j,{children:[s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(u,{className:"text-sm font-medium",children:"System Health"}),s.jsx(r,{className:`w-4 h-4 ${F(E.system.health)}`})]})}),s.jsxs(y,{children:[s.jsx("div",{className:`text-2xl font-bold capitalize ${F(E.system.health)}`,children:E.system.health}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[s.jsxs("span",{children:["CPU: ",E.system.cpu,"%"]}),s.jsxs("span",{children:["Mem: ",E.system.memory,"%"]})]})]})]}),s.jsxs(j,{children:[s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(u,{className:"text-sm font-medium",children:"Backup Status"}),s.jsx(i,{className:"w-4 h-4 "+("success"===E.backup.status?"text-green-500":"text-red-500")})]})}),s.jsxs(y,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"running"===E.backup.status?s.jsx("span",{className:"text-blue-500",children:"Running..."}):E.backup.lastBackup?new Date(E.backup.lastBackup).toLocaleDateString():"Never"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[s.jsxs("span",{children:[E.backup.totalBackups," total"]}),s.jsx("span",{children:E.backup.backupSize})]})]})]}),s.jsxs(j,{children:[s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(u,{className:"text-sm font-medium",children:"Error Alerts"}),s.jsx(t,{className:"w-4 h-4 "+(E.errors.critical>0?"text-red-500":"text-green-500")})]})}),s.jsxs(y,{children:[s.jsxs("div",{className:"flex items-baseline gap-4",children:[s.jsx("span",{className:"text-2xl font-bold text-red-500",children:E.errors.critical}),s.jsx("span",{className:"text-lg text-orange-500",children:E.errors.error}),s.jsx("span",{className:"text-sm text-yellow-500",children:E.errors.warning})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Critical / Error / Warning"})]})]}),s.jsxs(j,{children:[s.jsx(h,{className:"pb-3",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(u,{className:"text-sm font-medium",children:"Security"}),s.jsx(c,{className:"w-4 h-4 "+(E.security.suspiciousActivities>0?"text-yellow-500":"text-green-500")})]})}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Blocked IPs"}),s.jsx("span",{className:"font-medium",children:E.security.blockedIPs})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Failed Logins"}),s.jsx("span",{className:"font-medium",children:E.security.failedLogins})]})]})})]})]}),s.jsxs(v,{value:L,onValueChange:C,className:"space-y-4",children:[s.jsxs(f,{className:"grid w-full grid-cols-5",children:[s.jsx(w,{value:"overview",children:"Overview"}),s.jsx(w,{value:"performance",children:"Performance"}),s.jsx(w,{value:"backup",children:"Backup"}),s.jsx(w,{value:"errors",children:"Errors"}),s.jsx(w,{value:"security",children:"Security"})]}),s.jsxs(k,{value:"overview",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs(j,{children:[s.jsxs(h,{children:[s.jsx(u,{children:"Recent Errors"}),s.jsx(g,{children:"Latest error alerts from the system"})]}),s.jsx(y,{children:s.jsx("div",{className:"space-y-3",children:0===E.errors.recent.length?s.jsx("p",{className:"text-sm text-gray-500",children:"No recent errors"}):E.errors.recent.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium line-clamp-1",children:e.message}),s.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString()})]}),M(e.level)]},e.id))})})]}),s.jsxs(j,{children:[s.jsxs(h,{children:[s.jsx(u,{children:"Security Events"}),s.jsx(g,{children:"Latest security-related activities"})]}),s.jsx(y,{children:s.jsx("div",{className:"space-y-3",children:0===E.security.recentEvents.length?s.jsx("p",{className:"text-sm text-gray-500",children:"No recent security events"}):E.security.recentEvents.slice(0,5).map(e=>s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium",children:e.type}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e.ipAddress," â€¢ ",new Date(e.timestamp).toLocaleString()]})]}),M(e.severity)]},e.id))})})]})]}),s.jsxs(j,{children:[s.jsxs(h,{children:[s.jsx(u,{children:"Quick Actions"}),s.jsx(g,{children:"Common monitoring and maintenance tasks"})]}),s.jsx(y,{children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs(N,{variant:"outline",className:"h-auto flex-col py-4",onClick:z,disabled:"running"===E.backup.status,children:[s.jsx(l,{className:"w-5 h-5 mb-2"}),s.jsx("span",{className:"text-xs",children:"Manual Backup"})]}),s.jsxs(N,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>C("errors"),children:[s.jsx(t,{className:"w-5 h-5 mb-2"}),s.jsx("span",{className:"text-xs",children:"View Errors"})]}),s.jsxs(N,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>C("security"),children:[s.jsx(c,{className:"w-5 h-5 mb-2"}),s.jsx("span",{className:"text-xs",children:"Security Logs"})]}),s.jsxs(N,{variant:"outline",className:"h-auto flex-col py-4",onClick:()=>window.location.href="/admin/settings",children:[s.jsx(n,{className:"w-5 h-5 mb-2"}),s.jsx("span",{className:"text-xs",children:"Settings"})]})]})})]})]}),s.jsx(k,{value:"performance",children:s.jsx(B,{})}),s.jsx(k,{value:"backup",className:"space-y-4",children:s.jsxs(j,{children:[s.jsxs(h,{children:[s.jsx(u,{children:"Backup Management"}),s.jsx(g,{children:"Manage and monitor system backups"})]}),s.jsxs(y,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Last Backup"}),s.jsx("p",{className:"font-medium",children:E.backup.lastBackup?new Date(E.backup.lastBackup).toLocaleString():"Never"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Next Backup"}),s.jsx("p",{className:"font-medium",children:E.backup.nextBackup?new Date(E.backup.nextBackup).toLocaleString():"Not scheduled"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Success Rate"}),s.jsx("p",{className:"font-medium",children:E.backup.totalBackups>0?`${((E.backup.totalBackups-E.backup.failedBackups)/E.backup.totalBackups*100).toFixed(1)}%`:"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Size"}),s.jsx("p",{className:"font-medium",children:E.backup.backupSize})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(N,{onClick:z,disabled:"running"===E.backup.status,children:"running"===E.backup.status?s.jsxs(s.Fragment,{children:[s.jsx(a,{className:"w-4 h-4 mr-2 animate-spin"}),"Running..."]}):s.jsxs(s.Fragment,{children:[s.jsx(l,{className:"w-4 h-4 mr-2"}),"Start Backup"]})}),s.jsxs(N,{variant:"outline",children:[s.jsx(d,{className:"w-4 h-4 mr-2"}),"Schedule"]})]})]})]})}),s.jsx(k,{value:"errors",children:s.jsxs(j,{children:[s.jsxs(h,{children:[s.jsx(u,{children:"Error Log"}),s.jsx(g,{children:"System errors and alerts"})]}),s.jsx(y,{children:s.jsx("p",{className:"text-sm text-gray-500",children:"Error log details would be displayed here"})})]})}),s.jsx(k,{value:"security",children:s.jsxs(j,{children:[s.jsxs(h,{children:[s.jsx(u,{children:"Security Audit Log"}),s.jsx(g,{children:"Security events and access logs"})]}),s.jsx(y,{children:s.jsx("p",{className:"text-sm text-gray-500",children:"Security audit log would be displayed here"})})]})})]})]})}export{L as default};
