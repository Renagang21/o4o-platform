{"version":3,"file":"Login-D0AEElim.js","sources":["../../src/pages/auth/Login.tsx"],"sourcesContent":["import { FC, FormEvent, useEffect, useState } from 'react';\nimport { Navigate, useLocation, useSearchParams, Link } from 'react-router-dom';\nimport { Eye, EyeOff, Lock, Mail, AlertTriangle } from 'lucide-react';\nimport { useAuth } from '@o4o/auth-context';\nimport toast from 'react-hot-toast';\n\nconst Login: FC = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [rememberMe, setRememberMe] = useState(false);\n  \n  const { login, isAuthenticated, isLoading, error, clearError, isAdmin } = useAuth();\n  const location = useLocation();\n  const [searchParams] = useSearchParams();\n\n  // 리다이렉트 URL 처리\n  const redirectUrl = searchParams.get('redirect') || '/home';\n  const fromLocation = (location.state as any)?.from || redirectUrl;\n\n  // 이미 인증된 관리자는 홈으로 리다이렉트\n  useEffect(() => {\n    if (isAuthenticated && isAdmin) {\n      toast.success('이미 로그인되어 있습니다.');\n    }\n  }, [isAuthenticated, isAdmin]);\n\n  if (isAuthenticated) {\n    if (isAdmin) {\n      return <Navigate to={fromLocation} replace />;\n    } else {\n      // 일반 사용자가 관리자 페이지에 접근하려는 경우\n      return (\n        <div className=\"min-h-screen bg-wp-bg-secondary flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n          <div className=\"max-w-md w-full space-y-8\">\n            <div className=\"text-center\">\n              <div className=\"mx-auto h-16 w-16 bg-red-500 rounded-full flex items-center justify-center\">\n                <AlertTriangle className=\"h-8 w-8 text-white\" />\n              </div>\n              <h2 className=\"mt-6 text-center text-3xl font-bold text-wp-text-primary\">\n                접근 권한 없음\n              </h2>\n              <p className=\"mt-2 text-center text-sm text-wp-text-secondary\">\n                관리자 권한이 필요합니다\n              </p>\n              <div className=\"mt-4\">\n                <button\n                  onClick={() => window.location.href = '/'}\n                  className=\"text-admin-blue hover:text-admin-blue-dark\"\n                >\n                  메인 사이트로 이동\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    clearError();\n\n    if (!email || !password) {\n      toast.error('이메일과 비밀번호를 입력해주세요.');\n      return;\n    }\n\n    try {\n      await login({ email, password });\n      \n      toast.success('관리자 로그인 성공!');\n    } catch (error: any) {\n    // Error logging - use proper error handler\n      \n      // 구체적인 에러 메시지 표시\n      let errorMessage = error instanceof Error ? error.message : '로그인에 실패했습니다.';\n      \n      if (errorMessage.includes('Invalid credentials')) {\n        errorMessage = '이메일 또는 비밀번호가 올바르지 않습니다.';\n      } else if (errorMessage.includes('Account not active')) {\n        errorMessage = '계정이 비활성화되었습니다. 관리자에게 문의하세요.';\n      } else if (errorMessage.includes('insufficient_role')) {\n        errorMessage = '관리자 권한이 없습니다.';\n      } else if (errorMessage.includes('Account is temporarily locked')) {\n        errorMessage = '계정이 임시로 잠겼습니다. 잠시 후 다시 시도하세요.';\n      }\n      \n      toast.error(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"w-full max-w-md mx-auto space-y-6 relative\">\n        {/* Background decoration */}\n        <div className=\"absolute inset-0 -z-10\">\n          <div className=\"absolute top-0 -left-4 w-72 h-72 bg-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-blob\"></div>\n          <div className=\"absolute top-0 -right-4 w-72 h-72 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-blob animation-delay-2000\"></div>\n          <div className=\"absolute -bottom-8 left-20 w-72 h-72 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-blob animation-delay-4000\"></div>\n        </div>\n        {/* 헤더 */}\n        <div className=\"relative text-center\">\n          <div className=\"inline-flex h-16 w-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl items-center justify-center shadow-lg mb-4\">\n            <Lock className=\"h-8 w-8 text-white\" />\n          </div>\n          <h2 className=\"text-3xl font-bold text-white\">\n            O4O Admin\n          </h2>\n          <p className=\"mt-2 text-sm text-blue-200\">\n            관리자 계정으로 로그인하세요\n          </p>\n          <p className=\"mt-1 text-xs text-green-400 font-bold\">\n            ✅ 배포 테스트 v3.0 - {new Date().toLocaleString('ko-KR')}\n          </p>\n        </div>\n\n        {/* 로그인 폼 */}\n        <form className=\"bg-white/10 backdrop-blur-md rounded-2xl p-8 shadow-2xl border border-white/20\" onSubmit={handleSubmit}>\n          <div className=\"space-y-5\">\n            {/* 이메일 입력 */}\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-blue-200 mb-2\">\n                이메일 주소\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Mail className=\"h-5 w-5 text-gray-500\" />\n                </div>\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  autoComplete=\"email\"\n                  required\n                  value={email}\n                  onChange={(e: any) => setEmail(e.target.value)}\n                  className=\"block w-full pl-10 pr-3 py-3 bg-white/90 border border-gray-300 rounded-lg focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 focus:outline-none transition-all duration-200 text-gray-900 placeholder-gray-500\"\n                  placeholder=\"admin@neture.co.kr\"\n                  disabled={isLoading}\n                />\n              </div>\n            </div>\n\n            {/* 비밀번호 입력 */}\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-blue-200 mb-2\">\n                비밀번호\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <Lock className=\"h-5 w-5 text-gray-500\" />\n                </div>\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type={showPassword ? 'text' : 'password'}\n                  autoComplete=\"current-password\"\n                  required\n                  value={password}\n                  onChange={(e: any) => setPassword(e.target.value)}\n                  className=\"block w-full pl-10 pr-10 py-3 bg-white/90 border border-gray-300 rounded-lg focus:bg-white focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 focus:outline-none transition-all duration-200 text-gray-900 placeholder-gray-500\"\n                  placeholder=\"비밀번호를 입력하세요\"\n                  disabled={isLoading}\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\n                  disabled={isLoading}\n                >\n                  {showPassword ? (\n                    <EyeOff className=\"h-5 w-5 text-gray-600 hover:text-gray-900 transition-colors\" />\n                  ) : (\n                    <Eye className=\"h-5 w-5 text-gray-600 hover:text-gray-900 transition-colors\" />\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* 옵션 */}\n          <div className=\"mt-6 flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <input\n                id=\"remember-me\"\n                name=\"remember-me\"\n                type=\"checkbox\"\n                checked={rememberMe}\n                onChange={(e: any) => setRememberMe(e.target.checked)}\n                className=\"h-4 w-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500 focus:ring-offset-0\"\n                disabled={isLoading}\n              />\n              <label htmlFor=\"remember-me\" className=\"ml-2 text-sm text-blue-200\">\n                로그인 상태 유지\n              </label>\n            </div>\n\n            <Link \n              to=\"/forgot-password\" \n              className=\"text-sm text-blue-300 hover:text-white transition-colors\"\n            >\n              비밀번호 찾기\n            </Link>\n          </div>\n\n          {/* 로그인 버튼 */}\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className=\"w-full mt-6 py-3 px-4 text-sm font-medium rounded-lg text-white bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 focus:ring-offset-slate-900 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg\"\n          >\n            {isLoading ? (\n              <>\n                <div className=\"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\" />\n                로그인 중...\n              </>\n            ) : (\n              '로그인'\n            )}\n          </button>\n        </form>\n\n        {/* 에러 메시지 */}\n        {error && (\n          <div className=\"bg-red-500/10 border border-red-500/20 rounded-lg p-4\">\n            <div className=\"flex items-center gap-2 text-red-200\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              <span className=\"text-sm\">{error}</span>\n            </div>\n          </div>\n        )}\n\n        {/* 테스트 계정 정보 */}\n        <div className=\"bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10\">\n          <p className=\"text-xs text-blue-300 mb-3 font-medium\">테스트 계정</p>\n          <div className=\"grid grid-cols-2 gap-2\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                setEmail('admin@neture.co.kr');\n                setPassword('Test@1234');\n              }}\n              className=\"text-xs bg-white/10 hover:bg-white/20 text-white px-3 py-2 rounded-lg transition-colors border border-white/10\"\n            >\n              관리자\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => {\n                setEmail('manager@neture.co.kr');\n                setPassword('Test@1234');\n              }}\n              className=\"text-xs bg-white/10 hover:bg-white/20 text-white px-3 py-2 rounded-lg transition-colors border border-white/10\"\n            >\n              일반 관리자\n            </button>\n          </div>\n        </div>\n\n        {/* 하단 링크 */}\n        <div className=\"text-center\">\n          <a \n            href=\"/\"\n            className=\"text-sm text-blue-300 hover:text-white transition-colors\"\n          >\n            메인 사이트로 돌아가기\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;"],"names":["Login","email","setEmail","useState","password","setPassword","showPassword","setShowPassword","rememberMe","setRememberMe","login","isAuthenticated","isLoading","error","clearError","isAdmin","useAuth","location","useLocation","searchParams","useSearchParams","redirectUrl","fromLocation","useEffect","toast","jsx","Navigate","jsxs","AlertTriangle","handleSubmit","e","errorMessage","Lock","Mail","EyeOff","Eye","Link","Fragment"],"mappings":"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"}