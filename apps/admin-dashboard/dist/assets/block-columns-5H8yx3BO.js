import{C as $,j as e,M as D,P as I}from"./vendor-react-CFXBKh8N.js";import"./wp-block-editor-DhaEFHLK.js";import"./wp-i18n-DXAO7rTz.js";import"./wp-core-CKjiTxtQ.js";import"./wp-blocks-core-CqiW7X_r.js";import"./wp-misc-BCLjNiWG.js";import"./wp-data-DkVHr7c4.js";import"./wp-components-BOsGWWgw.js";import"./vendor-ui-BkLtITBR.js";import"./vendor-monaco-cpVGocfO.js";const B=()=>{if(!window.wp?.blocks?.registerBlockType){console.warn("[Columns Block] WordPress blocks API not available yet");return}const{registerBlockType:k,createBlock:C}=window.wp.blocks,{InnerBlocks:d,useBlockProps:u,InspectorControls:x,BlockControls:w,BlockVerticalAlignmentToolbar:y}=window.wp.blockEditor,{PanelBody:f,RangeControl:b,SelectControl:h,ToggleControl:A,ToolbarGroup:S,ToolbarButton:v}=window.wp.components,{useSelect:P,useDispatch:M}=window.wp.data;k("o4o/columns",{title:"Columns",description:"Display content in multiple columns",category:"design",icon:$,supports:{align:["wide","full"],anchor:!0,html:!1,color:{background:!0,text:!0},spacing:{padding:!0,margin:!0}},attributes:{columns:{type:"number",default:2},verticalAlignment:{type:"string",default:void 0},isStackedOnMobile:{type:"boolean",default:!0},gap:{type:"number",default:20}},edit:function({attributes:i,setAttributes:o,clientId:n}){const{columns:t,verticalAlignment:c,isStackedOnMobile:a,gap:j}=i,{insertBlock:T,removeBlock:N}=M("core/block-editor"),p=P(l=>{const{getBlock:r}=l("core/block-editor");return r(n)?.innerBlocks||[]},[n]),g=l=>{const r=p.length;if(l>r)for(let s=r;s<l;s++){const E=C("o4o/column",{width:100/l});T(E,s,n,!1)}else if(l<r)for(let s=r-1;s>=l;s--)p[s]&&N(p[s].clientId,!1);p.slice(0,l).forEach(s=>{s.attributes.width=100/l}),o({columns:l})},O=u({className:`o4o-columns-block ${a?"stack-on-mobile":""}`,style:{display:"flex",gap:`${j}px`,alignItems:c==="center"?"center":c==="bottom"?"flex-end":"flex-start"}});return e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx(y,{onChange:l=>o({verticalAlignment:l}),value:c}),e.jsxs(S,{children:[e.jsx(v,{icon:D,title:"Remove column",onClick:()=>t>1&&g(t-1),disabled:t<=1}),e.jsx(v,{icon:I,title:"Add column",onClick:()=>t<6&&g(t+1),disabled:t>=6})]})]}),e.jsx(x,{children:e.jsxs(f,{title:"Columns Settings",initialOpen:!0,children:[e.jsx(b,{label:"Number of Columns",value:t,onChange:l=>l&&g(l),min:1,max:6,step:1}),e.jsx(b,{label:"Gap between columns",value:j,onChange:l=>o({gap:l||0}),min:0,max:100,step:5}),e.jsx(h,{label:"Vertical Alignment",value:c||"",options:[{label:"Default",value:""},{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"}],onChange:l=>o({verticalAlignment:l===""?void 0:l})}),e.jsx(A,{label:"Stack on Mobile",checked:a,onChange:l=>o({isStackedOnMobile:l}),disabled:!1,className:"",__nextHasNoMarginBottom:!1})]})}),e.jsx("div",{...O,children:e.jsx(d,{allowedBlocks:["o4o/column"],template:Array(t).fill(["o4o/column",{width:100/t}]),templateLock:!1,renderAppender:!1})})]})},save:({attributes:m})=>{const{verticalAlignment:i,isStackedOnMobile:o,gap:n}=m,t=u.save({className:`o4o-columns-block ${o?"stack-on-mobile":""}`,style:{display:"flex",gap:`${n}px`,alignItems:i==="center"?"center":i==="bottom"?"flex-end":"flex-start"}});return e.jsx("div",{...t,children:e.jsx(d.Content,{})})}}),k("o4o/column",{title:"Column",description:"A single column within a columns block",category:"design",parent:["o4o/columns"],supports:{reusable:!1,html:!1,color:{background:!0,text:!0},spacing:{padding:!0}},attributes:{width:{type:"number",default:void 0},verticalAlignment:{type:"string",default:void 0}},edit:function({attributes:i,setAttributes:o}){const{width:n,verticalAlignment:t}=i,c=u({className:"o4o-column-block",style:{flexBasis:n?`${n}%`:void 0,alignSelf:t==="center"?"center":t==="bottom"?"flex-end":t==="stretch"?"stretch":"flex-start"}});return e.jsxs(e.Fragment,{children:[e.jsx(x,{children:e.jsxs(f,{title:"Column Settings",initialOpen:!0,children:[e.jsx(b,{label:"Width (%)",value:n||0,onChange:a=>o({width:a}),min:10,max:100,step:1}),e.jsx(h,{label:"Vertical Alignment",value:t||"",options:[{label:"Default",value:""},{label:"Top",value:"top"},{label:"Center",value:"center"},{label:"Bottom",value:"bottom"},{label:"Stretch",value:"stretch"}],onChange:a=>o({verticalAlignment:a===""?void 0:a})})]})}),e.jsx("div",{...c,children:e.jsx(d,{allowedBlocks:!0,renderAppender:d.ButtonBlockAppender})})]})},save:({attributes:m})=>{const{width:i,verticalAlignment:o}=m,n=u.save({className:"o4o-column-block",style:{flexBasis:i?`${i}%`:void 0,alignSelf:o==="center"?"center":o==="bottom"?"flex-end":o==="stretch"?"stretch":"flex-start"}});return e.jsx("div",{...n,children:e.jsx(d.Content,{})})}})};window.wp?.blocks?.registerBlockType?B():document.addEventListener("DOMContentLoaded",B);export{B as registerColumnsBlock};
