import{r as e,j as s,b6 as t,aE as a,ba as r,bc as l,b7 as i,V as c,b8 as o}from"./vendor-react-DqgGMt48.js";import{u as n,a as d,b as m}from"./vendor-query-D_c3FRkE.js";import{a as p}from"./base-DqweZ464.js";import"./vendor-monaco-BxJH8uUv.js";import"./vendor-utils-CX-PD_Jc.js";import"./index-BHVx3EzE.js";import"./wp-misc-nAANEFFa.js";import"./vendor-ui-CrFdsnXa.js";import"./page-template-editor-CdMtnD-k.js";import"./wp-blocks-core-BDaUU0zy.js";import"./wp-block-editor-misc-5qbjj7fi.js";import"./wp-core-BedthL0o.js";import"./wp-block-editor-api-BD-JvyIp.js";import"./wp-block-editor-store-D0LqdVTA.js";import"./wp-block-editor-clipboard-BbjM0mE7.js";import"./wp-i18n-D2qT7FTy.js";import"./wp-block-editor-global-styles-CgbocFEz.js";import"./wp-block-editor-typography-C6olASDs.js";import"./wp-components-Jwbue4-Q.js";import"./wp-block-editor-spacing-Bjm66-GI.js";import"./wp-block-editor-menus-DNdBW6en.js";import"./wp-block-editor-core-BHvRx-9p.js";import"./wp-block-editor-utils-BS9xY-75.js";import"./wp-block-editor-colors-uaYdG60c.js";import"./wp-block-editor-a11y-B3KhLhxS.js";import"./wp-block-editor-preview-IPMCb4VS.js";import"./wp-block-editor-borders-DTrAcZMd.js";import"./wp-block-editor-formats-DG6_xyZ_.js";import"./wp-block-editor-selection-yPihMKSS.js";import"./wp-block-editor-inline-Bkp4Ls8p.js";import"./wp-block-editor-ui-D4dlfw0L.js";import"./wp-block-editor-transforms-CCvPjpfb.js";import"./wp-block-editor-patterns-vKXFRlW-.js";import"./wp-block-editor-navigation-BlWUaXzS.js";import"./wp-block-editor-dnd-BymtRIME.js";import"./wp-block-editor-media-CULIbUAn.js";import"./wp-api-CmKoN5bn.js";import"./wp-block-editor-keyboard-D3kftNm9.js";import"./wp-block-editor-templates-BgLwh8Gm.js";import"./wp-data-BAtVYyan.js";import"./vendor-socket-CMcZe9fK.js";const x=()=>{const[x,u]=e.useState(""),[j,h]=e.useState(!1),[b,g]=e.useState(null),y=n(),{data:f,isLoading:w}=d({queryKey:["custom-field-groups"],queryFn:async()=>(await p.get("/admin/custom-field-groups")).data}),N=m({mutationFn:async e=>(await p.post("/admin/custom-field-groups",e)).data,onSuccess:()=>{y.invalidateQueries({queryKey:["custom-field-groups"]}),c.success("필드 그룹이 생성되었습니다"),h(!1)},onError:()=>{c.error("필드 그룹 생성에 실패했습니다")}}),k=m({mutationFn:async e=>{await p.delete(`/admin/custom-field-groups/${e}`)},onSuccess:()=>{y.invalidateQueries({queryKey:["custom-field-groups"]}),c.success("필드 그룹이 삭제되었습니다")},onError:()=>{c.error("필드 그룹 삭제에 실패했습니다")}}),v=f?.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.key.toLowerCase().includes(x.toLowerCase()))||[];return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"사용자 정의 필드"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"콘텐츠에 추가 필드를 정의하고 관리합니다"})]}),s.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx(t,{className:"w-4 h-4"}),s.jsx("span",{children:"필드 그룹 추가"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",value:x,onChange:e=>u(e.target.value),placeholder:"필드 그룹 검색...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),w?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===v.length?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(r,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"필드 그룹이 없습니다"}),s.jsx("p",{className:"text-gray-500 mb-4",children:"첫 번째 필드 그룹을 만들어보세요"}),s.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"필드 그룹 추가"})]}):s.jsx("div",{className:"bg-white rounded-lg shadow",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"필드 그룹"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"키"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"필드 수"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"위치"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),s.jsx("th",{className:"relative px-6 py-3",children:s.jsx("span",{className:"sr-only",children:"액션"})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&s.jsx("div",{className:"text-sm text-gray-500",children:e.description})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e.key})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.fields?.length||0," 필드"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:e.locations.map((e,t)=>s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:e},t))})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.active?"활성":"비활성"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("button",{onClick:()=>g(e),className:"text-gray-400 hover:text-gray-600",title:"편집",children:s.jsx(l,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{c.success("복제 기능은 준비 중입니다")},className:"text-gray-400 hover:text-gray-600",title:"복제",children:s.jsx(i,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{confirm("이 필드 그룹을 삭제하시겠습니까?")&&k.mutate(e.id)},className:"text-gray-400 hover:text-red-600",title:"삭제",children:s.jsx(o,{className:"w-4 h-4"})})]})})]},e.id))})]})}),(j||b)&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:b?"필드 그룹 수정":"새 필드 그룹"}),s.jsxs("form",{onSubmit:e=>{e.preventDefault();const s=new FormData(e.currentTarget),t={name:s.get("name"),key:s.get("key"),description:s.get("description"),locations:["post","page"],fields:[],active:!0};b?c.success("수정 기능은 준비 중입니다"):N.mutate(t)},children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["그룹 이름 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"name",defaultValue:b?.name,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: 제품 정보"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["그룹 키 ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"key",defaultValue:b?.key,required:!0,pattern:"[a-z0-9_]+",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"예: product_info"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"소문자, 숫자, 언더스코어만 사용 가능"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"설명"}),s.jsx("textarea",{name:"description",defaultValue:b?.description,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"이 필드 그룹에 대한 설명을 입력하세요"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"표시 위치"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"location_post",defaultChecked:!0,className:"mr-2"}),s.jsx("span",{children:"게시물"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"location_page",defaultChecked:!0,className:"mr-2"}),s.jsx("span",{children:"페이지"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"location_user",className:"mr-2"}),s.jsx("span",{children:"사용자"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"location_product",className:"mr-2"}),s.jsx("span",{children:"제품"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>{h(!1),g(null)},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"취소"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:b?"수정":"생성"})]})]})]})})]})};export{x as default};
