# H2-1 Travel 채널 UI 설계서

> **Status**: Design Complete
> **Date**: 2025-01-02
> **Work Order**: H2-1
> **Based On**: H1-2 결정서, H2-0 구현

---

## 1. Travel 채널 개요

### 1.1 채널 정의

**Travel 채널(travel.k-cosmetics)**은 해외 여행자를 대상으로 한 화장품 판매 채널입니다.

| 구분 | Local 채널 | Travel 채널 |
|------|-----------|-------------|
| 대상 | 국내 소비자 | 해외 방문 여행자 |
| 진입 | 웹사이트 직접 방문 | QR/링크/가이드 안내 |
| 판매 주체 | 매장 | 가이드 또는 매장 |
| 수령 방식 | 픽업/배송 | 현장/숙소배송 |
| 특이사항 | 샘플 체험 | 세금환급, 통역 |

### 1.2 기술 전제 (H2-0 기준)

```typescript
// 주문 생성 시 필수 메타데이터
{
  channel: 'travel',           // 필수
  travel: {
    guideId: string,           // 필수
    tourSessionId?: string,    // 선택
    taxRefund?: TaxRefundMeta, // 선택
  }
}
```

### 1.3 핵심 원칙

1. **모바일 100%** - 데스크톱 UX 고려하지 않음
2. **선택 + 확인 중심** - 여행자는 복잡한 입력 최소화
3. **가이드 주도** - 판매 흐름은 가이드가 리드

---

## 2. 사용자 유형 정의

### 2.1 Traveler (여행자)

| 항목 | 설명 |
|------|------|
| **정의** | 해외에서 방문한 여행자 |
| **디바이스** | 모바일 (스마트폰) |
| **언어** | 다국어 지원 필요 (향후) |
| **인증** | 간편 인증 (SMS/이메일) |
| **주요 행동** | 상품 확인, 수량 선택, 주문 확인 |

**Traveler 특성**:
- 한국어를 읽지 못할 수 있음
- 결제 수단이 제한적일 수 있음
- 빠른 의사결정 선호

### 2.2 Guide (가이드)

| 항목 | 설명 |
|------|------|
| **정의** | K-Shopping 승인 가이드 |
| **디바이스** | 태블릿 또는 스마트폰 |
| **언어** | 한국어 + 외국어 |
| **인증** | K-Shopping Participant 인증 |
| **주요 행동** | 상품 추천, 주문 생성, 상태 관리 |

**Guide 특성**:
- 이미 K-Shopping에 등록된 Participant
- `participantType = 'guide'`
- 여러 여행자의 주문을 동시 관리

---

## 3. 전체 플로우 다이어그램

### 3.1 여행자 구매 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                     TRAVELER PURCHASE FLOW                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [진입]                                                          │
│     │                                                            │
│     ├── QR 스캔 (매장/가이드 제공)                                │
│     ├── 링크 공유 (가이드 → 여행자)                               │
│     └── 가이드 태블릿에서 직접 안내                               │
│            │                                                     │
│            ▼                                                     │
│  ┌─────────────────┐                                             │
│  │  T-01 Landing   │  "Welcome to K-Cosmetics"                   │
│  │  (Travel)       │  - 서비스 소개                               │
│  └────────┬────────┘  - 언어 선택 (향후)                          │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  T-02 Brands    │  브랜드 목록                                 │
│  │                 │  - 인기 브랜드 우선 표시                      │
│  └────────┬────────┘  - 브랜드 로고/이미지                        │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  T-03 Products  │  상품 목록 (브랜드별)                        │
│  │                 │  - 상품 카드 (이미지/가격)                    │
│  └────────┬────────┘  - 간단 필터                                 │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  T-04 Detail    │  상품 상세                                   │
│  │                 │  - 이미지 갤러리                              │
│  │                 │  - 가격 (세금환급 가능 표시)                  │
│  └────────┬────────┘  - 수량 선택                                 │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  T-05 Cart      │  장바구니                                    │
│  │                 │  - 선택 상품 목록                             │
│  └────────┬────────┘  - 총 금액                                   │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  T-06 Confirm   │  주문 확인                                   │
│  │                 │  - 수령 방식 선택 (현장/숙소)                 │
│  │                 │  - 세금환급 안내                              │
│  └────────┬────────┘  - 주문 확정 버튼                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  T-07 Complete  │  주문 완료                                   │
│  │                 │  - 주문 번호                                  │
│  │                 │  - 수령 안내                                  │
│  └─────────────────┘  - 가이드 연락처                             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 가이드 판매 플로우

```
┌─────────────────────────────────────────────────────────────────┐
│                      GUIDE SALES FLOW                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [가이드 인증]                                                    │
│     │                                                            │
│     └── K-Shopping 로그인 (기존 인증 시스템)                       │
│            │                                                     │
│            ▼                                                     │
│  ┌─────────────────┐                                             │
│  │  G-01 Dashboard │  가이드 대시보드                             │
│  │                 │  - 오늘의 주문 요약                          │
│  └────────┬────────┘  - 투어 세션 관리                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  G-02 Session   │  투어 세션 생성/선택                         │
│  │                 │  - 세션 ID 생성                              │
│  └────────┬────────┘  - 여행자 그룹 식별                          │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  G-03 Catalog   │  상품 카탈로그                               │
│  │                 │  - 상품 추천/추가                             │
│  └────────┬────────┘  - 실시간 재고 확인                          │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  G-04 Order     │  주문 생성 패널                              │
│  │  Panel          │  - 여행자 정보 입력                          │
│  │                 │  - 상품 목록 확인                             │
│  │                 │  - 수령 방식 설정                             │
│  └────────┬────────┘  - 세금환급 여부                             │
│           │                                                      │
│           │  [주문 생성 API 호출]                                 │
│           │  POST /cosmetics/orders                              │
│           │  metadata.channel = 'travel'                         │
│           │  metadata.travel.guideId = {guideId}                 │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  G-05 Orders    │  주문 관리                                   │
│  │  List           │  - 세션별 주문 목록                          │
│  │                 │  - 상태별 필터                                │
│  └────────┬────────┘  - 주문 상세 확인                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────┐                                             │
│  │  G-06 Order     │  주문 상세                                   │
│  │  Detail         │  - 상태 변경                                  │
│  │                 │  - 수령 확인                                  │
│  └─────────────────┘  - 세금환급 상태                             │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 화면 목록 (Page Inventory)

### 4.1 Traveler 화면

| 화면 ID | 화면명 | 사용자 | 목적 | 인증 |
|---------|--------|--------|------|------|
| T-01 | Travel Landing | Traveler | 서비스 진입, 언어 선택 | 불필요 |
| T-02 | Brand List | Traveler | 브랜드 탐색 | 불필요 |
| T-03 | Product List | Traveler | 상품 목록 확인 | 불필요 |
| T-04 | Product Detail | Traveler | 상품 상세, 수량 선택 | 불필요 |
| T-05 | Cart | Traveler | 장바구니 확인 | 불필요 |
| T-06 | Order Confirm | Traveler | 수령 방식, 주문 확정 | 간편 인증 |
| T-07 | Order Complete | Traveler | 주문 완료 확인 | 인증됨 |
| T-08 | My Orders | Traveler | 내 주문 목록 | 인증됨 |

### 4.2 Guide 화면

| 화면 ID | 화면명 | 사용자 | 목적 | 인증 |
|---------|--------|--------|------|------|
| G-01 | Guide Dashboard | Guide | 주문 요약, 세션 관리 | 필수 |
| G-02 | Tour Session | Guide | 투어 세션 생성/선택 | 필수 |
| G-03 | Product Catalog | Guide | 상품 추천/추가 | 필수 |
| G-04 | Order Panel | Guide | 주문 생성 | 필수 |
| G-05 | Order List | Guide | 주문 목록 관리 | 필수 |
| G-06 | Order Detail | Guide | 주문 상세/상태 변경 | 필수 |

---

## 5. 화면별 입력/출력 데이터

### 5.1 Traveler 화면

| 화면 ID | 입력 데이터 | 출력 데이터 | API |
|---------|------------|------------|-----|
| T-01 | 언어 선택 (향후) | 서비스 소개 | - |
| T-02 | - | 브랜드 목록 | `GET /cosmetics/brands` |
| T-03 | brandId | 상품 목록 | `GET /cosmetics/products` |
| T-04 | productId | 상품 상세 | `GET /cosmetics/products/:id` |
| T-05 | 장바구니 상태 (로컬) | 선택 상품 목록 | - |
| T-06 | 수령 방식, 연락처 | 주문 요약 | `POST /cosmetics/orders` |
| T-07 | - | 주문 완료 정보 | `GET /cosmetics/orders/:id` |
| T-08 | - | 주문 목록 | `GET /cosmetics/orders` |

### 5.2 Guide 화면

| 화면 ID | 입력 데이터 | 출력 데이터 | API |
|---------|------------|------------|-----|
| G-01 | - | 주문 요약, 세션 목록 | `GET /cosmetics/orders` |
| G-02 | 세션 정보 | 세션 생성 확인 | (로컬 상태) |
| G-03 | 검색어, 필터 | 상품 카탈로그 | `GET /cosmetics/products` |
| G-04 | 여행자 정보, 상품, 수령 방식 | 주문 생성 결과 | `POST /cosmetics/orders` |
| G-05 | 세션 필터 | 주문 목록 | `GET /cosmetics/orders` |
| G-06 | 상태 변경 | 주문 상세 | `GET /cosmetics/orders/:id` |

---

## 6. metadata.travel 연결 지점

### 6.1 주문 생성 시 연결

```
┌─────────────────────────────────────────────────────────────────┐
│                    ORDER CREATION MAPPING                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  [G-04 Order Panel] 또는 [T-06 Order Confirm]                    │
│          │                                                       │
│          ▼                                                       │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ POST /cosmetics/orders                                      ││
│  │                                                             ││
│  │ {                                                           ││
│  │   sellerId: 가이드 또는 매장 ID,                             ││
│  │   items: [...],                                             ││
│  │   metadata: {                                               ││
│  │     channel: 'travel',          ← 필수                      ││
│  │     storeId: 연결 매장 ID,      ← 선택                      ││
│  │     fulfillment: 'on-site' | 'delivery',                    ││
│  │     travel: {                                               ││
│  │       guideId: 가이드 Participant ID,    ← 필수             ││
│  │       guideName: 가이드명,               ← 선택             ││
│  │       tourSessionId: 세션 ID,            ← 선택             ││
│  │       tourDate: '2025-01-02',            ← 선택             ││
│  │       groupSize: 5,                      ← 선택             ││
│  │       taxRefund: {                       ← 선택             ││
│  │         eligible: true,                                     ││
│  │       }                                                     ││
│  │     }                                                       ││
│  │   }                                                         ││
│  │ }                                                           ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 6.2 화면-메타데이터 매핑

| 화면 요소 | metadata 필드 | 필수 여부 |
|----------|---------------|----------|
| 가이드 선택/자동 | `travel.guideId` | **필수** |
| 투어 세션 선택 | `travel.tourSessionId` | 선택 |
| 투어 날짜 | `travel.tourDate` | 선택 |
| 그룹 인원 | `travel.groupSize` | 선택 |
| 세금환급 체크박스 | `travel.taxRefund.eligible` | 선택 |
| 수령 방식 라디오 | `fulfillment` | 선택 |
| 매장 선택 | `storeId` | 선택 |

---

## 7. 의도적으로 하지 않은 UX

### 7.1 명시적 제외 항목

| 제외 항목 | 사유 | 다음 단계 |
|----------|------|----------|
| 결제 화면 설계 | H2-0 범위 외 (PG 미연동) | H3+ |
| 다국어 i18n 설계 | 별도 Work Order 필요 | H3+ |
| Admin 화면 | Travel Admin은 별도 설계 | H3+ |
| 데스크톱 레이아웃 | 모바일 100% 원칙 | N/A |
| 디자인 시스템 상세 | 구현 단계에서 결정 | H3 |
| 오프라인 동기화 | 복잡도 높음, 향후 검토 | H4+ |

### 7.2 결제 관련 제외

- PG 연동 UX
- 결제 수단 선택
- 결제 실패 처리
- 환불 프로세스

→ 모두 **H2-3 또는 H3에서 별도 설계**

### 7.3 정산 관련 제외

- 가이드 커미션 표시
- 정산 내역 화면
- 수익 대시보드

→ 모두 **H2-2에서 별도 설계**

---

## 8. Local 채널과의 분리 원칙

### 8.1 URL 구조

```
Local 채널:  k-cosmetics.neture.co.kr/
Travel 채널: travel.k-cosmetics.neture.co.kr/
             또는
             k-cosmetics.neture.co.kr/travel/
```

### 8.2 코드 구조 제안

```
services/web-k-cosmetics/
├── src/
│   ├── pages/           # Local 채널 페이지
│   │   └── HomePage.tsx
│   ├── travel/          # Travel 채널 전용
│   │   ├── pages/
│   │   │   ├── TravelLanding.tsx    (T-01)
│   │   │   ├── BrandList.tsx        (T-02)
│   │   │   ├── ProductList.tsx      (T-03)
│   │   │   └── ...
│   │   └── guide/       # 가이드 전용
│   │       ├── Dashboard.tsx        (G-01)
│   │       ├── OrderPanel.tsx       (G-04)
│   │       └── ...
│   └── components/      # 공유 컴포넌트
```

### 8.3 API 사용 원칙

| 구분 | Local | Travel |
|------|-------|--------|
| 상품 조회 | `GET /cosmetics/products` | 동일 |
| 브랜드 조회 | `GET /cosmetics/brands` | 동일 |
| 주문 생성 | `channel: 'local'` | `channel: 'travel'` |
| 주문 조회 | `channel=local` 필터 | `channel=travel` 필터 |

---

## 9. 다음 단계 연결

### 9.1 H2-2 (정산/커미션)에서 결정해야 할 사항

- 가이드 수익 표시 방식
- 정산 주기 및 정산서 화면
- 커미션 비율 설정 화면

### 9.2 H2-3 (TaxRefund)에서 결정해야 할 사항

- 세금환급 신청 프로세스
- 환급 상태 추적 UX
- 외부 시스템 연동 흐름

### 9.3 H3 (구현)에서 필요한 사항

- 이 설계 문서 기반 컴포넌트 구현
- 라우팅 구조 확정
- 상태 관리 방식 결정

---

## 10. 승인 체크리스트

- [x] Travel 채널이 Local 채널과 명확히 분리되어 설명됨
- [x] 주문 생성 시점이 H2-0 로직과 정확히 연결됨
- [x] 이 설계만 보고도 구현 Work Order 작성 가능
- [x] 화면을 만들지 않아도 전체 그림이 그려짐

---

*Document Version: 1.0*
*Created by: H2-1 Work Order*
*Design Authority: Platform UX*
