# 외모 → 메뉴 매뉴얼

> **버전**: v0.5.9 (O4O v1.0.0, Menu v2.0.0)
> **마지막 업데이트**: 2025-10-22

## 개요

**메뉴** 기능을 통해 웹사이트의 네비게이션 메뉴를 생성하고 관리할 수 있습니다. 페이지, 글, 카테고리, 태그 등을 메뉴 항목으로 추가하고, 드래그 앤 드롭으로 순서를 변경하여 사용자 친화적인 메뉴를 구성할 수 있습니다.

### 🆕 새로운 기능 (v2.0.0)
- ✨ **역할 기반 메뉴 표시**: 사용자 역할에 따라 메뉴 항목을 선택적으로 표시
- 🔄 **동적 역할 로드**: 데이터베이스에서 실시간으로 역할 목록 가져오기
- 🎨 **향상된 UI**: 역할 선택 인터페이스 추가

## 접근 방법

1. 관리자 대시보드에 로그인
2. 왼쪽 메뉴에서 **외모** 클릭
3. **메뉴** 선택

## 메뉴 목록 관리

### 📋 메뉴 목록 화면

메뉴 목록에서는 다음 정보를 확인할 수 있습니다:

- **메뉴 이름**: 메뉴의 고유 이름
- **위치**: 메뉴가 표시될 위치 (Primary, Footer, Sidebar, Mobile)
- **항목 수**: 메뉴에 포함된 항목 개수
- **상태**: 활성/비활성 상태
- **생성일**: 메뉴 생성 날짜

### 🔍 검색 및 필터링

- **검색**: 메뉴 이름으로 검색
- **상태 필터**: 전체, 활성, 비활성 메뉴 필터링
- **페이지당 항목 수**: 목록 표시 개수 조정

### ⚙️ 일괄 작업

체크박스를 선택하여 여러 메뉴에 대해 일괄 작업 수행:
- **활성화**: 선택된 메뉴들을 활성 상태로 변경
- **비활성화**: 선택된 메뉴들을 비활성 상태로 변경
- **삭제**: 선택된 메뉴들을 영구 삭제

## 메뉴 생성 및 편집

### ➕ 새 메뉴 만들기

1. **메뉴 추가** 버튼 클릭
2. 메뉴 기본 정보 입력:
   - **메뉴 이름**: 관리용 메뉴 이름 (예: "메인 메뉴")
   - **메뉴 슬러그**: URL에 사용될 고유 식별자 (자동 생성)

### 🎯 메뉴 위치 설정

메뉴를 표시할 위치를 선택합니다:
- **🔝 Primary**: 상단 메인 네비게이션
- **🔻 Footer**: 하단 푸터 영역
- **📱 Mobile**: 모바일 전용 메뉴
- **📄 Sidebar**: 사이드바 위젯 영역

## 메뉴 항목 추가

### 📄 페이지 추가

왼쪽 패널의 **페이지** 탭에서:
1. 메뉴에 추가할 페이지를 검색하거나 목록에서 선택
2. 체크박스로 여러 페이지 선택 가능
3. **메뉴에 추가** 버튼 클릭

**표시**: 🔵 파란색 아이콘으로 구분

### 📝 글 추가

왼쪽 패널의 **글** 탭에서:
1. 블로그 포스트나 기타 글 선택
2. 최신 글부터 목록으로 표시
3. 검색 기능으로 특정 글 찾기

**표시**: 🟢 초록색 아이콘으로 구분

### 🏷️ 카테고리 추가

왼쪽 패널의 **카테고리** 탭에서:
1. 글 카테고리 목록 확인
2. 원하는 카테고리 선택하여 추가
3. 카테고리 페이지로 링크됨

**표시**: 🟠 주황색 아이콘으로 구분

### 🏷️ 태그 추가

왼쪽 패널의 **태그** 탭에서:
1. 사용 중인 태그 목록 확인
2. 태그 선택하여 메뉴에 추가
3. 태그 아카이브 페이지로 링크됨

**표시**: 🟣 보라색 아이콘으로 구분

### 🔗 사용자 정의 링크 추가

왼쪽 패널의 **사용자 정의** 탭에서:
1. **링크 URL**: 연결할 웹페이지 주소 입력
2. **링크 텍스트**: 메뉴에 표시될 텍스트 입력
3. **메뉴에 추가** 버튼 클릭

**표시**: ⚫ 회색 아이콘으로 구분

## 메뉴 구조 편집

### 🔄 순서 변경

- 메뉴 항목을 **드래그 앤 드롭**으로 순서 변경
- 위아래로 이동하여 원하는 순서 조정

### 📂 하위 메뉴 만들기

- 항목을 다른 항목 **아래쪽으로 들여쓰기**하여 하위 메뉴 생성
- 최대 3단계까지 중첩 가능
- 드래그하여 들여쓰기 정도 조정

### ✏️ 항목 편집

각 메뉴 항목의 **편집** 버튼(✏️) 클릭하여:

#### 기본 설정
- **네비게이션 레이블**: 메뉴에 표시될 텍스트
- **URL**: 링크 주소 (사용자 정의 링크인 경우)
- **설명**: 메뉴 항목에 대한 설명 (선택사항)

#### 고급 설정
- **링크 대상**:
  - `_self`: 같은 창에서 열기 (기본값)
  - `_blank`: 새 창/탭에서 열기
- **CSS 클래스**: 스타일링을 위한 CSS 클래스 추가
- **관계**: 링크 관계 속성 (SEO용)

#### 🆕 역할 기반 표시 설정
- **표시 대상 역할**: 이 메뉴 항목을 볼 수 있는 사용자 역할 선택
  - 아무것도 선택하지 않으면 **모든 사용자**에게 표시
  - 하나 이상 선택하면 **선택된 역할**을 가진 사용자에게만 표시
  - 역할은 데이터베이스에서 실시간으로 로드
  - 역할 목록은 시스템에서 관리되며 자동으로 업데이트

### 🗑️ 항목 삭제

- 각 항목의 **삭제** 버튼(🗑️) 클릭
- 확인 후 해당 항목이 메뉴에서 제거됨

## 메뉴 저장 및 관리

### 💾 저장

- 모든 변경사항은 **저장** 버튼 클릭 후 적용
- 자동 저장 기능 없음 - 반드시 수동 저장 필요

### 🔄 미리보기

- 저장 후 실제 웹사이트에서 메뉴 표시 확인
- 각 디바이스(데스크톱, 태블릿, 모바일)에서 테스트

## 메뉴 위치별 특징

### 🔝 Primary Menu (메인 메뉴)
- 웹사이트 상단에 표시
- 가장 중요한 네비게이션
- 반응형 디자인 적용

### 🔻 Footer Menu (푸터 메뉴)
- 웹사이트 하단에 표시
- 보조 네비게이션 용도
- 회사 정보, 약관 등 링크

### 📱 Mobile Menu (모바일 메뉴)
- 모바일 디바이스 전용
- 햄버거 메뉴 형태로 표시
- 터치 친화적 인터페이스

### 📄 Sidebar Menu (사이드바 메뉴)
- 페이지 측면에 표시
- 위젯 형태로 구현
- 카테고리별 네비게이션

## 역할 기반 메뉴 표시 (v2.0.0)

### 🎯 개요

사용자의 역할에 따라 특정 메뉴 항목을 선택적으로 표시하거나 숨길 수 있습니다. 이를 통해 사용자 그룹별로 맞춤형 네비게이션 환경을 제공할 수 있습니다.

### 📋 사용 방법

1. **메뉴 항목 편집**
   - 메뉴 항목의 **편집** 버튼 클릭
   - "역할 기반 표시 설정" 섹션으로 스크롤

2. **역할 선택**
   - 표시될 역할 목록이 자동으로 로드됨
   - 각 역할은 색상과 설명으로 구분
   - 체크박스를 클릭하여 역할 선택/해제

3. **동작 방식**
   - **아무것도 선택하지 않음**: 모든 사용자에게 표시
   - **하나 이상 선택**: 선택된 역할을 가진 사용자에게만 표시
   - **모두 선택**: 모든 역할을 가진 사용자에게 표시 (= 아무것도 선택하지 않은 것과 동일)

### 💡 활용 예시

#### 예시 1: 관리자 전용 메뉴
```
메뉴 항목: "관리 도구"
선택된 역할: [관리자]
결과: 관리자 역할을 가진 사용자만 "관리 도구" 메뉴 항목을 볼 수 있음
```

#### 예시 2: 회원 전용 콘텐츠
```
메뉴 항목: "프리미엄 콘텐츠"
선택된 역할: [프리미엄 회원, VIP 회원]
결과: 프리미엄 회원 또는 VIP 회원만 해당 메뉴 항목을 볼 수 있음
```

#### 예시 3: 공개 메뉴
```
메뉴 항목: "홈"
선택된 역할: (없음)
결과: 로그인 여부와 상관없이 모든 사용자에게 표시
```

### 🔄 동적 역할 관리

- 역할 목록은 **데이터베이스에서 실시간으로 로드**
- 새로운 역할을 추가하면 자동으로 선택 목록에 나타남
- 역할이 삭제되면 메뉴 설정에서도 자동으로 제거
- 하드코딩된 값 없이 완전히 동적으로 관리

### ⚙️ 역할 UI 기능

- **모두 선택/해제**: 한 번의 클릭으로 모든 역할 토글
- **시각적 피드백**: 선택된 역할은 파란색 배경으로 강조
- **역할 뱃지**: 각 역할은 고유한 색상의 뱃지로 표시
- **선택 요약**: 하단에 선택된 역할 목록 표시

### ⚠️ 주의사항

1. **로그아웃 사용자**: 역할이 없는 사용자는 "아무것도 선택하지 않은" 메뉴만 볼 수 있음
2. **하위 메뉴**: 상위 메뉴가 숨겨지면 하위 메뉴도 자동으로 숨겨짐
3. **권한과의 차이**: 역할 기반 표시는 UI 레벨에서만 작동하며, 실제 권한 검증은 별도로 필요
4. **캐싱**: 역할 변경 시 사용자의 세션을 갱신해야 메뉴가 업데이트됨

## 사용 팁

### ✅ 권장 사항

1. **메뉴 구조 계획**
   - 사용자 관점에서 논리적인 구조 설계
   - 최대 7±2개 항목으로 제한 (인지 부하 감소)
   - 중요한 항목을 상위에 배치

2. **네이밍 규칙**
   - 명확하고 간결한 메뉴 이름 사용
   - 사용자가 이해하기 쉬운 용어 선택
   - 일관된 명명 규칙 적용

3. **하위 메뉴 활용**
   - 관련 항목들을 그룹화
   - 너무 깊은 중첩 피하기 (최대 3단계)
   - 하위 항목은 5개 이하 권장

4. **모바일 최적화**
   - 터치하기 쉬운 크기 고려
   - 모바일 전용 메뉴 구성
   - 간단한 구조로 설계

5. **🆕 역할 기반 표시 활용**
   - 사용자 경험 개선을 위해 불필요한 메뉴 숨기기
   - 역할별로 적절한 메뉴만 표시하여 혼란 방지
   - 민감한 관리 메뉴는 관리자 역할에만 표시

### ⚠️ 주의사항

1. **링크 검증**
   - 모든 링크가 올바르게 작동하는지 확인
   - 외부 링크는 새 창에서 열기 설정
   - 깨진 링크 정기적으로 점검

2. **권한 관리**
   - 비공개 페이지나 글은 메뉴에서 제외
   - 사용자 권한에 따른 메뉴 표시 고려
   - 로그인 상태별 메뉴 구성

3. **성능 최적화**
   - 메뉴 항목 수 적절히 제한
   - 이미지가 포함된 메뉴 최소화
   - 캐싱 기능 활용

### 🔧 문제 해결

#### 메뉴가 표시되지 않는 경우
1. 메뉴 위치가 올바르게 설정되었는지 확인
2. 테마에서 해당 위치를 지원하는지 확인
3. 캐시 삭제 후 재확인

#### 드래그 앤 드롭이 작동하지 않는 경우
1. 브라우저 새로고침 후 재시도
2. 다른 브라우저에서 테스트
3. JavaScript 에러 확인

#### 하위 메뉴가 제대로 표시되지 않는 경우
1. 테마의 CSS 설정 확인
2. 메뉴 구조 재점검
3. 브라우저 개발자 도구로 스타일 확인

## 키보드 단축키

- **Ctrl + S**: 메뉴 저장
- **Delete**: 선택된 항목 삭제
- **Escape**: 편집 모드 취소
- **Tab**: 다음 입력 필드로 이동

## 접근성 고려사항

- **스크린 리더**: 메뉴 레이블과 설명 정확히 작성
- **키보드 내비게이션**: Tab 키로 메뉴 탐색 가능
- **색상 대비**: 충분한 명도 대비 확보
- **포커스 표시**: 키보드 포커스 시각적 표시

## 업데이트 히스토리

### 버전 2.0.0 (2025-10-05)

#### 🆕 새로운 기능
- **역할 기반 메뉴 표시**: 사용자 역할에 따라 메뉴 항목을 선택적으로 표시/숨김
  - 데이터베이스에서 동적으로 역할 목록 로드
  - 하드코딩 없이 완전 자동화된 역할 관리
  - 다중 역할 선택 지원
  - 실시간 역할 뱃지 표시 (색상, 설명 포함)

#### 🎨 UI/UX 개선
- RoleSelector 컴포넌트 추가
  - 체크박스 기반 다중 선택 인터페이스
  - "모두 선택/해제" 토글 버튼
  - 선택된 역할 시각적 피드백 (파란색 배경)
  - 하단 선택 요약 섹션
- 로딩 및 빈 상태 처리

#### 🔧 기술적 변경
- `MenuItem` 타입에 `visibleRoles?: string[]` 필드 추가
- `/users/roles` API 엔드포인트 연동
- 활성화된 역할만 필터링하여 표시

#### 📝 문서 업데이트
- 역할 기반 표시 기능 설명 추가
- 활용 예시 및 주의사항 문서화
- 동적 역할 관리 설명

### 버전 1.0.0 (초기 릴리스)

#### 핵심 기능
- 메뉴 생성 및 편집
- 드래그 앤 드롭으로 메뉴 구조 조정
- 다양한 메뉴 항목 타입 지원 (페이지, 글, 카테고리, 태그, 사용자 정의 링크)
- 하위 메뉴 지원 (최대 3단계)
- 메뉴 위치 설정 (Primary, Footer, Mobile, Sidebar)
- 일괄 작업 기능 (활성화, 비활성화, 삭제)

---

**📞 지원 문의**: 메뉴 설정에 어려움이 있으시면 고객 지원팀에 문의하세요.