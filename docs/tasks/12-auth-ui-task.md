# 🧩 Task: 사용자 인증 UI 개선 (회원가입 → 승인 흐름 포함)

## 📌 주의 사항 (작업 폴더 경로 명시)

> ⚠️ 반드시 다음 경로 내부에서 작업하세요:

- ✅ 정확한 경로:
  ```
  Coding\o4o-platform\services\main-site
  ```

- ❌ 금지 경로:
  ```
  Coding\auth
  Coding\components\auth
  Coding\src\auth
  ```

---

## 🎯 목적
약사, 판매자, 공급자 등 역할 기반 사용자 등록 및 승인 프로세스를 UI로 구현합니다.  
사용자는 가입 즉시 사용 가능하되, 특정 서비스(예: 약사 전용 기능)는 별도 승인이 필요함을 안내합니다.

---

## 📐 주요 UI 흐름

### 1. 회원가입 (`/register`)
- 이름, 이메일, 비밀번호, 사용자 역할 선택
  - 일반소비자 / 매장 / 판매자 / 공급자 / 약사 / 제휴자
- 제출 후 확인 메시지 (`승인 대기 중인 경우` 안내 포함)

### 2. 로그인 (`/login`)
- 이메일, 비밀번호
- 승인 대기 상태 안내 메시지 포함 (예: “약사 승인이 완료되지 않았습니다”)

### 3. 승인 대기 중 UI
- 승인 대기자용 안내 화면 (`/pending`)
- 사용자 역할에 따라 승인 완료 시까지 접근 제한 안내
- 홈 또는 로그아웃 링크 제공

---

## 🔐 역할 기반 인증 흐름

| 역할       | 승인 여부 | 로그인 후 이동 위치          | 제한 기능                     |
|------------|-----------|-------------------------------|-------------------------------|
| user       | 없음      | `/` (메인 페이지)            | 없음                          |
| member     | 없음      | `/`                          | 없음                          |
| seller     | 필요       | `/seller`                    | 승인 전 판매 기능 차단         |
| supplier   | 필요       | `/supplier`                  | 승인 전 상품 등록 차단         |
| yaksa      | 필요       | `/yaksa`                     | 승인 전 접근 불가             |
| affiliate  | 없음      | `/affiliate`                 | 제휴 UI 즉시 접근 가능         |
| administrator | 없음   | `/admin`                     | 관리 기능 전체 가능           |

---

## 📁 주요 컴포넌트

- `RegisterForm.tsx`
- `LoginForm.tsx`
- `PendingApprovalNotice.tsx`
- `RoleGate.tsx` (접근제어 컴포넌트)

---

## 🧪 테스트 체크리스트

- 승인 대기 상태일 경우 특정 URL 접근 시 안내 메시지와 리디렉션이 작동하는가?
- 승인된 사용자와 미승인 사용자의 역할 기반 권한 구분이 명확한가?
- 회원가입 → 승인 대기 → 승인 완료까지 UI 흐름이 부드럽게 연결되는가?

---

# ✅ Cursor 작업 지시문

## 작업 위치
- `Coding/o4o-platform/services/main-site/src/pages/auth/`
- 컴포넌트는 `/components/auth/` 내에 구성

## 작업 요청
1. 회원가입 `/register`, 로그인 `/login`, 승인대기 `/pending` 페이지를 구성하세요.
2. 승인되지 않은 사용자가 `yaksa`, `seller` 등의 화면 접근 시, `RoleGate` 컴포넌트로 제한하세요.
3. 기본 사용자 역할은 `user`로 설정하며, `yaksa`, `seller`, `supplier`는 관리자가 승인 시 역할 변경됨을 가정합니다.
