# WO-GLYCOPHARM-B2B-PRODUCT-SEED-LINKING-V1

## 목적 (Purpose)

GlycoPharm 서비스에 **상품 데이터는 존재**하나,
약국 화면의 **「일반 B2B 주문」** 영역에 **노출되는 상품이 0건**인 상태임.

본 Work Order의 목적은:

* Glycopharm 상품을 **"일반 B2B 주문 가능 상품"**으로 명확히 연결
* 약국 ↔ 공급자 ↔ 상품 간 **거래 시나리오 데이터 완성**
* UI가 비어 보이지 않는 **정상 B2B 주문 흐름 확보**

---

## 현재 상태 (As-Is)

* Glycopharm 상품: 존재함 (Seed 완료, 10개 제품)
* 이미지 / 바코드: 100% 보유
* B2B 주문 화면 결과: **0건**
* UI 상태: 정상 (빈 상태 메시지 정상 출력)

즉,

> **데이터 없음 ❌ / 조건 불일치 ⭕**

---

## 문제 원인 가설 (확정 대상)

다음 중 하나 이상이 누락된 상태로 추정됨:

1. 상품이 `일반 B2B` 채널로 분류되지 않음
2. 상품의 `service/serviceKey`가 Glycopharm과 불일치
3. 상품–공급자 연결은 있으나,
   **약국–공급자 거래 관계가 없음**
4. 상품 상태값이 B2B 주문 조회 조건에서 제외됨

---

## 작업 범위 (Scope)

### 포함 (In Scope)

1. **Glycopharm B2B 상품 속성 보강**

   * 일반 B2B 주문 화면에 노출되기 위한 필수 필드 설정
   * (예: channel, productType, isB2BEnabled 등 – 기존 코드 기준)

2. **약국 ↔ 공급자 거래 관계 Seed**

   * 테스트 약국 1곳 기준
   * 공급자 1~2곳만 연결 (최소 세트)

3. **Seed Script 보강**

   * 위 관계를 자동으로 생성
   * 재실행 가능해야 함

4. **UI 노출 확인**

   * 일반 B2B 주문 화면에서 상품 목록 표시

---

### 제외 (Out of Scope)

* 가격 정책 고도화
* 최소 주문 수량 / 계약 조건
* 실제 결제/정산 로직
* 프랜차이즈 전용 B2B 로직

---

## 작업 항목 (Tasks)

### T1. 일반 B2B 주문 화면 조회 조건 확인

* 해당 화면이 사용하는 **상품 조회 조건을 코드 기준으로 명확히 파악**
* 필터 조건 목록 정리 (service, channel, status, supplier 관계 등)

**종료 조건**

* "이 조건을 만족해야 노출된다"가 명확해짐

---

### T2. Glycopharm 상품을 일반 B2B 채널로 분류

* Seed된 Glycopharm 상품 중 일부(최소 5~10개)에 대해:

  * `channel = B2B_GENERAL` (또는 동등 개념)
  * `isB2BEnabled = true` (존재 시)
  * 상태값: 주문 가능 상태

**종료 조건**

* DB 상에서 "일반 B2B용 상품" 식별 가능

---

### T3. 약국–공급자 거래 관계 Seed 추가

* 테스트 약국 1곳 선택
* 해당 약국과:

  * 공급자 A
  * (선택) 공급자 B
    간 거래 가능 관계 생성

**종료 조건**

* 약국 기준으로 "거래 가능한 공급자" 존재

---

### T4. Seed Script 통합

* T2, T3 내용을 Seed Script에 반영
* Seed 재실행 시:

  * 중복 생성 ❌
  * 오류 ❌

**종료 조건**

* 한 번의 Seed 실행으로 B2B 주문 테스트 가능

---

### T5. UI 확인 (Smoke Test)

* 경로:
  **약국 관리 → B2B 주문 → 일반 B2B**
* 확인 사항:

  * 상품 목록 표시됨
  * 이미지 정상 표시
  * 공급자 정보 표시

**종료 조건**

* "등록된 상품이 없습니다" 메시지 미노출

---

## 기술 원칙 / 주의사항

* Core 로직 변경 ❌
* 기존 상품 데이터 삭제 ❌
* Migration 불필요 (Seed/속성 보강으로 해결)
* 테스트 목적의 단순 연결만 허용

---

## 완료 기준 (Definition of Done)

* [ ] 일반 B2B 주문 화면에 Glycopharm 상품 노출
* [ ] 최소 1개 이상의 공급자 상품 표시
* [ ] 이미지 포함 정상 렌더링
* [ ] Seed 재실행 가능
* [ ] 빈 상태 메시지 미표시

---

## 산출물 (Deliverables)

* 보강된 Seed Script
* 약국–공급자 거래 관계 데이터
* 일반 B2B 주문 화면 정상 노출 확인

---

**Status**: 🟡 In Progress
**Created**: 2026-01-29
**Priority**: High
