{
  "report_id": "cms_core_alignment",
  "report_date": "2025-12-10",
  "phase": 16,
  "document_base": "docs/specs/cms/cms-cpt-overview.md, cms-media-spec.md, cms-taxonomy-spec.md",

  "overall_alignment_score": 23,
  "status": "ARCHITECTURE_PHILOSOPHY_MISMATCH",

  "philosophy_gap": {
    "documented": "WordPress-style concrete CPT tables (cms_pages, cms_posts, cms_media)",
    "implemented": "Generic framework (CmsCptType, CmsCptField) for dynamic content type definition",
    "severity": "HIGH",
    "notes": "Documentation expects specific Page/Post/Media tables; Implementation provides meta-framework"
  },

  "documented_entities": {
    "Page": {
      "fields": ["id", "title", "slug", "content", "template", "status", "parentId", "order"],
      "implementation_status": "NOT_FOUND_AS_CONCRETE_TABLE"
    },
    "Post": {
      "fields": ["id", "title", "slug", "content", "excerpt", "featuredImageId", "status", "authorId", "publishedAt"],
      "implementation_status": "NOT_FOUND_AS_CONCRETE_TABLE"
    },
    "Media": {
      "fields": ["id", "filename", "originalFilename", "mimeType", "size", "url", "thumbnailUrl", "width", "height"],
      "implementation_status": "NOT_FOUND_AS_CONCRETE_TABLE"
    },
    "Category": {
      "fields": ["id", "name", "slug", "description", "parentId", "order"],
      "implementation_status": "NOT_FOUND_AS_CONCRETE_TABLE"
    },
    "Tag": {
      "fields": ["id", "name", "slug", "description", "color"],
      "implementation_status": "NOT_FOUND_AS_CONCRETE_TABLE"
    }
  },

  "implemented_entities": {
    "CmsCptType": {
      "file": "packages/cms-core/src/entities/CmsCptType.entity.ts",
      "purpose": "Custom Post Type definition metadata",
      "fields": ["id", "name", "slug", "description", "icon", "supports", "hierarchical"]
    },
    "CmsCptField": {
      "file": "packages/cms-core/src/entities/CmsCptField.entity.ts",
      "purpose": "ACF-style field definitions for CPTs",
      "fields": ["id", "cptTypeId", "fieldKey", "fieldType", "label", "required", "options"]
    },
    "CmsCptInstance": {
      "file": "packages/cms-core/src/entities/CmsCptInstance.entity.ts",
      "purpose": "Actual content instances",
      "fields": ["id", "cptTypeId", "title", "slug", "status", "content", "metadata"]
    }
  },

  "gaps": [
    {
      "id": "CMS-001",
      "severity": "HIGH",
      "description": "Documentation describes concrete Page/Post/Media tables but implementation uses generic CPT framework",
      "recommendation": "Either update docs to reflect generic approach OR implement concrete tables for core CPTs"
    },
    {
      "id": "CMS-002",
      "severity": "HIGH",
      "description": "Taxonomy (Category/Tag) documented but not implemented",
      "recommendation": "Implement Category and Tag entities or update documentation"
    },
    {
      "id": "CMS-003",
      "severity": "MEDIUM",
      "description": "Media entity with thumbnail generation not found",
      "recommendation": "Implement media handling or document current approach"
    },
    {
      "id": "CMS-004",
      "severity": "MEDIUM",
      "description": "API endpoints in docs (/api/cms/pages, /api/cms/posts) don't match implementation",
      "recommendation": "Align API routes with actual implementation"
    }
  ],

  "recommendation": {
    "option_a": {
      "name": "Update Documentation",
      "description": "Change docs to reflect generic CPT framework philosophy",
      "effort": "LOW"
    },
    "option_b": {
      "name": "Implement Concrete Tables",
      "description": "Create cms_pages, cms_posts, cms_media tables as documented",
      "effort": "HIGH"
    },
    "suggested": "option_a",
    "rationale": "Generic framework is more flexible; documentation should reflect actual architecture"
  }
}
