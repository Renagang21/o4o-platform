# 코드 정리 PR 체크리스트

**목적**: 미사용 코드 제거 PR의 안전성 보장
**사용 시점**: 코드 삭제/아카이브 PR 생성 시

---

## 📋 필수 항목 (모두 체크 필요)

### 1. 삭제 목록 및 근거

- [ ] 삭제할 파일 목록 명시 (파일 경로 전체)
- [ ] 각 파일의 삭제 근거 설명
  - [ ] 참조 수 0건 (검색 결과 첨부)
  - [ ] 기능 대체 완료 (대체 구현 경로 명시)
  - [ ] 사용자 접근 로그 0건 (해당되는 경우)
- [ ] 삭제 vs 아카이브(/deprecated/) 판단 근거

---

### 2. 영향 범위 분석

- [ ] 영향받는 라우트 목록
- [ ] 영향받는 기능 목록
- [ ] 영향받는 컴포넌트 목록
- [ ] 사이드이펙트 분석 완료
  - [ ] 전역 import 확인
  - [ ] 스타일 주입 확인
  - [ ] 전역 이벤트 리스너 확인
  - [ ] Service Worker 캐시 영향 확인

---

### 3. 정적 분석 (Static Analysis)

- [ ] 프로젝트 전역 검색 수행 (import, require, dynamic import)
- [ ] IDE 인덱스 참조 확인
- [ ] ESLint/TSC 에러 0건
- [ ] 빌드 성공
- [ ] 테스트 통과 (해당되는 경우)

---

### 4. 스모크 테스트 (Smoke Test)

**필수 시나리오**:
- [ ] S1: 저장 일관성 (연속 10회)
- [ ] S2: 동시성 (여러 섹션 동시 저장)
- [ ] S3: 실패 경로 (400/401/500)

**Customizer 관련 삭제인 경우 추가**:
- [ ] 프리셋 적용 → 저장 → 새로고침
- [ ] 초기화 → 저장 → 새로고침
- [ ] 패널 전환 10회 (리로드 0회 확인)

**테스트 결과**:
- [ ] Pass/Fail 명시
- [ ] 콘솔 에러 0건
- [ ] 네트워크 에러 0건

---

### 5. 번들 분석 (Bundle Analysis)

**이전 빌드 대비**:
- [ ] 전체 번들 크기: ___KB → ___KB (변화: -___KB)
- [ ] Admin 청크 크기: ___KB → ___KB (변화: -___KB)
- [ ] 삭제된 청크 목록 명시

**분석 도구 사용**:
- [ ] `vite-plugin-visualizer` 리포트 첨부
- [ ] Lighthouse 점수 비교 (해당되는 경우)

---

### 6. 롤백 계획 (Rollback Plan)

- [ ] 롤백 태그: `___` (커밋 해시 명시)
- [ ] 아카이브 경로: `___` (/deprecated/ 사용 시)
- [ ] 롤백 절차 문서화
- [ ] 긴급 롤백 소요 시간 추정: ___분

---

### 7. 모니터링 계획 (Monitoring Plan)

**배포 후 관찰 항목**:
- [ ] 에러 로그 모니터링 (24~48시간)
- [ ] 사용자 접근 패턴 확인
- [ ] 성능 메트릭 확인 (해당되는 경우)

**알림 설정**:
- [ ] 관련 에러 키워드로 Slack 알림 설정
- [ ] 404 증가 모니터링 (라우트 삭제 시)

---

### 8. 문서 업데이트 (Documentation)

- [ ] 변경 청구서(Changeset) 작성
  - [ ] 무엇을 지웠는지
  - [ ] 왜 지웠는지
  - [ ] 대체 경로는 무엇인지
- [ ] 관련 README/가이드 업데이트
- [ ] API 문서 업데이트 (API 관련 삭제 시)

---

## 🎯 리스크별 추가 체크리스트

### Low 리스크 (즉시 삭제)
- [ ] 참조 0건 확인 (3회 교차 검증)
- [ ] 사이드이펙트 없음 확인

### Medium 리스크 (플래그 테스트)
- [ ] 기능 플래그로 래핑 완료
- [ ] 플래그 OFF로 24시간 배포 완료
- [ ] 에러/경고 0건 확인
- [ ] 사용자 접근 0건 확인

### High/Critical 리스크 (대체 경로 확인)
- [ ] 대체 구현 완전성 확인
- [ ] A/B 테스트 완료 (해당되는 경우)
- [ ] 전환 마이그레이션 가이드 작성
- [ ] 점진적 롤아웃 계획 수립

---

## ✅ 최종 승인 조건 (DoD)

- [ ] 위 모든 항목 체크 완료
- [ ] 리뷰어 1인 이상 승인
- [ ] CI/CD 통과
- [ ] 스모크 테스트 Pass
- [ ] 번들 크기 감소 확인 (또는 변화 없음)
- [ ] 롤백 계획 명확
- [ ] 24~48시간 모니터링 계획 수립

---

## 📝 PR 템플릿 예시

```markdown
## 🗑️ 코드 정리: [간단한 설명]

### 삭제 목록
- `path/to/file1.ts` (이유: 참조 0건, 기능 X로 대체)
- `path/to/file2.tsx` (이유: 라우트 제거됨)

### 영향 범위
- **라우트**: `/old-path` 제거
- **기능**: Legacy Auth 완전 제거
- **컴포넌트**: OldButton → NewButton 전환 완료

### 테스트 결과
- [x] S1~S3 Pass
- [x] 콘솔 에러 0건
- [x] 번들 크기: 1.2MB → 1.15MB (-50KB)

### 롤백 계획
- 태그: `prune-before-auth-legacy-v1` (commit: abc1234)
- 아카이브: `/deprecated/auth-legacy/`
- 롤백 소요: 5분 이내

### 모니터링
- [ ] 24시간 에러 로그 확인
- [ ] 48시간 성능 메트릭 확인
```

---

**다음 작업**: 인벤토리 채우기 → 1차 소거 실행 → PR 생성
