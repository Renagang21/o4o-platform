# E-commerce Core 미적용 예외 승인 규칙

**Version**: 1.0
**Status**: Operational (운영 규칙 고정)
**Last Updated**: 2025-12-13

---

## 1. 목적

E-commerce Core 적용이 기본 원칙이지만,
특정 조건에서는 적용하지 않을 수 있습니다.
이 문서는 미적용 허용 조건과 필수 문서화 절차를 정의합니다.

---

## 2. E-commerce Core 적용 기본 원칙

### 2.1 핵심 원칙

> **"주문/결제 기능이 있는 모든 서비스는 E-commerce Core를 사용한다."**

이 원칙은 **권장 사항이 아닌 기본 전제**입니다.

### 2.2 적용 이유

| 이유 | 설명 |
|------|------|
| **Single Source of Truth** | 모든 판매 데이터의 단일 원장 |
| **통합 통계** | 플랫폼 전체 매출 집계 |
| **구조적 일관성** | 서비스 간 동일한 주문 흐름 |
| **감사 추적** | 모든 거래의 추적 가능성 |

---

## 3. 미적용 허용 조건

### 3.1 허용되는 경우

다음 조건에 **모두 해당**하는 경우에만 E-commerce Core 미적용이 허용됩니다:

| # | 조건 | 설명 |
|---|------|------|
| 1 | **주문/결제 개념이 존재하지 않음** | 구매·판매·결제 행위가 서비스에 없음 |
| 2 | **매출 집계 대상 아님** | 통합 통계에 포함될 필요 없음 |
| 3 | **대안 데이터 흐름 명확** | 데이터가 어디로 흐르는지 문서화됨 |

### 3.2 허용 유형별 상세

#### 유형 A: 순수 컨텐츠/커뮤니티 서비스

| 예시 | 설명 |
|------|------|
| forum-yaksa | 커뮤니티 게시판 |
| forum-cosmetics | 화장품 포럼 |
| lms-yaksa | 교육/학점 관리 (결제 제외) |

**허용 조건**: 게시물/댓글/학점 등 비금전적 데이터만 처리

#### 유형 B: 전환/추적/로그 전용 서비스

| 예시 | 설명 |
|------|------|
| partnerops | 파트너 전환 추적 |
| reporting-yaksa | 보고서 생성 |

**허용 조건**: 주문을 생성하지 않고 기존 주문 데이터를 참조만 함

#### 유형 C: 인프라/UI 전용 패키지

| 예시 | 설명 |
|------|------|
| auth-client, auth-context | 인증 |
| ui, types, utils | 공통 UI/유틸 |
| cms-core, block-core | CMS 인프라 |
| appearance-system | 테마/스타일 |

**허용 조건**: 비즈니스 로직 없음, 인프라 목적

#### 유형 D: 회원/조직 관리 (결제 제외)

| 예시 | 설명 |
|------|------|
| membership-yaksa | 회원 정보 관리 |
| organization-core | 조직 구조 관리 |

**허용 조건**: 회원/조직 정보만 관리, 결제 기능 없음

---

## 4. 미적용 시 필수 문서화 항목

E-commerce Core를 적용하지 않는 서비스는 **반드시** 다음 항목을 문서화해야 합니다:

### 4.1 필수 문서화 내용

```markdown
# [서비스명] E-commerce Core 미적용 사유

## 1. 서비스 개요
- 패키지명: @o4o/[package-name]
- 용도: [서비스 목적]

## 2. 미적용 사유
- [ ] 주문/결제 개념 없음
- [ ] 전환/추적 전용
- [ ] 인프라/UI 전용
- [ ] 기타: [상세 사유]

## 3. 대체 데이터 흐름
- 해당 서비스의 데이터가 어디로 흐르는지 설명
- 통계/집계에 포함되지 않는 이유

## 4. 향후 적용 재검토 기준
- 언제 E-commerce Core 적용을 재검토해야 하는지
```

### 4.2 문서화 위치

미적용 사유는 다음 위치에 기록합니다:

1. **서비스 README** 또는 **manifest.ts 주석**
2. **docs/specs/ecommerce-core/application-status.md** 의 "적용 제외 서비스" 섹션

---

## 5. 향후 적용 재검토 기준

### 5.1 재검토 트리거

다음 상황 발생 시 E-commerce Core 적용을 재검토합니다:

| # | 트리거 | 조치 |
|---|--------|------|
| 1 | 서비스에 결제 기능 추가 | E-commerce Core 적용 필수 |
| 2 | 서비스 데이터가 매출 통계에 필요 | E-commerce Core 적용 검토 |
| 3 | 주문 개념이 도입됨 | E-commerce Core 적용 필수 |

### 5.2 재검토 프로세스

1. 변경 사항 식별
2. `new-service-order-checklist.md` 기준 판단
3. 적용 필요 시 별도 Phase로 작업
4. 문서 업데이트

---

## 6. 현재 미적용 서비스 목록

### 6.1 적용 제외 확정 서비스

| 패키지 | 유형 | 사유 |
|--------|------|------|
| partnerops | B | 전환 추적 시스템 (주문 생성 없음) |
| forum-yaksa | A | 커뮤니티 (결제 없음) |
| forum-cosmetics | A | 커뮤니티 (결제 없음) |
| membership-yaksa | D | 회원 관리 (결제 없음) |
| lms-yaksa | A | 교육/학점 (결제 없음) |
| reporting-yaksa | B | 보고서 생성 (참조만) |
| auth-*, ui, utils | C | 인프라/UI |
| cms-core, block-* | C | CMS 인프라 |
| organization-* | D | 조직 관리 |

### 6.2 미개발 서비스 (향후 적용 예정)

| 패키지 | 예상 유형 | 비고 |
|--------|----------|------|
| tourism-core | 미정 | 개발 시 E-commerce Core 적용 필수 |

---

## 7. 예외 승인 권한

### 7.1 승인 불필요

- 위 3.2의 유형 A~D에 명확히 해당하는 경우
- 문서화만 완료하면 자동 승인

### 7.2 별도 검토 필요

- 유형에 명확히 해당하지 않는 경우
- 기존 적용 서비스에서 제외하려는 경우
- 새로운 예외 유형을 추가하려는 경우

---

## 8. 관련 문서

- [신규 서비스 주문 생성 체크리스트](./new-service-order-checklist.md)
- [개발 에이전트 가이드라인](./agent-guidelines.md)
- [E-commerce Core 적용 현황](../../specs/ecommerce-core/application-status.md)

---

*이 문서는 E-commerce Core 운영 규칙의 일부입니다.*
*변경 시 별도 RFC 또는 Phase 승인 절차가 필요합니다.*
