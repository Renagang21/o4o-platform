# 📄 Investigation Request (IR)

## IR-PLATFORM-CORE-01

**혈당관리 약국 + CGM 서비스 확장을 위한 플랫폼 Core 1차 정합성 조사 요청서**

> **Status**: ✅ Active  
> **Created**: 2025-12-29  
> **Type**: Investigation Request (조사 요청서)

---

## 1. 조사 목적 (Purpose)

본 조사의 목적은 **혈당관리 약국 서비스 및 CGM 서비스(glucoseview)의 확장을 앞두고**, 현재 플랫폼의 **Core 레이어가 다음 조건을 충족하고 있는지**를 객관적으로 점검하는 데 있다.

### 본 조사에서 확인하고자 하는 핵심 질문

1. 플랫폼 Core는 CGM 서비스와 같은 **독립 도메인 기반 서비스**를 구조적으로 수용할 준비가 되어 있는가?
2. 약사·약국·환자 역할 분리가 **개념·도메인·권한 구조상 명확히 유지되고 있는가?**
3. 향후 CGM 기능이 얹힐 경우 **엔티티 충돌·책임 경계 붕괴·AppStore 분류 혼란**이 발생할 가능성은 없는가?

> ❗ 본 조사는 **문제 해결이나 리팩토링을 목표로 하지 않는다.**  
> 오직 "준비 상태와 위험 지점 식별"만을 목적으로 한다.

---

## 2. 조사 범위 (Scope)

### ✅ 포함 범위 (In Scope)

플랫폼의 **공통 Core 영역**에 한정하여 조사한다.

| 구분 | Core / 모듈 | 조사 이유 |
|------|-------------|-----------|
| A-1 | auth-core | 약사 / 약국 / 환자 역할 분리의 기준 |
| A-2 | organization-core | 약국 단위 관리, 세미프렌차이즈 구조 수용성 |
| A-3 | platform-core | 공통 설정, 앱 경계, 서비스 독립성 |
| A-4 | appstore-core | CGM 서비스의 Standalone 유지 가능 여부 |

---

### ❌ 제외 범위 (Out of Scope)

다음 항목은 **이번 조사에서 의도적으로 다루지 않는다.**

* UI / 화면 구성
* 기능 개선 제안
* 리팩토링 설계
* 성능, 보안, 인프라 이슈
* 환자 모바일 앱 구현
* CGM 데이터 연동 방식의 기술 구현

---

## 3. 조사 관점 및 기준 (Evaluation Criteria)

모든 Core는 아래 **3가지 관점**으로만 평가한다.

### A. 기능 준비도 (Preparedness)

해당 Core가 CGM 서비스 확장을 **구조적으로 수용할 준비가 되어 있는지**를 점검한다.

* CGM 관점에서 필요한 개념이 이미 존재하는가
* 화면 없이도 도메인 구조로 설명 가능한가
* Mock 데이터 기반 설명이 가능한 구조인가

### B. 역할·책임 경계 (Boundary)

해당 Core가 **무엇을 책임지고, 무엇을 책임지지 않는지**가 명확한지를 점검한다.

* 약사 / 환자 / 시스템 역할 분리가 명확한가
* 데이터 소유 vs 참조 개념이 혼재되어 있지 않은가
* CGM 해석 결과의 귀속 주체가 혼란스럽지 않은가

### C. 충돌 가능성 (Conflict Risk)

현재는 문제가 없어 보이지만, CGM 서비스 도입 시 **충돌 가능성이 있는 구조적 위험**을 점검한다.

* 동일 개념의 중복 정의 가능성
* 식별자(ID) 기준의 불일치 가능성
* AppStore 분류(Core / Extension / Standalone) 붕괴 위험

---

## 4. 평가 방식 (Scoring)

각 조사 항목은 반드시 아래 중 하나로만 판정한다.

* **PASS**: CGM 확장을 고려해도 문제 없음
* **PARTIAL**: 개념은 있으나 불완전하거나 위험 요소 존재
* **FAIL**: 현 구조로는 CGM 확장 시 충돌 가능성 높음

> 애매한 경우에는 **무조건 PARTIAL**로 판정한다.

---

## 5. 산출물 정의 (Deliverables)

본 조사 완료 후 반드시 아래 산출물을 생성한다.

### ① 플랫폼 Core 기능 준비도 조사표

* Core별 PASS / PARTIAL / FAIL 판정 포함

### ② Core 간 충돌 가능 지점 목록

* 충돌 유형
* 관련 Core
* 위험 발생 시점 (Now / Later)

### ③ 종합 판정 요약

* 지금 바로 개발해도 되는 영역
* 선행 정리가 필요한 영역
* 현재는 손대지 말아야 할 영역

---

## 6. 본 조사에서 하지 않을 것 (Explicit Non-Goals)

아래는 **이번 조사에서 결론을 내리지 않는다.**

* 리팩토링 필요 여부의 최종 판단
* 개발 착수 승인
* 구조 변경 제안
* CGM 서비스 상세 설계

> 이 판단들은 **후속 조사 또는 Work Order 단계**에서 다룬다.

---

## 7. 조사 결과의 사용 원칙

* 본 조사 결과는 이후 모든 **CGM 서비스 관련 개발·리팩토링 논의의 기준점**으로 사용된다.
* 결과는 **단일 진실 소스(Single Source of Truth)**로 관리한다.
* 동일 범위에 대한 재조사는 **IR 버전 업(예: IR-PLATFORM-CORE-02)**으로만 진행한다.

---

## 8. 상태 선언

* 본 문서는 **조사 요청서(IR)**이며
* 조사 결과는 별도 문서로 생성됨: `docs/investigation/ir-platform-core-01-result.md`
* 조사 착수: **2025-12-29**
* 조사 상태: ✅ **ACTIVE**

---

**다음 단계**: IR-PLATFORM-CORE-01 조사 결과 보고서 작성 (auth-core부터 순차 조사)
