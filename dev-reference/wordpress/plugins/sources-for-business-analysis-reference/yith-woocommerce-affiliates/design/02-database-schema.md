# 02. Database Schema - YITH WooCommerce Affiliates

## ğŸ“‹ ê°œìš”

YITH WooCommerce Affiliates í”ŒëŸ¬ê·¸ì¸ì€ ì¶”ì²œ ë§í¬ ê¸°ë°˜ ì»¤ë¯¸ì…˜ ì‹œìŠ¤í…œì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ WordPressì˜ ì‚¬ìš©ì/ë©”íƒ€ í…Œì´ë¸”, WooCommerce ì£¼ë¬¸ í…Œì´ë¸”, ìì²´ ë¡œê·¸ í…Œì´ë¸”ì„ ì¡°í•©í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.  
ë³¸ ë¬¸ì„œëŠ” ì¶”ì²œì¸ ë“±ë¡, ì¶”ì , ì»¤ë¯¸ì…˜ ì €ì¥ ë°©ì‹ ë“± í•µì‹¬ ë°ì´í„° íë¦„ì„ ë¶„ì„í•œ ê²°ê³¼ì…ë‹ˆë‹¤.

---

## 1. ì£¼ìš” í…Œì´ë¸” êµ¬ì¡°

| í…Œì´ë¸” | ì„¤ëª… |
|--------|------|
| `wp_users` | ì¶”ì²œì¸ ê³„ì • ì‚¬ìš©ì |
| `wp_usermeta` | ì¶”ì²œì¸ ê´€ë ¨ ì •ë³´ ì €ì¥ |
| `wp_posts` | WooCommerce ì£¼ë¬¸(post_type = 'shop_order') |
| `wp_postmeta` | ì£¼ë¬¸ì— ì—°ê²°ëœ ì¶”ì²œ ì •ë³´ ì €ì¥ |
| `wp_yith_aff_commissions` *(ë˜ëŠ” ìœ ì‚¬ ì´ë¦„)* | ì»¤ë¯¸ì…˜ ë‚´ì—­ ì €ì¥ |
| `wp_options` | ì¶”ì²œ ì‹œìŠ¤í…œ ì „ì—­ ì„¤ì • ì €ì¥ |

---

## 2. UserMeta í•„ë“œ

| ë©”íƒ€í‚¤ | ì„¤ëª… |
|--------|------|
| `_yith_affiliate_enabled` | ì¶”ì²œì¸ í™œì„±í™” ì—¬ë¶€ |
| `_yith_affiliate_rate` | ê°œì¸ë³„ ì»¤ë¯¸ì…˜ ë¹„ìœ¨ (%) |
| `_yith_affiliate_code` | ê³ ìœ  ì¶”ì²œ ì½”ë“œ (ë§í¬ì— ì‚¬ìš©ë¨) |
| `_yith_affiliate_total_earnings` | ëˆ„ì  ìˆ˜ìµ |
| `_yith_affiliate_total_clicks` | ì¶”ì²œ ë§í¬ í´ë¦­ ìˆ˜ |

---

## 3. PostMeta í•„ë“œ (ì£¼ë¬¸)

| ë©”íƒ€í‚¤ | ì„¤ëª… |
|--------|------|
| `_yith_affiliate_user` | í•´ë‹¹ ì£¼ë¬¸ì„ ìœ ë„í•œ ì¶”ì²œì¸ì˜ user ID |
| `_yith_affiliate_commission_amount` | ì»¤ë¯¸ì…˜ ê¸ˆì•¡ |
| `_yith_affiliate_status` | ìŠ¹ì¸ ì—¬ë¶€ (approved / pending / rejected) |

---

## 4. ì»¤ë¯¸ì…˜ ë¡œê·¸ í…Œì´ë¸” (`yith_aff_commissions`)

| ì»¬ëŸ¼ | ì„¤ëª… |
|------|------|
| `ID` | ì»¤ë¯¸ì…˜ ê³ ìœ  ID |
| `order_id` | WooCommerce ì£¼ë¬¸ ID |
| `user_id` | ì¶”ì²œì¸ user ID |
| `amount` | ì»¤ë¯¸ì…˜ ê¸ˆì•¡ |
| `status` | ìƒíƒœ (pending, approved, rejected) |
| `date_created` | ìƒì„± ì¼ì‹œ |

---

## 5. ì„¤ì • í•­ëª© (wp_options)

| ì˜µì…˜ í‚¤ | ì„¤ëª… |
|---------|------|
| `yith_wcaf_default_rate` | ê¸°ë³¸ ì»¤ë¯¸ì…˜ìœ¨ |
| `yith_wcaf_cookie_days` | ì¶”ì  ì¿ í‚¤ ìœ íš¨ê¸°ê°„ (ì˜ˆ: 30ì¼) |
| `yith_wcaf_auto_approve` | ì»¤ë¯¸ì…˜ ìë™ ìŠ¹ì¸ ì—¬ë¶€ |
| `yith_wcaf_email_notification` | ê´€ë¦¬ì ì•Œë¦¼ ì—¬ë¶€ |

---

## 6. ERD (ê´€ê³„ ê°œìš”)

[wp_users]â”€â”€â”€<ì¶”ì²œì¸ ì •ë³´>â”€â”€â”€[wp_usermeta] â”‚ â”‚ generates â–¼ [shop_order]â”€â”€â”€<postmeta>â”€â”€â”€[ì¶”ì²œ ì •ë³´ + ì»¤ë¯¸ì…˜ ê¸ˆì•¡] â”‚ â–¼ [yith_aff_commissions]


---

## 7. rena-retail ì„¤ê³„ì— ëŒ€í•œ ì‹œì‚¬ì 

| í•­ëª© | ì œì•ˆ ë°©í–¥ |
|------|-----------|
| ì¶”ì²œ ë¡œê·¸ | ì»¤ë¯¸ì…˜ ì²˜ë¦¬ ë‚´ì—­ì€ ë³„ë„ CPT ë˜ëŠ” ì»¤ìŠ¤í…€ í…Œì´ë¸” ë„ì… ê³ ë ¤ |
| ìƒíƒœ ì „ì´ | ì»¤ë¯¸ì…˜ ìŠ¹ì¸ íë¦„ì„ ì›Œí¬í”Œë¡œìš°ë¡œ ì„¤ê³„í•  ìˆ˜ ìˆìŒ |
| ì¶”ì²œ ì½”ë“œ ê´€ë¦¬ | ì½”ë“œ ìƒì„± ë°©ì‹ì€ short code, ë§í¬ ì½”ë“œ, QR ë“± ë‹¤ì–‘í™” ê°€ëŠ¥ |
| ì‚¬ìš©ì êµ¬ì¡° | ì¼ë°˜ ì‚¬ìš©ì â†’ ì¶”ì²œì¸ ì „í™˜ í”Œë¡œìš° í•„ìš” (role or CPT ë°©ì‹) |

---

**ì‘ì„±ì¼**: 2025-04-30  
**ì‘ì„±ì**: ChatGPT


