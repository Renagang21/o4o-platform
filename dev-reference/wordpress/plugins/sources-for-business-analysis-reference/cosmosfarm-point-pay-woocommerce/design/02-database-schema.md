# 02. Database Schema - Cosmosfarm Point Pay for WooCommerce

## π“‹ κ°μ”

Cosmosfarm Point Pay for WooCommerceλ” μ‚¬μ©μλ³„ ν¬μΈνΈ μ •λ³΄λ¥Ό `usermeta`μ— μ €μ¥ν•κ³ , ν¬μΈνΈ μ§€κΈ‰/μ°¨κ° μ΄λ ¥μ€ λ³„λ„ λ΅κ·Έ ν…μ΄λΈ”μ— κΈ°λ΅ν•©λ‹λ‹¤. WooCommerce μ£Όλ¬Έκ³Όλ„ μ—°κ²°λμ–΄ μμ–΄ μ£Όλ¬Έ κΈ°λ° μλ™ μ λ¦½μ΄ κ°€λ¥ν•©λ‹λ‹¤.

---

## 1. μ£Όμ” ν…μ΄λΈ” λ° ν•„λ“

### β… wp_usermeta (ν¬μΈνΈ μ”μ•΅)

| λ©”νƒ€ν‚¤ | μ„¤λ… |
|--------|------|
| `cosmosfarm_point` | μ‚¬μ©μ λ³΄μ  ν¬μΈνΈ (μ •μν•) |

---

### β… ν¬μΈνΈ λ΅κ·Έ ν…μ΄λΈ” (μ»¤μ¤ν…€ ν…μ΄λΈ” λλ” CPT κ°€λ¥μ„±)

| ν•„λ“λ… | μ„¤λ… |
|--------|------|
| `ID` | λ΅κ·Έ ID |
| `user_id` | μ‚¬μ©μ ID |
| `point` | λ³€λ™λ ν¬μΈνΈ μλ‰ (μ–‘μ/μμ) |
| `type` | μ§€κΈ‰ / μ°¨κ° / μ†λ©Έ κµ¬λ¶„ |
| `order_id` | WooCommerce μ£Όλ¬Έ ID (μμ„ κ²½μ°) |
| `reason` | μ§€κΈ‰/μ°¨κ° μ‚¬μ  |
| `expire_date` | μ†λ©Έ μμ •μΌ |
| `created_at` | μƒμ„±μΌμ‹ |

---

## 2. WooCommerce μ£Όλ¬Έ λ©”νƒ€

| λ©”νƒ€ν‚¤ | μ„¤λ… |
|--------|------|
| `_used_cosmosfarm_point` | ν•΄λ‹Ή μ£Όλ¬Έμ—μ„ μ‚¬μ©λ ν¬μΈνΈ |
| `_earned_cosmosfarm_point` | μ£Όλ¬Έ μ™„λ£ ν›„ μ λ¦½λ ν¬μΈνΈ μλ‰ |

---

## 3. μµμ… ν…μ΄λΈ” (μ„¤μ •κ°’ μ €μ¥)

| μµμ… ν‚¤ | μ„¤λ… |
|---------|------|
| `cosmosfarm_point_default_rate` | μ λ¦½ λΉ„μ¨ (%) |
| `cosmosfarm_point_max_usage_rate` | κ²°μ  μ‹ μµλ€ μ‚¬μ© λΉ„μ¨ (%) |
| `cosmosfarm_point_expire_days` | ν¬μΈνΈ μ ν¨κΈ°κ°„ (μ: 365μΌ) |
| `cosmosfarm_point_min_amount_to_use` | μ‚¬μ© κ°€λ¥ν• μµμ† ν¬μΈνΈ μμΉ |

---

## 4. ERD κ°μ” (ν…μ¤νΈ κΈ°λ°)
[wp_users]β”€β”€<meta: cosmosfarm_point>β”€β”€[wp_usermeta] β”‚ β”‚ μ§€κΈ‰/μ°¨κ° λ°μƒ β–Ό [point_log_table] β–² β”‚ μ λ¦½ κΈ°μ¤€ β”‚ [woo_order]β”€β”€<postmeta>β”€β”€[used/earned point]


---

## 5. rena-retail μ„¤κ³„μ— λ€ν• μ‹μ‚¬μ 

| ν•­λ© | μ μ• λ°©ν–¥ |
|------|-----------|
| ν¬μΈνΈ μ”μ•΅ | usermeta κΈ°λ° μ μ§€ κ°€λ¥ν•λ‚, ν™•μ¥μ„± μ„ν•΄ λ³„λ„ ν…μ΄λΈ” κ³ λ ¤ |
| ν¬μΈνΈ λ΅κ·Έ | CPTλ³΄λ‹¤ μ»¤μ¤ν…€ ν…μ΄λΈ”μ΄ μ„±λ¥μƒ μ λ¦¬ (κΈ°κ°„λ³„ μ •λ ¬, ν†µκ³„ λ“±) |
| μ λ¦½ κΈ°μ¤€ | μƒν’/μ¤ν† μ–΄/μΉ΄ν…κ³ λ¦¬ λ‹¨μ„ μ λ¦½ λΉ„μ¨ ν™•μ¥ μ„¤κ³„ ν•„μ” |
| μ‚¬μ© μ΅°κ±΄ | λ³µν•© μ΅°κ±΄(μµμ† μ‚¬μ© ν¬μΈνΈ, νΉμ • μƒν’ μ μ™Έ λ“±) λ΅μ§ μ„¤κ³„ κ³ λ ¤ |

---

**μ‘μ„±μΌ**: 2025-04-30  
**μ‘μ„±μ**: ChatGPT

